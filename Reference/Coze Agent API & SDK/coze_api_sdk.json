{
  "pages": [
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/coze_api_overview",
      "title": "API 介绍",
      "content": {
        "sections": [],
        "full_text": "API 介绍\n\n扣子编程\n\n是新一代一站式 AI 智能体开发平台。无论你是否有编程基础，都可以在平台上快速搭建基于 AI 模型的各类问答智能体。而且你可以将搭建的智能体发布到各类社交平台和通讯软件上，让更多的用户与你搭建的智能体聊天。\n\n​\n\n扣子编程\n\n支持将 AI 智能体和扣子应用发布为 API 服务，你可以通过 HTTP 方式与其进行交互。\n\n​\n\n费用说明\n\n​\n\n个人免费版\n\n：免费使用\n\n扣子编程\n\nAPI，但有一定的额度限制。\n\n​\n\n个人付费版（进阶版、高阶版、旗舰版）、企业版（企业标准版、企业旗舰版）\n\n：涉及大模型处理的 API 会产生模型费用，\n\n音视频的 API 也有对应功能的计费方式。\n\n​\n\n限制说明\n\n​\n\n限流策略\n\n​\n\n扣子编程\n\nAPI 限流策略分为以下两个维度，且不同用户类型的限流策略不同。\n\n​\n\n​\n\n限流策略\n\n​\n\n个人免费版\n\n​\n\n个人付费版\n\n​\n\n企业标准版\n\n​\n\n企业旗舰版\n\n​\n\n​\n\n发起对话\n\nAPI 的流控\n\n​\n\n20 QPS\n\n​\n\n100 QPS\n\n​\n\n200 QPS\n\n​\n\n500 QPS\n\n​\n\n以下关键 API 的流控：\n\n​\n\n​\n\n执行工作流\n\n​\n\n​\n\n执行工作流（流式响应）\n\n​\n\n​\n\n执行对话流\n\n​\n\n​\n\n查询工作流异步运行结果\n\n​\n\n​\n\n查询输出节点的执行结果\n\n​\n\n50 QPS\n\n​\n\n100 QPS\n\n​\n\n200 QPS\n\n​\n\n500 QPS\n\n​\n\n企业超级管理员或管理员可以扩容 API 的 QPS，具体步骤请参见\n\n​\n\n购买扩容服务\n\n。\n\n​\n\n​\n\n上传文件\n\nAPI 的流控\n\n​\n\n10 QPS\n\n​\n\n10 QPS\n\n​\n\n20 QPS\n\n​\n\n20 QPS\n\n​\n\n模型流控。\n\n​\n\n调用\n\n​\n\n发起对话\n\n、\n\n​\n\n执行工作流\n\n、\n\n​\n\n执行工作流（流式响应）\n\n、\n\n​\n\n执行对话流\n\n等涉及模型处理的 API 时，每个用户使用模型的流控。\n\n​\n\n模型每分钟请求数（RPM）为 300。\n\n​\n\n模型每分钟请求数（RPM）为 1000。\n\n​\n\n模型每分钟请求数（RPM）为 5000。\n\n​\n\n​\n\n​\n\n模型每分钟请求数（RPM）为 12000。\n\n​\n\nAPI调用量\n\n​\n\n累计 500 次免费额度。\n\n​\n\n说明\n\n一旦累计调用次数超过免费额度，此账号将无法继续使用任何\n\n扣子编程\n\nAPI。API 免费额度不适用于通过\n\n扣子编程\n\n、其他发布渠道或 SDK 产生的请求。\n\n​\n\n​\n\n不限\n\n​\n\n不限\n\n​\n\n不限\n\n​\n\n​\n\n请求体限制\n\n​\n\nAPI 请求体大小限制如下：\n\n​\n\n工作流相关的 API 请求体大小限制为 20MB。\n\n​\n\n其他类类别的 API 请求体大小限制为 15MB。\n\n​\n\n发送请求\n\n​\n\n将以下命令粘贴到终端中以运行你的第一个 API 请求。\n\n​\n\n在发送请求前，请将示例中的以下参数值替换成真实数据：\n\n​\n\nAuthorization\n\n：生成的\n\n个人访问令牌\n\n。线上环境注意替换为 OAuth 访问密钥，详情参考\n\n​\n\nOAuth 应用管理\n\n。\n\n​\n\nbot_id\n\n：智能体ID。进入智能体的开发页面，开发页面 URL 中\n\nbot\n\n参数后的数字就是智能体ID。例如\n\nhttps://www.coze.cn/space/341****/bot/73428668*****\n\n，\n\nbot_id\n\n为\n\n73428668*****\n\n。\n\n​\n\n说明\n\n确保智能体已发布为 API 服务。详情参考\n\n​\n\n准备工作\n\n。\n\n​\n\n​\n\nuser_id\n\n：标识当前与智能体交互的用户。调试时可将此参数固定为一个任意字符串，例如\n\n123\n\n。\n\n​\n\ncontent\n\n：发送的消息内容。\n\n​\n\n​\n\nShell\n\n复制\n\ncurl --location --request POST 'https://api.coze.c\n\nn\n\n/v3/chat'\n\n\\\n\n​\n\n--header 'Authorization: Bearer\n\npat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****\n\n'\n\n\\\n\n​\n\n--header 'Content-Type: application/json'\n\n\\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"bot_id\": \"\n\n73428668*****\n\n\"\n\n,\n\n​\n\n\"user_id\": \"\n\n123123***\n\n\"\n\n,\n\n​\n\n\"stream\": false\n\n,\n\n​\n\n\"auto_save_history\":true\n\n,\n\n​\n\n\"additional_messages\":\n\n[\n\n​\n\n{\n\n​\n\n\"role\":\"user\"\n\n,\n\n​\n\n\"content\":\"\n\n早上好\n\n\"\n\n,\n\n​\n\n\"content_type\":\"text\n\n\"\n\n​\n\n}\n\n​\n\n]\n\n​\n\n}\n\n'\n\n​\n\n​\n\n说明\n\n如果需要通过火山引擎私有网络访问扣子编程 API ，请参见\n\n​\n\n通过私网连接访问扣子 API\n\n。\n\n​\n\n​\n\n基础概念\n\n​\n\n​\n\n名词\n\n​\n\n说明\n\n​\n\n会话（Conversation）\n\n​\n\n智能体和用户之间的一段问答交互。一个会话包含一条或多条消息，并且能够自动处理截断，以适应模型的上下文内容。\n\n​\n\n消息（Message）\n\n​\n\n一条由用户或智能体创建的消息，消息内容可以包括文本、图片或文件。消息以列表的形式储存在对话中。\n\n​\n\n对话（Chat）\n\n​\n\n在会话中对智能体的一次调用。智能体收到请求后，结合用户输入、通过预设的一系列工作流等配置来调用模型或工具执行指定任务。每个对话都是会话的一部分，智能体会将对话中产生的消息添加到会话中。\n\n​\n\n你可以直接发起对话，与智能体进行一次交互；也可以创建会话和消息，并在指定会话中发起对话，会话中的其他消息会作为历史消息传递给大模型。\n\n​\n\n上下文段落（Section）\n\n​\n\n在智能体对话管理中，Section 是一个独立的上下文段落，用于分隔不同的对话阶段或主题。创建会话时会生成一个 Section，Section 中包含上下文消息，当用户清除上下文时，系统会创建一个新的 Section，从而确保新的对话不受历史消息的影响。\n\n​\n\n会话、消息和上下文段落的关系如下图所示。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n下一篇\n\n更新日志",
        "links": []
      },
      "markdown": "- 个人免费版 ：免费使用 扣子编程 API，但有一定的额度限制。 ​\n\n- 个人付费版（进阶版、高阶版、旗舰版）、企业版（企业标准版、企业旗舰版） ：涉及大模型处理的 API 会产生模型费用， 音视频的 API 也有对应功能的计费方式。 ​\n\n| 限流策略​ | 个人免费版​ | 个人付费版​ | 企业标准版​ | 企业旗舰版​ |\n| ​发起对话API 的流控​ | 20 QPS​ | 100 QPS​ | 200 QPS​ | 500 QPS​ |\n| 以下关键 API 的流控：​​执行工作流​​执行工作流（流式响应）​​执行对话流​​查询工作流异步运行结果​​查询输出节点的执行结果​ | 50 QPS​ | 100 QPS​ | 200 QPS​ | 500 QPS​企业超级管理员或管理员可以扩容 API 的 QPS，具体步骤请参见​购买扩容服务。​ |\n| ​上传文件API 的流控​ | 10 QPS​ | 10 QPS​ | 20 QPS​ | 20 QPS​ |\n| 模型流控。​调用​发起对话、​执行工作流、​执行工作流（流式响应）、​执行对话流等涉及模型处理的 API 时，每个用户使用模型的流控。​ | 模型每分钟请求数（RPM）为 300。​ | 模型每分钟请求数（RPM）为 1000。​ | 模型每分钟请求数（RPM）为 5000。​​​ | 模型每分钟请求数（RPM）为 12000。​ |\n| API调用量​ | 累计 500 次免费额度。​说明一旦累计调用次数超过免费额度，此账号将无法继续使用任何扣子编程API。API 免费额度不适用于通过扣子编程、其他发布渠道或 SDK 产生的请求。​​ | 不限​ | 不限​ | 不限​ |\n\n- ​ 执行工作流 ​\n\n- ​ 执行工作流（流式响应） ​\n\n- ​ 执行对话流 ​\n\n- ​ 查询工作流异步运行结果 ​\n\n- ​ 查询输出节点的执行结果 ​\n\n- 工作流相关的 API 请求体大小限制为 20MB。 ​\n\n- 其他类类别的 API 请求体大小限制为 15MB。 ​\n\n- Authorization ：生成的 个人访问令牌 。线上环境注意替换为 OAuth 访问密钥，详情参考 ​ OAuth 应用管理 。 ​\n\n- bot_id ：智能体ID。进入智能体的开发页面，开发页面 URL 中 bot 参数后的数字就是智能体ID。例如 https://www.coze.cn/space/341****/bot/73428668***** ， bot_id 为 73428668***** 。 ​\n\n- 说明 确保智能体已发布为 API 服务。详情参考 ​ 准备工作 。 ​ ​\n\n- user_id ：标识当前与智能体交互的用户。调试时可将此参数固定为一个任意字符串，例如 123 。 ​\n\n- content ：发送的消息内容。 ​\n\n- ​ Shell 复制 curl --location --request POST 'https://api.coze.c n /v3/chat' \\ ​ --header 'Authorization: Bearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP**** ' \\ ​ --header 'Content-Type: application/json' \\ ​ --data-raw ' { ​ \"bot_id\": \" 73428668***** \" , ​ \"user_id\": \" 123123*** \" , ​ \"stream\": false , ​ \"auto_save_history\":true , ​ \"additional_messages\": [ ​ { ​ \"role\":\"user\" , ​ \"content\":\" 早上好 \" , ​ \"content_type\":\"text \" ​ } ​ ] ​ } ' ​ ​\n\n- 说明 如果需要通过火山引擎私有网络访问扣子编程 API ，请参见 ​ 通过私网连接访问扣子 API 。 ​ ​\n\n| 名词​ | 说明​ |\n| 会话（Conversation）​ | 智能体和用户之间的一段问答交互。一个会话包含一条或多条消息，并且能够自动处理截断，以适应模型的上下文内容。​ |\n| 消息（Message）​ | 一条由用户或智能体创建的消息，消息内容可以包括文本、图片或文件。消息以列表的形式储存在对话中。​ |\n| 对话（Chat）​ | 在会话中对智能体的一次调用。智能体收到请求后，结合用户输入、通过预设的一系列工作流等配置来调用模型或工具执行指定任务。每个对话都是会话的一部分，智能体会将对话中产生的消息添加到会话中。​你可以直接发起对话，与智能体进行一次交互；也可以创建会话和消息，并在指定会话中发起对话，会话中的其他消息会作为历史消息传递给大模型。​ |\n| 上下文段落（Section）​ | 在智能体对话管理中，Section 是一个独立的上下文段落，用于分隔不同的对话阶段或主题。创建会话时会生成一个 Section，Section 中包含上下文消息，当用户清除上下文时，系统会创建一个新的 Section，从而确保新的对话不受历史消息的影响。​会话、消息和上下文段落的关系如下图所示。​​​​​​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/changelog",
      "title": "更新日志",
      "content": {
        "sections": [],
        "full_text": "更新日志\n\n2025年11月\n\n​\n\n​\n\nAPI\n\n​\n\n发布时间\n\n​\n\n变更类型\n\n​\n\n说明\n\n​\n\n​\n\n创建智能体\n\n​\n\n​\n\n更新智能体\n\n​\n\n2025年11月25日\n\n​\n\n新增参数\n\n​\n\n新增\n\napi_mode\n\n参数，用于指定智能体与模型交互时使用的 API 协议，包括\n\nchat_api\n\n和\n\nresponses_api\n\n。具体支持的模型请参见\n\n模型能力差异\n\n。\n\n​\n\n当\n\napi_mode\n\n为\n\nresponses_api\n\n时，\n\nparameters\n\n参数支持配置前缀缓存、存储和存储时长。\n\n​\n\n​\n\n语音合成\n\n​\n\n2025年11月21日\n\n​\n\n新增参数\n\n​\n\n新增\n\ncontext_texts\n\n参数，用于配置豆包语音合成大模型 2.0 音色的辅助信息，控制合成语音的整体情绪（如悲伤、生气）、方言（如四川话、北京话）、语气（如撒娇、暧昧、吵架、夹子音）、语速（快慢）及音调（高低）等。\n\n​\n\n​\n\n双向流式语音合成事件\n\n​\n\n​\n\n双向流式对话上行事件\n\n​\n\n​\n\nRealtime 上行事件\n\n​\n\n2025年11月21日\n\n​\n\n新增参数\n\n​\n\n新增\n\ndata.tts_config.context_texts\n\n参数，用于配置豆包语音合成大模型 2.0 音色的辅助信息，控制合成语音的整体情绪（如悲伤、生气）、方言（如四川话、北京话）、语气（如撒娇、暧昧、吵架、夹子音）、语速（快慢）及音调（高低）等。\n\n​\n\n​\n\n恢复运行工作流\n\n​\n\n2025年11月18日\n\n​\n\n新增接口\n\n​\n\n当调用\n\n执行工作流\n\nAPI 执行包含问答节点、输入节点的工作流时，智能体会以指定问题向用户提问，并等待用户回答。此时工作流为中断状态，开发者需要调用此 API 恢复运行工作流。\n\n​\n\n​\n\n执行工作流\n\n​\n\n​\n\n查询工作流异步运行结果\n\n​\n\n2025年11月18日\n\n​\n\n新增参数\n\n​\n\n新增\n\ninterrupt_data\n\n参数，返回中断事件的详细信息，包含中断控制内容、中断类型和事件 ID 等信息。\n\n​\n\n​\n\n修改企业员工的角色\n\n​\n\n2025年11月3日\n\n​\n\n新增接口\n\n​\n\n修改企业员工的角色。\n\n​\n\n​\n\n创建组织\n\n​\n\n2025年11月3日\n\n​\n\n新增接口\n\n​\n\n在指定的企业中创建组织。\n\n​\n\n​\n\n查询组织列表\n\n​\n\n2025年11月3日\n\n​\n\n新增接口\n\n​\n\n查询指定企业中的组织列表。\n\n​\n\n​\n\n添加组织成员\n\n​\n\n2025年11月3日\n\n​\n\n新增接口\n\n​\n\n用户加入企业时将自动加入默认组织。\n\n创建组织\n\n后，你可以调用本 API 将员工和访客加入对应组织。\n\n​\n\n​\n\n查询组织成员列表\n\n​\n\n2025年11月3日\n\n​\n\n新增接口\n\n​\n\n查询指定组织中的成员列表。\n\n​\n\n​\n\n修改组织成员角色\n\n​\n\n2025年11月3日\n\n​\n\n新增接口\n\n​\n\n修改组织成员的角色。\n\n​\n\n​\n\n2025年10月\n\n​\n\n​\n\nAPI\n\n​\n\n发布时间\n\n​\n\n变更类型\n\n​\n\n说明\n\n​\n\n​\n\n修改组织基本信息\n\n​\n\n2025年10月27日\n\n​\n\n新增接口\n\n​\n\n修改组织的名称和描述。\n\n​\n\n​\n\n修改工作空间基本信息\n\n​\n\n2025年10月27日\n\n​\n\n新增接口\n\n​\n\n修改工作空间的名称和描述。\n\n​\n\n​\n\n查询套餐权益\n\n​\n\n2025年10月24日\n\n​\n\n新增接口\n\n​\n\n查询当前账号所属的套餐类型、扩容管理页面中 API 扩容的信息、通过 MCP 方式调用付费插件的次数限制。\n\n​\n\n​\n\n批量查询插件信息\n\n​\n\n2025年10月24日\n\n​\n\n新增接口\n\n​\n\n批量查询插件的详细信息，支持查询官方插件、三方插件和资源库插件。\n\n​\n\n​\n\n查询插件详情\n\n​\n\n2025年10月24日\n\n​\n\n新增参数\n\n​\n\n返回参数中新增\n\ndata.name_for_model\n\n、\n\ndata.icon_url\n\n、\n\ndata.is_call_available\n\n、\n\ndata.created_at\n\n、\n\ndata.updated_at\n\n。\n\n​\n\n​\n\n查询付费插件列表\n\n​\n\n2025年10月24日\n\n​\n\n新增参数\n\n​\n\nQuery 参数中新增\n\ncategory_ids\n\n。\n\n​\n\n​\n\n添加企业成员\n\n​\n\n2025年10月21日\n\n​\n\n新增接口\n\n​\n\n在火山引擎创建用户后，你可以调用本 API 将用户添加至企业。\n\n​\n\n​\n\n移除组织成员\n\n​\n\n2025年10月21日\n\n​\n\n新增接口\n\n​\n\n如果成员因离职或换部门等场景需要调整归属的组织时，你可以调用本 API 将其移出组织。\n\n​\n\n​\n\n移除企业成员\n\n​\n\n2025年10月21日\n\n​\n\n新增接口\n\n​\n\n移除企业成员，并指定资源接收人。\n\n​\n\n​\n\n双向流式对话上行事件\n\n​\n\n​\n\n双向流式对话下行事件\n\n​\n\n​\n\nRealtime 上行事件\n\n​\n\n​\n\nRealtime 下行事件\n\n​\n\n2025年10月16日\n\n​\n\n新增参数\n\n​\n\n企业旗舰版\n\n新增支持降噪配置，支持两种模式：\n\n​\n\ndata.voice_processing_config.enable_ans\n\n：主动噪声抑制。自动识别并过滤掉背景环境中的各种噪音（如键盘声、空调声、街道嘈杂声），让说话者的声音更清晰。\n\n​\n\ndata.voice_processing_config.enable_pdns\n\n：声纹降噪。专门针对\n\n特定说话人\n\n的声音进行优化，能更精准地保留目标人声。\n\n​\n\n​\n\n双向流式对话上行事件\n\n​\n\n​\n\n双向流式对话下行事件\n\n​\n\n​\n\nRealtime 上行事件\n\n​\n\n​\n\nRealtime 下行事件\n\n​\n\n​\n\n创建房间\n\n​\n\n2025年10月16日\n\n​\n\n新增参数\n\n​\n\n企业旗舰版\n\n新增支持语义判停的自由对话模式（\n\ndata.turn_detection.type=semantic_vad\n\n） 。新增\n\ndata.turn_detection.semantic_vad_config\n\n参数，用于配置判定语音停止的语义检测策略。\n\n​\n\n​\n\n双向流式对话上行事件\n\n​\n\n​\n\n双向流式对话下行事件\n\n​\n\n​\n\n2025年10月15日\n\n​\n\n新增参数\n\n​\n\ndata.output_audio.codec\n\n输出音频编码新增支持 mp3 格式。新增\n\ndata.output_audio.mp3_config\n\n参数，用于配置 mp3 编码参数。\n\n​\n\n​\n\n​\n\n2025年9月\n\n​\n\n​\n\nAPI\n\n​\n\n发布时间\n\n​\n\n变更类型\n\n​\n\n说明\n\n​\n\n​\n\n查询付费插件列表\n\n​\n\n2025年9月29日\n\n​\n\n新增接口\n\n​\n\n查询插件商店中的付费插件列表，包括扣子官方插件和三方插件，或通过关键词模糊搜索相关插件。\n\n​\n\n​\n\n查询插件分类\n\n​\n\n2025年9月29日\n\n​\n\n新增接口\n\n​\n\n获取插件的分类 ID，后续调用\n\n查询插件列表\n\nAPI 查询指定分类下的插件。\n\n​\n\n​\n\n查询插件详情\n\n​\n\n2025年9月29日\n\n​\n\n新增接口\n\n​\n\n查询指定插件的详细信息，包括插件工具列表（工具名称、描述、输入参数和返回参数），以及 MCP Server 的配置信息，以便在 Trae 等外部平台配置 MCP 服务，并调用插件工具。\n\n​\n\n​\n\n调用插件工具\n\n​\n\n2025年9月29日\n\n​\n\n新增接口\n\n​\n\n调用指定付费插件中的工具。\n\n​\n\n​\n\n创建房间\n\n​\n\n2025年9月17日\n\n​\n\n新增参数\n\n​\n\n新增\n\nturn_detection\n\n参数，语音检测类型新增支持按键说话模式。\n\n​\n\n​\n\nRealtime 上行事件\n\n​\n\n​\n\nRealtime 下行事件\n\n​\n\n2025年9月17日\n\n​\n\n新增事件\n\n​\n\n为支持按键说话模式，新增如下事件：\n\n​\n\ninput_audio_buffer.start\n\n：用户开始说话。\n\n​\n\ninput_audio_buffer.complete\n\n：用户结束说话。\n\n​\n\n​\n\n创建房间\n\n​\n\n​\n\n双向流式语音对话\n\n​\n\n2025年9月15日\n\n​\n\n参数下线\n\n​\n\n请求参数中的 workflow id 参数下线，存量 API 不受影响仍可正常使用。\n\n​\n\n如需为对话流中的自定义参数赋值， 请参见\n\n​\n\n为自定义参数赋值\n\n。\n\n​\n\n​\n\n申请插件扩容回调事件\n\n​\n\n​\n\n插件扩容到期回调事件\n\n​\n\n2025年9月12日\n\n​\n\n新增接口\n\n​\n\n如果三方付费插件支持扩容，插件开发者可以订阅插件扩容回调事件。当用户申请插件扩容、扩容申请到期或用户主动取消扩容时，扣子开发平台会向指定的回调地址推送回调消息。\n\n​\n\n​\n\n复制资源\n\n​\n\n2025年9月9日\n\n​\n\n新增接口\n\n​\n\n同工作空间或跨工作空间复制智能体、扣子应用或工作流。\n\n​\n\n​\n\n查询资源复制的结果\n\n​\n\n2025年9月9日\n\n​\n\n新增接口\n\n​\n\n查询资源复制的结果。\n\n​\n\n​\n\nRealtime 上行事件\n\n​\n\n​\n\nRealtime 下行事件\n\n​\n\n2025年9月8日\n\n​\n\n新增参数\n\n​\n\n新增如下参数：\n\n​\n\ndata.asr_config.enable_nostream\n\n：是否开启\n\n二次识别模式\n\n，开启后会实时返回逐字识别的文本；当一句话结束时，会结合整句音频进行上下文分析并重新识别，生成优化后的识别结果并返回。\n\n​\n\ndata.asr_config.enable_emotion\n\n：是否开启识别说话人的情绪。\n\n​\n\ndata.asr_config.enable_gender\n\n：是否开启识别说话人的性别（male/female）。\n\n​\n\ndata.asr_config.sensitive_words_filter\n\n：配置敏感词过滤功能，支持以下 3 种过滤方式：\n\n​\n\n过滤系统敏感词，并替换为\n\n*\n\n。\n\n​\n\n过滤自定义敏感词，并替换为空。\n\n​\n\n过滤自定义敏感词，并替换为\n\n*\n\n。\n\n​\n\n​\n\n查询工作流基本信息\n\n​\n\n2025年9月4日\n\n​\n\n新增参数\n\n​\n\n返回参数中新增\n\ninput\n\n和\n\noutput\n\n参数，用于返回工作流开始节点的输入参数的结构体、结束节点的输出参数的结构体。\n\n​\n\n​\n\n查询工作流的版本列表\n\n​\n\n2025年9月4日\n\n​\n\n新增参数\n\n​\n\n返回参数中新增\n\ninput\n\n和\n\noutput\n\n参数，用于返回工作流开始节点的输入参数的结构体、结束节点的输出参数的结构体。\n\n​\n\n​\n\n双向流式对话上行事件\n\n​\n\n​\n\n双向流式语音合成事件\n\n​\n\n2025年9月4日\n\n​\n\n新增参数\n\n​\n\n新增\n\ndata.output_audio.loudness_rate\n\n参数，用于配置输出音频的音量。\n\n​\n\n​\n\nRealtime 上行事件\n\n​\n\n​\n\n语音合成\n\n​\n\n2025年9月4日\n\n​\n\n新增参数\n\n​\n\n新增\n\ndata.loudness_rate\n\n参数，用于配置输入音频的音量。\n\n​\n\n​\n\n查看智能体版本列表\n\n​\n\n2025年9月3日\n\n​\n\n新增接口\n\n​\n\n查询某个智能体的版本列表，支持查询已发布版本或未发布版本的版本号、版本创建者信息、创建时间等。\n\n​\n\n​\n\n创建工作空间\n\n​\n\n2025年9月3日\n\n​\n\n新增接口\n\n​\n\n创建工作空间\n\n​\n\n​\n\n开启或关闭智能体多人协作\n\n​\n\n2025年9月3日\n\n​\n\n新增接口\n\n​\n\n开启或关闭智能体多人协作模式。\n\n​\n\n​\n\n开启或关闭工作流多人协作\n\n​\n\n2025年9月3日\n\n​\n\n新增接口\n\n​\n\n开启或关闭工作流多人协作模式。\n\n​\n\n​\n\n2025年8月\n\n​\n\n​\n\nAPI\n\n​\n\n发布时间\n\n​\n\n变更类型\n\n​\n\n说明\n\n​\n\n​\n\n添加智能体的协作者\n\n​\n\n2025年8月29日\n\n​\n\n新增接口\n\n​\n\n添加智能体的协作者。\n\n​\n\n​\n\n添加应用的协作者\n\n​\n\n2025年8月29日\n\n​\n\n新增接口\n\n​\n\n添加应用的协作者。\n\n​\n\n​\n\n删除智能体的协作者\n\n​\n\n2025年8月29日\n\n​\n\n新增接口\n\n​\n\n删除智能体的协作者。\n\n​\n\n​\n\n删除应用的协作者\n\n​\n\n2025年8月29日\n\n​\n\n新增接口\n\n​\n\n删除应用的协作者。\n\n​\n\n​\n\n添加工作流协作者\n\n​\n\n2025年8月29日\n\n​\n\n新增接口\n\n​\n\n添加工作流的协作者。\n\n​\n\n​\n\n删除工作流协作者\n\n​\n\n2025年8月29日\n\n​\n\n新增接口\n\n​\n\n删除工作流的协作者。\n\n​\n\n​\n\n发起对话\n\n​\n\n2025年8月29日\n\n​\n\n新增参数\n\n​\n\n新增\n\npublish_status\n\n和\n\nbot_version\n\n参数。\n\n​\n\npublish_status\n\n：用于指定与已发布版本或草稿版本的智能体对话。\n\n​\n\nbot_version\n\n：用于指定与某个特定版本的智能体对话。\n\n​\n\n​\n\n绑定设备\n\n​\n\n2025年8月21日\n\n​\n\n新增接口\n\n​\n\n硬件厂商可以调用本 API 将企业内的硬件设备与企业的自定义渠道绑定，当开发者发布智能体到该自定义渠道时，在发布配置页面的设备列表中选择对应的设备，即可快速发布到对应设备。\n\n​\n\n​\n\n发布智能体\n\n​\n\n2025年8月21日\n\n​\n\n新增参数\n\n​\n\n新增\n\nconnectors\n\n参数，智能体发布自定义渠道时，你可以通过该参数传递自定义参数给渠道。例如，设置将智能体发布到指定设备。\n\n​\n\n​\n\n更新会话名称\n\n​\n\n2025年8月4日\n\n​\n\n新增接口\n\n​\n\n会话创建者可以更新指定会话的会话名，以便更好地识别和管理会话。\n\n​\n\n​\n\n删除会话\n\n​\n\n2025年8月4日\n\n​\n\n新增接口\n\n​\n\n会话创建者可以删除指定的会话。\n\n​\n\n​\n\n创建会话\n\n​\n\n2025年8月4日\n\n​\n\n新增参数\n\n​\n\n请求参数新增\n\nname\n\n参数，用于指定会话的名称。\n\n​\n\n返回参数新增\n\ncreator_id\n\n和\n\nconnector_id\n\n，返回会话的创建者 ID、会话在哪个渠道创建。\n\n​\n\n​\n\n查看会话信息\n\n​\n\n2025年8月4日\n\n​\n\n新增参数\n\n​\n\n返回参数新增\n\nname\n\n、\n\ncreator_id\n\n和\n\nconnector_id\n\n，返回会话的名称、会话的创建者 ID、会话在哪个渠道创建。\n\n​\n\n​\n\n语音合成\n\n​\n\n2025年8月4日\n\n​\n\n新增参数\n\n​\n\n请求参数新增\n\nemotion\n\n和\n\nemotion_scale\n\n，用于设置多情感音色的情感类型和情感值。\n\n​\n\n​\n\n双向流式语音合成事件\n\n​\n\n2025年8月4日\n\n​\n\n新增参数\n\n​\n\n更新语音合成配置上行事件中，新增\n\ndata.output_audio.emotion_config\n\n参数，用于设置多情感音色的情感类型和情感值。\n\n​\n\n​\n\n双向流式对话上行事件\n\n​\n\n2025年8月4日\n\n​\n\n新增参数\n\n​\n\n更新对话配置上行事件中，新增\n\ndata.output_audio.emotion_config\n\n参数，用于设置多情感音色的情感类型和情感值。\n\n​\n\n​\n\nRealtime 上行事件\n\n​\n\n2025年8月4日\n\n​\n\n新增参数\n\n​\n\n更新房间配置上行事件中，新增\n\ndata.tts_config\n\n参数，用于设置多情感音色的情感类型和情感值。\n\n​\n\n​\n\n2025年7月\n\n​\n\n​\n\nAPI\n\n​\n\n发布时间\n\n​\n\n变更类型\n\n​\n\n说明\n\n​\n\n​\n\n下架智能体\n\n​\n\n2025年7月25日\n\n​\n\n新增接口\n\n​\n\n智能体发布后，你可以调用本 API 从扣子官方渠道及自定义渠道下架智能体。\n\n​\n\n​\n\n查询工作流列表\n\n​\n\n2025年7月24日\n\n​\n\n新增接口\n\n​\n\n查询指定工作空间中的工作流列表及其基本信息。\n\n​\n\n​\n\n查询工作流基本信息\n\n​\n\n2025年7月24日\n\n​\n\n新增接口\n\n​\n\n查询工作流的基本信息，包括工作流名称、描述、创建者信息等。\n\n​\n\n​\n\n查询工作流的版本列表\n\n​\n\n2025年7月24日\n\n​\n\n新增接口\n\n​\n\n查询某个工作流的所有历史版本记录，包括版本号、版本描述、操作者和发布时间。\n\n​\n\n​\n\n执行工作流\n\n​\n\n​\n\n执行工作流（流式响应）\n\n​\n\n​\n\n查询工作流异步运行结果\n\n​\n\n2025年7月24日\n\n​\n\n新增参数\n\n​\n\n返回参数中新增\n\nUsage\n\n参数，返回本次 API 调用消耗的 Token 数量等信息。\n\n​\n\n​\n\n创建回调应用\n\n​\n\n2025年7月22日\n\n​\n\n新增接口\n\n​\n\n创建回调应用，支持创建普通回调应用和渠道回调应用。订阅扣子回调功能时需要创建回调应用。\n\n​\n\n​\n\n修改回调应用\n\n​\n\n2025年7月22日\n\n​\n\n新增接口\n\n​\n\n修改回调应用的名称和回调地址。\n\n​\n\n​\n\n查询回调应用列表\n\n​\n\n2025年7月22日\n\n​\n\n新增接口\n\n​\n\n查询回调应用列表。\n\n​\n\n​\n\n删除回调应用\n\n​\n\n2025年7月22日\n\n​\n\n新增接口\n\n​\n\n如果不再需要接收扣子回调，可以删除回调应用。一旦删除，该回调应用所订阅的所有回调事件触发时，将不再向该回调应用推送通知。\n\n​\n\n​\n\n订阅回调事件\n\n​\n\n2025年7月22日\n\n​\n\n新增接口\n\n​\n\n订阅回调事件。\n\n​\n\n​\n\n查询已订阅的事件\n\n​\n\n2025年7月22日\n\n​\n\n新增接口\n\n​\n\n查询回调应用中已订阅的事件。\n\n​\n\n​\n\n取消订阅事件\n\n​\n\n2025年7月22日\n\n​\n\n新增接口\n\n​\n\n如果不再需要订阅某个回调事件，可以取消订阅。一旦取消订阅，对应回调事件触发时，将不再向该回调地址推送通知。\n\n​\n\n​\n\n提交消息评价\n\n​\n\n2025年7月10日\n\n​\n\n新增接口\n\n​\n\n会话创建者可以对智能体或应用回复的消息提交评价，包括点赞、点踩和反馈详细的评论。\n\n​\n\n​\n\n删除消息评价\n\n​\n\n2025年7月10日\n\n​\n\n新增接口\n\n​\n\n删除指定消息的评价。\n\n​\n\n​\n\n查询文件夹列表\n\n​\n\n2025年7月8日\n\n​\n\n新增接口\n\n​\n\n工作空间中的用户可以查询工作空间中的文件夹列表。\n\n​\n\n​\n\n查询文件夹详情\n\n​\n\n2025年7月8日\n\n​\n\n新增接口\n\n​\n\n工作空间中的用户可以查询工作空间中指定文件夹的详情，包括文件夹的名称、描述、所属工作空间、文件夹创建者的 UID等。\n\n​\n\n​\n\n2025年6月\n\n​\n\n​\n\nAPI\n\n​\n\n发布时间\n\n​\n\n变更类型\n\n​\n\n说明\n\n​\n\n​\n\n发起对话\n\n​\n\n2025年6月26日\n\n​\n\n新增参数\n\n​\n\nBody 中新增\n\nenable_card\n\n参数，用于设置问答节点返回的内容是否为卡片形式。\n\n​\n\n​\n\n查看智能体列表\n\n​\n\n2025年6月18日\n\n​\n\n新增接口\n\n​\n\n查看指定空间的智能体列表，包含草稿状态的智能体和已发布的智能体。\n\n​\n\n​\n\n查看智能体配置\n\n​\n\n2025年6月18日\n\n​\n\n新增接口\n\n​\n\n查看指定智能体的配置信息，包括草稿状态和已发布的智能体。\n\n​\n\n​\n\n查看应用列表\n\n​\n\n2025年6月18日\n\n​\n\n新增接口\n\n​\n\n查看指定空间的应用列表。\n\n​\n\n​\n\n查看空间成员列表\n\n​\n\n2025年6月18日\n\n​\n\n新增接口\n\n​\n\n查看指定空间的成员列表。\n\n​\n\n​\n\n批量邀请用户加入空间\n\n​\n\n2025年6月18日\n\n​\n\n新增接口\n\n​\n\n批量邀请用户加入空间，并设置用户是空间管理员或空间成员。\n\n​\n\n​\n\n批量移除空间中的用户\n\n​\n\n2025年6月18日\n\n​\n\n新增接口\n\n​\n\n将用户从指定的工作空间中移除。\n\n​\n\n​\n\n查看空间列表\n\n​\n\n2025年6月18日\n\n​\n\n新增参数\n\n​\n\n在\n\nQuery\n\n中新增\n\nuser_id\n\n和\n\ncoze_account_id\n\n参数，可以查看指定用户在指定组织下加入的工作空间。\n\n​\n\n​\n\n查询输出节点的执行结果\n\n​\n\n2025年6月18日\n\n​\n\n新增接口\n\n​\n\n根据工作流的执行 ID 以及\n\n查询工作流异步执行结果\n\n中返回的节点执行 uuid， 逐一查询节点每次执行的输出内容。\n\n​\n\n​\n\n查询工作流异步运行结果\n\n​\n\n2025年6月18日\n\n​\n\n新增参数\n\n​\n\n新增\n\nnode_execute_status\n\n参数，返回输出节点的运行情况。当输出节点的输出内容超过 1MB 时，会返回该字段。\n\n​\n\n​\n\n2025年5月\n\n​\n\n​\n\nAPI\n\n​\n\n发布时间\n\n​\n\n变更类型\n\n​\n\n说明\n\n​\n\n更新对话配置\n\n​\n\n2025年5月07日\n\n​\n\n新增参数\n\n​\n\n新增\n\ndata.asr_config.enable_ddc\n\n参数，用于设置是否开启语义顺滑功能。开启后，系统在语音处理时会自动去除识别结果中的 “啊”“嗯” 等语气词，使输出文本语义更流畅。\n\n​\n\n新增\n\ndata.asr_config.enable_itn\n\n参数，用于设置在语音转文本时，是否进行文本纠错。\n\n​\n\n新增\n\ndata.asr_config.enable_punc\n\n参数，用于设置在语音转文本时，是否给文本加上标点符号。\n\n​\n\n​\n\n2025年4月\n\n​\n\n​\n\nAPI\n\n​\n\n发布时间\n\n​\n\n变更类型\n\n​\n\n说明\n\n​\n\n​\n\n设置用户变量的值\n\n​\n\n2025年4月22日\n\n​\n\n新增接口\n\n​\n\n设置智能体或应用中的用户变量的值。\n\n​\n\n​\n\n获取用户变量的值\n\n​\n\n2025年4月22日\n\n​\n\n新增接口\n\n​\n\n获取智能体或应用中设置的用户变量的值。\n\n​\n\n​\n\n发起对话\n\n​\n\n2025年4月18日\n\n​\n\n新增参数\n\n​\n\n新增\n\nparameters\n\n参数传入自定义参数的值。如果在对话流开始节点的输入参数中设置自定义参数，调用本接口发起对话时，可以通过\n\nparameters\n\n参数传入对应的值等。\n\n​\n\n​\n\n获取已发布智能体的配置（即将下线）\n\n​\n\n2025年4月17日\n\n​\n\n新增参数\n\n​\n\n新增\n\nvoice_info_list\n\n参数，获取智能体的音色。\n\n​\n\n新增\n\nbackground_image_info\n\n参数，获取智能体背景的图片信息。\n\n​\n\n​\n\n双向流式对话上行事件\n\n​\n\n2025年4月10日\n\n​\n\n新增参数\n\n​\n\nchat.update\n\n事件新增 interrupt_config 配置，支持语音指定关键词打断能力。\n\n​\n\nchat.update\n\n事件中的 asr_config 配置新增 user_language 配置，支持设置用户说话语种。\n\n​\n\nchat.update\n\n事件中新增 prologue_content 自定义开场白。\n\n​\n\n​\n\n双向流式对话上行事件\n\n​\n\n2025年4月2日\n\n​\n\n新增参数\n\n​\n\nchat.update\n\n事件新增 asr_config 配置，支持配置热词等。\n\n​\n\n​\n\n2025年3月\n\n​\n\n​\n\n​\n\n双向流式对话上行事件\n\n​\n\n2025年3月24日\n\n​\n\n新增音频编码\n\n​\n\n输入的音频格式支持\n\ng711\n\n格式。\n\n​\n\n​\n\n创建会话\n\n​\n\n2025年3月21日\n\n​\n\n新增参数\n\n​\n\n创建会话时支持指定 bot_id，便于后续查看指定智能体的会话。\n\n​\n\n​\n\n查看消息列表\n\n​\n\n2025年3月21日\n\n​\n\n新增参数\n\n​\n\n新增请求参数 order、chat_id、before_id、after_id 和 limit，用于筛选符合要求的消息。\n\n​\n\n​\n\n清除上下文\n\n​\n\n2025年3月21日\n\n​\n\n新增 API\n\n​\n\n用于清除指定会话中存储的上下文消息。\n\n​\n\n​\n\n查看会话列表\n\n​\n\n2025年3月21日\n\n​\n\n新增 API\n\n​\n\n查看用户与指定智能体的所有会话记录。\n\n​\n\n​\n\n双向流式对话上行事件\n\n​\n\n​\n\n2025年3月21日\n\n​\n\n新增事件\n\n​\n\n新增\n\ninput_audio_buffer.speech_started\n\n事件，表示服务端识别到用户正在说话。\n\n​\n\n新增\n\ninput_audio_buffer.speech_stopped\n\n事件，表示服务端识别到用户已停止说话。\n\n​\n\n​\n\n2025年3月21日\n\n​\n\n新增参数\n\n​\n\nchat.update\n\n事件新增\n\ndata.turn_detection\n\n参数，用于配置对话中语音检测的相关参数，包括检测模式、检测到语音前收录的前置音频时长和持续静音时停止检测的时长。\n\n​\n\n新增 server_vad 能力。\n\n​\n\n​\n\n2025年3月20日\n\n​\n\n新增参数\n\n​\n\nchat.update\n\n事件新增\n\ndata.need_play_prologue\n\n参数，用于配置是否播放开场白。\n\n​\n\n​\n\n2025年3月19日\n\n​\n\n新增参数\n\n​\n\nchat.update\n\n事件新增\n\ndata.event_subscriptions\n\n参数，用于配置订阅下行事件。\n\n​\n\n​\n\n2025年3月18日\n\n​\n\n新增参数\n\n​\n\nchat.update\n\n事件新增\n\n​\n\ndata.output_audio.pcm_config. frame_size_ms\n\n参数，用于配置输出每包 pcm 音频的时长大小。\n\n​\n\n新增\n\ndata.output_audio.pcm_config. limit_config\n\n参数，用于配置输出音频限流，包括周期时长和周期内最大返回的 pcm 包数量。\n\n​\n\n​\n\nRealtime 上行事件\n\n​\n\n2025年3月18日\n\n​\n\n新增事件\n\n​\n\n新增\n\nmode.update\n\n事件，更新房间模式和对话设置。\n\n​\n\n​\n\nRealtime 下行事件\n\n​\n\n2025年3月18日\n\n​\n\n新增事件\n\n​\n\n新增\n\nmode.updated\n\n事件，当房间模式更新成功后，返回最新的房间模式设置。\n\n​\n\n​\n\n​\n\n2025年2月\n\n​\n\n​\n\nAPI\n\n​\n\n发布时间\n\n​\n\n变更类型\n\n​\n\n说明\n\n​\n\n​\n\n添加发布平台\n\n​\n\n2025年3月3日\n\n​\n\n新增 API\n\n​\n\n为指定空间添加一个发布渠道。添加渠道后，空间中的每个开发者都可以将自己的 AI 项目发布到这些渠道中。\n\n​\n\n​\n\n2025年2月\n\n​\n\n​\n\nAPI\n\n​\n\n发布时间\n\n​\n\n变更类型\n\n​\n\n说明\n\n​\n\n​\n\n发起对话\n\n与消息管理相关 API\n\n​\n\n2025年2月20日\n\n​\n\n新增参数\n\n​\n\n以下 API 新增 reasoning_content 参数，表示 DeepSeek R1 模型的思维链。\n\n​\n\n​\n\n发起对话\n\n​\n\n​\n\n查看消息详情\n\n​\n\n​\n\n查看消息列表\n\n​\n\n​\n\n查看对话消息详情\n\n​\n\n​\n\n上传文件\n\n​\n\n2025年2月19日\n\n​\n\n参数变更\n\n​\n\n支持上传多种文件格式，包括音频、视频、压缩文件等。\n\n​\n\n工作流相关 API\n\n​\n\n2025年2月10日\n\n​\n\n新增参数\n\n​\n\n​\n\n执行工作流\n\n和\n\n​\n\n执行工作流（流式响应）\n\n支持使用扣子的文件 ID 作为入参。\n\n​\n\n语音相关 API\n\n​\n\n2025年2月7日\n\n​\n\n新增 API\n\n​\n\n新增\n\n​\n\n语音识别\n\n，支持将语音文件转为文字。\n\n​\n\n​\n\n语音合成\n\nAPI 正式开放，无需申请白名单。\n\n​\n\n​\n\n创建智能体\n\n等智能体相关 API\n\n​\n\n2025年2月7日\n\n​\n\n新增参数\n\n​\n\n更新以下智能体相关 API，支持为智能体绑定工作流、插件和模型。\n\n​\n\n​\n\n创建智能体\n\n​\n\n​\n\n更新智能体\n\n​\n\n​\n\n获取已发布智能体的配置（即将下线）\n\n​\n\n​\n\n发起对话\n\n​\n\n2025年2月7日\n\n​\n\n新增参数\n\n​\n\nobject_string object 支持音频内容，对话时可输入语音文件或 URL。\n\n​\n\n新增参数 shortcut_command，支持 API 方式执行快捷指令。\n\n​\n\n​\n\n2025年1月\n\n​\n\n​\n\nAPI\n\n​\n\n发布时间\n\n​\n\n变更类型\n\n​\n\n说明\n\n​\n\n​\n\n更新审核结果\n\n​\n\n2025年1月9日\n\n​\n\n新增 API\n\n​\n\n更新智能体发布到自定义渠道的审核结果。\n\n​\n\n​\n\n2024年12月\n\n​\n\n​\n\nAPI\n\n​\n\n发布时间\n\n​\n\n变更类型\n\n​\n\n说明\n\n​\n\n​\n\n复刻音色\n\n等语音相关 API\n\n​\n\n2024年12月24日\n\n​\n\n新增 API\n\n​\n\n新增语音相关 API，用于智能语音通话场景。\n\n​\n\n​\n\n复刻音色\n\n​\n\n​\n\n查看音色列表\n\n​\n\n​\n\n创建房间\n\n​\n\n​\n\n语音合成\n\n​\n\n说明\n\n体验智能语音功能之前，需要先\n\n申请公测\n\n。\n\n​\n\n​\n\n​\n\n创建知识库文件\n\n​\n\n2024年12月16日\n\n​\n\n新增参数\n\n​\n\n新增 source_file_id 参数，向图片知识库中上传文件。\n\n​\n\n​\n\n创建文本知识库\n\n等知识库 API\n\n​\n\n2024年12月16日\n\n​\n\n新增 API\n\n​\n\n新增知识库管理 API，包括创建知识库、查看知识库列表等。\n\n​\n\n​\n\n创建文本知识库\n\n​\n\n​\n\n查看知识库列表\n\n​\n\n​\n\n修改知识库信息\n\n​\n\n​\n\n删除知识库\n\n​\n\n​\n\n查看知识库文件上传进度\n\n​\n\n​\n\n更新知识库图片描述\n\n​\n\n​\n\n查看知识库图片列表\n\n​\n\n​\n\n执行对话流\n\n​\n\n2024年12月11日\n\n​\n\n新增 API\n\n​\n\n执行已发布的对话流。对话流是基于对话场景的特殊工作流，关于对话流的详细说明可参考\n\n​\n\n工作流与对话流\n\n。\n\n​\n\n​\n\n2024年10月\n\n​\n\n​\n\nAPI\n\n​\n\n发布时间\n\n​\n\n变更类型\n\n​\n\n说明\n\n​\n\n​\n\n执行工作流\n\n​\n\n2024年10月30日\n\n​\n\n新增参数\n\n​\n\n扣子专业版用户调用此接口时，支持通过\n\nis_async\n\n参数异步运行工作流，适用于工作流执行耗时较长，导致运行超时的情况。异步运行时，工作流整体超时时间限制由 3 分钟延长至 24 小时，LLM 节点由 3 分钟延长至 5 分钟。\n\n​\n\n​\n\n查询工作流异步运行结果\n\n​\n\n2024年10月30日\n\n​\n\n新增 API\n\n​\n\n调用接口\n\n​\n\n执行工作流\n\n时，如果选择异步执行工作流，响应信息中会返回 execute_id，开发者可以通过本接口查询指定事件的执行结果。\n\n​\n\n涉及所有 API 接口\n\n​\n\n2024年10月15日\n\n​\n\n修改 PAT 有效期\n\n​\n\n2024年10月16日开始，新创建的\n\n个人访问密钥（PAT）\n\n，有效期最长可设置为 30天。在此之前已创建的个人访问密钥有效期不受影响。\n\n​\n\n​\n\n2024年9月\n\n​\n\n​\n\nAPI\n\n​\n\n发布时间\n\n​\n\n变更类型\n\n​\n\n说明\n\n​\n\n​\n\n查看空间列表\n\n​\n\n2024年9月24日\n\n​\n\n新增 API\n\n​\n\n此 API 用于查看当前账号加入的空间列表。\n\n​\n\n​\n\n删除消息\n\n​\n\n2024年9月2日\n\n​\n\n新增 API\n\n​\n\n此 API 用于删除指定会话中的消息。\n\n​\n\n​\n\n发起对话\n\n​\n\n2024年9月2日\n\n​\n\n新增参数\n\n​\n\n​\n\n发起对话\n\n接口增加请求参数 extra_params，通常用于特殊场景下指定一些必要参数供模型判断，例如指定经纬度，并询问智能体此位置的天气。\n\n​\n\n​\n\n获取已发布智能体的配置（即将下线）\n\n​\n\n2024年9月2日\n\n​\n\n新增参数\n\n​\n\n​\n\n获取已发布智能体的配置（即将下线）\n\n接口增加返回参数 knowledge，查看智能体详细配置时可查看智能体绑定的知识库列表。\n\n​\n\n消息相关 API：\n\n​\n\n创建消息\n\n、\n\n​\n\n查看消息列表\n\n、\n\n​\n\n查看消息详情\n\n和\n\n​\n\n修改消息\n\n​\n\n文件相关 API：\n\n​\n\n上传文件\n\n、\n\n​\n\n查看文件详情\n\n​\n\n会话相关 API：\n\n​\n\n创建会话\n\n、\n\n​\n\n查看会话信息\n\n​\n\n对话相关 API：\n\n​\n\n查看对话详情\n\n、\n\n​\n\n提交工具执行结果\n\n​\n\n2024年9月2日\n\n​\n\n修改权限点\n\n​\n\n对于2024年9月2号之后创建的 Access Token（包括个人访问密钥 PAT 和 OAuth 2.0 密钥），调用 API 之前必须根据 API 最新的权限要求完成授权，9月1日及之前创建的 Access Token，建议在10月1日之前添加新的权限点，以免影响 API 的正常使用。各个 API 的最新权限要求，可参考 API 文档中\n\n基础信息\n\n部分。\n\n​\n\n​\n\n2024年8月\n\n​\n\n​\n\nAPI\n\n​\n\n发布时间\n\n​\n\n变更类型\n\n​\n\n说明\n\n​\n\n​\n\n执行工作流（流式响应）\n\n​\n\n2024年8月21日\n\n​\n\n新增 API\n\n​\n\n此 API 用于执行包含流式节点的工作流，例如消息节点、结束节点等。接口响应方式为流式响应，开发者需要从流式事件中获取并拼接工作流的输出信息。\n\n​\n\n​\n\n恢复运行工作流（流式响应）\n\n​\n\n2024年8月21日\n\n​\n\n新增 API\n\n​\n\n当执行到问答节点时，工作流会中断运行并发起询问，此时需要调用\n\n​\n\n恢复运行工作流（流式响应）\n\nAPI 回复 Bot，并继续运行工作流。\n\n​\n\n​\n\n创建智能体\n\n​\n\n​\n\n更新智能体\n\n​\n\n​\n\n发布智能体\n\n​\n\n2024年8月20日\n\n​\n\n新增 API\n\n​\n\n发布智能体管理相关接口，开发者可通过 API 方式创建 Bot、更新 Bot、发布智能体为 API 服务。\n\n​\n\n​\n\n执行工作流\n\n​\n\n2024年8月16日\n\n​\n\n新增 API\n\n​\n\n此 API 用于执行一个已发布的工作流，接口响应方式为非流式响应。\n\n​\n\n​\n\n取消进行中的对话\n\n​\n\n2024年8月7日\n\n​\n\n新增 API\n\n​\n\n调用\n\n​\n\n发起对话\n\n接口时，如果对话触发了复杂的工作流、图像流，或模型处理数据量大时，对话可能耗时较久。对话进行中时，用户无法在此会话中发起新的对话。此时可以调用此接口取消正在进行中的对话，取消后，对话转为已取消状态（status=canceled），你可以在会话中创建新的对话。\n\n​\n\n​\n\n​\n\n上一篇\n\nAPI 介绍\n\n下一篇\n\n准备工作",
        "links": [
          {
            "text": "模型能力差异",
            "href": "https://www.coze.cn/open/docs/developer_guides/model_api_param_support"
          },
          {
            "text": "执行工作流",
            "href": "https://www.coze.cn/open/docs/developer_guides/workflow_run"
          },
          {
            "text": "创建组织",
            "href": "https://www.coze.cn/open/docs/developer_guides/add_organization_people"
          },
          {
            "text": "查询插件列表",
            "href": "https://www.coze.cn/open/docs/developer_guides/list_plugin"
          },
          {
            "text": "查询工作流异步执行结果",
            "href": "https://www.coze.cn/open/docs/developer_guides/workflow_history"
          },
          {
            "text": "更新对话配置",
            "href": "https://www.coze.cn/open/docs/developer_guides/streaming_chat_event#71628d9c"
          }
        ]
      },
      "markdown": "| API​ | 发布时间​ | 变更类型​ | 说明​ |\n| ​创建智能体​​更新智能体​ | 2025年11月25日​ | 新增参数​ | 新增api_mode参数，用于指定智能体与模型交互时使用的 API 协议，包括chat_api和responses_api。具体支持的模型请参见模型能力差异。​当api_mode为responses_api时，parameters参数支持配置前缀缓存、存储和存储时长。​ |\n| ​语音合成​ | 2025年11月21日​ | 新增参数​ | 新增context_texts参数，用于配置豆包语音合成大模型 2.0 音色的辅助信息，控制合成语音的整体情绪（如悲伤、生气）、方言（如四川话、北京话）、语气（如撒娇、暧昧、吵架、夹子音）、语速（快慢）及音调（高低）等。​ |\n| ​双向流式语音合成事件​​双向流式对话上行事件​​Realtime 上行事件​ | 2025年11月21日​ | 新增参数​ | 新增data.tts_config.context_texts参数，用于配置豆包语音合成大模型 2.0 音色的辅助信息，控制合成语音的整体情绪（如悲伤、生气）、方言（如四川话、北京话）、语气（如撒娇、暧昧、吵架、夹子音）、语速（快慢）及音调（高低）等。​ |\n| ​恢复运行工作流​ | 2025年11月18日​ | 新增接口​ | 当调用执行工作流API 执行包含问答节点、输入节点的工作流时，智能体会以指定问题向用户提问，并等待用户回答。此时工作流为中断状态，开发者需要调用此 API 恢复运行工作流。​ |\n| ​执行工作流​​查询工作流异步运行结果​ | 2025年11月18日​ | 新增参数​ | 新增interrupt_data参数，返回中断事件的详细信息，包含中断控制内容、中断类型和事件 ID 等信息。​ |\n| ​修改企业员工的角色​ | 2025年11月3日​ | 新增接口​ | 修改企业员工的角色。​ |\n| ​创建组织​ | 2025年11月3日​ | 新增接口​ | 在指定的企业中创建组织。​ |\n| ​查询组织列表​ | 2025年11月3日​ | 新增接口​ | 查询指定企业中的组织列表。​ |\n| ​添加组织成员​ | 2025年11月3日​ | 新增接口​ | 用户加入企业时将自动加入默认组织。创建组织后，你可以调用本 API 将员工和访客加入对应组织。​ |\n| ​查询组织成员列表​ | 2025年11月3日​ | 新增接口​ | 查询指定组织中的成员列表。​ |\n| ​修改组织成员角色​ | 2025年11月3日​ | 新增接口​ | 修改组织成员的角色。​ |\n\n- 新增 api_mode 参数，用于指定智能体与模型交互时使用的 API 协议，包括 chat_api 和 responses_api 。具体支持的模型请参见 模型能力差异 。 ​\n\n- 当 api_mode 为 responses_api 时， parameters 参数支持配置前缀缓存、存储和存储时长。 ​\n\n| API​ | 发布时间​ | 变更类型​ | 说明​ |\n| ​修改组织基本信息​ | 2025年10月27日​ | 新增接口​ | 修改组织的名称和描述。​ |\n| ​修改工作空间基本信息​ | 2025年10月27日​ | 新增接口​ | 修改工作空间的名称和描述。​ |\n| ​查询套餐权益​ | 2025年10月24日​ | 新增接口​ | 查询当前账号所属的套餐类型、扩容管理页面中 API 扩容的信息、通过 MCP 方式调用付费插件的次数限制。​ |\n| ​批量查询插件信息​ | 2025年10月24日​ | 新增接口​ | 批量查询插件的详细信息，支持查询官方插件、三方插件和资源库插件。​ |\n| ​查询插件详情​ | 2025年10月24日​ | 新增参数​ | 返回参数中新增data.name_for_model、data.icon_url、data.is_call_available、data.created_at、data.updated_at。​ |\n| ​查询付费插件列表​ | 2025年10月24日​ | 新增参数​ | Query 参数中新增category_ids。​ |\n| ​添加企业成员​ | 2025年10月21日​ | 新增接口​ | 在火山引擎创建用户后，你可以调用本 API 将用户添加至企业。​ |\n| ​移除组织成员​ | 2025年10月21日​ | 新增接口​ | 如果成员因离职或换部门等场景需要调整归属的组织时，你可以调用本 API 将其移出组织。​ |\n| ​移除企业成员​ | 2025年10月21日​ | 新增接口​ | 移除企业成员，并指定资源接收人。​ |\n| ​双向流式对话上行事件​​双向流式对话下行事件​​Realtime 上行事件​​Realtime 下行事件​ | 2025年10月16日​ | 新增参数​ | 企业旗舰版新增支持降噪配置，支持两种模式：​data.voice_processing_config.enable_ans：主动噪声抑制。自动识别并过滤掉背景环境中的各种噪音（如键盘声、空调声、街道嘈杂声），让说话者的声音更清晰。​data.voice_processing_config.enable_pdns：声纹降噪。专门针对特定说话人的声音进行优化，能更精准地保留目标人声。​ |\n| ​双向流式对话上行事件​​双向流式对话下行事件​​Realtime 上行事件​​Realtime 下行事件​​创建房间​ | 2025年10月16日​ | 新增参数​ | 企业旗舰版新增支持语义判停的自由对话模式（data.turn_detection.type=semantic_vad） 。新增data.turn_detection.semantic_vad_config参数，用于配置判定语音停止的语义检测策略。​ |\n| ​双向流式对话上行事件​​双向流式对话下行事件​​ | 2025年10月15日​ | 新增参数​ | data.output_audio.codec输出音频编码新增支持 mp3 格式。新增data.output_audio.mp3_config参数，用于配置 mp3 编码参数。​​ |\n\n- data.voice_processing_config.enable_ans ：主动噪声抑制。自动识别并过滤掉背景环境中的各种噪音（如键盘声、空调声、街道嘈杂声），让说话者的声音更清晰。 ​\n\n- data.voice_processing_config.enable_pdns ：声纹降噪。专门针对 特定说话人 的声音进行优化，能更精准地保留目标人声。 ​\n\n| API​ | 发布时间​ | 变更类型​ | 说明​ |\n| ​查询付费插件列表​ | 2025年9月29日​ | 新增接口​ | 查询插件商店中的付费插件列表，包括扣子官方插件和三方插件，或通过关键词模糊搜索相关插件。​ |\n| ​查询插件分类​ | 2025年9月29日​ | 新增接口​ | 获取插件的分类 ID，后续调用查询插件列表API 查询指定分类下的插件。​ |\n| ​查询插件详情​ | 2025年9月29日​ | 新增接口​ | 查询指定插件的详细信息，包括插件工具列表（工具名称、描述、输入参数和返回参数），以及 MCP Server 的配置信息，以便在 Trae 等外部平台配置 MCP 服务，并调用插件工具。​ |\n| ​调用插件工具​ | 2025年9月29日​ | 新增接口​ | 调用指定付费插件中的工具。​ |\n| ​创建房间​ | 2025年9月17日​ | 新增参数​ | 新增turn_detection参数，语音检测类型新增支持按键说话模式。​ |\n| ​Realtime 上行事件​​Realtime 下行事件​ | 2025年9月17日​ | 新增事件​ | 为支持按键说话模式，新增如下事件：​input_audio_buffer.start：用户开始说话。​input_audio_buffer.complete：用户结束说话。​ |\n| ​创建房间​​双向流式语音对话​ | 2025年9月15日​ | 参数下线​ | 请求参数中的 workflow id 参数下线，存量 API 不受影响仍可正常使用。​如需为对话流中的自定义参数赋值， 请参见​为自定义参数赋值。​ |\n| ​申请插件扩容回调事件​​插件扩容到期回调事件​ | 2025年9月12日​ | 新增接口​ | 如果三方付费插件支持扩容，插件开发者可以订阅插件扩容回调事件。当用户申请插件扩容、扩容申请到期或用户主动取消扩容时，扣子开发平台会向指定的回调地址推送回调消息。​ |\n| ​复制资源​ | 2025年9月9日​ | 新增接口​ | 同工作空间或跨工作空间复制智能体、扣子应用或工作流。​ |\n| ​查询资源复制的结果​ | 2025年9月9日​ | 新增接口​ | 查询资源复制的结果。​ |\n| ​Realtime 上行事件​​Realtime 下行事件​ | 2025年9月8日​ | 新增参数​ | 新增如下参数：​data.asr_config.enable_nostream：是否开启二次识别模式，开启后会实时返回逐字识别的文本；当一句话结束时，会结合整句音频进行上下文分析并重新识别，生成优化后的识别结果并返回。​data.asr_config.enable_emotion：是否开启识别说话人的情绪。​data.asr_config.enable_gender：是否开启识别说话人的性别（male/female）。​data.asr_config.sensitive_words_filter：配置敏感词过滤功能，支持以下 3 种过滤方式：​过滤系统敏感词，并替换为*。​过滤自定义敏感词，并替换为空。​过滤自定义敏感词，并替换为*。​ |\n| ​查询工作流基本信息​ | 2025年9月4日​ | 新增参数​ | 返回参数中新增input和output参数，用于返回工作流开始节点的输入参数的结构体、结束节点的输出参数的结构体。​ |\n| ​查询工作流的版本列表​ | 2025年9月4日​ | 新增参数​ | 返回参数中新增input和output参数，用于返回工作流开始节点的输入参数的结构体、结束节点的输出参数的结构体。​ |\n| ​双向流式对话上行事件​​双向流式语音合成事件​ | 2025年9月4日​ | 新增参数​ | 新增data.output_audio.loudness_rate参数，用于配置输出音频的音量。​ |\n| ​Realtime 上行事件​​语音合成​ | 2025年9月4日​ | 新增参数​ | 新增data.loudness_rate参数，用于配置输入音频的音量。​ |\n| ​查看智能体版本列表​ | 2025年9月3日​ | 新增接口​ | 查询某个智能体的版本列表，支持查询已发布版本或未发布版本的版本号、版本创建者信息、创建时间等。​ |\n| ​创建工作空间​ | 2025年9月3日​ | 新增接口​ | 创建工作空间​ |\n| ​开启或关闭智能体多人协作​ | 2025年9月3日​ | 新增接口​ | 开启或关闭智能体多人协作模式。​ |\n| ​开启或关闭工作流多人协作​ | 2025年9月3日​ | 新增接口​ | 开启或关闭工作流多人协作模式。​ |\n\n- input_audio_buffer.start ：用户开始说话。 ​\n\n- input_audio_buffer.complete ：用户结束说话。 ​\n\n- data.asr_config.enable_nostream ：是否开启 二次识别模式 ，开启后会实时返回逐字识别的文本；当一句话结束时，会结合整句音频进行上下文分析并重新识别，生成优化后的识别结果并返回。 ​\n\n- data.asr_config.enable_emotion ：是否开启识别说话人的情绪。 ​\n\n- data.asr_config.enable_gender ：是否开启识别说话人的性别（male/female）。 ​\n\n- data.asr_config.sensitive_words_filter ：配置敏感词过滤功能，支持以下 3 种过滤方式： ​\n\n- 过滤系统敏感词，并替换为 * 。 ​\n\n- 过滤自定义敏感词，并替换为空。 ​\n\n- 过滤自定义敏感词，并替换为 * 。 ​\n\n| API​ | 发布时间​ | 变更类型​ | 说明​ |\n| ​添加智能体的协作者​ | 2025年8月29日​ | 新增接口​ | 添加智能体的协作者。​ |\n| ​添加应用的协作者​ | 2025年8月29日​ | 新增接口​ | 添加应用的协作者。​ |\n| ​删除智能体的协作者​ | 2025年8月29日​ | 新增接口​ | 删除智能体的协作者。​ |\n| ​删除应用的协作者​ | 2025年8月29日​ | 新增接口​ | 删除应用的协作者。​ |\n| ​添加工作流协作者​ | 2025年8月29日​ | 新增接口​ | 添加工作流的协作者。​ |\n| ​删除工作流协作者​ | 2025年8月29日​ | 新增接口​ | 删除工作流的协作者。​ |\n| ​发起对话​ | 2025年8月29日​ | 新增参数​ | 新增publish_status和bot_version参数。​publish_status：用于指定与已发布版本或草稿版本的智能体对话。​bot_version：用于指定与某个特定版本的智能体对话。​ |\n| ​绑定设备​ | 2025年8月21日​ | 新增接口​ | 硬件厂商可以调用本 API 将企业内的硬件设备与企业的自定义渠道绑定，当开发者发布智能体到该自定义渠道时，在发布配置页面的设备列表中选择对应的设备，即可快速发布到对应设备。​ |\n| ​发布智能体​ | 2025年8月21日​ | 新增参数​ | 新增connectors参数，智能体发布自定义渠道时，你可以通过该参数传递自定义参数给渠道。例如，设置将智能体发布到指定设备。​ |\n| ​更新会话名称​ | 2025年8月4日​ | 新增接口​ | 会话创建者可以更新指定会话的会话名，以便更好地识别和管理会话。​ |\n| ​删除会话​ | 2025年8月4日​ | 新增接口​ | 会话创建者可以删除指定的会话。​ |\n| ​创建会话​ | 2025年8月4日​ | 新增参数​ | 请求参数新增name参数，用于指定会话的名称。​返回参数新增creator_id和connector_id，返回会话的创建者 ID、会话在哪个渠道创建。​ |\n| ​查看会话信息​ | 2025年8月4日​ | 新增参数​ | 返回参数新增name、creator_id和connector_id，返回会话的名称、会话的创建者 ID、会话在哪个渠道创建。​ |\n| ​语音合成​ | 2025年8月4日​ | 新增参数​ | 请求参数新增emotion和emotion_scale，用于设置多情感音色的情感类型和情感值。​ |\n| ​双向流式语音合成事件​ | 2025年8月4日​ | 新增参数​ | 更新语音合成配置上行事件中，新增data.output_audio.emotion_config参数，用于设置多情感音色的情感类型和情感值。​ |\n| ​双向流式对话上行事件​ | 2025年8月4日​ | 新增参数​ | 更新对话配置上行事件中，新增data.output_audio.emotion_config参数，用于设置多情感音色的情感类型和情感值。​ |\n| ​Realtime 上行事件​ | 2025年8月4日​ | 新增参数​ | 更新房间配置上行事件中，新增data.tts_config参数，用于设置多情感音色的情感类型和情感值。​ |\n\n- publish_status ：用于指定与已发布版本或草稿版本的智能体对话。 ​\n\n- bot_version ：用于指定与某个特定版本的智能体对话。 ​\n\n| API​ | 发布时间​ | 变更类型​ | 说明​ |\n| ​下架智能体​ | 2025年7月25日​ | 新增接口​ | 智能体发布后，你可以调用本 API 从扣子官方渠道及自定义渠道下架智能体。​ |\n| ​查询工作流列表​ | 2025年7月24日​ | 新增接口​ | 查询指定工作空间中的工作流列表及其基本信息。​ |\n| ​查询工作流基本信息​ | 2025年7月24日​ | 新增接口​ | 查询工作流的基本信息，包括工作流名称、描述、创建者信息等。​ |\n| ​查询工作流的版本列表​ | 2025年7月24日​ | 新增接口​ | 查询某个工作流的所有历史版本记录，包括版本号、版本描述、操作者和发布时间。​ |\n| ​执行工作流​​执行工作流（流式响应）​​查询工作流异步运行结果​ | 2025年7月24日​ | 新增参数​ | 返回参数中新增Usage参数，返回本次 API 调用消耗的 Token 数量等信息。​ |\n| ​创建回调应用​ | 2025年7月22日​ | 新增接口​ | 创建回调应用，支持创建普通回调应用和渠道回调应用。订阅扣子回调功能时需要创建回调应用。​ |\n| ​修改回调应用​ | 2025年7月22日​ | 新增接口​ | 修改回调应用的名称和回调地址。​ |\n| ​查询回调应用列表​ | 2025年7月22日​ | 新增接口​ | 查询回调应用列表。​ |\n| ​删除回调应用​ | 2025年7月22日​ | 新增接口​ | 如果不再需要接收扣子回调，可以删除回调应用。一旦删除，该回调应用所订阅的所有回调事件触发时，将不再向该回调应用推送通知。​ |\n| ​订阅回调事件​ | 2025年7月22日​ | 新增接口​ | 订阅回调事件。​ |\n| ​查询已订阅的事件​ | 2025年7月22日​ | 新增接口​ | 查询回调应用中已订阅的事件。​ |\n| ​取消订阅事件​ | 2025年7月22日​ | 新增接口​ | 如果不再需要订阅某个回调事件，可以取消订阅。一旦取消订阅，对应回调事件触发时，将不再向该回调地址推送通知。​ |\n| ​提交消息评价​ | 2025年7月10日​ | 新增接口​ | 会话创建者可以对智能体或应用回复的消息提交评价，包括点赞、点踩和反馈详细的评论。​ |\n| ​删除消息评价​ | 2025年7月10日​ | 新增接口​ | 删除指定消息的评价。​ |\n| ​查询文件夹列表​ | 2025年7月8日​ | 新增接口​ | 工作空间中的用户可以查询工作空间中的文件夹列表。​ |\n| ​查询文件夹详情​ | 2025年7月8日​ | 新增接口​ | 工作空间中的用户可以查询工作空间中指定文件夹的详情，包括文件夹的名称、描述、所属工作空间、文件夹创建者的 UID等。​ |\n\n| API​ | 发布时间​ | 变更类型​ | 说明​ |\n| ​发起对话​ | 2025年6月26日​ | 新增参数​ | Body 中新增enable_card参数，用于设置问答节点返回的内容是否为卡片形式。​ |\n| ​查看智能体列表​ | 2025年6月18日​ | 新增接口​ | 查看指定空间的智能体列表，包含草稿状态的智能体和已发布的智能体。​ |\n| ​查看智能体配置​ | 2025年6月18日​ | 新增接口​ | 查看指定智能体的配置信息，包括草稿状态和已发布的智能体。​ |\n| ​查看应用列表​ | 2025年6月18日​ | 新增接口​ | 查看指定空间的应用列表。​ |\n| ​查看空间成员列表​ | 2025年6月18日​ | 新增接口​ | 查看指定空间的成员列表。​ |\n| ​批量邀请用户加入空间​ | 2025年6月18日​ | 新增接口​ | 批量邀请用户加入空间，并设置用户是空间管理员或空间成员。​ |\n| ​批量移除空间中的用户​ | 2025年6月18日​ | 新增接口​ | 将用户从指定的工作空间中移除。​ |\n| ​查看空间列表​ | 2025年6月18日​ | 新增参数​ | 在Query中新增user_id和coze_account_id参数，可以查看指定用户在指定组织下加入的工作空间。​ |\n| ​查询输出节点的执行结果​ | 2025年6月18日​ | 新增接口​ | 根据工作流的执行 ID 以及查询工作流异步执行结果中返回的节点执行 uuid， 逐一查询节点每次执行的输出内容。​ |\n| ​查询工作流异步运行结果​ | 2025年6月18日​ | 新增参数​ | 新增node_execute_status参数，返回输出节点的运行情况。当输出节点的输出内容超过 1MB 时，会返回该字段。​ |\n\n| API​ | 发布时间​ | 变更类型​ | 说明​ |\n| 更新对话配置​ | 2025年5月07日​ | 新增参数​ | 新增data.asr_config.enable_ddc参数，用于设置是否开启语义顺滑功能。开启后，系统在语音处理时会自动去除识别结果中的 “啊”“嗯” 等语气词，使输出文本语义更流畅。​新增data.asr_config.enable_itn参数，用于设置在语音转文本时，是否进行文本纠错。​新增data.asr_config.enable_punc参数，用于设置在语音转文本时，是否给文本加上标点符号。​ |\n\n- 新增 data.asr_config.enable_ddc 参数，用于设置是否开启语义顺滑功能。开启后，系统在语音处理时会自动去除识别结果中的 “啊”“嗯” 等语气词，使输出文本语义更流畅。 ​\n\n- 新增 data.asr_config.enable_itn 参数，用于设置在语音转文本时，是否进行文本纠错。 ​\n\n- 新增 data.asr_config.enable_punc 参数，用于设置在语音转文本时，是否给文本加上标点符号。 ​\n\n| API​ | 发布时间​ | 变更类型​ | 说明​ |\n| ​设置用户变量的值​ | 2025年4月22日​ | 新增接口​ | 设置智能体或应用中的用户变量的值。​ |\n| ​获取用户变量的值​ | 2025年4月22日​ | 新增接口​ | 获取智能体或应用中设置的用户变量的值。​ |\n| ​发起对话​ | 2025年4月18日​ | 新增参数​ | 新增parameters参数传入自定义参数的值。如果在对话流开始节点的输入参数中设置自定义参数，调用本接口发起对话时，可以通过parameters参数传入对应的值等。​ |\n| ​获取已发布智能体的配置（即将下线）​ | 2025年4月17日​ | 新增参数​ | 新增voice_info_list参数，获取智能体的音色。​新增background_image_info参数，获取智能体背景的图片信息。​ |\n| ​双向流式对话上行事件​ | 2025年4月10日​ | 新增参数​ | chat.update事件新增 interrupt_config 配置，支持语音指定关键词打断能力。​chat.update事件中的 asr_config 配置新增 user_language 配置，支持设置用户说话语种。​chat.update事件中新增 prologue_content 自定义开场白。​ |\n| ​双向流式对话上行事件​ | 2025年4月2日​ | 新增参数​ | chat.update事件新增 asr_config 配置，支持配置热词等。​ |\n\n- 新增 voice_info_list 参数，获取智能体的音色。 ​\n\n- 新增 background_image_info 参数，获取智能体背景的图片信息。 ​\n\n- chat.update 事件新增 interrupt_config 配置，支持语音指定关键词打断能力。 ​\n\n- chat.update 事件中的 asr_config 配置新增 user_language 配置，支持设置用户说话语种。 ​\n\n- chat.update 事件中新增 prologue_content 自定义开场白。 ​\n\n| ​双向流式对话上行事件​ | 2025年3月24日​ | 新增音频编码​ | 输入的音频格式支持g711格式。​ |\n| --- | --- | --- | --- |\n| ​创建会话​ | 2025年3月21日​ | 新增参数​ | 创建会话时支持指定 bot_id，便于后续查看指定智能体的会话。​ |\n| ​查看消息列表​ | 2025年3月21日​ | 新增参数​ | 新增请求参数 order、chat_id、before_id、after_id 和 limit，用于筛选符合要求的消息。​ |\n| ​清除上下文​ | 2025年3月21日​ | 新增 API​ | 用于清除指定会话中存储的上下文消息。​ |\n| ​查看会话列表​ | 2025年3月21日​ | 新增 API​ | 查看用户与指定智能体的所有会话记录。​ |\n| ​双向流式对话上行事件​​ | 2025年3月21日​ | 新增事件​ | 新增input_audio_buffer.speech_started事件，表示服务端识别到用户正在说话。​新增input_audio_buffer.speech_stopped事件，表示服务端识别到用户已停止说话。​ |\n| ​ | 2025年3月21日​ | 新增参数​ | chat.update事件新增data.turn_detection参数，用于配置对话中语音检测的相关参数，包括检测模式、检测到语音前收录的前置音频时长和持续静音时停止检测的时长。​新增 server_vad 能力。​ |\n| ​ | 2025年3月20日​ | 新增参数​ | chat.update事件新增data.need_play_prologue参数，用于配置是否播放开场白。​ |\n| ​ | 2025年3月19日​ | 新增参数​ | chat.update事件新增data.event_subscriptions参数，用于配置订阅下行事件。​ |\n| ​ | 2025年3月18日​ | 新增参数​ | chat.update事件新增​data.output_audio.pcm_config. frame_size_ms参数，用于配置输出每包 pcm 音频的时长大小。​新增data.output_audio.pcm_config. limit_config参数，用于配置输出音频限流，包括周期时长和周期内最大返回的 pcm 包数量。​ |\n| ​Realtime 上行事件​ | 2025年3月18日​ | 新增事件​ | 新增mode.update事件，更新房间模式和对话设置。​ |\n| ​Realtime 下行事件​ | 2025年3月18日​ | 新增事件​ | 新增mode.updated事件，当房间模式更新成功后，返回最新的房间模式设置。​ |\n\n- 新增 input_audio_buffer.speech_started 事件，表示服务端识别到用户正在说话。 ​\n\n- 新增 input_audio_buffer.speech_stopped 事件，表示服务端识别到用户已停止说话。 ​\n\n| API​ | 发布时间​ | 变更类型​ | 说明​ |\n| ​添加发布平台​ | 2025年3月3日​ | 新增 API​ | 为指定空间添加一个发布渠道。添加渠道后，空间中的每个开发者都可以将自己的 AI 项目发布到这些渠道中。​ |\n\n| API​ | 发布时间​ | 变更类型​ | 说明​ |\n| ​发起对话与消息管理相关 API​ | 2025年2月20日​ | 新增参数​ | 以下 API 新增 reasoning_content 参数，表示 DeepSeek R1 模型的思维链。​​发起对话​​查看消息详情​​查看消息列表​​查看对话消息详情​ |\n| ​上传文件​ | 2025年2月19日​ | 参数变更​ | 支持上传多种文件格式，包括音频、视频、压缩文件等。​ |\n| 工作流相关 API​ | 2025年2月10日​ | 新增参数​ | ​执行工作流和​执行工作流（流式响应）支持使用扣子的文件 ID 作为入参。​ |\n| 语音相关 API​ | 2025年2月7日​ | 新增 API​ | 新增​语音识别，支持将语音文件转为文字。​​语音合成API 正式开放，无需申请白名单。​ |\n| ​创建智能体等智能体相关 API​ | 2025年2月7日​ | 新增参数​ | 更新以下智能体相关 API，支持为智能体绑定工作流、插件和模型。​​创建智能体​​更新智能体​​获取已发布智能体的配置（即将下线）​ |\n| ​发起对话​ | 2025年2月7日​ | 新增参数​ | object_string object 支持音频内容，对话时可输入语音文件或 URL。​新增参数 shortcut_command，支持 API 方式执行快捷指令。​ |\n\n- ​ 发起对话 ​\n\n- ​ 查看消息详情 ​\n\n- ​ 查看消息列表 ​\n\n- ​ 查看对话消息详情 ​\n\n- 新增 ​ 语音识别 ，支持将语音文件转为文字。 ​\n\n- ​ 语音合成 API 正式开放，无需申请白名单。 ​\n\n- ​ 创建智能体 ​\n\n- ​ 更新智能体 ​\n\n- ​ 获取已发布智能体的配置（即将下线） ​\n\n- object_string object 支持音频内容，对话时可输入语音文件或 URL。 ​\n\n- 新增参数 shortcut_command，支持 API 方式执行快捷指令。 ​\n\n| API​ | 发布时间​ | 变更类型​ | 说明​ |\n| ​更新审核结果​ | 2025年1月9日​ | 新增 API​ | 更新智能体发布到自定义渠道的审核结果。​ |\n\n| API​ | 发布时间​ | 变更类型​ | 说明​ |\n| ​复刻音色等语音相关 API​ | 2024年12月24日​ | 新增 API​ | 新增语音相关 API，用于智能语音通话场景。​​复刻音色​​查看音色列表​​创建房间​​语音合成​说明体验智能语音功能之前，需要先申请公测。​​ |\n| ​创建知识库文件​ | 2024年12月16日​ | 新增参数​ | 新增 source_file_id 参数，向图片知识库中上传文件。​ |\n| ​创建文本知识库等知识库 API​ | 2024年12月16日​ | 新增 API​ | 新增知识库管理 API，包括创建知识库、查看知识库列表等。​​创建文本知识库​​查看知识库列表​​修改知识库信息​​删除知识库​​查看知识库文件上传进度​​更新知识库图片描述​​查看知识库图片列表​ |\n| ​执行对话流​ | 2024年12月11日​ | 新增 API​ | 执行已发布的对话流。对话流是基于对话场景的特殊工作流，关于对话流的详细说明可参考​工作流与对话流。​ |\n\n- ​ 复刻音色 ​\n\n- ​ 查看音色列表 ​\n\n- ​ 创建房间 ​\n\n- ​ 语音合成 ​\n\n- ​ 创建文本知识库 ​\n\n- ​ 查看知识库列表 ​\n\n- ​ 修改知识库信息 ​\n\n- ​ 删除知识库 ​\n\n- ​ 查看知识库文件上传进度 ​\n\n- ​ 更新知识库图片描述 ​\n\n- ​ 查看知识库图片列表 ​\n\n| API​ | 发布时间​ | 变更类型​ | 说明​ |\n| ​执行工作流​ | 2024年10月30日​ | 新增参数​ | 扣子专业版用户调用此接口时，支持通过is_async参数异步运行工作流，适用于工作流执行耗时较长，导致运行超时的情况。异步运行时，工作流整体超时时间限制由 3 分钟延长至 24 小时，LLM 节点由 3 分钟延长至 5 分钟。​ |\n| ​查询工作流异步运行结果​ | 2024年10月30日​ | 新增 API​ | 调用接口​执行工作流时，如果选择异步执行工作流，响应信息中会返回 execute_id，开发者可以通过本接口查询指定事件的执行结果。​ |\n| 涉及所有 API 接口​ | 2024年10月15日​ | 修改 PAT 有效期​ | 2024年10月16日开始，新创建的个人访问密钥（PAT），有效期最长可设置为 30天。在此之前已创建的个人访问密钥有效期不受影响。​ |\n\n| API​ | 发布时间​ | 变更类型​ | 说明​ |\n| ​查看空间列表​ | 2024年9月24日​ | 新增 API​ | 此 API 用于查看当前账号加入的空间列表。​ |\n| ​删除消息​ | 2024年9月2日​ | 新增 API​ | 此 API 用于删除指定会话中的消息。​ |\n| ​发起对话​ | 2024年9月2日​ | 新增参数​ | ​发起对话接口增加请求参数 extra_params，通常用于特殊场景下指定一些必要参数供模型判断，例如指定经纬度，并询问智能体此位置的天气。​ |\n| ​获取已发布智能体的配置（即将下线）​ | 2024年9月2日​ | 新增参数​ | ​获取已发布智能体的配置（即将下线）接口增加返回参数 knowledge，查看智能体详细配置时可查看智能体绑定的知识库列表。​ |\n| 消息相关 API：​创建消息、​查看消息列表、​查看消息详情和​修改消息​文件相关 API：​上传文件、​查看文件详情​会话相关 API：​创建会话、​查看会话信息​对话相关 API：​查看对话详情、​提交工具执行结果​ | 2024年9月2日​ | 修改权限点​ | 对于2024年9月2号之后创建的 Access Token（包括个人访问密钥 PAT 和 OAuth 2.0 密钥），调用 API 之前必须根据 API 最新的权限要求完成授权，9月1日及之前创建的 Access Token，建议在10月1日之前添加新的权限点，以免影响 API 的正常使用。各个 API 的最新权限要求，可参考 API 文档中基础信息部分。​ |\n\n- 消息相关 API： ​ 创建消息 、 ​ 查看消息列表 、 ​ 查看消息详情 和 ​ 修改消息 ​\n\n- 文件相关 API： ​ 上传文件 、 ​ 查看文件详情 ​\n\n- 会话相关 API： ​ 创建会话 、 ​ 查看会话信息 ​\n\n- 对话相关 API： ​ 查看对话详情 、 ​ 提交工具执行结果 ​\n\n| API​ | 发布时间​ | 变更类型​ | 说明​ |\n| ​执行工作流（流式响应）​ | 2024年8月21日​ | 新增 API​ | 此 API 用于执行包含流式节点的工作流，例如消息节点、结束节点等。接口响应方式为流式响应，开发者需要从流式事件中获取并拼接工作流的输出信息。​ |\n| ​恢复运行工作流（流式响应）​ | 2024年8月21日​ | 新增 API​ | 当执行到问答节点时，工作流会中断运行并发起询问，此时需要调用​恢复运行工作流（流式响应）API 回复 Bot，并继续运行工作流。​ |\n| ​创建智能体​​更新智能体​​发布智能体​ | 2024年8月20日​ | 新增 API​ | 发布智能体管理相关接口，开发者可通过 API 方式创建 Bot、更新 Bot、发布智能体为 API 服务。​ |\n| ​执行工作流​ | 2024年8月16日​ | 新增 API​ | 此 API 用于执行一个已发布的工作流，接口响应方式为非流式响应。​ |\n| ​取消进行中的对话​ | 2024年8月7日​ | 新增 API​ | 调用​发起对话接口时，如果对话触发了复杂的工作流、图像流，或模型处理数据量大时，对话可能耗时较久。对话进行中时，用户无法在此会话中发起新的对话。此时可以调用此接口取消正在进行中的对话，取消后，对话转为已取消状态（status=canceled），你可以在会话中创建新的对话。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/preparation",
      "title": "准备工作",
      "content": {
        "sections": [],
        "full_text": "准备工作\n\n在调用\n\n扣子\n\nAPI  前，确保你已经将低代码智能体发布为了 API 服务，并通过不同的授权方式获取了访问令牌。\n\n​\n\n发布低代码智能体为 API 服务\n\n​\n\n低代码智能体发布为 API 服务之后，才能通过调用 API 的方式使用这个智能体，例如查看智能体的基本设置、发起一个智能体对话等。\n\n​\n\n操作步骤如下：\n\n​\n\n1.\n\n登录\n\n扣子编程\n\n。\n\n​\n\n2.\n\n在页面顶部空间列表中选择目标工作空间。\n\n​\n\n3.\n\n在\n\n项目开发\n\n页面，选择低代码智能体。\n\n​\n\n4.\n\n在页面右上角，单击\n\n发布\n\n。\n\n​\n\n5.\n\n在\n\n发布\n\n页面，选择\n\nAPI\n\n选项，然后单击\n\n发布\n\n。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n获取访问令牌\n\n​\n\n调用\n\n扣子\n\nAPI 时，你需要在 Header 中通过 Authorization 参数指定访问令牌（Access token），\n\n扣子\n\n服务端会根据访问令牌验证调用方的操作权限。调用 API 之前，你需要先获得访问令牌。\n\n​\n\n扣子\n\n编程支持以下三种访问令牌，详细说明可参考\n\n​\n\n鉴权方式概述\n\n。\n\n​\n\n个人访问令牌\n\n：通过控制台生成的访问令牌，有效期一天以上，使用简单便捷，适用于测试场景。你可以随时调整令牌权限和有效期，到期后需要重新生成。\n\n​\n\n服务访问令牌\n\n：通过控制台生成的访问令牌，是以服务身份创建的访问凭证，可长期有效访问扣子编程资源，通常用于服务/应用程序的身份验证和授权。SAT 与 OAuth JWT 鉴权方式相比，具有更长的有效期（可设置为永久有效），操作简单，能够有效简化授权流程。\n\n​\n\nOAuth 访问令牌\n\n：通过 OAuth 2.0 授权流程生成的访问令牌，有效期为分钟级别，安全性较高，适用于线上生产环境。获取 OAuth 访问令牌的方式和流程可参考\n\n​\n\nOAuth 应用管理\n\n。\n\n​\n\n本文档以生成个人访问令牌为例，演示获取访问令牌的方式。\n\n​\n\n1.\n\n登录\n\n扣子编程\n\n。\n\n​\n\n2.\n\n在左侧导航栏选择\n\nAPI & SDK\n\n。\n\n​\n\n3.\n\n在\n\n扣子\n\nAPI\n\n页面的顶部单击\n\n授权\n\n>\n\n个人访问令牌\n\n页签。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n4.\n\n在右上角单击\n\n添加\n\n。\n\n​\n\n5.\n\n在\n\n添加新的个人访问令牌\n\n页面完成以下配置，然后单击\n\n确定\n\n。\n\n​\n\n​\n\n配置项\n\n​\n\n说明\n\n​\n\n名称\n\n​\n\n个人访问令牌的名称。\n\n​\n\n过期时间\n\n​\n\n个人访问令牌的有效期时长。令牌过期后将会失效，无法继续用它来调用\n\n扣子\n\nAPI。\n\n​\n\n生成令牌后，无法修改过期时间。\n\n​\n\n权限\n\n​\n\n个人访问令牌的权限。\n\n​\n\n调用 API 时，个人访问令牌应具备对应的 API 权限，否则报错 4101。\n\n​\n\n访问团队空间\n\n​\n\n可以使用该令牌的空间。\n\n​\n\n说明\n\n扣子企业版（企业标准版、企业旗舰版）\n\n：成员可以选择本组织中，本人创建或加入的某个工作空间，或目前和将来创建或加入的所有工作空间。超级管理员和管理员可以选择本组织中所有工作空间。\n\n​\n\n扣子个人版\n\n：仅支持选择你作为空间\n\n所有者\n\n的工作空间，或目前和将来创建的所有工作空间，不支持选择你作为成员加入的空间。\n\n​\n\n​\n\n​\n\n6.\n\n复制并妥善保存个人访问令牌。\n\n​\n\n生成的令牌仅在此时展示一次，请即刻复制并保存。\n\n​\n\n上一篇\n\n更新日志\n\n下一篇\n\nAPI Playground",
        "links": []
      },
      "markdown": "- ​ ​ ​ ​ ​\n\n- 个人访问令牌 ：通过控制台生成的访问令牌，有效期一天以上，使用简单便捷，适用于测试场景。你可以随时调整令牌权限和有效期，到期后需要重新生成。 ​\n\n- 服务访问令牌 ：通过控制台生成的访问令牌，是以服务身份创建的访问凭证，可长期有效访问扣子编程资源，通常用于服务/应用程序的身份验证和授权。SAT 与 OAuth JWT 鉴权方式相比，具有更长的有效期（可设置为永久有效），操作简单，能够有效简化授权流程。 ​\n\n- OAuth 访问令牌 ：通过 OAuth 2.0 授权流程生成的访问令牌，有效期为分钟级别，安全性较高，适用于线上生产环境。获取 OAuth 访问令牌的方式和流程可参考 ​ OAuth 应用管理 。 ​\n\n\n\n\n- ​ ​ ​ ​ ​\n\n\n\n- ​ 配置项 ​ 说明 ​ 名称 ​ 个人访问令牌的名称。 ​ 过期时间 ​ 个人访问令牌的有效期时长。令牌过期后将会失效，无法继续用它来调用 扣子 API。 ​ 生成令牌后，无法修改过期时间。 ​ 权限 ​ 个人访问令牌的权限。 ​ 调用 API 时，个人访问令牌应具备对应的 API 权限，否则报错 4101。 ​ 访问团队空间 ​ 可以使用该令牌的空间。 ​ 说明 扣子企业版（企业标准版、企业旗舰版） ：成员可以选择本组织中，本人创建或加入的某个工作空间，或目前和将来创建或加入的所有工作空间。超级管理员和管理员可以选择本组织中所有工作空间。 ​ 扣子个人版 ：仅支持选择你作为空间 所有者 的工作空间，或目前和将来创建的所有工作空间，不支持选择你作为成员加入的空间。 ​ ​ ​\n\n| 配置项​ | 说明​ |\n| 名称​ | 个人访问令牌的名称。​ |\n| 过期时间​ | 个人访问令牌的有效期时长。令牌过期后将会失效，无法继续用它来调用扣子API。​生成令牌后，无法修改过期时间。​ |\n| 权限​ | 个人访问令牌的权限。​调用 API 时，个人访问令牌应具备对应的 API 权限，否则报错 4101。​ |\n| 访问团队空间​ | 可以使用该令牌的空间。​说明扣子企业版（企业标准版、企业旗舰版）：成员可以选择本组织中，本人创建或加入的某个工作空间，或目前和将来创建或加入的所有工作空间。超级管理员和管理员可以选择本组织中所有工作空间。​扣子个人版：仅支持选择你作为空间所有者的工作空间，或目前和将来创建的所有工作空间，不支持选择你作为成员加入的空间。​​ |\n\n- 扣子企业版（企业标准版、企业旗舰版） ：成员可以选择本组织中，本人创建或加入的某个工作空间，或目前和将来创建或加入的所有工作空间。超级管理员和管理员可以选择本组织中所有工作空间。 ​\n\n- 扣子个人版 ：仅支持选择你作为空间 所有者 的工作空间，或目前和将来创建的所有工作空间，不支持选择你作为成员加入的空间。 ​\n\n\n- 生成的令牌仅在此时展示一次，请即刻复制并保存。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/api_playground",
      "title": "API Playground",
      "content": {
        "sections": [],
        "full_text": "API Playground\n\nAPI Playground 是扣子编程提供的在线 API 调试工具，集成了扣子编程所有 OpenAPI，支持可视化调试 API、查看帮助文档、示例代码，帮助开发者快速体验扣子编程 OpenAPI 的基本能力。\n\n​\n\n说明\n\nAPI Playground\n\n使用真实的线上数据，通过\n\nPlayground\n\n调用创建、修改或删除数据的 API 时，请务必谨慎操作。\n\n​\n\n扣子付费套餐用户调用\n\n​\n\n发起对话\n\n等涉及模型处理的 API 时，会产生一定的费用。关于费用的详细说明可参考\n\n​\n\n计费概述\n\n。\n\n​\n\n​\n\n工具介绍\n\n​\n\n扣子编程 API Playground 主要提供以下功能：\n\n​\n\n可视化调试 API\n\n：支持在线可视化调试 API。只需根据页面提示填入必选参数，即可快速构建一个有效的 API 请求。API Playground 可以在线运行这个请求，并展示 API 的响应信息。\n\n​\n\nAPI 文档\n\n：开发者可以在  API Playground 中快速查看 API 文档，文档中可视化展示 API 接口说明、请求参数说明，便于开发者理解参数结构。\n\n​\n\n示例代码\n\n：扣子编程支持 Python、JavaScript 等多种主流开发语言的 SDK，可简单便捷地调用扣子编程 OpenAPI。对于\n\n​\n\n发起对话\n\n和工作流相关 API，扣子编程提供多语言 SDK 示例代码供开发者参考，提高编程效率。\n\n​\n\n模块介绍\n\n​\n\nAPI Playground 工具的各个模块如下：\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n各区域说明如下：\n\n​\n\n​\n\n编号\n\n​\n\n区域\n\n​\n\n说明\n\n​\n\n①\n\n​\n\nOpenAPI 列表\n\n​\n\n扣子编程 OpenAPI 列表。\n\n​\n\n单击 OpenAPI 名称，可直接跳转到对应的调试页面。\n\n​\n\n②\n\n​\n\nOpenAPI 基本信息\n\n​\n\n指定 OpenAPI 的基本信息，包括 OpenAPI 名称、请求方式、接口说明及注意事项。\n\n​\n\n③\n\n​\n\n请求参数\n\n​\n\n展示此 API 的请求参数，其中标记星号（\n\n*\n\n）的参数为必选参数。具体的参数说明可以单击\n\n展开全部\n\n来查看。\n\n​\n\n其中，token 是必填的 Header 请求参数。测试或调试场景下，可以使用个人访问令牌快速发起一个 API 请求，详细说明可参考\n\n​\n\n添加个人访问令牌\n\n；正式线上环境建议使用 OAuth 鉴权方式，详细说明可参考\n\n​\n\nOAuth 应用管理\n\n。\n\n​\n\n​\n\n返回参数\n\n​\n\n展示此 API 的返回参数。具体的参数说明可以单击\n\n展开\n\n按钮来查看。\n\n​\n\n​\n\n运行记录\n\n​\n\n展示所在套餐的版本内，最近 7 天近 5 条的 Playground 运行记录。\n\n​\n\n④\n\n​\n\n示例代码\n\n​\n\nOpenAPI 对应的示例代码。\n\n​\n\n填写参数后，单击\n\n运行\n\n。扣子编程对你填写的 token 进行鉴权后，会向该接口发起一个真实的线上请求，同时展示请求结构、响应内容等相关信息。\n\n​\n\n对于\n\n​\n\n发起对话\n\n和工作流相关接口，你还可以查看和复制各种语言版本下的示例代码，快速接入更语言的 SDK。\n\n​\n\n​\n\n探索 API Playground\n\n​\n\n说明\n\n执行以下操作前，请确认你已获取了一个生效中的访问令牌。\n\nAPI Playground 支持\n\n个人访问令牌或 OAuth Token。\n\n​\n\n​\n\n1.\n\n登录\n\nAPI Playground\n\n。\n\n​\n\n2.\n\n在左侧 OpenAPI 列表中，选择需要调用的 OpenAPI。\n\n​\n\n说明\n\nAPI 目录树默认为隐藏状态，当鼠标悬停在左侧导航栏与 Playground 页面的接缝处时，会自动显示 API 目录树。\n\n​\n\n若需固定显示 API 目录树，单击目录右侧的\n\n固定\n\n，将其固定在 Playground 页面的左侧。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n3.\n\n在请求参数区域填写必选的请求参数。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n4.\n\n在右侧示例代码区域，单击\n\n运行\n\n。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n5.\n\n在页面右下角查看返回结果。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n体验 SDK\n\n​\n\n你可以在 Playground 中体验 Chat SDK、Web SDK、Real-time Chat SDK 的能力。本文以 Chat SDK 为例，介绍具体的操作步骤。Real-time Chat SDK的详细步骤和参数说明请参见\n\n​\n\n体验智能音视频 Demo\n\n。\n\n​\n\n1.\n\n登录\n\nAPI Playground\n\n。\n\n​\n\n2.\n\n在左侧导航栏中选择\n\nSDK\n\n>\n\nChat SDK\n\n。\n\n​\n\n3.\n\n在\n\n请求配置\n\n或\n\n代码编辑区\n\n配置相关参数，详细的参数说明请参见\n\n​\n\n安装并使用 Chat SDK\n\n，单击\n\n运行\n\n。单击右下角的悬浮球。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n4.\n\n在聊天窗口中体验智能体或扣子应用的功能。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n常见问题\n\n​\n\nAPI Playground\n\n是否收费？\n\n​\n\nAPI Playground 免收 Playground 的功能使用费。但是如果账号调用了涉及模型处理的 API，则会产生费用。例如用户通过 API Playground 调用\n\n​\n\n发起对话\n\nAPI，会收取智能体调用次数的费用、火山方舟 Token 的费用。关于费用的详细说明可参考\n\n​\n\n计费概述\n\n。\n\n​\n\nAPI Playground 免收 Playground 的功能使用费。但是如果你调用了涉及模型处理或收费插件的 API，则会消耗 Coze 账号中的 Coze Token。关于费用的详细说明可参考\n\n​\n\n计费概述\n\n。\n\n​\n\n为什么看不到 Python 等语言的示例代码？\n\n​\n\n目前仅以下接口支持查看 Python 等场景开发语言的示例代码。\n\n​\n\n​\n\n发起对话\n\n​\n\n​\n\n执行工作流\n\n​\n\n​\n\n执行工作流（流式响应）\n\n​\n\n对于\n\n​\n\n发起对话\n\n接口，API Playground 提供流式响应、非流式响应、涉及端插件的响应等多种场景的示例代码供开发者参考和复制。\n\n​\n\n中国大陆以外的地区可以访问扣子 API 吗\n\n​\n\napi.coze.cn\n\n是扣子编程 OpenAPI 的统一访问域名，支持全球各个地区访问，在中国大陆以外的国家或者地区访问\n\napi.coze.cn\n\n的时候，扣子编程会提供一条高速通道，将这些用户的请求快速回源到中国大陆服务器。\n\n​\n\n目前支持将请求快速回源到中国大陆的国家或者地区有：美国、新加坡、香港。\n\n​\n\n上一篇\n\n准备工作\n\n下一篇\n\n鉴权方式概述",
        "links": []
      },
      "markdown": "- API Playground 使用真实的线上数据，通过 Playground 调用创建、修改或删除数据的 API 时，请务必谨慎操作。 ​\n\n- 扣子付费套餐用户调用 ​ 发起对话 等涉及模型处理的 API 时，会产生一定的费用。关于费用的详细说明可参考 ​ 计费概述 。 ​\n\n- 可视化调试 API ：支持在线可视化调试 API。只需根据页面提示填入必选参数，即可快速构建一个有效的 API 请求。API Playground 可以在线运行这个请求，并展示 API 的响应信息。 ​\n\n- API 文档 ：开发者可以在  API Playground 中快速查看 API 文档，文档中可视化展示 API 接口说明、请求参数说明，便于开发者理解参数结构。 ​\n\n- 示例代码 ：扣子编程支持 Python、JavaScript 等多种主流开发语言的 SDK，可简单便捷地调用扣子编程 OpenAPI。对于 ​ 发起对话 和工作流相关 API，扣子编程提供多语言 SDK 示例代码供开发者参考，提高编程效率。 ​\n\n| 编号​ | 区域​ | 说明​ |\n| ①​ | OpenAPI 列表​ | 扣子编程 OpenAPI 列表。​单击 OpenAPI 名称，可直接跳转到对应的调试页面。​ |\n| ②​ | OpenAPI 基本信息​ | 指定 OpenAPI 的基本信息，包括 OpenAPI 名称、请求方式、接口说明及注意事项。​ |\n| ③​ | 请求参数​ | 展示此 API 的请求参数，其中标记星号（*）的参数为必选参数。具体的参数说明可以单击展开全部来查看。​其中，token 是必填的 Header 请求参数。测试或调试场景下，可以使用个人访问令牌快速发起一个 API 请求，详细说明可参考​添加个人访问令牌；正式线上环境建议使用 OAuth 鉴权方式，详细说明可参考​OAuth 应用管理。​ |\n| ​ | 返回参数​ | 展示此 API 的返回参数。具体的参数说明可以单击展开按钮来查看。​ |\n| ​ | 运行记录​ | 展示所在套餐的版本内，最近 7 天近 5 条的 Playground 运行记录。​ |\n| ④​ | 示例代码​ | OpenAPI 对应的示例代码。​填写参数后，单击运行。扣子编程对你填写的 token 进行鉴权后，会向该接口发起一个真实的线上请求，同时展示请求结构、响应内容等相关信息。​对于​发起对话和工作流相关接口，你还可以查看和复制各种语言版本下的示例代码，快速接入更语言的 SDK。​ |\n\n\n\n- 说明 API 目录树默认为隐藏状态，当鼠标悬停在左侧导航栏与 Playground 页面的接缝处时，会自动显示 API 目录树。 ​ 若需固定显示 API 目录树，单击目录右侧的 固定 ，将其固定在 Playground 页面的左侧。 ​ ​ ​ ​ ​ ​ ​\n\n- API 目录树默认为隐藏状态，当鼠标悬停在左侧导航栏与 Playground 页面的接缝处时，会自动显示 API 目录树。 ​\n\n- 若需固定显示 API 目录树，单击目录右侧的 固定 ，将其固定在 Playground 页面的左侧。 ​\n\n- ​ ​ ​ ​ ​\n\n\n- ​ ​ ​ ​ ​\n\n\n- ​ ​ ​ ​ ​\n\n\n- ​ ​ ​ ​ ​\n\n\n\n\n- ​ ​ ​ ​ ​\n\n\n- ​ ​ ​ ​ ​\n\n- ​ 发起对话 ​\n\n- ​ 执行工作流 ​\n\n- ​ 执行工作流（流式响应） ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/authentication",
      "title": "鉴权方式概述",
      "content": {
        "sections": [],
        "full_text": "鉴权方式概述\n\n扣子编程 API 通过访问令牌进行 API 请求的鉴权。\n\n​\n\n鉴权方式\n\n​\n\n扣子编程 API 通过访问令牌（Access Token）进行 API 请求的鉴权。所有的 API 请求都必须在请求头的\n\nAuthorization\n\n参数中包含你的访问令牌（Access Token）。\n\n​\n\n​\n\nShell\n\n复制\n\nAuthorization: Bearer\n\n$Access_Token\n\n​\n\n​\n\n其中，\n\n$Access_Token\n\n分为以下三种：\n\n​\n\n​\n\n鉴权方式\n\n​\n\n说明\n\n​\n\n个人访问令牌\n\n​\n\nPersonal Access Token，简称 PAT。扣子编程中生成的个人访问令牌。每个令牌可以关联多个空间，并开通指定的接口权限。生成方式可参考\n\n​\n\n添加个人访问令牌\n\n。\n\n​\n\n注意\n\n虽然 PAT 生成和使用便捷，但其本质上是一种预授权的明文令牌。如果保管不当，极易导致令牌泄露，进而被黑灰产盗用，引发安全风险。\n\n​\n\n建议仅在测试环境、调试场景中使用 PAT，并严格限制其使用范围和有效期。\n\n​\n\n在生产环境中应谨慎使用 PAT，优先考虑更安全的认证方式 OAuth。\n\n​\n\n​\n\n服务访问令牌\n\n​\n\nService Access Token（简称 SAT）是以服务身份创建的访问凭证，可长期有效访问扣子编程资源，通常用于服务/应用程序的身份验证和授权。SAT 与 OAuth JWT 鉴权方式相比，具有更长的有效期（可设置为永久有效），操作简单，能够有效简化授权流程。\n\n​\n\nOAuth 访问令牌\n\n​\n\nOAuth Access Token，通过\n\nOAuth 2.0\n\n鉴权方式生成的 OAuth 访问令牌。该鉴权方式通常用于应用程序的身份验证和授权，和 PAT 鉴权方式相比，令牌有效期短，安全性更高，适用于线上生产环境。\n\n​\n\n扣子编程目前支持\n\n授权码（Authorization Code Grant）、JWT\n\n模式（JSON Web Tokens）\n\n等多种 OAuth 授权类型，详细说明请参见下文中的\n\n​\n\nOAuth 授权方式说明\n\n。\n\n​\n\n​\n\n你可以参考下图选择合适的鉴权方式。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\nOAuth 授权方式说明\n\n​\n\n扣子\n\n编程\n\nAPI 支持以下 OAuth 2.0 授权方式，提供标准的 OAuth 2.0 鉴权流程与方案，精细化的鉴权策略，便于开发者和渠道快速接入。OAuth 授权适用于应用程序以 API 方式集成\n\n扣子\n\n编程\n\n的某些功能，应用程序以\n\n扣子\n\n用户的身份调用\n\n扣子\n\n编程\n\nAPI。\n\n​\n\n​\n\n授权方式\n\n​\n\n适用场景\n\n​\n\n应用设置\n\n​\n\n参考文档\n\n​\n\n授权码授权\n\n​\n\n（Authorization Code Flow）\n\n​\n\n有显著前后端之分的应用程序授权场景。前端模块负责与用户交互，后端服务处理前端请求，与\n\n扣子\n\n授权服务器和 OpenAPI 交互。\n\n​\n\n应用类型：\n\n普通\n\n​\n\n客户端类型：\n\nWeb 后端应用\n\n​\n\n​\n\nOAuth 授权码授权\n\n​\n\n​\n\nOAuth 授权（多人协作场景）\n\n​\n\nPKCE 授权\n\n​\n\n（Authorization Code Flow with PKCE）\n\n​\n\n无后端服务的应用程序，所有操作发生在应用程序的前端。\n\n​\n\n应用类型：\n\n普通\n\n​\n\n客户端类型：\n\n移动端/PC 桌面端/单页面应用\n\n​\n\n​\n\nOAuth PKCE\n\n​\n\n​\n\nOAuth 授权（多人协作场景）\n\n​\n\n设备码授权\n\n​\n\n（Device Code Flow）\n\n​\n\n应用程序无后端服务，所有操作都发生在应用程序的 Command Line，且 Command Line 无法提供“同意授权”的操作。\n\n​\n\n应用类型：\n\n普通\n\n​\n\n客户端类型：\n\nTV端/设备应用/类命令行程序\n\n​\n\n​\n\nOAuth 设备授权\n\n​\n\n​\n\nOAuth 授权（多人协作场景）\n\n​\n\nJWT 授权\n\n​\n\n（JWT Flow）\n\n​\n\n应用程序服务端直接调用 Coze OpenAPI。\n\n​\n\n应用类型：\n\n普通\n\n​\n\n客户端类型：\n\n服务类应用\n\n​\n\n​\n\nOAuth JWT 授权（开发者）\n\n​\n\n​\n\n第三方渠道中的应用程序后端服务代理其终端用户获取访问令牌，终端用户基于访问令牌直接访问扣子编程 OpenAPI。\n\n​\n\n应用类型：\n\n渠道\n\n​\n\n客户端类型：\n\n服务类应用\n\n​\n\n​\n\nOAuth JWT 授权（渠道场景）\n\n​\n\n​\n\n应用程序服务端获取企业级资源的访问令牌，统筹管理企业成员、账单、组织和工作空间。\n\n​\n\n应用类型：企业特权应用\n\n​\n\n客户端类型：\n\n服务类应用\n\n​\n\n​\n\nOAuth JWT 授权（企业特权应用）\n\n​\n\n​\n\n说明\n\n在\n\n扣子\n\n编程中，所有 OAuth 应用的相关操作，均可能存在数秒的延迟，这是由于系统设计为保证高可用和高性能引入的缓存机制导致，如果您发现操作未生效，请等待一段期间后重试。\n\n​\n\n​\n\n鉴权示例代码\n\n​\n\n扣子编程提供了多语言的鉴权示例代码，包括个人访问令牌（PAT）和 OAuth 认证等多种鉴权方式，鉴权示例代码的地址如下表所示。您可以根据具体需求选择合适的示例代码，实现不同鉴权方式的集成。\n\n​\n\n​\n\n授权方式\n\n​\n\nPython\n\n​\n\nNode.js\n\n​\n\nJava\n\n​\n\nGo\n\n​\n\n个人访问令牌\n\n​\n\nexamples/\n\nauth_pat.py\n\n​\n\nauth/auth-pat.ts\n\n​\n\nTokenAuthExample.java\n\n​\n\npat_example.go\n\n​\n\nOAuth 授权码\n\n​\n\nexamples/\n\nauth_oauth_web.py\n\n​\n\nauth/auth-oauth-web.ts\n\n​\n\nWebOAuthExample.java\n\n​\n\nweb_oauth_example.go\n\n​\n\nOAuth JWT\n\n​\n\nexamples/\n\nauth_oauth_jwt.py\n\n​\n\nauth/auth-oauth-jwt.ts\n\n​\n\nauth/auth-oauth-jwt-channel.ts\n\n​\n\nJWTsOauthExample.java\n\n​\n\njwt_example.go\n\n​\n\nOAuth PKCE\n\n​\n\nexamples/\n\nauth_oauth_pkce.py\n\n​\n\nauth/auth-oauth-pkce.ts\n\n​\n\nPKCEOauthExample.java\n\n​\n\npkce_example.go\n\n​\n\nOAuth 设备码\n\n​\n\nexamples/\n\nauth_oauth_device.py\n\n​\n\nauth/auth-oauth-device.ts\n\n​\n\nDeviceOAuthExample.java\n\n​\n\ndevice_example.go\n\n​\n\n​\n\n你也可以在\n\nOAuth 应用\n\n页面下载对应鉴权方式的示例代码。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n角色与权限说明\n\n​\n\n不同扣子套餐支持的鉴权方式，以及各角色的操作权限如下表所示。✔️ 表示具备权限，- 表示没有权限。\n\n​\n\n​\n\n​\n\n鉴权方式\n\n​\n\n个人版\n\n​\n\n企业版\n\n​\n\n（企业标准版、企业旗舰版）\n\n​\n\n​\n\n​\n\n​\n\n超级管理员、管理员\n\n​\n\n员工\n\n​\n\n个人访问令牌（PAT）\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n服务访问令牌（SAT）\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\nOAuth 授权码授权\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\nOAuth PKCE\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\nOAuth 设备授权\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\nOAuth 授权（多人协作）\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\nOAuth JWT 授权（开发者）\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\nOAuth JWT 授权（渠道）\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\nOAuth JWT 授权（企业特权应用）\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\n​\n\n说明\n\n扣子企业版中的成员不支持创建组织级别的 OAuth 应用，仅超级管理员和管理员支持创建组织级别的 OAuth 应用。成员只支持创建个人版的 OAuth 应用。\n\n​\n\n​\n\n权限层级\n\n​\n\n扣子编程资源的权限点分为三个层级，各层级对应不同的生效范围，你可以在权限点右侧查看该权限点对应的层级。\n\n​\n\n权限层级查看入口\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n权限层级示意图\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n企业级别\n\n：权限点的生效范围为整个企业，例如查询企业下的\n\n账单文件、管理设备的权益额度等\n\n。仅企业的超级管理员和管理员能被授权该级别的权限，扣子个人账号或企业中的员工不支持授权企业层级的权限点。\n\n​\n\n账号级别\n\n：权限点的生效范围为当前账号\n\n。用户可通过\n\nAccess Token 管理账号下的会话、文件、音色等资源，例如查询当前账号下的所有会话。\n\n​\n\n工作空间级别\n\n：权限点的生效范围为你创建或加入的工作空间，授权时需要设置该 Access Token 可访问的工作空间，以便管理该工作空间中的\n\n智能体、工作流、应用等资源，例如在工作空间中创建智能体。\n\n​\n\n​\n\n​\n\n上一篇\n\nAPI Playground\n\n下一篇\n\n添加个人访问令牌",
        "links": []
      },
      "markdown": "| 鉴权方式​ | 说明​ |\n| 个人访问令牌​ | Personal Access Token，简称 PAT。扣子编程中生成的个人访问令牌。每个令牌可以关联多个空间，并开通指定的接口权限。生成方式可参考​添加个人访问令牌。​注意虽然 PAT 生成和使用便捷，但其本质上是一种预授权的明文令牌。如果保管不当，极易导致令牌泄露，进而被黑灰产盗用，引发安全风险。​建议仅在测试环境、调试场景中使用 PAT，并严格限制其使用范围和有效期。​在生产环境中应谨慎使用 PAT，优先考虑更安全的认证方式 OAuth。​​ |\n| 服务访问令牌​ | Service Access Token（简称 SAT）是以服务身份创建的访问凭证，可长期有效访问扣子编程资源，通常用于服务/应用程序的身份验证和授权。SAT 与 OAuth JWT 鉴权方式相比，具有更长的有效期（可设置为永久有效），操作简单，能够有效简化授权流程。​ |\n| OAuth 访问令牌​ | OAuth Access Token，通过OAuth 2.0鉴权方式生成的 OAuth 访问令牌。该鉴权方式通常用于应用程序的身份验证和授权，和 PAT 鉴权方式相比，令牌有效期短，安全性更高，适用于线上生产环境。​扣子编程目前支持授权码（Authorization Code Grant）、JWT模式（JSON Web Tokens）等多种 OAuth 授权类型，详细说明请参见下文中的​OAuth 授权方式说明。​ |\n\n| 授权方式​ | 适用场景​ | 应用设置​ | 参考文档​ |\n| 授权码授权​（Authorization Code Flow）​ | 有显著前后端之分的应用程序授权场景。前端模块负责与用户交互，后端服务处理前端请求，与扣子授权服务器和 OpenAPI 交互。​ | 应用类型：普通​客户端类型：Web 后端应用​ | ​OAuth 授权码授权​​OAuth 授权（多人协作场景）​ |\n| PKCE 授权​（Authorization Code Flow with PKCE）​ | 无后端服务的应用程序，所有操作发生在应用程序的前端。​ | 应用类型：普通​客户端类型：移动端/PC 桌面端/单页面应用​ | ​OAuth PKCE​​OAuth 授权（多人协作场景）​ |\n| 设备码授权​（Device Code Flow）​ | 应用程序无后端服务，所有操作都发生在应用程序的 Command Line，且 Command Line 无法提供“同意授权”的操作。​ | 应用类型：普通​客户端类型：TV端/设备应用/类命令行程序​ | ​OAuth 设备授权​​OAuth 授权（多人协作场景）​ |\n| JWT 授权​（JWT Flow）​ | 应用程序服务端直接调用 Coze OpenAPI。​ | 应用类型：普通​客户端类型：服务类应用​ | ​OAuth JWT 授权（开发者）​ |\n| ​ | 第三方渠道中的应用程序后端服务代理其终端用户获取访问令牌，终端用户基于访问令牌直接访问扣子编程 OpenAPI。​ | 应用类型：渠道​客户端类型：服务类应用​ | ​OAuth JWT 授权（渠道场景）​ |\n| ​ | 应用程序服务端获取企业级资源的访问令牌，统筹管理企业成员、账单、组织和工作空间。​ | 应用类型：企业特权应用​客户端类型：服务类应用​ | ​OAuth JWT 授权（企业特权应用）​ |\n\n- 应用类型： 普通 ​\n\n- 客户端类型： Web 后端应用 ​\n\n- 应用类型： 普通 ​\n\n- 客户端类型： 移动端/PC 桌面端/单页面应用 ​\n\n- 应用类型： 普通 ​\n\n- 客户端类型： TV端/设备应用/类命令行程序 ​\n\n- 应用类型： 普通 ​\n\n- 客户端类型： 服务类应用 ​\n\n- 应用类型： 渠道 ​\n\n- 客户端类型： 服务类应用 ​\n\n- 应用类型：企业特权应用 ​\n\n- 客户端类型： 服务类应用 ​\n\n| 授权方式​ | Python​ | Node.js​ | Java​ | Go​ |\n| 个人访问令牌​ | examples/auth_pat.py​ | auth/auth-pat.ts​ | TokenAuthExample.java​ | pat_example.go​ |\n| OAuth 授权码​ | examples/auth_oauth_web.py​ | auth/auth-oauth-web.ts​ | WebOAuthExample.java​ | web_oauth_example.go​ |\n| OAuth JWT​ | examples/auth_oauth_jwt.py​ | auth/auth-oauth-jwt.ts​auth/auth-oauth-jwt-channel.ts​ | JWTsOauthExample.java​ | jwt_example.go​ |\n| OAuth PKCE​ | examples/auth_oauth_pkce.py​ | auth/auth-oauth-pkce.ts​ | PKCEOauthExample.java​ | pkce_example.go​ |\n| OAuth 设备码​ | examples/auth_oauth_device.py​ | auth/auth-oauth-device.ts​ | DeviceOAuthExample.java​ | device_example.go​ |\n\n| ​鉴权方式​ | 个人版​ | 企业版​（企业标准版、企业旗舰版）​ | ​ |\n| ​ | ​ | 超级管理员、管理员​ | 员工​ |\n| 个人访问令牌（PAT）​ | ✔️​ | ✔️​ | ✔️​ |\n| 服务访问令牌（SAT）​ | ✔️​ | ✔️​ | -​ |\n| OAuth 授权码授权​ | ✔️​ | ✔️​ | -​ |\n| OAuth PKCE​ | ✔️​ | ✔️​ | -​ |\n| OAuth 设备授权​ | ✔️​ | ✔️​ | -​ |\n| OAuth 授权（多人协作）​ | -​ | ✔️​ | -​ |\n| OAuth JWT 授权（开发者）​ | ✔️​ | ✔️​ | -​ |\n| OAuth JWT 授权（渠道）​ | ✔️​ | ✔️​ | -​ |\n| OAuth JWT 授权（企业特权应用）​ | -​ | ✔️​ | -​ |\n\n- 企业级别 ：权限点的生效范围为整个企业，例如查询企业下的 账单文件、管理设备的权益额度等 。仅企业的超级管理员和管理员能被授权该级别的权限，扣子个人账号或企业中的员工不支持授权企业层级的权限点。 ​\n\n- 账号级别 ：权限点的生效范围为当前账号 。用户可通过 Access Token 管理账号下的会话、文件、音色等资源，例如查询当前账号下的所有会话。 ​\n\n- 工作空间级别 ：权限点的生效范围为你创建或加入的工作空间，授权时需要设置该 Access Token 可访问的工作空间，以便管理该工作空间中的 智能体、工作流、应用等资源，例如在工作空间中创建智能体。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/pat",
      "title": "添加个人访问令牌",
      "content": {
        "sections": [],
        "full_text": "添加个人访问令牌\n\n个人访问令牌是\n\n扣子\n\n编程提供的短效令牌，用于 API 请求鉴权。你可以在\n\n扣子\n\n编程中生成个人访问令牌，并为其授予本人拥有的指定空间、指定操作的权限。通过此令牌可以对空间中的资源进行某些已授权的操作，例如与空间中所有智能体进行对话，或编辑空间中的所有知识库。\n\n​\n\n注意\n\n虽然 PAT 生成和使用便捷，但其本质上是一种预授权的明文令牌。如果保管不当，极易导致令牌泄露，进而被黑灰产盗用，引发安全风险。因此，建议仅在测试环境、调试场景中使用 PAT，并严格限制其使用范围和有效期。在生产环境中请勿使用 PAT，选择更安全的认证方式 OAuth。\n\n​\n\n​\n\n说明\n\n不要与他人共享你的个人访问令牌，也不要在浏览器或其他客户端代码中暴露个人访问令牌信息。\n\n​\n\n个人访问令牌有效期可设置为 1~30 天，生成后不支持修改过期时间，过期后应重新申请。\n\n​\n\n创建个人访问令牌之后，转移空间所有权会导致该空间已申请的个人访问令牌失效，请慎重转移所有权。\n\n​\n\n​\n\n使用限制\n\n​\n\n扣子个人版中，每个用户最多创建 10 个个人访问令牌。\n\n​\n\n扣子企业版（企业标准版、企业旗舰版）中，一个企业下最多创建 1000 个个人访问令牌，每个用户最多创建 20 个个人访问令牌。\n\n​\n\n操作步骤\n\n​\n\n生成个人访问令牌的操作步骤如下：\n\n​\n\n1.\n\n登录\n\n扣子编程\n\n。\n\n​\n\n2.\n\n在左侧导航栏选择\n\nAPI & SDK。\n\n​\n\n3.\n\n在顶部单击\n\n授权\n\n页签，单击\n\n个人访问令牌\n\n页签。\n\n​\n\n4.\n\n在右上角单击\n\n添加\n\n。在\n\n添加新的个人访问\n\n令牌页面完成以下配置，然后单击\n\n确定\n\n。\n\n​\n\n​\n\n配置项\n\n​\n\n说明\n\n​\n\n名称\n\n​\n\n个人访问令牌的名称。\n\n​\n\n过期时间\n\n​\n\n个人访问令牌的有效期时长。令牌过期后将会失效，无法继续用它来调用\n\n扣子\n\nAPI。\n\n​\n\n生成令牌后，无法修改过期时间。\n\n​\n\n权限\n\n​\n\n个人访问令牌的权限。不同层级权限的生效范围请参见\n\n​\n\n权限层级\n\n。\n\n​\n\n调用 API 时，个人访问令牌应具备对应的 API 权限，否则报错 4101。\n\n​\n\n访问工作空间\n\n​\n\n可以使用该令牌的空间。\n\n​\n\n说明\n\n扣子企业版：成员可以选择本组织中，本人创建或加入的某个工作空间，或目前和将来创建或加入的所有工作空间。超级管理员和管理员可以选择本组织中所有工作空间。\n\n​\n\n扣子个人版：仅支持选择你作为空间\n\n所有者\n\n的工作空间。\n\n​\n\n​\n\n​\n\n5.\n\n复制并妥善保存个人访问令牌。\n\n​\n\n生成的令牌仅在此时展示一次，请即刻复制并保存。\n\n​\n\n常见问题\n\n​\n\n可以通过个人访问令牌调用其他人的智能体吗？\n\n​\n\n在扣子企业版中，如果你已加入某个智能体所在的空间，申请个人访问令牌时可以选择该空间。\n\n此令牌能与该空间下所有智能体进行会话消息等读操作，但无法编辑其他人的智能体，只有智能体的所有者和协作者能编辑智能体。\n\n​\n\n在\n\n扣子个人版中\n\n，如果其他人的智能体位于你拥有的工作空间中，申请个人访问令牌时可以选择该工作空间，此令牌将拥有该空间下所有智能体的操作权限。如果智能体或知识库等资源位于其他人拥有的工作空间中，你创建的个人访问令牌无法调用这些资源，建议将该工作空间的所有权转移至你名下，然后由你重新申请访问令牌。\n\n​\n\n为什么创建个人访问令牌时无法选择我加入的空间？\n\n​\n\n在扣子企业版中，创建个人令牌时可以选择在该企业下，你加入的空间。\n\n​\n\n在扣子\n\n个人版中，仅\n\n空间的所有者可以为该空间创建个人访问令牌。如果你是空间的成员但不是所有者，则无法为该空间创建访问令牌，所以无法选择该空间。\n\n​\n\n个人访问令牌的有效期可以设置为永久吗？\n\n​\n\n不可以。\n\n​\n\n根据扣子编程的安全策略，个人访问令牌的有效期最长可设置为 30 天，不能设置为永久有效。这一限制是为了增强安全性，确保即使令牌泄露也只能在有限的时间内被滥用。过期后，你需要重新生成新的令牌以继续使用相关 API 功能。\n\n​\n\n上一篇\n\n鉴权方式概述\n\n下一篇\n\n添加服务访问令牌",
        "links": []
      },
      "markdown": "- 不要与他人共享你的个人访问令牌，也不要在浏览器或其他客户端代码中暴露个人访问令牌信息。 ​\n\n- 个人访问令牌有效期可设置为 1~30 天，生成后不支持修改过期时间，过期后应重新申请。 ​\n\n- 创建个人访问令牌之后，转移空间所有权会导致该空间已申请的个人访问令牌失效，请慎重转移所有权。 ​\n\n- 扣子个人版中，每个用户最多创建 10 个个人访问令牌。 ​\n\n- 扣子企业版（企业标准版、企业旗舰版）中，一个企业下最多创建 1000 个个人访问令牌，每个用户最多创建 20 个个人访问令牌。 ​\n\n\n\n\n\n- ​ 配置项 ​ 说明 ​ 名称 ​ 个人访问令牌的名称。 ​ 过期时间 ​ 个人访问令牌的有效期时长。令牌过期后将会失效，无法继续用它来调用 扣子 API。 ​ 生成令牌后，无法修改过期时间。 ​ 权限 ​ 个人访问令牌的权限。不同层级权限的生效范围请参见 ​ 权限层级 。 ​ 调用 API 时，个人访问令牌应具备对应的 API 权限，否则报错 4101。 ​ 访问工作空间 ​ 可以使用该令牌的空间。 ​ 说明 扣子企业版：成员可以选择本组织中，本人创建或加入的某个工作空间，或目前和将来创建或加入的所有工作空间。超级管理员和管理员可以选择本组织中所有工作空间。 ​ 扣子个人版：仅支持选择你作为空间 所有者 的工作空间。 ​ ​ ​\n\n| 配置项​ | 说明​ |\n| 名称​ | 个人访问令牌的名称。​ |\n| 过期时间​ | 个人访问令牌的有效期时长。令牌过期后将会失效，无法继续用它来调用扣子API。​生成令牌后，无法修改过期时间。​ |\n| 权限​ | 个人访问令牌的权限。不同层级权限的生效范围请参见​权限层级。​调用 API 时，个人访问令牌应具备对应的 API 权限，否则报错 4101。​ |\n| 访问工作空间​ | 可以使用该令牌的空间。​说明扣子企业版：成员可以选择本组织中，本人创建或加入的某个工作空间，或目前和将来创建或加入的所有工作空间。超级管理员和管理员可以选择本组织中所有工作空间。​扣子个人版：仅支持选择你作为空间所有者的工作空间。​​ |\n\n- 扣子企业版：成员可以选择本组织中，本人创建或加入的某个工作空间，或目前和将来创建或加入的所有工作空间。超级管理员和管理员可以选择本组织中所有工作空间。 ​\n\n- 扣子个人版：仅支持选择你作为空间 所有者 的工作空间。 ​\n\n\n- 生成的令牌仅在此时展示一次，请即刻复制并保存。 ​\n\n- 在扣子企业版中，如果你已加入某个智能体所在的空间，申请个人访问令牌时可以选择该空间。 此令牌能与该空间下所有智能体进行会话消息等读操作，但无法编辑其他人的智能体，只有智能体的所有者和协作者能编辑智能体。 ​\n\n- 在 扣子个人版中 ，如果其他人的智能体位于你拥有的工作空间中，申请个人访问令牌时可以选择该工作空间，此令牌将拥有该空间下所有智能体的操作权限。如果智能体或知识库等资源位于其他人拥有的工作空间中，你创建的个人访问令牌无法调用这些资源，建议将该工作空间的所有权转移至你名下，然后由你重新申请访问令牌。 ​\n\n- 在扣子企业版中，创建个人令牌时可以选择在该企业下，你加入的空间。 ​\n\n- 在扣子 个人版中，仅 空间的所有者可以为该空间创建个人访问令牌。如果你是空间的成员但不是所有者，则无法为该空间创建访问令牌，所以无法选择该空间。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/service_token",
      "title": "添加服务访问令牌",
      "content": {
        "sections": [],
        "full_text": "添加服务访问令牌\n\n本文介绍如何在扣子编程创建服务访问令牌。\n\n​\n\n功能简介\n\n​\n\n服务访问令牌（Service Access Token，简称 SAT）是以服务身份创建的长效令牌，用于服务/应用程序的身份验证和授权。服务访问令牌的有效期可设置为永久，适合需要长期稳定身份验证的场景，例如企业应用集成和服务间 API 调用。\n\n​\n\n你可以在\n\n扣子\n\n编程中生成服务访问令牌，并为其授予指定空间、指定操作的权限。通过服务访问令牌，服务或应用程序可以对授权空间中的资源执行一系列操作，例如与空间中的所有智能体进行对话，或编辑空间中的所有知识库。\n\n​\n\n说明\n\n不要与他人共享你的服务访问令牌，也不要在浏览器或其他客户端代码中暴露服务访问令牌信息。\n\n​\n\n扣子个人版中，创建服务访问令牌之后，转移空间所有权会导致该空间已申请的服务访问令牌失效，请慎重转移所有权。\n\n​\n\n​\n\n使\n\n用限制\n\n​\n\n扣子企业版（企业标准版、企业旗舰版）中，仅企业的\n\n超级\n\n管理员和管理员支持创建服务访问令牌。\n\n​\n\n一个企业下最多创建 100 个服务访问令牌。\n\n​\n\n扣子个人版中，每个用户最多创建 10 个服务访问令牌。\n\n​\n\n操作步骤\n\n​\n\n生成服务访问令牌的操作步骤如下：\n\n​\n\n1.\n\n（可选）在\n\n扣子编程\n\n左下角单击个人头像，切换到企业版。\n\n​\n\n仅扣子企业版需要执行该操作。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n3.\n\n在左侧导航栏选择\n\nAPI & SDK。\n\n​\n\n4.\n\n在顶部单击\n\n授权\n\n页签，单击\n\n服务身份凭证\n\n页签。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n5.\n\n在右上角单击\n\n添加\n\n，配置名称、过期时间、权限、访问工作空间等参数，单击\n\n确定\n\n。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n配置项\n\n​\n\n说明\n\n​\n\n名称\n\n​\n\n服务访问令牌的名称。\n\n​\n\n过期时间\n\n​\n\n服务访问令牌的有效期时长。支持设置为 1 天、30 天、 90 天、180 天、长期有效或自定义。\n\n​\n\n令牌过期后将会失效，无法继续用它来调用\n\n扣子\n\nAPI。\n\n​\n\n生成令牌后，你可以编辑并修改过期时间。\n\n​\n\n权限\n\n​\n\n服务访问令牌的权限。不同层级权限的生效范围请参见\n\n​\n\n权限层级\n\n。\n\n​\n\n调用 API 时，服务访问令牌应具备对应的 API 权限，否则报错 4101。\n\n​\n\n访问工作空间\n\n​\n\n可以使用该令牌的工作空间，你可以根据需要选择其中一种：\n\n​\n\n说明\n\n扣子个人版：仅支持选择你作为\n\n空间所有者\n\n的工作空间，或目前和将来创建的所有工作空间，不支持选择你作为成员加入的空间。\n\n​\n\n扣子企业版：超级管理员和管理员可以选择企业中，本人创建或加入的指定工作空间，或目前和将来创建的所有工作空间。\n\n​\n\n​\n\n​\n\n6.\n\n复制并妥善保存服务访问令牌。\n\n​\n\n生成的令牌仅在此时展示一次，\n\n请即刻复制并保存。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n常见问题\n\n​\n\n切换为服务访问令牌后，对线上业务有影响吗？\n\n​\n\n如果之前使用个人访问令牌或普通 JWT 访问令牌，切换为服务访问令牌后，对线上业务的影响如下：\n\n​\n\n扣子企业版用户\n\n：切换后对线上业务无影响，之前已创建的会话仍能正常访问。但如果之前使用 JWT 实现了会话隔离，切换为服务访问令牌后，会话隔离功能将失效，因为服务访问令牌不支持会话隔离功能。\n\n​\n\n从个人版升级到企业版\n\n：原个人账号下的会话将无法访问，且不支持通过\n\n个人账号资源授权\n\n，授予企业账号的访问令牌访问原个人账号中的会话等资源。\n\n​\n\n可以通过服务访问令牌调用其他人的智能体吗？\n\n​\n\n在扣子个人版中，如果其他人的智能体位于你拥有的工作空间中，申请服务访问令牌时可以选择该工作空间，此令牌将拥有该空间下所有智能体的操作权限。如果智能体或知识库等资源位于其他人拥有的工作空间中，你创建的服务访问令牌无法调用这些资源，建议将该工作空间的所有权转移至你名下，然后由你重新申请访问令牌。\n\n​\n\n在扣子企业版中，如果你已加入某个智能体所在的空间，申请服务访问令牌时可以选择该空间。此令牌能与该空间下所有智能体进行会话消息等读操作，但无法编辑其他人的智能体，只有智能体的所有者和协作者能编辑智能体。\n\n​\n\n为什么创建服务访问令牌时无法选择我加入的空间？\n\n​\n\n在扣子个人版中，仅空间的所有者可以为该空间创建服务访问令牌。如果你是空间的成员但不是所有者，则无法为该空间创建服务访问令牌，所以无法选择该空间。\n\n​\n\n在扣子企业版中，创建服务令牌时可以选择在该企业下，你加入的空间。\n\n​\n\n​\n\n上一篇\n\n添加个人访问令牌\n\n下一篇\n\nOAuth 应用管理",
        "links": []
      },
      "markdown": "- 不要与他人共享你的服务访问令牌，也不要在浏览器或其他客户端代码中暴露服务访问令牌信息。 ​\n\n- 扣子个人版中，创建服务访问令牌之后，转移空间所有权会导致该空间已申请的服务访问令牌失效，请慎重转移所有权。 ​\n\n- 扣子企业版（企业标准版、企业旗舰版）中，仅企业的 超级 管理员和管理员支持创建服务访问令牌。 ​\n\n- 一个企业下最多创建 100 个服务访问令牌。 ​\n\n- 扣子个人版中，每个用户最多创建 10 个服务访问令牌。 ​\n\n\n- 仅扣子企业版需要执行该操作。 ​\n\n- ​ ​ ​ ​ ​\n\n\n\n- ​ ​ ​ ​ ​\n\n\n- ​ ​ ​ ​ ​\n\n- ​ 配置项 ​ 说明 ​ 名称 ​ 服务访问令牌的名称。 ​ 过期时间 ​ 服务访问令牌的有效期时长。支持设置为 1 天、30 天、 90 天、180 天、长期有效或自定义。 ​ 令牌过期后将会失效，无法继续用它来调用 扣子 API。 ​ 生成令牌后，你可以编辑并修改过期时间。 ​ 权限 ​ 服务访问令牌的权限。不同层级权限的生效范围请参见 ​ 权限层级 。 ​ 调用 API 时，服务访问令牌应具备对应的 API 权限，否则报错 4101。 ​ 访问工作空间 ​ 可以使用该令牌的工作空间，你可以根据需要选择其中一种： ​ 说明 扣子个人版：仅支持选择你作为 空间所有者 的工作空间，或目前和将来创建的所有工作空间，不支持选择你作为成员加入的空间。 ​ 扣子企业版：超级管理员和管理员可以选择企业中，本人创建或加入的指定工作空间，或目前和将来创建的所有工作空间。 ​ ​ ​\n\n| 配置项​ | 说明​ |\n| 名称​ | 服务访问令牌的名称。​ |\n| 过期时间​ | 服务访问令牌的有效期时长。支持设置为 1 天、30 天、 90 天、180 天、长期有效或自定义。​令牌过期后将会失效，无法继续用它来调用扣子API。​生成令牌后，你可以编辑并修改过期时间。​ |\n| 权限​ | 服务访问令牌的权限。不同层级权限的生效范围请参见​权限层级。​调用 API 时，服务访问令牌应具备对应的 API 权限，否则报错 4101。​ |\n| 访问工作空间​ | 可以使用该令牌的工作空间，你可以根据需要选择其中一种：​说明扣子个人版：仅支持选择你作为空间所有者的工作空间，或目前和将来创建的所有工作空间，不支持选择你作为成员加入的空间。​扣子企业版：超级管理员和管理员可以选择企业中，本人创建或加入的指定工作空间，或目前和将来创建的所有工作空间。​​ |\n\n- 扣子个人版：仅支持选择你作为 空间所有者 的工作空间，或目前和将来创建的所有工作空间，不支持选择你作为成员加入的空间。 ​\n\n- 扣子企业版：超级管理员和管理员可以选择企业中，本人创建或加入的指定工作空间，或目前和将来创建的所有工作空间。 ​\n\n\n- 生成的令牌仅在此时展示一次， 请即刻复制并保存。 ​\n\n- ​ ​ ​ ​ ​\n\n- 扣子企业版用户 ：切换后对线上业务无影响，之前已创建的会话仍能正常访问。但如果之前使用 JWT 实现了会话隔离，切换为服务访问令牌后，会话隔离功能将失效，因为服务访问令牌不支持会话隔离功能。 ​\n\n- 从个人版升级到企业版 ：原个人账号下的会话将无法访问，且不支持通过 个人账号资源授权 ，授予企业账号的访问令牌访问原个人账号中的会话等资源。 ​\n\n- 在扣子个人版中，如果其他人的智能体位于你拥有的工作空间中，申请服务访问令牌时可以选择该工作空间，此令牌将拥有该空间下所有智能体的操作权限。如果智能体或知识库等资源位于其他人拥有的工作空间中，你创建的服务访问令牌无法调用这些资源，建议将该工作空间的所有权转移至你名下，然后由你重新申请访问令牌。 ​\n\n- 在扣子企业版中，如果你已加入某个智能体所在的空间，申请服务访问令牌时可以选择该空间。此令牌能与该空间下所有智能体进行会话消息等读操作，但无法编辑其他人的智能体，只有智能体的所有者和协作者能编辑智能体。 ​\n\n- 在扣子个人版中，仅空间的所有者可以为该空间创建服务访问令牌。如果你是空间的成员但不是所有者，则无法为该空间创建服务访问令牌，所以无法选择该空间。 ​\n\n- 在扣子企业版中，创建服务令牌时可以选择在该企业下，你加入的空间。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/oauth_apps",
      "title": "OAuth 应用管理",
      "content": {
        "sections": [],
        "full_text": "OAuth 应用管理\n\n本文介绍如何管理 OAuth 应用，包括安装、卸载、启用、禁用、编辑和删除 OAuth 应用等。\n\n​\n\n说明\n\n角色限制\n\n：在扣子企业版（企业标准版、企业旗舰版）中，仅\n\n超级管理员\n\n和\n\n管理员\n\n有权限管理 OAuth 应用，包括创建、编辑、删除、启用、禁用、安装和卸载 OAuth 应用，以及对应用进行授权操作。\n\n​\n\n数量限制\n\n：扣子个人版中，每个用户最多创建 10 个 OAuth 应用。扣子企业版中，一个企业下最多创建 100 个 OAuth 应用。\n\n​\n\n​\n\n基本概念\n\n​\n\nAppAuth 授权：应用以自身身份去访问扣子编程的资源。例如，一个后端服务需要从扣子编程获取数据。\n\n​\n\nOBO 授权: 应用以用户的身份去访问扣子编程的资源。例如，在跨企业协作场景中，外部应用需要访问本企业的资源时，OBO 应用可以确保这些操作是以用户身份进行的，保护企业数据的安全。\n\n​\n\n不同的扣子 OAuth 授权对应的授权类型和适用的客户端类型如下表所示。\n\n​\n\n​\n\n授权类型\n\n​\n\n授权方式\n\n​\n\n客户端类型\n\n​\n\nOBO 授权\n\n​\n\n​\n\nOAuth 授权码授权\n\n​\n\nWeb 后端应用\n\n​\n\nOBO 授权\n\n​\n\n​\n\nOAuth PKCE\n\n​\n\n移动端/PC 桌面端/单页面应用\n\n​\n\nOBO 授权\n\n​\n\n​\n\nOAuth 设备授权\n\n​\n\nTV端/设备应用/类命令行程序\n\n​\n\nAppAuth 授权\n\n​\n\n​\n\nOAuth JWT 授权（开发者）\n\n​\n\n服务类应用\n\n​\n\n​\n\n安装和卸载应用\n\n​\n\n以下操作仅适用于扣子企业版，\n\n且只企业超级管理员和管理员有权限安装和卸载应用。\n\n​\n\n在\n\n应用安装管理\n\n页面，你可以查看企业下已安装的应用，并处理 OBO 应用的安装申请。\n\n​\n\n注意\n\n卸载应用后，将删除 OAuth 应用当前正在使用的所有访问令牌。此操作会导致应用程序无法正常访问\n\n扣子\n\nAPI，请谨慎操作。\n\n​\n\n​\n\n1.\n\n登录\n\n扣子编程\n\n。\n\n​\n\n2.\n\n在左侧导航栏选择\n\nAPI & SDK。\n\n​\n\n3.\n\n在顶部单击\n\n授权\n\n页签 ，单击\n\n应用安装管理\n\n页签。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n4.\n\n在\n\n应用安装管理\n\n页面，超级管理员可以查看已安装的应用，安装状态说明如下：\n\n​\n\n已安装 AppAuth\n\n：表示该 OAuth 应用已创建并完成授权。\n\n​\n\n已安装 OBO\n\n：表示该 OAuth 应用已完成授权，且已获得访问本企业资源的权限。\n\n​\n\n未安装 OBO\n\n：用户已发起 OAuth 应用的安装申请，但超级管理员尚未同意安装。\n\n​\n\n说明\n\n在应用安装管理页面展示的应用包括：\n\n​\n\n已完成 OAuth 授权的服务类应用。\n\n​\n\n曾获取过访问令牌的 OBO 应用，包括 Web 后端应用、TV端/设备应用/类命令行程序、移动端/PC 桌面端/单页面应用。\n\n​\n\n​\n\n5.\n\n安装和卸载应用。\n\n​\n\n对于未安装的 OBO 应用，超级管理员可以单击\n\n操作\n\n列中的\n\n安装\n\n，授权 OAuth 应用。\n\n​\n\n对于已安装的应用，超级管理员单击\n\n操作\n\n列中的\n\n卸载\n\n，可以取消 OAuth 应用的授权。\n\n​\n\n卸载的应用将不在\n\n应用安装管理\n\n页面展示。\n\n​\n\n查看已授权的应用\n\n​\n\n以下操作仅适用于扣子个人版。\n\n​\n\n在\n\n已授权的应用\n\n页签下，可查看已授权的应用列表。\n\n​\n\n说明\n\n对于后端应用，此处展示已完成 OAuth 授权的应用列表。\n\n​\n\n对于 Web 应用，此处展示曾获取过访问令牌的应用列表。\n\n​\n\n​\n\n撤销应用授权\n\n​\n\n以下操作仅适用于扣子个人版。\n\n​\n\n在\n\n已授权的应用\n\n页签下，单击\n\n撤销授权\n\n，可以删除此应用的访问令牌。\n\n​\n\n说明\n\n撤销授权将删除 OAuth 应用当前正在使用的所有访问令牌。此操作导致应用程序无法正常访问\n\n扣子\n\nAPI，请谨慎使用此功能。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n启用或禁用 OAuth 应用\n\n​\n\n创建 OAuth 应用后，此应用默认为启用状态。禁用应用操作将暂时禁用当前应用所有的访问令牌，您的应用在禁用期间将无法正常访问扣子 API。重新启用应用后，访问令牌将恢复扣子 API 的访问权限。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n编辑应用\n\n​\n\n你可以在\n\n授权\n\n>\n\nOAuth 应用\n\n页面中找到待编辑的应用，并在\n\n操作\n\n列单击修改图标，修改已创建的 OAuth 应用。暂不支持修改应用类型。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n删除应用\n\n​\n\n如果某个应用后续不再使用，你可以删除应用。注意，删除应用后，数据将无法恢复，请谨慎操作。\n\n​\n\n1.\n\n在\n\n授权\n\n>\n\nOAuth 应用\n\n页面的应用列表中找到目标应用。\n\n​\n\n2.\n\n在\n\n操作\n\n列单击删除，删除 OAuth 应用。\n\n​\n\n删除 OAuth 应用会同时撤销所有相关的授权。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n上一篇\n\n添加服务访问令牌\n\n下一篇\n\n通过示例文件体验 OAuth 授权流程",
        "links": []
      },
      "markdown": "- 角色限制 ：在扣子企业版（企业标准版、企业旗舰版）中，仅 超级管理员 和 管理员 有权限管理 OAuth 应用，包括创建、编辑、删除、启用、禁用、安装和卸载 OAuth 应用，以及对应用进行授权操作。 ​\n\n- 数量限制 ：扣子个人版中，每个用户最多创建 10 个 OAuth 应用。扣子企业版中，一个企业下最多创建 100 个 OAuth 应用。 ​\n\n- AppAuth 授权：应用以自身身份去访问扣子编程的资源。例如，一个后端服务需要从扣子编程获取数据。 ​\n\n- OBO 授权: 应用以用户的身份去访问扣子编程的资源。例如，在跨企业协作场景中，外部应用需要访问本企业的资源时，OBO 应用可以确保这些操作是以用户身份进行的，保护企业数据的安全。 ​\n\n| 授权类型​ | 授权方式​ | 客户端类型​ |\n| OBO 授权​ | ​OAuth 授权码授权​ | Web 后端应用​ |\n| OBO 授权​ | ​OAuth PKCE​ | 移动端/PC 桌面端/单页面应用​ |\n| OBO 授权​ | ​OAuth 设备授权​ | TV端/设备应用/类命令行程序​ |\n| AppAuth 授权​ | ​OAuth JWT 授权（开发者）​ | 服务类应用​ |\n\n\n\n\n- ​ ​ ​ ​ ​\n\n\n- 已安装 AppAuth ：表示该 OAuth 应用已创建并完成授权。 ​\n\n- 已安装 OBO ：表示该 OAuth 应用已完成授权，且已获得访问本企业资源的权限。 ​\n\n- 未安装 OBO ：用户已发起 OAuth 应用的安装申请，但超级管理员尚未同意安装。 ​\n\n- 说明 在应用安装管理页面展示的应用包括： ​ 已完成 OAuth 授权的服务类应用。 ​ 曾获取过访问令牌的 OBO 应用，包括 Web 后端应用、TV端/设备应用/类命令行程序、移动端/PC 桌面端/单页面应用。 ​ ​\n\n- 已完成 OAuth 授权的服务类应用。 ​\n\n- 曾获取过访问令牌的 OBO 应用，包括 Web 后端应用、TV端/设备应用/类命令行程序、移动端/PC 桌面端/单页面应用。 ​\n\n\n- 对于未安装的 OBO 应用，超级管理员可以单击 操作 列中的 安装 ，授权 OAuth 应用。 ​\n\n- 对于已安装的应用，超级管理员单击 操作 列中的 卸载 ，可以取消 OAuth 应用的授权。 ​\n\n- 卸载的应用将不在 应用安装管理 页面展示。 ​\n\n- 对于后端应用，此处展示已完成 OAuth 授权的应用列表。 ​\n\n- 对于 Web 应用，此处展示曾获取过访问令牌的应用列表。 ​\n\n\n\n- 删除 OAuth 应用会同时撤销所有相关的授权。 ​\n\n- ​ ​ ​ ​ ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/ouath_demo",
      "title": "通过示例文件体验 OAuth 授权流程",
      "content": {
        "sections": [],
        "full_text": "通过示例文件体验 OAuth 授权流程\n\n扣子编程提供 OAuth 配置的示例文件，帮助开发者在测试验证阶段快速了解和体验 OAuth Token 的生成与授权流程。示例文件中包括客户端私钥等 OAuth 应用的配置信息，并提供 Python、\n\nJavaScript\n\n、Go 和 Java 四种语言类型的启动脚本，此外还附上了扣子编程 OpenAPI 的请求示例，开发者运行脚本并获取 OAuth Token 后即可成功发起 OpenAPI 请求。\n\n​\n\n扣子编程支持的所有 OAuth 授权方式均提供示例文件以供体验。本文档以 Python 语言、授权码授权方式为例，演示下载示例文件并运行脚本获取 OAuth Token 的完整过程。\n\n​\n\n说明\n\n此方式仅用于测试验证阶段快速了解和体验 OAuth 授权流程，为了安全起见，获取的 OAuth Token 不建议应用在线上生产环境。线上环境可使用扣子编程提供的各种语言 SDK，参考各个 SDK 的鉴权示例，详细说明可参考\n\n​\n\n示例代码\n\n。\n\n​\n\nOAuth Token 存在有效期限制，你可以根据页面提示刷新 Token。\n\n​\n\n​\n\n步骤一：下载示例文件\n\n​\n\n在扣子编程中找到 OAuth 应用，并下载目标语言的配置示例文件。操作步骤如下：\n\n​\n\n1.\n\n登录\n\n扣子编程\n\n。\n\n​\n\n2.\n\n在左侧导航栏选择\n\nAPI 管理\n\n，在顶部选择\n\n授权\n\n>\n\nOAuth 应用\n\n页面。\n\n​\n\n3.\n\n找到目标 OAuth 应用，并在其对应的\n\n操作\n\n列单击下载图标。\n\n​\n\n授权码授权方式对应的客户端类型为 Web 后端应用。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n4.\n\n预览配置信息，并选择配置语言。\n\n​\n\n预览 client_id 等配置信息，确认无误后选择配置语言。扣子编程提供 Python、\n\nJavaScript\n\n、Go 和 Java 四种语言类型的示例文件，此处我们选择默认的 Python。\n\n​\n\n5.\n\n单击\n\n下载\n\n。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n步骤二：本地运行脚本\n\n​\n\n本地运行脚本后，通过浏览器访问本地地址，即可根据页面提示获取 OAuth Token。\n\n​\n\n说明\n\n运行脚本之前，应确认本地已安装了对应开发语言的运行环境。各个语言的版本要求如下：\n\n​\n\nPython：3.7 及后续版本。\n\n​\n\nJavaScript\n\n： Node 14 及后续版本。\n\n​\n\nGo：1.18 及后续版本。\n\n​\n\nJava：Java 8、Java 11 或 Java 17。\n\n​\n\n请确保本地主机的 8080 端口未被占用。\n\n​\n\n​\n\n1.\n\n解压缩示例文件到本地目录。\n\n​\n\n2.\n\n在解压缩后的目录下执行命令，运行启动脚本。\n\n​\n\nLinux 或 macOS：\n\n​\n\n​\n\nBash\n\n复制\n\nbash bootstrap.sh\n\n​\n\n​\n\nWindows：\n\n​\n\n​\n\nBash\n\n复制\n\n.\\bootstrap.ps1\n\n​\n\n​\n\n3.\n\n浏览器访问本地主机的\n\n8080 端口\n\nhttp://127.0.0.1:8080\n\n。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n4.\n\n根据页面提示完成授权流程、查看或复制 OAuth Token。\n\n​\n\n注意\n\n此示例项目仅用于体验授权流程，生成的 Token 虽然是一个真实有效的 OAuth Token，可以在 API Playground 中在线调试 OpenAPI，但不建议用于线上生产环境。\n\n​\n\nOAuth Token 存在有效期限制，使用前需要注意过期时间。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n步骤三：发起 OpenAPI 请求\n\n​\n\n授权成功后，后端会根据这个 Token 调用一个显示授权用户基本信息的 API。如果 API 请求成功，授权示例页面会显示 Authorization Successful，顶部会同时显示授权用户的基本信息，包括用户 ID、昵称等。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\nJWT\n\n授权方式下，授权示例页面不会自动调用这个示例 API，只会展示生成的 Token。如需验证 Token 有效性，你可以复制 OAuth Token 之后，前往\n\nAPI Playground\n\n，通过这个 Token 快速发起一个扣子 OpenAPI 请求。\n\n​\n\n在 API Playground 中找到要调用的 API，在 Header 区域填写 OAuth Token ，并在右侧的 Shell 区域单击\n\n运行\n\n，即可发起一个 OpenAPI 请求。\n\n​\n\n说明\n\n需要注意的是，这个 OAuth Token 必须已被授予对应 OpenAPI 的权限，否则 Playground 调试时会报错 Token 无权限。你需要在下载示例文件之前在 OAuth 应用中选择正确的权限。\n\n​\n\n通过示例项目生成的 Token 均可在 API Playground 中使用。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n上一篇\n\nOAuth 应用管理\n\n下一篇\n\nOAuth 授权码授权",
        "links": []
      },
      "markdown": "- 此方式仅用于测试验证阶段快速了解和体验 OAuth 授权流程，为了安全起见，获取的 OAuth Token 不建议应用在线上生产环境。线上环境可使用扣子编程提供的各种语言 SDK，参考各个 SDK 的鉴权示例，详细说明可参考 ​ 示例代码 。 ​\n\n- OAuth Token 存在有效期限制，你可以根据页面提示刷新 Token。 ​\n\n\n\n\n- 授权码授权方式对应的客户端类型为 Web 后端应用。 ​\n\n- ​ ​ ​ ​ ​\n\n\n- 预览 client_id 等配置信息，确认无误后选择配置语言。扣子编程提供 Python、 JavaScript 、Go 和 Java 四种语言类型的示例文件，此处我们选择默认的 Python。 ​\n\n\n- ​ ​ ​ ​ ​\n\n- 运行脚本之前，应确认本地已安装了对应开发语言的运行环境。各个语言的版本要求如下： ​\n\n- Python：3.7 及后续版本。 ​\n\n- JavaScript ： Node 14 及后续版本。 ​\n\n- Go：1.18 及后续版本。 ​\n\n- Java：Java 8、Java 11 或 Java 17。 ​\n\n- 请确保本地主机的 8080 端口未被占用。 ​\n\n\n\n- Linux 或 macOS： ​\n\n- ​ Bash 复制 bash bootstrap.sh ​ ​\n\n- Windows： ​\n\n- ​ Bash 复制 .\\bootstrap.ps1 ​ ​\n\n\n- ​ ​ ​ ​ ​\n\n\n- 注意 此示例项目仅用于体验授权流程，生成的 Token 虽然是一个真实有效的 OAuth Token，可以在 API Playground 中在线调试 OpenAPI，但不建议用于线上生产环境。 ​ OAuth Token 存在有效期限制，使用前需要注意过期时间。 ​ ​\n\n- 此示例项目仅用于体验授权流程，生成的 Token 虽然是一个真实有效的 OAuth Token，可以在 API Playground 中在线调试 OpenAPI，但不建议用于线上生产环境。 ​\n\n- OAuth Token 存在有效期限制，使用前需要注意过期时间。 ​\n\n- ​ ​ ​ ​ ​\n\n- 需要注意的是，这个 OAuth Token 必须已被授予对应 OpenAPI 的权限，否则 Playground 调试时会报错 Token 无权限。你需要在下载示例文件之前在 OAuth 应用中选择正确的权限。 ​\n\n- 通过示例项目生成的 Token 均可在 API Playground 中使用。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/oauth_code",
      "title": "OAuth 授权码授权",
      "content": {
        "sections": [],
        "full_text": "OAuth 授权码授权\n\n扣子编程支持应用程序通过 OAuth 授权码授权（Authorization Code Grant）的方式调用扣子编程 API。用户通过浏览器访问包含扣子编程功能的 Web 应用程序时，Web 应用程序重定向用户到扣子编程服务端以获取授权码（code），然后使用授权码向扣子编程服务端交换访问令牌。例如 Web 应用程序通过扣子编程 API 封装了扣子编程的查看 Bot 的详细信息和指定 Bot 对话等功能，用户使用这些功能之前，需要经由扣子编程服务端鉴权。\n\n​\n\n说明\n\n通过 OAuth 授权码方式授权时，应用程序需要拥有可通过 Web 访问的前端页面，否则无法实现重定向等一系列授权流程；同时应有稳定的后端架构，可处理前端请求、安全存储客户端密钥（Client Secret），与 OAuth 授权服务器和 OpenAPI 交互。\n\n​\n\n​\n\n授权流程\n\n​\n\nWeb 应用程序授权流程如下图所示。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n具体流程说明如下：\n\n​\n\n1.\n\n在扣子编程创建 OAuth 应用。\n\n​\n\n2.\n\n应用程序调用 API\n\n​\n\n获取授权页面 URL\n\n和\n\n​\n\n获取 OAuth Access Token\n\n，获取 OAuth 访问令牌。\n\n​\n\n3.\n\n应用程序根据访问令牌调用扣子编程 API。\n\n​\n\n详细步骤如下：\n\n​\n\n1 创建 OAuth 应用\n\n​\n\n说明\n\n在扣子企业版（企业标准版、企业旗舰版）中，仅\n\n超级管理员\n\n和\n\n管理员\n\n有权\n\n限创建、编辑、\n\n删除 OAuth 应用，以及对应用进行授权操作。\n\n​\n\n​\n\n1.\n\n登录\n\n扣子编程\n\n。\n\n​\n\n2.\n\n在左侧导航栏选择\n\nAPI & SDK。\n\n​\n\n3.\n\n在顶部单击\n\n授权\n\n>\n\nOAuth 应用\n\n页签。\n\n​\n\n4.\n\n在 OAuth 应用页面右上角单击\n\n创建新应用\n\n，填写应用的基本信息。\n\n​\n\n​\n\n配置\n\n​\n\n说明\n\n​\n\n应用类型\n\n​\n\n应用的类型，此处设置为\n\n普通\n\n。\n\n​\n\n客户端类型\n\n​\n\n客户端类型，此处设置为\n\nWeb 后端应用\n\n。\n\n​\n\n应用名称\n\n​\n\n应用的名称，在扣子编程中全局唯一。\n\n​\n\n描述\n\n​\n\n应用的基本描述信息。\n\n​\n\n​\n\n5.\n\n填写 App 的配置信息。\n\n​\n\n​\n\n配置\n\n​\n\n说明\n\n​\n\n权限\n\n​\n\n应用程序调用扣子 API 时需要的权限范围。\n\n​\n\n说明\n\n此处配置旨在于划定应用的权限范围，并未完成授权操作。创建 Oauth 应用后还需要参考后续操作完成授权。\n\n​\n\n​\n\n重定向 URL\n\n​\n\n重定向的 URL 地址。用户完成授权后，扣子编程的授权服务器将通过重定向 URL 返回授权相关的凭据。最多可添加 3 个不同的 URL 地址。\n\n​\n\n重定向 URL 仅支持 HTTP 和 HTTPs。为了保证数据传输安全，请勿在生产环境使用HTTP 协议地址。\n\n​\n\n对于测试场景，您可以指定引用本地机器的 URL，例如\n\nhttp://localhost:8080\n\n。\n\n​\n\n客户端 ID 和客户端密钥\n\n​\n\n​\n\n客户端 ID 和客户端密钥均由扣子编程自动生成并配置。单击生成客户端密钥，并复制系统自动生成的客户端密钥。\n\n​\n\n客户端 ID：即 client id，是应用程序的公共标识符。\n\n​\n\n客户端密钥：即 client secret，仅应用程序和授权服务器有权访问的密钥。用于获取已登录用户的访问令牌。\n\n​\n\n说明\n\n此客户端密钥仅显示一次。请将其保存到安全且易于访问的地方。不要与他人分享，或在其他环境中暴露。\n\n​\n\n支持生成多个客户端密钥，当您发现密钥泄露时，可以通过此方法进行密钥轮转。\n\n​\n\n扣子编程在任何时候都不会存储您的客户端密钥，扣子服务端仅存储符合行业规范的密钥摘要值。\n\n​\n\n​\n\n​\n\n6.\n\n单击\n\n确定\n\n，完成配置。\n\n​\n\n2 获取访问令牌\n\n​\n\n1.\n\n终端用户在 Web 应用程序中触发授权操作，例如点击和 Bot 对话的按钮。该动作对应扣子发起对话 API，应用程序需要获得扣子账号的授权。\n\n​\n\n2.\n\nWeb 应用程序重定向用户到授权服务器以获取 code。\n\n​\n\n应用程序通过302重定向方式发起\n\n​\n\n获取授权页面 URL\n\nAPI 请求。\n\n​\n\n请求中携带 OAuth 应用的客户端 ID 和客户端密钥 、重定向 URL 等信息。请求示例如下：\n\n​\n\n​\n\nResponse Header 中的 location 字段中为跳转链接。例如\n\nhttps://www.coze.cn/oauth/consent?authorize_key=JacVeqTW93ps5m5N9n349bEBgIsWrnNp\n\n。浏览器跳转到此 URL，引导用户完成扣子账号授权。授权页面示例如下：\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n3.\n\n扣子服务端会在 API 的响应中返回 code。\n\n​\n\n从重定向的 URL 地址中获取 code，例如本示例中 code 为\n\ncode_WZmPRDcjJhfwHD****\n\n。\n\n​\n\n​\n\n4.\n\n使用授权码交换访问令牌。\n\n​\n\n应用程序向扣子服务端发起\n\n​\n\n获取 OAuth Access Token\n\n请求，请求中携带 code，扣子服务端会在 API 的响应中返回 access_token 和 refresh_token。其中：\n\n​\n\naccess_token 即访问令牌，用于发起扣子 API 请求时鉴权，有效期为 15 分钟。\n\n​\n\nrefresh_token 用于刷新 access_token，有效期为 30 天。refresh_token 到期前可以多次调用\n\n​\n\n刷新 OAuth Access Token\n\n接口获取新的 refresh_token 和 access_token。\n\n​\n\n接口示例如下：\n\n​\n\n​\n\n3 发起扣子 API 请求\n\n​\n\n在 API 请求头中通过\n\nAuthorization=Bearer\n\n$Access_Token\n\n指定访问令牌，发起扣子 API 请求。每个接口对应的权限点不同。\n\n​\n\n以\n\n​\n\n获取已发布智能体的配置（即将下线）\n\nAPI 为例，完整的 API 请求如下：\n\n​\n\n​\n\n获取授权页面 URL\n\n​\n\nWeb\n\n应用程序可调用此 API 获取 OAuth 授权页面 URL 地址。\n\n​\n\n基础信息\n\n​\n\n​\n\n​\n\nPath 参数\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n返回结果\n\n​\n\n返回结果的 Http code 为 302，且 Response Header 中的 location 字段中为跳转链接。例如\n\nhttps://www.coze.cn/oauth/consent?authorize_key=JacVeqTW93ps5m5N9n349bEBgIsWrn****\n\n。浏览器跳转到此 URL，引导用户完成 Coze 账号授权。\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\n获取 OAuth Access Token\n\n​\n\n通过授权码（OAuth code）获取 OAuth Access Token。\n\n​\n\n基础信息\n\n​\n\n​\n\nHeader\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n返回结果\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\n刷新 OAuth Access Token\n\n​\n\n根据 refresh_token 获取新的 OAuth Access Token。\n\n​\n\n调用\n\n​\n\n获取 OAuth Access Token\n\nAPI 获取的 OAuth Access Token 有效期为 15 分钟，refresh_token 有效期为 30 天。refresh_token 有效期内可以调用此 API 获取新的 OAuth Access Token。\n\n​\n\n接口调用成功后，入参中指定的 refresh_token 失效。\n\n​\n\n基础信息\n\n​\n\n​\n\nHeader\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n返回结果\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\n错误码\n\n​\n\n​\n\n常见问题\n\n​\n\n如何处理 OAuth 授权码授权失败，提示“OAuth 错误/请求参数错误”？\n\n​\n\n请检查回调地址中的特殊字符是否已正确转义。例如，回调地址中的\n\n#\n\n需要转义为\n\n%23\n\n。确保所有特殊字符都已按照URL 编码规则进行转义，然后重新尝试授权。\n\n​\n\n​\n\n上一篇\n\n通过示例文件体验 OAuth 授权流程\n\n下一篇\n\nOAuth PKCE",
        "links": []
      },
      "markdown": "- ​ 配置 ​ 说明 ​ 应用类型 ​ 应用的类型，此处设置为 普通 。 ​ 客户端类型 ​ 客户端类型，此处设置为 Web 后端应用 。 ​ 应用名称 ​ 应用的名称，在扣子编程中全局唯一。 ​ 描述 ​ 应用的基本描述信息。 ​ ​\n\n| 配置​ | 说明​ |\n| 应用类型​ | 应用的类型，此处设置为普通。​ |\n| 客户端类型​ | 客户端类型，此处设置为Web 后端应用。​ |\n| 应用名称​ | 应用的名称，在扣子编程中全局唯一。​ |\n| 描述​ | 应用的基本描述信息。​ |\n\n\n- ​ 配置 ​ 说明 ​ 权限 ​ 应用程序调用扣子 API 时需要的权限范围。 ​ 说明 此处配置旨在于划定应用的权限范围，并未完成授权操作。创建 Oauth 应用后还需要参考后续操作完成授权。 ​ ​ 重定向 URL ​ 重定向的 URL 地址。用户完成授权后，扣子编程的授权服务器将通过重定向 URL 返回授权相关的凭据。最多可添加 3 个不同的 URL 地址。 ​ 重定向 URL 仅支持 HTTP 和 HTTPs。为了保证数据传输安全，请勿在生产环境使用HTTP 协议地址。 ​ 对于测试场景，您可以指定引用本地机器的 URL，例如 http://localhost:8080 。 ​ 客户端 ID 和客户端密钥 ​ ​ 客户端 ID 和客户端密钥均由扣子编程自动生成并配置。单击生成客户端密钥，并复制系统自动生成的客户端密钥。 ​ 客户端 ID：即 client id，是应用程序的公共标识符。 ​ 客户端密钥：即 client secret，仅应用程序和授权服务器有权访问的密钥。用于获取已登录用户的访问令牌。 ​ 说明 此客户端密钥仅显示一次。请将其保存到安全且易于访问的地方。不要与他人分享，或在其他环境中暴露。 ​ 支持生成多个客户端密钥，当您发现密钥泄露时，可以通过此方法进行密钥轮转。 ​ 扣子编程在任何时候都不会存储您的客户端密钥，扣子服务端仅存储符合行业规范的密钥摘要值。 ​ ​ ​\n\n| 配置​ | 说明​ |\n| 权限​ | 应用程序调用扣子 API 时需要的权限范围。​说明此处配置旨在于划定应用的权限范围，并未完成授权操作。创建 Oauth 应用后还需要参考后续操作完成授权。​​ |\n| 重定向 URL​ | 重定向的 URL 地址。用户完成授权后，扣子编程的授权服务器将通过重定向 URL 返回授权相关的凭据。最多可添加 3 个不同的 URL 地址。​重定向 URL 仅支持 HTTP 和 HTTPs。为了保证数据传输安全，请勿在生产环境使用HTTP 协议地址。​对于测试场景，您可以指定引用本地机器的 URL，例如http://localhost:8080。​ |\n| 客户端 ID 和客户端密钥​​ | 客户端 ID 和客户端密钥均由扣子编程自动生成并配置。单击生成客户端密钥，并复制系统自动生成的客户端密钥。​客户端 ID：即 client id，是应用程序的公共标识符。​客户端密钥：即 client secret，仅应用程序和授权服务器有权访问的密钥。用于获取已登录用户的访问令牌。​说明此客户端密钥仅显示一次。请将其保存到安全且易于访问的地方。不要与他人分享，或在其他环境中暴露。​支持生成多个客户端密钥，当您发现密钥泄露时，可以通过此方法进行密钥轮转。​扣子编程在任何时候都不会存储您的客户端密钥，扣子服务端仅存储符合行业规范的密钥摘要值。​​ |\n\n- 重定向 URL 仅支持 HTTP 和 HTTPs。为了保证数据传输安全，请勿在生产环境使用HTTP 协议地址。 ​\n\n- 对于测试场景，您可以指定引用本地机器的 URL，例如 http://localhost:8080 。 ​\n\n- 客户端 ID：即 client id，是应用程序的公共标识符。 ​\n\n- 客户端密钥：即 client secret，仅应用程序和授权服务器有权访问的密钥。用于获取已登录用户的访问令牌。 ​\n\n- 此客户端密钥仅显示一次。请将其保存到安全且易于访问的地方。不要与他人分享，或在其他环境中暴露。 ​\n\n- 支持生成多个客户端密钥，当您发现密钥泄露时，可以通过此方法进行密钥轮转。 ​\n\n- 扣子编程在任何时候都不会存储您的客户端密钥，扣子服务端仅存储符合行业规范的密钥摘要值。 ​\n\n\n\n\n- 应用程序通过302重定向方式发起 ​ 获取授权页面 URL API 请求。 ​\n\n- 请求中携带 OAuth 应用的客户端 ID 和客户端密钥 、重定向 URL 等信息。请求示例如下： ​\n\n- ​\n\n- Response Header 中的 location 字段中为跳转链接。例如 https://www.coze.cn/oauth/consent?authorize_key=JacVeqTW93ps5m5N9n349bEBgIsWrnNp 。浏览器跳转到此 URL，引导用户完成扣子账号授权。授权页面示例如下： ​\n\n- ​ ​ ​ ​ ​\n\n- ​\n\n\n- 从重定向的 URL 地址中获取 code，例如本示例中 code 为 code_WZmPRDcjJhfwHD**** 。 ​\n\n- ​\n\n\n- 应用程序向扣子服务端发起 ​ 获取 OAuth Access Token 请求，请求中携带 code，扣子服务端会在 API 的响应中返回 access_token 和 refresh_token。其中： ​\n\n- access_token 即访问令牌，用于发起扣子 API 请求时鉴权，有效期为 15 分钟。 ​\n\n- refresh_token 用于刷新 access_token，有效期为 30 天。refresh_token 到期前可以多次调用 ​ 刷新 OAuth Access Token 接口获取新的 refresh_token 和 access_token。 ​\n\n- 接口示例如下： ​\n\n- ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/oauth_pkce",
      "title": "OAuth PKCE",
      "content": {
        "sections": [],
        "full_text": "OAuth PKCE\n\n对于移动设备、本地应用、单页应用等公开客户端，授权码授权模式存在一定安全风险，例如授权码拦截攻击等。对于此类应用，推荐使用 PKCE 扩展协议增强授权码流程的安全性。\n\n​\n\n背景信息\n\n​\n\n在移动设备、本地应用、单页应用等公开客户端授权场景下，使用授权码模式授权时，Client ID 和 Client Secret 可能意外泄露或被恶意窃取，造成访问密钥泄露，影响数据安全。对于公开客户端，推荐使用 PKCE 扩展协议增强授权码流程的安全性。PKCE（Proof Key for Code Exchange）是一个 OAuth 2.0 的扩展协议，PKCE 授权流程中引入了客户端生成的随机字符串（code_verifier）作为临时密钥，防止授权码被拦截和滥用，提高了授权流程的安全性。\n\n​\n\nPKCE 授权流程如下：\n\n​\n\n1.\n\n应用程序引导用户发起授权请求，携带临时密钥。\n\n​\n\n2.\n\n用户同意授权后，扣子 OAuth Server 返回授权码。\n\n​\n\n3.\n\n应用程序通过临时密钥和授权码获取 OAuth 访问令牌。\n\n​\n\n4.\n\n扣子 OAuth Server 验证临时密钥和授权码，返回 Access Token。\n\n​\n\n准备工作\n\n​\n\n在应用程序启动授权流程之前，开发者应在扣子编程中创建 Oauth 应用，获取客户端 ID。\n\n​\n\n说明\n\n在扣子企业版（企业标准版、企业旗舰版）中，仅\n\n超级管理员\n\n和\n\n管理员\n\n有权限创建\n\n、编辑、删\n\n除 OAuth 应用，以及对应用进行授权操作。\n\n​\n\n​\n\n1.\n\n登录\n\n扣子编程\n\n。\n\n​\n\n2.\n\n在左侧导航栏选择\n\nAPI & SDK。\n\n​\n\n3.\n\n在顶部单击\n\n授权\n\n>\n\nOAuth 应用\n\n页签。\n\n​\n\n4.\n\n在 OAuth 应用页面右上角单击\n\n创建新应用\n\n，填写应用的基本信息，并单击\n\n创建并继续\n\n。\n\n​\n\n​\n\n配置\n\n​\n\n说明\n\n​\n\n应用类型\n\n​\n\nOAuth 应用的类型，此处设置为\n\n普通\n\n。\n\n​\n\n客户端类型\n\n​\n\n客户端类型，此处设置为\n\n移动端/PC 桌面端/单页面应用\n\n。\n\n​\n\n应用名称\n\n​\n\n应用的名称，在扣子编程中全局唯一。\n\n​\n\n描述\n\n​\n\n应用的基本描述信息。\n\n​\n\n​\n\n5.\n\n填写 App 的配置信息，并单击\n\n确定\n\n。\n\n​\n\n​\n\n配置\n\n​\n\n说明\n\n​\n\n权限\n\n​\n\n应用程序调用扣子 API 时需要的权限范围。\n\n​\n\n说明\n\n此处配置旨在于划定应用的权限范围，并未完成授权操作。授权操作可参考\n\n授权流程\n\n部分。\n\n​\n\n​\n\n重定向 URL\n\n​\n\n重定向的 URL 地址。用户完成授权后，扣子编程的授权服务器将通过重定向 URL 返回授权相关的凭据。最多可添加 3 个不同的 URL 地址。\n\n​\n\n重定向 URL 仅支持 HTTP 和 HTTPs。为了保证数据传输安全，请勿在生产环境使用HTTP 协议地址。\n\n​\n\n对于测试场景，您可以指定引用本地机器的 URL，例如\n\nhttp://localhost:8080\n\n。\n\n​\n\n客户端 ID\n\n​\n\n客户端 ID，即 client id，是应用程序的公共标识符。 由扣子编程自动生成。\n\n​\n\n​\n\n授权流程\n\n​\n\nPKCE 协议的授权流程如下：\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n步骤一：发起授权请求\n\n​\n\n1.\n\n终端用户在 Web 应用程序中触发授权操作。\n\n​\n\n例如点击和 Bot 对话的按钮。该动作对应扣子\n\n发起对话\n\nAPI，应用程序需要获得扣子账号的授权。\n\n​\n\n2.\n\n应用程序生成一个临时密钥。\n\n​\n\n客户端生成一个随机值 code_verifier，并根据指定算法将其转换为 code_challenge。其中转换算法为 code_challenge_method，转换通常使用 SHA-256 算法，并进行 Base64URL 编码，即\n\ncode_challenge = BASE64URL-ENCODE(SHA256(ASCII(code_verifier)))\n\n。\n\n​\n\n3.\n\n应用程序重定向用户到授权服务器。\n\n​\n\n应用程序通过 302 重定向方式发起\n\n​\n\n获取授权页面 URL\n\nAPI 请求。请求中携带 OAuth 应用的客户端 ID、重定向 URL、临时密钥 code_challenge、转换算法 code_challenge_method 等信息。请求示例如下：\n\n​\n\n​\n\n​\n\n步骤二：获取授权码\n\n​\n\n1.\n\n终端用户在授权页面单击\n\n授权\n\n。\n\n​\n\nResponse Header 中的 location 字段中为跳转链接。例如\n\nhttps://www.coze.cn/oauth/consent?authorize_key=JacVeqTW93ps5m5N9n34\n\n***\n\nrnNp\n\n。浏览器跳转到此 URL，引导用户完成扣子账号授权。授权页面示例如下：\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n2.\n\n扣子 OAuth Server 在 API 的响应中返回授权码 code。\n\n​\n\n从重定向的 URL 地址中获取 code，例如本示例中 code 为\n\ncode_WZmPRDcjJhfwHD****\n\n。\n\n​\n\n​\n\n步骤三：请求令牌\n\n​\n\n应用程序向扣子服务端发起\n\n​\n\n获取 OAuth Access Token\n\n请求，请求中携带授权码 code 和临时密钥转换前的原始随机值 code_verifier。\n\n​\n\n​\n\n获取 OAuth Access Token\n\n的请求示例如下：\n\n​\n\n​\n\n步骤四：获取令牌\n\n​\n\n1.\n\n收到请求后，扣子 OAuth Server 将对以下三个参数进行对比验证。\n\n​\n\n原始的随机值 code_verifier\n\n​\n\n转换算法 code_challenge_method\n\n​\n\n临时密钥 code_challenge\n\n​\n\n2.\n\n验证通过后，扣子 OAuth Server 将通过\n\n​\n\n获取 OAuth Access Token\n\nAPI 响应的方式颁发令牌。\n\n​\n\n其中：\n\n​\n\naccess_token 即访问令牌，用于发起扣子 API 请求时鉴权，有效期为 15 分钟。\n\n​\n\nrefresh_token 用于刷新 access_token，有效期为 30 天。refresh_token 到期前可以多次调用\n\n​\n\n刷新 OAuth Access Token\n\n接口获取新的 refresh_token 和 access_token。\n\n​\n\n​\n\n获取 OAuth Access Token\n\n的响应示例如下：\n\n​\n\n​\n\n后续操作\n\n​\n\n应用程序可以在 API 请求头中通过\n\nAuthorization=Bearer\n\n$Access_Token\n\n指定访问令牌，发起扣子 API 请求。每个接口对应的权限点不同。\n\n​\n\n以\n\n​\n\n获取已发布智能体的配置（即将下线）\n\nAPI 为例，完整的 API 请求如下：\n\n​\n\n​\n\nAPI 参考\n\n​\n\n获取授权页面 URL\n\n​\n\nWeb 应用程序可调用此 API 获取 OAuth 授权页面 URL 地址。\n\n​\n\n基础信息\n\n​\n\n​\n\n​\n\nPath 参数\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n返回结果\n\n​\n\n返回结果的 Http code 为 302，其中包含授权页地址\n\nhttps://www.coze.cn/oauth2/authorize\n\n。\n\n​\n\n如果当前用户未合法登录态，则 302 重定向至授权页\n\nhttps://www.coze.cn/oauth2/authorize?authorize_key=1234gdaskljgflan\n\n。\n\n​\n\n如果当前用户未登录，则 302 重定向至登录页，登录页重定向至授权页\n\nhttps://www.coze.cn/sign?redirect=https://www.coze.cn/oauth2/authorize?authorize_key=1234gdaskljgflan\n\n。\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\n获取 OAuth Access Token\n\n​\n\n通过授权码（OAuth code）获取 OAuth Access Token。\n\n​\n\n基础信息\n\n​\n\n​\n\nHeader\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n返回结果\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\n刷新 OAuth Access Token\n\n​\n\n根据 refresh_token 获取新的 OAuth Access Token。\n\n​\n\n调用\n\n​\n\n获取 OAuth Access Token\n\nAPI 获取的 OAuth Access Token 有效期为 15 分钟，refresh_token 有效期为 30 天。refresh_token 有效期内可以调用此 API 获取新的 OAuth Access Token。\n\n​\n\n接口调用成功后，入参中指定的 refresh_token 失效。\n\n​\n\n基础信息\n\n​\n\n​\n\nHeader\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n返回结果\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\n​\n\n上一篇\n\nOAuth 授权码授权\n\n下一篇\n\nOAuth 设备授权",
        "links": []
      },
      "markdown": "- ​ 配置 ​ 说明 ​ 应用类型 ​ OAuth 应用的类型，此处设置为 普通 。 ​ 客户端类型 ​ 客户端类型，此处设置为 移动端/PC 桌面端/单页面应用 。 ​ 应用名称 ​ 应用的名称，在扣子编程中全局唯一。 ​ 描述 ​ 应用的基本描述信息。 ​ ​\n\n| 配置​ | 说明​ |\n| 应用类型​ | OAuth 应用的类型，此处设置为普通。​ |\n| 客户端类型​ | 客户端类型，此处设置为移动端/PC 桌面端/单页面应用。​ |\n| 应用名称​ | 应用的名称，在扣子编程中全局唯一。​ |\n| 描述​ | 应用的基本描述信息。​ |\n\n\n- ​ 配置 ​ 说明 ​ 权限 ​ 应用程序调用扣子 API 时需要的权限范围。 ​ 说明 此处配置旨在于划定应用的权限范围，并未完成授权操作。授权操作可参考 授权流程 部分。 ​ ​ 重定向 URL ​ 重定向的 URL 地址。用户完成授权后，扣子编程的授权服务器将通过重定向 URL 返回授权相关的凭据。最多可添加 3 个不同的 URL 地址。 ​ 重定向 URL 仅支持 HTTP 和 HTTPs。为了保证数据传输安全，请勿在生产环境使用HTTP 协议地址。 ​ 对于测试场景，您可以指定引用本地机器的 URL，例如 http://localhost:8080 。 ​ 客户端 ID ​ 客户端 ID，即 client id，是应用程序的公共标识符。 由扣子编程自动生成。 ​ ​\n\n| 配置​ | 说明​ |\n| 权限​ | 应用程序调用扣子 API 时需要的权限范围。​说明此处配置旨在于划定应用的权限范围，并未完成授权操作。授权操作可参考授权流程部分。​​ |\n| 重定向 URL​ | 重定向的 URL 地址。用户完成授权后，扣子编程的授权服务器将通过重定向 URL 返回授权相关的凭据。最多可添加 3 个不同的 URL 地址。​重定向 URL 仅支持 HTTP 和 HTTPs。为了保证数据传输安全，请勿在生产环境使用HTTP 协议地址。​对于测试场景，您可以指定引用本地机器的 URL，例如http://localhost:8080。​ |\n| 客户端 ID​ | 客户端 ID，即 client id，是应用程序的公共标识符。 由扣子编程自动生成。​ |\n\n- 重定向 URL 仅支持 HTTP 和 HTTPs。为了保证数据传输安全，请勿在生产环境使用HTTP 协议地址。 ​\n\n- 对于测试场景，您可以指定引用本地机器的 URL，例如 http://localhost:8080 。 ​\n\n\n- 例如点击和 Bot 对话的按钮。该动作对应扣子 发起对话 API，应用程序需要获得扣子账号的授权。 ​\n\n\n- 客户端生成一个随机值 code_verifier，并根据指定算法将其转换为 code_challenge。其中转换算法为 code_challenge_method，转换通常使用 SHA-256 算法，并进行 Base64URL 编码，即 code_challenge = BASE64URL-ENCODE(SHA256(ASCII(code_verifier))) 。 ​\n\n\n- 应用程序通过 302 重定向方式发起 ​ 获取授权页面 URL API 请求。请求中携带 OAuth 应用的客户端 ID、重定向 URL、临时密钥 code_challenge、转换算法 code_challenge_method 等信息。请求示例如下： ​\n\n- ​\n\n- ​\n\n\n- Response Header 中的 location 字段中为跳转链接。例如 https://www.coze.cn/oauth/consent?authorize_key=JacVeqTW93ps5m5N9n34 *** rnNp 。浏览器跳转到此 URL，引导用户完成扣子账号授权。授权页面示例如下： ​\n\n- ​\n\n- ​ ​ ​ ​ ​\n\n\n- 从重定向的 URL 地址中获取 code，例如本示例中 code 为 code_WZmPRDcjJhfwHD**** 。 ​\n\n- ​\n\n\n- 原始的随机值 code_verifier ​\n\n- 转换算法 code_challenge_method ​\n\n- 临时密钥 code_challenge ​\n\n\n- 其中： ​\n\n- access_token 即访问令牌，用于发起扣子 API 请求时鉴权，有效期为 15 分钟。 ​\n\n- refresh_token 用于刷新 access_token，有效期为 30 天。refresh_token 到期前可以多次调用 ​ 刷新 OAuth Access Token 接口获取新的 refresh_token 和 access_token。 ​\n\n- 如果当前用户未合法登录态，则 302 重定向至授权页 https://www.coze.cn/oauth2/authorize?authorize_key=1234gdaskljgflan 。 ​\n\n- 如果当前用户未登录，则 302 重定向至登录页，登录页重定向至授权页 https://www.coze.cn/sign?redirect=https://www.coze.cn/oauth2/authorize?authorize_key=1234gdaskljgflan 。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/oauth_device_code",
      "title": "OAuth 设备授权",
      "content": {
        "sections": [],
        "full_text": "OAuth 设备授权\n\n背景信息\n\n​\n\n设备授权模式（Device Authorization Grant）是 OAuth 2.0 的一个扩展，它允许那些没有浏览器或输入能力受限的设备获得访问令牌。这种模式特别适用于智能电视、游戏机、打印机等设备，这些设备可能没有方便的用户界面或输入方法来执行传统的用户代理（如浏览器）基础的授权流程。\n\n​\n\n在设备授权模式中，设备首先向授权服务器请求一个设备代码、用户代码和验证地址。设备代码用于设备随后向授权服务器申请令牌时的验证，而用户代码和验证 URI 则用于用户在另一台设备（如智能手机或电脑）上的浏览器中完成授权步骤。用户访问验证 URI 并输入用户代码，以批准设备的访问请求。一旦用户完成授权，设备就可以使用设备代码来获取访问令牌和刷新令牌。\n\n​\n\n这种模式的优势在于它不需要设备和用户代理之间有双向通信，使得那些无法运行完整 OAuth 流程的设备能够安全地获得访问令牌。RFC 8628 定义了设备授权模式的具体规范和流程。\n\n​\n\n准备工作\n\n​\n\n在应用程序启动授权流程之前，开发者应在\n\n扣子\n\n编程中创建 Oauth 应用，获取客户端 ID。\n\n​\n\n说明\n\n在扣子企业版（企业标准版、企业旗舰版）中，仅\n\n超级管理员\n\n和\n\n管理员\n\n有权限创建、编辑、删除 OAuth 应用，以及对应用进行授权操作。\n\n​\n\n​\n\n1.\n\n登录\n\n扣子编程\n\n。\n\n​\n\n2.\n\n在左侧导航栏选择\n\nAPI & SDK。\n\n​\n\n3.\n\n在顶部单击\n\n授权\n\n>\n\nOAuth 应用\n\n页签。\n\n​\n\n4.\n\n在 OAuth 应用页面右上角单击\n\n创建新应用\n\n，填写应用的基本信息，并单击\n\n创建并继续\n\n。\n\n​\n\n​\n\n配置\n\n​\n\n说明\n\n​\n\n应用类型\n\n​\n\nOAuth 应用的类型，此处设置为\n\n普通\n\n。\n\n​\n\n客户端类型\n\n​\n\n客户端类型，此处设置为\n\nTV端/设备应用/类命令行程序\n\n。\n\n​\n\n应用名称\n\n​\n\n应用的名称，在\n\n扣子\n\n编程中全局唯一。\n\n​\n\n描述\n\n​\n\n应用的基本描述信息。\n\n​\n\n​\n\n5.\n\n填写 App 的配置信息，单击\n\n确定\n\n。\n\n​\n\n​\n\n配置\n\n​\n\n说明\n\n​\n\n权限\n\n​\n\n应用程序调用\n\n扣子\n\nAPI 时需要的权限范围。\n\n​\n\n说明\n\n此处配置旨在于划定应用的权限范围，并未完成授权操作。授权操作可参考\n\n授权流程\n\n部分。\n\n​\n\n​\n\n客户端 ID\n\n​\n\n客户端 ID，即 client id，是应用程序的公共标识符。 由\n\n扣子\n\n编程自动生成。\n\n​\n\n​\n\n授权流程\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n设备码授权流程如下：\n\n​\n\n1.\n\n设备客户端向授权服务器的设备授权端点发送请求（\n\n​\n\nDevice Authorization\n\n），获取设备验证码（device_code）和用户验证码（user_code）。\n\n​\n\n说明\n\n扣子\n\n编程支持多人协作场景下跨账号的 OAuth 授权，发起\n\nAPI 请求时如果指定空间 ID，空间协作者也可以为应用程序授予团队空间中的资源权限。详细说明可参考\n\n​\n\nOAuth 授权（多人协作场景）\n\n。\n\n​\n\n​\n\n2.\n\n设备客户端将用户验证码和验证 URI 展示给用户，指导用户在另一台设备上输入这些信息以完成授权。\n\n​\n\n3.\n\n用户在浏览器中输入验证 URI 和用户验证码，完成授权流程。\n\n​\n\n4.\n\n设备客户端定期轮询授权服务器的令牌端点\n\n​\n\nToken\n\n，使用设备代码来获取访问令牌。\n\n​\n\n5.\n\n一旦用户授权成功，授权服务器响应设备客户端的令牌请求，并返回访问令牌和刷新令牌。\n\n​\n\nAPI 参考\n\n​\n\nDevice Authorization\n\n​\n\n获取设备验证码。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n​\n\n请求地址\n\n​\n\n普通授权场景：\n\nhttps://\n\napi.coze.cn\n\n/api/permission/oauth2\n\n/device/code\n\n​\n\n多人协作场景：\n\nhttps://\n\napi.coze.cn\n\n/api/permission/oauth2/workspace_id/\n\n${workspace_id}\n\n/device/code\n\n​\n\n​\n\n说明\n\n仅扣子企业版支持多人协作场景，扣子个人版不支持多人协作场景。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n字段\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nworkspace_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n空间 ID。多人协作场景下必选。\n\n​\n\n请求的 Path 中不指定空间 ID 时，授予 Access Token 当前登录账号拥有的所有空间权限；如果指定了空间 ID，表示授予 Access Token 指定空间的权限。资源范围为此空间下的所有资源，包括智能体、知识库、工作流等资源。详细说明可参考\n\n​\n\nOAuth 授权（多人协作场景）\n\n。\n\n​\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n请求正文的方式。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n字段\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nclient_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n客户端 ID。创建 OAuth 应用时获取的客户端 ID。\n\n​\n\n​\n\nResponse\n\n​\n\n​\n\n字段\n\n​\n\n类型\n\n​\n\n说明\n\n​\n\ndevice_code\n\n​\n\nString\n\n​\n\n设备验证码\n\n​\n\nuser_code\n\n​\n\nInteger\n\n​\n\n用户验证码\n\n​\n\nverification_uri\n\n​\n\nString\n\n​\n\n验证页面地址\n\n​\n\nexpires_in\n\n​\n\nInteger\n\n​\n\ndevice_code 和 user_code 可用时间，单位：秒，默认返回300秒；\n\n​\n\ninterval\n\n​\n\n​\n\nInteger\n\n​\n\n客户端轮询Token请求的最短间隔时间，单位：秒， 默认为5秒。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nShell\n\n复制\n\nPOST /device_authorization HTTP/1.1\n\n​\n\nHost: server.example.com\n\n​\n\nContent-Type: application/json\n\n​\n\n​\n\n{\n\n​\n\n\"client_id\": \"1406020730\"\n\n​\n\n}\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nShell\n\n复制\n\nHTTP/1.1 200 OK\n\n​\n\nContent-Type: application/json\n\n​\n\n​\n\n{\n\n​\n\n\"device_code\": \"GmRhmhcxhwAzkoEqiMEg_DnyEysNkuNhszIyS****\",\n\n​\n\n\"user_code\": \"WDJB-MJHT\",\n\n​\n\n\"verification_uri\": \"https://example.com/device\",\n\n​\n\n\"expires_in\": 1800,\n\n​\n\n\"interval\": 5\n\n​\n\n}\n\n​\n\n​\n\nToken\n\n​\n\n获取 Token。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n​\n\n请求地址\n\n​\n\nhttps://\n\napi.coze.cn\n\n/api/permission/oauth2/token\n\n​\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n请求正文的方式。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n字段\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nclient_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n创建 OAuth 应用时获取的客户端 ID。\n\n​\n\ngrant_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定值，\"urn:ietf:params:oauth:grant-type:device_code\"\n\n​\n\ndevice_code\n\n​\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n设备验证码，从 Device Authorization API response 中获取\n\n​\n\n​\n\n返回结果\n\n​\n\n​\n\n字段\n\n​\n\n类型\n\n​\n\n说明\n\n​\n\naccess_token\n\n​\n\nString\n\n​\n\n访问令牌。\n\n​\n\nexpires_in\n\n​\n\nInteger\n\n​\n\n访问令牌过期时间，秒级时间戳。\n\n​\n\nrefresh_token\n\n​\n\nString\n\n​\n\n新的 refresh_token，用于重新获取 OAuth Access Token。\n\n​\n\nerror\n\n​\n\nString\n\n​\n\n错误码：\n\n​\n\nauthorization_pending：用户还未完成授权，请稍后重试\n\n​\n\nslow_down：请求太频繁，请稍后重试\n\n​\n\naccess_denied：用户已拒绝授权请求\n\n​\n\nexpired_token：“device_code”已过期\n\n​\n\nerror_description\n\n​\n\nString\n\n​\n\n错误详细描述\n\n​\n\n​\n\n​\n\n上一篇\n\nOAuth PKCE\n\n下一篇\n\nOAuth JWT 授权（开发者）",
        "links": []
      },
      "markdown": "- ​ 配置 ​ 说明 ​ 应用类型 ​ OAuth 应用的类型，此处设置为 普通 。 ​ 客户端类型 ​ 客户端类型，此处设置为 TV端/设备应用/类命令行程序 。 ​ 应用名称 ​ 应用的名称，在 扣子 编程中全局唯一。 ​ 描述 ​ 应用的基本描述信息。 ​ ​\n\n| 配置​ | 说明​ |\n| 应用类型​ | OAuth 应用的类型，此处设置为普通。​ |\n| 客户端类型​ | 客户端类型，此处设置为TV端/设备应用/类命令行程序。​ |\n| 应用名称​ | 应用的名称，在扣子编程中全局唯一。​ |\n| 描述​ | 应用的基本描述信息。​ |\n\n\n- ​ 配置 ​ 说明 ​ 权限 ​ 应用程序调用 扣子 API 时需要的权限范围。 ​ 说明 此处配置旨在于划定应用的权限范围，并未完成授权操作。授权操作可参考 授权流程 部分。 ​ ​ 客户端 ID ​ 客户端 ID，即 client id，是应用程序的公共标识符。 由 扣子 编程自动生成。 ​ ​\n\n| 配置​ | 说明​ |\n| 权限​ | 应用程序调用扣子API 时需要的权限范围。​说明此处配置旨在于划定应用的权限范围，并未完成授权操作。授权操作可参考授权流程部分。​​ |\n| 客户端 ID​ | 客户端 ID，即 client id，是应用程序的公共标识符。 由扣子编程自动生成。​ |\n\n\n- 说明 扣子 编程支持多人协作场景下跨账号的 OAuth 授权，发起 API 请求时如果指定空间 ID，空间协作者也可以为应用程序授予团队空间中的资源权限。详细说明可参考 ​ OAuth 授权（多人协作场景） 。 ​ ​\n\n\n\n\n\n| 请求方式​ | POST​ |\n| 请求地址​ | 普通授权场景：https://api.coze.cn/api/permission/oauth2/device/code​多人协作场景：https://api.coze.cn/api/permission/oauth2/workspace_id/${workspace_id}/device/code​ |\n\n- 普通授权场景： https:// api.coze.cn /api/permission/oauth2 /device/code ​\n\n- 多人协作场景： https:// api.coze.cn /api/permission/oauth2/workspace_id/ ${workspace_id} /device/code ​\n\n| 字段​ | 类型​ | 是否必选​ | 说明​ |\n| workspace_id​ | String​ | 可选​ | 空间 ID。多人协作场景下必选。​请求的 Path 中不指定空间 ID 时，授予 Access Token 当前登录账号拥有的所有空间权限；如果指定了空间 ID，表示授予 Access Token 指定空间的权限。资源范围为此空间下的所有资源，包括智能体、知识库、工作流等资源。详细说明可参考​OAuth 授权（多人协作场景）。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Content-Type​ | application/json​ | 请求正文的方式。​ |\n\n| 字段​ | 类型​ | 是否必选​ | 说明​ |\n| client_id​ | String​ | 必选​ | 客户端 ID。创建 OAuth 应用时获取的客户端 ID。​ |\n\n| 字段​ | 类型​ | 说明​ |\n| device_code​ | String​ | 设备验证码​ |\n| user_code​ | Integer​ | 用户验证码​ |\n| verification_uri​ | String​ | 验证页面地址​ |\n| expires_in​ | Integer​ | device_code 和 user_code 可用时间，单位：秒，默认返回300秒；​ |\n| interval​​ | Integer​ | 客户端轮询Token请求的最短间隔时间，单位：秒， 默认为5秒。​ |\n\n| 请求方式​ | POST​ |\n| 请求地址​ | https://api.coze.cn/api/permission/oauth2/token​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Content-Type​ | application/json​ | 请求正文的方式。​ |\n\n| 字段​ | 类型​ | 是否必选​ | 说明​ |\n| client_id​ | String​ | 必选​ | 创建 OAuth 应用时获取的客户端 ID。​ |\n| grant_type​ | String​ | 必选​ | 固定值，\"urn:ietf:params:oauth:grant-type:device_code\"​ |\n| device_code​​ | String​ | 必选​ | 设备验证码，从 Device Authorization API response 中获取​ |\n\n| 字段​ | 类型​ | 说明​ |\n| access_token​ | String​ | 访问令牌。​ |\n| expires_in​ | Integer​ | 访问令牌过期时间，秒级时间戳。​ |\n| refresh_token​ | String​ | 新的 refresh_token，用于重新获取 OAuth Access Token。​ |\n| error​ | String​ | 错误码：​authorization_pending：用户还未完成授权，请稍后重试​slow_down：请求太频繁，请稍后重试​access_denied：用户已拒绝授权请求​expired_token：“device_code”已过期​ |\n| error_description​ | String​ | 错误详细描述​ |\n\n- authorization_pending：用户还未完成授权，请稍后重试 ​\n\n- slow_down：请求太频繁，请稍后重试 ​\n\n- access_denied：用户已拒绝授权请求 ​\n\n- expired_token：“device_code”已过期 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/oauth_jwt",
      "title": "OAuth JWT 授权（开发者）",
      "content": {
        "sections": [],
        "full_text": "OAuth JWT 授权（开发者）\n\n纯后端应用通常不包含任何用户界面元素，用户无法直接与之交互。该场景下建议使用\n\nJWT\n\n（JSON Web Token）模式，扣子账号直接永久授予 OAuth App 权限，OAuth App 随时可以通过后端应用签发的 JWT 获取访问令牌，以后端应用的身份请求扣子 API。\n\n​\n\n说明\n\nOAuth 授权码授权、PKCE 授权、设备授权模式下，扣子编程支持多人协作场景下跨账号的 OAuth 授权，详细说明可参考\n\n​\n\nOAuth 授权（多人协作场景）\n\n。\n\n​\n\n​\n\n示例项目源码\n\n​\n\n使用 JWT 进行鉴权的步骤较为复杂，扣子编程提供了 Python 等多语言 SDK，能够有效简化鉴权流程，支持扣子编程的各种鉴权模式。推荐使用扣子 SDK 实现鉴权。以下是基于扣子 SDK 的 OAuth JWT 授权的示例代码，供参考：\n\n​\n\n​\n\nPython\n\n​\n\nNode.js\n\n​\n\nJava\n\n​\n\nGo\n\n​\n\nexamples/\n\nauth_oauth_jwt.py\n\n​\n\nauth/auth-oauth-jwt.ts\n\n​\n\nauth/auth-oauth-jwt-channel.ts\n\n​\n\nJWTOauthExample.java\n\n​\n\njwt_example.go\n\n​\n\n​\n\n授权流程\n\n​\n\n授权流程如下：\n\n​\n\n1.\n\n在扣子编程创建 OAuth 应用并完成授权。\n\n​\n\n2.\n\n应用程序通过公钥和私钥签署 JWT。\n\n​\n\n3.\n\n应用程序通过 API，获取访问令牌，具体请参见\n\n​\n\n通过 JWT 获取 Oauth Access Token\n\n。\n\n​\n\n4.\n\n应用程序根据访问令牌调用扣子 API。\n\n​\n\n详细步骤如下：\n\n​\n\n1 创建 Oauth 应用并授权\n\n​\n\n你需要在扣子编程中创建 OAuth 应用。\n\n​\n\n说明\n\n在扣子企业版（企业标准版、企业旗舰版）中\n\n，仅\n\n组织超级管理\n\n员\n\n和\n\n管理员\n\n有权限创建、编辑、删除 OAuth 应用，以及对应用进行授权操作。\n\n​\n\n扣子企业旗舰版多组织场景中，创建的 OAuth 应用默认只有本组织资源的访问权限。如果要访问其他组织的资源，可以将 OAuth 应用的授权链接分享给目标组织的超级管理员或管理员，对方确认授权后才能访问，具体操作请参见\n\n​\n\n2 分享授权链接并授权\n\n。\n\n​\n\n​\n\n1.\n\n登录\n\n扣子编程\n\n。\n\n​\n\n2.\n\n在左侧导航栏选择\n\nAPI & SDK。\n\n​\n\n3.\n\n在顶部单击\n\n授权\n\n>\n\nOAuth 应用\n\n页签。\n\n​\n\n4.\n\n在 OAuth 应用页面右上角单击\n\n创建新应用\n\n，填写应用的基本信息，并单击\n\n创建并继续\n\n。\n\n​\n\n​\n\n配置\n\n​\n\n说明\n\n​\n\n应用类型\n\n​\n\n应用的类型，此处应指定为\n\n普通\n\n。\n\n​\n\n客户端类型\n\n​\n\n客户端类型，此处设置为\n\n服务类应用\n\n。\n\n​\n\n应用名称\n\n​\n\n应用的名称，在扣子编程中全局唯一。\n\n​\n\n描述\n\n​\n\n应用的基本描述信息。\n\n​\n\n​\n\n5.\n\n填写应用的配置信息。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n配置\n\n​\n\n说明\n\n​\n\n公钥和私钥\n\n​\n\n用于应用程序客户端身份认证的非对称密钥。\n\n​\n\n单击\n\n创建 Key\n\n，页面将自动创建一对公钥和私钥，公钥自动配置在扣子中，私钥以\n\nprivate_key.pem\n\n文件格式由网页自动下载至本地\n\nDownloads\n\n目录下。支持创建最多三对公钥和私钥。\n\n​\n\n说明\n\n建议将\n\nprivate_key.pem\n\n文件安全地存储在只有您的应用可以访问的位置。\n\n​\n\n扣子编程使用符合行业标准的 WebCrypto 加密标准，在浏览器前端创建非对称密钥，密钥强度符合行业标准。扣子编程任何时候都不会上传私钥到后端。请您放心使用。\n\n​\n\n​\n\n权限\n\n​\n\n应用程序调用扣子 API 时需要的权限范围。不同层级权限的生效范围请参见\n\n​\n\n权限层级\n\n。\n\n​\n\n说明\n\n此处配置旨在于划定应用的权限范围，并未完成授权操作。创建 OAuth 应用后还需要参考后续操作完成授权。\n\n​\n\n​\n\n​\n\n6.\n\n单击\n\n确定\n\n，完成配置。\n\n​\n\n7.\n\n在弹出的对话框中，确认权限等信息无误后，单击\n\n授权\n\n。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n2 签署 JWT\n\n​\n\n扣子编程的\n\nJWT\n\n生成方式及部分参数定义沿用业界统一流程规范，但 JWT 中 Header 和 Payload 部分由扣子编程自行定义。\n\n​\n\n在\n\nJWT\n\n（JSON Web Tokens）的流程中，通常使用私钥来签署（sign）token。\n\nJWT 包含三部分，即 Header、Payload 和 signature，其中 header 和 payload 由参数拼接而成，signature 根据指定的签名算法和私钥对 Header 和 Payload 自动计算生成。三部分之间用点（.）分隔。详细的签署方式可参考\n\nJWT 官方文档\n\n。\n\n​\n\nHeader 和 Payload\n\n​\n\n扣子编程对 Header 和 Payload 的定义如下：\n\n​\n\nHeader\n\n​\n\nHeader 部分的参数定义如下：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nalg\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n签名使用的加密算法，固定为\n\nRS256\n\n。\n\n​\n\nRS256\n\n是一种基于非对称加密的签名算法，它结合了 RSA 加密和 SHA-256 哈希算法。\n\n​\n\ntyp\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为 JWT。\n\n​\n\nkid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nOAuth 应用的\n\n公钥指纹\n\n，可以在\n\nOAuth 应用\n\n页面找到这个应用，在\n\n操作\n\n列单击编辑图标，进入\n\n配置\n\n页面查看公钥指纹。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\nHeader 示例如下：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"alg\"\n\n:\n\n\"RS256\"\n\n,\n\n// 固定为RS256\n\n​\n\n\"typ\"\n\n:\n\n\"JWT\"\n\n,\n\n// 固定为 JWT\n\n​\n\n\"kid\"\n\n:\n\n\"gdehvaDegW.....\"\n\n// OAuth 应用的公钥指纹\n\n​\n\n}\n\n​\n\n​\n\nPayload：\n\n​\n\nPayload 部分的参数定义如下：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\niss\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nOAuth 应用的 ID，可以在\n\nOAuth 应用\n\n页面查看。\n\n​\n\naud\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n扣子 API 的 Endpoint，即\n\napi.coze.cn\n\n。\n\n​\n\niat\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\nJWT 开始生效的时间，Unixtime 时间戳格式，精确到秒。一般为当前时刻。\n\n​\n\nexp\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\nJWT 过期的时间，Unixtime 时间戳格式，精确到秒。必须晚于 iat。\n\n​\n\njti\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n随机字符串，用于防止重放攻击。建议长度大于 32 字节。每次签署 JWT 时应指定为不同的字符串。\n\n​\n\nsession_name\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n访问令牌的会话标识。目前仅限在会话隔离场景下使用，即将 session_name 指定为用户在业务侧的 UID，以此区分不同业务侧用户的对话历史。\n\n​\n\n若未指定 session_name，不同用户的对话历史可能会掺杂在一起。\n\n​\n\n说明\n\n会话隔离的详细实现方法请参见\n\n​\n\n如何实现会话隔离\n\n。\n\n​\n\n​\n\nsession_context\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n会话上下文信息，包含设备相关信息等。\n\n​\n\n​\n\nsession_context.device_info\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n用于配置设备相关信息，扣子编程基于该部分信息对设备做用量管控以及账单记录。\n\n​\n\n说明\n\n仅扣子企业旗舰版支持该参数。硬件设备用量管控的具体操作可参考\n\n​\n\n终端用户用量查询和配额管控\n\n。\n\n​\n\nsession_context.device_info.device_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nIoT 等硬件设备 ID，一个设备对应一个唯一的设备号。\n\n​\n\n当需要记录设备用量或对设备用量进行管控时，需要填写该参数，否则，无法对设备进行用量管控，用量统计页面对应的设备 ID 将显示为 N/A。\n\n​\n\nsession_context.device_info.custom_consumer\n\n​\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n自定义维度的实体 ID，你可以根据业务需要进行设置，例如 APP 上的用户名等。\n\n​\n\n当需要记录设备用量或对设备用量进行管控，需要填写该参数，否则，无法对设备进行用量管控，用量统计页面对应的自定义 ID 将显示为 N/A。\n\n​\n\n说明\n\ndevice_id\n\n和\n\ncustom_consumer\n\n建议选择其中一个即可。\n\n​\n\ncustom_consumer\n\n参数用于设备用量管控，与对话等 API 传入的\n\nuser_id\n\n无关，\n\nuser_id\n\n主要用于上下文、数据库隔离等场景。\n\n​\n\n出于数据隐私及信息安全等方面的考虑，不建议使用业务系统中定义的用户敏感标识（如手机号等）作为\n\ncustom_consumer\n\n的值。\n\n​\n\n​\n\n​\n\nPayload 示例如下：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"iss\"\n\n:\n\n\"310000000002\"\n\n,\n\n// OAuth 应用的 ID\n\n​\n\n\"aud\"\n\n:\n\n\"api.coze.cn\"\n\n,\n\n// 扣子 API 的 Endpoint\n\n​\n\n\"iat\"\n\n:\n\n1516239022\n\n,\n\n// JWT 开始生效的时间，秒级时间戳\n\n​\n\n\"exp\"\n\n:\n\n1516259022\n\n,\n\n// JWT 过期时间，秒级时间戳\n\n​\n\n\"jti\"\n\n:\n\n\"fhjashjgkhalskj\"\n\n,\n\n// 随机字符串，防止重放攻击\n\n​\n\n\"session_name\"\n\n:\n\n\"user_2222\"\n\n,\n\n//用户在业务侧的 UID\n\n​\n\n\"session_context\"\n\n:\n\n{\n\n​\n\n\"device_info\"\n\n:\n\n{\n\n​\n\n\"device_id\"\n\n:\n\n\"1234567890\"\n\n// IoT 等硬件设备的唯一标识 ID\n\n​\n\n}\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n示例代码\n\n​\n\n你可以直接参考以下示例代码签署 JWT。\n\n​\n\n​\n\nPython\n\n复制\n\n# You must run `\n\npip install PyJWT cryptography\n\n` to install the PyJWT and the cryptography packages in order to use this script.\n\n​\n\n​\n\n#!/usr/bin/env python3\n\n​\n\nimport\n\nsys\n\n​\n\nimport\n\ntime\n\n​\n\nimport\n\nuuid\n\n​\n\n​\n\nimport\n\njwt\n\n​\n\n​\n\n# 替换为你的实际 Coze App 私钥\n\n​\n\nsigning_key =\n\n'''\n\n​\n\n-----BEGIN PRIVATE KEY-----\n\n​\n\nxxxxxxxxxxxxxxxxxx\n\n​\n\n-----END PRIVATE KEY-----\n\n​\n\n'''\n\n​\n\n​\n\npayload = {\n\n​\n\n'iat'\n\n:\n\nint\n\n(time.time()),\n\n​\n\n'exp'\n\n:\n\nint\n\n(time.time()) +\n\n600\n\n,\n\n​\n\n\"jti\"\n\n:\n\nstr\n\n(uuid.uuid4()),\n\n​\n\n'aud'\n\n:\n\n'api.coze.cn'\n\n,\n\n# 替换为实际的coze api domain\n\n​\n\n'iss'\n\n:\n\n'1127900106117'\n\n# 替换为你的实际 Coze App ID\n\n​\n\n}\n\n​\n\n​\n\nheaders = {\n\n​\n\n'kid'\n\n:\n\n'_v0VjcMlLdQc3tRTD3jC5Xz29TUnKQOhtuD5k-gpyf4'\n\n# 替换为你的实际 Coze App 公钥指纹\n\n​\n\n}\n\n​\n\n​\n\n# Create JWT with headers\n\n​\n\nencoded_jwt = jwt.encode(payload, signing_key, algorithm=\n\n'RS256'\n\n, headers=headers)\n\n​\n\n​\n\nprint\n\n(\n\nf\"JWT:\n\n{encoded_jwt}\n\n\"\n\n)\n\n​\n\n​\n\n最终生成的 JWT 示例如下：\n\n​\n\n​\n\nPlain Text\n\n复制\n\neyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6InZZd2ZsdFR1OWZBbWtwWFhSdnR5UmREc3RONVMzZWNFcDFqVzB6dVQyRE****.eyJpc3MiOiIzMTAwMDAwMDAwMDIiLCJhdWQiOiJhcGkuY296ZS5jb20iLCJpYXQiOjE1MTYyMzkwMjIsImV4cCI6MTkxNjI1OTAyMiwianRpIjoiZmhqaGFsc2tqZmFkc2pld3F****.CuoiCCF-nHFyGmu2EKlwFoyd3uDyKQ3Drc1CrXQyMVySTzZlZd2M7zKWsziB3AktwbUZiRJlQ1HbghR05CW2YRHwKL4-dlJ4koR3onU7iQAO5DkPCaIxbAuTsQobtCAdkkZTg8gav9EnN1QN_1xq0w8BzuuhS7wCeY8UbaskkTK9GnO4eU9tEINmVw-2CrfB-kNbEHlEDwXfcrb4YPpkw3GhmuPShenNLObfSWS0CqIyakXL8qD5AgXLoB-SejAsRdzloSUInNXENJHfSVMkThxRhJy7yEjX3BmculC54fMKENRfLElBqwJyLLUjeRHsYnaru2ca4W8_yaPJ7F***\n\n*\n\n​\n\n​\n\n3 获取访问令牌\n\n​\n\n应用程序调用\n\n​\n\n通过 JWT 获取 Oauth Access Token\n\nAPI ，请求 Header 中携带 JWT，扣子服务端会在响应中通过  access_token 字段返回访问令牌。\n\n​\n\n请求示例如下：\n\n​\n\n扣子个人版和企业标准版\n\n扣子企业旗舰版多组织\n\n​\n\nShell\n\n复制\n\ncurl --location --request POST '\n\nhttps://\n\napi.coze.cn\n\n/api/\n\npermission/oauth2/token' \\\n\n​\n\n--header 'Content-Type: application/json' \\\n\n​\n\n--header 'Authorization: Bearer eyJhbGciOiJSUzI1NiIyRE****.eyJpc3MiOiIzMTAwMDAwMDAwMDIiLCJhdWQiOiJhcGkuY296ZS5jb20iLCJpYXQiOjE1MTYyMzkwMjIsImV4cCI6MTkxNjI1OTAyMiwianRpIjoiZmhqaGFsc2tqZmFkc2pld3F****.CuoiCCF-nHFyGmu2EKlwFoyd3uDyKQ3Drc1CrXQyMVySTzZlZd2M7zKWsziB3AktwbUZiRJlQ1HbghR05CW2YRHwKL4-dlJ4koR3onU7iQAO5DkPCaIxbAuXfcrb4YPpkw3GhmuPShenNLObfSWS0CqIyakXL8qD5AgXLoB-SejAsRdzloSUInNXENJHfSVMkThxRhJy7yEjX3BmculC54fMKENRfLElBqwJyLLUjeRHsYnaru2ca4W8_yaPJ7F****' \\\n\n​\n\n--data '{\n\n​\n\n\"duration_seconds\": 86399,\n\n​\n\n\"grant_type\": \"urn:ietf:params:oauth:grant-type:jwt-bearer\"\n\n​\n\n}'\n\n​\n\n​\n\n​\n\n返回示例如下：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"access_token\"\n\n:\n\n\"czs_RQOhsc7vmUzK4bNgb7hn4wqOgRBYAO6xvpFHNbnl6RiQJX3cSXSguIhFDzgy****\"\n\n,\n\n​\n\n\"expires_in\"\n\n:\n\n1721135859\n\n​\n\n}\n\n​\n\n​\n\n4 发起扣子 API 请求\n\n​\n\n在 API 请求头中通过\n\nAuthorization=Bearer\n\n$Access_Token\n\n指定访问令牌，发起扣子 API 请求。每个接口对应的权限点不同。\n\n​\n\n以\n\n​\n\n查看智能体配置\n\nAPI 为例，完整的 API 请求如下：\n\n​\n\n​\n\nShell\n\n复制\n\ncurl --location --request GET 'https://api.coze.cn/v1/bots/73428668*****?is_published=true' \\\n\n​\n\n--header 'Authorization: Bearer czu_UEE2mJn66h0fMHxLCVv9uQ7HAoNNS8DmF6N6grjWmkHX2jPm8SR0tJcKop8v****' \\\n\n​\n\n​\n\n通过 JWT 获取 Oauth Access Token\n\n​\n\n通过 JWT 获取 Oauth Access Token。\n\n​\n\n说明\n\nJWT 仅能使用一次，如需再次申请 OAuth Access Token，必须重新生成一个 JWT。\n\n​\n\nOAuth Access Token 的有效期默认为 15 分钟，不支持刷新。如需获取新的 Access Token，你需要再次生成一个 JWT，并调用此接口。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n​\n\n请求地址\n\n​\n\n扣子个人版和企业标准版：\n\nhttps://api.coze.cn/api/permission/oauth2/token\n\n​\n\n扣子企业旗舰版多组织：\n\nhttps://api.coze.cn/api/permission\n\n/oauth2/account/{account_id}/token\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n请求正文的方式。\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$JWT\n\n​\n\n使用应用的客户端私钥签署的 JWT。生成方式可参考\n\n​\n\n2 签署 JWT\n\n。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\naccount_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n在扣子企业旗舰版中，如果需要在指定组织下获取 Token，需要在 Path 中填写组织 ID。组织 ID 的获取方式如下：\n\n​\n\n组织超级管理员或管理员可以在\n\n组织设置\n\n页面查看对应的组织 ID。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\ngrant_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\nurn:ietf:params:oauth:grant-type:jwt-bearer\n\n。\n\n​\n\nduration_seconds\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n申请的 AccessToken 有效期，单位为秒，默认 900 秒，即 15 分钟。最大可设置为 86399 秒，即 24 小时。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n说明\n\n​\n\naccess_token\n\n​\n\nString\n\n​\n\nOAuth Access Token。\n\n​\n\nexpires_in\n\n​\n\nInteger\n\n​\n\nOAuth Access Token 的过期时间，Unixtime 时间戳格式，单位为秒。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nShell\n\n复制\n\ncurl --location 'https://api.coze.cn/api/permission/oauth2/token' \\\n\n​\n\n--header 'Content-Type: application/json' \\\n\n​\n\n--header 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6InZZd2ZsdFR1OWZBbWtwWFhSdnR5UmREc3RONVMzZWNFcDFqVzB6dVQyRE****.eyJpc3MiOiIzMTAwMDAwMDAwMDIiLCJhdWQiOiJhcGkuY296ZS5jb20iLCJpYXQiOjE1MTYyMzkwMjIsImV4cCI6MTkxNjI1OTAyMiwianRpIjoiZmhqaGFsc2tqZmFkc2pld3F****.CuoiCCF-nHFyGmu2EKlwFoyd3uDyKQ3Drc1CrXQyMVySTzZlZd2M7zKWsziB3AktwbUZiRJlQ1HbghR05CW2YRHwKL4-dlJ4koR3onU7iQAO5DkPCaIxbAuTsQobtCAdkkZTg8gav9EnN1QN_1xq0w8BzuuhS7wCeY8UbaskkTK9GnO4eU9tEINmVw-2CrfB-kNbEHlEDwXfcrb4YPpkw3GhmuPShenNLObfSWS0CqIyakXL8qD5AgXLoB-SejAsRdzloSUInNXENJHfSVMkThxRhJy7yEjX3BmculC54fMKENRfLElBqwJyLLUjeRHsYnaru2ca4W8_yaPJ7F****' \\\n\n​\n\n--data '{\n\n​\n\n\"duration_seconds\": 86399,\n\n​\n\n\"grant_type\": \"urn:ietf:params:oauth:grant-type:jwt-bearer\"\n\n​\n\n}'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"access_token\"\n\n:\n\n\"czs_RQOhsc7vmUzK4bNgb7hn4wqOgRBYAO6xvpFHNbnl6RiQJX3cSXSguIhFDzgy****\"\n\n,\n\n​\n\n\"expires_in\"\n\n:\n\n1721135859\n\n​\n\n}\n\n​\n\n​\n\n错误码\n\n​\n\n​\n\nerror_code\n\n​\n\nerror_message\n\n​\n\n说明\n\n​\n\ninvalid_request\n\n​\n\ninvalid request: {parameter}\n\n​\n\n​\n\n原因：请求参数 {parameter} 错误。\n\n​\n\n解决方案：请参考 API 文档查看参数说明。\n\n​\n\ninvalid_client\n\n​\n\n/\n\n​\n\n原因：客户端凭证（JWT Token 或者 Client Secret）无效。\n\n​\n\n解决方案：请校验您的客户端凭证。\n\n​\n\nunsupported_grant_type\n\n​\n\nnot supported grant type: {grant type}\n\n​\n\n原因：不支持的授权类型 {grant type}。\n\n​\n\n解决方案：请参考 API 文档指定正确的授权类型。\n\n​\n\naccess_deny\n\n​\n\napp: {app name} is currently deactivated by the owner\n\n​\n\n原因：OAuth 应用已被禁用。\n\n​\n\n解决方案：在\n\n扣子\n\n编程中启用 OAuth 应用。\n\n​\n\n​\n\ninvalid app type\n\n​\n\n原因：应用类型错误。\n\n​\n\n解决方案：渠道应用暂不支持授权码模式。\n\n​\n\n​\n\nlogin session invalid\n\n​\n\n原因：登录态无效。\n\n​\n\n解决方案：用户需要重新登录\n\n扣子\n\n编程。\n\n​\n\ninternal_error\n\n​\n\nService internal error.\n\n​\n\n原因：服务内部错误。\n\n​\n\n解决方案：建议稍后重试。\n\n​\n\n​\n\n​\n\n​\n\n上一篇\n\nOAuth 设备授权\n\n下一篇\n\nOAuth JWT 授权（渠道场景）",
        "links": []
      },
      "markdown": "| Python​ | Node.js​ | Java​ | Go​ |\n| examples/auth_oauth_jwt.py​ | auth/auth-oauth-jwt.ts​auth/auth-oauth-jwt-channel.ts​ | JWTOauthExample.java​ | jwt_example.go​ |\n\n\n\n\n\n- 在扣子企业版（企业标准版、企业旗舰版）中 ，仅 组织超级管理 员 和 管理员 有权限创建、编辑、删除 OAuth 应用，以及对应用进行授权操作。 ​\n\n- 扣子企业旗舰版多组织场景中，创建的 OAuth 应用默认只有本组织资源的访问权限。如果要访问其他组织的资源，可以将 OAuth 应用的授权链接分享给目标组织的超级管理员或管理员，对方确认授权后才能访问，具体操作请参见 ​ 2 分享授权链接并授权 。 ​\n\n\n\n\n\n- ​ 配置 ​ 说明 ​ 应用类型 ​ 应用的类型，此处应指定为 普通 。 ​ 客户端类型 ​ 客户端类型，此处设置为 服务类应用 。 ​ 应用名称 ​ 应用的名称，在扣子编程中全局唯一。 ​ 描述 ​ 应用的基本描述信息。 ​ ​\n\n| 配置​ | 说明​ |\n| 应用类型​ | 应用的类型，此处应指定为普通。​ |\n| 客户端类型​ | 客户端类型，此处设置为服务类应用。​ |\n| 应用名称​ | 应用的名称，在扣子编程中全局唯一。​ |\n| 描述​ | 应用的基本描述信息。​ |\n\n\n- ​ ​ ​ ​ ​\n\n- ​ 配置 ​ 说明 ​ 公钥和私钥 ​ 用于应用程序客户端身份认证的非对称密钥。 ​ 单击 创建 Key ，页面将自动创建一对公钥和私钥，公钥自动配置在扣子中，私钥以 private_key.pem 文件格式由网页自动下载至本地 Downloads 目录下。支持创建最多三对公钥和私钥。 ​ 说明 建议将 private_key.pem 文件安全地存储在只有您的应用可以访问的位置。 ​ 扣子编程使用符合行业标准的 WebCrypto 加密标准，在浏览器前端创建非对称密钥，密钥强度符合行业标准。扣子编程任何时候都不会上传私钥到后端。请您放心使用。 ​ ​ 权限 ​ 应用程序调用扣子 API 时需要的权限范围。不同层级权限的生效范围请参见 ​ 权限层级 。 ​ 说明 此处配置旨在于划定应用的权限范围，并未完成授权操作。创建 OAuth 应用后还需要参考后续操作完成授权。 ​ ​ ​\n\n| 配置​ | 说明​ |\n| 公钥和私钥​ | 用于应用程序客户端身份认证的非对称密钥。​单击创建 Key，页面将自动创建一对公钥和私钥，公钥自动配置在扣子中，私钥以private_key.pem文件格式由网页自动下载至本地Downloads目录下。支持创建最多三对公钥和私钥。​说明建议将private_key.pem文件安全地存储在只有您的应用可以访问的位置。​扣子编程使用符合行业标准的 WebCrypto 加密标准，在浏览器前端创建非对称密钥，密钥强度符合行业标准。扣子编程任何时候都不会上传私钥到后端。请您放心使用。​​ |\n| 权限​ | 应用程序调用扣子 API 时需要的权限范围。不同层级权限的生效范围请参见​权限层级。​说明此处配置旨在于划定应用的权限范围，并未完成授权操作。创建 OAuth 应用后还需要参考后续操作完成授权。​​ |\n\n- 建议将 private_key.pem 文件安全地存储在只有您的应用可以访问的位置。 ​\n\n- 扣子编程使用符合行业标准的 WebCrypto 加密标准，在浏览器前端创建非对称密钥，密钥强度符合行业标准。扣子编程任何时候都不会上传私钥到后端。请您放心使用。 ​\n\n\n\n- ​ ​ ​ ​ ​\n\n- Header ​\n\n- Header 部分的参数定义如下： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ alg ​ String ​ 必选 ​ 签名使用的加密算法，固定为 RS256 。 ​ RS256 是一种基于非对称加密的签名算法，它结合了 RSA 加密和 SHA-256 哈希算法。 ​ typ ​ String ​ 必选 ​ 固定为 JWT。 ​ kid ​ String ​ 必选 ​ OAuth 应用的 公钥指纹 ，可以在 OAuth 应用 页面找到这个应用，在 操作 列单击编辑图标，进入 配置 页面查看公钥指纹。 ​ ​ ​ ​ ​ ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| alg​ | String​ | 必选​ | 签名使用的加密算法，固定为RS256。​RS256是一种基于非对称加密的签名算法，它结合了 RSA 加密和 SHA-256 哈希算法。​ |\n| typ​ | String​ | 必选​ | 固定为 JWT。​ |\n| kid​ | String​ | 必选​ | OAuth 应用的公钥指纹，可以在OAuth 应用页面找到这个应用，在操作列单击编辑图标，进入配置页面查看公钥指纹。​​​​​​ |\n\n- Header 示例如下： ​\n\n- ​ JSON 复制 { ​ \"alg\" : \"RS256\" , // 固定为RS256 ​ \"typ\" : \"JWT\" , // 固定为 JWT ​ \"kid\" : \"gdehvaDegW.....\" // OAuth 应用的公钥指纹 ​ } ​ ​\n\n- Payload： ​\n\n- Payload 部分的参数定义如下： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ iss ​ String ​ 必选 ​ OAuth 应用的 ID，可以在 OAuth 应用 页面查看。 ​ aud ​ String ​ 必选 ​ 扣子 API 的 Endpoint，即 api.coze.cn 。 ​ iat ​ Integer ​ 必选 ​ JWT 开始生效的时间，Unixtime 时间戳格式，精确到秒。一般为当前时刻。 ​ exp ​ Integer ​ 必选 ​ JWT 过期的时间，Unixtime 时间戳格式，精确到秒。必须晚于 iat。 ​ jti ​ String ​ 必选 ​ 随机字符串，用于防止重放攻击。建议长度大于 32 字节。每次签署 JWT 时应指定为不同的字符串。 ​ session_name ​ String ​ 可选 ​ 访问令牌的会话标识。目前仅限在会话隔离场景下使用，即将 session_name 指定为用户在业务侧的 UID，以此区分不同业务侧用户的对话历史。 ​ 若未指定 session_name，不同用户的对话历史可能会掺杂在一起。 ​ 说明 会话隔离的详细实现方法请参见 ​ 如何实现会话隔离 。 ​ ​ session_context ​ Object ​ 可选 ​ 会话上下文信息，包含设备相关信息等。 ​ ​ session_context.device_info ​ Object ​ 可选 ​ 用于配置设备相关信息，扣子编程基于该部分信息对设备做用量管控以及账单记录。 ​ 说明 仅扣子企业旗舰版支持该参数。硬件设备用量管控的具体操作可参考 ​ 终端用户用量查询和配额管控 。 ​ session_context.device_info.device_id ​ String ​ 可选 ​ IoT 等硬件设备 ID，一个设备对应一个唯一的设备号。 ​ 当需要记录设备用量或对设备用量进行管控时，需要填写该参数，否则，无法对设备进行用量管控，用量统计页面对应的设备 ID 将显示为 N/A。 ​ session_context.device_info.custom_consumer ​ ​ String ​ 可选 ​ 自定义维度的实体 ID，你可以根据业务需要进行设置，例如 APP 上的用户名等。 ​ 当需要记录设备用量或对设备用量进行管控，需要填写该参数，否则，无法对设备进行用量管控，用量统计页面对应的自定义 ID 将显示为 N/A。 ​ 说明 device_id 和 custom_consumer 建议选择其中一个即可。 ​ custom_consumer 参数用于设备用量管控，与对话等 API 传入的 user_id 无关， user_id 主要用于上下文、数据库隔离等场景。 ​ 出于数据隐私及信息安全等方面的考虑，不建议使用业务系统中定义的用户敏感标识（如手机号等）作为 custom_consumer 的值。 ​ ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| iss​ | String​ | 必选​ | OAuth 应用的 ID，可以在OAuth 应用页面查看。​ |\n| aud​ | String​ | 必选​ | 扣子 API 的 Endpoint，即api.coze.cn。​ |\n| iat​ | Integer​ | 必选​ | JWT 开始生效的时间，Unixtime 时间戳格式，精确到秒。一般为当前时刻。​ |\n| exp​ | Integer​ | 必选​ | JWT 过期的时间，Unixtime 时间戳格式，精确到秒。必须晚于 iat。​ |\n| jti​ | String​ | 必选​ | 随机字符串，用于防止重放攻击。建议长度大于 32 字节。每次签署 JWT 时应指定为不同的字符串。​ |\n| session_name​ | String​ | 可选​ | 访问令牌的会话标识。目前仅限在会话隔离场景下使用，即将 session_name 指定为用户在业务侧的 UID，以此区分不同业务侧用户的对话历史。​若未指定 session_name，不同用户的对话历史可能会掺杂在一起。​说明会话隔离的详细实现方法请参见​如何实现会话隔离。​​ |\n| session_context​ | Object​ | 可选​ | 会话上下文信息，包含设备相关信息等。​​ |\n| session_context.device_info​ | Object​ | 可选​ | 用于配置设备相关信息，扣子编程基于该部分信息对设备做用量管控以及账单记录。​说明仅扣子企业旗舰版支持该参数。硬件设备用量管控的具体操作可参考​终端用户用量查询和配额管控。​ |\n| session_context.device_info.device_id​ | String​ | 可选​ | IoT 等硬件设备 ID，一个设备对应一个唯一的设备号。​当需要记录设备用量或对设备用量进行管控时，需要填写该参数，否则，无法对设备进行用量管控，用量统计页面对应的设备 ID 将显示为 N/A。​ |\n| session_context.device_info.custom_consumer​​ | String​ | 可选​ | 自定义维度的实体 ID，你可以根据业务需要进行设置，例如 APP 上的用户名等。​当需要记录设备用量或对设备用量进行管控，需要填写该参数，否则，无法对设备进行用量管控，用量统计页面对应的自定义 ID 将显示为 N/A。​说明device_id和custom_consumer建议选择其中一个即可。​custom_consumer参数用于设备用量管控，与对话等 API 传入的user_id无关，user_id主要用于上下文、数据库隔离等场景。​出于数据隐私及信息安全等方面的考虑，不建议使用业务系统中定义的用户敏感标识（如手机号等）作为custom_consumer的值。​​ |\n\n- device_id 和 custom_consumer 建议选择其中一个即可。 ​\n\n- custom_consumer 参数用于设备用量管控，与对话等 API 传入的 user_id 无关， user_id 主要用于上下文、数据库隔离等场景。 ​\n\n- 出于数据隐私及信息安全等方面的考虑，不建议使用业务系统中定义的用户敏感标识（如手机号等）作为 custom_consumer 的值。 ​\n\n- Payload 示例如下： ​\n\n- ​ JSON 复制 { ​ \"iss\" : \"310000000002\" , // OAuth 应用的 ID ​ \"aud\" : \"api.coze.cn\" , // 扣子 API 的 Endpoint ​ \"iat\" : 1516239022 , // JWT 开始生效的时间，秒级时间戳 ​ \"exp\" : 1516259022 , // JWT 过期时间，秒级时间戳 ​ \"jti\" : \"fhjashjgkhalskj\" , // 随机字符串，防止重放攻击 ​ \"session_name\" : \"user_2222\" , //用户在业务侧的 UID ​ \"session_context\" : { ​ \"device_info\" : { ​ \"device_id\" : \"1234567890\" // IoT 等硬件设备的唯一标识 ID ​ } ​ } ​ } ​ ​\n\n- JWT 仅能使用一次，如需再次申请 OAuth Access Token，必须重新生成一个 JWT。 ​\n\n- OAuth Access Token 的有效期默认为 15 分钟，不支持刷新。如需获取新的 Access Token，你需要再次生成一个 JWT，并调用此接口。 ​\n\n| 请求方式​ | POST​ |\n| 请求地址​ | 扣子个人版和企业标准版：https://api.coze.cn/api/permission/oauth2/token​扣子企业旗舰版多组织：https://api.coze.cn/api/permission/oauth2/account/{account_id}/token​ |\n\n- 扣子个人版和企业标准版： https://api.coze.cn/api/permission/oauth2/token ​\n\n- 扣子企业旗舰版多组织： https://api.coze.cn/api/permission /oauth2/account/{account_id}/token ​\n\n| 参数​ | 取值​ | 说明​ |\n| Content-Type​ | application/json​ | 请求正文的方式。​ |\n| Authorization​ | Bearer$JWT​ | 使用应用的客户端私钥签署的 JWT。生成方式可参考​2 签署 JWT。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| account_id​ | String​ | 可选​ | 在扣子企业旗舰版中，如果需要在指定组织下获取 Token，需要在 Path 中填写组织 ID。组织 ID 的获取方式如下：​组织超级管理员或管理员可以在组织设置页面查看对应的组织 ID。​​​​​​ |\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| grant_type​ | String​ | 必选​ | 固定为urn:ietf:params:oauth:grant-type:jwt-bearer。​ |\n| duration_seconds​ | Integer​ | 可选​ | 申请的 AccessToken 有效期，单位为秒，默认 900 秒，即 15 分钟。最大可设置为 86399 秒，即 24 小时。​ |\n\n| 参数​ | 类型​ | 说明​ |\n| access_token​ | String​ | OAuth Access Token。​ |\n| expires_in​ | Integer​ | OAuth Access Token 的过期时间，Unixtime 时间戳格式，单位为秒。​ |\n\n| error_code​ | error_message​ | 说明​ |\n| invalid_request​ | invalid request: {parameter}​​ | 原因：请求参数 {parameter} 错误。​解决方案：请参考 API 文档查看参数说明。​ |\n| invalid_client​ | /​ | 原因：客户端凭证（JWT Token 或者 Client Secret）无效。​解决方案：请校验您的客户端凭证。​ |\n| unsupported_grant_type​ | not supported grant type: {grant type}​ | 原因：不支持的授权类型 {grant type}。​解决方案：请参考 API 文档指定正确的授权类型。​ |\n| access_deny​ | app: {app name} is currently deactivated by the owner​ | 原因：OAuth 应用已被禁用。​解决方案：在扣子编程中启用 OAuth 应用。​ |\n| ​ | invalid app type​ | 原因：应用类型错误。​解决方案：渠道应用暂不支持授权码模式。​ |\n| ​ | login session invalid​ | 原因：登录态无效。​解决方案：用户需要重新登录扣子编程。​ |\n| internal_error​ | Service internal error.​ | 原因：服务内部错误。​解决方案：建议稍后重试。​ |\n\n- 原因：请求参数 {parameter} 错误。 ​\n\n- 解决方案：请参考 API 文档查看参数说明。 ​\n\n- 原因：客户端凭证（JWT Token 或者 Client Secret）无效。 ​\n\n- 解决方案：请校验您的客户端凭证。 ​\n\n- 原因：不支持的授权类型 {grant type}。 ​\n\n- 解决方案：请参考 API 文档指定正确的授权类型。 ​\n\n- 原因：OAuth 应用已被禁用。 ​\n\n- 解决方案：在 扣子 编程中启用 OAuth 应用。 ​\n\n- 原因：应用类型错误。 ​\n\n- 解决方案：渠道应用暂不支持授权码模式。 ​\n\n- 原因：登录态无效。 ​\n\n- 解决方案：用户需要重新登录 扣子 编程。 ​\n\n- 原因：服务内部错误。 ​\n\n- 解决方案：建议稍后重试。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/oauth_jwt_channel",
      "title": "OAuth JWT 授权（渠道场景）",
      "content": {
        "sections": [],
        "full_text": "OAuth JWT 授权（渠道场景）\n\n扣子\n\n编程提供标准的生态对接方式和多种对接方案，支持网站、App、应用市场、手机等硬件厂商作为第三方渠道入驻。渠道入驻场景下，渠道侧需要通过 JWT 授权流程获取渠道的 OAuth Access Token。智能体发布到第三方渠道后，可以使用此渠道专属的 OAuth Access Token 调用\n\n扣子\n\nOpenAPI，例如查看智能体信息、和智能体对话等。\n\n​\n\n说明\n\n关于发布到自定义渠道的详细说明及步骤，可参考\n\n​\n\n渠道入驻概述\n\n。\n\n​\n\n​\n\n示例项目源码\n\n​\n\n使用 JWT 进行鉴权的步骤较为复杂，扣子编程提供了 Python 等多语言 SDK，能够有效简化鉴权流程，支持扣子编程的各种鉴权模式。推荐使用扣子 SDK 实现鉴权。以下是基于扣子 SDK 的 OAuth JWT 授权的示例代码，供参考：\n\n​\n\n​\n\nPython\n\n​\n\nNode.js\n\n​\n\nJava\n\n​\n\nGo\n\n​\n\nexamples/\n\nauth_oauth_jwt.py\n\n​\n\nauth/auth-oauth-jwt.ts\n\n​\n\nauth/auth-oauth-jwt-channel.ts\n\n​\n\nJWTsOauthExample.java\n\n​\n\njwt_example.go\n\n​\n\n​\n\n准备工作\n\n​\n\n创建一个渠道类型的 OAuth 应用，并在渠道侧实现 JWT 的授权流程、具备获取 OAuth Access Token 的能力。\n\n​\n\n说明\n\n在扣子企业版（企业标准版、企业旗舰版）\n\n中\n\n，仅\n\n超级管理员\n\n和\n\n管理员\n\n有权限创建、编辑、删除 OAuth 应用，以及对应用进行授权操作。\n\n​\n\n​\n\n1.\n\n创建渠道类型的 OAuth 应用。\n\n​\n\na.\n\n登录\n\n扣子编程\n\n。\n\n​\n\nb.\n\n在左侧导航栏选择\n\nAPI & SDK。\n\n​\n\nc.\n\n在顶部单击\n\n授权\n\n>\n\nOAuth 应用\n\n页签。\n\n​\n\nd.\n\n在 OAuth 应用页面右上角单击\n\n创建新应用\n\n，填写应用的基本信息，并单击\n\n创建并继续\n\n。\n\n​\n\n​\n\n配置\n\n​\n\n说明\n\n​\n\n应用类型\n\n​\n\n应用的类型，此处应指定为\n\n渠道\n\n。\n\n​\n\n客户端类型\n\n​\n\n客户端类型，此处设置为\n\n服务类应用\n\n。\n\n​\n\n应用名称\n\n​\n\n应用的名称，在\n\n扣子\n\n编程中全局唯一。\n\n​\n\n描述\n\n​\n\n应用的基本描述信息。\n\n​\n\n​\n\ne.\n\n填写应用的配置信息。\n\n​\n\n​\n\n配置\n\n​\n\n说明\n\n​\n\n公钥和私钥\n\n​\n\n用于应用程序客户端身份认证的非对称密钥。\n\n​\n\n单击\n\n创建 Key\n\n，页面将自动创建一对公钥和私钥，公钥自动配置在扣子编程中，私钥以\n\nprivate_key.pem\n\n文件格式由网页自动下载至本地\n\nDownloads\n\n目录下。支持创建最多三对公钥和私钥。\n\n​\n\n建议将\n\nprivate_key.pem\n\n文件安全地存储在只有您的应用可以访问的位置。\n\n​\n\n扣子编程使用符合行业标准的 WebCrypto 加密标准，在浏览器前端创建非对称密钥，密钥强度符合行业标准。扣子编程任何时候都不会上传私钥到后端。请您放心使用。\n\n​\n\n权限\n\n​\n\n应用程序调用扣子 API 时需要的权限范围。不同层级权限的生效范围请参见\n\n​\n\n权限层级\n\n。\n\n​\n\n说明\n\n此处配置旨在于划定应用的权限范围，并未完成授权操作。创建 OAuth 应用后还需要参考后续操作完成授权。\n\n​\n\n​\n\nf.\n\n单击\n\n确定\n\n，完成配置。\n\n​\n\n2.\n\n完成 OAuth 应用授权。\n\n​\n\n授权后，此 OAuth 应用生成的 OAuth Access Token 将具备 OAuth 应用指定的操作权限，例如调用查看智能体信息等 OpenAPI。后续还需要为应用绑定自定义发布渠道，此 OAuth Access Token 将具备所有发布到这个渠道中的智能体的操作权限，例如调用查看智能体信息 API 接口，查看指定智能体的信息。\n\n​\n\nb.\n\n在\n\n授权\n\n>\n\nOAuth 应用\n\n页面找到需要授权的应用。\n\n​\n\nc.\n\n在对应的操作列单击编辑图标。\n\n​\n\nd.\n\n在编辑应用页面左下角单击\n\n授权\n\n。\n\n​\n\n授权页将显示应用名称、权限列表等重要信息，请务必认真核对信息，确认无误后单击\n\n授权\n\n。\n\n​\n\n授权流程\n\n​\n\n你需要在渠道的服务端中实现 JWT 授权流程，通过 OAuth 应用的私钥签署 JWT，并获取 Oauth Access Token。\n\n扣子\n\n编程的\n\nJWT\n\n生成方式及各部分参数定义沿用业界统一流程规范。\n\n​\n\n授权流程如下：\n\n​\n\n1.\n\n应用程序通过公钥和私钥签署 JWT。\n\n​\n\n2.\n\n应用程序通过\n\n​\n\nAPI：通过 JWT 获取 Oauth Access Token\n\nAPI，获取访问令牌。\n\n​\n\n3.\n\n应用程序根据访问令牌调用\n\n扣子\n\nAPI。\n\n​\n\n详细步骤如下：\n\n​\n\n1 签署 JWT\n\n​\n\n扣子编程的\n\nJWT\n\n生成方式及部分参数定义沿用业界统一流程规范，但 JWT 中 Header 和 Payload 部分由扣子编程自行定义。\n\n​\n\n在\n\nJWT\n\n（JSON Web Tokens）的流程中，通常使用私钥来签署（sign）token。JWT 包含三部分，即 Header、Payload 和 signature，其中 header 和 payload 由参数拼接而成，signature 根据指定的签名算法和私钥对 Header 和 Payload 自动计算生成。三部分之间用点（.）分隔。详细的签署方式可参考\n\nJWT 官方文档\n\n。\n\n​\n\nHeader 和 Payload\n\n​\n\n扣子编程对 Header 和 Payload 的定义如下：\n\n​\n\nHeader\n\n​\n\nHeader 部分的参数定义如下：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nalg\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n签名使用的加密算法。固定为 RS256，即非对称加密算法，一种基于 RSA（非对称加密算法）+ SHA256（安全哈希函数）的签名算法，该算法使用私钥进行签名，公钥进行验证。\n\n​\n\ntyp\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为 JWT。\n\n​\n\nkid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nOAuth 应用的\n\n公钥指纹\n\n，可以在\n\nOAuth 应用\n\n页面找到这个应用，在\n\n操作\n\n列单击编辑图标，进入\n\n配置\n\n页面查看公钥指纹。\n\n​\n\n​\n\nHeader 示例如下：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"alg\"\n\n:\n\n\"RS256\"\n\n,\n\n// 固定为RS256\n\n​\n\n\"typ\"\n\n:\n\n\"JWT\"\n\n,\n\n// 固定为 JWT\n\n​\n\n\"kid\"\n\n:\n\n\"gdehvaDegW.....\"\n\n// OAuth 应用的公钥指纹\n\n​\n\n}\n\n​\n\n​\n\nPayload：\n\n​\n\nPayload 部分的参数定义如下：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\niss\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nOAuth 应用的 ID，可以在\n\nOAuth 应用\n\n页面查看。\n\n​\n\naud\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n扣子 API 的 Endpoint，即\n\napi.coze.cn\n\n。\n\n​\n\niat\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\nJWT 开始生效的时间，Unixtime 时间戳格式，精确到秒。一般为当前时刻。\n\n​\n\nexp\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\nJWT 过期的时间，Unixtime 时间戳格式，精确到秒。必须晚于 iat。\n\n​\n\njti\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n随机字符串，用于防止重放攻击。建议长度大于 32 字节。每次签署 JWT 时应指定为不同的字符串。\n\n​\n\nsession_name\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n访问令牌的会话标识。目前仅限在会话隔离场景下使用，即将 session_name 指定为用户在业务侧的 UID，以此区分不同业务侧用户的对话历史。\n\n​\n\n若未指定 session_name，不同用户的对话历史可能会掺杂在一起。\n\n​\n\nsession_context\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n会话上下文信息，包含设备相关信息等。\n\n​\n\n​\n\nsession_context.device_info\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n用于配置设备相关信息，扣子编程基于该部分信息对设备做用量管控以及账单记录。\n\n​\n\n说明\n\n仅扣子企业旗舰版支持该参数。硬件设备用量管控的具体操作可参考\n\n​\n\n终端用户用量查询和配额管控\n\n​\n\n​\n\nsession_context.device_info.device_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nIoT 等硬件设备 ID，一个设备对应一个唯一的设备号。\n\n​\n\n当需要记录设备用量或对设备用量进行管控时，需要填写该参数，否则，无法对设备进行用量管控，用量统计页面对应的设备 ID 将显示为 N/A。\n\n​\n\nsession_context.device_info.custom_consumer\n\n​\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n自定义维度的实体 ID，你可以根据业务需要进行设置，例如 APP 上的用户名等。\n\n​\n\n当需要记录设备用量或对设备用量进行管控，需要填写该参数，否则，无法对设备进行用量管控，用量统计页面对应的自定义 ID 将显示为 N/A。\n\n​\n\n说明\n\ndevice_id\n\n和\n\ncustom_consumer\n\n建议选择其中一个即可。\n\n​\n\ncustom_consumer\n\n参数用于设备用量管控，与对话等 API 传入的\n\nuser_id\n\n无关，\n\nuser_id\n\n主要用于上下文、数据库隔离等场景。\n\n​\n\n出于数据隐私及信息安全等方面的考虑，不建议使用业务系统中定义的用户敏感标识（如手机号等）作为\n\ncustom_consumer\n\n的值。\n\n​\n\n​\n\nPayload 示例如下：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"iss\"\n\n:\n\n\"310000000002\"\n\n,\n\n// OAuth 应用的 ID\n\n​\n\n\"aud\"\n\n:\n\n\"api.coze.cn\"\n\n,\n\n// 扣子 API 的 Endpoint\n\n​\n\n\"iat\"\n\n:\n\n1516239022\n\n,\n\n// JWT 开始生效的时间，秒级时间戳\n\n​\n\n\"exp\"\n\n:\n\n1516259022\n\n,\n\n// JWT 过期时间，秒级时间戳\n\n​\n\n\"jti\"\n\n:\n\n\"fhjashjgkhalskj\"\n\n,\n\n// 随机字符串，防止重放攻击\n\n​\n\n\"session_context\"\n\n:\n\n{\n\n​\n\n\"device_info\"\n\n:\n\n{\n\n​\n\n\"device_id\"\n\n:\n\n\"1234567890\"\n\n// IoT 等硬件设备的唯一标识 ID\n\n​\n\n}\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n示例代码\n\n​\n\n你可以直接参考以下示例代码签署 JWT。\n\n​\n\n​\n\nPython\n\n复制\n\n# You must run `\n\npip install PyJWT cryptography\n\n` to install the PyJWT and the cryptography packages in order to use this script.\n\n​\n\n​\n\n#!/usr/bin/env python3\n\n​\n\nimport\n\nsys\n\n​\n\nimport\n\ntime\n\n​\n\nimport\n\nuuid\n\n​\n\n​\n\nimport\n\njwt\n\n​\n\n​\n\n# 替换为你的实际 Coze App 私钥\n\n​\n\nsigning_key =\n\n'''\n\n​\n\n-----BEGIN PRIVATE KEY-----\n\n​\n\nxxxxxxxxxxxxxxxxxx\n\n​\n\n-----END PRIVATE KEY-----\n\n​\n\n'''\n\n​\n\n​\n\npayload = {\n\n​\n\n'iat'\n\n:\n\nint\n\n(time.time()),\n\n​\n\n'exp'\n\n:\n\nint\n\n(time.time()) +\n\n600\n\n,\n\n​\n\n\"jti\"\n\n:\n\nstr\n\n(uuid.uuid4()),\n\n​\n\n'aud'\n\n:\n\n'api.coze.cn'\n\n,\n\n# 替换为实际的coze api domain\n\n​\n\n'iss'\n\n:\n\n'1127900106117'\n\n# 替换为你的实际 Coze App ID\n\n​\n\n}\n\n​\n\n​\n\nheaders = {\n\n​\n\n'kid'\n\n:\n\n'_v0VjcMlLdQc3tRTD3jC5Xz29TUnKQOhtuD5k-gpyf4'\n\n# 替换为你的实际 Coze App 公钥指纹\n\n​\n\n}\n\n​\n\n​\n\n# Create JWT with headers\n\n​\n\nencoded_jwt = jwt.encode(payload, signing_key, algorithm=\n\n'RS256'\n\n, headers=headers)\n\n​\n\n​\n\nprint\n\n(\n\nf\"JWT:\n\n{encoded_jwt}\n\n\"\n\n)\n\n​\n\n​\n\n最终生成的 JWT 示例如下：\n\n​\n\n​\n\nPlain Text\n\n复制\n\neyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6InZZd2ZsdFR1OWZBbWtwWFhSdnR5UmREc3RONVMzZWNFcDFqVzB6dVQyRE****.eyJpc3MiOiIzMTAwMDAwMDAwMDIiLCJhdWQiOiJhcGkuY296ZS5jb20iLCJpYXQiOjE1MTYyMzkwMjIsImV4cCI6MTkxNjI1OTAyMiwianRpIjoiZmhqaGFsc2tqZmFkc2pld3F****.CuoiCCF-nHFyGmu2EKlwFoyd3uDyKQ3Drc1CrXQyMVySTzZlZd2M7zKWsziB3AktwbUZiRJlQ1HbghR05CW2YRHwKL4-dlJ4koR3onU7iQAO5DkPCaIxbAuTsQobtCAdkkZTg8gav9EnN1QN_1xq0w8BzuuhS7wCeY8UbaskkTK9GnO4eU9tEINmVw-2CrfB-kNbEHlEDwXfcrb4YPpkw3GhmuPShenNLObfSWS0CqIyakXL8qD5AgXLoB-SejAsRdzloSUInNXENJHfSVMkThxRhJy7yEjX3BmculC54fMKENRfLElBqwJyLLUjeRHsYnaru2ca4W8_yaPJ7F***\n\n*\n\n​\n\n​\n\n2 获取访问令牌\n\n​\n\n应用程序调用\n\n​\n\nAPI：通过 JWT 获取 Oauth Access Token\n\nAPI ，请求 Header 中携带 JWT，\n\n扣子\n\n服务端会在响应中通过  access_token 字段返回访问令牌。\n\n​\n\n请求示例如下：\n\n​\n\n​\n\nShell\n\n复制\n\ncurl --location --request POST 'https://api.coze.cn/api/permission/oauth2/token' \\\n\n​\n\n--header 'Content-Type: application/json' \\\n\n​\n\n--header 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6InZZd2ZsdFR1OWZBbWtwWFhSdnR5UmREc3RONVMzZWNFcDFqVzB6dVQyRE****.eyJpc3MiOiIzMTAwMDAwMDAwMDIiLCJhdWQiOiJhcGkuY296ZS5jb20iLCJpYXQiOjE1MTYyMzkwMjIsImV4cCI6MTkxNjI1OTAyMiwianRpIjoiZmhqaGFsc2tqZmFkc2pld3F****.CuoiCCF-nHFyGmu2EKlwFoyd3uDyKQ3Drc1CrXQyMVySTzZlZd2M7zKWsziB3AktwbUZiRJlQ1HbghR05CW2YRHwKL4-dlJ4koR3onU7iQAO5DkPCaIxbAuTsQobtCAdkkZTg8gav9EnN1QN_1xq0w8BzuuhS7wCeY8UbaskkTK9GnO4eU9tEINmVw-2CrfB-kNbEHlEDwXfcrb4YPpkw3GhmuPShenNLObfSWS0CqIyakXL8qD5AgXLoB-SejAsRdzloSUInNXENJHfSVMkThxRhJy7yEjX3BmculC54fMKENRfLElBqwJyLLUjeRHsYnaru2ca4W8_yaPJ7F****' \\\n\n​\n\n--data '{\n\n​\n\n\"duration_seconds\": 86399,\n\n​\n\n\"grant_type\": \"urn:ietf:params:oauth:grant-type:jwt-bearer\"\n\n​\n\n}'\n\n​\n\n​\n\n返回示例如下：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"access_token\"\n\n:\n\n\"czs_RQOhsc7vmUzK4bNgb7hn4wqOgRBYAO6xvpFHNbnl6RiQJX3cSXSguIhFDzgy****\"\n\n,\n\n​\n\n\"expires_in\"\n\n:\n\n1721135859\n\n​\n\n}\n\n​\n\n​\n\n后续操作\n\n​\n\n在 API 请求头中通过\n\nAuthorization=Bearer\n\n$Access_Token\n\n指定访问令牌，发起\n\n扣子\n\nAPI 请求。每个接口对应的权限点不同。\n\n​\n\n以\n\n​\n\n获取已发布智能体的配置（即将下线）\n\nAPI 为例，完整的 API 请求如下：\n\n​\n\n​\n\nShell\n\n复制\n\ncurl --location --request GET 'https://api.coze.cn/v1/bot/get_online_info?bot_id=123123123' \\\n\n​\n\n--header 'Authorization: Bearer czu_UEE2mJn66h0fMHxLCVv9uQ7HAoNNS8DmF6N6grjWmkHX2jPm8SR0tJcKop8v****' \\\n\n​\n\n​\n\nAPI：通过 JWT 获取 Oauth Access Token\n\n​\n\n通过 JWT 获取 Oauth Access Token。\n\n​\n\n说明\n\nJWT 仅能使用一次，如需再次申请 OAuth Access Token，必须重新生成一个 JWT。\n\n​\n\nOAuth Access Token 的有效期默认为 15 分钟，不支持刷新。如需获取新的 Access Token，你需要再次生成一个 JWT，并调用此接口。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n​\n\n请求地址\n\n​\n\nhttps://api.coze.cn/api/permission/oauth2/token\n\n​\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n请求正文的方式。\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$JWT\n\n​\n\n使用应用的客户端私钥签署的 JWT。生成方式可参考\n\n​\n\n1 签署 JWT\n\n。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n字段\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\ngrant_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\nurn:ietf:params:oauth:grant-type:jwt-bearer\n\n。\n\n​\n\nduration_seconds\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n申请的 AccessToken 有效期，单位为秒，默认 900 秒，即 15 分钟。最大可设置为 86399 秒，即 24 小时。\n\n​\n\nscope\n\n​\n\nScope object\n\n​\n\n可选\n\n​\n\n指定渠道侧申请的 OAuth Access Token 的操作权限，例如渠道服务端使用此令牌调用 OpenAPI 时只能和智能体 A 对话，不能执行其他操作。\n\n​\n\n说明\n\n仅在渠道侧调用此接口时生效。配置渠道入驻的方式可参考\n\n​\n\n渠道入驻概述\n\n。\n\n​\n\n如果不指定 scope，表示渠道能调用授权的所有权限。\n\n​\n\n​\n\n​\n\nScope object\n\n​\n\n​\n\n字段\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\naccount_permission\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n指定 OAuth Access Token 的操作权限。\n\n​\n\naccount_permission.permission_list\n\n​\n\nArray of String\n\n​\n\n必选\n\n​\n\nOAuth Access Token 的权限点列表。字符串列表格式，例如\n\n[\"Connector.botChat\"]\n\n表示\n\nchat\n\n权限。\n\n​\n\nattribute_constraint\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n指定 OAuth Access Token 的权限限制。\n\n​\n\nattribute_constraint.connector_bot_chat_attribute\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n指定 OAuth Access Token 允许访问的智能体范围，此智能体必须已发布为 API 服务。\n\n​\n\nattribute_constraint.connector_bot_chat_attribute.bot_id_list\n\n​\n\nArray of String\n\n​\n\n必选\n\n​\n\n允许访问的智能体列表，例如\n\n[\"bot_id_1\", \"bot_id_2\"]\n\n表示 OAuth Access Token 仅对 ID 为 1 或 2 的智能体有访问权限。\n\n​\n\n​\n\n比如，申请 AccessToken，限制只允许和 bot1聊天，scope 应指定为：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"account_permission\"\n\n:\n\n{\n\n​\n\n\"permission_list\"\n\n:\n\n[\n\n\"Connector.botChat\"\n\n]\n\n​\n\n},\n\n​\n\n\"attribute_constraint\"\n\n:\n\n{\n\n​\n\n\"connector_bot_chat_attribute\"\n\n:\n\n{\n\n​\n\n\"bot_id_list\"\n\n:\n\n[\n\n\"bot1\"\n\n]\n\n​\n\n}\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n返回结果\n\n​\n\n​\n\n字段\n\n​\n\n类型\n\n​\n\n说明\n\n​\n\naccess_token\n\n​\n\nString\n\n​\n\nOAuth Access Token。\n\n​\n\nexpires_in\n\n​\n\nInteger\n\n​\n\nOAuth Access Token 的过期时间，Unixtime 时间戳格式，精度为秒。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nShell\n\n复制\n\ncurl --location 'https://api.coze.cn/api/permission/oauth2/token' \\\n\n​\n\n--header 'Content-Type: application/json' \\\n\n​\n\n--header 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6InZZd2ZsdFR1OWZBbWtwWFhSdnR5UmREc3RONVMzZWNFcDFqVzB6dVQyRE****.eyJpc3MiOiIzMTAwMDAwMDAwMDIiLCJhdWQiOiJhcGkuY296ZS5jb20iLCJpYXQiOjE1MTYyMzkwMjIsImV4cCI6MTkxNjI1OTAyMiwianRpIjoiZmhqaGFsc2tqZmFkc2pld3F****.CuoiCCF-nHFyGmu2EKlwFoyd3uDyKQ3Drc1CrXQyMVySTzZlZd2M7zKWsziB3AktwbUZiRJlQ1HbghR05CW2YRHwKL4-dlJ4koR3onU7iQAO5DkPCaIxbAuTsQobtCAdkkZTg8gav9EnN1QN_1xq0w8BzuuhS7wCeY8UbaskkTK9GnO4eU9tEINmVw-2CrfB-kNbEHlEDwXfcrb4YPpkw3GhmuPShenNLObfSWS0CqIyakXL8qD5AgXLoB-SejAsRdzloSUInNXENJHfSVMkThxRhJy7yEjX3BmculC54fMKENRfLElBqwJyLLUjeRHsYnaru2ca4W8_yaPJ7F****' \\\n\n​\n\n--data '{\n\n​\n\n\"duration_seconds\": 86399,\n\n​\n\n\"grant_type\": \"urn:ietf:params:oauth:grant-type:jwt-bearer\"\n\n​\n\n}'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"access_token\"\n\n:\n\n\"czs_RQOhsc7vmUzK4bNgb7hn4wqOgRBYAO6xvpFHNbnl6RiQJX3cSXSguIhFDzgy****\"\n\n,\n\n​\n\n\"expires_in\"\n\n:\n\n1721135859\n\n​\n\n}\n\n​\n\n​\n\n错误码\n\n​\n\n​\n\nerror_code\n\n​\n\nerror_message\n\n​\n\n说明\n\n​\n\ninvalid_request\n\n​\n\ninvalid request: {parameter}\n\n​\n\n​\n\n原因：请求参数 {parameter} 错误。\n\n​\n\n解决方案：请参考 API 文档查看参数说明。\n\n​\n\ninvalid_client\n\n​\n\n/\n\n​\n\n原因：客户端凭证（JWT Token 或者 Client Secret）无效。\n\n​\n\n解决方案：请校验您的客户端凭证。\n\n​\n\nunsupported_grant_type\n\n​\n\nnot supported grant type: {grant type}\n\n​\n\n原因：不支持的授权类型 {grant type}。\n\n​\n\n解决方案：请参考 API 文档指定正确的授权类型。\n\n​\n\naccess_deny\n\n​\n\napp: {app name} is currently deactivated by the owner\n\n​\n\n原因：OAuth 应用已被禁用。\n\n​\n\n解决方案：在\n\n扣子\n\n编程中启用 OAuth 应用。\n\n​\n\n​\n\ninvalid app type\n\n​\n\n原因：应用类型错误。\n\n​\n\n解决方案：渠道应用暂不支持授权码模式。\n\n​\n\n​\n\nlogin session invalid\n\n​\n\n原因：登录态无效。\n\n​\n\n解决方案：用户需要重新登录\n\n扣子\n\n编程。\n\n​\n\ninternal_error\n\n​\n\nService internal error.\n\n​\n\n原因：服务内部错误。\n\n​\n\n解决方案：建议稍后重试。\n\n​\n\n​\n\n​\n\n​\n\n常见问题\n\n​\n\n如何处理 JWT 授权时，提示\"connector app should bind connector id\"？\n\n​\n\n进行 OAuth JWT 授权时，提示\"connector app should bind connector id\"，该报错是由于未正确绑定 OAuth 应用到相应的发布渠道，导致授权失败。你需要在创建自定义发布渠道时，绑定渠道类型的 OAuth 应用，具体请操作参见\n\n​\n\n配置渠道入驻（账号隔离）\n\n。\n\n​\n\n1.\n\n在扣子编程左下角单击头像，选择\n\n账号设置\n\n。\n\n​\n\n2.\n\n在左侧导航栏选择\n\n发布渠道\n\n，在\n\n企业自定义渠道管理\n\n页面，单击目标渠道操作列中的\n\n更多\n\n图标，选择\n\n编辑\n\n。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n上一篇\n\nOAuth JWT 授权（开发者）\n\n下一篇\n\nOAuth JWT 授权（跨账号授权场景）",
        "links": []
      },
      "markdown": "| Python​ | Node.js​ | Java​ | Go​ |\n| examples/auth_oauth_jwt.py​ | auth/auth-oauth-jwt.ts​auth/auth-oauth-jwt-channel.ts​ | JWTsOauthExample.java​ | jwt_example.go​ |\n\n\n\n\n\n\n- ​ 配置 ​ 说明 ​ 应用类型 ​ 应用的类型，此处应指定为 渠道 。 ​ 客户端类型 ​ 客户端类型，此处设置为 服务类应用 。 ​ 应用名称 ​ 应用的名称，在 扣子 编程中全局唯一。 ​ 描述 ​ 应用的基本描述信息。 ​ ​\n\n| 配置​ | 说明​ |\n| 应用类型​ | 应用的类型，此处应指定为渠道。​ |\n| 客户端类型​ | 客户端类型，此处设置为服务类应用。​ |\n| 应用名称​ | 应用的名称，在扣子编程中全局唯一。​ |\n| 描述​ | 应用的基本描述信息。​ |\n\n\n- ​ 配置 ​ 说明 ​ 公钥和私钥 ​ 用于应用程序客户端身份认证的非对称密钥。 ​ 单击 创建 Key ，页面将自动创建一对公钥和私钥，公钥自动配置在扣子编程中，私钥以 private_key.pem 文件格式由网页自动下载至本地 Downloads 目录下。支持创建最多三对公钥和私钥。 ​ 建议将 private_key.pem 文件安全地存储在只有您的应用可以访问的位置。 ​ 扣子编程使用符合行业标准的 WebCrypto 加密标准，在浏览器前端创建非对称密钥，密钥强度符合行业标准。扣子编程任何时候都不会上传私钥到后端。请您放心使用。 ​ 权限 ​ 应用程序调用扣子 API 时需要的权限范围。不同层级权限的生效范围请参见 ​ 权限层级 。 ​ 说明 此处配置旨在于划定应用的权限范围，并未完成授权操作。创建 OAuth 应用后还需要参考后续操作完成授权。 ​ ​\n\n| 配置​ | 说明​ |\n| 公钥和私钥​ | 用于应用程序客户端身份认证的非对称密钥。​单击创建 Key，页面将自动创建一对公钥和私钥，公钥自动配置在扣子编程中，私钥以private_key.pem文件格式由网页自动下载至本地Downloads目录下。支持创建最多三对公钥和私钥。​建议将private_key.pem文件安全地存储在只有您的应用可以访问的位置。​扣子编程使用符合行业标准的 WebCrypto 加密标准，在浏览器前端创建非对称密钥，密钥强度符合行业标准。扣子编程任何时候都不会上传私钥到后端。请您放心使用。​ |\n| 权限​ | 应用程序调用扣子 API 时需要的权限范围。不同层级权限的生效范围请参见​权限层级。​说明此处配置旨在于划定应用的权限范围，并未完成授权操作。创建 OAuth 应用后还需要参考后续操作完成授权。​ |\n\n- 建议将 private_key.pem 文件安全地存储在只有您的应用可以访问的位置。 ​\n\n- 扣子编程使用符合行业标准的 WebCrypto 加密标准，在浏览器前端创建非对称密钥，密钥强度符合行业标准。扣子编程任何时候都不会上传私钥到后端。请您放心使用。 ​\n\n\n\n- 授权后，此 OAuth 应用生成的 OAuth Access Token 将具备 OAuth 应用指定的操作权限，例如调用查看智能体信息等 OpenAPI。后续还需要为应用绑定自定义发布渠道，此 OAuth Access Token 将具备所有发布到这个渠道中的智能体的操作权限，例如调用查看智能体信息 API 接口，查看指定智能体的信息。 ​\n\n\n\n\n- 授权页将显示应用名称、权限列表等重要信息，请务必认真核对信息，确认无误后单击 授权 。 ​\n\n\n\n\n- Header ​\n\n- Header 部分的参数定义如下： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ alg ​ String ​ 必选 ​ 签名使用的加密算法。固定为 RS256，即非对称加密算法，一种基于 RSA（非对称加密算法）+ SHA256（安全哈希函数）的签名算法，该算法使用私钥进行签名，公钥进行验证。 ​ typ ​ String ​ 必选 ​ 固定为 JWT。 ​ kid ​ String ​ 必选 ​ OAuth 应用的 公钥指纹 ，可以在 OAuth 应用 页面找到这个应用，在 操作 列单击编辑图标，进入 配置 页面查看公钥指纹。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| alg​ | String​ | 必选​ | 签名使用的加密算法。固定为 RS256，即非对称加密算法，一种基于 RSA（非对称加密算法）+ SHA256（安全哈希函数）的签名算法，该算法使用私钥进行签名，公钥进行验证。​ |\n| typ​ | String​ | 必选​ | 固定为 JWT。​ |\n| kid​ | String​ | 必选​ | OAuth 应用的公钥指纹，可以在OAuth 应用页面找到这个应用，在操作列单击编辑图标，进入配置页面查看公钥指纹。​ |\n\n- Header 示例如下： ​\n\n- ​ JSON 复制 { ​ \"alg\" : \"RS256\" , // 固定为RS256 ​ \"typ\" : \"JWT\" , // 固定为 JWT ​ \"kid\" : \"gdehvaDegW.....\" // OAuth 应用的公钥指纹 ​ } ​ ​\n\n- Payload： ​\n\n- Payload 部分的参数定义如下： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ iss ​ String ​ 必选 ​ OAuth 应用的 ID，可以在 OAuth 应用 页面查看。 ​ aud ​ String ​ 必选 ​ 扣子 API 的 Endpoint，即 api.coze.cn 。 ​ iat ​ Integer ​ 必选 ​ JWT 开始生效的时间，Unixtime 时间戳格式，精确到秒。一般为当前时刻。 ​ exp ​ Integer ​ 必选 ​ JWT 过期的时间，Unixtime 时间戳格式，精确到秒。必须晚于 iat。 ​ jti ​ String ​ 必选 ​ 随机字符串，用于防止重放攻击。建议长度大于 32 字节。每次签署 JWT 时应指定为不同的字符串。 ​ session_name ​ String ​ 可选 ​ 访问令牌的会话标识。目前仅限在会话隔离场景下使用，即将 session_name 指定为用户在业务侧的 UID，以此区分不同业务侧用户的对话历史。 ​ 若未指定 session_name，不同用户的对话历史可能会掺杂在一起。 ​ session_context ​ Object ​ 可选 ​ 会话上下文信息，包含设备相关信息等。 ​ ​ session_context.device_info ​ Object ​ 可选 ​ 用于配置设备相关信息，扣子编程基于该部分信息对设备做用量管控以及账单记录。 ​ 说明 仅扣子企业旗舰版支持该参数。硬件设备用量管控的具体操作可参考 ​ 终端用户用量查询和配额管控 ​ ​ session_context.device_info.device_id ​ String ​ 可选 ​ IoT 等硬件设备 ID，一个设备对应一个唯一的设备号。 ​ 当需要记录设备用量或对设备用量进行管控时，需要填写该参数，否则，无法对设备进行用量管控，用量统计页面对应的设备 ID 将显示为 N/A。 ​ session_context.device_info.custom_consumer ​ ​ String ​ 可选 ​ 自定义维度的实体 ID，你可以根据业务需要进行设置，例如 APP 上的用户名等。 ​ 当需要记录设备用量或对设备用量进行管控，需要填写该参数，否则，无法对设备进行用量管控，用量统计页面对应的自定义 ID 将显示为 N/A。 ​ 说明 device_id 和 custom_consumer 建议选择其中一个即可。 ​ custom_consumer 参数用于设备用量管控，与对话等 API 传入的 user_id 无关， user_id 主要用于上下文、数据库隔离等场景。 ​ 出于数据隐私及信息安全等方面的考虑，不建议使用业务系统中定义的用户敏感标识（如手机号等）作为 custom_consumer 的值。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| iss​ | String​ | 必选​ | OAuth 应用的 ID，可以在OAuth 应用页面查看。​ |\n| aud​ | String​ | 必选​ | 扣子 API 的 Endpoint，即api.coze.cn。​ |\n| iat​ | Integer​ | 必选​ | JWT 开始生效的时间，Unixtime 时间戳格式，精确到秒。一般为当前时刻。​ |\n| exp​ | Integer​ | 必选​ | JWT 过期的时间，Unixtime 时间戳格式，精确到秒。必须晚于 iat。​ |\n| jti​ | String​ | 必选​ | 随机字符串，用于防止重放攻击。建议长度大于 32 字节。每次签署 JWT 时应指定为不同的字符串。​ |\n| session_name​ | String​ | 可选​ | 访问令牌的会话标识。目前仅限在会话隔离场景下使用，即将 session_name 指定为用户在业务侧的 UID，以此区分不同业务侧用户的对话历史。​若未指定 session_name，不同用户的对话历史可能会掺杂在一起。​ |\n| session_context​ | Object​ | 可选​ | 会话上下文信息，包含设备相关信息等。​​ |\n| session_context.device_info​ | Object​ | 可选​ | 用于配置设备相关信息，扣子编程基于该部分信息对设备做用量管控以及账单记录。​说明仅扣子企业旗舰版支持该参数。硬件设备用量管控的具体操作可参考​终端用户用量查询和配额管控​​ |\n| session_context.device_info.device_id​ | String​ | 可选​ | IoT 等硬件设备 ID，一个设备对应一个唯一的设备号。​当需要记录设备用量或对设备用量进行管控时，需要填写该参数，否则，无法对设备进行用量管控，用量统计页面对应的设备 ID 将显示为 N/A。​ |\n| session_context.device_info.custom_consumer​​ | String​ | 可选​ | 自定义维度的实体 ID，你可以根据业务需要进行设置，例如 APP 上的用户名等。​当需要记录设备用量或对设备用量进行管控，需要填写该参数，否则，无法对设备进行用量管控，用量统计页面对应的自定义 ID 将显示为 N/A。​说明device_id和custom_consumer建议选择其中一个即可。​custom_consumer参数用于设备用量管控，与对话等 API 传入的user_id无关，user_id主要用于上下文、数据库隔离等场景。​出于数据隐私及信息安全等方面的考虑，不建议使用业务系统中定义的用户敏感标识（如手机号等）作为custom_consumer的值。​ |\n\n- device_id 和 custom_consumer 建议选择其中一个即可。 ​\n\n- custom_consumer 参数用于设备用量管控，与对话等 API 传入的 user_id 无关， user_id 主要用于上下文、数据库隔离等场景。 ​\n\n- 出于数据隐私及信息安全等方面的考虑，不建议使用业务系统中定义的用户敏感标识（如手机号等）作为 custom_consumer 的值。\n\n- Payload 示例如下： ​\n\n- ​ JSON 复制 { ​ \"iss\" : \"310000000002\" , // OAuth 应用的 ID ​ \"aud\" : \"api.coze.cn\" , // 扣子 API 的 Endpoint ​ \"iat\" : 1516239022 , // JWT 开始生效的时间，秒级时间戳 ​ \"exp\" : 1516259022 , // JWT 过期时间，秒级时间戳 ​ \"jti\" : \"fhjashjgkhalskj\" , // 随机字符串，防止重放攻击 ​ \"session_context\" : { ​ \"device_info\" : { ​ \"device_id\" : \"1234567890\" // IoT 等硬件设备的唯一标识 ID ​ } ​ } ​ } ​ ​\n\n- JWT 仅能使用一次，如需再次申请 OAuth Access Token，必须重新生成一个 JWT。 ​\n\n- OAuth Access Token 的有效期默认为 15 分钟，不支持刷新。如需获取新的 Access Token，你需要再次生成一个 JWT，并调用此接口。 ​\n\n| 请求方式​ | POST​ |\n| 请求地址​ | https://api.coze.cn/api/permission/oauth2/token​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Content-Type​ | application/json​ | 请求正文的方式。​ |\n| Authorization​ | Bearer$JWT​ | 使用应用的客户端私钥签署的 JWT。生成方式可参考​1 签署 JWT。​ |\n\n| 字段​ | 类型​ | 是否必选​ | 说明​ |\n| grant_type​ | String​ | 必选​ | 固定为urn:ietf:params:oauth:grant-type:jwt-bearer。​ |\n| duration_seconds​ | Integer​ | 可选​ | 申请的 AccessToken 有效期，单位为秒，默认 900 秒，即 15 分钟。最大可设置为 86399 秒，即 24 小时。​ |\n| scope​ | Scope object​ | 可选​ | 指定渠道侧申请的 OAuth Access Token 的操作权限，例如渠道服务端使用此令牌调用 OpenAPI 时只能和智能体 A 对话，不能执行其他操作。​说明仅在渠道侧调用此接口时生效。配置渠道入驻的方式可参考​渠道入驻概述。​如果不指定 scope，表示渠道能调用授权的所有权限。​​ |\n\n- 仅在渠道侧调用此接口时生效。配置渠道入驻的方式可参考 ​ 渠道入驻概述 。 ​\n\n- 如果不指定 scope，表示渠道能调用授权的所有权限。 ​\n\n| 字段​ | 类型​ | 是否必选​ | 说明​ |\n| account_permission​ | Object​ | 必选​ | 指定 OAuth Access Token 的操作权限。​ |\n| account_permission.permission_list​ | Array of String​ | 必选​ | OAuth Access Token 的权限点列表。字符串列表格式，例如[\"Connector.botChat\"]表示chat权限。​ |\n| attribute_constraint​ | Object​ | 必选​ | 指定 OAuth Access Token 的权限限制。​ |\n| attribute_constraint.connector_bot_chat_attribute​ | Object​ | 必选​ | 指定 OAuth Access Token 允许访问的智能体范围，此智能体必须已发布为 API 服务。​ |\n| attribute_constraint.connector_bot_chat_attribute.bot_id_list​ | Array of String​ | 必选​ | 允许访问的智能体列表，例如[\"bot_id_1\", \"bot_id_2\"]表示 OAuth Access Token 仅对 ID 为 1 或 2 的智能体有访问权限。​ |\n\n| 字段​ | 类型​ | 说明​ |\n| access_token​ | String​ | OAuth Access Token。​ |\n| expires_in​ | Integer​ | OAuth Access Token 的过期时间，Unixtime 时间戳格式，精度为秒。​ |\n\n| error_code​ | error_message​ | 说明​ |\n| invalid_request​ | invalid request: {parameter}​​ | 原因：请求参数 {parameter} 错误。​解决方案：请参考 API 文档查看参数说明。​ |\n| invalid_client​ | /​ | 原因：客户端凭证（JWT Token 或者 Client Secret）无效。​解决方案：请校验您的客户端凭证。​ |\n| unsupported_grant_type​ | not supported grant type: {grant type}​ | 原因：不支持的授权类型 {grant type}。​解决方案：请参考 API 文档指定正确的授权类型。​ |\n| access_deny​ | app: {app name} is currently deactivated by the owner​ | 原因：OAuth 应用已被禁用。​解决方案：在扣子编程中启用 OAuth 应用。​ |\n| ​ | invalid app type​ | 原因：应用类型错误。​解决方案：渠道应用暂不支持授权码模式。​ |\n| ​ | login session invalid​ | 原因：登录态无效。​解决方案：用户需要重新登录扣子编程。​ |\n| internal_error​ | Service internal error.​ | 原因：服务内部错误。​解决方案：建议稍后重试。​ |\n\n- 原因：请求参数 {parameter} 错误。 ​\n\n- 解决方案：请参考 API 文档查看参数说明。 ​\n\n- 原因：客户端凭证（JWT Token 或者 Client Secret）无效。 ​\n\n- 解决方案：请校验您的客户端凭证。 ​\n\n- 原因：不支持的授权类型 {grant type}。 ​\n\n- 解决方案：请参考 API 文档指定正确的授权类型。 ​\n\n- 原因：OAuth 应用已被禁用。 ​\n\n- 解决方案：在 扣子 编程中启用 OAuth 应用。 ​\n\n- 原因：应用类型错误。 ​\n\n- 解决方案：渠道应用暂不支持授权码模式。 ​\n\n- 原因：登录态无效。 ​\n\n- 解决方案：用户需要重新登录 扣子 编程。 ​\n\n- 原因：服务内部错误。 ​\n\n- 解决方案：建议稍后重试。 ​\n\n\n\n- ​ ​ ​ ​ ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/oauth_jwt_collaborate",
      "title": "OAuth JWT 授权（跨账号授权场景）",
      "content": {
        "sections": [],
        "full_text": "OAuth JWT 授权（跨账号授权场景）\n\n在多人协作的纯后端应用场景下，当你需要通过 OAuth JWT Flow 访问其他账号下的资源时，可参考本文完成 OAuth JWT 授权。授权完成后，OAuth 应用将被永久授予指定工作空间下所有资源的访问权限，并随时可以通过后端应用签发的 JWT 获取访问令牌，以后端应用的身份请求扣子 API。\n\n​\n\n说明\n\n在 OAuth 授权码授权、PKCE 授权、设备授权模式下，扣子编程也支持多人协作场景下跨账号的 OAuth 授权。详细说明可参考\n\n​\n\nOAuth 授权（多人协作场景）\n\n。\n\n​\n\n​\n\n授权场景\n\n​\n\n扣子个\n\n人版\n\n​\n\nJWT Access Token 默认仅具备本账号资源的访问权限，因此在多人跨账号协作场景中，还需完成跨账号授权。首先需要在本账号中创建 OAuth 应用，并将 OAuth 应用的授权链接分享给目标工作空间的所有者，由其确认待授予的权限范围。然后在调用\n\n​\n\n通过 JWT 获取 Oauth Access Token\n\n时，务必在 URL 中指定目标空间所有者的 UID。\n\n​\n\n例如扣子用户 A 需要访问某个工作空间中其他用户创建的资源，则可以将授权链接分享给工作空间所有者 B，所有者 B 选择工作空间并完成授权后，用户 A 可以访问指定工作空间中的所有资源。\n\n​\n\n扣子企业版\n\n​\n\nJWT Access Token 默认仅具备本组织资源的访问权限。如果要访问其他组织的资源，首先需要在本组织中创建 OAuth 应用,并将 OAuth 应用的授权链接分享给目标组织的超级管理员或管理员，由其确认待授予的权限范围。\n\n​\n\n示例项目源码\n\n​\n\n扣子编程提供 Python 等多语言 SDK，支持扣子编程的各种鉴权模式，你可以参考下表中的示例代码实现 OAuth JWT 授权流程。\n\n​\n\n​\n\nPython\n\n​\n\nNode.js\n\n​\n\nJava\n\n​\n\nGo\n\n​\n\nexamples/\n\nauth_oauth_jwt.py\n\n​\n\nauth/auth-oauth-jwt.ts\n\n​\n\nauth/auth-oauth-jwt-channel.ts\n\n​\n\nJWTsOauthExample.java\n\n​\n\njwt_example.go\n\n​\n\n​\n\n授权流程\n\n​\n\n授权流程如下：\n\n​\n\n1.\n\n在扣子编程创建 OAuth 应用并授权。\n\n​\n\n2.\n\n分享授权链接\n\n给目标对象\n\n，由其完成授权。\n\n​\n\n3.\n\n应用程序通过公钥和私钥签署 JWT。\n\n​\n\n4.\n\n通过 Token API 获取访问令牌。\n\n​\n\n5.\n\n应用程序根据访问令牌调用扣子 API。\n\n​\n\n1 创建 OAuth 应用并授权\n\n​\n\n开发者需要在扣子编程中创建 OAuth 应用，并为其配置相应的权限。\n\n​\n\n1.\n\n创建 OAuth 应用。\n\n​\n\na.\n\n登录\n\n扣子编程\n\n。\n\n​\n\nb.\n\n在左侧导航栏选择\n\nAPI & SDK。\n\n​\n\nc.\n\n在顶部单击\n\n授权\n\n>\n\nOAuth 应用\n\n页签。\n\n​\n\nd.\n\n在 OAuth 应用页面右上角单击\n\n创建新应用\n\n，填写应用的基本信息，并单击\n\n创建并继续\n\n。\n\n​\n\n​\n\n配置\n\n​\n\n说明\n\n​\n\n应用类型\n\n​\n\n应用的类型，此处应指定为\n\n普通\n\n。\n\n​\n\n客户端类型\n\n​\n\n客户端类型，此处设置为\n\n服务类应用\n\n。\n\n​\n\n应用名称\n\n​\n\n应用的名称，在扣子编程中全局唯一。\n\n​\n\n应用描述\n\n​\n\n应用的基本描述信息。\n\n​\n\n​\n\ne.\n\n填写应用的配置信息。\n\n​\n\n​\n\n配置\n\n​\n\n说明\n\n​\n\n公钥和私钥\n\n​\n\n用于应用程序客户端身份认证的非对称密钥。\n\n​\n\n单击\n\n创建 Key\n\n，页面将自动创建一对公钥和私钥，公钥自动配置在扣子编程中，私钥以\n\nprivate_key.pem\n\n文件格式由网页自动下载至本地。支持创建最多三对公钥和私钥。\n\n​\n\n建议将\n\nprivate_key.pem\n\n文件安全地存储在只有你的应用可以访问的位置。\n\n​\n\n扣子编程使用符合行业标准的 WebCrypto 加密标准，在浏览器前端创建非对称密钥，密钥强度符合行业标准。扣子编程任何时候都不会上传私钥到后端。请你放心使用。\n\n​\n\n权限\n\n​\n\n应用程序调用扣子 API 时需要的权限范围。不同层级权限的生效范围请参见\n\n​\n\n权限层级\n\n。\n\n​\n\n说明\n\n此处配置旨在于划定应用的权限范围，并未完成授权操作。创建 OAuth 应用后还需要参考后续操作完成授权。\n\n​\n\n​\n\n​\n\nf.\n\n单击\n\n确定\n\n，完成配置。\n\n​\n\n2.\n\n完成 OAuth 应用授权。\n\n​\n\n在弹出的\n\n安装并授权\n\n对话框中，请务必认真核对应用名称、权限列表等重要信息，确认无误后单击\n\n授权\n\n。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n2 分享授权链接并授权\n\n​\n\n将 OAuth 应用的授权链接分享给目标工作空间所有者\n\n，由其确认此 OAuth 应用访问自己资源的权限范围。\n\n​\n\n1.\n\n在\n\nOAuth 应用\n\n页面，找到你已创建的 OAuth 应用，单击\n\n分享应用的授权链接\n\n图标，复制授权链接。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n2.\n\n将授权链接分享给目标对象，此处假设为用户 B。\n\n​\n\n个人版：需分享给目标工作空间所有者。\n\n​\n\n企业版：需分享给目标组织的超级管理员或管理员。\n\n​\n\n3.\n\n用户 B 打开分享链接，选择授权的组织和空间范围，并确认权限范围后，单击\n\n授权\n\n。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n3 签署 JWT\n\n​\n\n扣子编程的\n\nJWT\n\n生成方式及部分参数定义沿用业界统一流程规范，但 JWT 中 Header 和 Payload 部分由扣子编程自行定义。\n\n​\n\n在\n\nJWT\n\n（JSON Web Tokens）的流程中，通常使用私钥来签署（sign）token。JWT 包含三部分，即 Header、Payload 和 signature，其中 header 和 payload 由参数拼接而成，signature 根据指定的签名算法和私钥对 Header 和 Payload 自动计算生成。三部分之间用点（.）分隔。详细的签署方式可参考\n\nJWT 官方文档\n\n。\n\n​\n\nHeader 和 Payload\n\n​\n\n扣子编程对 Header 和 Payload 的定义如下：\n\n​\n\nHeader\n\n​\n\nHeader 部分的参数定义如下：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nalg\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n签名使用的加密算法。固定为 RS256，即非对称加密算法，一种基于 RSA（非对称加密算法）+ SHA256（安全哈希函数）的签名算法，该算法使用私钥进行签名，公钥进行验证。\n\n​\n\ntyp\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为 JWT。\n\n​\n\nkid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nOAuth 应用的\n\n公钥指纹\n\n，可以在\n\nOAuth 应用\n\n页面找到这个应用，在\n\n操作\n\n列单击编辑图标，进入\n\n配置\n\n页面查看公钥指纹。\n\n​\n\n​\n\nHeader 示例如下：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"alg\"\n\n:\n\n\"RS256\"\n\n,\n\n// 固定为RS256\n\n​\n\n\"typ\"\n\n:\n\n\"JWT\"\n\n,\n\n// 固定为 JWT\n\n​\n\n\"kid\"\n\n:\n\n\"gdehvaDegW.....\"\n\n// OAuth 应用的公钥指纹\n\n​\n\n}\n\n​\n\n​\n\nPayload：\n\n​\n\nPayload 部分的参数定义如下：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\niss\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nOAuth 应用的 ID，可以在\n\nOAuth 应用\n\n页面查看。\n\n​\n\naud\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n扣子 API 的 Endpoint，即\n\napi.coze.cn\n\n。\n\n​\n\niat\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\nJWT 开始生效的时间，Unixtime 时间戳格式，精确到秒。一般为当前时刻。\n\n​\n\nexp\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\nJWT 过期的时间，Unixtime 时间戳格式，精确到秒。必须晚于 iat。\n\n​\n\njti\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n随机字符串，用于防止重放攻击。建议长度大于 32 字节。每次签署 JWT 时应指定为不同的字符串。\n\n​\n\nsession_name\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n访问令牌的会话标识。目前仅限在会话隔离场景下使用，即将 session_name 指定为用户在业务侧的 UID，以此区分不同业务侧用户的对话历史。\n\n​\n\n若未指定 session_name，不同用户的对话历史可能会掺杂在一起。\n\n​\n\nsession_context\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n会话上下文信息，包含设备相关信息等。\n\n​\n\n​\n\n​\n\nPayload 示例如下：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"iss\"\n\n:\n\n\"310000000002\"\n\n,\n\n// OAuth 应用的 I\n\nD\n\n​\n\n\"aud\"\n\n:\n\n\"api.coze.cn\"\n\n,\n\n//扣子 API 的Endpoin\n\nt\n\n​\n\n\"iat\"\n\n:\n\n1516239022\n\n,\n\n// JWT开始生效的时间，秒级时间\n\n戳\n\n​\n\n\"exp\"\n\n:\n\n1516259022\n\n,\n\n// JWT过期时间，秒级时间\n\n戳\n\n​\n\n\"jti\"\n\n:\n\n\"fhjashjgkhalskj\"\n\n// 随机字符串，防止重放攻\n\n击\n\n​\n\n}\n\n​\n\n​\n\n示例代码\n\n​\n\n你可以直接参考以下示例代码签署 JWT。\n\n​\n\n​\n\nPython\n\n复制\n\n# You must run `\n\npip install PyJWT cryptography\n\n` to install the PyJWT and the cryptography packages in order to use this script.\n\n​\n\n​\n\n#!/usr/bin/env python3\n\n​\n\nimport\n\nsys\n\n​\n\nimport\n\ntime\n\n​\n\nimport\n\nuuid\n\n​\n\n​\n\nimport\n\njwt\n\n​\n\n​\n\n# 替换为你的实际 Coze App 私钥\n\n​\n\nsigning_key =\n\n'''\n\n​\n\n-----BEGIN PRIVATE KEY-----\n\n​\n\nxxxxxxxxxxxxxxxxxx\n\n​\n\n-----END PRIVATE KEY-----\n\n​\n\n'''\n\n​\n\n​\n\npayload = {\n\n​\n\n'iat'\n\n:\n\nint\n\n(time.time()),\n\n​\n\n'exp'\n\n:\n\nint\n\n(time.time()) +\n\n600\n\n,\n\n​\n\n\"jti\"\n\n:\n\nstr\n\n(uuid.uuid4()),\n\n​\n\n'aud'\n\n:\n\n'api.coze.cn'\n\n,\n\n# 替换为实际的coze api domain\n\n​\n\n'iss'\n\n:\n\n'1127900106117'\n\n# 替换为你的实际 Coze App ID\n\n​\n\n}\n\n​\n\n​\n\nheaders = {\n\n​\n\n'kid'\n\n:\n\n'_v0VjcMlLdQc3tRTD3jC5Xz29TUnKQOhtuD5k-gpyf4'\n\n# 替换为你的实际 Coze App 公钥指纹\n\n​\n\n}\n\n​\n\n​\n\n# Create JWT with headers\n\n​\n\nencoded_jwt = jwt.encode(payload, signing_key, algorithm=\n\n'RS256'\n\n, headers=headers)\n\n​\n\n​\n\nprint\n\n(\n\nf\"JWT:\n\n{encoded_jwt}\n\n\"\n\n)\n\n​\n\n​\n\n最终生成的 JWT 示例如下：\n\n​\n\n​\n\nPlain Text\n\n复制\n\neyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6InZZd2ZsdFR1OWZBbWtwWFhSdnR5UmREc3RONVMzZWNFcDFqVzB6dVQyRE****.eyJpc3MiOiIzMTAwMDAwMDAwMDIiLCJhdWQiOiJhcGkuY296ZS5jb20iLCJpYXQiOjE1MTYyMzkwMjIsImV4cCI6MTkxNjI1OTAyMiwianRpIjoiZmhqaGFsc2tqZmFkc2pld3F****.CuoiCCF-nHFyGmu2EKlwFoyd3uDyKQ3Drc1CrXQyMVySTzZlZd2M7zKWsziB3AktwbUZiRJlQ1HbghR05CW2YRHwKL4-dlJ4koR3onU7iQAO5DkPCaIxbAuTsQobtCAdkkZTg8gav9EnN1QN_1xq0w8BzuuhS7wCeY8UbaskkTK9GnO4eU9tEINmVw-2CrfB-kNbEHlEDwXfcrb4YPpkw3GhmuPShenNLObfSWS0CqIyakXL8qD5AgXLoB-SejAsRdzloSUInNXENJHfSVMkThxRhJy7yEjX3BmculC54fMKENRfLElBqwJyLLUjeRHsYnaru2ca4W8_yaPJ7F***\n\n*\n\n​\n\n​\n\n4 获取访问令牌\n\n​\n\n应用程序调用 Token API 时，请求 Header 中将携带 JWT，扣子服务端会在响应中通过  access_token 字段返回访问令牌。Token API 的详细说明，请参考\n\n​\n\n通过 JWT 获取 Oauth Access Token\n\n。\n\n​\n\n说明\n\n跨账号授权场景中，申请 Access Token 的 URL 路径为\n\n/api/permission/oauth2/account/{account_id}/token\n\n。\n\n​\n\n扣子个人版：\n\n{account_id}\n\n为目标资源所属工作空间的所有者 UID。获取 UID 的具体步骤，请参考\n\n​\n\n获取资源所属工作空间的所有者 UID\n\n。\n\n​\n\n扣子企业版多组织场景：\n\n{account_id}\n\n为目标资源所属组织的组织 ID。组织超级管理员或管理员可以在\n\n组织设置\n\n页面查看对应的组织 ID。\n\n​\n\n​\n\n请求示例\n\n​\n\n​\n\nShell\n\n复制\n\ncurl --location --request POST 'https://\n\napi.coze.cn\n\n/api/permission/oauth2/account/292298289606****/token' \\\n\n​\n\n--header 'Content-Type: application/json' \\\n\n​\n\n--header 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6InZZd2ZsdFR1OWZBbWtwWFhSdnR5UmREc3RONVMzZWNFcDFqVzB6dVQyRE****.eyJpc3MiOiIzMTAwMDAwMDAwMDIiLCJhdWQiOiJhcGkuY296ZS5jb20iLCJpYXQiOjE1MTYyMzkwMjIsImV4cCI6MTkxNjI1OTAyMiwianRpIjoiZmhqaGFsc2tqZmFkc2pld3F****.CuoiCCF-nHFyGmu2EKlwFoyd3uDyKQ3Drc1CrXQyMVySTzZlZd2M7zKWsziB3AktwbUZiRJlQ1HbghR05CW2YRHwKL4-dlJ4koR3onU7iQAO5DkPCaIxbAuTsQobtCAdkkZTg8gav9EnN1QN_1xq0w8BzuuhS7wCeY8UbaskkTK9GnO4eU9tEINmVw-2CrfB-kNbEHlEDwXfcrb4YPpkw3GhmuPShenNLObfSWS0CqIyakXL8qD5AgXLoB-SejAsRdzloSUInNXENJHfSVMkThxRhJy7yEjX3BmculC54fMKENRfLElBqwJyLLUjeRHsYnaru2ca4W8_yaPJ7F****' \\\n\n​\n\n--data '{\n\n​\n\n\"duration_seconds\": 86399,\n\n​\n\n\"grant_type\": \"urn:ietf:params:oauth:grant-type:jwt-bearer\"\n\n​\n\n}'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nBash\n\n复制\n\n{\n\n​\n\n\"access_token\"\n\n:\n\n\"czs_RQOhsc7vmUzK4bNgb7hn4wqOgRBYAO6xvpFHNbnl6RiQJX3cSXSguIhFDzgy****\"\n\n,\n\n​\n\n\"expires_in\"\n\n: 1721135859\n\n​\n\n}\n\n​\n\n​\n\n5 发起扣子 API 请求\n\n​\n\n在 API 请求头中通过\n\nAuthorization=Bearer\n\n$Access_Token\n\n指定访问令牌，发起扣子 API 请求。每个接口对应的权限点不同。\n\n​\n\n以\n\n​\n\n查看智能体配置\n\nAPI 为例，完整的 API 请求如下：\n\n​\n\n​\n\nShell\n\n复制\n\ncurl --location --request GET 'https://api.coze.cn/v1/bots/73428668*****?is_published=true' \\\n\n​\n\n--header 'Authorization: Bearer czu_UEE2mJn66h0fMHxLCVv9uQ7HAoNNS8DmF6N6grjWmkHX2jPm8SR0tJcKop8v****' \\\n\n​\n\n​\n\n参考信息\n\n​\n\n获取资源所属工作空间的所有者 UID\n\n​\n\n通过 JWT 授权流程跨账号访问资源\n\n时\n\n，你需要先确认\n\n目标资源所属工作空间\n\n，再确认工作空间的所有者，并由其提供账号 UID。具体步骤如下：\n\n​\n\n1.\n\n确认待访问资源所属工作空间。\n\n​\n\n2.\n\n确认工作空间的所有者。\n\n​\n\na.\n\n登录扣子编程。\n\n​\n\nb.\n\n在页面左上角选择目标工作空间，展开空间下拉列表，选择\n\n当前空间设置\n\n，在顶部选择\n\n成员管理\n\n页签，查看工作空间所有者信息。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n3.\n\n工作空间所有者在扣子编程左下角单击头像，选择\n\n账号设置\n\n，查看账号的 UID。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n通过 JWT 获取 Oauth Access Token\n\n​\n\n通过 JWT 获取 OAuth Access Token。\n\n​\n\n说明\n\nJWT 仅能使用一次，如需再次申请 OAuth Access Token，必须重新生成一个 JWT。\n\n​\n\nOAuth Access Token 的有效期默认为 15 分钟，不支持刷新。如需获取新的 Access Token，你需要再次生成一个 JWT，并调用此接口。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n​\n\n请求地址\n\n​\n\nhttps://\n\napi.coze.cn\n\n/api/permission/\n\noauth2/\n\naccount/{account_id}\n\n/token\n\n​\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n请求正文的方式。\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$JWT\n\n​\n\n使用应用的客户端私钥签署的 JWT。生成方式可参考\n\n​\n\n2 签署 JWT\n\n。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\naccount_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n扣子个人版：\n\naccount_id\n\n为目标资源所属工作空间的所有者 UID。获取 UID 的具体步骤，请参考\n\n​\n\n获取资源所属工作空间的所有者 UID\n\n。\n\n​\n\n扣子企业版多组织场景：\n\naccount_id\n\n为目标资源所属组织的组织 ID。你可以在\n\n组织管理\n\n>\n\n组织设置\n\n页面查看对应的组织 ID。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n字段\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\ngrant_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\nurn:ietf:params:oauth:grant-type:jwt-bearer\n\n。\n\n​\n\nduration_seconds\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n申请的 AccessToken 有效期，单位为秒，默认 900 秒，即 15 分钟。最大可设置为 86399 秒，即 24 小时。\n\n​\n\n​\n\n返回结果\n\n​\n\n​\n\n字段\n\n​\n\n类型\n\n​\n\n说明\n\n​\n\naccess_token\n\n​\n\nString\n\n​\n\nOAuth Access Token。\n\n​\n\nexpires_in\n\n​\n\nInteger\n\n​\n\nOAuth Access Token 的过期时间，Unixtime 时间戳格式，精度为秒。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n申请 Token，并限制 Token 只能和 bot1 对话。\n\n​\n\n​\n\nShell\n\n复制\n\ncurl --location '\n\nhttps://\n\napi.coze.cn\n\n/api/permission/oauth2/account/292298289606****/token\n\n' \\\n\n​\n\n--header 'Content-Type: application/json' \\\n\n​\n\n--header 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6InZZd2ZsdFR1OWZBbWtwWFhSdnR5UmREc3RONVMzZWNFcDFqVzB6dVQyRE****.eyJpc3MiOiIzMTAwMDAwMDAwMDIiLCJhdWQiOiJhcGkuY296ZS5jb20iLCJpYXQiOjE1MTYyMzkwMjIsImV4cCI6MTkxNjI1OTAyMiwianRpIjoiZmhqaGFsc2tqZmFkc2pld3F****.CuoiCCF-nHFyGmu2EKlwFoyd3uDyKQ3Drc1CrXQyMVySTzZlZd2M7zKWsziB3AktwbUZiRJlQ1HbghR05CW2YRHwKL4-dlJ4koR3onU7iQAO5DkPCaIxbAuTsQobtCAdkkZTg8gav9EnN1QN_1xq0w8BzuuhS7wCeY8UbaskkTK9GnO4eU9tEINmVw-2CrfB-kNbEHlEDwXfcrb4YPpkw3GhmuPShenNLObfSWS0CqIyakXL8qD5AgXLoB-SejAsRdzloSUInNXENJHfSVMkThxRhJy7yEjX3BmculC54fMKENRfLElBqwJyLLUjeRHsYnaru2ca4W8_yaPJ7F****' \\\n\n​\n\n--data '{\n\n​\n\n\"duration_seconds\": 86399,\n\n​\n\n\"grant_type\": \"urn:ietf:params:oauth:grant-type:jwt-bearer\"\n\n​\n\n}'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"access_token\"\n\n:\n\n\"czs_RQOhsc7vmUzK4bNgb7hn4wqOgRBYAO6xvpFHNbnl6RiQJX3cSXSguIhFDzgy****\"\n\n,\n\n​\n\n\"expires_in\"\n\n:\n\n1721135859\n\n​\n\n}\n\n​\n\n​\n\n错误码\n\n​\n\n​\n\nerror_code\n\n​\n\nerror_message\n\n​\n\n说明\n\n​\n\ninvalid_request\n\n​\n\ninvalid request: {parameter}\n\n​\n\n​\n\n原因：请求参数 {parameter} 错误。\n\n​\n\n解决方案：请参考 API 文档查看参数说明。\n\n​\n\ninvalid_client\n\n​\n\n/\n\n​\n\n原因：客户端凭证（JWT Token 或者 Client Secret）无效。\n\n​\n\n解决方案：请校验您的客户端凭证。\n\n​\n\nunsupported_grant_type\n\n​\n\nnot supported grant type: {grant type}\n\n​\n\n原因：不支持的授权类型 {grant type}。\n\n​\n\n解决方案：请参考 API 文档指定正确的授权类型。\n\n​\n\naccess_deny\n\n​\n\napp: {app name} is currently deactivated by the owner\n\n​\n\n原因：OAuth 应用已被禁用。\n\n​\n\n解决方案：在\n\n扣子\n\n编程中启用 OAuth 应用。\n\n​\n\n​\n\ninvalid app type\n\n​\n\n原因：应用类型错误。\n\n​\n\n解决方案：渠道应用暂不支持授权码模式。\n\n​\n\n​\n\nlogin session invalid\n\n​\n\n原因：登录态无效。\n\n​\n\n解决方案：用户需要重新登录\n\n扣子\n\n编程。\n\n​\n\ninternal_error\n\n​\n\nService internal error.\n\n​\n\n原因：服务内部错误。\n\n​\n\n解决方案：建议稍后重试。\n\n​\n\n​\n\n​\n\n​\n\n上一篇\n\nOAuth JWT 授权（渠道场景）\n\n下一篇\n\nOAuth JWT 授权（企业特权应用）",
        "links": []
      },
      "markdown": "| Python​ | Node.js​ | Java​ | Go​ |\n| examples/auth_oauth_jwt.py​ | auth/auth-oauth-jwt.ts​auth/auth-oauth-jwt-channel.ts​ | JWTsOauthExample.java​ | jwt_example.go​ |\n\n\n\n\n\n\n\n\n\n\n\n- ​ 配置 ​ 说明 ​ 应用类型 ​ 应用的类型，此处应指定为 普通 。 ​ 客户端类型 ​ 客户端类型，此处设置为 服务类应用 。 ​ 应用名称 ​ 应用的名称，在扣子编程中全局唯一。 ​ 应用描述 ​ 应用的基本描述信息。 ​ ​\n\n| 配置​ | 说明​ |\n| 应用类型​ | 应用的类型，此处应指定为普通。​ |\n| 客户端类型​ | 客户端类型，此处设置为服务类应用。​ |\n| 应用名称​ | 应用的名称，在扣子编程中全局唯一。​ |\n| 应用描述​ | 应用的基本描述信息。​ |\n\n\n- ​ 配置 ​ 说明 ​ 公钥和私钥 ​ 用于应用程序客户端身份认证的非对称密钥。 ​ 单击 创建 Key ，页面将自动创建一对公钥和私钥，公钥自动配置在扣子编程中，私钥以 private_key.pem 文件格式由网页自动下载至本地。支持创建最多三对公钥和私钥。 ​ 建议将 private_key.pem 文件安全地存储在只有你的应用可以访问的位置。 ​ 扣子编程使用符合行业标准的 WebCrypto 加密标准，在浏览器前端创建非对称密钥，密钥强度符合行业标准。扣子编程任何时候都不会上传私钥到后端。请你放心使用。 ​ 权限 ​ 应用程序调用扣子 API 时需要的权限范围。不同层级权限的生效范围请参见 ​ 权限层级 。 ​ 说明 此处配置旨在于划定应用的权限范围，并未完成授权操作。创建 OAuth 应用后还需要参考后续操作完成授权。 ​ ​ ​\n\n| 配置​ | 说明​ |\n| 公钥和私钥​ | 用于应用程序客户端身份认证的非对称密钥。​单击创建 Key，页面将自动创建一对公钥和私钥，公钥自动配置在扣子编程中，私钥以private_key.pem文件格式由网页自动下载至本地。支持创建最多三对公钥和私钥。​建议将private_key.pem文件安全地存储在只有你的应用可以访问的位置。​扣子编程使用符合行业标准的 WebCrypto 加密标准，在浏览器前端创建非对称密钥，密钥强度符合行业标准。扣子编程任何时候都不会上传私钥到后端。请你放心使用。​ |\n| 权限​ | 应用程序调用扣子 API 时需要的权限范围。不同层级权限的生效范围请参见​权限层级。​说明此处配置旨在于划定应用的权限范围，并未完成授权操作。创建 OAuth 应用后还需要参考后续操作完成授权。​​ |\n\n- 建议将 private_key.pem 文件安全地存储在只有你的应用可以访问的位置。 ​\n\n- 扣子编程使用符合行业标准的 WebCrypto 加密标准，在浏览器前端创建非对称密钥，密钥强度符合行业标准。扣子编程任何时候都不会上传私钥到后端。请你放心使用。 ​\n\n\n\n- 在弹出的 安装并授权 对话框中，请务必认真核对应用名称、权限列表等重要信息，确认无误后单击 授权 。 ​\n\n- ​ ​ ​ ​ ​\n\n\n- ​ ​ ​ ​ ​\n\n\n- 个人版：需分享给目标工作空间所有者。 ​\n\n- 企业版：需分享给目标组织的超级管理员或管理员。 ​\n\n\n- ​ ​ ​ ​ ​\n\n- Header ​\n\n- Header 部分的参数定义如下： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ alg ​ String ​ 必选 ​ 签名使用的加密算法。固定为 RS256，即非对称加密算法，一种基于 RSA（非对称加密算法）+ SHA256（安全哈希函数）的签名算法，该算法使用私钥进行签名，公钥进行验证。 ​ typ ​ String ​ 必选 ​ 固定为 JWT。 ​ kid ​ String ​ 必选 ​ OAuth 应用的 公钥指纹 ，可以在 OAuth 应用 页面找到这个应用，在 操作 列单击编辑图标，进入 配置 页面查看公钥指纹。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| alg​ | String​ | 必选​ | 签名使用的加密算法。固定为 RS256，即非对称加密算法，一种基于 RSA（非对称加密算法）+ SHA256（安全哈希函数）的签名算法，该算法使用私钥进行签名，公钥进行验证。​ |\n| typ​ | String​ | 必选​ | 固定为 JWT。​ |\n| kid​ | String​ | 必选​ | OAuth 应用的公钥指纹，可以在OAuth 应用页面找到这个应用，在操作列单击编辑图标，进入配置页面查看公钥指纹。​ |\n\n- Header 示例如下： ​\n\n- ​ JSON 复制 { ​ \"alg\" : \"RS256\" , // 固定为RS256 ​ \"typ\" : \"JWT\" , // 固定为 JWT ​ \"kid\" : \"gdehvaDegW.....\" // OAuth 应用的公钥指纹 ​ } ​ ​\n\n- Payload： ​\n\n- Payload 部分的参数定义如下： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ iss ​ String ​ 必选 ​ OAuth 应用的 ID，可以在 OAuth 应用 页面查看。 ​ aud ​ String ​ 必选 ​ 扣子 API 的 Endpoint，即 api.coze.cn 。 ​ iat ​ Integer ​ 必选 ​ JWT 开始生效的时间，Unixtime 时间戳格式，精确到秒。一般为当前时刻。 ​ exp ​ Integer ​ 必选 ​ JWT 过期的时间，Unixtime 时间戳格式，精确到秒。必须晚于 iat。 ​ jti ​ String ​ 必选 ​ 随机字符串，用于防止重放攻击。建议长度大于 32 字节。每次签署 JWT 时应指定为不同的字符串。 ​ session_name ​ String ​ 可选 ​ 访问令牌的会话标识。目前仅限在会话隔离场景下使用，即将 session_name 指定为用户在业务侧的 UID，以此区分不同业务侧用户的对话历史。 ​ 若未指定 session_name，不同用户的对话历史可能会掺杂在一起。 ​ session_context ​ Object ​ 可选 ​ 会话上下文信息，包含设备相关信息等。 ​ ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| iss​ | String​ | 必选​ | OAuth 应用的 ID，可以在OAuth 应用页面查看。​ |\n| aud​ | String​ | 必选​ | 扣子 API 的 Endpoint，即api.coze.cn。​ |\n| iat​ | Integer​ | 必选​ | JWT 开始生效的时间，Unixtime 时间戳格式，精确到秒。一般为当前时刻。​ |\n| exp​ | Integer​ | 必选​ | JWT 过期的时间，Unixtime 时间戳格式，精确到秒。必须晚于 iat。​ |\n| jti​ | String​ | 必选​ | 随机字符串，用于防止重放攻击。建议长度大于 32 字节。每次签署 JWT 时应指定为不同的字符串。​ |\n| session_name​ | String​ | 可选​ | 访问令牌的会话标识。目前仅限在会话隔离场景下使用，即将 session_name 指定为用户在业务侧的 UID，以此区分不同业务侧用户的对话历史。​若未指定 session_name，不同用户的对话历史可能会掺杂在一起。​ |\n| session_context​ | Object​ | 可选​ | 会话上下文信息，包含设备相关信息等。​​ |\n\n- Payload 示例如下： ​\n\n- ​ JSON 复制 { ​ \"iss\" : \"310000000002\" , // OAuth 应用的 I D ​ \"aud\" : \"api.coze.cn\" , //扣子 API 的Endpoin t ​ \"iat\" : 1516239022 , // JWT开始生效的时间，秒级时间 戳 ​ \"exp\" : 1516259022 , // JWT过期时间，秒级时间 戳 ​ \"jti\" : \"fhjashjgkhalskj\" // 随机字符串，防止重放攻 击 ​ } ​ ​\n\n- 扣子个人版： {account_id} 为目标资源所属工作空间的所有者 UID。获取 UID 的具体步骤，请参考 ​ 获取资源所属工作空间的所有者 UID 。 ​\n\n- 扣子企业版多组织场景： {account_id} 为目标资源所属组织的组织 ID。组织超级管理员或管理员可以在 组织设置 页面查看对应的组织 ID。 ​\n\n- 请求示例 ​\n\n- ​ Shell 复制 curl --location --request POST 'https:// api.coze.cn /api/permission/oauth2/account/292298289606****/token' \\ ​ --header 'Content-Type: application/json' \\ ​ --header 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6InZZd2ZsdFR1OWZBbWtwWFhSdnR5UmREc3RONVMzZWNFcDFqVzB6dVQyRE****.eyJpc3MiOiIzMTAwMDAwMDAwMDIiLCJhdWQiOiJhcGkuY296ZS5jb20iLCJpYXQiOjE1MTYyMzkwMjIsImV4cCI6MTkxNjI1OTAyMiwianRpIjoiZmhqaGFsc2tqZmFkc2pld3F****.CuoiCCF-nHFyGmu2EKlwFoyd3uDyKQ3Drc1CrXQyMVySTzZlZd2M7zKWsziB3AktwbUZiRJlQ1HbghR05CW2YRHwKL4-dlJ4koR3onU7iQAO5DkPCaIxbAuTsQobtCAdkkZTg8gav9EnN1QN_1xq0w8BzuuhS7wCeY8UbaskkTK9GnO4eU9tEINmVw-2CrfB-kNbEHlEDwXfcrb4YPpkw3GhmuPShenNLObfSWS0CqIyakXL8qD5AgXLoB-SejAsRdzloSUInNXENJHfSVMkThxRhJy7yEjX3BmculC54fMKENRfLElBqwJyLLUjeRHsYnaru2ca4W8_yaPJ7F****' \\ ​ --data '{ ​ \"duration_seconds\": 86399, ​ \"grant_type\": \"urn:ietf:params:oauth:grant-type:jwt-bearer\" ​ }' ​ ​\n\n- 返回示例 ​\n\n- ​ Bash 复制 { ​ \"access_token\" : \"czs_RQOhsc7vmUzK4bNgb7hn4wqOgRBYAO6xvpFHNbnl6RiQJX3cSXSguIhFDzgy****\" , ​ \"expires_in\" : 1721135859 ​ } ​ ​\n\n\n\n\n\n- ​ ​ ​ ​ ​\n\n\n- ​ ​ ​ ​ ​\n\n- JWT 仅能使用一次，如需再次申请 OAuth Access Token，必须重新生成一个 JWT。 ​\n\n- OAuth Access Token 的有效期默认为 15 分钟，不支持刷新。如需获取新的 Access Token，你需要再次生成一个 JWT，并调用此接口。 ​\n\n| 请求方式​ | POST​ |\n| 请求地址​ | https://api.coze.cn/api/permission/oauth2/account/{account_id}/token​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Content-Type​ | application/json​ | 请求正文的方式。​ |\n| Authorization​ | Bearer$JWT​ | 使用应用的客户端私钥签署的 JWT。生成方式可参考​2 签署 JWT。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| account_id​ | String​ | 必选​ | 扣子个人版：account_id为目标资源所属工作空间的所有者 UID。获取 UID 的具体步骤，请参考​获取资源所属工作空间的所有者 UID。​扣子企业版多组织场景：account_id为目标资源所属组织的组织 ID。你可以在组织管理>组织设置页面查看对应的组织 ID。​​​​​​ |\n\n- 扣子个人版： account_id 为目标资源所属工作空间的所有者 UID。获取 UID 的具体步骤，请参考 ​ 获取资源所属工作空间的所有者 UID 。 ​\n\n- 扣子企业版多组织场景： account_id 为目标资源所属组织的组织 ID。你可以在 组织管理 > 组织设置 页面查看对应的组织 ID。 ​\n\n- ​ ​ ​ ​ ​\n\n| 字段​ | 类型​ | 是否必选​ | 说明​ |\n| grant_type​ | String​ | 必选​ | 固定为urn:ietf:params:oauth:grant-type:jwt-bearer。​ |\n| duration_seconds​ | Integer​ | 可选​ | 申请的 AccessToken 有效期，单位为秒，默认 900 秒，即 15 分钟。最大可设置为 86399 秒，即 24 小时。​ |\n\n| 字段​ | 类型​ | 说明​ |\n| access_token​ | String​ | OAuth Access Token。​ |\n| expires_in​ | Integer​ | OAuth Access Token 的过期时间，Unixtime 时间戳格式，精度为秒。​ |\n\n| error_code​ | error_message​ | 说明​ |\n| invalid_request​ | invalid request: {parameter}​​ | 原因：请求参数 {parameter} 错误。​解决方案：请参考 API 文档查看参数说明。​ |\n| invalid_client​ | /​ | 原因：客户端凭证（JWT Token 或者 Client Secret）无效。​解决方案：请校验您的客户端凭证。​ |\n| unsupported_grant_type​ | not supported grant type: {grant type}​ | 原因：不支持的授权类型 {grant type}。​解决方案：请参考 API 文档指定正确的授权类型。​ |\n| access_deny​ | app: {app name} is currently deactivated by the owner​ | 原因：OAuth 应用已被禁用。​解决方案：在扣子编程中启用 OAuth 应用。​ |\n| ​ | invalid app type​ | 原因：应用类型错误。​解决方案：渠道应用暂不支持授权码模式。​ |\n| ​ | login session invalid​ | 原因：登录态无效。​解决方案：用户需要重新登录扣子编程。​ |\n| internal_error​ | Service internal error.​ | 原因：服务内部错误。​解决方案：建议稍后重试。​ |\n\n- 原因：请求参数 {parameter} 错误。 ​\n\n- 解决方案：请参考 API 文档查看参数说明。 ​\n\n- 原因：客户端凭证（JWT Token 或者 Client Secret）无效。 ​\n\n- 解决方案：请校验您的客户端凭证。 ​\n\n- 原因：不支持的授权类型 {grant type}。 ​\n\n- 解决方案：请参考 API 文档指定正确的授权类型。 ​\n\n- 原因：OAuth 应用已被禁用。 ​\n\n- 解决方案：在 扣子 编程中启用 OAuth 应用。 ​\n\n- 原因：应用类型错误。 ​\n\n- 解决方案：渠道应用暂不支持授权码模式。 ​\n\n- 原因：登录态无效。 ​\n\n- 解决方案：用户需要重新登录 扣子 编程。 ​\n\n- 原因：服务内部错误。 ​\n\n- 解决方案：建议稍后重试。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/oauth_jwt_privilege",
      "title": "OAuth JWT 授权（企业特权应用）",
      "content": {
        "sections": [],
        "full_text": "OAuth JWT 授权（企业特权应用）\n\n你可以在企业的默认组织中创建 OAuth JWT 授权（企业特权应用），并根据需要授予 OAuth 应用企业管理、组织管理、空间管理的权限，从而安全、高效地管理企业资源，包括成员、账单、组织及工作空间。你可按需部署多个专项应用，例如财务管理 App 专注账单管理、员工管理 App 负责成员和组织架构维护等。\n\n​\n\n说明\n\n套餐版本\n\n：企业版（企业旗舰版、企业标准版）。\n\n​\n\n角色限制\n\n：组织的超级管理员、管理员。\n\n​\n\n组织限制\n\n：仅支持在\n\n默认组织\n\n中创建 OAuth JWT 授权（企业特权应用）。\n\n​\n\n​\n\n授权流程\n\n​\n\n授权流程如下：\n\n​\n\n1.\n\n在扣子编程创建 OAuth 应用并完成授权。\n\n​\n\n2.\n\n应用程序通过公钥和私钥签署 JWT。\n\n​\n\n3.\n\n应用程序通过 API，获取访问令牌，具体请参见\n\n​\n\n通过 JWT 获取 Oauth Access Token\n\n。\n\n​\n\n4.\n\n应用程序根据访问令牌调用扣子 API。\n\n​\n\n详细步骤如下：\n\n​\n\n1 创建 Oauth 应用并授权\n\n​\n\n你需要在扣子编程中创建 OAuth 应用。\n\n​\n\n1.\n\n登录\n\n扣子编程\n\n。\n\n​\n\n2.\n\n在左侧导航栏选择\n\nAPI & SDK。\n\n​\n\n3.\n\n在顶部单击\n\n授权\n\n>\n\nOAuth 应用\n\n页签。\n\n​\n\n4.\n\n在 OAuth 应用页面右上角单击\n\n创建新应用\n\n，填写应用的基本信息，并单击\n\n创建并继续\n\n。\n\n​\n\n​\n\n配置\n\n​\n\n说明\n\n​\n\n应用类型\n\n​\n\n应用的类型，此处应指定为\n\n企业特权应用\n\n。\n\n​\n\n客户端类型\n\n​\n\n客户端类型，仅支持\n\n服务类应用\n\n。\n\n​\n\n应用名称\n\n​\n\n应用的名称，在扣子编程中全局唯一。\n\n​\n\n描述\n\n​\n\n应用的基本描述信息。\n\n​\n\n​\n\n5.\n\n填写应用的配置信息。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n配置\n\n​\n\n说明\n\n​\n\n公钥和私钥\n\n​\n\n用于应用程序客户端身份认证的非对称密钥。\n\n​\n\n单击\n\n创建 Key\n\n，页面将自动创建一对公钥和私钥，公钥自动配置在扣子编程中，私钥以\n\nprivate_key.pem\n\n文件格式由网页自动下载至本地\n\nDownloads\n\n目录下。支持创建最多三对公钥和私钥。\n\n​\n\n说明\n\n建议将\n\nprivate_key.pem\n\n文件安全地存储在只有您的应用可以访问的位置。\n\n​\n\n扣子编程使用符合行业标准的 WebCrypto 加密标准，在浏览器前端创建非对称密钥，密钥强度符合行业标准。扣子编程任何时候都不会上传私钥到后端。请您放心使用。\n\n​\n\n​\n\n权限\n\n​\n\n应用程序调用扣子 API 时需要的权限范围。不同层级权限的生效范围请参见\n\n​\n\n权限层级\n\n。\n\n​\n\n说明\n\n此处配置旨在于划定应用的权限范围，并未完成授权操作。创建 OAuth 应用后还需要参考后续操作完成授权。\n\n​\n\n​\n\n​\n\n6.\n\n单击\n\n确定\n\n，完成配置。\n\n​\n\n7.\n\n在弹出的对话框中，确认权限等信息无误后，单击\n\n授权\n\n。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n2 签署 JWT\n\n​\n\n扣子编程的\n\nJWT\n\n生成方式及部分参数定义沿用业界统一流程规范，但 JWT 中 Header 和 Payload 部分由扣子编程自行定义。\n\n​\n\n在\n\nJWT\n\n（JSON Web Tokens）的流程中，通常使用私钥来签署（sign）token。JWT 包含三部分，即 Header、Payload 和 signature，其中 header 和 payload 由参数拼接而成，signature 根据指定的签名算法和私钥对 Header 和 Payload 自动计算生成。三部分之间用点（.）分隔。详细的签署方式可参考\n\nJWT 官方文档\n\n。\n\n​\n\nHeader 和 Payload\n\n​\n\n扣子编程对 Header 和 Payload 的定义如下：\n\n​\n\nHeader\n\n​\n\nHeader 部分的参数定义如下：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nalg\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n签名使用的加密算法。固定为 RS256，即非对称加密算法，一种基于 RSA（非对称加密算法）+ SHA256（安全哈希函数）的签名算法，该算法使用私钥进行签名，公钥进行验证。\n\n​\n\ntyp\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为 JWT。\n\n​\n\nkid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nOAuth 应用的\n\n公钥指纹\n\n，可以在\n\nOAuth 应用\n\n页面找到这个应用，在\n\n操作\n\n列单击编辑图标，进入\n\n配置\n\n页面查看公钥指纹。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\nHeader 示例如下：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"alg\"\n\n:\n\n\"RS256\"\n\n,\n\n// 固定为RS256\n\n​\n\n\"typ\"\n\n:\n\n\"JWT\"\n\n,\n\n// 固定为 JWT\n\n​\n\n\"kid\"\n\n:\n\n\"gdehvaDegW.....\"\n\n// OAuth 应用的公钥指纹\n\n​\n\n}\n\n​\n\n​\n\nPayload：\n\n​\n\nPayload 部分的参数定义如下：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\niss\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nOAuth 应用的 ID，可以在\n\nOAuth 应用\n\n页面查看。\n\n​\n\naud\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n扣子 API 的 Endpoint，即\n\napi.coze.cn\n\n。\n\n​\n\niat\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\nJWT 开始生效的时间，Unixtime 时间戳格式，精确到秒。一般为当前时刻。\n\n​\n\nexp\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\nJWT 过期的时间，Unixtime 时间戳格式，精确到秒。必须晚于 iat。\n\n​\n\njti\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n随机字符串，用于防止重放攻击。建议长度大于 32 字节。每次签署 JWT 时应指定为不同的字符串。\n\n​\n\nsession_name\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n访问令牌的会话标识。目前仅限在会话隔离场景下使用，即将 session_name 指定为用户在业务侧的 UID，以此区分不同业务侧用户的对话历史。\n\n​\n\n若未指定 session_name，不同用户的对话历史可能会掺杂在一起。\n\n​\n\n说明\n\n会话隔离的详细实现方法请参见\n\n​\n\n如何实现会话隔离\n\n。\n\n​\n\n​\n\nsession_context\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n会话上下文信息，包含设备相关信息等。\n\n​\n\n​\n\nsession_context.device_info\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n用于配置设备相关信息，扣子编程基于该部分信息对设备做用量管控以及账单记录。\n\n​\n\n说明\n\n仅扣子企业旗舰版支持该参数。硬件设备用量管控的具体操作可参考\n\n​\n\n终端用户用量查询和配额管控\n\n。\n\n​\n\n​\n\nsession_context.device_info.device_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nIoT 等硬件设备 ID，一个设备对应一个唯一的设备号。\n\n​\n\n当需要记录设备用量或对设备用量进行管控时，需要填写该参数，否则，无法对设备进行用量管控，用量统计页面对应的设备 ID 将显示为 N/A。\n\n​\n\nsession_context.device_info.custom_consumer\n\n​\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n自定义维度的实体 ID，你可以根据业务需要进行设置，例如 APP 上的用户名等。\n\n​\n\n当需要记录设备用量或对设备用量进行管控，需要填写该参数，否则，无法对设备进行用量管控，用量统计页面对应的自定义 ID 将显示为 N/A。\n\n​\n\n说明\n\ndevice_id\n\n和\n\ncustom_consumer\n\n建议选择其中一个即可。\n\n​\n\ncustom_consumer\n\n参数用于设备用量管控，与对话等 API 传入的\n\nuser_id\n\n无关，\n\nuser_id\n\n主要用于上下文、数据库隔离等场景。\n\n​\n\n出于数据隐私及信息安全等方面的考虑，不建议使用业务系统中定义的用户敏感标识（如手机号等）作为\n\ncustom_consumer\n\n的值。\n\n​\n\n​\n\n​\n\nPayload 示例如下：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"iss\"\n\n:\n\n\"310000000002\"\n\n,\n\n// OAuth 应用的 ID\n\n​\n\n\"aud\"\n\n:\n\n\"api.coze.cn\"\n\n,\n\n// 扣子 API 的 Endpoint\n\n​\n\n\"iat\"\n\n:\n\n1516239022\n\n,\n\n// JWT 开始生效的时间，秒级时间戳\n\n​\n\n\"exp\"\n\n:\n\n1516259022\n\n,\n\n// JWT 过期时间，秒级时间戳\n\n​\n\n\"jti\"\n\n:\n\n\"fhjashjgkhalskj\"\n\n,\n\n// 随机字符串，防止重放攻击\n\n​\n\n\"session_name\"\n\n:\n\n\"user_2222\"\n\n,\n\n//用户在业务侧的 UID\n\n​\n\n\"session_context\"\n\n:\n\n{\n\n​\n\n\"device_info\"\n\n:\n\n{\n\n​\n\n\"device_id\"\n\n:\n\n\"1234567890\"\n\n// IoT 等硬件设备的唯一标识 ID\n\n​\n\n}\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n示例代码\n\n​\n\n你可以直接参考以下示例代码签署 JWT。\n\n​\n\n​\n\nPython\n\n复制\n\n# You must run `\n\npip install PyJWT cryptography\n\n` to install the PyJWT and the cryptography packages in order to use this script.\n\n​\n\n​\n\n#!/usr/bin/env python3\n\n​\n\nimport\n\nsys\n\n​\n\nimport\n\ntime\n\n​\n\nimport\n\nuuid\n\n​\n\n​\n\nimport\n\njwt\n\n​\n\n​\n\n# 替换为你的实际 Coze App 私钥\n\n​\n\nsigning_key =\n\n'''\n\n​\n\n-----BEGIN PRIVATE KEY-----\n\n​\n\nxxxxxxxxxxxxxxxxxx\n\n​\n\n-----END PRIVATE KEY-----\n\n​\n\n'''\n\n​\n\n​\n\npayload = {\n\n​\n\n'iat'\n\n:\n\nint\n\n(time.time()),\n\n​\n\n'exp'\n\n:\n\nint\n\n(time.time()) +\n\n600\n\n,\n\n​\n\n\"jti\"\n\n:\n\nstr\n\n(uuid.uuid4()),\n\n​\n\n'aud'\n\n:\n\n'api.coze.cn'\n\n,\n\n# 替换为实际的coze api domain\n\n​\n\n'iss'\n\n:\n\n'1127900106117'\n\n# 替换为你的实际 Coze App ID\n\n​\n\n}\n\n​\n\n​\n\nheaders = {\n\n​\n\n'kid'\n\n:\n\n'_v0VjcMlLdQc3tRTD3jC5Xz29TUnKQOhtuD5k-g***'\n\n# 替换为你的实际 Coze App 公钥指纹\n\n​\n\n}\n\n​\n\n​\n\n# Create JWT with headers\n\n​\n\nencoded_jwt = jwt.encode(payload, signing_key, algorithm=\n\n'RS256'\n\n, headers=headers)\n\n​\n\n​\n\nprint\n\n(\n\nf\"JWT:\n\n{encoded_jwt}\n\n\"\n\n)\n\n​\n\n​\n\n最终生成的 JWT 示例如下：\n\n​\n\n​\n\nPlain Text\n\n复制\n\neyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6InZZd2ZsdFR1OWZBbWtwWFhSdnR5UmREc3RONVMzZWNFcDFqVzB6dVQyRE****.eyJpc3MiOiIzMTAwMDAwMDAwMDIiLCJhdWQiOiJhcGkuY296ZS5jb20iLCJpYXQiOjE1MTYyMzkwMjIsImV4cCI6MTkxNjI1OTAyMiwianRpIjoiZmhqaGFsc2tqZmFkc2pld3F****.CuoiCCF-nHFyGmu2EKlwFoyd3uDyKQ3Drc1CrXQyMVySTzZlZd2M7zKWsziB3AktwbUZiRJlQ1HbghR05CW2YRHwKL4-dlJ4koR3onU7iQAO5DkPCaIxbAuTsQobtCAdkkZTg8gav9EnN1QN_1xq0w8BzuuhS7wCeY8UbaskkTK9GnO4eU9tEINmVw-2CrfB-kNbEHlEDwXfcrb4YPpkw3GhmuPShenNLObfSWS0CqIyakXL8qD5AgXLoB-SejAsRdzloSUInNXENJHfSVMkThxRhJy7yEjX3BmculC54fMKENRfLElBqwJyLLUjeRHsYnaru2ca4W8_yaPJ7F***\n\n*\n\n​\n\n​\n\n3 获取访问令牌\n\n​\n\n应用程序调用\n\n​\n\n通过 JWT 获取 Oauth Access Token\n\nAPI ，请求 Header 中携带 JWT，扣子服务端会在响应中通过  access_token 字段返回访问令牌。\n\n​\n\n请求示例如下：\n\n​\n\n​\n\nShell\n\n复制\n\ncurl --location --request POST 'https://api.coze.cn\n\n/\n\napi/permission/oauth2/enterprise_id/volcano_210195***/token' \\\n\n​\n\n--header 'Content-Type: application/json' \\\n\n​\n\n--header 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6InZZd2ZsdFR1OWZBbWtwWFhSdnR5UmREc3RONVMzZWNFcDFqVzB6dVQyRE****.eyJpc3MiOiIzMTAwMDAwMDAwMDIiLCJhdWQiOiJhcGkuY296ZS5jb20iLCJpYXQiOjE1MTYyMzkwMjIsImV4cCI6MTkxNjI1OTAyMiwianRpIjoiZmhqaGFsc2tqZmFkc2pld3F****.CuoiCCF-nHFyGmu2EKlwFoyd3uDyKQ3Drc1CrXQyMVySTzZlZd2M7zKWsziB3AktwbUZiRJlQ1HbghR05CW2YRHwKL4-dlJ4koR3onU7iQAO5DkPCaIxbAuTsQobtCAdkkZTg8gav9EnN1QN_1xq0w8BzuuhS7wCeY8UbaskkTK9GnO4eU9tEINmVw-2CrfB-kNbEHlEDwXfcrb4YPpkw3GhmuPShenNLObfSWS0CqIyakXL8qD5AgXLoB-SejAsRdzloSUInNXENJHfSVMkThxRhJy7yEjX3BmculC54fMKENRfLElBqwJyLLUjeRHsYnaru2ca4W8_yaPJ7F****' \\\n\n​\n\n--data '{\n\n​\n\n\"duration_seconds\": 86399,\n\n​\n\n\"grant_type\": \"urn:ietf:params:oauth:grant-type:jwt-bearer\"\n\n​\n\n}'\n\n​\n\n​\n\n返回示例如下：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"access_token\"\n\n:\n\n\"czs_RQOhsc7vmUzK4bNgb7hn4wqOgRBYAO6xvpFHNbnl6RiQJX3cSXSguIhFDzgy****\"\n\n,\n\n​\n\n\"expires_in\"\n\n:\n\n1721135859\n\n​\n\n}\n\n​\n\n​\n\n4 发起扣子 API 请求\n\n​\n\n在 API 请求头中通过\n\nAuthorization=Bearer\n\n$Access_Token\n\n指定访问令牌，发起扣子 API 请求。每个接口对应的权限点不同。\n\n​\n\n以\n\n​\n\n查看空间列表\n\nAPI 为例，完整的 API 请求如下：\n\n​\n\n​\n\nShell\n\n复制\n\ncurl --location --request GET 'https://api.coze.cn/v1/workspaces?&page_num=1&page_size=20' \\\n\n​\n\n--header 'Authorization: Bearer czu_UEE2mJn66h0fMHxLCVv9uQ7HAoNNS8DmF6N6grjWmkHX2jPm8SR0tJcKop8v****' \\\n\n​\n\n​\n\n通过 JWT 获取 Oauth Access Token\n\n​\n\n通过 JWT 获取 Oauth Access Token。\n\n​\n\n说明\n\nJWT 仅能使用一次，如需再次申请 OAuth Access Token，必须重新生成一个 JWT。\n\n​\n\nOAuth Access Token 的有效期默认为 15 分钟，不支持刷新。如需获取新的 Access Token，你需要再次生成一个 JWT，并调用此接口。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n​\n\n请求地址\n\n​\n\nhttps://api.coze.cn/\n\napi/\n\npermission/oauth2/enterprise_id/{\n\nenterprise_id\n\n}/token\n\n​\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n请求正文的方式。\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$JWT\n\n​\n\n使用应用的客户端私钥签署的 JWT。生成方式可参考\n\n​\n\n2 签署 JWT\n\n。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n字段\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nenterprise_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n企业 ID。你可以在\n\n组织管理\n\n>\n\n组织设置\n\n页面查看企业 ID。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n字段\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\ngrant_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\nurn:ietf:params:oauth:grant-type:jwt-bearer\n\n。\n\n​\n\nduration_seconds\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n申请的 AccessToken 有效期，单位为秒，默认 900 秒，即 15 分钟。最大可设置为 86399 秒，即 24 小时。\n\n​\n\n​\n\n返回结果\n\n​\n\n​\n\n字段\n\n​\n\n类型\n\n​\n\n说明\n\n​\n\naccess_token\n\n​\n\nString\n\n​\n\nOAuth Access Token。\n\n​\n\nexpires_in\n\n​\n\nInteger\n\n​\n\nOAuth Access Token 的过期时间，Unixtime 时间戳格式，单位为秒。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nShell\n\n复制\n\ncurl --location 'https://\n\napi.coze.cn/\n\napi/permission/oauth2/enterprise_id/volcano_210195***/token\n\n' \\\n\n​\n\n--header 'Content-Type: application/json' \\\n\n​\n\n--header 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6InZZd2ZsdFR1OWZBbWtwWFhSdnR5UmREc3RONVMzZWNFcDFqVzB6dVQyRE****.eyJpc3MiOiIzMTAwMDAwMDAwMDIiLCJhdWQiOiJhcGkuY296ZS5jb20iLCJpYXQiOjE1MTYyMzkwMjIsImV4cCI6MTkxNjI1OTAyMiwianRpIjoiZmhqaGFsc2tqZmFkc2pld3F****.CuoiCCF-nHFyGmu2EKlwFoyd3uDyKQ3Drc1CrXQyMVySTzZlZd2M7zKWsziB3AktwbUZiRJlQ1HbghR05CW2YRHwKL4-dlJ4koR3onU7iQAO5DkPCaIxbAuTsQobtCAdkkZTg8gav9EnN1QN_1xq0w8BzuuhS7wCeY8UbaskkTK9GnO4eU9tEINmVw-2CrfB-kNbEHlEDwXfcrb4YPpkw3GhmuPShenNLObfSWS0CqIyakXL8qD5AgXLoB-SejAsRdzloSUInNXENJHfSVMkThxRhJy7yEjX3BmculC54fMKENRfLElBqwJyLLUjeRHsYnaru2ca4W8_yaPJ7F****' \\\n\n​\n\n--data '{\n\n​\n\n\"duration_seconds\": 86399,\n\n​\n\n\"grant_type\": \"urn:ietf:params:oauth:grant-type:jwt-bearer\"\n\n​\n\n}'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"access_token\"\n\n:\n\n\"czs_RQOhsc7vmUzK4bNgb7hn4wqOgRBYAO6xvpFHNbnl6RiQJX3cSXSguIhFDzgy****\"\n\n,\n\n​\n\n\"expires_in\"\n\n:\n\n1721135859\n\n​\n\n}\n\n​\n\n​\n\n错误码\n\n​\n\n​\n\nerror_code\n\n​\n\nerror_message\n\n​\n\n说明\n\n​\n\ninvalid_request\n\n​\n\ninvalid request: {parameter}\n\n​\n\n​\n\n原因：请求参数 {parameter} 错误。\n\n​\n\n解决方案：请参考 API 文档查看参数说明。\n\n​\n\ninvalid_client\n\n​\n\n/\n\n​\n\n原因：客户端凭证（JWT Token 或者 Client Secret）无效。\n\n​\n\n解决方案：请校验您的客户端凭证。\n\n​\n\nunsupported_grant_type\n\n​\n\nnot supported grant type: {grant type}\n\n​\n\n原因：不支持的授权类型 {grant type}。\n\n​\n\n解决方案：请参考 API 文档指定正确的授权类型。\n\n​\n\naccess_deny\n\n​\n\napp: {app name} is currently deactivated by the owner\n\n​\n\n原因：OAuth 应用已被禁用。\n\n​\n\n解决方案：在\n\n扣子\n\n编程中启用 OAuth 应用。\n\n​\n\n​\n\ninvalid app type\n\n​\n\n原因：应用类型错误。\n\n​\n\n解决方案：渠道应用暂不支持授权码模式。\n\n​\n\n​\n\nlogin session invalid\n\n​\n\n原因：登录态无效。\n\n​\n\n解决方案：用户需要重新登录\n\n扣子\n\n编程。\n\n​\n\ninternal_error\n\n​\n\nService internal error.\n\n​\n\n原因：服务内部错误。\n\n​\n\n解决方案：建议稍后重试。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n上一篇\n\nOAuth JWT 授权（跨账号授权场景）\n\n下一篇\n\nOAuth 授权（多人协作场景）",
        "links": []
      },
      "markdown": "- 套餐版本 ：企业版（企业旗舰版、企业标准版）。 ​\n\n- 角色限制 ：组织的超级管理员、管理员。 ​\n\n- 组织限制 ：仅支持在 默认组织 中创建 OAuth JWT 授权（企业特权应用）。 ​\n\n\n\n\n\n\n\n\n\n- ​ 配置 ​ 说明 ​ 应用类型 ​ 应用的类型，此处应指定为 企业特权应用 。 ​ 客户端类型 ​ 客户端类型，仅支持 服务类应用 。 ​ 应用名称 ​ 应用的名称，在扣子编程中全局唯一。 ​ 描述 ​ 应用的基本描述信息。 ​ ​\n\n| 配置​ | 说明​ |\n| 应用类型​ | 应用的类型，此处应指定为企业特权应用。​ |\n| 客户端类型​ | 客户端类型，仅支持服务类应用。​ |\n| 应用名称​ | 应用的名称，在扣子编程中全局唯一。​ |\n| 描述​ | 应用的基本描述信息。​ |\n\n\n- ​ ​ ​ ​ ​\n\n- ​ 配置 ​ 说明 ​ 公钥和私钥 ​ 用于应用程序客户端身份认证的非对称密钥。 ​ 单击 创建 Key ，页面将自动创建一对公钥和私钥，公钥自动配置在扣子编程中，私钥以 private_key.pem 文件格式由网页自动下载至本地 Downloads 目录下。支持创建最多三对公钥和私钥。 ​ 说明 建议将 private_key.pem 文件安全地存储在只有您的应用可以访问的位置。 ​ 扣子编程使用符合行业标准的 WebCrypto 加密标准，在浏览器前端创建非对称密钥，密钥强度符合行业标准。扣子编程任何时候都不会上传私钥到后端。请您放心使用。 ​ ​ 权限 ​ 应用程序调用扣子 API 时需要的权限范围。不同层级权限的生效范围请参见 ​ 权限层级 。 ​ 说明 此处配置旨在于划定应用的权限范围，并未完成授权操作。创建 OAuth 应用后还需要参考后续操作完成授权。 ​ ​ ​\n\n| 配置​ | 说明​ |\n| 公钥和私钥​ | 用于应用程序客户端身份认证的非对称密钥。​单击创建 Key，页面将自动创建一对公钥和私钥，公钥自动配置在扣子编程中，私钥以private_key.pem文件格式由网页自动下载至本地Downloads目录下。支持创建最多三对公钥和私钥。​说明建议将private_key.pem文件安全地存储在只有您的应用可以访问的位置。​扣子编程使用符合行业标准的 WebCrypto 加密标准，在浏览器前端创建非对称密钥，密钥强度符合行业标准。扣子编程任何时候都不会上传私钥到后端。请您放心使用。​​ |\n| 权限​ | 应用程序调用扣子 API 时需要的权限范围。不同层级权限的生效范围请参见​权限层级。​说明此处配置旨在于划定应用的权限范围，并未完成授权操作。创建 OAuth 应用后还需要参考后续操作完成授权。​​ |\n\n- 建议将 private_key.pem 文件安全地存储在只有您的应用可以访问的位置。 ​\n\n- 扣子编程使用符合行业标准的 WebCrypto 加密标准，在浏览器前端创建非对称密钥，密钥强度符合行业标准。扣子编程任何时候都不会上传私钥到后端。请您放心使用。 ​\n\n\n\n- ​ ​ ​ ​ ​\n\n- Header ​\n\n- Header 部分的参数定义如下： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ alg ​ String ​ 必选 ​ 签名使用的加密算法。固定为 RS256，即非对称加密算法，一种基于 RSA（非对称加密算法）+ SHA256（安全哈希函数）的签名算法，该算法使用私钥进行签名，公钥进行验证。 ​ typ ​ String ​ 必选 ​ 固定为 JWT。 ​ kid ​ String ​ 必选 ​ OAuth 应用的 公钥指纹 ，可以在 OAuth 应用 页面找到这个应用，在 操作 列单击编辑图标，进入 配置 页面查看公钥指纹。 ​ ​ ​ ​ ​ ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| alg​ | String​ | 必选​ | 签名使用的加密算法。固定为 RS256，即非对称加密算法，一种基于 RSA（非对称加密算法）+ SHA256（安全哈希函数）的签名算法，该算法使用私钥进行签名，公钥进行验证。​ |\n| typ​ | String​ | 必选​ | 固定为 JWT。​ |\n| kid​ | String​ | 必选​ | OAuth 应用的公钥指纹，可以在OAuth 应用页面找到这个应用，在操作列单击编辑图标，进入配置页面查看公钥指纹。​​​​​​ |\n\n- Header 示例如下： ​\n\n- ​ JSON 复制 { ​ \"alg\" : \"RS256\" , // 固定为RS256 ​ \"typ\" : \"JWT\" , // 固定为 JWT ​ \"kid\" : \"gdehvaDegW.....\" // OAuth 应用的公钥指纹 ​ } ​ ​\n\n- Payload： ​\n\n- Payload 部分的参数定义如下： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ iss ​ String ​ 必选 ​ OAuth 应用的 ID，可以在 OAuth 应用 页面查看。 ​ aud ​ String ​ 必选 ​ 扣子 API 的 Endpoint，即 api.coze.cn 。 ​ iat ​ Integer ​ 必选 ​ JWT 开始生效的时间，Unixtime 时间戳格式，精确到秒。一般为当前时刻。 ​ exp ​ Integer ​ 必选 ​ JWT 过期的时间，Unixtime 时间戳格式，精确到秒。必须晚于 iat。 ​ jti ​ String ​ 必选 ​ 随机字符串，用于防止重放攻击。建议长度大于 32 字节。每次签署 JWT 时应指定为不同的字符串。 ​ session_name ​ String ​ 可选 ​ 访问令牌的会话标识。目前仅限在会话隔离场景下使用，即将 session_name 指定为用户在业务侧的 UID，以此区分不同业务侧用户的对话历史。 ​ 若未指定 session_name，不同用户的对话历史可能会掺杂在一起。 ​ 说明 会话隔离的详细实现方法请参见 ​ 如何实现会话隔离 。 ​ ​ session_context ​ Object ​ 可选 ​ 会话上下文信息，包含设备相关信息等。 ​ ​ session_context.device_info ​ Object ​ 可选 ​ 用于配置设备相关信息，扣子编程基于该部分信息对设备做用量管控以及账单记录。 ​ 说明 仅扣子企业旗舰版支持该参数。硬件设备用量管控的具体操作可参考 ​ 终端用户用量查询和配额管控 。 ​ ​ session_context.device_info.device_id ​ String ​ 可选 ​ IoT 等硬件设备 ID，一个设备对应一个唯一的设备号。 ​ 当需要记录设备用量或对设备用量进行管控时，需要填写该参数，否则，无法对设备进行用量管控，用量统计页面对应的设备 ID 将显示为 N/A。 ​ session_context.device_info.custom_consumer ​ ​ String ​ 可选 ​ 自定义维度的实体 ID，你可以根据业务需要进行设置，例如 APP 上的用户名等。 ​ 当需要记录设备用量或对设备用量进行管控，需要填写该参数，否则，无法对设备进行用量管控，用量统计页面对应的自定义 ID 将显示为 N/A。 ​ 说明 device_id 和 custom_consumer 建议选择其中一个即可。 ​ custom_consumer 参数用于设备用量管控，与对话等 API 传入的 user_id 无关， user_id 主要用于上下文、数据库隔离等场景。 ​ 出于数据隐私及信息安全等方面的考虑，不建议使用业务系统中定义的用户敏感标识（如手机号等）作为 custom_consumer 的值。 ​ ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| iss​ | String​ | 必选​ | OAuth 应用的 ID，可以在OAuth 应用页面查看。​ |\n| aud​ | String​ | 必选​ | 扣子 API 的 Endpoint，即api.coze.cn。​ |\n| iat​ | Integer​ | 必选​ | JWT 开始生效的时间，Unixtime 时间戳格式，精确到秒。一般为当前时刻。​ |\n| exp​ | Integer​ | 必选​ | JWT 过期的时间，Unixtime 时间戳格式，精确到秒。必须晚于 iat。​ |\n| jti​ | String​ | 必选​ | 随机字符串，用于防止重放攻击。建议长度大于 32 字节。每次签署 JWT 时应指定为不同的字符串。​ |\n| session_name​ | String​ | 可选​ | 访问令牌的会话标识。目前仅限在会话隔离场景下使用，即将 session_name 指定为用户在业务侧的 UID，以此区分不同业务侧用户的对话历史。​若未指定 session_name，不同用户的对话历史可能会掺杂在一起。​说明会话隔离的详细实现方法请参见​如何实现会话隔离。​​ |\n| session_context​ | Object​ | 可选​ | 会话上下文信息，包含设备相关信息等。​​ |\n| session_context.device_info​ | Object​ | 可选​ | 用于配置设备相关信息，扣子编程基于该部分信息对设备做用量管控以及账单记录。​说明仅扣子企业旗舰版支持该参数。硬件设备用量管控的具体操作可参考​终端用户用量查询和配额管控。​​ |\n| session_context.device_info.device_id​ | String​ | 可选​ | IoT 等硬件设备 ID，一个设备对应一个唯一的设备号。​当需要记录设备用量或对设备用量进行管控时，需要填写该参数，否则，无法对设备进行用量管控，用量统计页面对应的设备 ID 将显示为 N/A。​ |\n| session_context.device_info.custom_consumer​​ | String​ | 可选​ | 自定义维度的实体 ID，你可以根据业务需要进行设置，例如 APP 上的用户名等。​当需要记录设备用量或对设备用量进行管控，需要填写该参数，否则，无法对设备进行用量管控，用量统计页面对应的自定义 ID 将显示为 N/A。​说明device_id和custom_consumer建议选择其中一个即可。​custom_consumer参数用于设备用量管控，与对话等 API 传入的user_id无关，user_id主要用于上下文、数据库隔离等场景。​出于数据隐私及信息安全等方面的考虑，不建议使用业务系统中定义的用户敏感标识（如手机号等）作为custom_consumer的值。​​ |\n\n- device_id 和 custom_consumer 建议选择其中一个即可。 ​\n\n- custom_consumer 参数用于设备用量管控，与对话等 API 传入的 user_id 无关， user_id 主要用于上下文、数据库隔离等场景。 ​\n\n- 出于数据隐私及信息安全等方面的考虑，不建议使用业务系统中定义的用户敏感标识（如手机号等）作为 custom_consumer 的值。 ​\n\n- Payload 示例如下： ​\n\n- ​ JSON 复制 { ​ \"iss\" : \"310000000002\" , // OAuth 应用的 ID ​ \"aud\" : \"api.coze.cn\" , // 扣子 API 的 Endpoint ​ \"iat\" : 1516239022 , // JWT 开始生效的时间，秒级时间戳 ​ \"exp\" : 1516259022 , // JWT 过期时间，秒级时间戳 ​ \"jti\" : \"fhjashjgkhalskj\" , // 随机字符串，防止重放攻击 ​ \"session_name\" : \"user_2222\" , //用户在业务侧的 UID ​ \"session_context\" : { ​ \"device_info\" : { ​ \"device_id\" : \"1234567890\" // IoT 等硬件设备的唯一标识 ID ​ } ​ } ​ } ​ ​\n\n- JWT 仅能使用一次，如需再次申请 OAuth Access Token，必须重新生成一个 JWT。 ​\n\n- OAuth Access Token 的有效期默认为 15 分钟，不支持刷新。如需获取新的 Access Token，你需要再次生成一个 JWT，并调用此接口。 ​\n\n| 请求方式​ | POST​ |\n| 请求地址​ | https://api.coze.cn/api/permission/oauth2/enterprise_id/{enterprise_id}/token​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Content-Type​ | application/json​ | 请求正文的方式。​ |\n| Authorization​ | Bearer$JWT​ | 使用应用的客户端私钥签署的 JWT。生成方式可参考​2 签署 JWT。​ |\n\n| 字段​ | 类型​ | 是否必选​ | 说明​ |\n| enterprise_id​ | String​ | 必选​ | 企业 ID。你可以在组织管理>组织设置页面查看企业 ID。​​​​​​ |\n\n| 字段​ | 类型​ | 是否必选​ | 说明​ |\n| grant_type​ | String​ | 必选​ | 固定为urn:ietf:params:oauth:grant-type:jwt-bearer。​ |\n| duration_seconds​ | Integer​ | 可选​ | 申请的 AccessToken 有效期，单位为秒，默认 900 秒，即 15 分钟。最大可设置为 86399 秒，即 24 小时。​ |\n\n| 字段​ | 类型​ | 说明​ |\n| access_token​ | String​ | OAuth Access Token。​ |\n| expires_in​ | Integer​ | OAuth Access Token 的过期时间，Unixtime 时间戳格式，单位为秒。​ |\n\n| error_code​ | error_message​ | 说明​ |\n| invalid_request​ | invalid request: {parameter}​​ | 原因：请求参数 {parameter} 错误。​解决方案：请参考 API 文档查看参数说明。​ |\n| invalid_client​ | /​ | 原因：客户端凭证（JWT Token 或者 Client Secret）无效。​解决方案：请校验您的客户端凭证。​ |\n| unsupported_grant_type​ | not supported grant type: {grant type}​ | 原因：不支持的授权类型 {grant type}。​解决方案：请参考 API 文档指定正确的授权类型。​ |\n| access_deny​ | app: {app name} is currently deactivated by the owner​ | 原因：OAuth 应用已被禁用。​解决方案：在扣子编程中启用 OAuth 应用。​ |\n| ​ | invalid app type​ | 原因：应用类型错误。​解决方案：渠道应用暂不支持授权码模式。​ |\n| ​ | login session invalid​ | 原因：登录态无效。​解决方案：用户需要重新登录扣子编程。​ |\n| internal_error​ | Service internal error.​ | 原因：服务内部错误。​解决方案：建议稍后重试。​ |\n\n- 原因：请求参数 {parameter} 错误。 ​\n\n- 解决方案：请参考 API 文档查看参数说明。 ​\n\n- 原因：客户端凭证（JWT Token 或者 Client Secret）无效。 ​\n\n- 解决方案：请校验您的客户端凭证。 ​\n\n- 原因：不支持的授权类型 {grant type}。 ​\n\n- 解决方案：请参考 API 文档指定正确的授权类型。 ​\n\n- 原因：OAuth 应用已被禁用。 ​\n\n- 解决方案：在 扣子 编程中启用 OAuth 应用。 ​\n\n- 原因：应用类型错误。 ​\n\n- 解决方案：渠道应用暂不支持授权码模式。 ​\n\n- 原因：登录态无效。 ​\n\n- 解决方案：用户需要重新登录 扣子 编程。 ​\n\n- 原因：服务内部错误。 ​\n\n- 解决方案：建议稍后重试。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/oauth_collaborate",
      "title": "OAuth 授权（多人协作场景）",
      "content": {
        "sections": [],
        "full_text": "OAuth 授权（多人协作场景）\n\n扣子编程支持多人协作场景下跨账号的 OAuth 授权，超级管理员可以为应用程序授予工作空间中的资源权限。\n\n​\n\n说明\n\n仅扣子企业版（企业标准版、企业旗舰版）支持多人协作场景，扣子个人版不支持多人协作场景。\n\n​\n\n​\n\n授权场景\n\n​\n\n使用\n\n​\n\nOAuth 授权码授权\n\n、\n\n​\n\nOAuth PKCE\n\n、\n\n​\n\nOAuth 设备授权\n\n模式时，应用程序获取的 Access Token 默认拥有 OAuth  该企业中所有资源的权限。例如权限列表中包含 chat 权限，通过这个 Token 可以调用 chat 接口，与此账号名下所有空间中的所有智能体对话。\n\n​\n\n在多人协作场景下，扣子用户往往需要跨账号授权，例如，企业 A 里的成员希望使用企业 B 的应用 B，需要给此应用授予权限。\n\n​\n\n授权流程如下：\n\n​\n\n1.\n\n企业 B 的应用发起授权请求。\n\n​\n\n2.\n\n企业 A 的用户通知超级管理员或管理员安装此 OAuth APP。\n\n​\n\n3.\n\n企业 A 的超级管理员或管理员安装此 OAuth APP。\n\n​\n\n4.\n\n企业 A 的用户通知超级管理员或管理员授权此 OAuth APP，应用 B 可以访问企业 A 中的资源。\n\n​\n\n说明\n\n会话、对话、消息为全局资源，不隶属于任何空间，所以指定空间 ID 之后无法授予 Access Token 会话相关的权限，例如创建会话 createConversation。\n\n​\n\n​\n\n实现方案\n\n​\n\n在 OAuth 授权流程中，应用程序发起授权请求，申请获取授权码（code）时，可以指定空间 ID，并引导空间所有者为空间安装应用。\n\n​\n\n以授权码授权模式为例，多人协作场景下应用程序发起授权请求的流程如下。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n1 确定工作空间\n\n​\n\n空间协作者可以为应用程序授予工作空间中的资源权限，从而使用工作空间中的资源，例如和工作空间中本人创建的智能体对话、修改本人创建的知识库等。\n\n​\n\n应用程序申请企业资源权限前需要通过以下方式获取空间 ID：\n\n​\n\n引导用户手动输入扣子空间 ID\n\n：扣子用户登录扣子编程后，进入指定空间，空间页面 URL 中\n\nspace\n\n参数后的数字就是 Space ID。例如\n\nhttps://code.coze.cn/space/736163827687053\n\n****\n\n/bot\n\n，空间 ID 为\n\n736163827687053****\n\n。\n\n​\n\n通过 OpenAPI 获取空间列表\n\n。应用程序完成一套简易的授权流程后，调用扣子 OpenAPI 接口\n\n​\n\n查看空间列表\n\n，查看指定账号下的空间列表，并在前端页面中展示空间列表，引导用户选择一个空间。\n\n​\n\n此接口获取的空间 ID 包括以下三种：\n\n​\n\n指定账号的个人空间。\n\n​\n\n指定账号创建的工作空间。\n\n​\n\n指定账号已加入的工作空间。\n\n​\n\n2 发起授权请求\n\n​\n\n1.\n\n应用程序发起授权请求。\n\n​\n\n应用程序通过302重定向方式发起\n\n​\n\n获取授权页面 URL\n\nAPI 请求，请求的 Path 中指定一个空间 ID，表示授予 Access Token 此空间下所有资源的权限。\n\n​\n\n说明\n\n扣子编程中的资源具有层级关系。授权时如果指定空间，则无法授予 Access Token 与空间平级的其他权限，例如会话相关权限。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n2.\n\n扣子用户访问授权页面，单击\n\n授权\n\n，确认授权的应用及权限范围。\n\n​\n\n如果你是超级管理员或管理员，单击\n\n授权\n\n后，提示授权成功。请跳转至\n\n​\n\n4 获取授权码\n\n。\n\n​\n\n如果你是成员，单击\n\n授权\n\n后，提示授权失败，说明超级管理员或管理员未安装该应用，请单击\n\n发起申请\n\n。联系超级管理员或管理员安装应用。超级管理员或管理员安装应用后，成员需要再次访问授权页面，单击\n\n授权\n\n，直至页面提示授权成功。\n\n​\n\n如果你是成员，单击\n\n授权\n\n后，提示授权成功，说明超级管理员或管理员已安装该应用。请跳转至\n\n​\n\n4 获取授权码\n\n。\n\n​\n\n3 超级管理员或管理员安装应用\n\n​\n\n当成员单击\n\n发起申请\n\n后，超级管理员或管理员可以通过如下三种方式安装应用：\n\n​\n\n在弹出的安装请求对话框中单击\n\n安装\n\n。\n\n​\n\n在\n\n授权\n\n>\n\n应用安装管理\n\n页面的\n\n操作\n\n列中单击\n\n安装\n\n。\n\n​\n\n访问成员提供的授权链接地址，选择空间权限，单击\n\n授权\n\n。\n\n​\n\n对话框中安装应用\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n应用安装管理页面安装应用\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n4 获取授权码\n\n​\n\n授权成功后，扣子 OAuth Server 会在 API 接口响应中返回授权码 code。应用程序可根据授权码换取 Access Token，在被授予的权限范围内调用扣子 API。详细步骤说明可参考\n\n​\n\n2 获取访问令牌\n\n和\n\n​\n\n步骤三：请求令牌\n\n部分。\n\n​\n\n上一篇\n\nOAuth JWT 授权（企业特权应用）\n\n下一篇\n\n鉴权常见问题",
        "links": []
      },
      "markdown": "- 引导用户手动输入扣子空间 ID ：扣子用户登录扣子编程后，进入指定空间，空间页面 URL 中 space 参数后的数字就是 Space ID。例如 https://code.coze.cn/space/736163827687053 **** /bot ，空间 ID 为 736163827687053**** 。 ​\n\n- 通过 OpenAPI 获取空间列表 。应用程序完成一套简易的授权流程后，调用扣子 OpenAPI 接口 ​ 查看空间列表 ，查看指定账号下的空间列表，并在前端页面中展示空间列表，引导用户选择一个空间。 ​\n\n- 此接口获取的空间 ID 包括以下三种： ​\n\n- 指定账号的个人空间。 ​\n\n- 指定账号创建的工作空间。 ​\n\n- 指定账号已加入的工作空间。 ​\n\n\n- 应用程序通过302重定向方式发起 ​ 获取授权页面 URL API 请求，请求的 Path 中指定一个空间 ID，表示授予 Access Token 此空间下所有资源的权限。 ​\n\n- 说明 扣子编程中的资源具有层级关系。授权时如果指定空间，则无法授予 Access Token 与空间平级的其他权限，例如会话相关权限。 ​ ​\n\n- ​ ​ ​ ​ ​\n\n\n- 如果你是超级管理员或管理员，单击 授权 后，提示授权成功。请跳转至 ​ 4 获取授权码 。 ​\n\n- 如果你是成员，单击 授权 后，提示授权失败，说明超级管理员或管理员未安装该应用，请单击 发起申请 。联系超级管理员或管理员安装应用。超级管理员或管理员安装应用后，成员需要再次访问授权页面，单击 授权 ，直至页面提示授权成功。 ​\n\n- 如果你是成员，单击 授权 后，提示授权成功，说明超级管理员或管理员已安装该应用。请跳转至 ​ 4 获取授权码 。 ​\n\n- 在弹出的安装请求对话框中单击 安装 。 ​\n\n- 在 授权 > 应用安装管理 页面的 操作 列中单击 安装 。 ​\n\n- 访问成员提供的授权链接地址，选择空间权限，单击 授权 。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/authentication_faq",
      "title": "鉴权常见问题",
      "content": {
        "sections": [],
        "full_text": "鉴权常见问题\n\n迁移空间后提示鉴权失败\n\n​\n\n从个人版或扣子专业版的工作空间迁移到企业版空间后，原 API 授权将失效，访问线上应用时会鉴权失败，需要重新授权，具体操作请参见\n\n​\n\n升级企业版后更新 API 授权\n\n。\n\n​\n\n令牌有效期太短，如何避免频繁更新？\n\n​\n\n个人访问令牌的有效期最长为一个月，建议使用 OAuth 授权方式。通过 OAuth 授权，可以实现令牌的自动刷新，无需手动更新令牌，从而有效避免频繁更新令牌的问题，具体请参见\n\n​\n\nOAuth 应用管理\n\n。\n\n​\n\n为什么授权失败，提示权限点包含 “企业” 层级？\n\n​\n\n问题现象\n\n​\n\n创建 OAuth 应用或个人访问令牌时，提示\n\n此应用所声明的权限点包含 “企业” 层级，仅企业内的超级管理员或管理员可以授权应用\n\n。\n\n​\n\n可能原因\n\n​\n\n企业层级的权限点，仅团队或企业的超级管理员和管理员创建的访问令牌能被授权该级别的权限。扣子个人账号或企业中的员工不支持授权企业层级的权限点。\n\n​\n\n解决方案\n\n​\n\n1.\n\n确认账号角色：确认登录扣子编程的账号角色为企业的超级管理员或管理员，如果是扣子个人账号，请单击左下角头像，切换到企业的超级管理员或管理员账号。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n2.\n\n检查选择的权限点：检查你选择的权限点是否包含了企业层级的权限点。如果你是团队或企业的员工，你需要重新选择权限点，仅保留工作空间级别或账号级别的权限点。\n\n​\n\n​\n\n上一篇\n\nOAuth 授权（多人协作场景）\n\n下一篇\n\n创建智能体",
        "links": []
      },
      "markdown": "- ​ ​ ​ ​ ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/create_bot",
      "title": "创建智能体",
      "content": {
        "sections": [],
        "full_text": "创建智能体\n\n创建一个新的智能体。\n\n​\n\n创建的智能体为未发布的草稿状态，创建后可以在扣子编程智能体列表中查看智能体。调用\n\n发布智能体\n\nAPI 发布智能体后，才能通过\n\n查看智能体列表\n\n或\n\n查看智能体配置\n\nAPI 查看此智能体。\n\n​\n\n通过 API 方式创建智能体时，支持为智能体设置所在空间、智能体名称和描述、头像、人设与回复逻辑及开场白。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/bot/create\n\n​\n\n权限\n\n​\n\ncreateBot\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\ncreateBot\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n调用接口创建一个新的智能体。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $AccessToken\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nspace_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n75814654762959***\n\n​\n\n智能体所在的空间的 Space ID。Space ID 是空间的唯一标识。\n\n​\n\n进入指定空间，空间页面 URL 中\n\nw\n\n参数后的数字就是 Space ID。例如\n\nhttps://code.coze.cn/w/75814654762959***/projects\n\n，Space ID 为\n\n75814654762959***\n\n。\n\n​\n\nname\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n每日学一菜\n\n​\n\n智能体的名称。长度为 1~ 20 个字符。\n\n​\n\ndescription\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n每天教你一道菜的做法，暑假之后你将成为中餐大厨～\n\n​\n\n智能体的描述信息。长度为 0~ 500 个字符。默认为空。\n\n​\n\nicon_file_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n73694959811****\n\n​\n\n作为智能体头像的文件 ID。\n\n​\n\n未指定文件 ID 时，扣子编程默认为智能体指定一个头像。\n\n​\n\n如需使用自定义头像，应先通过\n\n上传文件\n\n接口上传本地文件，从接口响应中获取文件 ID。文件 ID 作为智能体头像时，有效期为永久有效。\n\n​\n\nprompt_info\n\n​\n\nObject of\n\nPromptInfo\n\n​\n\n可选\n\n​\n\n{ \"prompt\": \"你是一位经验丰富的中餐大厨，能够熟练传授各类中餐的烹饪技巧，每日为大学生厨师小白教学一道经典中餐的制作方法。\" }\n\n​\n\n智能体的人设与回复逻辑。\n\n​\n\nonboarding_info\n\n​\n\nObject of\n\nOnboardingInfo\n\n​\n\n可选\n\n​\n\n{ \"prologue\": \"欢迎你，学徒，今天想学一道什么样的菜？\", \"suggested_questions\": [ \"川菜，我想吃辣的\", \"广东菜，来点鲜的\", \"随机教我一道菜\" ] }\n\n​\n\n智能体的开场白和预置问题相关设置。\n\n​\n\nplugin_id_list\n\n​\n\nObject of\n\nPluginIdList\n\n​\n\n可选\n\n​\n\n{ \"id_list\": [ { \"plugin_id\": \"731198934927553****\", \"api_id\": \"735057536617362****\" } ] }\n\n​\n\n智能体的插件配置。\n\n​\n\nworkflow_id_list\n\n​\n\nObject of\n\nWorkflowIdList\n\n​\n\n可选\n\n​\n\n{\"ids\":[{\"id\":\"746049108611037****\"}]}\n\n​\n\n智能体绑定的工作流 ID 列表，用于配置智能体关联的工作流。\n\n​\n\nmodel_info_config\n\n​\n\nObject of\n\nModelInfoConfig\n\n​\n\n可选\n\n​\n\n{\"model_id\":\"1706077826\"}\n\n​\n\n智能体的模型配置，用于指定智能体绑定的模型 ID 及相关参数。不同模型支持的配置参数及取值范围各不相同，可在扣子编程的模型列表中查看具体参数及取值范围。\n\n​\n\nsuggest_reply_info\n\n​\n\nObject of\n\nSuggestReplyInfo\n\n​\n\n可选\n\n​\n\n{\"reply_mode\":\"enable\"}\n\n​\n\n配置智能体回复后是否提供用户问题建议。\n\n​\n\n​\n\nPromptInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nprompt\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n你是一位经验丰富的中餐大厨，能够熟练传授各类中餐的烹饪技巧，每日为大学生厨师小白教学一道经典中餐的制作方法。\n\n​\n\n智能体的人设与回复逻辑。长度为 0~ 20,000 个字符。默认为空。\n\n​\n\n开启前缀缓存后，不支持通过\n\nprompt\n\n参数设置提示词，需要通过\n\nprefix_prompt_info\n\n参数设置提示词。\n\n​\n\nprompt_mode\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nstandard\n\n​\n\n提示词模式，用于指定智能体的人设与回复逻辑的配置方式。枚举值：\n\n​\n\nstandard\n\n（默认值）：标准模式。未开启前缀缓存时使用该模式。\n\n​\n\nprefix\n\n：前缀缓存模式，提示词会分为缓存提示词和非缓存提示词两部分。开启前缀缓存后需要设置为该模式。\n\n​\n\nprefix_prompt_info\n\n​\n\nObject of\n\nPrefixPromptInfo\n\n​\n\n可选\n\n​\n\n\\\n\n​\n\n通过\n\ncache_type\n\n或\n\nparameters.caching.type\n\n开启前缀缓存后，你需要通过该参数设置\n\n缓存提示词\n\n（\n\nprefix_prompt\n\n）和\n\n非缓存提示词\n\n（\n\ndynamic_prompt\n\n）。不支持通过\n\nprompt\n\n参数设置提示词。\n\n​\n\n​\n\nPrefixPromptInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nprefix_prompt\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n\\\n\n​\n\n缓存提示词，大量重复出现的固定规则、模板框架或背景信息，用于指引大模型输出格式与风格。扣子编程会将其缓存并复用，大模型无需重新解析这部分固定信息。\n\n​\n\ndynamic_prompt\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n\\\n\n​\n\n非缓存提示词，动态变化的个性化信息，仅针对当前请求生效。\n\n​\n\n​\n\nOnboardingInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nprologue\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n欢迎你，学徒，今天想学一道什么样的菜？\n\n​\n\n智能体的开场白。长度为 0~ 300 个字符。默认无开场白。\n\n​\n\n开场白中如果设置了用户名称变量\n\n{{user_name}}\n\n，API 场景中需要业务方自行处理，例如展示开场白时将此变量替换为业务侧的用户名称。\n\n​\n\nsuggested_questions\n\n​\n\nArray of String\n\n​\n\n可选\n\n​\n\n[\"川菜，我想吃辣的\",\"广东菜，来点鲜的\",\"随机教我一道菜\"]\n\n​\n\n智能体的开场白预置问题。每个问题长度为 0~ 50 个字符，问题数量无限制。默认无开场白预置问题。\n\n​\n\n​\n\nPluginIdList\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid_list\n\n​\n\nArray of\n\nPluginIdInfo\n\n​\n\n可选\n\n​\n\n{ \"id_list\": [ { \"plugin_id\": \"731198934927553****\", \"api_id\": \"735057536617362****\" } ] }\n\n​\n\n智能体的插件列表配置。\n\n​\n\n​\n\nPluginIdInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\napi_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n735057536617362****\n\n​\n\n智能体绑定的插件工具 ID。\n\n​\n\n在扣子编程中，打开资源库页面，选择目标插件，单击插件下的任意工具，页面 URL 中 tool 参数后的数字是插件工具 ID。例如\n\nhttps://www.coze.cn/space/731762895654132****/plugin/735057533610021****/tool/735057536617362****\n\n，插件工具 ID 为\n\n735057536617362****\n\n。\n\n​\n\nplugin_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n731198934927553****\n\n​\n\n智能体绑定的插件 ID。\n\n​\n\n在扣子编程中，打开资源库页面，选择目标插件，页面 URL 中 plugin 参数后的数字是插件 ID。例如\n\n​\n\nhttps://www.coze.cn/space/728826510807216****/plugin/731198934927553****\n\n，插件 ID 为\n\n731198934927553****\n\n。\n\n​\n\n​\n\nWorkflowIdList\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nids\n\n​\n\nArray of\n\nWorkflowIdInfo\n\n​\n\n可选\n\n​\n\n[ { \"id\": \"746049108611037****\" }]\n\n​\n\n智能体的工作流列表配置。\n\n​\n\n​\n\nWorkflowIdInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n746049108611037****\n\n​\n\n智能体绑定的工作流 ID。\n\n​\n\n进入工作流的编排页面，在页面 URL 中，\n\nworkflow\n\n参数后的数字就是工作流 ID。例如\n\nhttps://www.coze.com/work_flow?space_id=42463***&workflow_id=73505836754923***\n\n，工作流 ID 为\n\n73505836754923***\n\n。\n\n​\n\n​\n\nModelInfoConfig\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nmodel_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n1706077826\n\n​\n\n智能体绑定的模型 ID。\n\n​\n\n在工作空间的模型管理页面中单击指定模型，模型详情页面 URL 中\n\nmodel\n\n参数后的数字就是模型 ID。例如\n\nhttps://www.coze.cn/space/7288\n\n****\n\n/model/1716\n\n****\n\n，模型 ID 为\n\n1716\n\n****\n\n。\n\n​\n\ntop_k\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n50\n\n​\n\n生成文本时，采样候选集的大小。该参数控制模型在生成每个词时考虑的候选词数量，值越小生成的文本越保守和确定，值越大生成的文本越多样和随机。\n\n​\n\ntop_p\n\n​\n\nDouble\n\n​\n\n可选\n\n​\n\n1\n\n​\n\nTop P，即累计概率。该参数控制模型在生成文本时的采样策略，值越小生成的文本越保守和确定，值越大生成的文本越多样和随机。\n\n​\n\n说明\n\n部分模型不支持该参数，具体支持的模型请参见\n\n模型能力差异\n\n。\n\n​\n\n​\n\nmax_tokens\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n4096\n\n​\n\n最大回复长度。\n\n​\n\ntemperature\n\n​\n\nDouble\n\n​\n\n可选\n\n​\n\n1\n\n​\n\n生成随机性。\n\n​\n\n说明\n\n部分模型不支持该参数，具体支持的模型请参见\n\n模型能力差异\n\n。\n\n​\n\n​\n\nsp_anti_leak\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\ntrue\n\n​\n\n是否启用 SP 拼接防泄露指令，开启后，当用户尝试获取或复述系统内部的规则、提示词或其他敏感内容时，智能体将礼貌地拒绝用户的请求，确保机密信息不被泄露。\n\n​\n\ntrue：开启系统提示词防泄漏。\n\n​\n\nfalse：（默认值）关闭系统提示词防泄漏。\n\n​\n\ncontext_round\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n30\n\n​\n\n携带上下文轮数。\n\n​\n\nresponse_format\n\n​\n\nString\n\n​\n\n可选\n\n​\n\ntext\n\n​\n\n输出格式。取值：\n\n​\n\ntext：文本。\n\n​\n\nmarkdown：Markdown格式。\n\n​\n\njson：JSON 格式。\n\n​\n\nsp_current_time\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\ntrue\n\n​\n\n是否在 SP 中包含当前时间信息。\n\n​\n\ntrue：智能体在与用户对话时能实时获取并提供准确的时间信息。\n\n​\n\nfalse：（默认值）在系统提示词中不会拼接当前时间信息。\n\n​\n\npresence_penalty\n\n​\n\nDouble\n\n​\n\n可选\n\n​\n\n0\n\n​\n\n重复主题惩罚。\n\n​\n\nfrequency_penalty\n\n​\n\nDouble\n\n​\n\n可选\n\n​\n\n0\n\n​\n\n重复语句惩罚。\n\n​\n\ncache_type\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nclosed\n\n​\n\n为模型开启或关闭前缀缓存。开启前缀缓存后，扣子编程将自动缓存公共前缀内容，后续调用模型时无需重复发送，从而加快模型的响应速度并降低使用成本。具体用法请参见\n\n前缀缓存\n\n。枚举值：\n\n​\n\nclosed\n\n（默认值）：关闭前缀缓存。\n\n​\n\nprefix\n\n：开启前缀缓存。\n\n​\n\n说明\n\n套餐限制\n\n：仅扣子个人付费版、企业版（企业标准版、企业旗舰版）支持开启上下文前缀缓存。\n\n​\n\n模型限制\n\n：仅部分模型支持该参数，具体支持的模型请参见\n\n模型能力差异\n\n。\n\n​\n\n其他限制\n\n：该参数仅适用于 Context API 协议，Responses API 协议的前缀缓存需要通过\n\nparameters\n\n参数进行配置。\n\n​\n\n​\n\napi_mode\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nchat_api\n\n​\n\n模型的 API 协议类型，用于指定智能体与模型交互时使用的 API 协议。枚举值：\n\n​\n\nchat_api\n\n（默认值）：智能体需要在请求时带上对话历史作为上下文。适用于日常闲聊、基础咨询、简单文本生成等轻量化需求。\n\n​\n\nresponses_api\n\n：模型新推出的 API，不仅延续了 Chat API 的易用性，还原生支持高效的上下文管理和前缀缓存。适用于需要多步推理等复杂任务链处理的场景。\n\n​\n\n说明\n\n仅部分模型支持\n\nresponses_api\n\n协议，具体支持的模型请参见\n\n模型能力差异\n\n。\n\n​\n\n​\n\nparameters\n\n​\n\nJSON Map\n\n​\n\n可选\n\n​\n\n深度思考示例：\n\n​\n\n{\"thinking_type\": \"disabled\"}\n\n​\n\n上下文管理示例：\n\n​\n\n{\"caching\":{\"type\":\"disabled\"},\"store\":true,\"caching_expire_time\":259200}\n\n​\n\n你可以通过该参数配置模型深度思考和\n\nresponses_api\n\n的上下文管理相关配置。\n\n​\n\n深度思考\n\n：开发者可以设置开启或关闭深度思考，从而灵活控制模型在交互过程中的 Token 消耗。\n\n​\n\n说明\n\n仅部分模型支持深度思考开关，具体支持的模型请参见\n\n模型能力差异\n\n。\n\n​\n\n​\n\n深度思考\n\nthinking_type\n\n的值可以设置为：\n\n​\n\nenabled\n\n：开启深度思考。智能体在与用户对话时会先输出一段思维链内容，通过逐步拆解问题、梳理逻辑，提升最终输出答案的准确性。但该模式会因额外的推理步骤消耗更多 Token。\n\n​\n\n说明\n\n开启深度思考后：\n\n​\n\n模型不支持 Function Call，即工具调用。\n\n​\n\n智能体不能使用插件、触发器、变量、数据库、文件盒子、不能添加工作流和对话流。\n\n​\n\n不支持使用插件和工作流相关的快捷指令。\n\n​\n\n​\n\ndisabled\n\n：关闭深度思考。智能体将直接生成最终答案，不再经过额外的思维链推理过程，可有效降低 Token 消耗，提升响应速度。\n\n​\n\nauto\n\n：启用自动模式后，模型会根据对话内容的复杂度，自动判断是否启用深度思考。\n\n​\n\n上下文管理\n\n：当 api_mode 为\n\nresponses_api\n\n时，支持配置前缀缓存、存储和存储时长。\n\n​\n\n说明\n\n仅部分模型支持前缀缓存，具体支持的模型请参见\n\n模型能力差异\n\n。\n\n​\n\n​\n\n上下文管理的具体参数如下：\n\n​\n\ncaching.type\n\n：你可以设置为\n\nenabled\n\n或\n\ndisabled\n\n，开启或关闭前缀缓存。默认为\n\ndisabled\n\n。前缀缓存的具体用法请参考\n\n前缀缓存\n\n。\n\n​\n\nstore\n\n：你可以设置为\n\ntrue\n\n或\n\nfalse\n\n，开启或关闭存储功能。开启后将自动存储输入、输出字段的消息，不存储思维链中的消息。默认为\n\ntrue\n\n。\n\n若需使用前缀缓存功能，需开启存储功能。\n\n​\n\ncaching_expire_time\n\n：设置上下文缓存和存储的有效时长，单位：秒。最大为 259200 秒（3天）。默认值：259200。\n\n​\n\n​\n\nSuggestReplyInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nreply_mode\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nenable\n\n​\n\n配置智能体回复后，是否提供用户问题建议。枚举值：\n\n​\n\nenable\n\n：在智能体回复后，提供最多 3 条用户问题建议。\n\n​\n\ndisable\n\n：在每次智能体回复后，不会提供任何用户问题建议。\n\n​\n\ncustomized\n\n：开启用户问题建议，并根据用户自定义的 Prompt 提供用户问题建议。你需要在\n\ncustomized_prompt\n\n参数中设置关于用户问题建议的 Prompt。\n\n​\n\ncustomized_prompt\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n问题应该与你最后一轮的回复紧密相关，可以引发进一步的讨论。\n\n​\n\n关于用户问题建议的 Prompt。当\n\nreply_mode\n\n设置为\n\ncustomized\n\n时，需要设置提示词内容。智能体会根据该提示词生成用户问题建议。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。\n\n​\n\n0 表示调用成功。\n\n​\n\n其他值表示调用失败。你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndata\n\n​\n\nObject of\n\nCreateDraftBotData\n\n​\n\n{ \"bot_id\": \"73428668*****\" }\n\n​\n\n已创建的智能体信息。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\n​\n\nCreateDraftBotData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n73428668*****\n\n​\n\n创建的智能体 ID。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/bot/create' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer $AccessToken' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"space_id\"\n\n:\n\n\"736142423532160****\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"每日学一菜\"\n\n,\n\n​\n\n\"description\"\n\n:\n\n\"每天教你一道菜的做法，暑假之后你将成为中餐大厨～\"\n\n,\n\n​\n\n\"icon_file_id\"\n\n:\n\n\"73694959811****\"\n\n,\n\n​\n\n\"prompt_info\"\n\n:\n\n{\n\n​\n\n\"prompt\"\n\n:\n\n\"你是一位经验丰富的中餐大厨，能够熟练传授各类中餐的烹饪技巧，每日为大学生厨师小白教学一道经典中餐的制作方法。\"\n\n​\n\n},\n\n​\n\n\"plugin_id_list\"\n\n:\n\n{\n\n​\n\n\"id_list\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"plugin_id\"\n\n:\n\n\"731198934927553****\"\n\n,\n\n​\n\n\"api_id\"\n\n:\n\n\"735057536617362****\"\n\n​\n\n}\n\n​\n\n]\n\n​\n\n},\n\n​\n\n\"onboarding_info\"\n\n:\n\n{\n\n​\n\n\"prologue\"\n\n:\n\n\"欢迎你，学徒，今天想学一道什么样的菜？\"\n\n,\n\n​\n\n\"suggested_questions\"\n\n:\n\n[\n\n​\n\n\"川菜，我想吃辣的\"\n\n,\n\n​\n\n\"广东菜，来点鲜的\"\n\n,\n\n​\n\n\"随机教我一道菜\"\n\n​\n\n]\n\n​\n\n},\n\n​\n\n\"workflow_id_list\"\n\n:\n\n{\n\n​\n\n\"ids\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"746049108611037****\"\n\n​\n\n}\n\n​\n\n]\n\n​\n\n},\n\n​\n\n\"model_info_config\"\n\n:\n\n{\n\n​\n\n\"model_id\"\n\n:\n\n\"1706077826\"\n\n​\n\n}\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"bot_id\"\n\n:\n\n\"73428668*****\"\n\n​\n\n},\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n鉴权常见问题\n\n下一篇\n\n更新智能体",
        "links": []
      },
      "markdown": "| 请求方式​ | POST |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/bot/create​ |\n| 权限​ | createBot​确保调用该接口使用的访问令牌开通了createBot权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 调用接口创建一个新的智能体。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $AccessToken​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| space_id​ | String​ | 必选​ | 75814654762959***​ | 智能体所在的空间的 Space ID。Space ID 是空间的唯一标识。​进入指定空间，空间页面 URL 中w参数后的数字就是 Space ID。例如https://code.coze.cn/w/75814654762959***/projects，Space ID 为75814654762959***。​ |\n| name​ | String​ | 必选​ | 每日学一菜​ | 智能体的名称。长度为 1~ 20 个字符。​ |\n| description​ | String​ | 可选​ | 每天教你一道菜的做法，暑假之后你将成为中餐大厨～​ | 智能体的描述信息。长度为 0~ 500 个字符。默认为空。​ |\n| icon_file_id​ | String​ | 可选​ | 73694959811****​ | 作为智能体头像的文件 ID。​未指定文件 ID 时，扣子编程默认为智能体指定一个头像。​如需使用自定义头像，应先通过上传文件接口上传本地文件，从接口响应中获取文件 ID。文件 ID 作为智能体头像时，有效期为永久有效。​ |\n| prompt_info​ | Object ofPromptInfo​ | 可选​ | { \"prompt\": \"你是一位经验丰富的中餐大厨，能够熟练传授各类中餐的烹饪技巧，每日为大学生厨师小白教学一道经典中餐的制作方法。\" }​ | 智能体的人设与回复逻辑。​ |\n| onboarding_info​ | Object ofOnboardingInfo​ | 可选​ | { \"prologue\": \"欢迎你，学徒，今天想学一道什么样的菜？\", \"suggested_questions\": [ \"川菜，我想吃辣的\", \"广东菜，来点鲜的\", \"随机教我一道菜\" ] }​ | 智能体的开场白和预置问题相关设置。​ |\n| plugin_id_list​ | Object ofPluginIdList​ | 可选​ | { \"id_list\": [ { \"plugin_id\": \"731198934927553****\", \"api_id\": \"735057536617362****\" } ] }​ | 智能体的插件配置。​ |\n| workflow_id_list​ | Object ofWorkflowIdList​ | 可选​ | {\"ids\":[{\"id\":\"746049108611037****\"}]}​ | 智能体绑定的工作流 ID 列表，用于配置智能体关联的工作流。​ |\n| model_info_config​ | Object ofModelInfoConfig​ | 可选​ | {\"model_id\":\"1706077826\"}​ | 智能体的模型配置，用于指定智能体绑定的模型 ID 及相关参数。不同模型支持的配置参数及取值范围各不相同，可在扣子编程的模型列表中查看具体参数及取值范围。​ |\n| suggest_reply_info​ | Object ofSuggestReplyInfo​ | 可选​ | {\"reply_mode\":\"enable\"}​ | 配置智能体回复后是否提供用户问题建议。​ |\n\n- 未指定文件 ID 时，扣子编程默认为智能体指定一个头像。 ​\n\n- 如需使用自定义头像，应先通过 上传文件 接口上传本地文件，从接口响应中获取文件 ID。文件 ID 作为智能体头像时，有效期为永久有效。 ​\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| prompt​ | String​ | 可选​ | 你是一位经验丰富的中餐大厨，能够熟练传授各类中餐的烹饪技巧，每日为大学生厨师小白教学一道经典中餐的制作方法。​ | 智能体的人设与回复逻辑。长度为 0~ 20,000 个字符。默认为空。​开启前缀缓存后，不支持通过prompt参数设置提示词，需要通过prefix_prompt_info参数设置提示词。​ |\n| prompt_mode​ | String​ | 可选​ | standard​ | 提示词模式，用于指定智能体的人设与回复逻辑的配置方式。枚举值：​standard（默认值）：标准模式。未开启前缀缓存时使用该模式。​prefix：前缀缓存模式，提示词会分为缓存提示词和非缓存提示词两部分。开启前缀缓存后需要设置为该模式。​ |\n| prefix_prompt_info​ | Object ofPrefixPromptInfo​ | 可选​ | \\​ | 通过cache_type或parameters.caching.type开启前缀缓存后，你需要通过该参数设置缓存提示词（prefix_prompt）和非缓存提示词（dynamic_prompt）。不支持通过prompt参数设置提示词。​ |\n\n- standard （默认值）：标准模式。未开启前缀缓存时使用该模式。 ​\n\n- prefix ：前缀缓存模式，提示词会分为缓存提示词和非缓存提示词两部分。开启前缀缓存后需要设置为该模式。 ​\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| prefix_prompt​ | String​ | 可选​ | \\​ | 缓存提示词，大量重复出现的固定规则、模板框架或背景信息，用于指引大模型输出格式与风格。扣子编程会将其缓存并复用，大模型无需重新解析这部分固定信息。​ |\n| dynamic_prompt​ | String​ | 可选​ | \\​ | 非缓存提示词，动态变化的个性化信息，仅针对当前请求生效。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| prologue​ | String​ | 可选​ | 欢迎你，学徒，今天想学一道什么样的菜？​ | 智能体的开场白。长度为 0~ 300 个字符。默认无开场白。​开场白中如果设置了用户名称变量{{user_name}}，API 场景中需要业务方自行处理，例如展示开场白时将此变量替换为业务侧的用户名称。​ |\n| suggested_questions​ | Array of String​ | 可选​ | [\"川菜，我想吃辣的\",\"广东菜，来点鲜的\",\"随机教我一道菜\"]​ | 智能体的开场白预置问题。每个问题长度为 0~ 50 个字符，问题数量无限制。默认无开场白预置问题。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| id_list​ | Array ofPluginIdInfo​ | 可选​ | { \"id_list\": [ { \"plugin_id\": \"731198934927553****\", \"api_id\": \"735057536617362****\" } ] }​ | 智能体的插件列表配置。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| api_id​ | String​ | 必选​ | 735057536617362****​ | 智能体绑定的插件工具 ID。​在扣子编程中，打开资源库页面，选择目标插件，单击插件下的任意工具，页面 URL 中 tool 参数后的数字是插件工具 ID。例如https://www.coze.cn/space/731762895654132****/plugin/735057533610021****/tool/735057536617362****，插件工具 ID 为735057536617362****。​ |\n| plugin_id​ | String​ | 必选​ | 731198934927553****​ | 智能体绑定的插件 ID。​在扣子编程中，打开资源库页面，选择目标插件，页面 URL 中 plugin 参数后的数字是插件 ID。例如​https://www.coze.cn/space/728826510807216****/plugin/731198934927553****，插件 ID 为731198934927553****。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| ids​ | Array ofWorkflowIdInfo​ | 可选​ | [ { \"id\": \"746049108611037****\" }]​ | 智能体的工作流列表配置。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| id​ | String​ | 必选​ | 746049108611037****​ | 智能体绑定的工作流 ID。​进入工作流的编排页面，在页面 URL 中，workflow参数后的数字就是工作流 ID。例如https://www.coze.com/work_flow?space_id=42463***&workflow_id=73505836754923***，工作流 ID 为73505836754923***。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| model_id​ | String​ | 必选​ | 1706077826​ | 智能体绑定的模型 ID。​在工作空间的模型管理页面中单击指定模型，模型详情页面 URL 中model参数后的数字就是模型 ID。例如https://www.coze.cn/space/7288****/model/1716****，模型 ID 为1716****。​ |\n| top_k​ | Integer​ | 可选​ | 50​ | 生成文本时，采样候选集的大小。该参数控制模型在生成每个词时考虑的候选词数量，值越小生成的文本越保守和确定，值越大生成的文本越多样和随机。​ |\n| top_p​ | Double​ | 可选​ | 1​ | Top P，即累计概率。该参数控制模型在生成文本时的采样策略，值越小生成的文本越保守和确定，值越大生成的文本越多样和随机。​说明部分模型不支持该参数，具体支持的模型请参见模型能力差异。​​ |\n| max_tokens​ | Integer​ | 可选​ | 4096​ | 最大回复长度。​ |\n| temperature​ | Double​ | 可选​ | 1​ | 生成随机性。​说明部分模型不支持该参数，具体支持的模型请参见模型能力差异。​​ |\n| sp_anti_leak​ | Boolean​ | 可选​ | true​ | 是否启用 SP 拼接防泄露指令，开启后，当用户尝试获取或复述系统内部的规则、提示词或其他敏感内容时，智能体将礼貌地拒绝用户的请求，确保机密信息不被泄露。​true：开启系统提示词防泄漏。​false：（默认值）关闭系统提示词防泄漏。​ |\n| context_round​ | Integer​ | 可选​ | 30​ | 携带上下文轮数。​ |\n| response_format​ | String​ | 可选​ | text​ | 输出格式。取值：​text：文本。​markdown：Markdown格式。​json：JSON 格式。​ |\n| sp_current_time​ | Boolean​ | 可选​ | true​ | 是否在 SP 中包含当前时间信息。​true：智能体在与用户对话时能实时获取并提供准确的时间信息。​false：（默认值）在系统提示词中不会拼接当前时间信息。​ |\n| presence_penalty​ | Double​ | 可选​ | 0​ | 重复主题惩罚。​ |\n| frequency_penalty​ | Double​ | 可选​ | 0​ | 重复语句惩罚。​ |\n| cache_type​ | String​ | 可选​ | closed​ | 为模型开启或关闭前缀缓存。开启前缀缓存后，扣子编程将自动缓存公共前缀内容，后续调用模型时无需重复发送，从而加快模型的响应速度并降低使用成本。具体用法请参见前缀缓存。枚举值：​closed（默认值）：关闭前缀缓存。​prefix：开启前缀缓存。​说明套餐限制：仅扣子个人付费版、企业版（企业标准版、企业旗舰版）支持开启上下文前缀缓存。​模型限制：仅部分模型支持该参数，具体支持的模型请参见模型能力差异。​其他限制：该参数仅适用于 Context API 协议，Responses API 协议的前缀缓存需要通过parameters参数进行配置。​​ |\n| api_mode​ | String​ | 可选​ | chat_api​ | 模型的 API 协议类型，用于指定智能体与模型交互时使用的 API 协议。枚举值：​chat_api（默认值）：智能体需要在请求时带上对话历史作为上下文。适用于日常闲聊、基础咨询、简单文本生成等轻量化需求。​responses_api：模型新推出的 API，不仅延续了 Chat API 的易用性，还原生支持高效的上下文管理和前缀缓存。适用于需要多步推理等复杂任务链处理的场景。​说明仅部分模型支持responses_api协议，具体支持的模型请参见模型能力差异。​​ |\n| parameters​ | JSON Map​ | 可选​ | 深度思考示例：​{\"thinking_type\": \"disabled\"}​上下文管理示例：​{\"caching\":{\"type\":\"disabled\"},\"store\":true,\"caching_expire_time\":259200}​ | 你可以通过该参数配置模型深度思考和responses_api的上下文管理相关配置。​深度思考：开发者可以设置开启或关闭深度思考，从而灵活控制模型在交互过程中的 Token 消耗。​说明仅部分模型支持深度思考开关，具体支持的模型请参见模型能力差异。​​深度思考thinking_type的值可以设置为：​enabled：开启深度思考。智能体在与用户对话时会先输出一段思维链内容，通过逐步拆解问题、梳理逻辑，提升最终输出答案的准确性。但该模式会因额外的推理步骤消耗更多 Token。​说明开启深度思考后：​模型不支持 Function Call，即工具调用。​智能体不能使用插件、触发器、变量、数据库、文件盒子、不能添加工作流和对话流。​不支持使用插件和工作流相关的快捷指令。​​disabled：关闭深度思考。智能体将直接生成最终答案，不再经过额外的思维链推理过程，可有效降低 Token 消耗，提升响应速度。​auto：启用自动模式后，模型会根据对话内容的复杂度，自动判断是否启用深度思考。​上下文管理：当 api_mode 为responses_api时，支持配置前缀缓存、存储和存储时长。​说明仅部分模型支持前缀缓存，具体支持的模型请参见模型能力差异。​​上下文管理的具体参数如下：​caching.type：你可以设置为enabled或disabled，开启或关闭前缀缓存。默认为disabled。前缀缓存的具体用法请参考前缀缓存。​store：你可以设置为true或false，开启或关闭存储功能。开启后将自动存储输入、输出字段的消息，不存储思维链中的消息。默认为true。若需使用前缀缓存功能，需开启存储功能。​caching_expire_time：设置上下文缓存和存储的有效时长，单位：秒。最大为 259200 秒（3天）。默认值：259200。​ |\n\n- true：开启系统提示词防泄漏。 ​\n\n- false：（默认值）关闭系统提示词防泄漏。 ​\n\n- text：文本。 ​\n\n- markdown：Markdown格式。 ​\n\n- json：JSON 格式。 ​\n\n- true：智能体在与用户对话时能实时获取并提供准确的时间信息。 ​\n\n- false：（默认值）在系统提示词中不会拼接当前时间信息。 ​\n\n- closed （默认值）：关闭前缀缓存。 ​\n\n- prefix ：开启前缀缓存。 ​\n\n- 套餐限制 ：仅扣子个人付费版、企业版（企业标准版、企业旗舰版）支持开启上下文前缀缓存。 ​\n\n- 模型限制 ：仅部分模型支持该参数，具体支持的模型请参见 模型能力差异 。 ​\n\n- 其他限制 ：该参数仅适用于 Context API 协议，Responses API 协议的前缀缓存需要通过 parameters 参数进行配置。 ​\n\n- chat_api （默认值）：智能体需要在请求时带上对话历史作为上下文。适用于日常闲聊、基础咨询、简单文本生成等轻量化需求。 ​\n\n- responses_api ：模型新推出的 API，不仅延续了 Chat API 的易用性，还原生支持高效的上下文管理和前缀缓存。适用于需要多步推理等复杂任务链处理的场景。 ​\n\n- 深度思考 ：开发者可以设置开启或关闭深度思考，从而灵活控制模型在交互过程中的 Token 消耗。 ​\n\n- 说明 仅部分模型支持深度思考开关，具体支持的模型请参见 模型能力差异 。 ​ ​\n\n- 深度思考 thinking_type 的值可以设置为： ​\n\n- enabled ：开启深度思考。智能体在与用户对话时会先输出一段思维链内容，通过逐步拆解问题、梳理逻辑，提升最终输出答案的准确性。但该模式会因额外的推理步骤消耗更多 Token。 ​\n\n- 说明 开启深度思考后： ​ 模型不支持 Function Call，即工具调用。 ​ 智能体不能使用插件、触发器、变量、数据库、文件盒子、不能添加工作流和对话流。 ​ 不支持使用插件和工作流相关的快捷指令。 ​ ​\n\n- 模型不支持 Function Call，即工具调用。 ​\n\n- 智能体不能使用插件、触发器、变量、数据库、文件盒子、不能添加工作流和对话流。 ​\n\n- 不支持使用插件和工作流相关的快捷指令。 ​\n\n- disabled ：关闭深度思考。智能体将直接生成最终答案，不再经过额外的思维链推理过程，可有效降低 Token 消耗，提升响应速度。 ​\n\n- auto ：启用自动模式后，模型会根据对话内容的复杂度，自动判断是否启用深度思考。 ​\n\n- 上下文管理 ：当 api_mode 为 responses_api 时，支持配置前缀缓存、存储和存储时长。 ​\n\n- 说明 仅部分模型支持前缀缓存，具体支持的模型请参见 模型能力差异 。 ​ ​\n\n- 上下文管理的具体参数如下： ​\n\n- caching.type ：你可以设置为 enabled 或 disabled ，开启或关闭前缀缓存。默认为 disabled 。前缀缓存的具体用法请参考 前缀缓存 。 ​\n\n- store ：你可以设置为 true 或 false ，开启或关闭存储功能。开启后将自动存储输入、输出字段的消息，不存储思维链中的消息。默认为 true 。 若需使用前缀缓存功能，需开启存储功能。 ​\n\n- caching_expire_time ：设置上下文缓存和存储的有效时长，单位：秒。最大为 259200 秒（3天）。默认值：259200。 ​\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| reply_mode​ | String​ | 可选​ | enable​ | 配置智能体回复后，是否提供用户问题建议。枚举值：​enable：在智能体回复后，提供最多 3 条用户问题建议。​disable：在每次智能体回复后，不会提供任何用户问题建议。​customized：开启用户问题建议，并根据用户自定义的 Prompt 提供用户问题建议。你需要在customized_prompt参数中设置关于用户问题建议的 Prompt。​ |\n| customized_prompt​ | String​ | 可选​ | 问题应该与你最后一轮的回复紧密相关，可以引发进一步的讨论。​ | 关于用户问题建议的 Prompt。当reply_mode设置为customized时，需要设置提示词内容。智能体会根据该提示词生成用户问题建议。​ |\n\n- enable ：在智能体回复后，提供最多 3 条用户问题建议。 ​\n\n- disable ：在每次智能体回复后，不会提供任何用户问题建议。 ​\n\n- customized ：开启用户问题建议，并根据用户自定义的 Prompt 提供用户问题建议。你需要在 customized_prompt 参数中设置关于用户问题建议的 Prompt。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。​0 表示调用成功。​其他值表示调用失败。你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| data​ | Object ofCreateDraftBotData​ | { \"bot_id\": \"73428668*****\" }​ | 已创建的智能体信息。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n\n- 0 表示调用成功。 ​\n\n- 其他值表示调用失败。你可以通过 msg 字段判断详细的错误原因。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| bot_id​ | String​ | 73428668*****​ | 创建的智能体 ID。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/update_bot",
      "title": "更新智能体",
      "content": {
        "sections": [],
        "full_text": "更新智能体\n\n更新智能体的配置。\n\n​\n\n通过此 API 可更新通过扣子编程或 API 方式创建的所有智能体。通过 API 方式修改智能体除了智能体名称和描述、头像、人设与回复逻辑及开场白之外，还支持为智能体绑定知识库和插件。\n\n​\n\n接口限制\n\n​\n\n不支持通过 API 绑定火山知识库，只能绑定扣子知识库。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/bot/update\n\n​\n\n权限\n\n​\n\nedit\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nedit\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n调用接口修改智能体的配置。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $AccessToken\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n73428668*****\n\n​\n\n待修改配置的智能体 ID。\n\n​\n\n进入智能体的 开发页面，开发页面 URL 中\n\nbot\n\n参数后的数字就是智能体 ID。例如\n\nhttps://www.coze.cn/space/341****/bot/73428668*****\n\n，bot ID 为\n\n73428668*****\n\n。\n\n​\n\nname\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n每日学一菜\n\n​\n\n智能体的名称。长度为 1~ 20 个字符。\n\n​\n\ndescription\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n每天教你一道菜的做法，暑假之后你将成为中餐大厨～\n\n​\n\n智能体的描述信息。长度为 0~ 500 个字符。默认为空。\n\n​\n\nicon_file_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n73694959811****\n\n​\n\n作为智能体头像的文件 ID。\n\n​\n\n未指定文件 ID 时，扣子编程默认为智能体指定一个头像。\n\n​\n\n如需使用自定义头像，应先通过\n\n上传文件\n\n接口上传本地文件，从接口响应中获取文件 ID。文件 ID 作为智能体头像时，有效期为永久有效。\n\n​\n\nprompt_info\n\n​\n\nObject of\n\nPromptInfo\n\n​\n\n可选\n\n​\n\n{ \"prompt\": \"你是一位经验丰富的中餐大厨，能够熟练传授各类中餐的烹饪技巧，每日为大学生厨师小白教学一道经典中餐的制作方法。\" }\n\n​\n\n智能体的人设与回复逻辑。\n\n​\n\nonboarding_info\n\n​\n\nObject of\n\nOnboardingInfo\n\n​\n\n可选\n\n​\n\n{ \"prologue\": \"欢迎你，学徒，今天想学一道什么样的菜？\", \"suggested_questions\": [ \"川菜，我想吃辣的\", \"广东菜，来点鲜的\", \"随机教我一道菜\" ] }\n\n​\n\n智能体的开场白相关设置。\n\n​\n\nknowledge\n\n​\n\nObject of\n\nKnowledge\n\n​\n\n可选\n\n​\n\n{ \"dataset_ids\": [ \"738509371792341****\" ], \"auto_call\": true, \"search_strategy\": 1 } }\n\n​\n\n智能体的知识库配置。\n\n​\n\n说明\n\n最多绑定 150 个知识库。\n\n​\n\n不支持通过 API 绑定火山知识库，只能绑定扣子知识库。\n\n​\n\n​\n\nplugin_id_list\n\n​\n\nObject of\n\nPluginIdList\n\n​\n\n可选\n\n​\n\n{\"id_list\":[{\"plugin_id\":\"731198934927553****\",\"api_id\":\"735057536617362****\"}]}\n\n​\n\n智能体的插件配置列表，用于绑定插件及其工具。\n\n​\n\nworkflow_id_list\n\n​\n\nObject of\n\nWorkflowIdList\n\n​\n\n可选\n\n​\n\n{\"ids\": [{\"id\": \"746049108611037****\"}]}\n\n​\n\n智能体绑定的工作流 ID 列表，用于配置智能体的工作流。\n\n​\n\nmodel_info_config\n\n​\n\nObject of\n\nModelInfoConfig\n\n​\n\n可选\n\n​\n\n{ \"model_id\": \"1706077826\" }\n\n​\n\n智能体的模型配置，用于指定智能体使用的模型及其相关参数。\n\n​\n\n模型支持的配置参数及取值范围、默认值各不相同，可在扣子编程中查看具体模型的参数及取值范围。\n\n​\n\nsuggest_reply_info\n\n​\n\nObject of\n\nSuggestReplyInfo\n\n​\n\n可选\n\n​\n\n{\"reply_mode\":\"enable\"}\n\n​\n\n配置智能体回复后的用户问题建议功能。\n\n​\n\n​\n\nPromptInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nprompt\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n你是一位经验丰富的中餐大厨，能够熟练传授各类中餐的烹饪技巧，每日为大学生厨师小白教学一道经典中餐的制作方法。\n\n​\n\n智能体的人设与回复逻辑。长度为 0~ 20,000 个字符。默认为空。\n\n​\n\n开启前缀缓存后，不支持通过\n\nprompt\n\n参数设置提示词，需要通过\n\nprefix_prompt_info\n\n参数设置提示词。\n\n​\n\nprompt_mode\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nstandard\n\n​\n\n提示词模式，用于指定智能体的人设与回复逻辑的配置方式。枚举值：\n\n​\n\nstandard\n\n（默认值）：标准模式。未开启前缀缓存时使用该模式。\n\n​\n\nprefix\n\n：前缀缓存模式，提示词会分为缓存提示词和非缓存提示词两部分。开启前缀缓存后需要设置为该模式。\n\n​\n\nprefix_prompt_info\n\n​\n\nObject of\n\nPrefixPromptInfo\n\n​\n\n可选\n\n​\n\n\\\n\n​\n\n通过\n\ncache_type\n\n或\n\nparameters.caching.type\n\n开启前缀缓存后，你需要通过该参数设置\n\n缓存提示词\n\n（\n\nprefix_prompt\n\n）和\n\n非缓存提示词\n\n（\n\ndynamic_prompt\n\n）。不支持通过\n\nprompt\n\n参数设置提示词。\n\n​\n\n​\n\nPrefixPromptInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nprefix_prompt\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n\\\n\n​\n\n缓存提示词，大量重复出现的固定规则、模板框架或背景信息，用于指引大模型输出格式与风格。扣子编程会将其缓存并复用，大模型无需重新解析这部分固定信息。\n\n​\n\ndynamic_prompt\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n\\\n\n​\n\n非缓存提示词，动态变化的个性化信息，仅针对当前请求生效。\n\n​\n\n​\n\nOnboardingInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nprologue\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n欢迎你，学徒，今天想学一道什么样的菜？\n\n​\n\n智能体的开场白。长度为 0~ 300 个字符。默认无开场白。\n\n​\n\n开场白中如果设置了用户名称变量\n\n{{user_name}}\n\n，API 场景中需要业务方自行处理，例如展示开场白时将此变量替换为业务侧的用户名称。\n\n​\n\nsuggested_questions\n\n​\n\nArray of String\n\n​\n\n可选\n\n​\n\n[\"川菜，我想吃辣的\",\"广东菜，来点鲜的\",\"随机教我一道菜\"]\n\n​\n\n智能体的开场白预置问题。每个问题长度为 0~ 50 个字符，问题数量无限制。默认无开场白预置问题。\n\n​\n\n​\n\nKnowledge\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndataset_ids\n\n​\n\nArray of String\n\n​\n\n可选\n\n​\n\n[\"738509371792341****\"]\n\n​\n\n智能体绑定的知识库 ID。\n\n​\n\n在扣子编程中打开指定知识库页面，页面 URL 中\n\nknowledge\n\n参数后的数字就是知识库 ID。例如\n\nhttps://www.coze.cn/space/736142423532160****/knowledge/738509371792341****\n\n，知识库 ID 为\n\n738509371792341****\n\n。\n\n​\n\n说明\n\n最多绑定 150 个知识库。\n\n​\n\n不支持通过 API 绑定火山知识库，只能绑定扣子知识库。\n\n​\n\n​\n\nauto_call\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\ntrue\n\n​\n\n是否自动调用知识库。取值包括：\n\n​\n\ntrue：（默认）自动调用\n\n。每一轮对话都会调用知识库，使用召回的内容辅助生成回复。\n\n​\n\nfalse：按需调用\n\n。根据实际需要来调用知识库，使用召回内容辅助生成回复。此时，需要在左侧的人设与回复逻辑区域明确写清楚在什么情况下调用哪个知识库进行回复。\n\n​\n\nsearch_strategy\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n1\n\n​\n\n知识库搜索策略。取值包括：\n\n​\n\n0\n\n：（默认）语义搜索。像人类一样去理解词与词，句与句之间的关系。\n\n​\n\n1\n\n：混合搜索。结合全文检索和语义检索的优势，并对结果进行综合排序召回相关的内容片段。\n\n​\n\n20\n\n：全文搜索。基于关键词进行全文检索。\n\n​\n\n​\n\nPluginIdList\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid_list\n\n​\n\nArray of\n\nPluginIdInfo\n\n​\n\n可选\n\n​\n\n{ \"id_list\": [ { \"plugin_id\": \"731198934927553****\", \"api_id\": \"735057536617362****\" } ] }\n\n​\n\n智能体的插件列表配置。\n\n​\n\n​\n\nPluginIdInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\napi_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n735057536617362****\n\n​\n\n智能体绑定的插件工具 ID。\n\n​\n\n在扣子编程中，打开资源库页面，选择目标插件，单击插件下的任意工具，页面 URL 中 tool 参数后的数字是插件工具 ID。例如\n\nhttps://www.coze.cn/space/731762895654132****/plugin/735057533610021****/tool/735057536617362****\n\n，插件工具 ID 为\n\n735057536617362****\n\n。\n\n​\n\nplugin_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n731198934927553****\n\n​\n\n智能体绑定的插件 ID。\n\n​\n\n在扣子编程中，打开资源库页面，选择目标插件，页面 URL 中 plugin 参数后的数字是插件 ID。例如\n\n​\n\nhttps://www.coze.cn/space/728826510807216****/plugin/731198934927553****\n\n，插件 ID 为\n\n731198934927553****\n\n。\n\n​\n\n​\n\nWorkflowIdList\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nids\n\n​\n\nArray of\n\nWorkflowIdInfo\n\n​\n\n可选\n\n​\n\n[ { \"id\": \"746049108611037****\" }]\n\n​\n\n智能体的工作流列表配置。\n\n​\n\n​\n\nWorkflowIdInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n746049108611037****\n\n​\n\n智能体绑定的工作流 ID。\n\n​\n\n进入工作流的编排页面，在页面 URL 中，\n\nworkflow\n\n参数后的数字就是工作流 ID。例如\n\nhttps://www.coze.com/work_flow?space_id=42463***&workflow_id=73505836754923***\n\n，工作流 ID 为\n\n73505836754923***\n\n。\n\n​\n\n​\n\nModelInfoConfig\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nmodel_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n1706077826\n\n​\n\n智能体绑定的模型 ID。\n\n​\n\n在工作空间的模型管理页面中单击指定模型，模型详情页面 URL 中\n\nmodel\n\n参数后的数字就是模型 ID。例如\n\nhttps://www.coze.cn/space/7288\n\n****\n\n/model/1716\n\n****\n\n，模型 ID 为\n\n1716\n\n****\n\n。\n\n​\n\ntop_k\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n50\n\n​\n\n生成文本时，采样候选集的大小。该参数控制模型在生成每个词时考虑的候选词数量，值越小生成的文本越保守和确定，值越大生成的文本越多样和随机。\n\n​\n\ntop_p\n\n​\n\nDouble\n\n​\n\n可选\n\n​\n\n1\n\n​\n\nTop P，即累计概率。该参数控制模型在生成文本时的采样策略，值越小生成的文本越保守和确定，值越大生成的文本越多样和随机。\n\n​\n\n说明\n\n部分模型不支持该参数，具体支持的模型请参见\n\n模型能力差异\n\n。\n\n​\n\n​\n\nmax_tokens\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n4096\n\n​\n\n最大回复长度。\n\n​\n\ntemperature\n\n​\n\nDouble\n\n​\n\n可选\n\n​\n\n1\n\n​\n\n生成随机性。\n\n​\n\n说明\n\n部分模型不支持该参数，具体支持的模型请参见\n\n模型能力差异\n\n。\n\n​\n\n​\n\nsp_anti_leak\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\ntrue\n\n​\n\n是否启用 SP 拼接防泄露指令，开启后，当用户尝试获取或复述系统内部的规则、提示词或其他敏感内容时，智能体将礼貌地拒绝用户的请求，确保机密信息不被泄露。\n\n​\n\ntrue：开启系统提示词防泄漏。\n\n​\n\nfalse：（默认值）关闭系统提示词防泄漏。\n\n​\n\ncontext_round\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n30\n\n​\n\n携带上下文轮数。\n\n​\n\nresponse_format\n\n​\n\nString\n\n​\n\n可选\n\n​\n\ntext\n\n​\n\n输出格式。取值：\n\n​\n\ntext：文本。\n\n​\n\nmarkdown：Markdown格式。\n\n​\n\njson：JSON 格式。\n\n​\n\nsp_current_time\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\ntrue\n\n​\n\n是否在 SP 中包含当前时间信息。\n\n​\n\ntrue：智能体在与用户对话时能实时获取并提供准确的时间信息。\n\n​\n\nfalse：（默认值）在系统提示词中不会拼接当前时间信息。\n\n​\n\npresence_penalty\n\n​\n\nDouble\n\n​\n\n可选\n\n​\n\n0\n\n​\n\n重复主题惩罚。\n\n​\n\nfrequency_penalty\n\n​\n\nDouble\n\n​\n\n可选\n\n​\n\n0\n\n​\n\n重复语句惩罚。\n\n​\n\ncache_type\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nclosed\n\n​\n\n为模型开启或关闭前缀缓存。开启前缀缓存后，扣子编程将自动缓存公共前缀内容，后续调用模型时无需重复发送，从而加快模型的响应速度并降低使用成本。具体用法请参见\n\n前缀缓存\n\n。枚举值：\n\n​\n\nclosed\n\n（默认值）：关闭前缀缓存。\n\n​\n\nprefix\n\n：开启前缀缓存。\n\n​\n\n说明\n\n套餐限制\n\n：仅扣子个人付费版、企业版（企业标准版、企业旗舰版）支持开启上下文前缀缓存。\n\n​\n\n模型限制\n\n：仅部分模型支持该参数，具体支持的模型请参见\n\n模型能力差异\n\n。\n\n​\n\n其他限制\n\n：该参数仅适用于 Context API 协议，Responses API 协议的前缀缓存需要通过\n\nparameters\n\n参数进行配置。\n\n​\n\n​\n\napi_mode\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nchat_api\n\n​\n\n模型的 API 协议类型，用于指定智能体与模型交互时使用的 API 协议。枚举值：\n\n​\n\nchat_api\n\n（默认值）：智能体需要在请求时带上对话历史作为上下文。适用于日常闲聊、基础咨询、简单文本生成等轻量化需求。\n\n​\n\nresponses_api\n\n：模型新推出的 API，不仅延续了 Chat API 的易用性，还原生支持高效的上下文管理和前缀缓存。适用于需要多步推理等复杂任务链处理的场景。\n\n​\n\n说明\n\n仅部分模型支持\n\nresponses_api\n\n协议，具体支持的模型请参见\n\n模型能力差异\n\n。\n\n​\n\n​\n\nparameters\n\n​\n\nJSON Map\n\n​\n\n可选\n\n​\n\n深度思考示例：\n\n​\n\n{\"thinking_type\": \"disabled\"}\n\n​\n\n上下文管理示例：\n\n​\n\n{\"caching\":{\"type\":\"disabled\"},\"store\":true,\"caching_expire_time\":259200}\n\n​\n\n你可以通过该参数配置模型深度思考和\n\nresponses_api\n\n的上下文管理相关配置。\n\n​\n\n深度思考\n\n：开发者可以设置开启或关闭深度思考，从而灵活控制模型在交互过程中的 Token 消耗。\n\n​\n\n说明\n\n仅部分模型支持深度思考开关，具体支持的模型请参见\n\n模型能力差异\n\n。\n\n​\n\n​\n\n深度思考\n\nthinking_type\n\n的值可以设置为：\n\n​\n\nenabled\n\n：开启深度思考。智能体在与用户对话时会先输出一段思维链内容，通过逐步拆解问题、梳理逻辑，提升最终输出答案的准确性。但该模式会因额外的推理步骤消耗更多 Token。\n\n​\n\n说明\n\n开启深度思考后：\n\n​\n\n模型不支持 Function Call，即工具调用。\n\n​\n\n智能体不能使用插件、触发器、变量、数据库、文件盒子、不能添加工作流和对话流。\n\n​\n\n不支持使用插件和工作流相关的快捷指令。\n\n​\n\n​\n\ndisabled\n\n：关闭深度思考。智能体将直接生成最终答案，不再经过额外的思维链推理过程，可有效降低 Token 消耗，提升响应速度。\n\n​\n\nauto\n\n：启用自动模式后，模型会根据对话内容的复杂度，自动判断是否启用深度思考。\n\n​\n\n上下文管理\n\n：当 api_mode 为\n\nresponses_api\n\n时，支持配置前缀缓存、存储和存储时长。\n\n​\n\n说明\n\n仅部分模型支持前缀缓存，具体支持的模型请参见\n\n模型能力差异\n\n。\n\n​\n\n​\n\n上下文管理的具体参数如下：\n\n​\n\ncaching.type\n\n：你可以设置为\n\nenabled\n\n或\n\ndisabled\n\n，开启或关闭前缀缓存。默认为\n\ndisabled\n\n。前缀缓存的具体用法请参考\n\n前缀缓存\n\n。\n\n​\n\nstore\n\n：你可以设置为\n\ntrue\n\n或\n\nfalse\n\n，开启或关闭存储功能。开启后将自动存储输入、输出字段的消息，不存储思维链中的消息。默认为\n\ntrue\n\n。\n\n若需使用前缀缓存功能，需开启存储功能。\n\n​\n\ncaching_expire_time\n\n：设置上下文缓存和存储的有效时长，单位：秒。最大为 259200 秒（3天）。默认值：259200。\n\n​\n\n​\n\nSuggestReplyInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nreply_mode\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nenable\n\n​\n\n配置智能体回复后，是否提供用户问题建议。枚举值：\n\n​\n\nenable\n\n：在智能体回复后，提供最多 3 条用户问题建议。\n\n​\n\ndisable\n\n：在每次智能体回复后，不会提供任何用户问题建议。\n\n​\n\ncustomized\n\n：开启用户问题建议，并根据用户自定义的 Prompt 提供用户问题建议。你需要在\n\ncustomized_prompt\n\n参数中设置关于用户问题建议的 Prompt。\n\n​\n\ncustomized_prompt\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n问题应该与你最后一轮的回复紧密相关，可以引发进一步的讨论。\n\n​\n\n关于用户问题建议的 Prompt。当\n\nreply_mode\n\n设置为\n\ncustomized\n\n时，需要设置提示词内容。智能体会根据该提示词生成用户问题建议。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。\n\n​\n\n0 表示调用成功。\n\n​\n\n其他值表示调用失败。你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{ \"logid\": \"20250106172024B5F607030EFFAD653960\" }\n\n​\n\n响应详情信息。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/bot/update' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n{\n\n​\n\n\"bot_id\"\n\n:\n\n\"73428668*****\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"每日学一菜\"\n\n,\n\n​\n\n\"description\"\n\n:\n\n\"每天教你一道菜的做法，暑假之后你将成为中餐大厨～\"\n\n,\n\n​\n\n\"icon_file_id\"\n\n:\n\n\"73694959811****\"\n\n,\n\n​\n\n\"prompt_info\"\n\n:\n\n{\n\n​\n\n\"prompt\"\n\n:\n\n\"你是一位经验丰富的中餐大厨，能够熟练传授各类中餐的烹饪技巧，每日为大学生厨师小白教学一道经典中餐的制作方法。\"\n\n​\n\n},\n\n​\n\n\"plugin_id_list\"\n\n:\n\n{\n\n​\n\n\"id_list\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"plugin_id\"\n\n:\n\n\"731198934927553****\"\n\n,\n\n​\n\n\"api_id\"\n\n:\n\n\"735057536617362****\"\n\n​\n\n}\n\n​\n\n]\n\n​\n\n},\n\n​\n\n\"onboarding_info\"\n\n:\n\n{\n\n​\n\n\"prologue\"\n\n:\n\n\"欢迎你，学徒，今天想学一道什么样的菜？\"\n\n,\n\n​\n\n\"suggested_questions\"\n\n:\n\n[\n\n​\n\n\"川菜，我想吃辣的\"\n\n,\n\n​\n\n\"广东菜，来点鲜的\"\n\n,\n\n​\n\n\"随机教我一道菜\"\n\n​\n\n]\n\n​\n\n},\n\n​\n\n\"knowledge\"\n\n:\n\n{\n\n​\n\n\"dataset_ids\"\n\n:\n\n[\n\n​\n\n\"738509371792341****\"\n\n​\n\n],\n\n​\n\n\"auto_call\"\n\n:\n\ntrue\n\n,\n\n​\n\n\"search_strategy\"\n\n:\n\n1\n\n​\n\n},\n\n​\n\n\"model_info_config\"\n\n:\n\n{\n\n​\n\n\"model_id\"\n\n:\n\n\"1706077826\"\n\n​\n\n},\n\n​\n\n\"workflow_id_list\"\n\n:\n\n{\n\n​\n\n\"ids\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"746049108611037****\"\n\n​\n\n}\n\n​\n\n]\n\n​\n\n}\n\n​\n\n}\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n创建智能体\n\n下一篇\n\n发布智能体",
        "links": []
      },
      "markdown": "| 请求方式​ | POST |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/bot/update​ |\n| 权限​ | edit​确保调用该接口使用的访问令牌开通了edit权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 调用接口修改智能体的配置。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $AccessToken​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| bot_id​ | String​ | 必选​ | 73428668*****​ | 待修改配置的智能体 ID。​进入智能体的 开发页面，开发页面 URL 中bot参数后的数字就是智能体 ID。例如https://www.coze.cn/space/341****/bot/73428668*****，bot ID 为73428668*****。​ |\n| name​ | String​ | 可选​ | 每日学一菜​ | 智能体的名称。长度为 1~ 20 个字符。​ |\n| description​ | String​ | 可选​ | 每天教你一道菜的做法，暑假之后你将成为中餐大厨～​ | 智能体的描述信息。长度为 0~ 500 个字符。默认为空。​ |\n| icon_file_id​ | String​ | 可选​ | 73694959811****​ | 作为智能体头像的文件 ID。​未指定文件 ID 时，扣子编程默认为智能体指定一个头像。​如需使用自定义头像，应先通过上传文件接口上传本地文件，从接口响应中获取文件 ID。文件 ID 作为智能体头像时，有效期为永久有效。​ |\n| prompt_info​ | Object ofPromptInfo​ | 可选​ | { \"prompt\": \"你是一位经验丰富的中餐大厨，能够熟练传授各类中餐的烹饪技巧，每日为大学生厨师小白教学一道经典中餐的制作方法。\" }​ | 智能体的人设与回复逻辑。​ |\n| onboarding_info​ | Object ofOnboardingInfo​ | 可选​ | { \"prologue\": \"欢迎你，学徒，今天想学一道什么样的菜？\", \"suggested_questions\": [ \"川菜，我想吃辣的\", \"广东菜，来点鲜的\", \"随机教我一道菜\" ] }​ | 智能体的开场白相关设置。​ |\n| knowledge​ | Object ofKnowledge​ | 可选​ | { \"dataset_ids\": [ \"738509371792341****\" ], \"auto_call\": true, \"search_strategy\": 1 } }​ | 智能体的知识库配置。​说明最多绑定 150 个知识库。​不支持通过 API 绑定火山知识库，只能绑定扣子知识库。​​ |\n| plugin_id_list​ | Object ofPluginIdList​ | 可选​ | {\"id_list\":[{\"plugin_id\":\"731198934927553****\",\"api_id\":\"735057536617362****\"}]}​ | 智能体的插件配置列表，用于绑定插件及其工具。​ |\n| workflow_id_list​ | Object ofWorkflowIdList​ | 可选​ | {\"ids\": [{\"id\": \"746049108611037****\"}]}​ | 智能体绑定的工作流 ID 列表，用于配置智能体的工作流。​ |\n| model_info_config​ | Object ofModelInfoConfig​ | 可选​ | { \"model_id\": \"1706077826\" }​ | 智能体的模型配置，用于指定智能体使用的模型及其相关参数。​模型支持的配置参数及取值范围、默认值各不相同，可在扣子编程中查看具体模型的参数及取值范围。​ |\n| suggest_reply_info​ | Object ofSuggestReplyInfo​ | 可选​ | {\"reply_mode\":\"enable\"}​ | 配置智能体回复后的用户问题建议功能。​ |\n\n- 未指定文件 ID 时，扣子编程默认为智能体指定一个头像。 ​\n\n- 如需使用自定义头像，应先通过 上传文件 接口上传本地文件，从接口响应中获取文件 ID。文件 ID 作为智能体头像时，有效期为永久有效。 ​\n\n- 最多绑定 150 个知识库。 ​\n\n- 不支持通过 API 绑定火山知识库，只能绑定扣子知识库。 ​\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| prompt​ | String​ | 可选​ | 你是一位经验丰富的中餐大厨，能够熟练传授各类中餐的烹饪技巧，每日为大学生厨师小白教学一道经典中餐的制作方法。​ | 智能体的人设与回复逻辑。长度为 0~ 20,000 个字符。默认为空。​开启前缀缓存后，不支持通过prompt参数设置提示词，需要通过prefix_prompt_info参数设置提示词。​ |\n| prompt_mode​ | String​ | 可选​ | standard​ | 提示词模式，用于指定智能体的人设与回复逻辑的配置方式。枚举值：​standard（默认值）：标准模式。未开启前缀缓存时使用该模式。​prefix：前缀缓存模式，提示词会分为缓存提示词和非缓存提示词两部分。开启前缀缓存后需要设置为该模式。​ |\n| prefix_prompt_info​ | Object ofPrefixPromptInfo​ | 可选​ | \\​ | 通过cache_type或parameters.caching.type开启前缀缓存后，你需要通过该参数设置缓存提示词（prefix_prompt）和非缓存提示词（dynamic_prompt）。不支持通过prompt参数设置提示词。​ |\n\n- standard （默认值）：标准模式。未开启前缀缓存时使用该模式。 ​\n\n- prefix ：前缀缓存模式，提示词会分为缓存提示词和非缓存提示词两部分。开启前缀缓存后需要设置为该模式。 ​\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| prefix_prompt​ | String​ | 可选​ | \\​ | 缓存提示词，大量重复出现的固定规则、模板框架或背景信息，用于指引大模型输出格式与风格。扣子编程会将其缓存并复用，大模型无需重新解析这部分固定信息。​ |\n| dynamic_prompt​ | String​ | 可选​ | \\​ | 非缓存提示词，动态变化的个性化信息，仅针对当前请求生效。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| prologue​ | String​ | 可选​ | 欢迎你，学徒，今天想学一道什么样的菜？​ | 智能体的开场白。长度为 0~ 300 个字符。默认无开场白。​开场白中如果设置了用户名称变量{{user_name}}，API 场景中需要业务方自行处理，例如展示开场白时将此变量替换为业务侧的用户名称。​ |\n| suggested_questions​ | Array of String​ | 可选​ | [\"川菜，我想吃辣的\",\"广东菜，来点鲜的\",\"随机教我一道菜\"]​ | 智能体的开场白预置问题。每个问题长度为 0~ 50 个字符，问题数量无限制。默认无开场白预置问题。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| dataset_ids​ | Array of String​ | 可选​ | [\"738509371792341****\"]​ | 智能体绑定的知识库 ID。​在扣子编程中打开指定知识库页面，页面 URL 中knowledge参数后的数字就是知识库 ID。例如https://www.coze.cn/space/736142423532160****/knowledge/738509371792341****，知识库 ID 为738509371792341****。​说明最多绑定 150 个知识库。​不支持通过 API 绑定火山知识库，只能绑定扣子知识库。​​ |\n| auto_call​ | Boolean​ | 可选​ | true​ | 是否自动调用知识库。取值包括：​true：（默认）自动调用。每一轮对话都会调用知识库，使用召回的内容辅助生成回复。​false：按需调用。根据实际需要来调用知识库，使用召回内容辅助生成回复。此时，需要在左侧的人设与回复逻辑区域明确写清楚在什么情况下调用哪个知识库进行回复。​ |\n| search_strategy​ | Integer​ | 可选​ | 1​ | 知识库搜索策略。取值包括：​0：（默认）语义搜索。像人类一样去理解词与词，句与句之间的关系。​1：混合搜索。结合全文检索和语义检索的优势，并对结果进行综合排序召回相关的内容片段。​20：全文搜索。基于关键词进行全文检索。​ |\n\n- 最多绑定 150 个知识库。 ​\n\n- 不支持通过 API 绑定火山知识库，只能绑定扣子知识库。 ​\n\n- true：（默认）自动调用 。每一轮对话都会调用知识库，使用召回的内容辅助生成回复。 ​\n\n- false：按需调用 。根据实际需要来调用知识库，使用召回内容辅助生成回复。此时，需要在左侧的人设与回复逻辑区域明确写清楚在什么情况下调用哪个知识库进行回复。 ​\n\n- 0 ：（默认）语义搜索。像人类一样去理解词与词，句与句之间的关系。 ​\n\n- 1 ：混合搜索。结合全文检索和语义检索的优势，并对结果进行综合排序召回相关的内容片段。 ​\n\n- 20 ：全文搜索。基于关键词进行全文检索。 ​\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| id_list​ | Array ofPluginIdInfo​ | 可选​ | { \"id_list\": [ { \"plugin_id\": \"731198934927553****\", \"api_id\": \"735057536617362****\" } ] }​ | 智能体的插件列表配置。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| api_id​ | String​ | 必选​ | 735057536617362****​ | 智能体绑定的插件工具 ID。​在扣子编程中，打开资源库页面，选择目标插件，单击插件下的任意工具，页面 URL 中 tool 参数后的数字是插件工具 ID。例如https://www.coze.cn/space/731762895654132****/plugin/735057533610021****/tool/735057536617362****，插件工具 ID 为735057536617362****。​ |\n| plugin_id​ | String​ | 必选​ | 731198934927553****​ | 智能体绑定的插件 ID。​在扣子编程中，打开资源库页面，选择目标插件，页面 URL 中 plugin 参数后的数字是插件 ID。例如​https://www.coze.cn/space/728826510807216****/plugin/731198934927553****，插件 ID 为731198934927553****。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| ids​ | Array ofWorkflowIdInfo​ | 可选​ | [ { \"id\": \"746049108611037****\" }]​ | 智能体的工作流列表配置。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| id​ | String​ | 必选​ | 746049108611037****​ | 智能体绑定的工作流 ID。​进入工作流的编排页面，在页面 URL 中，workflow参数后的数字就是工作流 ID。例如https://www.coze.com/work_flow?space_id=42463***&workflow_id=73505836754923***，工作流 ID 为73505836754923***。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| model_id​ | String​ | 必选​ | 1706077826​ | 智能体绑定的模型 ID。​在工作空间的模型管理页面中单击指定模型，模型详情页面 URL 中model参数后的数字就是模型 ID。例如https://www.coze.cn/space/7288****/model/1716****，模型 ID 为1716****。​ |\n| top_k​ | Integer​ | 可选​ | 50​ | 生成文本时，采样候选集的大小。该参数控制模型在生成每个词时考虑的候选词数量，值越小生成的文本越保守和确定，值越大生成的文本越多样和随机。​ |\n| top_p​ | Double​ | 可选​ | 1​ | Top P，即累计概率。该参数控制模型在生成文本时的采样策略，值越小生成的文本越保守和确定，值越大生成的文本越多样和随机。​说明部分模型不支持该参数，具体支持的模型请参见模型能力差异。​​ |\n| max_tokens​ | Integer​ | 可选​ | 4096​ | 最大回复长度。​ |\n| temperature​ | Double​ | 可选​ | 1​ | 生成随机性。​说明部分模型不支持该参数，具体支持的模型请参见模型能力差异。​​ |\n| sp_anti_leak​ | Boolean​ | 可选​ | true​ | 是否启用 SP 拼接防泄露指令，开启后，当用户尝试获取或复述系统内部的规则、提示词或其他敏感内容时，智能体将礼貌地拒绝用户的请求，确保机密信息不被泄露。​true：开启系统提示词防泄漏。​false：（默认值）关闭系统提示词防泄漏。​ |\n| context_round​ | Integer​ | 可选​ | 30​ | 携带上下文轮数。​ |\n| response_format​ | String​ | 可选​ | text​ | 输出格式。取值：​text：文本。​markdown：Markdown格式。​json：JSON 格式。​ |\n| sp_current_time​ | Boolean​ | 可选​ | true​ | 是否在 SP 中包含当前时间信息。​true：智能体在与用户对话时能实时获取并提供准确的时间信息。​false：（默认值）在系统提示词中不会拼接当前时间信息。​ |\n| presence_penalty​ | Double​ | 可选​ | 0​ | 重复主题惩罚。​ |\n| frequency_penalty​ | Double​ | 可选​ | 0​ | 重复语句惩罚。​ |\n| cache_type​ | String​ | 可选​ | closed​ | 为模型开启或关闭前缀缓存。开启前缀缓存后，扣子编程将自动缓存公共前缀内容，后续调用模型时无需重复发送，从而加快模型的响应速度并降低使用成本。具体用法请参见前缀缓存。枚举值：​closed（默认值）：关闭前缀缓存。​prefix：开启前缀缓存。​说明套餐限制：仅扣子个人付费版、企业版（企业标准版、企业旗舰版）支持开启上下文前缀缓存。​模型限制：仅部分模型支持该参数，具体支持的模型请参见模型能力差异。​其他限制：该参数仅适用于 Context API 协议，Responses API 协议的前缀缓存需要通过parameters参数进行配置。​​ |\n| api_mode​ | String​ | 可选​ | chat_api​ | 模型的 API 协议类型，用于指定智能体与模型交互时使用的 API 协议。枚举值：​chat_api（默认值）：智能体需要在请求时带上对话历史作为上下文。适用于日常闲聊、基础咨询、简单文本生成等轻量化需求。​responses_api：模型新推出的 API，不仅延续了 Chat API 的易用性，还原生支持高效的上下文管理和前缀缓存。适用于需要多步推理等复杂任务链处理的场景。​说明仅部分模型支持responses_api协议，具体支持的模型请参见模型能力差异。​​ |\n| parameters​ | JSON Map​ | 可选​ | 深度思考示例：​{\"thinking_type\": \"disabled\"}​上下文管理示例：​{\"caching\":{\"type\":\"disabled\"},\"store\":true,\"caching_expire_time\":259200}​ | 你可以通过该参数配置模型深度思考和responses_api的上下文管理相关配置。​深度思考：开发者可以设置开启或关闭深度思考，从而灵活控制模型在交互过程中的 Token 消耗。​说明仅部分模型支持深度思考开关，具体支持的模型请参见模型能力差异。​​深度思考thinking_type的值可以设置为：​enabled：开启深度思考。智能体在与用户对话时会先输出一段思维链内容，通过逐步拆解问题、梳理逻辑，提升最终输出答案的准确性。但该模式会因额外的推理步骤消耗更多 Token。​说明开启深度思考后：​模型不支持 Function Call，即工具调用。​智能体不能使用插件、触发器、变量、数据库、文件盒子、不能添加工作流和对话流。​不支持使用插件和工作流相关的快捷指令。​​disabled：关闭深度思考。智能体将直接生成最终答案，不再经过额外的思维链推理过程，可有效降低 Token 消耗，提升响应速度。​auto：启用自动模式后，模型会根据对话内容的复杂度，自动判断是否启用深度思考。​上下文管理：当 api_mode 为responses_api时，支持配置前缀缓存、存储和存储时长。​说明仅部分模型支持前缀缓存，具体支持的模型请参见模型能力差异。​​上下文管理的具体参数如下：​caching.type：你可以设置为enabled或disabled，开启或关闭前缀缓存。默认为disabled。前缀缓存的具体用法请参考前缀缓存。​store：你可以设置为true或false，开启或关闭存储功能。开启后将自动存储输入、输出字段的消息，不存储思维链中的消息。默认为true。若需使用前缀缓存功能，需开启存储功能。​caching_expire_time：设置上下文缓存和存储的有效时长，单位：秒。最大为 259200 秒（3天）。默认值：259200。​ |\n\n- true：开启系统提示词防泄漏。 ​\n\n- false：（默认值）关闭系统提示词防泄漏。 ​\n\n- text：文本。 ​\n\n- markdown：Markdown格式。 ​\n\n- json：JSON 格式。 ​\n\n- true：智能体在与用户对话时能实时获取并提供准确的时间信息。 ​\n\n- false：（默认值）在系统提示词中不会拼接当前时间信息。 ​\n\n- closed （默认值）：关闭前缀缓存。 ​\n\n- prefix ：开启前缀缓存。 ​\n\n- 套餐限制 ：仅扣子个人付费版、企业版（企业标准版、企业旗舰版）支持开启上下文前缀缓存。 ​\n\n- 模型限制 ：仅部分模型支持该参数，具体支持的模型请参见 模型能力差异 。 ​\n\n- 其他限制 ：该参数仅适用于 Context API 协议，Responses API 协议的前缀缓存需要通过 parameters 参数进行配置。 ​\n\n- chat_api （默认值）：智能体需要在请求时带上对话历史作为上下文。适用于日常闲聊、基础咨询、简单文本生成等轻量化需求。 ​\n\n- responses_api ：模型新推出的 API，不仅延续了 Chat API 的易用性，还原生支持高效的上下文管理和前缀缓存。适用于需要多步推理等复杂任务链处理的场景。 ​\n\n- 深度思考 ：开发者可以设置开启或关闭深度思考，从而灵活控制模型在交互过程中的 Token 消耗。 ​\n\n- 说明 仅部分模型支持深度思考开关，具体支持的模型请参见 模型能力差异 。 ​ ​\n\n- 深度思考 thinking_type 的值可以设置为： ​\n\n- enabled ：开启深度思考。智能体在与用户对话时会先输出一段思维链内容，通过逐步拆解问题、梳理逻辑，提升最终输出答案的准确性。但该模式会因额外的推理步骤消耗更多 Token。 ​\n\n- 说明 开启深度思考后： ​ 模型不支持 Function Call，即工具调用。 ​ 智能体不能使用插件、触发器、变量、数据库、文件盒子、不能添加工作流和对话流。 ​ 不支持使用插件和工作流相关的快捷指令。 ​ ​\n\n- 模型不支持 Function Call，即工具调用。 ​\n\n- 智能体不能使用插件、触发器、变量、数据库、文件盒子、不能添加工作流和对话流。 ​\n\n- 不支持使用插件和工作流相关的快捷指令。 ​\n\n- disabled ：关闭深度思考。智能体将直接生成最终答案，不再经过额外的思维链推理过程，可有效降低 Token 消耗，提升响应速度。 ​\n\n- auto ：启用自动模式后，模型会根据对话内容的复杂度，自动判断是否启用深度思考。 ​\n\n- 上下文管理 ：当 api_mode 为 responses_api 时，支持配置前缀缓存、存储和存储时长。 ​\n\n- 说明 仅部分模型支持前缀缓存，具体支持的模型请参见 模型能力差异 。 ​ ​\n\n- 上下文管理的具体参数如下： ​\n\n- caching.type ：你可以设置为 enabled 或 disabled ，开启或关闭前缀缓存。默认为 disabled 。前缀缓存的具体用法请参考 前缀缓存 。 ​\n\n- store ：你可以设置为 true 或 false ，开启或关闭存储功能。开启后将自动存储输入、输出字段的消息，不存储思维链中的消息。默认为 true 。 若需使用前缀缓存功能，需开启存储功能。 ​\n\n- caching_expire_time ：设置上下文缓存和存储的有效时长，单位：秒。最大为 259200 秒（3天）。默认值：259200。 ​\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| reply_mode​ | String​ | 可选​ | enable​ | 配置智能体回复后，是否提供用户问题建议。枚举值：​enable：在智能体回复后，提供最多 3 条用户问题建议。​disable：在每次智能体回复后，不会提供任何用户问题建议。​customized：开启用户问题建议，并根据用户自定义的 Prompt 提供用户问题建议。你需要在customized_prompt参数中设置关于用户问题建议的 Prompt。​ |\n| customized_prompt​ | String​ | 可选​ | 问题应该与你最后一轮的回复紧密相关，可以引发进一步的讨论。​ | 关于用户问题建议的 Prompt。当reply_mode设置为customized时，需要设置提示词内容。智能体会根据该提示词生成用户问题建议。​ |\n\n- enable ：在智能体回复后，提供最多 3 条用户问题建议。 ​\n\n- disable ：在每次智能体回复后，不会提供任何用户问题建议。 ​\n\n- customized ：开启用户问题建议，并根据用户自定义的 Prompt 提供用户问题建议。你需要在 customized_prompt 参数中设置关于用户问题建议的 Prompt。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。​0 表示调用成功。​其他值表示调用失败。你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | { \"logid\": \"20250106172024B5F607030EFFAD653960\" }​ | 响应详情信息。​ |\n\n- 0 表示调用成功。 ​\n\n- 其他值表示调用失败。你可以通过 msg 字段判断详细的错误原因。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/publish_bot",
      "title": "发布智能体",
      "content": {
        "sections": [],
        "full_text": "发布智能体\n\n将指定智能体发布到 API、Chat SDK 或者自定义渠道。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/bot/publish\n\n​\n\n权限\n\n​\n\npublish\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\npublish\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n调用接口将指定智能体发布到 API、Chat SDK 或者自定义渠道。\n\n​\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $AccessToken\n\n​\n\n用于验证客户端身份的访问令牌。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n73428668*****\n\n​\n\n要发布的智能体 ID。\n\n​\n\n进入智能体的开发页面，开发页面 URL 中 bot 参数后的数字就是智能体 ID。例如\n\nhttps://www.coze.com/space/341****/bot/73428668*****\n\n，bot ID 为\n\n73428668*****\n\n。\n\n​\n\nconnector_ids\n\n​\n\nArray of String\n\n​\n\n必选\n\n​\n\n[\"1024\"]\n\n​\n\n智能体的发布渠道 ID 列表。目前支持通过此 API 将智能体发布为 API、Chat SDK 以及自定义渠道。\n\n​\n\nAPI: 1024\n\n​\n\nChatSDK: 999\n\n​\n\n自定义渠道: 自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在\n\n账号设置\n\n>\n\n发布渠道\n\n>\n\n企业自定义渠道管理\n\n页面查看渠道 ID。\n\n​\n\nconnectors\n\n​\n\nJSON Map\n\n​\n\n可选\n\n​\n\n{\"7470849514748***\":{\"device_id\":\"[\\\"51237825***\\\"]\"}}\n\n​\n\n智能体发布自定义渠道时，你可以通过该参数传递自定义参数给渠道。例如，设置将智能体发布到指定设备。格式：\n\n{\"渠道 ID\":{\"key\":\"value\"}}\n\n，其中\n\nkey\n\n为\n\n绑定设备 API\n\n中设置的 key 值，\n\nvalue\n\n需要经 JSON 序列化。\n\n​\n\n说明\n\n智能体发布自定义渠道时，需要同时发布 API 渠道。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。\n\n​\n\n0 表示调用成功。\n\n​\n\n其他值表示调用失败。你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndata\n\n​\n\nObject of\n\nPublishDraftBotData\n\n​\n\n{ \"bot_id\": \"743961547827****\", \"version\": \"1732190531***\" }\n\n​\n\n接口响应的业务信息。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"1234567890****\"}\n\n​\n\n包含请求的详细日志信息，用于问题排查和调试。\n\n​\n\n​\n\nPublishDraftBotData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n73428668*****\n\n​\n\n发布的智能体的 ID。\n\n​\n\nversion\n\n​\n\nString\n\n​\n\n1753871809679\n\n​\n\n智能体的版本号，用于标识智能体的当前版本号。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n发布官方渠道\n\n发布自定义渠道\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/bot/publish' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_x*******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"bot_id\"\n\n:\n\n\"73428668*****\"\n\n,\n\n​\n\n\"connector_ids\"\n\n:\n\n[\n\n​\n\n\"1024\"\n\n​\n\n]\n\n​\n\n}\n\n'\n\n​\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"bot_id\"\n\n:\n\n\"743961547827****\"\n\n,\n\n​\n\n\"version\"\n\n:\n\n\"1732190531***\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n更新智能体\n\n下一篇\n\n查看智能体列表",
        "links": []
      },
      "markdown": "| 请求方式​ | POST |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/bot/publish​ |\n| 权限​ | publish​确保调用该接口使用的访问令牌开通了publish权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 调用接口将指定智能体发布到 API、Chat SDK 或者自定义渠道。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $AccessToken​ | 用于验证客户端身份的访问令牌。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| bot_id​ | String​ | 必选​ | 73428668*****​ | 要发布的智能体 ID。​进入智能体的开发页面，开发页面 URL 中 bot 参数后的数字就是智能体 ID。例如https://www.coze.com/space/341****/bot/73428668*****，bot ID 为73428668*****。​ |\n| connector_ids​ | Array of String​ | 必选​ | [\"1024\"]​ | 智能体的发布渠道 ID 列表。目前支持通过此 API 将智能体发布为 API、Chat SDK 以及自定义渠道。​API: 1024​ChatSDK: 999​自定义渠道: 自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在账号设置>发布渠道>企业自定义渠道管理页面查看渠道 ID。​ |\n| connectors​ | JSON Map​ | 可选​ | {\"7470849514748***\":{\"device_id\":\"[\\\"51237825***\\\"]\"}}​ | 智能体发布自定义渠道时，你可以通过该参数传递自定义参数给渠道。例如，设置将智能体发布到指定设备。格式：{\"渠道 ID\":{\"key\":\"value\"}}，其中key为绑定设备 API中设置的 key 值，value需要经 JSON 序列化。​说明智能体发布自定义渠道时，需要同时发布 API 渠道。​​ |\n\n- API: 1024 ​\n\n- ChatSDK: 999 ​\n\n- 自定义渠道: 自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在 账号设置 > 发布渠道 > 企业自定义渠道管理 页面查看渠道 ID。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。​0 表示调用成功。​其他值表示调用失败。你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| data​ | Object ofPublishDraftBotData​ | { \"bot_id\": \"743961547827****\", \"version\": \"1732190531***\" }​ | 接口响应的业务信息。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"1234567890****\"}​ | 包含请求的详细日志信息，用于问题排查和调试。​ |\n\n- 0 表示调用成功。 ​\n\n- 其他值表示调用失败。你可以通过 msg 字段判断详细的错误原因。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| bot_id​ | String​ | 73428668*****​ | 发布的智能体的 ID。​ |\n| version​ | String​ | 1753871809679​ | 智能体的版本号，用于标识智能体的当前版本号。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/bots_list_draft_published",
      "title": "查看智能体列表",
      "content": {
        "sections": [],
        "full_text": "查看智能体列表\n\n查看指定空间的智能体列表，包含草稿状态的智能体和已发布的智能体。\n\n​\n\n扣子个人版中，仅支持查询作为空间所有者的智能体。\n\n​\n\n扣子企业版中，可以查看指定空间下的所有智能体。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/bots\n\n​\n\n权限\n\n​\n\nlistBot\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nlistBot\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n查看指定空间的智能体列表。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nworkspace_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n5123945629***\n\n​\n\n智能体所在的工作空间的工作空间 ID。\n\n​\n\n进入指定空间，空间页面 URL 中\n\nw\n\n参数后的数字就是 工作空间 ID。例如\n\nhttps://code.coze.cn/w/75814654762959***/projects\n\n，工作空间 ID 为\n\n75814654762959***\n\n。\n\n​\n\npublish_status\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nall\n\n​\n\n智能体的发布状态，用于筛选不同发布状态的智能体。枚举值如下：\n\n​\n\nall ：所有状态。\n\n​\n\npublished_online ：（默认值）已发布的正式版。\n\n​\n\npublished_draft ：已发布但当前为草稿状态。\n\n​\n\nunpublished_draft ：从未发布过。\n\n​\n\nconnector_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n1024\n\n​\n\n渠道 ID，仅在智能体发布状态为\n\npublished_online\n\n或\n\npublished_draft\n\n时需要设置。用于筛选指定渠道下已发布的智能体版本，包括线上正式版本和草稿版本。默认值为\n\n1024\n\n，表示获取 API 发布渠道下的最新版本。\n\n​\n\n扣子编程的渠道 ID 包括：\n\n​\n\n1024：API 渠道。\n\n​\n\n999：Chat SDK。\n\n​\n\n10000122：扣子商店。\n\n​\n\n10000113：微信客服。\n\n​\n\n10000120：微信服务号。\n\n​\n\n10000121：微信订阅号。\n\n​\n\n10000126：抖音小程序。\n\n​\n\n10000127：微信小程序。\n\n​\n\n10000011：飞书。\n\n​\n\n10000128：飞书多维表格。\n\n​\n\n10000117：掘金。\n\n​\n\n自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在\n\n账号设置\n\n>\n\n发布渠道\n\n>\n\n企业自定义渠道管理\n\n页面查看渠道 ID。\n\n​\n\npage_num\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n1\n\n​\n\n分页查询时的页码。默认为 1，即返回第一页数据。\n\n​\n\npage_size\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n20\n\n​\n\n分页大小。默认为 20，即每页返回 20 条数据。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nObject of\n\nOpenGetBotData\n\n​\n\n{\"items\":[{\"id\":\"74876004423701****\",\"name\":\"test\",\"icon_url\":\"\n\nhttps://example.com/FileBizType.BIZ_BOT_APP/app1***.png\n\n\",\"updated_at\":1718289297,\"description\":\"应用测试\",\"is_published\":true,\"published_at\":1718289297,\"owner_user_id\":\"23423423****\"}],\"total\":1}\n\n​\n\n返回的智能体列表数据，包含智能体的基本信息和总数。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"1234567890abcdef\"}\n\n​\n\n包含请求的详细日志信息，用于问题排查和调试。\n\n​\n\n​\n\nOpenGetBotData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nitems\n\n​\n\nArray of\n\nBotSimpleInfo\n\n​\n\n[ { \"id\": \"751614225987***\", \"is_published\": false, \"updated_at\": 1749994622, \"owner_user_id\": \"32902037***\", \"name\": \"***\", \"description\": \"***\", \"icon_url\": \"\n\nhttps://example.com/FileBizType.BIZ_BOT_ICON/***\n\n\" } ]\n\n​\n\n返回的智能体列表。\n\n​\n\ntotal\n\n​\n\nLong\n\n​\n\n2\n\n​\n\n返回的智能体的数量。\n\n​\n\n​\n\nBotSimpleInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n7493066380997****\n\n​\n\n智能体的 ID。\n\n​\n\nname\n\n​\n\nString\n\n​\n\n语音伴侣\n\n​\n\n智能体的名称。\n\n​\n\nicon_url\n\n​\n\nString\n\n​\n\nhttps://example.com/\n\nagent\n\n1\n\n***\n\n.png\n\n​\n\n智能体图标的 URL。\n\n​\n\nfolder_id\n\n​\n\nString\n\n​\n\n75231612553354***\n\n​\n\n智能体所属的文件夹 ID。\n\n​\n\nupdated_at\n\n​\n\nLong\n\n​\n\n1718289297\n\n​\n\n智能体的最近一次更新时间。以 Unix 时间戳格式表示。单位为秒。\n\n​\n\ndescription\n\n​\n\nString\n\n​\n\n语音伴侣\n\n​\n\n智能体的描述。\n\n​\n\nis_published\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n智能体是否已发布。\n\n​\n\ntrue\n\n表示已发布。\n\n​\n\nfalse\n\n表示未发布。\n\n​\n\npublished_at\n\n​\n\nLong\n\n​\n\n1718289297\n\n​\n\n智能体的最近一次发布时间。以 Unix 时间戳格式表示。单位为秒。\n\n​\n\n仅当智能体已发布时返回该值。如果智能体是未发布过的草稿版本，则该参数的值为空。\n\n​\n\nowner_user_id\n\n​\n\nString\n\n​\n\n23423423****\n\n​\n\n智能体创建者的扣子用户 ID。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request GET 'https\n\n:\n\n//api.coze.cn/v1/bots?workspace_id=5123945629***&publish_status=&connector_id=1024&page_num=1&page_size=20' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_Osa******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"items\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"7493066380997****\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"语音伴侣\"\n\n,\n\n​\n\n\"icon_url\"\n\n:\n\n\"https://example.com/agent1***.png\"\n\n,\n\n​\n\n\"folder_id\"\n\n:\n\n\"75231612553354***\"\n\n,\n\n​\n\n\"updated_at\"\n\n:\n\n1718289297\n\n,\n\n​\n\n\"description\"\n\n:\n\n\"语音伴侣\"\n\n,\n\n​\n\n\"is_published\"\n\n:\n\nfalse\n\n,\n\n​\n\n\"published_at\"\n\n:\n\n1718289297\n\n,\n\n​\n\n\"owner_user_id\"\n\n:\n\n\"23423423****\"\n\n​\n\n}\n\n​\n\n],\n\n​\n\n\"total\"\n\n:\n\n1\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n发布智能体\n\n下一篇\n\n查看智能体配置",
        "links": []
      },
      "markdown": "- 扣子个人版中，仅支持查询作为空间所有者的智能体。 ​\n\n- 扣子企业版中，可以查看指定空间下的所有智能体。 ​\n\n| 请求方式​ | GET |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/bots​ |\n| 权限​ | listBot​确保调用该接口使用的访问令牌开通了listBot权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 查看指定空间的智能体列表。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| workspace_id​ | String​ | 必选​ | 5123945629***​ | 智能体所在的工作空间的工作空间 ID。​进入指定空间，空间页面 URL 中w参数后的数字就是 工作空间 ID。例如https://code.coze.cn/w/75814654762959***/projects，工作空间 ID 为75814654762959***。​ |\n| publish_status​ | String​ | 可选​ | all​ | 智能体的发布状态，用于筛选不同发布状态的智能体。枚举值如下：​all ：所有状态。​published_online ：（默认值）已发布的正式版。​published_draft ：已发布但当前为草稿状态。​unpublished_draft ：从未发布过。​ |\n| connector_id​ | String​ | 可选​ | 1024​ | 渠道 ID，仅在智能体发布状态为published_online或published_draft时需要设置。用于筛选指定渠道下已发布的智能体版本，包括线上正式版本和草稿版本。默认值为1024，表示获取 API 发布渠道下的最新版本。​扣子编程的渠道 ID 包括：​1024：API 渠道。​999：Chat SDK。​10000122：扣子商店。​10000113：微信客服。​10000120：微信服务号。​10000121：微信订阅号。​10000126：抖音小程序。​10000127：微信小程序。​10000011：飞书。​10000128：飞书多维表格。​10000117：掘金。​自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在账号设置>发布渠道>企业自定义渠道管理页面查看渠道 ID。​ |\n| page_num​ | Integer​ | 可选​ | 1​ | 分页查询时的页码。默认为 1，即返回第一页数据。​ |\n| page_size​ | Integer​ | 可选​ | 20​ | 分页大小。默认为 20，即每页返回 20 条数据。​ |\n\n- all ：所有状态。 ​\n\n- published_online ：（默认值）已发布的正式版。 ​\n\n- published_draft ：已发布但当前为草稿状态。 ​\n\n- unpublished_draft ：从未发布过。 ​\n\n- 1024：API 渠道。 ​\n\n- 999：Chat SDK。 ​\n\n- 10000122：扣子商店。 ​\n\n- 10000113：微信客服。 ​\n\n- 10000120：微信服务号。 ​\n\n- 10000121：微信订阅号。 ​\n\n- 10000126：抖音小程序。 ​\n\n- 10000127：微信小程序。 ​\n\n- 10000011：飞书。 ​\n\n- 10000128：飞书多维表格。 ​\n\n- 10000117：掘金。 ​\n\n- 自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在 账号设置 > 发布渠道 > 企业自定义渠道管理 页面查看渠道 ID。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | Object ofOpenGetBotData​ | {\"items\":[{\"id\":\"74876004423701****\",\"name\":\"test\",\"icon_url\":\"https://example.com/FileBizType.BIZ_BOT_APP/app1***.png\",\"updated_at\":1718289297,\"description\":\"应用测试\",\"is_published\":true,\"published_at\":1718289297,\"owner_user_id\":\"23423423****\"}],\"total\":1}​ | 返回的智能体列表数据，包含智能体的基本信息和总数。​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"1234567890abcdef\"}​ | 包含请求的详细日志信息，用于问题排查和调试。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| items​ | Array ofBotSimpleInfo​ | [ { \"id\": \"751614225987***\", \"is_published\": false, \"updated_at\": 1749994622, \"owner_user_id\": \"32902037***\", \"name\": \"***\", \"description\": \"***\", \"icon_url\": \"https://example.com/FileBizType.BIZ_BOT_ICON/***\" } ]​ | 返回的智能体列表。​ |\n| total​ | Long​ | 2​ | 返回的智能体的数量。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 7493066380997****​ | 智能体的 ID。​ |\n| name​ | String​ | 语音伴侣​ | 智能体的名称。​ |\n| icon_url​ | String​ | https://example.com/agent1***.png​ | 智能体图标的 URL。​ |\n| folder_id​ | String​ | 75231612553354***​ | 智能体所属的文件夹 ID。​ |\n| updated_at​ | Long​ | 1718289297​ | 智能体的最近一次更新时间。以 Unix 时间戳格式表示。单位为秒。​ |\n| description​ | String​ | 语音伴侣​ | 智能体的描述。​ |\n| is_published​ | Boolean​ | true​ | 智能体是否已发布。​true表示已发布。​false表示未发布。​ |\n| published_at​ | Long​ | 1718289297​ | 智能体的最近一次发布时间。以 Unix 时间戳格式表示。单位为秒。​仅当智能体已发布时返回该值。如果智能体是未发布过的草稿版本，则该参数的值为空。​ |\n| owner_user_id​ | String​ | 23423423****​ | 智能体创建者的扣子用户 ID。​ |\n\n- true 表示已发布。 ​\n\n- false 表示未发布。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/get_metadata_draft_published",
      "title": "查看智能体配置",
      "content": {
        "sections": [],
        "full_text": "查看智能体配置\n\n查看指定智能体的配置信息，你可以查看该智能体已发布版本的配置，或当前草稿版本的配置。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/bots/:bot_id\n\n​\n\n权限\n\n​\n\ngetMetadata\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\ngetMedata\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n查看指定智能体的配置信息。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $AccessToken\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n73428668*****\n\n​\n\n要查看的智能体 ID。\n\n​\n\n进入智能体的开发页面，开发页面 URL 中\n\nbot\n\n参数后的数字就是智能体 ID。例如\n\nhttps://www.coze.cn/space/341****/bot/73428668*****\n\n，bot ID 为\n\n73428668*****\n\n。\n\n​\n\n说明\n\n确保该智能体的所属空间已经生成了访问令牌。\n\n​\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nis_published\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\ntrue\n\n​\n\n根据智能体的发布状态筛选对应版本。默认值为\n\ntrue\n\n。\n\n​\n\ntrue\n\n：查看已发布版本的配置。\n\n​\n\nfalse\n\n：查看当前草稿版本的配置。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\nBotInfo\n\n​\n\n​\n\nPromptInfo\n\n​\n\n​\n\nPrefixPromptInfo\n\n​\n\n​\n\nOnboardingInfoV2\n\n​\n\n​\n\nPluginInfo\n\n​\n\n​\n\nApiInfo\n\n​\n\n​\n\nModelInfo\n\n​\n\n​\n\nCommonKnowledge\n\n​\n\n​\n\nKnowledgeInfo\n\n​\n\n​\n\nVariable\n\n​\n\n​\n\nMediaConfig\n\n​\n\n​\n\nVoice\n\n​\n\n​\n\nShortcutCommandInfo\n\n​\n\n​\n\nShortcutCommandToolInfo\n\n​\n\n​\n\nWorkflowInfo\n\n​\n\n​\n\nBackgroundImageInfo\n\n​\n\n​\n\nBackgroundImageDetail\n\n​\n\n​\n\nCanvasPosition\n\n​\n\n​\n\nGradientPosition\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n查看智能体列表\n\n下一篇\n\n开启或关闭智能体多人协作",
        "links": []
      },
      "markdown": "| 请求方式​ | GET |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/bots/:bot_id​ |\n| 权限​ | getMetadata​确保调用该接口使用的访问令牌开通了getMedata权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 查看指定智能体的配置信息。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $AccessToken​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| bot_id​ | String​ | 必选​ | 73428668*****​ | 要查看的智能体 ID。​进入智能体的开发页面，开发页面 URL 中bot参数后的数字就是智能体 ID。例如https://www.coze.cn/space/341****/bot/73428668*****，bot ID 为73428668*****。​说明确保该智能体的所属空间已经生成了访问令牌。​​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| is_published​ | Boolean​ | 可选​ | true​ | 根据智能体的发布状态筛选对应版本。默认值为true。​true：查看已发布版本的配置。​false：查看当前草稿版本的配置。​ |\n\n- true ：查看已发布版本的配置。 ​\n\n- false ：查看当前草稿版本的配置。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/switch_bot_develop_mode",
      "title": "开启或关闭智能体多人协作",
      "content": {
        "sections": [],
        "full_text": "开启或关闭智能体多人协作\n\n开启或关闭智能体多人协作模式。\n\n​\n\n开启多人协作后，你才能调用\n\n添加智能体的协作者\n\nAPI 为智能体添加协作者。\n\n​\n\n接口限制\n\n​\n\n套餐限制\n\n：扣子企业版（企业标准版、企业旗舰版）。\n\n​\n\n不支持渠道类型 OAuth 应用。使用 OAuth JWT 应用和服务访问令牌时，只需要有对应权限点即可。其余认证方式，只有\n\n智能体所有者\n\n能开启或关闭智能体的多人协作模式。\n\n​\n\n关闭智能体多人协作前，需要先调用\n\n删除智能体协作者\n\nAPI 删除所有协作者。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/bots/:bot_id/collaboration_mode\n\n​\n\n​\n\n权限\n\n​\n\nBot.switchDevelopMode\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nBot.switchDevelopMode\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n开启或关闭智能体多人协作模式。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n73428668*****\n\n​\n\n需要设置协作模式的智能体 ID。\n\n​\n\n进入智能体的开发页面，开发页面 URL 中 bot 参数后的数字就是智能体 ID。例如\n\nhttps://www.coze.com/space/341****/bot/73428668*****\n\n，bot ID 为\n\n73428668*****\n\n。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncollaboration_mode\n\n​\n\nString\n\n​\n\n可选\n\n​\n\ncollaboration\n\n​\n\n智能体的协作模式，枚举值：\n\n​\n\nsingle\n\n：单用户模式。\n\n​\n\ncollaboration\n\n：多人协作模式。\n\n​\n\n说明\n\n如需将智能体多人协作模式变更为单用户模式，需要先调用\n\n删除智能体协作者\n\nAPI 删除所有协作者。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/bots/73428668*****/collaboration_mode' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_Osa******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"collaboration_mode\"\n\n:\n\n\"collaboration\"\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n查看智能体配置\n\n下一篇\n\n添加智能体的协作者",
        "links": []
      },
      "markdown": "- 套餐限制 ：扣子企业版（企业标准版、企业旗舰版）。 ​\n\n- 不支持渠道类型 OAuth 应用。使用 OAuth JWT 应用和服务访问令牌时，只需要有对应权限点即可。其余认证方式，只有 智能体所有者 能开启或关闭智能体的多人协作模式。 ​\n\n- 关闭智能体多人协作前，需要先调用 删除智能体协作者 API 删除所有协作者。 ​\n\n| 请求方式​ | POST​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/bots/:bot_id/collaboration_mode​​ |\n| 权限​ | Bot.switchDevelopMode​确保调用该接口使用的访问令牌开通了Bot.switchDevelopMode权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 开启或关闭智能体多人协作模式。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| bot_id​ | String​ | 可选​ | 73428668*****​ | 需要设置协作模式的智能体 ID。​进入智能体的开发页面，开发页面 URL 中 bot 参数后的数字就是智能体 ID。例如https://www.coze.com/space/341****/bot/73428668*****，bot ID 为73428668*****。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| collaboration_mode​ | String​ | 可选​ | collaboration​ | 智能体的协作模式，枚举值：​single：单用户模式。​collaboration：多人协作模式。​说明如需将智能体多人协作模式变更为单用户模式，需要先调用删除智能体协作者API 删除所有协作者。​​ |\n\n- single ：单用户模式。 ​\n\n- collaboration ：多人协作模式。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/add_bot_collaborator",
      "title": "添加智能体的协作者",
      "content": {
        "sections": [],
        "full_text": "添加智能体的协作者\n\n添加智能体的协作者。\n\n​\n\n接口限制\n\n​\n\n套餐限制：扣子企业版（企业标准版、企业旗舰版）。\n\n​\n\n每次请求只能添加一位协作者。如需添加多位，请依次发送请求。\n\n​\n\n协作者只能是该工作空间的成员。\n\n​\n\n不支持渠道类型 OAuth 应用。使用 OAuth JWT 应用和服务访问令牌时，只需要有对应权限点即可。其余认证方式，只有\n\n智能体的所有者和协作者\n\n能添加协作者。\n\n​\n\n主账号内的所有子账号共享同一 API 的流控额度，单个 API 的流控限制为 5 QPS。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/bots/:bot_id/collaborators\n\n​\n\n​\n\n权限\n\n​\n\nBot.addCollaborator\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nBot.addCollaborator\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n添加智能体的协作者。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n737946218936519****\n\n​\n\n需要添加协作者的智能体 ID。\n\n​\n\n进入智能体编排页面，页面 URL 中\n\nbot\n\n参数后的数字就是智能体 ID。例如\n\nhttps://www.coze.cn/space/341****/bot/73428668*****\n\n，bot ID 为\n\n73428668*****\n\n。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncollaborators\n\n​\n\nArray of\n\nCollaboratorAddData\n\n​\n\n必选\n\n​\n\n[{\"user_id\":\"411479148551****\"}]\n\n​\n\n智能体资源协作者列表。单次最多添加\n\n1\n\n个协作者。\n\n​\n\n​\n\nCollaboratorAddData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nuser_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n411479148551****\n\n​\n\n协作者的扣子用户 UID。你只能添加对应工作空间中的成员作为协作者。\n\n​\n\n在扣子编程平台左下角单击头像，选择\n\n账号设置\n\n，查看账号的 UID。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/bots/737946218936519****/collaborators' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_Osa******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"collaborators\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"user_id\"\n\n:\n\n\"411479148551****\"\n\n​\n\n}\n\n​\n\n]\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n开启或关闭智能体多人协作\n\n下一篇\n\n添加应用的协作者",
        "links": []
      },
      "markdown": "- 套餐限制：扣子企业版（企业标准版、企业旗舰版）。 ​\n\n- 每次请求只能添加一位协作者。如需添加多位，请依次发送请求。 ​\n\n- 协作者只能是该工作空间的成员。 ​\n\n- 不支持渠道类型 OAuth 应用。使用 OAuth JWT 应用和服务访问令牌时，只需要有对应权限点即可。其余认证方式，只有 智能体的所有者和协作者 能添加协作者。 ​\n\n- 主账号内的所有子账号共享同一 API 的流控额度，单个 API 的流控限制为 5 QPS。 ​\n\n| 请求方式​ | POST​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/bots/:bot_id/collaborators​​ |\n| 权限​ | Bot.addCollaborator​确保调用该接口使用的访问令牌开通了Bot.addCollaborator权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 添加智能体的协作者。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| bot_id​ | String​ | 必选​ | 737946218936519****​ | 需要添加协作者的智能体 ID。​进入智能体编排页面，页面 URL 中bot参数后的数字就是智能体 ID。例如https://www.coze.cn/space/341****/bot/73428668*****，bot ID 为73428668*****。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| collaborators​ | Array ofCollaboratorAddData​ | 必选​ | [{\"user_id\":\"411479148551****\"}]​ | 智能体资源协作者列表。单次最多添加1个协作者。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| user_id​ | String​ | 必选​ | 411479148551****​ | 协作者的扣子用户 UID。你只能添加对应工作空间中的成员作为协作者。​在扣子编程平台左下角单击头像，选择账号设置，查看账号的 UID。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/add_app_collaborator",
      "title": "添加应用的协作者",
      "content": {
        "sections": [],
        "full_text": "添加应用的协作者\n\n添加低代码应用的协作者。\n\n​\n\n接口限制\n\n​\n\n套餐限制：扣子企业版（企业标准版、企业旗舰版）。\n\n​\n\n每次请求只能添加一位协作者。如需添加多位，请依次发送请求。\n\n​\n\n协作者只能是该工作空间的成员。\n\n​\n\n不支持渠道类型 OAuth 应用。使用 OAuth JWT 应用和服务访问令牌时，只需要有对应权限点即可。其余认证方式，只有\n\n应用的所有者和协作者\n\n能添加协作者。\n\n​\n\n主账号内的所有子账号共享同一 API 的流控额度，单个 API 的流控限制为 5 QPS。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/apps/:app_id/collaborators\n\n​\n\n​\n\n权限\n\n​\n\nProject.addCollaborator\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nProject.addCollaborator\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n添加低代码应用的协作者。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\napp_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n75353861140****\n\n​\n\n低代码应用的 ID。\n\n​\n\n进入应用编排页面，页面 URL 中\n\nproject-ide\n\n参数后的数字就是应用 ID。例如\n\nhttps://www.coze.cn/space/7532329396037500982/project-ide/7535386114057***\n\n，应用 ID 为\n\n7535386114057***\n\n。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncollaborators\n\n​\n\nArray of\n\nCollaboratorAddData\n\n​\n\n必选\n\n​\n\n[{\"user_id\":\"411479148551****\"}]\n\n​\n\n低代码应用的协作者列表。单次最多添加\n\n1\n\n个协作者。\n\n​\n\n​\n\nCollaboratorAddData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nuser_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n411479148551****\n\n​\n\n协作者的扣子用户 UID。你只能添加对应工作空间中的成员作为协作者。\n\n​\n\n在扣子编程平台左下角单击头像，选择\n\n账号设置\n\n，查看账号的 UID。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/apps/75353861140****/collaborators' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_Osa******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"collaborators\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"user_id\"\n\n:\n\n\"411479148551****\"\n\n​\n\n}\n\n​\n\n]\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n添加智能体的协作者\n\n下一篇\n\n删除智能体的协作者",
        "links": []
      },
      "markdown": "- 套餐限制：扣子企业版（企业标准版、企业旗舰版）。 ​\n\n- 每次请求只能添加一位协作者。如需添加多位，请依次发送请求。 ​\n\n- 协作者只能是该工作空间的成员。 ​\n\n- 不支持渠道类型 OAuth 应用。使用 OAuth JWT 应用和服务访问令牌时，只需要有对应权限点即可。其余认证方式，只有 应用的所有者和协作者 能添加协作者。 ​\n\n- 主账号内的所有子账号共享同一 API 的流控额度，单个 API 的流控限制为 5 QPS。 ​\n\n| 请求方式​ | POST​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/apps/:app_id/collaborators​​ |\n| 权限​ | Project.addCollaborator​确保调用该接口使用的访问令牌开通了Project.addCollaborator权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 添加低代码应用的协作者。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| app_id​ | String​ | 必选​ | 75353861140****​ | 低代码应用的 ID。​进入应用编排页面，页面 URL 中project-ide参数后的数字就是应用 ID。例如https://www.coze.cn/space/7532329396037500982/project-ide/7535386114057***，应用 ID 为7535386114057***。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| collaborators​ | Array ofCollaboratorAddData​ | 必选​ | [{\"user_id\":\"411479148551****\"}]​ | 低代码应用的协作者列表。单次最多添加1个协作者。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| user_id​ | String​ | 必选​ | 411479148551****​ | 协作者的扣子用户 UID。你只能添加对应工作空间中的成员作为协作者。​在扣子编程平台左下角单击头像，选择账号设置，查看账号的 UID。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/remove_bot_collaborator",
      "title": "删除智能体的协作者",
      "content": {
        "sections": [],
        "full_text": "删除智能体的协作者\n\n删除智能体的协作者。\n\n​\n\n接口限制\n\n​\n\n每次请求只能删除一位协作者。如需删除多位，请依次发送请求。\n\n​\n\n不支持渠道类型 OAuth 应用。使用 OAuth JWT 应用和服务访问令牌时，只需要有对应权限点即可。其余认证方式，只有\n\n智能体的所有者和协作者\n\n有权删除。\n\n​\n\n主账号内的所有子账号共享同一 API 的流控额度，单个 API 的流控限制为 5 QPS。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nDELETE\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/bots/:bot_id/collaborators/:user_id\n\n​\n\n​\n\n权限\n\n​\n\nBot.removeCollaborator\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nBot.removeCollaborator\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n删除智能体的协作者。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n737946218936519****\n\n​\n\n需要删除协作者的智能体 ID。\n\n​\n\n进入智能体编排页面，页面 URL 中\n\nbot\n\n参数后的数字就是智能体 ID。例如\n\nhttps://www.coze.cn/space/341****/bot/73428668*****\n\n，bot ID 为\n\n73428668*****\n\n。\n\n​\n\nuser_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n411479148551****\n\n​\n\n待删除的协作者的扣子用户 UID。\n\n​\n\n在扣子编程左下角单击头像，选择\n\n账号设置\n\n，查看账号的 UID。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request DELETE 'https\n\n:\n\n//api.coze.cn/v1/bots/737946218936519****/collaborators/411479148551****' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_Osa******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n添加应用的协作者\n\n下一篇\n\n删除应用的协作者",
        "links": []
      },
      "markdown": "- 每次请求只能删除一位协作者。如需删除多位，请依次发送请求。 ​\n\n- 不支持渠道类型 OAuth 应用。使用 OAuth JWT 应用和服务访问令牌时，只需要有对应权限点即可。其余认证方式，只有 智能体的所有者和协作者 有权删除。 ​\n\n- 主账号内的所有子账号共享同一 API 的流控额度，单个 API 的流控限制为 5 QPS。 ​\n\n| 请求方式​ | DELETE​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/bots/:bot_id/collaborators/:user_id​​ |\n| 权限​ | Bot.removeCollaborator​确保调用该接口使用的访问令牌开通了Bot.removeCollaborator权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 删除智能体的协作者。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| bot_id​ | String​ | 必选​ | 737946218936519****​ | 需要删除协作者的智能体 ID。​进入智能体编排页面，页面 URL 中bot参数后的数字就是智能体 ID。例如https://www.coze.cn/space/341****/bot/73428668*****，bot ID 为73428668*****。​ |\n| user_id​ | String​ | 必选​ | 411479148551****​ | 待删除的协作者的扣子用户 UID。​在扣子编程左下角单击头像，选择账号设置，查看账号的 UID。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/remove_app_collaborator",
      "title": "删除应用的协作者",
      "content": {
        "sections": [],
        "full_text": "删除应用的协作者\n\n删除低代码应用的协作者。\n\n​\n\n删除协作者时，扣子编程会将该协作者创建的工作流、插件等资源转移给应用的所有者。\n\n​\n\n接口限制\n\n​\n\n主账号内的所有子账号共享同一 API 的流控额度，单个 API 的流控限制为 5 QPS。\n\n​\n\n每次请求只能删除一位协作者。如需删除多位，请依次发送请求。\n\n​\n\n不支持渠道类型 OAuth 应用。使用 OAuth JWT 应用和服务访问令牌时，只需要有对应权限点即可。其余认证方式，只有\n\n应用的所有者和协作者\n\n有权删除。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nDELETE\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/apps/:app_id/collaborators/:user_id\n\n​\n\n​\n\n权限\n\n​\n\nProject.removeCollaborator\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nProject.removeCollaborator\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n删除低代码应用的协作者。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\napp_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n75353861140****\n\n​\n\n待删除协作者的低代码应用的 ID。\n\n​\n\n进入低代码应用编排页面，页面 URL 中\n\nproject-ide\n\n参数后的数字就是应用 ID。例如\n\nhttps://www.coze.cn/space/7532329396037500982/project-ide/7535386114057***\n\n，应用 ID 为\n\n7535386114057***\n\n。\n\n​\n\nuser_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n411479148551****\n\n​\n\n待删除协作者的扣子用户 UID。\n\n​\n\n在扣子编程左下角单击头像，选择\n\n账号设置\n\n，查看账号的 UID。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request DELETE 'https\n\n:\n\n//api.coze.cn/v1/apps/75353861140****/collaborators/411479148551****' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_Osa******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n删除智能体的协作者\n\n下一篇\n\n查看智能体版本列表",
        "links": []
      },
      "markdown": "- 主账号内的所有子账号共享同一 API 的流控额度，单个 API 的流控限制为 5 QPS。 ​\n\n- 每次请求只能删除一位协作者。如需删除多位，请依次发送请求。 ​\n\n- 不支持渠道类型 OAuth 应用。使用 OAuth JWT 应用和服务访问令牌时，只需要有对应权限点即可。其余认证方式，只有 应用的所有者和协作者 有权删除。 ​\n\n| 请求方式​ | DELETE​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/apps/:app_id/collaborators/:user_id​​ |\n| 权限​ | Project.removeCollaborator​确保调用该接口使用的访问令牌开通了Project.removeCollaborator权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 删除低代码应用的协作者。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| app_id​ | String​ | 必选​ | 75353861140****​ | 待删除协作者的低代码应用的 ID。​进入低代码应用编排页面，页面 URL 中project-ide参数后的数字就是应用 ID。例如https://www.coze.cn/space/7532329396037500982/project-ide/7535386114057***，应用 ID 为7535386114057***。​ |\n| user_id​ | String​ | 必选​ | 411479148551****​ | 待删除协作者的扣子用户 UID。​在扣子编程左下角单击头像，选择账号设置，查看账号的 UID。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/list_bot_versions",
      "title": "查看智能体版本列表",
      "content": {
        "sections": [],
        "full_text": "查看智能体版本列表\n\n查看智能体版本列表。\n\n​\n\n接口描述\n\n​\n\n查询某个智能体的版本列表，支持查询已发布版本或未发布版本的版本号、版本创建者信息、创建时间等。\n\n​\n\n扣子个人版中，仅支持查询作为空间所有者的智能体。\n\n​\n\n扣子团队版和企业版中，可以查看团队企业下的所有智能体。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/bots/:bot_id/versions\n\n​\n\n​\n\n权限\n\n​\n\nBot.listVersion\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nBot.listVersion\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n查看智能体版本列表。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n73428668*****\n\n​\n\n待查询的智能体 ID。\n\n​\n\n进入智能体的开发页面，开发页面 URL 中 bot 参数后的数字就是智能体 ID。例如\n\nhttps://www.coze.com/space/341****/bot/73428668*****\n\n，bot ID 为\n\n73428668*****\n\n。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\npage_num\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n1\n\n​\n\n分页查询时的页码。默认为\n\n1\n\n，即返回第一页数据。\n\n​\n\npage_size\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n20\n\n​\n\n分页查询时每页返回的数据条数。默认值为\n\n10\n\n，取值范围为 1~30。\n\n​\n\npublish_status\n\n​\n\nString\n\n​\n\n可选\n\n​\n\npublished_online\n\n​\n\n智能体的发布状态，根据智能体的发布状态筛选对应版本。默认值为\n\npublished_online\n\n。枚举值：\n\n​\n\npublished_online\n\n：已发布的线上版本。\n\n​\n\nunpublished_draft\n\n：草稿版本。\n\n​\n\nconnector_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n1024\n\n​\n\n渠道 ID，仅在智能体发布状态为\n\npublished_online\n\n时需要设置。用于筛选指定渠道下已发布的智能体版本。默认为空，表示获取所有发布渠道下的版本列表。\n\n​\n\n扣子编程的渠道 ID 包括：\n\n​\n\n1024：API 渠道。\n\n​\n\n999：Chat SDK。\n\n​\n\n10000122：扣子商店。\n\n​\n\n10000113：微信客服。\n\n​\n\n10000120：微信服务号。\n\n​\n\n10000121：微信订阅号。\n\n​\n\n10000126：抖音小程序。\n\n​\n\n10000127：微信小程序。\n\n​\n\n10000011：飞书。\n\n​\n\n10000128：飞书多维表格。\n\n​\n\n10000117：掘金。\n\n​\n\n自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在\n\n账号设置\n\n>\n\n发布渠道\n\n>\n\n企业自定义渠道管理\n\n页面查看渠道 ID。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nObject of\n\nListBotVersionsData\n\n​\n\n{\"items\":[{\"creator\":{\"id\":\"24787743932***\",\"name\":\"Susan\"},\"version\":\"171638852****\",\"changelog\":\"更新了智能体的对话逻辑\",\"created_at\":\"1718609571\",\"publish_status\":\"published_online\"}],\"has_more\":false}\n\n​\n\n包含智能体版本列表数据的对象，用于返回智能体的所有版本信息及其分页状态。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\n​\n\nListBotVersionsData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nitems\n\n​\n\nArray of\n\nOpenBotVersionInfo\n\n​\n\n[{\"creator\":{\"id\":\"24787743932***\",\"name\":\"Susan\"},\"version\":\"171638852****\",\"changelog\":\"更新了智能体的对话逻辑\",\"created_at\":\"1718609571\",\"publish_status\":\"published_online\"}]\n\n​\n\n智能体版本列表数据，包含该智能体的所有版本的详细信息。\n\n​\n\nhas_more\n\n​\n\nBoolean\n\n​\n\nfalse\n\n​\n\n标识当前返回结果是否还有更多数据未加载。\n\n​\n\ntrue\n\n：当前返回的版本列表未包含所有符合条件的数据。\n\n​\n\nfalse\n\n：表示已返回所有符合条件的数据。\n\n​\n\n​\n\nOpenBotVersionInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncreator\n\n​\n\nObject of\n\nOpenCreatorInfo\n\n​\n\n{\"id\":\"24787743932***\",\"name\":\"Susan\"}\n\n​\n\n版本的创建者信息，包含创建者的用户 ID 和用户名。\n\n​\n\nversion\n\n​\n\nString\n\n​\n\n171638852****\n\n​\n\n智能体的版本号。\n\n​\n\nchangelog\n\n​\n\nString\n\n​\n\n更新了智能体的对话逻辑\n\n​\n\n该版本发布时，用户输入的更新内容或修改说明。\n\n​\n\ncreated_at\n\n​\n\nLong\n\n​\n\n1718609571\n\n​\n\n该版本的创建时间。格式为 10 位的 Unixtime 时间戳，单位为秒。\n\n​\n\npublish_status\n\n​\n\nString\n\n​\n\npublished_online\n\n​\n\n该版本的发布状态。枚举值：\n\n​\n\npublished_online\n\n：已发布的线上版本。\n\n​\n\nunpublished_draft\n\n：草稿版本。\n\n​\n\n​\n\nOpenCreatorInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n24787743932***\n\n​\n\n版本创建者的扣子用户 ID。\n\n​\n\nname\n\n​\n\nString\n\n​\n\nSusan\n\n​\n\n版本创建者的扣子用户名。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request GET 'https\n\n:\n\n//api.coze.cn/v1/bots/73428668*****/versions?page_num=1&page_size=20&publish_status=&connector_id=1024' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_O******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"items\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"creator\"\n\n:\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"24787743932***\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"Susan\"\n\n​\n\n},\n\n​\n\n\"version\"\n\n:\n\n\"171638852****\"\n\n,\n\n​\n\n\"changelog\"\n\n:\n\n\"更新了智能体的对话逻辑\"\n\n,\n\n​\n\n\"created_at\"\n\n:\n\n1718609571\n\n,\n\n​\n\n\"publish_status\"\n\n:\n\n\"published_online\"\n\n​\n\n}\n\n​\n\n],\n\n​\n\n\"has_more\"\n\n:\n\nfalse\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n删除应用的协作者\n\n下一篇\n\n复制资源",
        "links": []
      },
      "markdown": "- 扣子个人版中，仅支持查询作为空间所有者的智能体。 ​\n\n- 扣子团队版和企业版中，可以查看团队企业下的所有智能体。 ​\n\n| 请求方式​ | GET​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/bots/:bot_id/versions​​ |\n| 权限​ | Bot.listVersion​确保调用该接口使用的访问令牌开通了Bot.listVersion权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 查看智能体版本列表。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| bot_id​ | String​ | 必选​ | 73428668*****​ | 待查询的智能体 ID。​进入智能体的开发页面，开发页面 URL 中 bot 参数后的数字就是智能体 ID。例如https://www.coze.com/space/341****/bot/73428668*****，bot ID 为73428668*****。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| page_num​ | Integer​ | 可选​ | 1​ | 分页查询时的页码。默认为1，即返回第一页数据。​ |\n| page_size​ | Integer​ | 可选​ | 20​ | 分页查询时每页返回的数据条数。默认值为10，取值范围为 1~30。​ |\n| publish_status​ | String​ | 可选​ | published_online​ | 智能体的发布状态，根据智能体的发布状态筛选对应版本。默认值为published_online。枚举值：​published_online：已发布的线上版本。​unpublished_draft：草稿版本。​ |\n| connector_id​ | String​ | 可选​ | 1024​ | 渠道 ID，仅在智能体发布状态为published_online时需要设置。用于筛选指定渠道下已发布的智能体版本。默认为空，表示获取所有发布渠道下的版本列表。​扣子编程的渠道 ID 包括：​1024：API 渠道。​999：Chat SDK。​10000122：扣子商店。​10000113：微信客服。​10000120：微信服务号。​10000121：微信订阅号。​10000126：抖音小程序。​10000127：微信小程序。​10000011：飞书。​10000128：飞书多维表格。​10000117：掘金。​自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在账号设置>发布渠道>企业自定义渠道管理页面查看渠道 ID。​ |\n\n- published_online ：已发布的线上版本。 ​\n\n- unpublished_draft ：草稿版本。 ​\n\n- 1024：API 渠道。 ​\n\n- 999：Chat SDK。 ​\n\n- 10000122：扣子商店。 ​\n\n- 10000113：微信客服。 ​\n\n- 10000120：微信服务号。 ​\n\n- 10000121：微信订阅号。 ​\n\n- 10000126：抖音小程序。 ​\n\n- 10000127：微信小程序。 ​\n\n- 10000011：飞书。 ​\n\n- 10000128：飞书多维表格。 ​\n\n- 10000117：掘金。 ​\n\n- 自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在 账号设置 > 发布渠道 > 企业自定义渠道管理 页面查看渠道 ID。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | Object ofListBotVersionsData​ | {\"items\":[{\"creator\":{\"id\":\"24787743932***\",\"name\":\"Susan\"},\"version\":\"171638852****\",\"changelog\":\"更新了智能体的对话逻辑\",\"created_at\":\"1718609571\",\"publish_status\":\"published_online\"}],\"has_more\":false}​ | 包含智能体版本列表数据的对象，用于返回智能体的所有版本信息及其分页状态。​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| items​ | Array ofOpenBotVersionInfo​ | [{\"creator\":{\"id\":\"24787743932***\",\"name\":\"Susan\"},\"version\":\"171638852****\",\"changelog\":\"更新了智能体的对话逻辑\",\"created_at\":\"1718609571\",\"publish_status\":\"published_online\"}]​ | 智能体版本列表数据，包含该智能体的所有版本的详细信息。​ |\n| has_more​ | Boolean​ | false​ | 标识当前返回结果是否还有更多数据未加载。​true：当前返回的版本列表未包含所有符合条件的数据。​false：表示已返回所有符合条件的数据。​ |\n\n- true ：当前返回的版本列表未包含所有符合条件的数据。 ​\n\n- false ：表示已返回所有符合条件的数据。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| creator​ | Object ofOpenCreatorInfo​ | {\"id\":\"24787743932***\",\"name\":\"Susan\"}​ | 版本的创建者信息，包含创建者的用户 ID 和用户名。​ |\n| version​ | String​ | 171638852****​ | 智能体的版本号。​ |\n| changelog​ | String​ | 更新了智能体的对话逻辑​ | 该版本发布时，用户输入的更新内容或修改说明。​ |\n| created_at​ | Long​ | 1718609571​ | 该版本的创建时间。格式为 10 位的 Unixtime 时间戳，单位为秒。​ |\n| publish_status​ | String​ | published_online​ | 该版本的发布状态。枚举值：​published_online：已发布的线上版本。​unpublished_draft：草稿版本。​ |\n\n- published_online ：已发布的线上版本。 ​\n\n- unpublished_draft ：草稿版本。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 24787743932***​ | 版本创建者的扣子用户 ID。​ |\n| name​ | String​ | Susan​ | 版本创建者的扣子用户名。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/copy_resource_task",
      "title": "复制资源",
      "content": {
        "sections": [],
        "full_text": "复制资源\n\n复制智能体、应用和工作流。\n\n​\n\n接口描述\n\n​\n\n本 API 支持\n\n同工作空间复制\n\n或\n\n跨工作空间复制\n\n。如果你是空间成员，你可以调用本 API 将工作空间内任意智能体、应用和工作流，复制到本空间或同一企业/团队下的其他已加入的工作空间。\n\n​\n\n跨空间复制智能体或应用成功后，为保证正常运行，智能体和应用所使用的工作流、插件等资源也将同时复制到新空间。\n\n​\n\n该 API 分为同步执行和异步执行，扣子编程根据不同资源复制类型自动采用对应的执行方式，具体说明如下：\n\n​\n\n​\n\n执行模式\n\n​\n\n适用场景\n\n​\n\n结果返回方式\n\n​\n\n同步执行\n\n​\n\n同一工作空间内复制\n\n智能体\n\n。\n\n​\n\nAPI 直接返回复制后的智能体 ID。\n\n​\n\n异步执行\n\n​\n\n同一工作空间内复制\n\n应用\n\n、\n\n工作流\n\n。\n\n​\n\n跨工作空间复制\n\n智能体\n\n、\n\n应用\n\n、\n\n工作流\n\n。\n\n​\n\nAPI 返回任务 ID（\n\ntask_id\n\n），需要通过\n\n查询资源复制的结果\n\nAPI 查询执行结果。\n\n​\n\n​\n\n接口限制\n\n​\n\n不支持将个人工作空间中的资源复制到企业或团队工作空间中，个人版工作空间中的资源只能复制到本空间。\n\n​\n\n操作者需要加入源工作空间和目标工作空间。\n\n​\n\n复制后的智能体或应用为草稿状态。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/entities/copy_tasks\n\n​\n\n​\n\n权限\n\n​\n\n复制智能体：\n\nBot.duplicate\n\n、\n\nWorkspace.createBot\n\n​\n\n复制扣子应用：\n\nProject.copy\n\n、\n\nWorkspace.createProject\n\n​\n\n复制工作流：\n\nWorkflow.copy\n\n、\n\nWorkspace.createWorkflow\n\n​\n\n根据复制资源的类型授予对应的权限，确保调用该接口使用的访问令牌已开通相应权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n复制智能体、应用和工作流。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nentity_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n753093880875067***\n\n​\n\n待复制资源的 ID，需要和\n\nentity_type\n\n配套使用。\n\n​\n\n例如，当\n\nentity_type\n\n为\n\nbot\n\n时，此字段应填写智能体的 ID。\n\n​\n\nentity_type\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nbot\n\n​\n\n待复制资源的类型。枚举值：\n\n​\n\napp\n\n：应用。\n\n​\n\nbot\n\n：智能体。\n\n​\n\nworkflow\n\n：工作流。\n\n​\n\nto_workspace_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n7498204883280***\n\n​\n\n目标工作空间 ID。默认为空，即同工作空间复制。\n\n​\n\n如果是跨工作空间复制，需要指定资源复制到哪个工作空间。只能填写本企业或团队下的工作空间。\n\n​\n\n进入指定空间，空间页面 URL 中\n\nw\n\n参数后的数字就是 工作空间 ID。例如\n\nhttps://code.coze.cn/w/75814654762959***/projects\n\n，工作空间 ID 为\n\n75814654762959***\n\n。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nObject of\n\nOpenDuplicateDraftEntityData\n\n​\n\n{\"copied_entity_id\":\"75309388087500****\"}\n\n​\n\n资源复制的返回结果。\n\n​\n\n如果任务是异步执行的，则返回\n\ntask_id\n\n用于查询任务状态。\n\n​\n\n如果任务直接完成，则返回\n\ncopied_entity_id\n\n表示复制后的实体 ID。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n本次请求的详细日志信息，用于问题排查。\n\n​\n\n​\n\nOpenDuplicateDraftEntityData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ntask_id\n\n​\n\nString\n\n​\n\n123e456700***\n\n​\n\n当资源复制任务为异步执行时，API 返回的任务 ID，你可以根据该\n\ntask_id\n\n，通过\n\n查询资源复制的结果\n\nAPI 查询执行结果。\n\n​\n\n以下场景中 API 为异步执行：\n\n​\n\n同工作空间复制应用、工作流。\n\n​\n\n跨工作空间复制智能体、应用、工作流。\n\n​\n\ncopied_entity_id\n\n​\n\nString\n\n​\n\n75309388087500****\n\n​\n\n同工作空间复制智能体时，API 会直接返回复制后的智能体 ID。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/entities/copy_tasks' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_O******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"entity_id\"\n\n:\n\n\"753093880875067***\"\n\n,\n\n​\n\n\"entity_type\"\n\n:\n\n\"bot\"\n\n,\n\n​\n\n\"to_workspace_id\"\n\n:\n\n\"7498204883280***\"\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"copied_entity_id\"\n\n:\n\n\"75309388087500****\"\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n查看智能体版本列表\n\n下一篇\n\n查询资源复制的结果",
        "links": []
      },
      "markdown": "- 本 API 支持 同工作空间复制 或 跨工作空间复制 。如果你是空间成员，你可以调用本 API 将工作空间内任意智能体、应用和工作流，复制到本空间或同一企业/团队下的其他已加入的工作空间。 ​\n\n- 跨空间复制智能体或应用成功后，为保证正常运行，智能体和应用所使用的工作流、插件等资源也将同时复制到新空间。 ​\n\n- 该 API 分为同步执行和异步执行，扣子编程根据不同资源复制类型自动采用对应的执行方式，具体说明如下： ​\n\n| 执行模式​ | 适用场景​ | 结果返回方式​ |\n| 同步执行​ | 同一工作空间内复制智能体。​ | API 直接返回复制后的智能体 ID。​ |\n| 异步执行​ | 同一工作空间内复制应用、工作流。​跨工作空间复制智能体、应用、工作流。​ | API 返回任务 ID（task_id），需要通过查询资源复制的结果API 查询执行结果。​ |\n\n- 同一工作空间内复制 应用 、 工作流 。 ​\n\n- 跨工作空间复制 智能体 、 应用 、 工作流 。 ​\n\n- 不支持将个人工作空间中的资源复制到企业或团队工作空间中，个人版工作空间中的资源只能复制到本空间。 ​\n\n- 操作者需要加入源工作空间和目标工作空间。 ​\n\n- 复制后的智能体或应用为草稿状态。 ​\n\n| 请求方式​ | POST​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/entities/copy_tasks​​ |\n| 权限​ | 复制智能体：Bot.duplicate、Workspace.createBot​复制扣子应用：Project.copy、Workspace.createProject​复制工作流：Workflow.copy、Workspace.createWorkflow​根据复制资源的类型授予对应的权限，确保调用该接口使用的访问令牌已开通相应权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 复制智能体、应用和工作流。​ |\n\n- 复制智能体： Bot.duplicate 、 Workspace.createBot ​\n\n- 复制扣子应用： Project.copy 、 Workspace.createProject ​\n\n- 复制工作流： Workflow.copy 、 Workspace.createWorkflow ​\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| entity_id​ | String​ | 可选​ | 753093880875067***​ | 待复制资源的 ID，需要和entity_type配套使用。​例如，当entity_type为bot时，此字段应填写智能体的 ID。​ |\n| entity_type​ | String​ | 可选​ | bot​ | 待复制资源的类型。枚举值：​app：应用。​bot：智能体。​workflow：工作流。​ |\n| to_workspace_id​ | String​ | 可选​ | 7498204883280***​ | 目标工作空间 ID。默认为空，即同工作空间复制。​如果是跨工作空间复制，需要指定资源复制到哪个工作空间。只能填写本企业或团队下的工作空间。​进入指定空间，空间页面 URL 中w参数后的数字就是 工作空间 ID。例如https://code.coze.cn/w/75814654762959***/projects，工作空间 ID 为75814654762959***。​ |\n\n- app ：应用。 ​\n\n- bot ：智能体。 ​\n\n- workflow ：工作流。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | Object ofOpenDuplicateDraftEntityData​ | {\"copied_entity_id\":\"75309388087500****\"}​ | 资源复制的返回结果。​如果任务是异步执行的，则返回task_id用于查询任务状态。​如果任务直接完成，则返回copied_entity_id表示复制后的实体 ID。​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 本次请求的详细日志信息，用于问题排查。​ |\n\n- 如果任务是异步执行的，则返回 task_id 用于查询任务状态。 ​\n\n- 如果任务直接完成，则返回 copied_entity_id 表示复制后的实体 ID。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| task_id​ | String​ | 123e456700***​ | 当资源复制任务为异步执行时，API 返回的任务 ID，你可以根据该task_id，通过查询资源复制的结果API 查询执行结果。​以下场景中 API 为异步执行：​同工作空间复制应用、工作流。​跨工作空间复制智能体、应用、工作流。​ |\n| copied_entity_id​ | String​ | 75309388087500****​ | 同工作空间复制智能体时，API 会直接返回复制后的智能体 ID。​ |\n\n- 同工作空间复制应用、工作流。 ​\n\n- 跨工作空间复制智能体、应用、工作流。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/query_resource_copy_execution_result",
      "title": "查询资源复制的结果",
      "content": {
        "sections": [],
        "full_text": "查询资源复制的结果\n\n查询资源复制的结果。\n\n​\n\n接口说明\n\n​\n\n调用\n\n复制资源\n\nAPI 时，以下场景中 API 为异步执行，响应信息中会返回 task_id，开发者可以通过本 API 查询指定事件的执行结果。\n\n​\n\n同工作空间复制应用、工作流。\n\n​\n\n跨工作空间复制智能体、应用、工作流。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/entities/copy_tasks/:task_id\n\n​\n\n​\n\n权限\n\n​\n\n无\n\n​\n\n接口说明\n\n​\n\n查询资源复制异步执行的结果。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ntask_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n567456700***\n\n​\n\n资源复制的任务 ID。调用\n\n复制资源\n\nAPI 时，如果 API 为异步执行，响应信息中会返回 task_id。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nObject of\n\nOpenCopyTaskInfoData\n\n​\n\n{\"task_id\":\"123e456700***\",\"entity_type\":\"bot\",\"task_status\":\"successful\",\"source_entity_id\":\"7530938808750080***\",\"target_entity_id\":\"7530938808750067***\",\"target_workspace_id\":\"74982048832804***\"}\n\n​\n\n资源复制任务的结果数据，包含任务 ID、资源类型、任务状态、失败原因、原始资源 ID、复制后的资源 ID 以及目标工作空间 ID 等信息。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n本次请求的详细日志信息，用于问题排查。\n\n​\n\n​\n\nOpenCopyTaskInfoData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ntask_id\n\n​\n\nString\n\n​\n\n123e456700***\n\n​\n\n资源复制的任务 ID。\n\n​\n\nentity_type\n\n​\n\nString\n\n​\n\nbot\n\n​\n\n待复制资源的类型。枚举值：\n\n​\n\napp\n\n：应用。\n\n​\n\nbot\n\n：智能体。\n\n​\n\nworkflow\n\n：工作流。\n\n​\n\ntask_status\n\n​\n\nString\n\n​\n\nsuccessful\n\n​\n\n任务的状态。枚举值：\n\n​\n\nin_progress\n\n：进行中。\n\n​\n\nsuccessful\n\n：成功。\n\n​\n\nfailed\n\n：失败。\n\n​\n\nfailed_reasons\n\n​\n\nArray of\n\nTaskFailedReason\n\n​\n\n\\\n\n​\n\n当资源复制任务失败时，该字段汇总所有失败的具体原因。每个失败原因包含资源 ID、名称、类型及详细错误描述。\n\n​\n\nsource_entity_id\n\n​\n\nString\n\n​\n\n7530938808750080***\n\n​\n\n源资源 ID。\n\n​\n\ntarget_entity_id\n\n​\n\nString\n\n​\n\n7530938808750067***\n\n​\n\n复制后的资源 ID。\n\n​\n\ntarget_workspace_id\n\n​\n\nString\n\n​\n\n74982048832804***\n\n​\n\n资源复制后的目标工作空间 ID，表示资源被复制到的工作空间标识。\n\n​\n\n​\n\nTaskFailedReason\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nentity_id\n\n​\n\nString\n\n​\n\n7530938808750080***\n\n​\n\n在资源复制任务失败时，标识具体失败的资源 ID。\n\n​\n\nentity_name\n\n​\n\nString\n\n​\n\n单词学习助手\n\n​\n\n资源的名称。\n\n​\n\nentity_type\n\n​\n\nString\n\n​\n\nbot\n\n​\n\n在资源复制任务失败时，标识具体失败资源的类型。支持的取值如下所示。\n\n​\n\napp\n\n：应用。\n\n​\n\nbot\n\n：智能体。\n\n​\n\nworkflow\n\n：工作流。\n\n​\n\nplugin\n\n：插件。\n\n​\n\nui\n\n：应用的用户界面。\n\n​\n\nknowledge\n\n：知识库。\n\n​\n\ndatabase\n\n：数据库。\n\n​\n\nvariable\n\n：变量。\n\n​\n\ntrigger\n\n：触发器。\n\n​\n\nprompt\n\n：提示词。\n\n​\n\nshortcut\n\n：快捷指令。\n\n​\n\nfailed_reason\n\n​\n\nString\n\n​\n\n资源配额不足，无法完成复制\n\n​\n\n资源复制任务失败的具体原因描述，API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request GET 'https\n\n:\n\n//api.coze.cn/v1/entities/copy_tasks/567456700***' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_O******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"task_id\"\n\n:\n\n\"123e456700***\"\n\n,\n\n​\n\n\"entity_type\"\n\n:\n\n\"bot\"\n\n,\n\n​\n\n\"task_status\"\n\n:\n\n\"successful\"\n\n,\n\n​\n\n\"source_entity_id\"\n\n:\n\n\"7530938808750080***\"\n\n,\n\n​\n\n\"target_entity_id\"\n\n:\n\n\"7530938808750067***\"\n\n,\n\n​\n\n\"target_workspace_id\"\n\n:\n\n\"74982048832804***\"\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n上一篇\n\n复制资源\n\n下一篇\n\n下架智能体",
        "links": []
      },
      "markdown": "- 同工作空间复制应用、工作流。 ​\n\n- 跨工作空间复制智能体、应用、工作流。 ​\n\n| 请求方式​ | GET​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/entities/copy_tasks/:task_id​​ |\n| 权限​ | 无​ |\n| 接口说明​ | 查询资源复制异步执行的结果。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| task_id​ | String​ | 可选​ | 567456700***​ | 资源复制的任务 ID。调用复制资源API 时，如果 API 为异步执行，响应信息中会返回 task_id。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | Object ofOpenCopyTaskInfoData​ | {\"task_id\":\"123e456700***\",\"entity_type\":\"bot\",\"task_status\":\"successful\",\"source_entity_id\":\"7530938808750080***\",\"target_entity_id\":\"7530938808750067***\",\"target_workspace_id\":\"74982048832804***\"}​ | 资源复制任务的结果数据，包含任务 ID、资源类型、任务状态、失败原因、原始资源 ID、复制后的资源 ID 以及目标工作空间 ID 等信息。​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 本次请求的详细日志信息，用于问题排查。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| task_id​ | String​ | 123e456700***​ | 资源复制的任务 ID。​ |\n| entity_type​ | String​ | bot​ | 待复制资源的类型。枚举值：​app：应用。​bot：智能体。​workflow：工作流。​ |\n| task_status​ | String​ | successful​ | 任务的状态。枚举值：​in_progress：进行中。​successful：成功。​failed：失败。​ |\n| failed_reasons​ | Array ofTaskFailedReason​ | \\​ | 当资源复制任务失败时，该字段汇总所有失败的具体原因。每个失败原因包含资源 ID、名称、类型及详细错误描述。​ |\n| source_entity_id​ | String​ | 7530938808750080***​ | 源资源 ID。​ |\n| target_entity_id​ | String​ | 7530938808750067***​ | 复制后的资源 ID。​ |\n| target_workspace_id​ | String​ | 74982048832804***​ | 资源复制后的目标工作空间 ID，表示资源被复制到的工作空间标识。​ |\n\n- app ：应用。 ​\n\n- bot ：智能体。 ​\n\n- workflow ：工作流。 ​\n\n- in_progress ：进行中。 ​\n\n- successful ：成功。 ​\n\n- failed ：失败。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| entity_id​ | String​ | 7530938808750080***​ | 在资源复制任务失败时，标识具体失败的资源 ID。​ |\n| entity_name​ | String​ | 单词学习助手​ | 资源的名称。​ |\n| entity_type​ | String​ | bot​ | 在资源复制任务失败时，标识具体失败资源的类型。支持的取值如下所示。​app：应用。​bot：智能体。​workflow：工作流。​plugin：插件。​ui：应用的用户界面。​knowledge：知识库。​database：数据库。​variable：变量。​trigger：触发器。​prompt：提示词。​shortcut：快捷指令。​ |\n| failed_reason​ | String​ | 资源配额不足，无法完成复制​ | 资源复制任务失败的具体原因描述，API 调用失败时可通过此字段查看详细错误信息。​ |\n\n- app ：应用。 ​\n\n- bot ：智能体。 ​\n\n- workflow ：工作流。 ​\n\n- plugin ：插件。 ​\n\n- ui ：应用的用户界面。 ​\n\n- knowledge ：知识库。 ​\n\n- database ：数据库。 ​\n\n- variable ：变量。 ​\n\n- trigger ：触发器。 ​\n\n- prompt ：提示词。 ​\n\n- shortcut ：快捷指令。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/unpublish_agent",
      "title": "下架智能体",
      "content": {
        "sections": [],
        "full_text": "下架智能体\n\n智能体发布后，你可以调用本 API 从扣子编程官方渠道及自定义渠道下架智能体。\n\n​\n\n接口限制\n\n​\n\n仅智能体所有者和自定义渠道的所有者可以下架智能体。\n\n​\n\n暂不支持调用本 API 下架豆包渠道的智能体。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/bots/:bot_id/unpublish\n\n​\n\n​\n\n权限\n\n​\n\ndisconnectBot\n\n、\n\nConnector.disconnectBot\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\ndisconnectBot\n\n、\n\nConnector.disconnectBot\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n从扣子编程官方渠道及自定义渠道下架智能体。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $AccessToken\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n73428668*****\n\n​\n\n待下架的智能体的 ID。你可通过智能体开发页面 URL 中的\n\nbot\n\n参数获取智能体 ID 。例如 URL 为\n\nhttps://www.coze.com/space/341****/bot/73428668*****\n\n时，智能体 ID 为\n\n73428668*****\n\n。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nconnector_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n1024\n\n​\n\n待下架的渠道 ID。支持下架如下发布渠道中的智能体：\n\n​\n\n1024：API 渠道。\n\n​\n\n999：Chat SDK。\n\n​\n\n10000122：扣子商店。\n\n​\n\n10000113：微信客服。\n\n​\n\n10000120：微信服务号。\n\n​\n\n10000121：微信订阅号。\n\n​\n\n10000126：抖音小程序。\n\n​\n\n10000127：微信小程序。\n\n​\n\n10000011：飞书。\n\n​\n\n10000128：飞书多维表格。\n\n​\n\n10000117：掘金。\n\n​\n\n自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在\n\n账号设置\n\n>\n\n发布渠道\n\n>\n\n企业自定义渠道管理\n\n页面查看渠道 ID。\n\n​\n\nunpublish_reason\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n终止服务\n\n​\n\n下架渠道的原因说明，用于记录或说明为何执行下架操作。最大支持\n\n1024\n\n个字符。\n\n​\n\n该原因会在扣子编程\n\n工作空间\n\n>\n\n发布管理\n\n页面对应智能体的渠道右侧展示，建议提供清晰易懂的下架原因。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/bots/73428668*****/unpublish' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_xitq9LWlowpX3qGCih1lwpAdzvXNqgmpfhpV28HLWFN****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"connector_id\"\n\n:\n\n\"1024\"\n\n,\n\n​\n\n\"unpublish_reason\"\n\n:\n\n\"终止服务\"\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n查询资源复制的结果\n\n下一篇\n\nBot object",
        "links": []
      },
      "markdown": "- 仅智能体所有者和自定义渠道的所有者可以下架智能体。 ​\n\n- 暂不支持调用本 API 下架豆包渠道的智能体。 ​\n\n| 请求方式​ | POST​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/bots/:bot_id/unpublish​​ |\n| 权限​ | disconnectBot、Connector.disconnectBot​确保调用该接口使用的访问令牌开通了disconnectBot、Connector.disconnectBot权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 从扣子编程官方渠道及自定义渠道下架智能体。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $AccessToken​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| bot_id​ | String​ | 必选​ | 73428668*****​ | 待下架的智能体的 ID。你可通过智能体开发页面 URL 中的bot参数获取智能体 ID 。例如 URL 为https://www.coze.com/space/341****/bot/73428668*****时，智能体 ID 为73428668*****。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| connector_id​ | String​ | 必选​ | 1024​ | 待下架的渠道 ID。支持下架如下发布渠道中的智能体：​1024：API 渠道。​999：Chat SDK。​10000122：扣子商店。​10000113：微信客服。​10000120：微信服务号。​10000121：微信订阅号。​10000126：抖音小程序。​10000127：微信小程序。​10000011：飞书。​10000128：飞书多维表格。​10000117：掘金。​自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在账号设置>发布渠道>企业自定义渠道管理页面查看渠道 ID。​ |\n| unpublish_reason​ | String​ | 可选​ | 终止服务​ | 下架渠道的原因说明，用于记录或说明为何执行下架操作。最大支持1024个字符。​该原因会在扣子编程工作空间>发布管理页面对应智能体的渠道右侧展示，建议提供清晰易懂的下架原因。​​​​​​ |\n\n- 1024：API 渠道。 ​\n\n- 999：Chat SDK。 ​\n\n- 10000122：扣子商店。 ​\n\n- 10000113：微信客服。 ​\n\n- 10000120：微信服务号。 ​\n\n- 10000121：微信订阅号。 ​\n\n- 10000126：抖音小程序。 ​\n\n- 10000127：微信小程序。 ​\n\n- 10000011：飞书。 ​\n\n- 10000128：飞书多维表格。 ​\n\n- 10000117：掘金。 ​\n\n- 自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在 账号设置 > 发布渠道 > 企业自定义渠道管理 页面查看渠道 ID。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/bot_object",
      "title": "Bot object",
      "content": {
        "sections": [],
        "full_text": "Bot object\n\nbot\n\n对象是一个智能体实体，包含以下信息。\n\n​\n\n​\n\n字段\n\n​\n\n类型\n\n​\n\n说明\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n智能体的唯一标识。\n\n​\n\nname\n\n​\n\nString\n\n​\n\n智能体的名称。\n\n​\n\ndescription\n\n​\n\nString\n\n​\n\n智能体的描述信息。\n\n​\n\nicon_url\n\n​\n\nString\n\n​\n\n智能体头像地址。\n\n​\n\ncreate_time\n\n​\n\nInteger\n\n​\n\n创建时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。\n\n​\n\nupdate_time\n\n​\n\nInteger\n\n​\n\n更新时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。\n\n​\n\nversion\n\n​\n\nString\n\n​\n\n智能体最新版本的版本号。\n\n​\n\nprompt_info\n\n​\n\nObject\n\n​\n\n智能体的提示词配置，参考\n\nPrompt object\n\n说明。\n\n​\n\nonboarding_info\n\n​\n\nObject\n\n​\n\n智能体的开场白配置，参考\n\nOnboarding object\n\n说明。\n\n​\n\nbot_mode\n\n​\n\n​\n\nInteger\n\n​\n\n智能体模式，取值：\n\n​\n\n0\n\n：单 Agent 模式\n\n​\n\n1\n\n：多 Agent 模式\n\n​\n\nplugin_info_list\n\n​\n\nArray of Object\n\n​\n\n智能体置的插件，参考\n\nPlugin object\n\n说明。\n\n​\n\nmodel_info\n\n​\n\nObject\n\n​\n\n智能体置的模型，参考\n\nModel object\n\n说明。\n\n​\n\nknowledge\n\n​\n\nObject\n\n​\n\n智能体定的知识库，参考\n\nKnowledge object\n\n说明。\n\n​\n\n​\n\nPrompt object\n\n​\n\n​\n\n字段\n\n​\n\n类型\n\n​\n\n说明\n\n​\n\nprompt\n\n​\n\nString\n\n​\n\n智能体配置的提示词。\n\n​\n\n​\n\nOnboarding object\n\n​\n\n​\n\n字段\n\n​\n\n类型\n\n​\n\n说明\n\n​\n\nprologue\n\n​\n\nString\n\n​\n\n智能体配置的开场白内容。\n\n​\n\nsuggested_questions\n\n​\n\nArray of String\n\n​\n\n智能体配置的推荐问题列表。未开启\n\n用户问题建议\n\n时，不返回此字段。\n\n​\n\n​\n\nPlugin\n\nobject\n\n​\n\n​\n\n字段\n\n​\n\n类型\n\n​\n\n说明\n\n​\n\nplugin_id\n\n​\n\nString\n\n​\n\n插件唯一标识。\n\n​\n\nname\n\n​\n\nString\n\n​\n\n插件名称。\n\n​\n\ndescription\n\n​\n\nString\n\n​\n\n插件描述。\n\n​\n\nicon_url\n\n​\n\nString\n\n​\n\n插件头像。\n\n​\n\napi_info_list\n\n​\n\nArray of Object\n\n​\n\n插件的工具列表信息，详情参考\n\nPluginAPI object\n\n。\n\n​\n\n​\n\nPluginAPI\n\nobject\n\n​\n\n​\n\n字段\n\n​\n\n类型\n\n​\n\n说明\n\n​\n\napi_id\n\n​\n\nString\n\n​\n\n工具的唯一标识。\n\n​\n\nname\n\n​\n\nString\n\n​\n\n工具的名称。\n\n​\n\ndescription\n\n​\n\nString\n\n​\n\n工具的描述。\n\n​\n\n​\n\nModel object\n\n​\n\n​\n\n字段\n\n​\n\n类型\n\n​\n\n说明\n\n​\n\nmodel_id\n\n​\n\nString\n\n​\n\n模型的唯一标识。\n\n​\n\nmodel_name\n\n​\n\nString\n\n​\n\n模型名称。\n\n​\n\n​\n\nKnowledge object\n\n​\n\n​\n\n字段\n\n​\n\n类型\n\n​\n\n说明\n\n​\n\nknowledge_infos\n\n​\n\nArray of Object\n\n​\n\n智能体绑定的知识库列表，参考\n\nKnowledgeInfo object\n\n说明。\n\n​\n\n​\n\nKnowledgeInfo object\n\n​\n\n​\n\n字段\n\n​\n\n类型\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n知识库 ID。\n\n​\n\nname\n\n​\n\nString\n\n​\n\n知识库名称。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n上一篇\n\n下架智能体\n\n下一篇\n\n查看应用列表",
        "links": []
      },
      "markdown": "| 字段​ | 类型​ | 说明​ |\n| bot_id​ | String​ | 智能体的唯一标识。​ |\n| name​ | String​ | 智能体的名称。​ |\n| description​ | String​ | 智能体的描述信息。​ |\n| icon_url​ | String​ | 智能体头像地址。​ |\n| create_time​ | Integer​ | 创建时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。​ |\n| update_time​ | Integer​ | 更新时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。​ |\n| version​ | String​ | 智能体最新版本的版本号。​ |\n| prompt_info​ | Object​ | 智能体的提示词配置，参考Prompt object说明。​ |\n| onboarding_info​ | Object​ | 智能体的开场白配置，参考Onboarding object说明。​ |\n| bot_mode​​ | Integer​ | 智能体模式，取值：​0：单 Agent 模式​1：多 Agent 模式​ |\n| plugin_info_list​ | Array of Object​ | 智能体置的插件，参考Plugin object说明。​ |\n| model_info​ | Object​ | 智能体置的模型，参考Model object说明。​ |\n| knowledge​ | Object​ | 智能体定的知识库，参考Knowledge object说明。​ |\n\n- 0 ：单 Agent 模式 ​\n\n- 1 ：多 Agent 模式 ​\n\n| 字段​ | 类型​ | 说明​ |\n| prompt​ | String​ | 智能体配置的提示词。​ |\n\n| 字段​ | 类型​ | 说明​ |\n| prologue​ | String​ | 智能体配置的开场白内容。​ |\n| suggested_questions​ | Array of String​ | 智能体配置的推荐问题列表。未开启用户问题建议时，不返回此字段。​ |\n\n| 字段​ | 类型​ | 说明​ |\n| plugin_id​ | String​ | 插件唯一标识。​ |\n| name​ | String​ | 插件名称。​ |\n| description​ | String​ | 插件描述。​ |\n| icon_url​ | String​ | 插件头像。​ |\n| api_info_list​ | Array of Object​ | 插件的工具列表信息，详情参考PluginAPI object。​ |\n\n| 字段​ | 类型​ | 说明​ |\n| api_id​ | String​ | 工具的唯一标识。​ |\n| name​ | String​ | 工具的名称。​ |\n| description​ | String​ | 工具的描述。​ |\n\n| 字段​ | 类型​ | 说明​ |\n| model_id​ | String​ | 模型的唯一标识。​ |\n| model_name​ | String​ | 模型名称。​ |\n\n| 字段​ | 类型​ | 说明​ |\n| knowledge_infos​ | Array of Object​ | 智能体绑定的知识库列表，参考KnowledgeInfo object说明。​ |\n\n| 字段​ | 类型​ | 说明​ |\n| id​ | String​ | 知识库 ID。​ |\n| name​ | String​ | 知识库名称。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/published_apps_list",
      "title": "查看应用列表",
      "content": {
        "sections": [],
        "full_text": "查看应用列表\n\n查看指定工作空间的应用列表。\n\n​\n\n接口描述\n\n​\n\n查看指定工作空间的应用列表，包含草稿状态的应用和已发布的应用。\n\n​\n\n扣子个人版中，你只能查询你作为工作空间所有者的应用。\n\n​\n\n扣子企业版中，你可以查看指定工作空间下的所有应用。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/apps\n\n​\n\n权限\n\n​\n\nlistApp\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nlistApp\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n查看指定工作空间的应用列表。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nworkspace_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n75123945629***\n\n​\n\n应用所在的工作空间的 Space ID。Space ID 是工作空间的唯一标识。\n\n​\n\n进入指定空间，空间页面 URL 中\n\nw\n\n参数后的数字就是 工作空间 ID。例如\n\nhttps://code.coze.cn/w/75814654762959***/projects\n\n，工作空间 ID 为\n\n75814654762959***\n\n。\n\n​\n\npublish_status\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nall\n\n​\n\n应用的发布状态，用于筛选不同发布状态的应用。枚举值如下：\n\n​\n\nall ：所有状态。\n\n​\n\npublished_online ：（默认值）已发布的正式版。\n\n​\n\npublished_draft ：已发布但当前为草稿状态。\n\n​\n\nunpublished_draft ：从未发布过。\n\n​\n\nconnector_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n1024\n\n​\n\n渠道 ID，仅在\n\npublish_status\n\n为\n\npublished_online\n\n或\n\npublished_draft\n\n时需要设置。用于筛选该渠道下已发布的应用，包括已发布的线上正式版本和已发布的草稿版本。\n\n​\n\n默认值为 1024，即默认获取 API 发布渠道下的最新版本。\n\n​\n\n扣子编程的渠道 ID 包括：\n\n​\n\n1024：API 渠道。\n\n​\n\n999：Chat SDK。\n\n​\n\n10000122：扣子商店。\n\n​\n\n10000113：微信客服。\n\n​\n\n10000120：微信服务号。\n\n​\n\n10000121：微信订阅号。\n\n​\n\n10000126：抖音小程序。\n\n​\n\n10000127：微信小程序。\n\n​\n\n10000011：飞书。\n\n​\n\n998：WebSDK。\n\n​\n\n自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在\n\n账号设置\n\n>\n\n发布渠道\n\n>\n\n企业自定义渠道管理\n\n页面查看渠道 ID。\n\n​\n\npage_num\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n1\n\n​\n\n分页查询时的页码。默认为 1，即返回第一页数据。\n\n​\n\npage_size\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n20\n\n​\n\n分页大小。默认为 20，即每页返回 20 条数据。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nObject of\n\nOpenGetProjectData\n\n​\n\n{\"items\":[{\"id\":\"74876004423701****\",\"name\":\"test\",\"icon_url\":\"\n\nhttps://example.com/FileBizType.BIZ_BOT_APP/app1***.png\n\n\",\"updated_at\":1718289297,\"description\":\"应用测试\",\"is_published\":true,\"published_at\":1718289297,\"owner_user_id\":\"23423423****\"}],\"total\":1}\n\n​\n\n返回的应用列表数据，包含应用的基本信息和总数。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"1234567890abcdef\"}\n\n​\n\n包含请求的详细日志信息，用于问题排查和调试。\n\n​\n\n​\n\nOpenGetProjectData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nitems\n\n​\n\nArray of\n\nAppSimpleInfo\n\n​\n\n[ { \"id\": \"751614225987***\", \"is_published\": false, \"updated_at\": 1749994622, \"owner_user_id\": \"32902037***\", \"name\": \"***\", \"description\": \"***\", \"icon_url\": \"\n\nhttps://example.com/FileBizType.BIZ_BOT_ICON/***\n\n\" } ]\n\n​\n\n返回的应用列表。\n\n​\n\ntotal\n\n​\n\nLong\n\n​\n\n2\n\n​\n\n返回的应用的数量。\n\n​\n\n​\n\nAppSimpleInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n74876004423701****\n\n​\n\n应用的 ID。\n\n​\n\nname\n\n​\n\nString\n\n​\n\ntest\n\n​\n\n应用的名称。\n\n​\n\nicon_url\n\n​\n\nString\n\n​\n\nhttps://example.com/FileBizType.BIZ_BOT_APP/app1\n\n***\n\n.png\n\n​\n\n应用图标的 URL。\n\n​\n\nfolder_id\n\n​\n\nString\n\n​\n\n752316125533***\n\n​\n\n应用所属的文件夹 ID。\n\n​\n\nupdated_at\n\n​\n\nLong\n\n​\n\n1718289297\n\n​\n\n应用的最近一次更新时间。以 Unix 时间戳格式表示。单位为秒。\n\n​\n\ndescription\n\n​\n\nString\n\n​\n\n应用测试\n\n​\n\n应用的描述。\n\n​\n\nis_published\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n应用是否已发布。\n\n​\n\ntrue\n\n表示已发布。\n\n​\n\nfalse\n\n表示未发布。\n\n​\n\npublished_at\n\n​\n\nLong\n\n​\n\n1718289297\n\n​\n\n应用的最近一次发布时间。以 Unix 时间戳格式表示。单位为秒。\n\n​\n\n仅当应用已发布时返回该值。如果应用是未发布过的草稿版本，则该参数的值为空。\n\n​\n\nowner_user_id\n\n​\n\nString\n\n​\n\n23423423****\n\n​\n\n应用创建者的扣子用户 ID。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\nGET 'https\n\n:\n\n//api.coze.cn/v1/apps?publish_status=all&workspace_id=751543725346***' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"total\"\n\n:\n\n1\n\n,\n\n​\n\n\"items\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"751614225987***\"\n\n,\n\n​\n\n\"is_published\"\n\n:\n\ntrue\n\n,\n\n​\n\n\"updated_at\"\n\n:\n\n1749994622\n\n,\n\n​\n\n\"published_at\"\n\n:\n\n1718289297\n\n,\n\n​\n\n\"owner_user_id\"\n\n:\n\n\"32902037***\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"test\"\n\n,\n\n​\n\n\"folder_id\"\n\n:\n\n\"752316125533542***\"\n\n,\n\n​\n\n\"description\"\n\n:\n\n\"应用测试\"\n\n,\n\n​\n\n\"icon_url\"\n\n:\n\n\"https://example.com/FileBizType.BIZ_BOT_ICON/***\"\n\n​\n\n}\n\n​\n\n]\n\n​\n\n},\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\nBot object\n\n下一篇\n\n智能体发布回调事件",
        "links": []
      },
      "markdown": "- 扣子个人版中，你只能查询你作为工作空间所有者的应用。 ​\n\n- 扣子企业版中，你可以查看指定工作空间下的所有应用。 ​\n\n| 请求方式​ | GET |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/apps​ |\n| 权限​ | listApp​确保调用该接口使用的访问令牌开通了listApp权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 查看指定工作空间的应用列表。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| workspace_id​ | String​ | 必选​ | 75123945629***​ | 应用所在的工作空间的 Space ID。Space ID 是工作空间的唯一标识。​进入指定空间，空间页面 URL 中w参数后的数字就是 工作空间 ID。例如https://code.coze.cn/w/75814654762959***/projects，工作空间 ID 为75814654762959***。​ |\n| publish_status​ | String​ | 可选​ | all​ | 应用的发布状态，用于筛选不同发布状态的应用。枚举值如下：​all ：所有状态。​published_online ：（默认值）已发布的正式版。​published_draft ：已发布但当前为草稿状态。​unpublished_draft ：从未发布过。​ |\n| connector_id​ | String​ | 可选​ | 1024​ | 渠道 ID，仅在publish_status为published_online或published_draft时需要设置。用于筛选该渠道下已发布的应用，包括已发布的线上正式版本和已发布的草稿版本。​默认值为 1024，即默认获取 API 发布渠道下的最新版本。​扣子编程的渠道 ID 包括：​1024：API 渠道。​999：Chat SDK。​10000122：扣子商店。​10000113：微信客服。​10000120：微信服务号。​10000121：微信订阅号。​10000126：抖音小程序。​10000127：微信小程序。​10000011：飞书。​998：WebSDK。​自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在账号设置>发布渠道>企业自定义渠道管理页面查看渠道 ID。​ |\n| page_num​ | Integer​ | 可选​ | 1​ | 分页查询时的页码。默认为 1，即返回第一页数据。​ |\n| page_size​ | Integer​ | 可选​ | 20​ | 分页大小。默认为 20，即每页返回 20 条数据。​ |\n\n- all ：所有状态。 ​\n\n- published_online ：（默认值）已发布的正式版。 ​\n\n- published_draft ：已发布但当前为草稿状态。 ​\n\n- unpublished_draft ：从未发布过。 ​\n\n- 1024：API 渠道。 ​\n\n- 999：Chat SDK。 ​\n\n- 10000122：扣子商店。 ​\n\n- 10000113：微信客服。 ​\n\n- 10000120：微信服务号。 ​\n\n- 10000121：微信订阅号。 ​\n\n- 10000126：抖音小程序。 ​\n\n- 10000127：微信小程序。 ​\n\n- 10000011：飞书。 ​\n\n- 998：WebSDK。 ​\n\n- 自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在 账号设置 > 发布渠道 > 企业自定义渠道管理 页面查看渠道 ID。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | Object ofOpenGetProjectData​ | {\"items\":[{\"id\":\"74876004423701****\",\"name\":\"test\",\"icon_url\":\"https://example.com/FileBizType.BIZ_BOT_APP/app1***.png\",\"updated_at\":1718289297,\"description\":\"应用测试\",\"is_published\":true,\"published_at\":1718289297,\"owner_user_id\":\"23423423****\"}],\"total\":1}​ | 返回的应用列表数据，包含应用的基本信息和总数。​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"1234567890abcdef\"}​ | 包含请求的详细日志信息，用于问题排查和调试。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| items​ | Array ofAppSimpleInfo​ | [ { \"id\": \"751614225987***\", \"is_published\": false, \"updated_at\": 1749994622, \"owner_user_id\": \"32902037***\", \"name\": \"***\", \"description\": \"***\", \"icon_url\": \"https://example.com/FileBizType.BIZ_BOT_ICON/***\" } ]​ | 返回的应用列表。​ |\n| total​ | Long​ | 2​ | 返回的应用的数量。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 74876004423701****​ | 应用的 ID。​ |\n| name​ | String​ | test​ | 应用的名称。​ |\n| icon_url​ | String​ | https://example.com/FileBizType.BIZ_BOT_APP/app1***.png​ | 应用图标的 URL。​ |\n| folder_id​ | String​ | 752316125533***​ | 应用所属的文件夹 ID。​ |\n| updated_at​ | Long​ | 1718289297​ | 应用的最近一次更新时间。以 Unix 时间戳格式表示。单位为秒。​ |\n| description​ | String​ | 应用测试​ | 应用的描述。​ |\n| is_published​ | Boolean​ | true​ | 应用是否已发布。​true表示已发布。​false表示未发布。​ |\n| published_at​ | Long​ | 1718289297​ | 应用的最近一次发布时间。以 Unix 时间戳格式表示。单位为秒。​仅当应用已发布时返回该值。如果应用是未发布过的草稿版本，则该参数的值为空。​ |\n| owner_user_id​ | String​ | 23423423****​ | 应用创建者的扣子用户 ID。​ |\n\n- true 表示已发布。 ​\n\n- false 表示未发布。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/agent_callback_messages",
      "title": "智能体发布回调事件",
      "content": {
        "sections": [],
        "full_text": "智能体发布回调事件\n\n当开发者订阅了低代码智能体发布回调事件后，开发者发布智能体时，扣子编程会向指定的回调地址推送\n\n回调消息\n\n。订阅回调的具体操作请参见\n\n​\n\n订阅回调\n\n。\n\n​\n\n触发条件\n\n​\n\n开发者发布低代码智能体时，\n\n扣子\n\n编程会向指定的回调地址发送回调消息，消息中包含智能体和开发者的基本信息。如果渠道入驻时配置了渠道授权，发布智能体时\n\n扣子\n\n编程将获取开发者的渠道用户 ID，此 ID 也会包含在回调消息中一起发送到渠道侧。\n\n​\n\n智能体发布回调事件的触发条件如下：\n\n​\n\n​\n\n回调类型\n\n​\n\n个人版\n\n​\n\n企业版（企业标准版、企业旗舰版）\n\n​\n\n普通回调\n\n​\n\n仅\n\n空间所有者\n\n可订阅，当工作空间中任意智能体被发布至扣子编程官方渠道或公共渠道时，对应的回调地址会收到智能体发布回调事件。\n\n​\n\n仅\n\n超级管理员和管理员\n\n可订阅，当企业内任意智能体被发布至扣子编程官方渠道或公共渠道时，对应的回调地址会收到智能体发布回调事件。\n\n​\n\n渠道回调\n\n​\n\n仅\n\n自定义渠道创建者\n\n可订阅，当智能体发布至该自定义渠道时，对应的回调地址会收到智能体发布回调事件。\n\n​\n\n仅\n\n超级管理员和管理员\n\n可订阅，当智能体发布至该自定义渠道时，对应的回调地址会收到智能体发布回调事件。\n\n​\n\n​\n\n回调响应要求\n\n​\n\n业务服务器收到智能体发布回调后，应在 10 秒内响应。\n\n​\n\n如果是普通回调，只需要在响应中返回 HTTP 状态码 200 即可。\n\n​\n\n如果是渠道回调，需要在响应中返回智能体的审核结果，否则智能体发布失败。\n\n​\n\n说明\n\n如果审核流程无法在 10 秒内完成，自定义渠道可以先发送一条审核中的响应消息，审核结束后，再通过 API\n\n​\n\n更新审核结果\n\n通知扣子编程此智能体的最终审核结果。\n\n​\n\n​\n\n回调结构体\n\n​\n\n回调消息的结构体 Body 中包含两个主要字段：\n\nheader\n\n和\n\nevent\n\n。\n\n​\n\nheader\n\n参数的参数说明请参见\n\n​\n\n回调事件\n\n。\n\n​\n\nevent\n\n参数中包括以下参数：\n\n​\n\n​\n\n字段\n\n​\n\n类型\n\n​\n\n说明\n\n​\n\nuser_id_str\n\n​\n\nInteger\n\n​\n\n发布智能体的\n\n扣子\n\n用户 ID。\n\n​\n\nspace_id\n\n​\n\nString\n\n​\n\n智能体所属的空间 ID。\n\n​\n\n订阅普通回调时会返回该参数，订阅渠道回调时不返回该参数。\n\n​\n\nconnector_user_id\n\n​\n\nString\n\n​\n\n扣子\n\n用户在渠道中的用户 ID。此字段仅在渠道回调中返回，且仅当配置了渠道授权时才会包含，详细说明可参考\n\n​\n\n步骤三：渠道管理员配置渠道授权\n\n。\n\n​\n\nuser_name\n\n​\n\nString\n\n​\n\n发布智能体的\n\n扣子\n\n用户昵称。\n\n​\n\nbot_id_str\n\n​\n\nInteger\n\n​\n\n智能体 ID。\n\n​\n\nbot_name\n\n​\n\nString\n\n​\n\n智能体名称。\n\n​\n\ndescription\n\n​\n\nString\n\n​\n\n智能体的描述信息。\n\n​\n\nversion\n\n​\n\nString\n\n​\n\n智能体的版本号。\n\n​\n\n​\n\n回调结构体示例：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n// 事件头\n\n​\n\n\"header\"\n\n:{\n\n​\n\n// 事件类型\n\n​\n\n\"event_type\"\n\n:\n\n\"bot.published\"\n\n,\n\n// 智能体发布回调事件\n\n​\n\n// 事件 id\n\n​\n\n\"event_id\"\n\n:\n\n\"12345abc\"\n\n,\n\n​\n\n// 事件创建事件\n\n​\n\n\"created_at\"\n\n:\n\n1613427443000\n\n,\n\n​\n\n\"coze_account_id\"\n\n:\n\n\"418960299***\"\n\n,\n\n// 智能体所属的空间的 owner id\n\n​\n\n\"api_app_id\"\n\n:\n\n\"750974592959****\"\n\n,\n\n// 回调应用的 id\n\n​\n\n\"connector_id\"\n\n:\n\n\"12345\"\n\n// 如果为渠道回调，这个字段会填充渠道 id\n\n​\n\n},\n\n​\n\n​\n\n// 事件体，根据事件类型不同，结构也不一样。当前展示的是智能体发布的事件\n\n​\n\n\"event\"\n\n:{\n\n​\n\n// 用户 id\n\n​\n\n\"user_id_str\"\n\n:\n\n1234567890\n\n,\n\n​\n\n// 渠道用户 id，仅在配置了渠道授权后返回\n\n​\n\n\"connector_user_id\"\n\n:\n\n\"1234567890\"\n\n​\n\n// 用户昵称\n\n​\n\n\"user_name\"\n\n:\n\n\"name123\"\n\n​\n\n//智能体id\n\n​\n\n\"bot_id_str\"\n\n:\n\n987654\n\n***\n\n,\n\n​\n\n//智能体名称\n\n​\n\n\"bot_name\"\n\n:\n\n\"SampleBot\"\n\n,\n\n​\n\n//智能体描述\n\n​\n\n\"description\"\n\n:\n\n\"This is a sample bot.\"\n\n,\n\n​\n\n//智能体版本\n\n​\n\n\"version\"\n\n:\n\n\"12345\"\n\n​\n\n},\n\n​\n\n}\n\n​\n\n​\n\n响应回调的结构体\n\n​\n\n渠道回调的响应回调的 Body 应包括以下参数：\n\n​\n\n​\n\n字段\n\n​\n\n类型\n\n​\n\n说明\n\n​\n\naudit\n\n​\n\nArray of JSON\n\n​\n\n审核结果。\n\n​\n\naudit.audit_status\n\n​\n\nInteger\n\n​\n\n审核状态。\n\n​\n\n1：审核中\n\n​\n\n2：审核通过\n\n​\n\n3：审核失败\n\n​\n\naudit.reason\n\n​\n\nString\n\n​\n\n审核失败时，此字段返回审核失败原因。\n\n​\n\n​\n\n渠道回调的响应回调的结构体示例：\n\n​\n\n​\n\nJSON\n\n复制\n\n// 不同的事件，要求不同的返回体。此处为智能体发布事件，需要返回审核状态\n\n​\n\n{\n\n​\n\n\"audit\"\n\n:{\n\n​\n\n\"audit_status\"\n\n:\n\n2\n\n// 1: 审核中；2: 通过；3: 拒绝\n\n​\n\n\"reason\"\n\n:\n\n\"不通过原因\"\n\n// 原因\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n相关文档\n\n​\n\n​\n\n订阅回调\n\n​\n\n​\n\n接收并处理回调\n\n​\n\n上一篇\n\n查看应用列表\n\n下一篇\n\n智能体删除回调事件",
        "links": []
      },
      "markdown": "| 回调类型​ | 个人版​ | 企业版（企业标准版、企业旗舰版）​ |\n| 普通回调​ | 仅空间所有者可订阅，当工作空间中任意智能体被发布至扣子编程官方渠道或公共渠道时，对应的回调地址会收到智能体发布回调事件。​ | 仅超级管理员和管理员可订阅，当企业内任意智能体被发布至扣子编程官方渠道或公共渠道时，对应的回调地址会收到智能体发布回调事件。​ |\n| 渠道回调​ | 仅自定义渠道创建者可订阅，当智能体发布至该自定义渠道时，对应的回调地址会收到智能体发布回调事件。​ | 仅超级管理员和管理员可订阅，当智能体发布至该自定义渠道时，对应的回调地址会收到智能体发布回调事件。​ |\n\n- 如果是普通回调，只需要在响应中返回 HTTP 状态码 200 即可。 ​\n\n- 如果是渠道回调，需要在响应中返回智能体的审核结果，否则智能体发布失败。 ​\n\n- 说明 如果审核流程无法在 10 秒内完成，自定义渠道可以先发送一条审核中的响应消息，审核结束后，再通过 API ​ 更新审核结果 通知扣子编程此智能体的最终审核结果。 ​ ​\n\n- header 参数的参数说明请参见 ​ 回调事件 。 ​\n\n- event 参数中包括以下参数： ​\n\n- ​ 字段 ​ 类型 ​ 说明 ​ user_id_str ​ Integer ​ 发布智能体的 扣子 用户 ID。 ​ space_id ​ String ​ 智能体所属的空间 ID。 ​ 订阅普通回调时会返回该参数，订阅渠道回调时不返回该参数。 ​ connector_user_id ​ String ​ 扣子 用户在渠道中的用户 ID。此字段仅在渠道回调中返回，且仅当配置了渠道授权时才会包含，详细说明可参考 ​ 步骤三：渠道管理员配置渠道授权 。 ​ user_name ​ String ​ 发布智能体的 扣子 用户昵称。 ​ bot_id_str ​ Integer ​ 智能体 ID。 ​ bot_name ​ String ​ 智能体名称。 ​ description ​ String ​ 智能体的描述信息。 ​ version ​ String ​ 智能体的版本号。 ​ ​\n\n| 字段​ | 类型​ | 说明​ |\n| user_id_str​ | Integer​ | 发布智能体的扣子用户 ID。​ |\n| space_id​ | String​ | 智能体所属的空间 ID。​订阅普通回调时会返回该参数，订阅渠道回调时不返回该参数。​ |\n| connector_user_id​ | String​ | 扣子用户在渠道中的用户 ID。此字段仅在渠道回调中返回，且仅当配置了渠道授权时才会包含，详细说明可参考​步骤三：渠道管理员配置渠道授权。​ |\n| user_name​ | String​ | 发布智能体的扣子用户昵称。​ |\n| bot_id_str​ | Integer​ | 智能体 ID。​ |\n| bot_name​ | String​ | 智能体名称。​ |\n| description​ | String​ | 智能体的描述信息。​ |\n| version​ | String​ | 智能体的版本号。​ |\n\n| 字段​ | 类型​ | 说明​ |\n| audit​ | Array of JSON​ | 审核结果。​ |\n| audit.audit_status​ | Integer​ | 审核状态。​1：审核中​2：审核通过​3：审核失败​ |\n| audit.reason​ | String​ | 审核失败时，此字段返回审核失败原因。​ |\n\n- 1：审核中 ​\n\n- 2：审核通过 ​\n\n- 3：审核失败 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/agent_delete_callback_messages",
      "title": "智能体删除回调事件",
      "content": {
        "sections": [],
        "full_text": "智能体删除回调事件\n\n当开发者订阅了智能体删除回调事件后，开发者删除低代码智能体时，扣子编程会向指定的回调地址推送回调消息，消息中包含智能体的基本信息。订阅回调的具体操作请参见\n\n​\n\n订阅回调\n\n。\n\n​\n\n触发条件\n\n​\n\n智能体删除回调事件的触发条件如下：\n\n​\n\n​\n\n回调类型\n\n​\n\n个人版\n\n​\n\n企业版（企业标准版、企业旗舰版）\n\n​\n\n普通回调\n\n​\n\n仅\n\n空间所有者\n\n可订阅，当工作空间中任意低代码智能体被删除时，对应的回调地址会收到智能体删除回调事件。\n\n​\n\n仅\n\n超级管理员和管理员\n\n可订阅，当企业内任意低代码智能体被删除时，对应的回调地址会收到智能体删除回调事件。\n\n​\n\n渠道回调\n\n​\n\n仅\n\n自定义渠道创建者\n\n可订阅，当该渠道中的低代码智能体被删除时，对应的回调地址会收到智能体删除回调事件。\n\n​\n\n仅\n\n超级管理员和管理员\n\n可订阅，当自定义渠道中的低代码智能体被删除时，对应的回调地址会收到智能体删除回调事件。\n\n​\n\n​\n\n回调结构体\n\n​\n\n回调消息的结构体 Body 中包含两个主要字段：\n\nheader\n\n和\n\nevent\n\n。\n\n​\n\nheader\n\n参数的参数说明请参见\n\n​\n\n回调事件\n\n。\n\n​\n\nevent\n\n参数中包括以下参数：\n\n​\n\n​\n\n字段\n\n​\n\n类型\n\n​\n\n说明\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n智能体 ID。\n\n​\n\nspace_id\n\n​\n\nString\n\n​\n\n智能体所属的空间 ID。\n\n​\n\n订阅普通回调时会返回该参数，订阅渠道回调时不返回该参数。\n\n​\n\nbot_name\n\n​\n\nString\n\n​\n\n智能体名称。\n\n​\n\ndescription\n\n​\n\nString\n\n​\n\n智能体的描述信息。\n\n​\n\n​\n\n回调结构体示例：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"header\"\n\n:\n\n{\n\n​\n\n\"event_type\"\n\n:\n\n\"bot.deleted\"\n\n,\n\n//智能体删除回调事件\n\n​\n\n\"event_id\"\n\n:\n\n\"76464a1a-eda7-48e9-b207-2db50392e60a-7509745929591717899\"\n\n,\n\n// 此次触发的唯一 id，用户应该用这个 id 做去重\n\n​\n\n\"created_at\"\n\n:\n\n1749038258245\n\n,\n\n​\n\n\"coze_account_id\"\n\n:\n\n\"4189602994****\"\n\n,\n\n// 被删除的智能体所属的空间的 owner id\n\n​\n\n\"api_app_id\"\n\n:\n\n\"75097459295917****\"\n\n,\n\n// 回调应用的 id\n\n​\n\n\"connector_id\"\n\n:\n\n\"12345\"\n\n// 如果为渠道回调，这个字段会填充渠道 id\n\n​\n\n},\n\n​\n\n\"event\"\n\n:\n\n{\n\n​\n\n\"bot_id\"\n\n:\n\n\"7512041635401****\"\n\n,\n\n// 智能体 id\n\n​\n\n\"space_id\"\n\n:\n\n\"7309693825197****\"\n\n,\n\n// 智能体所属的 space_id, 仅普通回调有这个字段，渠道回调没有\n\n​\n\n\"bot_name\"\n\n:\n\n\"智能体名称\"\n\n,\n\n​\n\n\"description\"\n\n:\n\n\"智能体简介\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n响应回调\n\n​\n\n开发者服务器收到智能体删除回调后，应在 3 秒内响应，并返回 HTTP 状态码 200。\n\n​\n\n相关文档\n\n​\n\n​\n\n订阅回调\n\n​\n\n​\n\n接收并处理回调\n\n​\n\n上一篇\n\n智能体发布回调事件\n\n下一篇\n\n智能体下架回调事件",
        "links": []
      },
      "markdown": "| 回调类型​ | 个人版​ | 企业版（企业标准版、企业旗舰版）​ |\n| 普通回调​ | 仅空间所有者可订阅，当工作空间中任意低代码智能体被删除时，对应的回调地址会收到智能体删除回调事件。​ | 仅超级管理员和管理员可订阅，当企业内任意低代码智能体被删除时，对应的回调地址会收到智能体删除回调事件。​ |\n| 渠道回调​ | 仅自定义渠道创建者可订阅，当该渠道中的低代码智能体被删除时，对应的回调地址会收到智能体删除回调事件。​ | 仅超级管理员和管理员可订阅，当自定义渠道中的低代码智能体被删除时，对应的回调地址会收到智能体删除回调事件。​ |\n\n- header 参数的参数说明请参见 ​ 回调事件 。 ​\n\n- event 参数中包括以下参数： ​\n\n- ​ 字段 ​ 类型 ​ 说明 ​ bot_id ​ String ​ 智能体 ID。 ​ space_id ​ String ​ 智能体所属的空间 ID。 ​ 订阅普通回调时会返回该参数，订阅渠道回调时不返回该参数。 ​ bot_name ​ String ​ 智能体名称。 ​ description ​ String ​ 智能体的描述信息。 ​ ​\n\n| 字段​ | 类型​ | 说明​ |\n| bot_id​ | String​ | 智能体 ID。​ |\n| space_id​ | String​ | 智能体所属的空间 ID。​订阅普通回调时会返回该参数，订阅渠道回调时不返回该参数。​ |\n| bot_name​ | String​ | 智能体名称。​ |\n| description​ | String​ | 智能体的描述信息。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/agent_unpublished_callback_messages",
      "title": "智能体下架回调事件",
      "content": {
        "sections": [],
        "full_text": "智能体下架回调事件\n\n当开发者订阅了智能体下架回调事件后，开发者下架低代码智能体时，扣子编程会向指定的回调地址推送回调消息，消息中包含智能体的基本信息。订阅回调的具体操作请参见\n\n​\n\n订阅回调\n\n。\n\n​\n\n触发条件\n\n​\n\n智能体下架回调事件的触发条件如下：\n\n​\n\n​\n\n回调类型\n\n​\n\n个人版\n\n​\n\n企业版（企业标准版、企业旗舰版）\n\n​\n\n普通回调\n\n​\n\n仅\n\n空间所有者\n\n可订阅，当工作空间中任意低代码智能体被下架时，对应的回调地址会收到智能体下架回调事件。\n\n​\n\n仅\n\n超级管理员和管理员\n\n可订阅，当企业内任意低代码智能体被下架时，对应的回调地址会收到智能体下架回调事件。\n\n​\n\n渠道回调\n\n​\n\n仅\n\n自定义渠道\n\n创建者\n\n可订阅，当该渠道中的低代码智能体被下架时，对应的回调地址会收到智能体下架回调事件。\n\n​\n\n仅\n\n超级管理员和管理员\n\n可订阅，当\n\n自定义渠道中的低代码智能体被下架时，对应的回调地址会收到智能体下架回调事件。\n\n​\n\n​\n\n回调结构体\n\n​\n\n回调消息的结构体 Body 中包含两个主要字段：\n\nheader\n\n和\n\nevent\n\n。\n\n​\n\nheader\n\n参数的参数说明请参见\n\n​\n\n回调事件\n\n。\n\n​\n\nevent\n\n参数中包括以下参数：\n\n​\n\n​\n\n字段\n\n​\n\n类型\n\n​\n\n说明\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n智能体 ID。\n\n​\n\nspace_id\n\n​\n\nString\n\n​\n\n智能体所属的空间 ID。\n\n​\n\n订阅普通回调时会返回该参数，订阅渠道回调时不返回该参数。\n\n​\n\nconnector_id\n\n​\n\nString\n\n​\n\n智能体下架的渠道 ID。扣子编程官方渠道对应的渠道 ID 如下：\n\n​\n\n1024：API 渠道。\n\n​\n\n999：Chat SDK。\n\n​\n\n10000122：扣子商店。\n\n​\n\n10000113：微信客服。\n\n​\n\n10000120：微信服务号。\n\n​\n\n10000121：微信订阅号。\n\n​\n\n10000126：抖音小程序。\n\n​\n\n10000127：微信小程序。\n\n​\n\n10000011：飞书。\n\n​\n\n10000128：飞书多维表格。\n\n​\n\n10000117：掘金。\n\n​\n\nbot_name\n\n​\n\nString\n\n​\n\n智能体名称。\n\n​\n\ndescription\n\n​\n\nString\n\n​\n\n智能体的描述信息。\n\n​\n\n​\n\n回调结构体示例：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"header\"\n\n:\n\n{\n\n​\n\n\"event_type\"\n\n:\n\n\"bot.unpublished\"\n\n,\n\n//智能体下架回调事件\n\n​\n\n\"event_id\"\n\n:\n\n\"76464a1a-eda7-48e9-b207-2db50392e60a-7509745929591717899\"\n\n,\n\n// 此次触发的唯一 id，用户应该用这个 id 做去重\n\n​\n\n\"created_at\"\n\n:\n\n1749038258245\n\n,\n\n​\n\n\"coze_account_id\"\n\n:\n\n\"4189602994****\"\n\n,\n\n// 被下架的智能体所属的空间的 owner id\n\n​\n\n\"api_app_id\"\n\n:\n\n\"75097459295917****\"\n\n,\n\n// 回调应用的 id\n\n​\n\n\"connector_id\"\n\n:\n\n\"74239893676742***\"\n\n// 如果为渠道回调，这个字段会填充自定义渠道 id\n\n​\n\n},\n\n​\n\n\"event\"\n\n:\n\n{\n\n​\n\n\"bot_id\"\n\n:\n\n\"7512041635401****\"\n\n,\n\n// 智能体 id\n\n​\n\n\"space_id\"\n\n:\n\n\"7309693825197****\"\n\n,\n\n// 智能体所属的 space_id, 仅普通回调有这个字段，渠道回调没有\n\n​\n\n\"connector_id\"\n\n:\n\n\"10000122\"\n\n,\n\n//渠道 ID\n\n​\n\n\"bot_name\"\n\n:\n\n\"智能体名称\"\n\n,\n\n​\n\n\"description\"\n\n:\n\n\"智能体简介\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n响应回调\n\n​\n\n开发者服务器收到智能体下架回调后，应在 3 秒内响应，并返回 HTTP 状态码 200。\n\n​\n\n相关文档\n\n​\n\n​\n\n订阅回调\n\n​\n\n​\n\n接收并处理回调\n\n​\n\n上一篇\n\n智能体删除回调事件\n\n下一篇\n\n创建工作空间",
        "links": []
      },
      "markdown": "| 回调类型​ | 个人版​ | 企业版（企业标准版、企业旗舰版）​ |\n| 普通回调​ | 仅空间所有者可订阅，当工作空间中任意低代码智能体被下架时，对应的回调地址会收到智能体下架回调事件。​ | 仅超级管理员和管理员可订阅，当企业内任意低代码智能体被下架时，对应的回调地址会收到智能体下架回调事件。​ |\n| 渠道回调​ | 仅自定义渠道创建者可订阅，当该渠道中的低代码智能体被下架时，对应的回调地址会收到智能体下架回调事件。​ | 仅超级管理员和管理员可订阅，当自定义渠道中的低代码智能体被下架时，对应的回调地址会收到智能体下架回调事件。​ |\n\n- header 参数的参数说明请参见 ​ 回调事件 。 ​\n\n- event 参数中包括以下参数： ​\n\n- ​ 字段 ​ 类型 ​ 说明 ​ bot_id ​ String ​ 智能体 ID。 ​ space_id ​ String ​ 智能体所属的空间 ID。 ​ 订阅普通回调时会返回该参数，订阅渠道回调时不返回该参数。 ​ connector_id ​ String ​ 智能体下架的渠道 ID。扣子编程官方渠道对应的渠道 ID 如下： ​ 1024：API 渠道。 ​ 999：Chat SDK。 ​ 10000122：扣子商店。 ​ 10000113：微信客服。 ​ 10000120：微信服务号。 ​ 10000121：微信订阅号。 ​ 10000126：抖音小程序。 ​ 10000127：微信小程序。 ​ 10000011：飞书。 ​ 10000128：飞书多维表格。 ​ 10000117：掘金。 ​ bot_name ​ String ​ 智能体名称。 ​ description ​ String ​ 智能体的描述信息。 ​ ​\n\n| 字段​ | 类型​ | 说明​ |\n| bot_id​ | String​ | 智能体 ID。​ |\n| space_id​ | String​ | 智能体所属的空间 ID。​订阅普通回调时会返回该参数，订阅渠道回调时不返回该参数。​ |\n| connector_id​ | String​ | 智能体下架的渠道 ID。扣子编程官方渠道对应的渠道 ID 如下：​1024：API 渠道。​999：Chat SDK。​10000122：扣子商店。​10000113：微信客服。​10000120：微信服务号。​10000121：微信订阅号。​10000126：抖音小程序。​10000127：微信小程序。​10000011：飞书。​10000128：飞书多维表格。​10000117：掘金。​ |\n| bot_name​ | String​ | 智能体名称。​ |\n| description​ | String​ | 智能体的描述信息。​ |\n\n- 1024：API 渠道。 ​\n\n- 999：Chat SDK。 ​\n\n- 10000122：扣子商店。 ​\n\n- 10000113：微信客服。 ​\n\n- 10000120：微信服务号。 ​\n\n- 10000121：微信订阅号。 ​\n\n- 10000126：抖音小程序。 ​\n\n- 10000127：微信小程序。 ​\n\n- 10000011：飞书。 ​\n\n- 10000128：飞书多维表格。 ​\n\n- 10000117：掘金。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/create_workspace",
      "title": "创建工作空间",
      "content": {
        "sections": [],
        "full_text": "创建工作空间\n\n创建工作空间。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/workspaces\n\n​\n\n​\n\n权限\n\n​\n\ncreateWorkspace\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\ncreateWorkspace\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n创建工作空间。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nname\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n文档组的工作空间\n\n​\n\n自定义的空间名称，最大长度为 50 个字符。\n\n​\n\ndescription\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n文档组内部使用的工作空间。\n\n​\n\n空间的描述信息，用于详细说明空间的用途或特点，最大长度为 2000 个字符。\n\n​\n\nicon_file_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n73694959811****\n\n​\n\n作为空间图标的文件 ID。\n\n​\n\n未指定文件 ID 时，使用扣子编程默认的工作空间图标。\n\n​\n\n如需使用自定义图标，应先通过\n\n上传文件\n\nAPI 上传本地文件，从接口响应中获取文件 ID。文件 ID 作为空间图标时，有效期为永久有效。\n\n​\n\ncoze_account_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n749088814445***\n\n​\n\n组织 ID，用于标识工作空间所属的组织。\n\n​\n\n扣子个人版中，无需设置此参数。\n\n​\n\n说明\n\n默认在个人账号下创建工作空间，如果需要在企业的组织下创建工作空间，你需要传入组织 ID。\n\n​\n\n你可以在\n\n组织设置\n\n页面查看对应的组织 ID。\n\n​\n\n​\n\nowner_uid\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nuser_1234567890\n\n​\n\n指定空间所有者的扣子用户的 UID。\n\n​\n\n说明\n\n扣子个人版中，无需设置此参数，默认当前用户为空间所有者。\n\n​\n\n扣子企业版（企业标准版、企业旗舰版）中，可以指定\n\ncoze_account_id\n\n对应组织中的员工为空间所有者，未指定时默认 Token 的创建者为空间所有者。\n\n​\n\n​\n\n你可以单击扣子编程左下角的头像，选择\n\n账号设置\n\n，在页面底部查看扣子用户的 UID。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nObject of\n\nOpenCreateSpaceRet\n\n​\n\n{\"id\":\"753232939603****\"}\n\n​\n\n工作空间的相关信息。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\n​\n\nOpenCreateSpaceRet\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n753232939603****\n\n​\n\n创建的工作空间的 ID。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/workspaces' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_O******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"name\"\n\n:\n\n\"文档组的工作空间\"\n\n,\n\n​\n\n\"description\"\n\n:\n\n\"文档组内部使用的工作空间。\"\n\n,\n\n​\n\n\"icon_file_id\"\n\n:\n\n\"73694959811****\"\n\n,\n\n​\n\n\"coze_account_id\"\n\n:\n\n\"749088814445***\"\n\n,\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"753232939603****\"\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n智能体下架回调事件\n\n下一篇\n\n查看空间列表",
        "links": []
      },
      "markdown": "| 请求方式​ | POST​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/workspaces​​ |\n| 权限​ | createWorkspace​确保调用该接口使用的访问令牌开通了createWorkspace权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 创建工作空间。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| name​ | String​ | 必选​ | 文档组的工作空间​ | 自定义的空间名称，最大长度为 50 个字符。​ |\n| description​ | String​ | 必选​ | 文档组内部使用的工作空间。​ | 空间的描述信息，用于详细说明空间的用途或特点，最大长度为 2000 个字符。​ |\n| icon_file_id​ | String​ | 可选​ | 73694959811****​ | 作为空间图标的文件 ID。​未指定文件 ID 时，使用扣子编程默认的工作空间图标。​如需使用自定义图标，应先通过上传文件API 上传本地文件，从接口响应中获取文件 ID。文件 ID 作为空间图标时，有效期为永久有效。​ |\n| coze_account_id​ | String​ | 可选​ | 749088814445***​ | 组织 ID，用于标识工作空间所属的组织。​扣子个人版中，无需设置此参数。​说明默认在个人账号下创建工作空间，如果需要在企业的组织下创建工作空间，你需要传入组织 ID。​你可以在组织设置页面查看对应的组织 ID。​​ |\n| owner_uid​ | String​ | 可选​ | user_1234567890​ | 指定空间所有者的扣子用户的 UID。​说明扣子个人版中，无需设置此参数，默认当前用户为空间所有者。​扣子企业版（企业标准版、企业旗舰版）中，可以指定coze_account_id对应组织中的员工为空间所有者，未指定时默认 Token 的创建者为空间所有者。​​你可以单击扣子编程左下角的头像，选择账号设置，在页面底部查看扣子用户的 UID。​​​​​​ |\n\n- 未指定文件 ID 时，使用扣子编程默认的工作空间图标。 ​\n\n- 如需使用自定义图标，应先通过 上传文件 API 上传本地文件，从接口响应中获取文件 ID。文件 ID 作为空间图标时，有效期为永久有效。 ​\n\n- 扣子个人版中，无需设置此参数，默认当前用户为空间所有者。 ​\n\n- 扣子企业版（企业标准版、企业旗舰版）中，可以指定 coze_account_id 对应组织中的员工为空间所有者，未指定时默认 Token 的创建者为空间所有者。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | Object ofOpenCreateSpaceRet​ | {\"id\":\"753232939603****\"}​ | 工作空间的相关信息。​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 753232939603****​ | 创建的工作空间的 ID。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/list_workspace",
      "title": "查看空间列表",
      "content": {
        "sections": [],
        "full_text": "查看空间列表\n\n查看当前扣子用户或指定扣子用户创建或加入的空间列表。\n\n​\n\n接口描述\n\n​\n\n你可以查看当前账号创建和加入的工作空间，包括个人账号的工作空间和企业账号的工作空间。\n\n​\n\n在扣子企业版中，你可以在\n\nQuery\n\n中指定\n\nenterprise_id\n\n，查看该企业当前账号创建或加入的所有工作空间。\n\n​\n\n你可以在\n\nQuery\n\n中同时指定\n\nuser_id\n\n和\n\ncoze_account_id\n\n，查看指定用户在指定组织下加入的工作空间。这里的组织可以是企业中的某个组织，也可以是个人版账号。\n\n​\n\n不同场景的 Query 参数配置说明如下：\n\n​\n\n​\n\n场景\n\n​\n\nQuery 参数\n\n​\n\n​\n\n​\n\n​\n\nenterprise_id\n\n​\n\nuser_id\n\n​\n\ncoze_account_id\n\n​\n\n查看当前账号的所有工作空间（含个人空间）\n\n​\n\n不传\n\n​\n\n不传\n\n​\n\n不传\n\n​\n\n查看当前账号在指定企业中的工作空间（不含个人空间）\n\n​\n\n必选\n\n​\n\n不传\n\n​\n\n不传\n\n​\n\n查看指定用户在指定组织的工作空间（不含个人空间）\n\n​\n\n不传\n\n​\n\n必选\n\n​\n\n必选\n\n​\n\n​\n\n注意\n\n暂不支持\n\n第三方渠道应用\n\n调用此 API。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/workspaces\n\n​\n\n权限\n\n​\n\nlistWorkspace\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nlistWorkspace\n\n权限，详细信息参考\n\n鉴权\n\n。\n\n​\n\n接口说明\n\n​\n\n查看当前扣子用户或指定扣子用户创建或加入的空间列表。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\npage_num\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n1\n\n​\n\n分页查询时的页码。默认为 1，即返回第一页数据。\n\n​\n\npage_size\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n30\n\n​\n\n分页大小，即每页返回多少个工作空间。默认为 20，最大为 50。\n\n​\n\nenterprise_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nvolcano_2105850***\n\n​\n\n企业 ID，你可以在\n\n组织管理\n\n>\n\n组织设置\n\n页面查看企业 ID。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n如果指定\n\nenterprise_id\n\n，则查询对应\n\nEnterpriseId\n\n中，当前账号创建或加入的所有工作空间。\n\n​\n\n如果不指定\n\nenterprise_id\n\n，则查询当前账号创建和加入的所有工作空间，包括个人账号的工作空间和企业/团队账号的工作空间。\n\n​\n\n说明\n\n仅扣子企业版套餐中的用户支持该参数。个人免费版和个人进阶版不支持该参数。\n\n​\n\n​\n\nuser_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n38509118307***\n\n​\n\n扣子用户 ID，用于查询特定用户的工作空间信息。\n\n​\n\n你可以单击扣子编程左下角的头像，选择\n\n账号设置\n\n，在页面底部查看扣子用户的 UID。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n说明\n\n如果同时指定\n\nuser_id\n\n和\n\ncoze_account_id\n\n，则查询该用户在该组织下加入的工作空间。暂时不支持仅指定\n\nuser_id\n\n或仅指定\n\ncoze_account_id\n\n。\n\n​\n\n​\n\ncoze_account_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n38509118307***\n\n​\n\n扣子编程的组织 ID，用于查询特定组织的工作空间信息。\n\n​\n\n扣子个人版中，\n\ncoze_account_id\n\n即为\n\nuser_id\n\n。\n\n​\n\n扣子企业版中，\n\ncoze_account_id\n\n为组织 ID。你可以在\n\n组织管理\n\n>\n\n组织设置\n\n页面查看对应的组织 ID，或通过\n\n查询组织列表\n\nAPI 查询组织 ID。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n说明\n\n如果同时指定\n\nuser_id\n\n和\n\ncoze_account_id\n\n，则查询该用户在该组织下加入的工作空间。暂时不支持仅指定\n\nuser_id\n\n或仅指定\n\ncoze_account_id\n\n。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n调用状态码。\n\n​\n\n0 表示调用成功。\n\n​\n\n其他值表示调用失败。你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndata\n\n​\n\nObject of\n\nOpenSpaceData\n\n​\n\n\\\n\n​\n\n接口响应的业务信息。\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"1234567890abcdef\"}\n\n包含请求的详细日志信息，用于问题排查和调试。\n\n​\n\nOpenSpaceData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nworkspaces\n\n​\n\nArray of\n\nOpenSpace\n\n​\n\n\\\n\n​\n\n用户创建或加入的空间列表。\n\n​\n\ntotal_count\n\n​\n\nLong\n\n​\n\n2\n\n​\n\n用户加入的空间总数。\n\n​\n\n​\n\nOpenSpace\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n74876004423701****\n\n​\n\n空间 ID。\n\n​\n\nname\n\n​\n\nString\n\n​\n\ntest\n\n​\n\n空间名称。\n\n​\n\nicon_url\n\n​\n\nString\n\n​\n\nhttps://***/obj/ocean-cloud-tos/FileBizType.BIZ_BOT_SPACE/team.png\n\n​\n\n空间图标的 url 地址。\n\n​\n\nowner_uid\n\n​\n\nString\n\n​\n\n24787743932***\n\n​\n\n空间所有者的扣子用户 UID。\n\n​\n\nrole_type\n\n​\n\nString\n\n​\n\nmember\n\n​\n\n用户在空间中的角色。枚举值包括：\n\n​\n\nowner：所有者\n\n​\n\nadmin：管理员\n\n​\n\nmember：成员\n\n​\n\nadmin_uids\n\n​\n\nArray of String\n\n​\n\n[\"24787743932***\",\"24787743932***\"]\n\n​\n\n空间管理员的用户 UID 列表，用于标识当前空间的所有管理员。\n\n​\n\ndescription\n\n​\n\nString\n\n​\n\n这是一个用于测试的空间。\n\n​\n\n空间的描述信息。\n\n​\n\nenterprise_id\n\n​\n\nString\n\n​\n\nvolcano_2105850***\n\n​\n\n企业 ID。\n\n​\n\n说明\n\n个人账号下的工作空间，返回的企业 ID 为空。\n\n​\n\n​\n\njoined_status\n\n​\n\nString\n\n​\n\njoined\n\n​\n\n用户在空间中的加入状态。枚举值：\n\n​\n\njoined\n\n：已加入\n\n​\n\nworkspace_type\n\n​\n\nString\n\n​\n\nteam\n\n​\n\n空间类型。枚举值包括：\n\n​\n\npersonal\n\n：个人空间\n\n​\n\nteam\n\n：工作空间\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n查询当前账号加入的所有空间\n\n查询指定用户在指定组织下加入的空间\n\n查看当前账号在指定企业中的工作空间\n\n​\n\nJSON\n\n复制\n\nGET 'https\n\n:\n\n//api.coze.cn/v1/workspaces?&page_num=1&page_size=20' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"workspaces\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"74876004423701****\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"test\"\n\n,\n\n​\n\n\"icon_url\"\n\n:\n\n\"https://***/obj/ocean-cloud-tos/FileBizType.BIZ_BOT_SPACE/team.png\"\n\n,\n\n​\n\n\"role_type\"\n\n:\n\n\"member\"\n\n,\n\n​\n\n\"enterprise_id\"\n\n:\n\n\"volcano_2105850***\"\n\n,\n\n​\n\n\"workspace_type\"\n\n:\n\n\"team\"\n\n​\n\n}\n\n​\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"74879061161065***\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"个人空间\"\n\n,\n\n​\n\n\"icon_url\"\n\n:\n\n\"https://***/obj/ocean-cloud-tos/FileBizType.BIZ_BOT_SPACE/team.png\"\n\n,\n\n​\n\n\"role_type\"\n\n:\n\n\"owner\"\n\n,\n\n​\n\n\"enterprise_id\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"workspace_type\"\n\n:\n\n\"personal\"\n\n​\n\n}\n\n​\n\n],\n\n​\n\n\"total_count\"\n\n:\n\n2\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"1234567890abcdef****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n创建工作空间\n\n下一篇\n\n修改工作空间基本信息",
        "links": []
      },
      "markdown": "- 你可以查看当前账号创建和加入的工作空间，包括个人账号的工作空间和企业账号的工作空间。 ​\n\n- 在扣子企业版中，你可以在 Query 中指定 enterprise_id ，查看该企业当前账号创建或加入的所有工作空间。 ​\n\n- 你可以在 Query 中同时指定 user_id 和 coze_account_id ，查看指定用户在指定组织下加入的工作空间。这里的组织可以是企业中的某个组织，也可以是个人版账号。 ​\n\n| 场景​ | Query 参数​ | ​ | ​ |\n| ​ | enterprise_id​ | user_id​ | coze_account_id​ |\n| 查看当前账号的所有工作空间（含个人空间）​ | 不传​ | 不传​ | 不传​ |\n| 查看当前账号在指定企业中的工作空间（不含个人空间）​ | 必选​ | 不传​ | 不传​ |\n| 查看指定用户在指定组织的工作空间（不含个人空间）​ | 不传​ | 必选​ | 必选​ |\n\n| 请求方式​ | GET |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/workspaces​ |\n| 权限​ | listWorkspace​确保调用该接口使用的访问令牌开通了listWorkspace权限，详细信息参考鉴权。​ |\n| 接口说明​ | 查看当前扣子用户或指定扣子用户创建或加入的空间列表。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| page_num​ | Integer​ | 可选​ | 1​ | 分页查询时的页码。默认为 1，即返回第一页数据。​ |\n| page_size​ | Integer​ | 可选​ | 30​ | 分页大小，即每页返回多少个工作空间。默认为 20，最大为 50。​ |\n| enterprise_id​ | String​ | 可选​ | volcano_2105850***​ | 企业 ID，你可以在组织管理>组织设置页面查看企业 ID。​​​​​​如果指定enterprise_id，则查询对应EnterpriseId中，当前账号创建或加入的所有工作空间。​如果不指定enterprise_id，则查询当前账号创建和加入的所有工作空间，包括个人账号的工作空间和企业/团队账号的工作空间。​说明仅扣子企业版套餐中的用户支持该参数。个人免费版和个人进阶版不支持该参数。​​ |\n| user_id​ | String​ | 可选​ | 38509118307***​ | 扣子用户 ID，用于查询特定用户的工作空间信息。​你可以单击扣子编程左下角的头像，选择账号设置，在页面底部查看扣子用户的 UID。​​​​​​说明如果同时指定user_id和coze_account_id，则查询该用户在该组织下加入的工作空间。暂时不支持仅指定user_id或仅指定coze_account_id。​​ |\n| coze_account_id​ | String​ | 可选​ | 38509118307***​ | 扣子编程的组织 ID，用于查询特定组织的工作空间信息。​扣子个人版中，coze_account_id即为user_id。​扣子企业版中，coze_account_id为组织 ID。你可以在组织管理>组织设置页面查看对应的组织 ID，或通过查询组织列表API 查询组织 ID。​​​​​​说明如果同时指定user_id和coze_account_id，则查询该用户在该组织下加入的工作空间。暂时不支持仅指定user_id或仅指定coze_account_id。​​ |\n\n- 如果指定 enterprise_id ，则查询对应 EnterpriseId 中，当前账号创建或加入的所有工作空间。 ​\n\n- 如果不指定 enterprise_id ，则查询当前账号创建和加入的所有工作空间，包括个人账号的工作空间和企业/团队账号的工作空间。 ​\n\n- 扣子个人版中， coze_account_id 即为 user_id 。 ​\n\n- 扣子企业版中， coze_account_id 为组织 ID。你可以在 组织管理 > 组织设置 页面查看对应的组织 ID，或通过 查询组织列表 API 查询组织 ID。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0 | 调用状态码。​0 表示调用成功。​其他值表示调用失败。你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| data​ | Object ofOpenSpaceData​ | \\​ | 接口响应的业务信息。 |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"1234567890abcdef\"} | 包含请求的详细日志信息，用于问题排查和调试。 |\n\n- 0 表示调用成功。 ​\n\n- 其他值表示调用失败。你可以通过 msg 字段判断详细的错误原因。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| workspaces​ | Array ofOpenSpace​ | \\​ | 用户创建或加入的空间列表。​ |\n| total_count​ | Long​ | 2​ | 用户加入的空间总数。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 74876004423701****​ | 空间 ID。​ |\n| name​ | String​ | test​ | 空间名称。​ |\n| icon_url​ | String​ | https://***/obj/ocean-cloud-tos/FileBizType.BIZ_BOT_SPACE/team.png​ | 空间图标的 url 地址。​ |\n| owner_uid​ | String​ | 24787743932***​ | 空间所有者的扣子用户 UID。​ |\n| role_type​ | String​ | member​ | 用户在空间中的角色。枚举值包括：​owner：所有者​admin：管理员​member：成员​ |\n| admin_uids​ | Array of String​ | [\"24787743932***\",\"24787743932***\"]​ | 空间管理员的用户 UID 列表，用于标识当前空间的所有管理员。​ |\n| description​ | String​ | 这是一个用于测试的空间。​ | 空间的描述信息。​ |\n| enterprise_id​ | String​ | volcano_2105850***​ | 企业 ID。​说明个人账号下的工作空间，返回的企业 ID 为空。​​ |\n| joined_status​ | String​ | joined​ | 用户在空间中的加入状态。枚举值：​joined：已加入​ |\n| workspace_type​ | String​ | team​ | 空间类型。枚举值包括：​personal：个人空间​team：工作空间​ |\n\n- owner：所有者 ​\n\n- admin：管理员 ​\n\n- member：成员 ​\n\n- joined ：已加入 ​\n\n- personal ：个人空间 ​\n\n- team ：工作空间 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/update_workspace_info",
      "title": "修改工作空间基本信息",
      "content": {
        "sections": [],
        "full_text": "修改工作空间基本信息\n\n修改指定工作空间的基本信息，包括空间名称和描述。\n\n​\n\n接口限制\n\n​\n\n个人空间\n\n不支持修改空间基本信息。\n\n​\n\n工作空间的名称和描述需要符合内容安全规范，不得包含涉政、涉黄等违规内容，否则扣子编程会提示 4014 错误。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPUT\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/workspaces/:workspace_id\n\n​\n\n​\n\n权限\n\n​\n\nWorkspace.update\n\n​\n\n确保调用该 API 使用的访问令牌开通了\n\nWorkspace.update\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n修改工作空间基本信息。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nworkspace_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n736163827687053****\n\n​\n\n需要修改工作空间信息的工作空间 ID。\n\n​\n\n进入指定空间，空间页面 URL 中\n\nw\n\n参数后的数字就是 工作空间 ID。例如\n\nhttps://code.coze.cn/w/75814654762959***/projects\n\n，workspace_id 为\n\n75814654762959***\n\n。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nname\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n文档组的工作空间\n\n​\n\n修改后的工作空间的名称。默认为空，表示不修改。\n\n​\n\n最大长度为 50 个字符。\n\n​\n\ndescription\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n文档组内部使用的工作空间。\n\n​\n\n修改后的工作空间的描述。默认为空，表示不修改。\n\n​\n\n最大长度为 2000 个字符。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的日志信息，用于问题排查和技术支持。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request PUT 'https\n\n:\n\n//api.coze.cn/v1/workspaces/736163827687053****' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_O******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"name\"\n\n:\n\n\"文档组的工作空间\"\n\n,\n\n​\n\n\"description\"\n\n:\n\n\"文档组内部使用的工作空间。\"\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n查看空间列表\n\n下一篇\n\n查看空间成员列表",
        "links": []
      },
      "markdown": "- 个人空间 不支持修改空间基本信息。 ​\n\n- 工作空间的名称和描述需要符合内容安全规范，不得包含涉政、涉黄等违规内容，否则扣子编程会提示 4014 错误。 ​\n\n| 请求方式​ | PUT​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/workspaces/:workspace_id​​ |\n| 权限​ | Workspace.update​确保调用该 API 使用的访问令牌开通了Workspace.update权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 修改工作空间基本信息。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| workspace_id​ | String​ | 必选​ | 736163827687053****​ | 需要修改工作空间信息的工作空间 ID。​进入指定空间，空间页面 URL 中w参数后的数字就是 工作空间 ID。例如https://code.coze.cn/w/75814654762959***/projects，workspace_id 为75814654762959***。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| name​ | String​ | 可选​ | 文档组的工作空间​ | 修改后的工作空间的名称。默认为空，表示不修改。​最大长度为 50 个字符。​ |\n| description​ | String​ | 可选​ | 文档组内部使用的工作空间。​ | 修改后的工作空间的描述。默认为空，表示不修改。​最大长度为 2000 个字符。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的日志信息，用于问题排查和技术支持。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/list_space_member",
      "title": "查看空间成员列表",
      "content": {
        "sections": [],
        "full_text": "查看空间成员列表\n\n查看指定空间的成员列表。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/workspaces/:workspace_id/members\n\n​\n\n权限\n\n​\n\nreadMember\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nreadMember\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n查看指定空间的成员列表。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $AccessToken\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nworkspace_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n736163827687053****\n\n​\n\n需要查看成员列表的空间 ID。\n\n​\n\n进入指定空间，空间页面 URL 中\n\nw\n\n参数后的数字就是 工作空间 ID。例如\n\nhttps://code.coze.cn/w/75814654762959***/projects\n\n，workspace_id 为\n\n75814654762959***\n\n。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\npage_num\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n1\n\n​\n\n查询结果分页展示时，此参数用于设置查看的页码。最小值为 1，默认为 1。\n\n​\n\npage_size\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n10\n\n​\n\n查询结果分页展示时，此参数用于设置每页返回的数据量。取值范围为 1~50，默认为 20。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nObject of\n\nOpenSpaceMemberListData\n\n​\n\n\\\n\n​\n\n返回的数据对象，包含空间成员列表和总数。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{logid\": \"202410242028595CCF353CEC86A8*****\" }\n\n​\n\n本次请求返回的详细信息。\n\n​\n\n​\n\nOpenSpaceMemberListData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nitems\n\n​\n\nArray of\n\nOpenSpaceMember\n\n​\n\n[ { \"role_type\": \"owner\", \"user_id\": \"2135714797***\", \"user_nickname\": \"RootUser_210202***\", \"user_unique_name\": \"kou_testing_001\", \"avatar_url\": \"\n\nexample.com/cloudidentity.9f6***.jpg\n\n\" }, { \"avatar_url\": \"\n\nhttps://example.com/cloudidentity.9f6***.jpg\n\n\", \"role_type\": \"member\", \"user_id\": \"402688082103***\", \"user_nickname\": \"test_user_01\", \"user_unique_name\": \"user170383***6\" }]\n\n​\n\n返回的成员列表。\n\n​\n\ntotal_count\n\n​\n\nLong\n\n​\n\n5\n\n​\n\n空间中的成员总数。\n\n​\n\n​\n\nOpenSpaceMember\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nuser_id\n\n​\n\nString\n\n​\n\n2069720456*****\n\n​\n\n用户的扣子用户 ID。\n\n​\n\nrole_type\n\n​\n\nString\n\n​\n\nmember\n\n​\n\n该用户在空间中的角色：\n\n​\n\nadmin：空间管理员。\n\n​\n\nmember：空间成员。\n\n​\n\nowner：空间所有者。\n\n​\n\nuser_nickname\n\n​\n\nString\n\n​\n\n小王\n\n​\n\n用户的昵称。\n\n​\n\nuser_unique_name\n\n​\n\nString\n\n​\n\n小王\n\n​\n\n用户的名称。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\nGET 'https\n\n:\n\n//api.coze.cn/v1/workspaces/7515267805****/members' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_FFTwAe4KB9GpaXCGoCjKbztWig4MT1SRB6yjP4n0PJ1AE3ukqw5yGj****'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"total_count\"\n\n:\n\n4\n\n,\n\n​\n\n\"items\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"role_type\"\n\n:\n\n\"owner\"\n\n,\n\n​\n\n\"user_id\"\n\n:\n\n\"2135714797***\"\n\n,\n\n​\n\n\"user_nickname\"\n\n:\n\n\"RootUser_210202***\"\n\n,\n\n​\n\n\"user_unique_name\"\n\n:\n\n\"kou_testing_001\"\n\n,\n\n​\n\n\"avatar_url\"\n\n:\n\n\"example.com/cloudidentity.9f6***.jpg\"\n\n​\n\n},\n\n​\n\n{\n\n​\n\n\"avatar_url\"\n\n:\n\n\"https://example.com/cloudidentity.9f6***.jpg\"\n\n,\n\n​\n\n\"role_type\"\n\n:\n\n\"member\"\n\n,\n\n​\n\n\"user_id\"\n\n:\n\n\"402688082103***\"\n\n,\n\n​\n\n\"user_nickname\"\n\n:\n\n\"test_user_01\"\n\n,\n\n​\n\n\"user_unique_name\"\n\n:\n\n\"user170383***6\"\n\n​\n\n},\n\n​\n\n{\n\n​\n\n\"user_id\"\n\n:\n\n\"260191467***\"\n\n,\n\n​\n\n\"user_nickname\"\n\n:\n\n\"test_user_03\"\n\n,\n\n​\n\n\"user_unique_name\"\n\n:\n\n\"user127938***\"\n\n,\n\n​\n\n\"avatar_url\"\n\n:\n\n\"https://example.com/cloudidentity.9f6***.jpg\"\n\n,\n\n​\n\n\"role_type\"\n\n:\n\n\"member\"\n\n​\n\n},\n\n​\n\n{\n\n​\n\n\"user_id\"\n\n:\n\n\"55242585801***\"\n\n,\n\n​\n\n\"user_nickname\"\n\n:\n\n\"test_003\"\n\n,\n\n​\n\n\"user_unique_name\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"avatar_url\"\n\n:\n\n\"https://example.com/cloudidentity.9f6***.jpg\"\n\n,\n\n​\n\n\"role_type\"\n\n:\n\n\"member\"\n\n​\n\n}\n\n​\n\n]\n\n​\n\n},\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20250616153822E8D5D5F****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n修改工作空间基本信息\n\n下一篇\n\n批量邀请用户加入空间",
        "links": []
      },
      "markdown": "| 请求方式​ | GET |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/workspaces/:workspace_id/members​ |\n| 权限​ | readMember​确保调用该接口使用的访问令牌开通了readMember权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 查看指定空间的成员列表。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $AccessToken​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| workspace_id​ | String​ | 必选​ | 736163827687053****​ | 需要查看成员列表的空间 ID。​进入指定空间，空间页面 URL 中w参数后的数字就是 工作空间 ID。例如https://code.coze.cn/w/75814654762959***/projects，workspace_id 为75814654762959***。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| page_num​ | Integer​ | 可选​ | 1​ | 查询结果分页展示时，此参数用于设置查看的页码。最小值为 1，默认为 1。​ |\n| page_size​ | Integer​ | 可选​ | 10​ | 查询结果分页展示时，此参数用于设置每页返回的数据量。取值范围为 1~50，默认为 20。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | Object ofOpenSpaceMemberListData​ | \\​ | 返回的数据对象，包含空间成员列表和总数。​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {logid\": \"202410242028595CCF353CEC86A8*****\" }​ | 本次请求返回的详细信息。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| items​ | Array ofOpenSpaceMember​ | [ { \"role_type\": \"owner\", \"user_id\": \"2135714797***\", \"user_nickname\": \"RootUser_210202***\", \"user_unique_name\": \"kou_testing_001\", \"avatar_url\": \"example.com/cloudidentity.9f6***.jpg\" }, { \"avatar_url\": \"https://example.com/cloudidentity.9f6***.jpg\", \"role_type\": \"member\", \"user_id\": \"402688082103***\", \"user_nickname\": \"test_user_01\", \"user_unique_name\": \"user170383***6\" }]​ | 返回的成员列表。​ |\n| total_count​ | Long​ | 5​ | 空间中的成员总数。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| user_id​ | String​ | 2069720456*****​ | 用户的扣子用户 ID。​ |\n| role_type​ | String​ | member​ | 该用户在空间中的角色：​admin：空间管理员。​member：空间成员。​owner：空间所有者。​ |\n| user_nickname​ | String​ | 小王​ | 用户的昵称。​ |\n| user_unique_name​ | String​ | 小王​ | 用户的名称。​ |\n\n- admin：空间管理员。 ​\n\n- member：空间成员。 ​\n\n- owner：空间所有者。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/add_space_member",
      "title": "批量邀请用户加入空间",
      "content": {
        "sections": [],
        "full_text": "批量邀请用户加入空间\n\n邀请用户加入工作空间，支持批量邀请，每次最多添加 20 个成员。\n\n​\n\n接口描述\n\n​\n\n通过本 API 批量邀请用户加入工作空间，并设置用户是空间管理员或空间成员。\n\n​\n\n在企业版（企业标准版、企业旗舰版）中，添加用户时会直接将用户加入工作空间，无需被添加者确认。\n\n​\n\n在个人版中，添加用户时会向用户发送邀请，用户同意后才能加入工作空间。\n\n​\n\n如果被添加者的主账号设置了\n\n不允许加入外部空间\n\n，添加该用户时会报错。\n\n​\n\n接口限制\n\n​\n\n在企业版（企业标准版、企业旗舰版）中，仅支持邀请已加入企业的用户加入工作空间，否则调用 API 时会执行失败，并提示错误码 702042162。\n\n​\n\n添加成员后，工作空间成员总数不能超过该工作空间的成员数量上限，否则调用 API 时会执行失败，并提示错误码 702042018。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/workspaces/:workspace_id/members\n\n​\n\n权限\n\n​\n\naddMember\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\naddMember\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n批量邀请用户加入工作空间。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $AccessToken\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nworkspace_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n736163827687053****\n\n​\n\n需要添加用户的工作空间 ID。\n\n​\n\n进入指定空间，空间页面 URL 中\n\nw\n\n参数后的数字就是 工作空间 ID。例如\n\nhttps://code.coze.cn/w/75814654762959***/projects\n\n，workspace_id 为\n\n75814654762959***\n\n。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nusers\n\n​\n\nArray of\n\nOpenSpaceMember\n\n​\n\n可选\n\n​\n\n[\"206972012541****\",\"552425858****\"]\n\n​\n\n待邀请加入工作空间的用户列表，单次最多添加 20 个成员。\n\n​\n\n​\n\nOpenSpaceMember\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nuser_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n2069720456*****\n\n​\n\n待邀请加入工作空间的用户的扣子用户 ID。\n\n​\n\n你可以单击扣子编程左下角的头像，选择\n\n账号设置\n\n，在页面底部查看扣子用户的 UID。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\nrole_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nmember\n\n​\n\n该用户在工作空间中的角色：\n\n​\n\nadmin：工作空间管理员。\n\n​\n\nmember：工作空间成员。\n\n​\n\n说明\n\n不支持设置为空间所有者。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nObject of\n\nOpenAddSpaceMemberData\n\n​\n\n\\\n\n​\n\n添加成员的结果信息。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{ \"logid\": \"20250106172024B5F607030EFFAD6*****\" }\n\n​\n\n响应详情信息。\n\n​\n\n​\n\nOpenAddSpaceMemberData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nnot_exist_user_ids\n\n​\n\nArray of String\n\n​\n\n[\"21357147977***\"]\n\n​\n\n因用户 ID 不存在而导致添加失败的用户 ID 列表。\n\n​\n\nadded_success_user_ids\n\n​\n\nArray of String\n\n​\n\n[\"21399947977***\"]\n\n​\n\n企业标准版或企业旗舰版成功添加的用户 ID 列表。\n\n​\n\nalready_joined_user_ids\n\n​\n\nArray of String\n\n​\n\n[\"2177747977***\"]\n\n​\n\n用户在该工作空间中已经存在，不重复添加。\n\n​\n\nalready_invited_user_ids\n\n​\n\nArray of String\n\n​\n\n[\"21888147977***\"]\n\n​\n\n已经发起邀请但用户还未同意加入的用户 ID 列表。\n\n​\n\n仅个人版的工作空间添加用户时需要发出邀请，用户同意后才会加入工作空间。\n\n​\n\ninvited_success_user_ids\n\n​\n\nArray of String\n\n​\n\n[\"2136666147977***\"]\n\n​\n\n个人版中，发起邀请且用户同意加入的用户 ID 列表。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\nPOST 'https\n\n:\n\n//https://api.coze.cn/v1/workspaces/7515267805***/members' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_FFTwAe4KB9GpaXCGoCjKbztWig4MT1SRB6yjP4n0PJ1AE3ukqw5yGj****'\n\n​\n\n{\n\n​\n\n\"users\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"role_type\"\n\n:\n\n\"member\"\n\n,\n\n​\n\n\"user_id\"\n\n:\n\n\"21357147977***\"\n\n​\n\n},\n\n​\n\n{\n\n​\n\n\"role_type\"\n\n:\n\n\"member\"\n\n,\n\n​\n\n\"user_id\"\n\n:\n\n\"55242585801***\"\n\n​\n\n}\n\n​\n\n]\n\n​\n\n}\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"already_joined_user_ids\"\n\n:\n\n[\n\n​\n\n\"2135714797****\"\n\n​\n\n],\n\n​\n\n\"already_invited_user_ids\"\n\n:\n\n[],\n\n​\n\n\"added_success_user_ids\"\n\n:\n\n[\n\n​\n\n\"55242585****\"\n\n​\n\n],\n\n​\n\n\"invited_success_user_ids\"\n\n:\n\n[],\n\n​\n\n\"not_exist_user_ids\"\n\n:\n\n[]\n\n​\n\n},\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20250616153813E8D5D5F993****\"\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n查看空间成员列表\n\n下一篇\n\n批量移除空间中的用户",
        "links": []
      },
      "markdown": "- 在企业版（企业标准版、企业旗舰版）中，添加用户时会直接将用户加入工作空间，无需被添加者确认。 ​\n\n- 在个人版中，添加用户时会向用户发送邀请，用户同意后才能加入工作空间。 ​\n\n- 如果被添加者的主账号设置了 不允许加入外部空间 ，添加该用户时会报错。 ​\n\n- 在企业版（企业标准版、企业旗舰版）中，仅支持邀请已加入企业的用户加入工作空间，否则调用 API 时会执行失败，并提示错误码 702042162。 ​\n\n- 添加成员后，工作空间成员总数不能超过该工作空间的成员数量上限，否则调用 API 时会执行失败，并提示错误码 702042018。 ​\n\n| 请求方式​ | POST |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/workspaces/:workspace_id/members​ |\n| 权限​ | addMember​确保调用该接口使用的访问令牌开通了addMember权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 批量邀请用户加入工作空间。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $AccessToken​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| workspace_id​ | String​ | 必选​ | 736163827687053****​ | 需要添加用户的工作空间 ID。​进入指定空间，空间页面 URL 中w参数后的数字就是 工作空间 ID。例如https://code.coze.cn/w/75814654762959***/projects，workspace_id 为75814654762959***。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| users​ | Array ofOpenSpaceMember​ | 可选​ | [\"206972012541****\",\"552425858****\"]​ | 待邀请加入工作空间的用户列表，单次最多添加 20 个成员。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| user_id​ | String​ | 必选​ | 2069720456*****​ | 待邀请加入工作空间的用户的扣子用户 ID。​你可以单击扣子编程左下角的头像，选择账号设置，在页面底部查看扣子用户的 UID。​​​​​​ |\n| role_type​ | String​ | 必选​ | member​ | 该用户在工作空间中的角色：​admin：工作空间管理员。​member：工作空间成员。​说明不支持设置为空间所有者。​​ |\n\n- admin：工作空间管理员。 ​\n\n- member：工作空间成员。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | Object ofOpenAddSpaceMemberData​ | \\​ | 添加成员的结果信息。​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | { \"logid\": \"20250106172024B5F607030EFFAD6*****\" }​ | 响应详情信息。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| not_exist_user_ids​ | Array of String​ | [\"21357147977***\"]​ | 因用户 ID 不存在而导致添加失败的用户 ID 列表。​ |\n| added_success_user_ids​ | Array of String​ | [\"21399947977***\"]​ | 企业标准版或企业旗舰版成功添加的用户 ID 列表。​ |\n| already_joined_user_ids​ | Array of String​ | [\"2177747977***\"]​ | 用户在该工作空间中已经存在，不重复添加。​ |\n| already_invited_user_ids​ | Array of String​ | [\"21888147977***\"]​ | 已经发起邀请但用户还未同意加入的用户 ID 列表。​仅个人版的工作空间添加用户时需要发出邀请，用户同意后才会加入工作空间。​ |\n| invited_success_user_ids​ | Array of String​ | [\"2136666147977***\"]​ | 个人版中，发起邀请且用户同意加入的用户 ID 列表。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/remove_space_member",
      "title": "批量移除空间中的用户",
      "content": {
        "sections": [],
        "full_text": "批量移除空间中的用户\n\n批量移除工作空间中的用户。每次最多移除 5 个成员。\n\n​\n\n接口描述\n\n​\n\n调用本 API 将用户从指定的工作空间中移除。只能移除空间管理员或成员，不支持移除空间所有者。批量移除用户时，你可以在返回结果中查看移除失败的用户以及具体原因。\n\n​\n\n移除成员后，该成员拥有的资源将自动转移给工作空间所有者。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nDELETE\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/workspaces/:workspace_id/members\n\n​\n\n权限\n\n​\n\nremoveMember\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nremoveMember\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n批量移除空间中的用户。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $AccessToken\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nworkspace_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n736163827687053****\n\n​\n\n需要移除用户的空间 ID。\n\n​\n\n进入指定空间，空间页面 URL 中\n\nw\n\n参数后的数字就是 工作空间 ID。例如\n\nhttps://code.coze.cn/w/75814654762959***/projects\n\n，workspace_id 为\n\n75814654762959***\n\n。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nuser_ids\n\n​\n\nArray of String\n\n​\n\n必选\n\n​\n\n[\"206972012541****\",\"552425858****\"]\n\n​\n\n要移除的成员，单次最多移除 5 个成员。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nObject of\n\nOpenRemoveSpaceMemberData\n\n​\n\n\\\n\n​\n\n移除空间成员的结果信息。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{ \"logid\": \"20250106172024B5F607030EFFAD6*****\" }\n\n​\n\n响应详情信息。\n\n​\n\n​\n\nOpenRemoveSpaceMemberData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nremoved_success_user_ids\n\n​\n\nArray of String\n\n​\n\n[\"21399947977***\"]\n\n​\n\n成功移除的成员列表。\n\n​\n\nnot_in_workspace_user_ids\n\n​\n\nArray of String\n\n​\n\n[\"21399947666***\"]\n\n​\n\n不在当前空间中的用户 ID 列表，这些用户不会被处理。\n\n​\n\nowner_not_support_remove_user_ids\n\n​\n\nArray of String\n\n​\n\n[\"2177747977***\"]\n\n​\n\n移除失败，该用户为空间所有者。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request DELETE 'https\n\n:\n\n//api.coze.cn/v1/workspaces/751526780526****/members' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_FFTwA******' \\\n\n​\n\n{\n\n​\n\n\"user_ids\"\n\n:\n\n[\n\n\"206972012541****\"\n\n,\n\n\"2135714797****\"\n\n,\n\n\"552425858****\"\n\n]\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20250616153946D01251E104****\"\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"removed_success_user_ids\"\n\n:\n\n[\n\n​\n\n\"552425858****\"\n\n​\n\n],\n\n​\n\n\"not_in_space_user_ids\"\n\n:\n\n[\n\n​\n\n\"2069720125****\"\n\n​\n\n],\n\n​\n\n\"owner_not_support_remove_user_ids\"\n\n:\n\n[\n\n​\n\n\"21357147977***\"\n\n​\n\n]\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n批量邀请用户加入空间\n\n下一篇\n\n查询文件夹列表",
        "links": []
      },
      "markdown": "| 请求方式​ | DELETE |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/workspaces/:workspace_id/members​ |\n| 权限​ | removeMember​确保调用该接口使用的访问令牌开通了removeMember权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 批量移除空间中的用户。 |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $AccessToken​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| workspace_id​ | String​ | 必选​ | 736163827687053****​ | 需要移除用户的空间 ID。​进入指定空间，空间页面 URL 中w参数后的数字就是 工作空间 ID。例如https://code.coze.cn/w/75814654762959***/projects，workspace_id 为75814654762959***。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| user_ids​ | Array of String​ | 必选​ | [\"206972012541****\",\"552425858****\"]​ | 要移除的成员，单次最多移除 5 个成员。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | Object ofOpenRemoveSpaceMemberData​ | \\​ | 移除空间成员的结果信息。​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | { \"logid\": \"20250106172024B5F607030EFFAD6*****\" }​ | 响应详情信息。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| removed_success_user_ids​ | Array of String​ | [\"21399947977***\"]​ | 成功移除的成员列表。​ |\n| not_in_workspace_user_ids​ | Array of String​ | [\"21399947666***\"]​ | 不在当前空间中的用户 ID 列表，这些用户不会被处理。​ |\n| owner_not_support_remove_user_ids​ | Array of String​ | [\"2177747977***\"]​ | 移除失败，该用户为空间所有者。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/workspace_list_folder",
      "title": "查询文件夹列表",
      "content": {
        "sections": [],
        "full_text": "查询文件夹列表\n\n工作空间中的用户可以查询工作空间中的文件夹列表。\n\n​\n\n接口描述\n\n​\n\n你可以查询某个文件夹或工作空间根目录下的子文件夹列表。每次查询仅返回下一层级的文件夹信息，不包含更深层级的子文件夹。若需要获取更深层级的文件夹信息，你可以多次调用本 API，利用上一次查询返回的文件夹 ID 继续查询。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/folders\n\n​\n\n​\n\n权限\n\n​\n\nlistFolder\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nlistFolder\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n查询工作空间中的文件夹列表。\n\n​\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $AccessToken\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nworkspace_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n736163827687053****\n\n​\n\n待查询文件夹列表的工作空间 ID。\n\n​\n\n进入指定空间，空间页面 URL 中\n\nw\n\n参数后的数字就是 工作空间 ID。例如\n\nhttps://code.coze.cn/w/75814654762959***/projects\n\n，工作空间 ID 为\n\n75814654762959***\n\n。\n\n​\n\nfolder_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\ndevelopment\n\n​\n\n文件夹类型，参数值固定为\n\ndevelopment\n\n。\n\n​\n\nparent_folder_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n752430442263***\n\n​\n\n指定要查询的文件夹的父级文件夹 ID。当需要查看某个文件夹下的子文件夹列表时，需传入该文件夹的 ID。若不传或传入\n\n0\n\n，则表示查询工作空间根目录下的文件夹。\n\n​\n\n文件夹 ID 的获取方法如下：进入指定工作空间，单击\n\n项目管理\n\n，单击目标文件夹，在 URL 中\n\nfolder_id\n\n参数后的数字就是文件夹 ID。例如：\n\nhttps://code.coze.cn/w/74982048832804***/projects?folder_id=75635667770837***\n\n，\n\nfolder_id\n\n为\n\n75635667770837***\n\n。\n\n​\n\npage_num\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n1\n\n​\n\n分页查询时的页码。默认为 1，即返回第一页数据。\n\n​\n\npage_size\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n20\n\n​\n\n每页返回的数据条数，用于分页查询。默认值为\n\n20\n\n，最大值为\n\n50\n\n。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nObject of\n\nOpenGetSpaceFolderData\n\n​\n\n{\"items\":[{\"id\":\"1234567****\",\"name\":\"项目文档\",\"description\":\"存放2023年项目相关文档\",\"workspace_id\":\"5123945629***\",\"children_count\":0,\"creator_user_id\":\"24787743932***\",\"parent_folder_id\":\"1234567890***\"}],\"has_more\":false,\"total_count\":10}\n\n​\n\n文件夹列表的查询结果，包含文件夹的详细信息、是否还有更多数据以及文件夹的总数量。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含本次请求的详细日志信息，用于问题排查。如果遇到异常报错场景，且反复重试仍然报错，可以根据此\n\nlogid\n\n联系扣子团队获取帮助。\n\n​\n\n​\n\nOpenGetSpaceFolderData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nitems\n\n​\n\nArray of\n\nFolderSimpleInfo\n\n​\n\n\\\n\n​\n\n查询的父文件夹下的文件夹列表，仅展示下一层级文件夹信息，不包含更深层级的子文件夹的信息。\n\n​\n\nhas_more\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n标识当前返回的文件夹列表是否还有更多数据未返回。\n\n​\n\ntrue\n\n：还有更多未返回的文件夹。\n\n​\n\nfalse\n\n：已返回所有数据。\n\n​\n\ntotal_count\n\n​\n\nLong\n\n​\n\n10\n\n​\n\n当前查询条件下第一层级的文件夹总数，不包含更深层级的子文件夹。\n\n​\n\n​\n\nFolderSimpleInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n1752316125533542***\n\n​\n\n文件夹 ID。\n\n​\n\nname\n\n​\n\nString\n\n​\n\n项目文档\n\n​\n\n文件夹的名称，用于标识和区分不同的文件夹。\n\ndescription\n\n​\n\nString\n\n​\n\n存放2023年项目相关文档\n\n​\n\n文件夹的描述信息，用于提供关于文件夹的额外说明或备注。\n\nfolder_type\n\n​\n\nString\n\n​\n\ndevelopment\n\n​\n\n文件夹类型，当前仅支持\n\ndevelopment\n\n。\n\n​\n\nworkspace_id\n\n​\n\nString\n\n​\n\n5123945629***\n\n​\n\n文件夹所属的工作空间的 Space ID。Space ID 是空间的唯一标识。\n\n​\n\nchildren_count\n\n​\n\nInteger\n\n​\n\n5\n\n​\n\n当前文件夹下的子文件夹数量，仅统计下一层级文件夹数量，不包含更深层级的子文件夹。\n\n​\n\ncreator_user_id\n\n​\n\nString\n\n​\n\n24787743932***\n\n​\n\n创建该文件夹的扣子用户 UID，用于标识文件夹的创建者。\n\n​\n\nparent_folder_id\n\n​\n\nString\n\n​\n\n754268556394029***\n\n​\n\n当前文件夹的\n\n父\n\n文件夹 ID，用于标识文件夹的层级关系。如果未返回该字段，则表示当前文件夹为根文件夹。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request GET 'https\n\n:\n\n//api.coze.cn/v1/folders?folder_type=development&workspace_id=75060471874****' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"total_count\"\n\n:\n\n2\n\n,\n\n​\n\n\"has_more\"\n\n:\n\nfalse\n\n,\n\n​\n\n\"items\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"name\"\n\n:\n\n\"项目文件夹2\"\n\n,\n\n​\n\n\"description\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"id\"\n\n:\n\n\"7523161255335***\"\n\n,\n\n​\n\n\"workspace_id\"\n\n:\n\n\"7506047187433***\"\n\n,\n\n​\n\n\"creator_user_id\"\n\n:\n\n\"14232418519***\"\n\n,\n\n​\n\n\"folder_type\"\n\n:\n\n\"development\"\n\n,\n\n​\n\n\"parent_folder_id\"\n\n:\n\n\"752316125533***\"\n\n,\n\n​\n\n\"children_count\"\n\n:\n\n0\n\n​\n\n},\n\n​\n\n{\n\n​\n\n\"name\"\n\n:\n\n\"项目文件夹1\"\n\n,\n\n​\n\n\"description\"\n\n:\n\n\"存放扣子编程项目的文件\"\n\n,\n\n​\n\n\"id\"\n\n:\n\n\"7523161237887238182\"\n\n,\n\n​\n\n\"workspace_id\"\n\n:\n\n\"7506047187***\"\n\n,\n\n​\n\n\"creator_user_id\"\n\n:\n\n\"14232418***\"\n\n,\n\n​\n\n\"folder_type\"\n\n:\n\n\"development\"\n\n,\n\n​\n\n\"parent_folder_id\"\n\n:\n\n\"752316125533****\"\n\n,\n\n​\n\n\"children_count\"\n\n:\n\n0\n\n​\n\n}\n\n​\n\n]\n\n​\n\n},\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"0217517972369490000000000000****\"\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n批量移除空间中的用户\n\n下一篇\n\n查询文件夹详情",
        "links": []
      },
      "markdown": "| 请求方式​ | GET​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/folders​​ |\n| 权限​ | listFolder​确保调用该接口使用的访问令牌开通了listFolder权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 查询工作空间中的文件夹列表。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $AccessToken​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| workspace_id​ | String​ | 必选​ | 736163827687053****​ | 待查询文件夹列表的工作空间 ID。​进入指定空间，空间页面 URL 中w参数后的数字就是 工作空间 ID。例如https://code.coze.cn/w/75814654762959***/projects，工作空间 ID 为75814654762959***。​ |\n| folder_type​ | String​ | 必选​ | development​ | 文件夹类型，参数值固定为development。​ |\n| parent_folder_id​ | String​ | 可选​ | 752430442263***​ | 指定要查询的文件夹的父级文件夹 ID。当需要查看某个文件夹下的子文件夹列表时，需传入该文件夹的 ID。若不传或传入0，则表示查询工作空间根目录下的文件夹。​文件夹 ID 的获取方法如下：进入指定工作空间，单击项目管理，单击目标文件夹，在 URL 中folder_id参数后的数字就是文件夹 ID。例如：https://code.coze.cn/w/74982048832804***/projects?folder_id=75635667770837***，folder_id为75635667770837***。​ |\n| page_num​ | Integer​ | 可选​ | 1​ | 分页查询时的页码。默认为 1，即返回第一页数据。​ |\n| page_size​ | Integer​ | 可选​ | 20​ | 每页返回的数据条数，用于分页查询。默认值为20，最大值为50。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | Object ofOpenGetSpaceFolderData​ | {\"items\":[{\"id\":\"1234567****\",\"name\":\"项目文档\",\"description\":\"存放2023年项目相关文档\",\"workspace_id\":\"5123945629***\",\"children_count\":0,\"creator_user_id\":\"24787743932***\",\"parent_folder_id\":\"1234567890***\"}],\"has_more\":false,\"total_count\":10}​ | 文件夹列表的查询结果，包含文件夹的详细信息、是否还有更多数据以及文件夹的总数量。​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含本次请求的详细日志信息，用于问题排查。如果遇到异常报错场景，且反复重试仍然报错，可以根据此logid联系扣子团队获取帮助。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| items​ | Array ofFolderSimpleInfo​ | \\​ | 查询的父文件夹下的文件夹列表，仅展示下一层级文件夹信息，不包含更深层级的子文件夹的信息。​ |\n| has_more​ | Boolean​ | true​ | 标识当前返回的文件夹列表是否还有更多数据未返回。​true：还有更多未返回的文件夹。​false：已返回所有数据。​ |\n| total_count​ | Long​ | 10​ | 当前查询条件下第一层级的文件夹总数，不包含更深层级的子文件夹。​ |\n\n- true ：还有更多未返回的文件夹。 ​\n\n- false ：已返回所有数据。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 1752316125533542***​ | 文件夹 ID。​ |\n| name​ | String​ | 项目文档​ | 文件夹的名称，用于标识和区分不同的文件夹。 |\n| description​ | String​ | 存放2023年项目相关文档​ | 文件夹的描述信息，用于提供关于文件夹的额外说明或备注。 |\n| folder_type​ | String​ | development​ | 文件夹类型，当前仅支持development。​ |\n| workspace_id​ | String​ | 5123945629***​ | 文件夹所属的工作空间的 Space ID。Space ID 是空间的唯一标识。​ |\n| children_count​ | Integer​ | 5​ | 当前文件夹下的子文件夹数量，仅统计下一层级文件夹数量，不包含更深层级的子文件夹。​ |\n| creator_user_id​ | String​ | 24787743932***​ | 创建该文件夹的扣子用户 UID，用于标识文件夹的创建者。​ |\n| parent_folder_id​ | String​ | 754268556394029***​ | 当前文件夹的父文件夹 ID，用于标识文件夹的层级关系。如果未返回该字段，则表示当前文件夹为根文件夹。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/workspace_read_folder",
      "title": "查询文件夹详情",
      "content": {
        "sections": [],
        "full_text": "查询文件夹详情\n\n工作空间中的用户可以查询工作空间中指定文件夹的详情，包括文件夹的名称、描述、所属工作空间、文件夹创建者的 UID等。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/folders/:folder_id\n\n​\n\n​\n\n权限\n\n​\n\nreadFolder\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nreadFolder\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n查询文件夹详情。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nfolder_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n7523161255335***1\n\n​\n\n文件夹 ID。你可以通过扣子编程页面获取文件夹 ID：\n\n​\n\n进入指定工作空间，单击\n\n项目管理\n\n，单击目标文件夹，在 URL 中\n\nfolder_id\n\n参数后的数字就是文件夹 ID。例如：\n\nhttps://code.coze.cn/w/74982048832804***/projects?folder_id=75635667770837***\n\n，\n\nfolder_id\n\n为\n\n75635667770837***\n\n。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nObject of\n\nFolderSimpleInfo\n\n​\n\n{\"id\":\"1234567****\",\"name\":\"项目文档\",\"description\":\"存放2023年项目相关文档\",\"workspace_id\":\"5123945629***\",\"creator_user_id\":\"24787743932***\",\"parent_folder_id\":\"1234567890***\"}\n\n​\n\n包含文件夹的详细信息，如文件夹 ID、名称、描述、所属工作空间 ID、创建者用户 UID 和父文件夹 ID。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含本次请求的详细日志信息，用于问题排查和技术支持。\n\n​\n\nFolderSimpleInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n1752316125533542***\n\n​\n\n文件夹 ID。\n\n​\n\nname\n\n​\n\nString\n\n​\n\n项目文档\n\n​\n\n文件夹的名称，用于标识和区分不同的文件夹。\n\ndescription\n\n​\n\nString\n\n​\n\n存放2023年项目相关文档\n\n​\n\n文件夹的描述信息，用于提供关于文件夹的额外说明或备注。\n\nfolder_type\n\n​\n\nString\n\n​\n\ndevelopment\n\n​\n\n文件夹类型，当前仅支持\n\ndevelopment\n\n。\n\n​\n\nworkspace_id\n\n​\n\nString\n\n​\n\n5123945629***\n\n​\n\n文件夹所属的工作空间的 Space ID。Space ID 是空间的唯一标识。\n\n​\n\ncreator_user_id\n\n​\n\nString\n\n​\n\n24787743932***\n\n​\n\n创建该文件夹的扣子用户 UID，用于标识文件夹的创建者。\n\n​\n\nparent_folder_id\n\n​\n\nString\n\n​\n\n754268556394029***\n\n​\n\n当前文件夹的\n\n父\n\n文件夹 ID，用于标识文件夹的层级关系。如果未返回该字段，则表示当前文件夹为根文件夹。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request GET 'https\n\n:\n\n//api.coze.cn/v1/folders/752316125533***' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20250707155659005CF0FD***\"\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"creator_user_id\"\n\n:\n\n\"14232418519***\"\n\n,\n\n​\n\n\"parent_folder_id\"\n\n:\n\n\"754268556394029***\"\n\n,\n\n​\n\n\"folder_type\"\n\n:\n\n\"development\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"项目文件夹1\"\n\n,\n\n​\n\n\"description\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"id\"\n\n:\n\n\"752316131905***\"\n\n,\n\n​\n\n\"workspace_id\"\n\n:\n\n\"7506047187433***\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n查询文件夹列表\n\n下一篇\n\n成员管理（火山 API）",
        "links": []
      },
      "markdown": "| 请求方式​ | GET​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/folders/:folder_id​​ |\n| 权限​ | readFolder​确保调用该接口使用的访问令牌开通了readFolder权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 查询文件夹详情。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| folder_id​ | String​ | 必选​ | 7523161255335***1​ | 文件夹 ID。你可以通过扣子编程页面获取文件夹 ID：​进入指定工作空间，单击项目管理，单击目标文件夹，在 URL 中folder_id参数后的数字就是文件夹 ID。例如：https://code.coze.cn/w/74982048832804***/projects?folder_id=75635667770837***，folder_id为75635667770837***。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | Object ofFolderSimpleInfo​ | {\"id\":\"1234567****\",\"name\":\"项目文档\",\"description\":\"存放2023年项目相关文档\",\"workspace_id\":\"5123945629***\",\"creator_user_id\":\"24787743932***\",\"parent_folder_id\":\"1234567890***\"}​ | 包含文件夹的详细信息，如文件夹 ID、名称、描述、所属工作空间 ID、创建者用户 UID 和父文件夹 ID。​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含本次请求的详细日志信息，用于问题排查和技术支持。 |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 1752316125533542***​ | 文件夹 ID。​ |\n| name​ | String​ | 项目文档​ | 文件夹的名称，用于标识和区分不同的文件夹。 |\n| description​ | String​ | 存放2023年项目相关文档​ | 文件夹的描述信息，用于提供关于文件夹的额外说明或备注。 |\n| folder_type​ | String​ | development​ | 文件夹类型，当前仅支持development。​ |\n| workspace_id​ | String​ | 5123945629***​ | 文件夹所属的工作空间的 Space ID。Space ID 是空间的唯一标识。​ |\n| creator_user_id​ | String​ | 24787743932***​ | 创建该文件夹的扣子用户 UID，用于标识文件夹的创建者。​ |\n| parent_folder_id​ | String​ | 754268556394029***​ | 当前文件夹的父文件夹 ID，用于标识文件夹的层级关系。如果未返回该字段，则表示当前文件夹为根文件夹。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/create_coze_user",
      "title": "成员管理（火山 API）",
      "content": {
        "sections": [],
        "full_text": "成员管理（火山 API）\n\n将员工添加到扣子编程之前，需要先在火山引擎创建成员（即火山子用户）。本文介绍如何调用火山引擎 API 创建成员、授权成员访问扣子编程和查看成员列表。\n\n​\n\n背景信息\n\n​\n\n扣子编程的成员管理依赖火山引擎访问控制（IAM）产品，相关 API 均由火山引擎提供，与扣子编程业务 API 分属不同体系。\n\n开发者在调用前需注意以下方面：\n\n​\n\n鉴权方式\n\n：仅支持火山引擎的鉴权方式，需使用火山账号的\n\nAccessKey\n\n和\n\nSecretKey\n\n，不支持扣子编程的访问令牌。\n\n​\n\n调用方法\n\n：成员管理使用火山引擎 OpenAPI 的请求结构和返回结构，具体请参见\n\n请求结构\n\n、\n\n返回结构\n\n。\n\n​\n\n在线调用工具\n\n：你可以通过火山引擎\n\nAPI Explorer\n\n快速发起 API 调用，获取响应结果和代码示例。扣子编程 Playground 不支持调用本文所列的 API。\n\n​\n\nSDK\n\n：你\n\n可以使用火山引擎提供的 Volcengine SDK 实现成员管理\n\n，\n\n该 SDK 已内置 AK/SK 签名逻辑，无需自行实现，\n\nSDK 接入方法请参见\n\nVolcengine SDK 接入指南\n\n。\n\n扣子编程自身的 SDK 不含成员管理相关接口。\n\n​\n\n流控限制\n\n​\n\n主账号内的所有\n\nAccessKey\n\n共享同一 API 的流控额度，单个 API 的流控限制为 5 QPS。\n\n​\n\n准备工作\n\n​\n\n已获取火山引擎 API 访问令牌\n\n​\n\n火山引擎的访问令牌和扣子编程的访问令牌不通用，调用火山引擎 API 之前，你需要获取\n\n火山账号\n\n的\n\nAccessKey\n\n和\n\nSecretKey\n\n，具体请参见\n\n获取AccessKey、SecretKey\n\n。\n\n​\n\n说明\n\n为了账号安全，建议使用子用户密钥，为应用程序创建独立的 IAM 用户，并为 IAM 用户分配\n\nCozeFullAccess\n\n和\n\nCloudIdentityFullAccess\n\n权限。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n步骤一：\n\n创建成员\n\n​\n\n调用火山引擎的\n\nCreateUser-新建成员\n\nAPI，创建扣子成员（火山子用户）。\n\n​\n\n说明\n\n每次请求只能新增一位成员。如需添加多位，请依次发送请求。\n\n​\n\n该 API 不支持并发请求。\n\n​\n\n创建成员后，会自动将其加入扣子编程的团队/企业中。\n\n​\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\nPOST /?Action=CreateUser&Version=\n\n2025-06-01\n\nHTTP/\n\n1.1\n\n​\n\nHost\n\n:\n\nopen.volcengineapi.com\n\n​\n\nContent-Type\n\n:\n\napplication/json; charset=UTF\n\n-8\n\n​\n\nX-Date\n\n:\n\n20250605\n\nT145232Z\n\n​\n\nX-Content-Sha256\n\n:\n\n287e874\n\ne******d653b44d21e\n\n​\n\nAuthorization\n\n:\n\nHMAC-SHA256 Credential=Adfks******wekfwe/\n\n20250605\n\n/cn-beijing/coze/request\n\n,\n\nSignedHeaders=host;x-content-sha256;x-date\n\n,\n\nSignature=\n\n47\n\na7d934ff7b37c03938******cd7b8278a40a1057690c401e92246a0e41085f\n\n​\n\n​\n\n{\n\n​\n\n\"UserName\"\n\n:\n\n\"username\"\n\n,\n\n​\n\n\"SecurePhone\"\n\n:\n\n\"+861112225***5\"\n\n,\n\n​\n\n\"SecureEmail\"\n\n:\n\n\"test@email.com\"\n\n​\n\n}\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"ResponseMetadata\"\n\n:\n\n{\n\n​\n\n\"RequestId\"\n\n:\n\n\"20250605225240127115***E6E58\"\n\n,\n\n​\n\n\"Action\"\n\n:\n\n\"CreateUser\"\n\n,\n\n​\n\n\"Version\"\n\n:\n\n\"2025-06-01\"\n\n,\n\n​\n\n\"Service\"\n\n:\n\n\"coze\"\n\n,\n\n​\n\n\"Region\"\n\n:\n\n\"cn-beijing\"\n\n​\n\n},\n\n​\n\n\"Result\"\n\n:\n\n{\n\n​\n\n\"UserID\"\n\n:\n\n\"123****4\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n说明\n\n你需要保存返回的\n\nUserID\n\n，后续授权时需要使用。\n\n​\n\n​\n\n步骤二：授权成员访问扣子编程\n\n​\n\n调用火山引擎的\n\nAuthorizeCozeToUser-授权成员访问扣子\n\nAPI，给目标成员授权访问扣子编程。\n\n​\n\n授权成功后，系统会自动激活该成员。\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\nPOST /?Action=AuthorizeCozeToUser&Version=\n\n2025-06-01\n\nHTTP/\n\n1.1\n\n​\n\nHost\n\n:\n\nopen.volcengineapi.com\n\n​\n\nContent-Type\n\n:\n\napplication/json; charset=UTF\n\n-8\n\n​\n\nX-Date\n\n:\n\n20250604\n\nT100255Z\n\n​\n\nX-Content-Sha256\n\n:\n\n287e874\n\ne******d653b44d21e\n\n​\n\nAuthorization\n\n:\n\nHMAC-SHA256 Credential=Adfks******wekfwe/\n\n20250604\n\n/cn-beijing/coze/request\n\n,\n\nSignedHeaders=host;x-content-sha256;x-date\n\n,\n\nSignature=\n\n47\n\na7d934ff7b37c03938******cd7b8278a40a1057690c401e92246a0e41085f\n\n​\n\n​\n\n{\n\n​\n\n\"UserId\"\n\n:\n\n\"t3HTsg\"\n\n​\n\n}\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"ResponseMetadata\"\n\n:\n\n{\n\n​\n\n\"RequestId\"\n\n:\n\n\"20250604180259120150106074E7FD18\"\n\n,\n\n​\n\n\"Action\"\n\n:\n\n\"AuthorizeCozeToUser\"\n\n,\n\n​\n\n\"Version\"\n\n:\n\n\"2025-06-01\"\n\n,\n\n​\n\n\"Service\"\n\n:\n\n\"coze\"\n\n,\n\n​\n\n\"Region\"\n\n:\n\n\"cn-beijing\"\n\n​\n\n},\n\n​\n\n\"Result\"\n\n:\n\n{}\n\n​\n\n}\n\n​\n\n​\n\n步骤三：（可选）授权访问火山引擎控制台\n\n​\n\n若要允许成员以 IAM 子用户身份访问火山引擎控制台，你可以调用火山引擎的\n\nAuthorizeVolcToUser-授权访问火山引擎控制台\n\nAPI，给对应的成员授权，否则该成员只能使用扣子编程，无法访问火山引擎控制台。\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\nPOST /?Action=AuthorizeVolcToUser&Version=\n\n2025-06-01\n\nHTTP/\n\n1.1\n\n​\n\nHost\n\n:\n\nopen.volcengineapi.com\n\n​\n\nContent-Type\n\n:\n\napplication/json; charset=UTF\n\n-8\n\n​\n\nX-Date\n\n:\n\n20250605\n\nT145209Z\n\n​\n\nX-Content-Sha256\n\n:\n\n287e874\n\ne******d653b44d21e\n\n​\n\nAuthorization\n\n:\n\nHMAC-SHA256 Credential=Adfks******wekfwe/\n\n20250605\n\n/cn-beijing/coze/request\n\n,\n\nSignedHeaders=host;x-content-sha256;x-date\n\n,\n\nSignature=\n\n47\n\na7d934ff7b37c03938******cd7b8278a40a1057690c401e92246a0e41085f\n\n​\n\n​\n\n{\n\n​\n\n\"UserId\"\n\n:\n\n\"123\"\n\n​\n\n}\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"ResponseMetadata\"\n\n:\n\n{\n\n​\n\n\"RequestId\"\n\n:\n\n\"2025060420393105323013214***\"\n\n,\n\n​\n\n\"Action\"\n\n:\n\n\"AuthorizeVolcToUser\"\n\n,\n\n​\n\n\"Version\"\n\n:\n\n\"2025-06-01\"\n\n,\n\n​\n\n\"Service\"\n\n:\n\n\"coze\"\n\n,\n\n​\n\n\"Region\"\n\n:\n\n\"cn-beijing\"\n\n​\n\n},\n\n​\n\n\"Result\"\n\n:\n\n{}\n\n​\n\n}\n\n​\n\n​\n\n相关操作\n\n​\n\n查看成员列表\n\n​\n\n调用火山引擎的\n\nListCozeUser-成员列表\n\nAPI，查看已创建的成员信息，包括火山引擎账号 ID、用户名、扣子用户 UID、是否已激活等。\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\nPOST /?Action=ListCozeUser&Version=\n\n2025-06-01\n\nHTTP/\n\n1.1\n\n​\n\nHost\n\n:\n\nopen.volcengineapi.com\n\n​\n\nContent-Type\n\n:\n\napplication/json; charset=UTF\n\n-8\n\n​\n\nX-Date\n\n:\n\n20250605\n\nT145044Z\n\n​\n\nX-Content-Sha256\n\n:\n\n287e874\n\ne******d653b44d21e\n\n​\n\nAuthorization\n\n:\n\nHMAC-SHA256 Credential=Adfks******wekfwe/\n\n20250605\n\n/cn-beijing/coze/request\n\n,\n\nSignedHeaders=host;x-content-sha256;x-date\n\n,\n\nSignature=\n\n47\n\na7d934ff7b37c03938******cd7b8278a40a1057690c401e92246a0e41085f\n\n​\n\n​\n\n{\n\n​\n\n\"QueryString\"\n\n:\n\n\"user\"\n\n,\n\n​\n\n\"PageNumber\"\n\n:\n\n1\n\n,\n\n​\n\n\"PageSize\"\n\n:\n\n10\n\n,\n\n​\n\n\"UserName\"\n\n:\n\n\"username\"\n\n​\n\n}\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"ResponseMetadata\"\n\n:\n\n{\n\n​\n\n\"RequestId\"\n\n:\n\n\"20250605225102135200***07\"\n\n,\n\n​\n\n\"Action\"\n\n:\n\n\"ListCozeUser\"\n\n,\n\n​\n\n\"Version\"\n\n:\n\n\"2025-06-01\"\n\n,\n\n​\n\n\"Service\"\n\n:\n\n\"coze\"\n\n,\n\n​\n\n\"Region\"\n\n:\n\n\"cn-beijing\"\n\n​\n\n},\n\n​\n\n\"Result\"\n\n:\n\n{\n\n​\n\n\"PageNumber\"\n\n:\n\n1\n\n,\n\n​\n\n\"PageSize\"\n\n:\n\n10\n\n,\n\n​\n\n\"Total\"\n\n:\n\n10\n\n,\n\n​\n\n\"Users\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"CozeUserInEnterprise\"\n\n:\n\n\"true\"\n\n,\n\n​\n\n\"CreatedTime\"\n\n:\n\n\"2025-02-25T19:21:15+08:00\"\n\n,\n\n​\n\n\"UpdatedTime\"\n\n:\n\n\"2025-02-25T19:21:15+08:00\"\n\n,\n\n​\n\n\"UserId\"\n\n:\n\n\"1234\"\n\n,\n\n​\n\n\"UserName\"\n\n:\n\n\"username\"\n\n,\n\n​\n\n\"CozeUserId\"\n\n:\n\n\"1888000022***3\"\n\n,\n\n​\n\n\"CozeUserName\"\n\n:\n\n\"用户111222\"\n\n​\n\n}\n\n​\n\n]\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n​\n\n上一篇\n\n查询文件夹详情\n\n下一篇\n\n添加企业成员",
        "links": []
      },
      "markdown": "- 鉴权方式 ：仅支持火山引擎的鉴权方式，需使用火山账号的 AccessKey 和 SecretKey ，不支持扣子编程的访问令牌。 ​\n\n- 调用方法 ：成员管理使用火山引擎 OpenAPI 的请求结构和返回结构，具体请参见 请求结构 、 返回结构 。 ​\n\n- 在线调用工具 ：你可以通过火山引擎 API Explorer 快速发起 API 调用，获取响应结果和代码示例。扣子编程 Playground 不支持调用本文所列的 API。 ​\n\n- SDK ：你 可以使用火山引擎提供的 Volcengine SDK 实现成员管理 ， 该 SDK 已内置 AK/SK 签名逻辑，无需自行实现， SDK 接入方法请参见 Volcengine SDK 接入指南 。 扣子编程自身的 SDK 不含成员管理相关接口。 ​\n\n- 每次请求只能新增一位成员。如需添加多位，请依次发送请求。 ​\n\n- 该 API 不支持并发请求。 ​\n\n- 创建成员后，会自动将其加入扣子编程的团队/企业中。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/add_enterprise_member",
      "title": "添加企业成员",
      "content": {
        "sections": [],
        "full_text": "添加企业成员\n\n添加员工到企业。\n\n​\n\n在火山引擎创建用户后，\n\n默认会自动将用户添加至企业\n\n，若未成功添加，你可以调用本 API 将用户添加至企业。火山引擎创建用户的具体方法请参见\n\n成员管理\n\n。\n\n​\n\n接口限制\n\n​\n\n套餐限制\n\n：扣子企业版（企业标准版、企业旗舰版）。\n\n​\n\n本 API 仅支持添加员工（火山子用户），不支持添加外部成员（访客）。\n\n​\n\n添加成员总数不能超过企业标准版权益中的成员数量上限（100 个成员），否则会提示 777074011错误。\n\n​\n\n说明\n\n每次请求只能添加一位成员。如需添加多位，请依次发送请求。\n\n​\n\n该 API 不支持并发请求。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/enterprises/:enterprise_id/members\n\n​\n\n​\n\n权限\n\n​\n\nEnterprise.batchAddPeople\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nEnterprise.batchAddPeople\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n添加企业成员。\n\n​\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nenterprise_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nvolcano_210195***\n\n​\n\n企业 ID，用于标识用户所属的企业。\n\n​\n\n你可以在组织管理 > 组织设置页面查看企业 ID。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nusers\n\n​\n\nArray of\n\nOpenEnterpriseMember\n\n​\n\n可选\n\n​\n\n[ { \"user_id\": \"247877439325****\", \"role\": \"enterprise_member\" } ]\n\n​\n\n待邀请加入企业的用户列表，单次最多添加\n\n1\n\n个成员。每个成员包含用户 ID 和角色信息。\n\n​\n\n​\n\nOpenEnterpriseMember\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nrole\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nenterprise_member\n\n​\n\n成员在企业中的角色，枚举值：\n\n​\n\nenterprise_admin\n\n：企业管理员。\n\n​\n\nenterprise_member\n\n：企业普通成员。\n\n​\n\nuser_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n247877439325****\n\n​\n\n需要添加至企业的扣子用户 UID。\n\n​\n\n你可以调用火山引擎的\n\nListCozeUser-成员列表\n\nAPI，查看\n\nCozeUserId\n\n的值即为扣子用户 UID。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/enterprises/volcano_210195*** /members' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_O******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"users\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"user_id\"\n\n:\n\n\"247877439325****\"\n\n,\n\n​\n\n\"role\"\n\n:\n\n\"enterprise_member\"\n\n​\n\n}\n\n​\n\n]\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n成员管理（火山 API）\n\n下一篇\n\n修改企业员工的角色",
        "links": []
      },
      "markdown": "- 套餐限制 ：扣子企业版（企业标准版、企业旗舰版）。 ​\n\n- 本 API 仅支持添加员工（火山子用户），不支持添加外部成员（访客）。 ​\n\n- 添加成员总数不能超过企业标准版权益中的成员数量上限（100 个成员），否则会提示 777074011错误。 ​\n\n- 每次请求只能添加一位成员。如需添加多位，请依次发送请求。 ​\n\n- 该 API 不支持并发请求。 ​\n\n| 请求方式​ | POST​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/enterprises/:enterprise_id/members​​ |\n| 权限​ | Enterprise.batchAddPeople​确保调用该接口使用的访问令牌开通了Enterprise.batchAddPeople权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 添加企业成员。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| enterprise_id​ | String​ | 必选​ | volcano_210195***​ | 企业 ID，用于标识用户所属的企业。​你可以在组织管理 > 组织设置页面查看企业 ID。​​​​​​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| users​ | Array ofOpenEnterpriseMember​ | 可选​ | [ { \"user_id\": \"247877439325****\", \"role\": \"enterprise_member\" } ]​ | 待邀请加入企业的用户列表，单次最多添加1个成员。每个成员包含用户 ID 和角色信息。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| role​ | String​ | 必选​ | enterprise_member​ | 成员在企业中的角色，枚举值：​enterprise_admin：企业管理员。​enterprise_member：企业普通成员。​ |\n| user_id​ | String​ | 必选​ | 247877439325****​ | 需要添加至企业的扣子用户 UID。​你可以调用火山引擎的ListCozeUser-成员列表API，查看CozeUserId的值即为扣子用户 UID。​ |\n\n- enterprise_admin ：企业管理员。 ​\n\n- enterprise_member ：企业普通成员。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/update_enterprise_people",
      "title": "修改企业员工的角色",
      "content": {
        "sections": [],
        "full_text": "修改企业员工的角色\n\n修改企业员工的角色。\n\n​\n\n企业员工角色包括企业管理员和企业普通成员，你可以通过本 API 修改企业员工的角色。\n\n​\n\n接口限制\n\n​\n\n不能修改访客的角色。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPUT\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/enterprises/:enterprise_id/members/:user_id\n\n​\n\n​\n\n权限\n\n​\n\nEnterprise.updatePeople\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\n企业特权应用\n\n中的\n\nEnterprise.updatePeople\n\n权限，详细信息参考\n\nOAuth JWT 授权（企业特权应用）\n\n。\n\n​\n\n接口说明\n\n​\n\n修改企业员工的角色。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息参考\n\nOAuth JWT 授权（企业特权应用）\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nenterprise_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nvolcano_210195***\n\n​\n\n企业 ID，待修改的员工所属的企业。\n\n​\n\n你可以在组织管理 > 组织设置页面查看企业 ID。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\nuser_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n247877439325****\n\n​\n\n待修改员工的扣子用户 UID。\n\n​\n\n你可以调用火山引擎的\n\nListCozeUser-成员列表\n\nAPI，其中\n\nCozeUserId\n\n的值即为扣子用户 UID。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nrole\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nenterprise_member\n\n​\n\n设置成员在企业中的角色，枚举值：\n\n​\n\nenterprise_admin\n\n：企业管理员。\n\n​\n\nenterprise_member\n\n：企业普通成员。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID，便于在异常情况下进行问题排查。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request PUT 'https\n\n:\n\n//api.coze.cn/v1/enterprises/volcano_210195***/members/247877439325****' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_O******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"role\"\n\n:\n\n\"enterprise_member\"\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n添加企业成员\n\n下一篇\n\n移除企业成员",
        "links": []
      },
      "markdown": "| 请求方式​ | PUT​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/enterprises/:enterprise_id/members/:user_id​​ |\n| 权限​ | Enterprise.updatePeople​确保调用该接口使用的访问令牌开通了企业特权应用中的Enterprise.updatePeople权限，详细信息参考OAuth JWT 授权（企业特权应用）。​ |\n| 接口说明​ | 修改企业员工的角色。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息参考OAuth JWT 授权（企业特权应用）。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| enterprise_id​ | String​ | 必选​ | volcano_210195***​ | 企业 ID，待修改的员工所属的企业。​你可以在组织管理 > 组织设置页面查看企业 ID。​​​​​​ |\n| user_id​ | String​ | 必选​ | 247877439325****​ | 待修改员工的扣子用户 UID。​你可以调用火山引擎的ListCozeUser-成员列表API，其中CozeUserId的值即为扣子用户 UID。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| role​ | String​ | 必选​ | enterprise_member​ | 设置成员在企业中的角色，枚举值：​enterprise_admin：企业管理员。​enterprise_member：企业普通成员。​ |\n\n- enterprise_admin ：企业管理员。 ​\n\n- enterprise_member ：企业普通成员。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID，便于在异常情况下进行问题排查。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/remove_enterprise_member",
      "title": "移除企业成员",
      "content": {
        "sections": [],
        "full_text": "移除企业成员\n\n移除企业成员，并指定资源接收人。\n\n​\n\n接口限制\n\n​\n\n套餐限制\n\n：扣子企业版（企业标准版、企业旗舰版）。\n\n​\n\n需要先调用\n\n移除组织成员\n\nAPI 将用户从所有组织中移除，再执行本 API 将其移出企业。\n\n​\n\n被移除成员的资源只能转移给企业超级管理员或企业管理员。\n\n​\n\n说明\n\n每次请求只能移除一位成员。如需移除多位成员，请依次发送请求。\n\n​\n\n该 API 不支持并发请求。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nDELETE\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/enterprises/:enterprise_id/members/:user_id\n\n​\n\n​\n\n权限\n\n​\n\nEnterprise.removePeople\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\n企业特权应用\n\n中的\n\nEnterprise.removePeople\n\n权限，详细信息参考\n\nOAuth JWT 授权（企业特权应用）\n\n。\n\n​\n\n接口说明\n\n​\n\n移除企业成员。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nenterprise_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nvolcano_210195***\n\n​\n\n需要移除用户的企业 ID。\n\n​\n\n你可以在\n\n组织管理\n\n>\n\n组织设置\n\n页面查看企业 ID。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\nuser_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n247877439325****\n\n​\n\n需要移除的扣子用户 UID。\n\n​\n\n你可以调用火山引擎的\n\nListCozeUser-成员列表\n\nAPI，查看\n\nCozeUserId\n\n的值即为扣子用户 UID。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nreceiver_user_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n41134548551****\n\n​\n\n接收被移除成员资源的扣子用户 UID，需填写企业超级管理员或管理员的用户 UID。被移除成员的工作空间、智能体、工作流等资源将转移给该用户。\n\n​\n\n获取企业超级管理员或管理员用户 UID 的方法如下：\n\n​\n\n1.\n\n在\n\n企业管理\n\n>\n\n成员管理\n\n页面查看企业的超级管理员或管理员信息。\n\n​\n\n2.\n\n企业的超级管理员或管理员在扣子编程左下角单击头像，选择\n\n账号设置\n\n，查看账号的 UID。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request DELETE 'https\n\n:\n\n//api.coze.cn/v1/enterprises/volcano_210195***/members/247877439325****' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_O******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"receiver_user_id\"\n\n:\n\n\"41134548551****\"\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n修改企业员工的角色\n\n下一篇\n\n创建组织",
        "links": []
      },
      "markdown": "- 套餐限制 ：扣子企业版（企业标准版、企业旗舰版）。 ​\n\n- 需要先调用 移除组织成员 API 将用户从所有组织中移除，再执行本 API 将其移出企业。 ​\n\n- 被移除成员的资源只能转移给企业超级管理员或企业管理员。 ​\n\n- 每次请求只能移除一位成员。如需移除多位成员，请依次发送请求。 ​\n\n- 该 API 不支持并发请求。 ​\n\n| 请求方式​ | DELETE​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/enterprises/:enterprise_id/members/:user_id​​ |\n| 权限​ | Enterprise.removePeople​确保调用该接口使用的访问令牌开通了企业特权应用中的Enterprise.removePeople权限，详细信息参考OAuth JWT 授权（企业特权应用）。​ |\n| 接口说明​ | 移除企业成员。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| enterprise_id​ | String​ | 必选​ | volcano_210195***​ | 需要移除用户的企业 ID。​你可以在组织管理>组织设置页面查看企业 ID。​​​​​​ |\n| user_id​ | String​ | 必选​ | 247877439325****​ | 需要移除的扣子用户 UID。​你可以调用火山引擎的ListCozeUser-成员列表API，查看CozeUserId的值即为扣子用户 UID。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| receiver_user_id​ | String​ | 必选​ | 41134548551****​ | 接收被移除成员资源的扣子用户 UID，需填写企业超级管理员或管理员的用户 UID。被移除成员的工作空间、智能体、工作流等资源将转移给该用户。​获取企业超级管理员或管理员用户 UID 的方法如下：​1.在企业管理>成员管理页面查看企业的超级管理员或管理员信息。​2.企业的超级管理员或管理员在扣子编程左下角单击头像，选择账号设置，查看账号的 UID。​ |\n\n\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/create_organization",
      "title": "创建组织",
      "content": {
        "sections": [],
        "full_text": "创建组织\n\n在指定的企业中创建组织。\n\n​\n\n接口限制\n\n​\n\n套餐限制\n\n：扣子企业旗舰版。\n\n​\n\n数量限制\n\n：一个企业中最多存在 20 个组织。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/enterprises/:enterprise_id/organizations\n\n​\n\n​\n\n权限\n\n​\n\nEnterprise.createOrganization\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\n企业特权应用\n\n中的\n\nEnterprise.createOrganization\n\n权限，详细信息参考\n\nOAuth JWT 授权（企业特权应用）\n\n。\n\n​\n\n接口说明\n\n​\n\n在指定的企业中创建组织。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息参考\n\nOAuth JWT 授权（企业特权应用）\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nenterprise_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nvolcano_210195***\n\n​\n\n企业 ID，用于标识该组织所属的企业。\n\n​\n\n你可以在\n\n组织管理\n\n>\n\n组织设置\n\n页面查看企业 ID。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nname\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n研发部\n\n​\n\n自定义组织的名称。\n\n​\n\n最大长度为 30 个字符。\n\n​\n\nsuper_admin_user_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n411345614833****\n\n​\n\n指定组织的超级管理员的扣子用户 UID。\n\n​\n\n你可以调用火山引擎的\n\nListCozeUser-成员列表\n\nAPI，\n\nCozeUserId\n\n的值即为扣子用户 UID。\n\n​\n\n说明\n\n只有已加入企业的员工能被指定为组织的超级管理员。\n\n​\n\n​\n\ndescription\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n研发部内部使用的组织\n\n​\n\n自定义组织的描述信息，最大长度为 100 个字符。默认为空。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndata\n\n​\n\nObject of\n\nCreateOrganizationData\n\n​\n\n{\"organization_id\":\"74908881444562***\"}\n\n​\n\n返回的组织信息。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含本次请求的详细信息，主要用于异常报错场景下的问题排查。\n\n​\n\n​\n\nCreateOrganizationData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\norganization_id\n\n​\n\nString\n\n​\n\n74908881444562***\n\n​\n\n组织 ID。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/enterprises/volcano_210195***/organizations' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_O******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"name\"\n\n:\n\n\"研发部\"\n\n,\n\n​\n\n\"super_admin_user_id\"\n\n:\n\n\"411345614833****\"\n\n,\n\n​\n\n\"description\"\n\n:\n\n\"研发部内部使用的组织\"\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"organization_id\"\n\n:\n\n\"74908881444562***\"\n\n​\n\n},\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n移除企业成员\n\n下一篇\n\n修改组织基本信息",
        "links": []
      },
      "markdown": "- 套餐限制 ：扣子企业旗舰版。 ​\n\n- 数量限制 ：一个企业中最多存在 20 个组织。 ​\n\n| 请求方式​ | POST​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/enterprises/:enterprise_id/organizations​​ |\n| 权限​ | Enterprise.createOrganization​确保调用该接口使用的访问令牌开通了企业特权应用中的Enterprise.createOrganization权限，详细信息参考OAuth JWT 授权（企业特权应用）。​ |\n| 接口说明​ | 在指定的企业中创建组织。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息参考OAuth JWT 授权（企业特权应用）。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| enterprise_id​ | String​ | 必选​ | volcano_210195***​ | 企业 ID，用于标识该组织所属的企业。​你可以在组织管理>组织设置页面查看企业 ID。​​​​​​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| name​ | String​ | 必选​ | 研发部​ | 自定义组织的名称。​最大长度为 30 个字符。​ |\n| super_admin_user_id​ | String​ | 必选​ | 411345614833****​ | 指定组织的超级管理员的扣子用户 UID。​你可以调用火山引擎的ListCozeUser-成员列表API，CozeUserId的值即为扣子用户 UID。​说明只有已加入企业的员工能被指定为组织的超级管理员。​​ |\n| description​ | String​ | 可选​ | 研发部内部使用的组织​ | 自定义组织的描述信息，最大长度为 100 个字符。默认为空。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| data​ | Object ofCreateOrganizationData​ | {\"organization_id\":\"74908881444562***\"}​ | 返回的组织信息。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含本次请求的详细信息，主要用于异常报错场景下的问题排查。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| organization_id​ | String​ | 74908881444562***​ | 组织 ID。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/update_organization_info",
      "title": "修改组织基本信息",
      "content": {
        "sections": [],
        "full_text": "修改组织基本信息\n\n修改指定组织的基本信息，包括组织名称和描述。\n\n​\n\n接口限制\n\n​\n\n套餐限制\n\n：仅扣子企业旗舰版支持。\n\n​\n\n组织的名称和描述需要符合内容安全规范，不得包含涉政、涉黄等违规内容，否则扣子编程会提示 4102 错误。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPUT\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/organizations/:organization_id\n\n​\n\n​\n\n权限\n\n​\n\nAccount.updateOrganization\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nAccount.updateOrganization\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n修改组织基本信息。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\norganization_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n7559861372637***\n\n​\n\n待修改组织信息的组织 ID。\n\n​\n\n你可以在\n\n组织管理\n\n>\n\n组织设置\n\n页面查看对应的组织 ID，或通过\n\n查询组织列表\n\nAPI 查询组织 ID。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nname\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n研发部\n\n​\n\n修改后的组织名称。默认为空，表示不修改。\n\n​\n\n最大长度为 30 个字符。\n\n​\n\ndescription\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n研发部内部使用的组织\n\n​\n\n修改后的组织描述。默认为空，表示不修改。\n\n​\n\n最大长度为 100 个字符。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的日志信息，用于问题排查和技术支持。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request PUT 'https\n\n:\n\n//api.coze.cn/v1/organizations/7559861372637***' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"name\"\n\n:\n\n\"研发部\"\n\n,\n\n​\n\n\"description\"\n\n:\n\n\"研发部内部使用的组织\"\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n创建组织\n\n下一篇\n\n查询组织列表",
        "links": []
      },
      "markdown": "- 套餐限制 ：仅扣子企业旗舰版支持。 ​\n\n- 组织的名称和描述需要符合内容安全规范，不得包含涉政、涉黄等违规内容，否则扣子编程会提示 4102 错误。 ​\n\n| 请求方式​ | PUT​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/organizations/:organization_id​​ |\n| 权限​ | Account.updateOrganization​确保调用该接口使用的访问令牌开通了Account.updateOrganization权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 修改组织基本信息。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| organization_id​ | String​ | 必选​ | 7559861372637***​ | 待修改组织信息的组织 ID。​你可以在组织管理>组织设置页面查看对应的组织 ID，或通过查询组织列表API 查询组织 ID。​​​​​​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| name​ | String​ | 可选​ | 研发部​ | 修改后的组织名称。默认为空，表示不修改。​最大长度为 30 个字符。​ |\n| description​ | String​ | 可选​ | 研发部内部使用的组织​ | 修改后的组织描述。默认为空，表示不修改。​最大长度为 100 个字符。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的日志信息，用于问题排查和技术支持。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/list_organization",
      "title": "查询组织列表",
      "content": {
        "sections": [],
        "full_text": "查询组织列表\n\n查询指定企业中的组织列表。\n\n​\n\n接口限制\n\n​\n\n套餐限制\n\n：扣子企业版（企业标准版、企业旗舰版）。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/enterprises/:enterprise_id/organizations\n\n​\n\n​\n\n权限\n\n​\n\nEnterprise.listOrganization\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\n企业特权应用\n\n中的\n\nEnterprise.listOrganization\n\n权限，详细信息参考\n\nOAuth JWT 授权（企业特权应用）\n\n。\n\n​\n\n接口说明\n\n​\n\n查询指定企业中的组织列表。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息参考\n\nOAuth JWT 授权（企业特权应用）\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nenterprise_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nvolcano_210195***\n\n​\n\n企业 ID，查询组织列表所属的企业。\n\n​\n\n你可以在\n\n组织管理\n\n>\n\n组织设置\n\n页面查看企业 ID。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\npage_num\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n1\n\n​\n\n分页查询时的页码。默认为 1，即返回第一页数据。\n\n​\n\npage_size\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n20\n\n​\n\n每页返回的数据条数，用于分页查询。默认值为 20，最大值为 20。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndata\n\n​\n\nObject of\n\nListOrganizationData\n\n​\n\n{\"items\":[{\"organization_id\":\"7490888144456***\",\"organization_name\":\"默认组织\",\"organization_icon_url\":\"\n\nhttps://example.com/organization_icons/7490888144456***.png\n\n\",\"is_default_organization\":true},{\"organization_id\":\"7490888144457***\",\"organization_name\":\"市场部\",\"organization_icon_url\":\"\n\nhttps://example.com/organization_icons/7490888144457***.png\n\n\",\"is_default_organization\":false}],\"total_count\":2}\n\n​\n\n包含符合查询条件的企业组织列表及其数量。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含本次请求的详细信息，主要用于异常报错场景下的问题排查。\n\n​\n\n​\n\nListOrganizationData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nitems\n\n​\n\nArray of\n\nOrganizationBasicInfo\n\n​\n\n[{\"organization_id\":\"7490888144456***\",\"organization_name\":\"默认组织\",\"organization_icon_url\":\"\n\nhttps://example.com/organization_icons/7490888144456***.png\n\n\",\"is_default_organization\":true},{\"organization_id\":\"7490888144457***\",\"organization_name\":\"市场部\",\"organization_icon_url\":\"\n\nhttps://example.com/organization_icons/7490888144457***.png\n\n\",\"is_default_organization\":false}]\n\n​\n\n企业下的组织列表，包含每个组织的详细信息。\n\n​\n\ntotal_count\n\n​\n\nLong\n\n​\n\n2\n\n​\n\n企业中的组织数量。\n\n​\n\n​\n\nOrganizationBasicInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\norganization_id\n\n​\n\nString\n\n​\n\n7490888144456***\n\n​\n\n组织 ID。\n\n​\n\norganization_name\n\n​\n\nString\n\n​\n\n市场部\n\n​\n\n组织名称。\n\n​\n\norganization_icon_url\n\n​\n\nString\n\n​\n\nhttps://example.com/organization_icons/7490888144456***.png\n\n​\n\n组织的头像 URL 地址。\n\n​\n\nis_default_organization\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n标识当前组织是否为默认组织。\n\n​\n\ntrue\n\n：默认组织。\n\n​\n\nfalse\n\n：自定义组织。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request GET 'https\n\n:\n\n//api.coze.cn/v1/enterprises/volcano_210195***/organizations?page_num=1&page_size=20' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_O******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"items\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"organization_id\"\n\n:\n\n\"7490888144456***\"\n\n,\n\n​\n\n\"organization_name\"\n\n:\n\n\"默认组织\"\n\n,\n\n​\n\n\"organization_icon_url\"\n\n:\n\n\"https://example.com/organization_icons/7490888144456***.png\"\n\n,\n\n​\n\n\"is_default_organization\"\n\n:\n\ntrue\n\n​\n\n},\n\n​\n\n{\n\n​\n\n\"organization_id\"\n\n:\n\n\"7490888144457***\"\n\n,\n\n​\n\n\"organization_name\"\n\n:\n\n\"市场部\"\n\n,\n\n​\n\n\"organization_icon_url\"\n\n:\n\n\"https://example.com/organization_icons/7490888144457***.png\"\n\n,\n\n​\n\n\"is_default_organization\"\n\n:\n\nfalse\n\n​\n\n}\n\n​\n\n],\n\n​\n\n\"total_count\"\n\n:\n\n2\n\n​\n\n},\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n修改组织基本信息\n\n下一篇\n\n添加组织成员",
        "links": []
      },
      "markdown": "| 请求方式​ | GET​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/enterprises/:enterprise_id/organizations​​ |\n| 权限​ | Enterprise.listOrganization​确保调用该接口使用的访问令牌开通了企业特权应用中的Enterprise.listOrganization权限，详细信息参考OAuth JWT 授权（企业特权应用）。​ |\n| 接口说明​ | 查询指定企业中的组织列表。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息参考OAuth JWT 授权（企业特权应用）。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| enterprise_id​ | String​ | 必选​ | volcano_210195***​ | 企业 ID，查询组织列表所属的企业。​你可以在组织管理>组织设置页面查看企业 ID。​​​​​​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| page_num​ | Integer​ | 可选​ | 1​ | 分页查询时的页码。默认为 1，即返回第一页数据。​ |\n| page_size​ | Integer​ | 可选​ | 20​ | 每页返回的数据条数，用于分页查询。默认值为 20，最大值为 20。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| data​ | Object ofListOrganizationData​ | {\"items\":[{\"organization_id\":\"7490888144456***\",\"organization_name\":\"默认组织\",\"organization_icon_url\":\"https://example.com/organization_icons/7490888144456***.png\",\"is_default_organization\":true},{\"organization_id\":\"7490888144457***\",\"organization_name\":\"市场部\",\"organization_icon_url\":\"https://example.com/organization_icons/7490888144457***.png\",\"is_default_organization\":false}],\"total_count\":2}​ | 包含符合查询条件的企业组织列表及其数量。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含本次请求的详细信息，主要用于异常报错场景下的问题排查。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| items​ | Array ofOrganizationBasicInfo​ | [{\"organization_id\":\"7490888144456***\",\"organization_name\":\"默认组织\",\"organization_icon_url\":\"https://example.com/organization_icons/7490888144456***.png\",\"is_default_organization\":true},{\"organization_id\":\"7490888144457***\",\"organization_name\":\"市场部\",\"organization_icon_url\":\"https://example.com/organization_icons/7490888144457***.png\",\"is_default_organization\":false}]​ | 企业下的组织列表，包含每个组织的详细信息。​ |\n| total_count​ | Long​ | 2​ | 企业中的组织数量。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| organization_id​ | String​ | 7490888144456***​ | 组织 ID。​ |\n| organization_name​ | String​ | 市场部​ | 组织名称。​ |\n| organization_icon_url​ | String​ | https://example.com/organization_icons/7490888144456***.png​ | 组织的头像 URL 地址。​ |\n| is_default_organization​ | Boolean​ | true​ | 标识当前组织是否为默认组织。​true：默认组织。​false：自定义组织。​ |\n\n- true ：默认组织。 ​\n\n- false ：自定义组织。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/add_organization_people",
      "title": "添加组织成员",
      "content": {
        "sections": [],
        "full_text": "添加组织成员\n\n添加组织成员。\n\n​\n\n接口描述\n\n​\n\n用户加入企业时将自动加入默认组织。\n\n创建组织\n\n后，你可以调用本 API 将员工和访客加入对应组织。\n\n​\n\n接口限制\n\n​\n\n套餐限制\n\n：扣子企业版（企业标准版、企业旗舰版）。\n\n​\n\n用户加入组织前，需先将其添加至对应企业，具体请参见\n\n添加企业成员\n\n。\n\n​\n\n访客加入组织后，组织角色只能是访客。\n\n​\n\n说明\n\n每次请求只能添加一位成员。如需添加多位，请依次发送请求。\n\n​\n\n该 API 不支持并发请求。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/organizations/:organization_id/members\n\n​\n\n​\n\n权限\n\n​\n\nbatchAddOrganizationPeople\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\n企业特权应用\n\n中的\n\nbatchAddOrganizationPeople\n\n权限，详细信息参考\n\nOAuth JWT 授权（企业特权应用）\n\n。\n\n​\n\n接口说明\n\n​\n\n添加组织成员。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息参考\n\nOAuth JWT 授权（企业特权应用）\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\norganization_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n7490888144456***\n\n​\n\n需要添加组织成员的组织 ID。\n\n​\n\n你可以在\n\n组织管理\n\n>\n\n组织设置\n\n页面查看对应的组织 ID，或通过\n\n查询组织列表\n\nAPI 查询组织 ID。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\norganization_people\n\n​\n\nArray of\n\nOrganizationPeopleAddData\n\n​\n\n必选\n\n​\n\n[{\"user_id\":\"41135614833****\",\"organization_role_type\":\"organization_admin\"}]\n\n​\n\n待添加至组织的成员列表。\n\n​\n\n​\n\nOrganizationPeopleAddData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nuser_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n41135614833****\n\n​\n\n需要添加至组织的扣子用户的 UID。\n\n​\n\n你可以调用火山引擎的\n\nListCozeUser-成员列表\n\nAPI，其中\n\nCozeUserId\n\n的值即为扣子用户的 UID。\n\n​\n\norganization_role_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\norganization_admin\n\n​\n\n设置用户在组织中的角色，枚举值：\n\n​\n\norganization_super_admin\n\n：组织超级管理员。\n\n​\n\norganization_admin\n\n：组织管理员。\n\n​\n\norganization_member\n\n：组织成员。\n\n​\n\norganization_guest\n\n：访客。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含本次请求的详细信息，主要用于异常报错场景下的问题排查。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/organizations/7490888144456***/members' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_O******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"organization_people\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"user_id\"\n\n:\n\n\"41135614833****\"\n\n,\n\n​\n\n\"organization_role_type\"\n\n:\n\n\"organization_admin\"\n\n​\n\n}\n\n​\n\n]\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n查询组织列表\n\n下一篇\n\n查询组织成员列表",
        "links": []
      },
      "markdown": "- 套餐限制 ：扣子企业版（企业标准版、企业旗舰版）。 ​\n\n- 用户加入组织前，需先将其添加至对应企业，具体请参见 添加企业成员 。 ​\n\n- 访客加入组织后，组织角色只能是访客。 ​\n\n- 每次请求只能添加一位成员。如需添加多位，请依次发送请求。 ​\n\n- 该 API 不支持并发请求。 ​\n\n| 请求方式​ | POST​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/organizations/:organization_id/members​​ |\n| 权限​ | batchAddOrganizationPeople​确保调用该接口使用的访问令牌开通了企业特权应用中的batchAddOrganizationPeople权限，详细信息参考OAuth JWT 授权（企业特权应用）。​ |\n| 接口说明​ | 添加组织成员。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息参考OAuth JWT 授权（企业特权应用）。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| organization_id​ | String​ | 必选​ | 7490888144456***​ | 需要添加组织成员的组织 ID。​你可以在组织管理>组织设置页面查看对应的组织 ID，或通过查询组织列表API 查询组织 ID。​​​​​​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| organization_people​ | Array ofOrganizationPeopleAddData​ | 必选​ | [{\"user_id\":\"41135614833****\",\"organization_role_type\":\"organization_admin\"}]​ | 待添加至组织的成员列表。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| user_id​ | String​ | 必选​ | 41135614833****​ | 需要添加至组织的扣子用户的 UID。​你可以调用火山引擎的ListCozeUser-成员列表API，其中CozeUserId的值即为扣子用户的 UID。​ |\n| organization_role_type​ | String​ | 必选​ | organization_admin​ | 设置用户在组织中的角色，枚举值：​organization_super_admin：组织超级管理员。​organization_admin：组织管理员。​organization_member：组织成员。​organization_guest：访客。​ |\n\n- organization_super_admin ：组织超级管理员。 ​\n\n- organization_admin ：组织管理员。 ​\n\n- organization_member ：组织成员。 ​\n\n- organization_guest ：访客。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含本次请求的详细信息，主要用于异常报错场景下的问题排查。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/list_organization_people",
      "title": "查询组织成员列表",
      "content": {
        "sections": [],
        "full_text": "查询组织成员列表\n\n查询指定组织中的成员列表。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/organizations/:organization_id/members\n\n​\n\n​\n\n权限\n\n​\n\nAccount.listOrganizationPeople\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\n企业特权应用\n\n中的\n\nAccount.listOrganizationPeople\n\n权限，详细信息参考\n\nOAuth JWT 授权（企业特权应用）\n\n。\n\n​\n\n接口说明\n\n​\n\n查询组织成员列表。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息参考\n\nOAuth JWT 授权（企业特权应用）\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\norganization_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n7559861372637***\n\n​\n\n需要查询组织成员列表的组织 ID。\n\n​\n\n你可以在\n\n组织管理\n\n>\n\n组织设置\n\n页面查看对应的组织 ID，或通过\n\n查询组织列表\n\nAPI 查询组织 ID。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\npage_num\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n1\n\n​\n\n分页查询时的页码。默认为 1，即返回第一页数据。\n\n​\n\npage_size\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n20\n\n​\n\n每页返回的数据条数，用于分页查询。默认值为\n\n20\n\n，最大支持\n\n50\n\n条。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndata\n\n​\n\nObject of\n\nListOrganizationPeopleData\n\n​\n\n{\"items\":[{\"user_id\":\"41147914833****\",\"is_valid\":true,\"avatar_url\":\"\n\nhttps://example.com/avatar/41147914833****.jpg\n\n\",\"created_at\":1715000000,\"people_type\":\"employee\",\"user_nickname\":\"John\",\"user_unique_name\":\"John_123\",\"organization_role_type\":\"organization_admin\"}],\"total_count\":1}\n\n​\n\n组织成员列表，包含成员详细信息和总数。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含本次请求的日志信息，用于问题排查和技术支持。\n\n​\n\n​\n\nListOrganizationPeopleData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nitems\n\n​\n\nArray of\n\nOrganizationPeople\n\n​\n\n[{\"user_id\":\"41147914833****\",\"is_valid\":true,\"avatar_url\":\"\n\nhttps://example.com/avatar/41147914833****.jpg\n\n\",\"created_at\":1715000000,\"people_type\":\"employee\",\"user_nickname\":\"John\",\"user_unique_name\":\"John_123\",\"organization_role_type\":\"organization_admin\"}]\n\n​\n\n组织成员列表。\n\n​\n\ntotal_count\n\n​\n\nLong\n\n​\n\n100\n\n​\n\n组织中的成员数量。\n\n​\n\n​\n\nOrganizationPeople\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nuser_id\n\n​\n\nString\n\n​\n\n41147914833****\n\n​\n\n扣子用户的 UID。\n\n​\n\nis_valid\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n标识该组织成员账号状态是否正常。\n\n​\n\ntrue\n\n：账号状态正常，可正常使用。\n\n​\n\nfalse\n\n：该成员的火山账号已被删除，不可使用。\n\n​\n\navatar_url\n\n​\n\nString\n\n​\n\nhttps://example.com/avatar/41147914833****.jpg\n\n​\n\n用户头像的 URL 地址。\n\n​\n\ncreated_at\n\n​\n\nLong\n\n​\n\n1715000000\n\n​\n\n用户加入组织的时间戳，格式为 10 位的 Unix 时间戳，单位为秒。\n\n​\n\npeople_type\n\n​\n\nString\n\n​\n\nemployee\n\n​\n\n组织成员在企业中的身份类型，枚举值：\n\n​\n\nemployee\n\n：企业员工。\n\n​\n\nguest\n\n：访客。\n\n​\n\nuser_nickname\n\n​\n\nString\n\n​\n\nJohn\n\n​\n\n用户昵称。\n\n​\n\nuser_unique_name\n\n​\n\nString\n\n​\n\nuser5916927***\n\n​\n\n扣子用户名。\n\n​\n\norganization_role_type\n\n​\n\nString\n\n​\n\norganization_admin\n\n​\n\n组织成员在组织中的角色类型，枚举值：\n\n​\n\norganization_super_admin\n\n：组织超级管理员。\n\n​\n\norganization_admin\n\n：组织管理员。\n\n​\n\norganization_member\n\n：组织成员。\n\n​\n\norganization_guest\n\n：访客。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request GET 'https\n\n:\n\n//api.coze.cn/v1/organizations/7559861372637***/members?page_num=1&page_size=20' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_O******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"items\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"user_id\"\n\n:\n\n\"41147914833****\"\n\n,\n\n​\n\n\"is_valid\"\n\n:\n\ntrue\n\n,\n\n​\n\n\"avatar_url\"\n\n:\n\n\"https://example.com/avatar/41147914833****.jpg\"\n\n,\n\n​\n\n\"created_at\"\n\n:\n\n1715000000\n\n,\n\n​\n\n\"people_type\"\n\n:\n\n\"employee\"\n\n,\n\n​\n\n\"user_nickname\"\n\n:\n\n\"John\"\n\n,\n\n​\n\n\"user_unique_name\"\n\n:\n\n\"John_123\"\n\n,\n\n​\n\n\"organization_role_type\"\n\n:\n\n\"organization_admin\"\n\n​\n\n}\n\n​\n\n],\n\n​\n\n\"total_count\"\n\n:\n\n1\n\n​\n\n},\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n添加组织成员\n\n下一篇\n\n修改组织成员角色",
        "links": []
      },
      "markdown": "| 请求方式​ | GET​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/organizations/:organization_id/members​​ |\n| 权限​ | Account.listOrganizationPeople​确保调用该接口使用的访问令牌开通了企业特权应用中的Account.listOrganizationPeople权限，详细信息参考OAuth JWT 授权（企业特权应用）。​ |\n| 接口说明​ | 查询组织成员列表。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息参考OAuth JWT 授权（企业特权应用）。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| organization_id​ | String​ | 必选​ | 7559861372637***​ | 需要查询组织成员列表的组织 ID。​你可以在组织管理>组织设置页面查看对应的组织 ID，或通过查询组织列表API 查询组织 ID。​​​​​​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| page_num​ | Integer​ | 可选​ | 1​ | 分页查询时的页码。默认为 1，即返回第一页数据。​ |\n| page_size​ | Integer​ | 可选​ | 20​ | 每页返回的数据条数，用于分页查询。默认值为20，最大支持50条。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| data​ | Object ofListOrganizationPeopleData​ | {\"items\":[{\"user_id\":\"41147914833****\",\"is_valid\":true,\"avatar_url\":\"https://example.com/avatar/41147914833****.jpg\",\"created_at\":1715000000,\"people_type\":\"employee\",\"user_nickname\":\"John\",\"user_unique_name\":\"John_123\",\"organization_role_type\":\"organization_admin\"}],\"total_count\":1}​ | 组织成员列表，包含成员详细信息和总数。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含本次请求的日志信息，用于问题排查和技术支持。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| items​ | Array ofOrganizationPeople​ | [{\"user_id\":\"41147914833****\",\"is_valid\":true,\"avatar_url\":\"https://example.com/avatar/41147914833****.jpg\",\"created_at\":1715000000,\"people_type\":\"employee\",\"user_nickname\":\"John\",\"user_unique_name\":\"John_123\",\"organization_role_type\":\"organization_admin\"}]​ | 组织成员列表。​ |\n| total_count​ | Long​ | 100​ | 组织中的成员数量。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| user_id​ | String​ | 41147914833****​ | 扣子用户的 UID。​ |\n| is_valid​ | Boolean​ | true​ | 标识该组织成员账号状态是否正常。​true：账号状态正常，可正常使用。​false：该成员的火山账号已被删除，不可使用。​ |\n| avatar_url​ | String​ | https://example.com/avatar/41147914833****.jpg​ | 用户头像的 URL 地址。​ |\n| created_at​ | Long​ | 1715000000​ | 用户加入组织的时间戳，格式为 10 位的 Unix 时间戳，单位为秒。​ |\n| people_type​ | String​ | employee​ | 组织成员在企业中的身份类型，枚举值：​employee：企业员工。​guest：访客。​ |\n| user_nickname​ | String​ | John​ | 用户昵称。​ |\n| user_unique_name​ | String​ | user5916927***​ | 扣子用户名。​ |\n| organization_role_type​ | String​ | organization_admin​ | 组织成员在组织中的角色类型，枚举值：​organization_super_admin：组织超级管理员。​organization_admin：组织管理员。​organization_member：组织成员。​organization_guest：访客。​ |\n\n- true ：账号状态正常，可正常使用。 ​\n\n- false ：该成员的火山账号已被删除，不可使用。 ​\n\n- employee ：企业员工。 ​\n\n- guest ：访客。 ​\n\n- organization_super_admin ：组织超级管理员。 ​\n\n- organization_admin ：组织管理员。 ​\n\n- organization_member ：组织成员。 ​\n\n- organization_guest ：访客。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/update_organization_people",
      "title": "修改组织成员角色",
      "content": {
        "sections": [],
        "full_text": "修改组织成员角色\n\n修改组织成员的角色。\n\n​\n\n组织成员角色包括组织超级管理员、组织管理员、组织成员和访客。你可以通过本 API 修改组织成员的角色。\n\n​\n\n接口限制\n\n​\n\n企业外部用户的角色只能是访客，不支持修改。\n\n​\n\n企业员工的角色不能设置为访客。\n\n​\n\n组织管理员不能将其他人设为组织超级管理员，只有组织超级管理员创建的访问令牌能设置其他人为组织超级管理员。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPUT\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/organizations/:organization_id/members/:user_id\n\n​\n\n​\n\n权限\n\n​\n\nupdateOrganizationPeople\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\n企业特权应用\n\n中的\n\nupdateOrganizationPeople\n\n权限，详细信息参考\n\nOAuth JWT 授权（企业特权应用）\n\n。\n\n​\n\n接口说明\n\n​\n\n修改组织成员的角色。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息参考\n\nOAuth JWT 授权（企业特权应用）\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\norganization_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n7490888144456***\n\n​\n\n待修改组织成员的组织 ID。\n\n​\n\n你可以在\n\n组织管理\n\n>\n\n组织设置\n\n页面查看对应的组织 ID。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\nuser_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n41135614833****\n\n​\n\n待修改角色的组织成员的 UID。\n\n​\n\n你可以调用\n\n查询组织成员列表\n\nAPI，查看组织成员的扣子用户 UID。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\norganization_role_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\norganization_member\n\n​\n\n设置用户在组织中的角色，枚举值：\n\n​\n\norganization_super_admin\n\n：组织超级管理员。\n\n​\n\norganization_admin\n\n：组织管理员。\n\n​\n\norganization_member\n\n：组织成员。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含本次请求的详细信息，主要用于异常报错场景下的问题排查。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request PUT 'https\n\n:\n\n//api.coze.cn/v1/organizations/74908881444562***/members/41135614833****' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_O******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"organization_role_type\"\n\n:\n\n\"organization_member\"\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n查询组织成员列表\n\n下一篇\n\n移除组织成员",
        "links": []
      },
      "markdown": "- 企业外部用户的角色只能是访客，不支持修改。 ​\n\n- 企业员工的角色不能设置为访客。 ​\n\n- 组织管理员不能将其他人设为组织超级管理员，只有组织超级管理员创建的访问令牌能设置其他人为组织超级管理员。 ​\n\n| 请求方式​ | PUT​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/organizations/:organization_id/members/:user_id​​ |\n| 权限​ | updateOrganizationPeople​确保调用该接口使用的访问令牌开通了企业特权应用中的updateOrganizationPeople权限，详细信息参考OAuth JWT 授权（企业特权应用）。​ |\n| 接口说明​ | 修改组织成员的角色。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息参考OAuth JWT 授权（企业特权应用）。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| organization_id​ | String​ | 必选​ | 7490888144456***​ | 待修改组织成员的组织 ID。​你可以在组织管理>组织设置页面查看对应的组织 ID。​​​​​​ |\n| user_id​ | String​ | 必选​ | 41135614833****​ | 待修改角色的组织成员的 UID。​你可以调用查询组织成员列表API，查看组织成员的扣子用户 UID。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| organization_role_type​ | String​ | 必选​ | organization_member​ | 设置用户在组织中的角色，枚举值：​organization_super_admin：组织超级管理员。​organization_admin：组织管理员。​organization_member：组织成员。​ |\n\n- organization_super_admin ：组织超级管理员。 ​\n\n- organization_admin ：组织管理员。 ​\n\n- organization_member ：组织成员。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含本次请求的详细信息，主要用于异常报错场景下的问题排查。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/remove_organization_member",
      "title": "移除组织成员",
      "content": {
        "sections": [],
        "full_text": "移除组织成员\n\n移除组织成员，并指定资源接收人。\n\n​\n\n接口描述\n\n​\n\n如果成员因离职或换部门等场景需要调整归属的组织时，你可以调用本 API 将其移出组织。\n\n​\n\n移除组织成员时，扣子编程会自动将成员移出工作空间，并将其拥有的资源转移给指定的组织超级管理员。移除组织成员并不会将该成员从企业中删除，如果需要彻底从企业中删除，请调用\n\n移除企业成员\n\nAPI 将该成员从企业中移除。\n\n​\n\n接口限制\n\n​\n\n套餐限制\n\n：扣子企业版（企业标准版、企业旗舰版）。\n\n​\n\n被移除成员的资源只能转移给组织超级管理员。\n\n​\n\n移除组织超级管理员前，请确保该组织中已存在其他超级管理员，否则，移除时会提示 777074044 错误。\n\n​\n\n说明\n\n每次请求只能移除一位成员。如需移除多位成员，请依次发送请求。\n\n​\n\n该 API 不支持并发请求。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nDELETE\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/organizations/:organization_id/members/:user_id\n\n​\n\n​\n\n权限\n\n​\n\nAccount.removeOrganizationPeople\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\n企业特权应用\n\n中的\n\nAccount.removeOrganizationPeople\n\n权限，详细信息参考\n\nOAuth JWT 授权（企业特权应用）\n\n。\n\n​\n\n接口说明\n\n​\n\n移除组织成员。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\norganization_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n74908881444562***\n\n​\n\n组织 ID。你可以在\n\n组织管理\n\n>\n\n组织设置\n\n页面查看对应的组织 ID。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\nuser_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n41135614833****\n\n​\n\n需要移除的扣子用户的 UID。\n\n​\n\n你可以调用火山引擎的\n\nListCozeUser-成员列表\n\nAPI，查看\n\nCozeUserId\n\n的值即为扣子用户 UID。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nreceiver_user_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n411356148551****\n\n​\n\n接收被移除成员资源的扣子用户 UID，需填写\n\n组织超级管理员\n\n的用户 UID。被移除成员的工作空间、智能体、工作流等资源将转移给该用户。\n\n​\n\n获取组织超级管理员用户 UID 的步骤如下：\n\n​\n\n1.\n\n在\n\n组织管理\n\n>\n\n组织成员管理\n\n页面查看组织的超级管理员信息。\n\n​\n\n2.\n\n组织的超级管理员在扣子编程左下角单击头像，选择\n\n账号设置\n\n，查看账号的 UID。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request DELETE 'https\n\n:\n\n//api.coze.cn/v1/organizations/74908881444562***/members/411356148551****' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_O******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"receiver_user_id\"\n\n:\n\n\"411379148551****\"\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​",
        "links": []
      },
      "markdown": "- 套餐限制 ：扣子企业版（企业标准版、企业旗舰版）。 ​\n\n- 被移除成员的资源只能转移给组织超级管理员。 ​\n\n- 移除组织超级管理员前，请确保该组织中已存在其他超级管理员，否则，移除时会提示 777074044 错误。 ​\n\n- 每次请求只能移除一位成员。如需移除多位成员，请依次发送请求。 ​\n\n- 该 API 不支持并发请求。 ​\n\n| 请求方式​ | DELETE​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/organizations/:organization_id/members/:user_id​​ |\n| 权限​ | Account.removeOrganizationPeople​确保调用该接口使用的访问令牌开通了企业特权应用中的Account.removeOrganizationPeople权限，详细信息参考OAuth JWT 授权（企业特权应用）。​ |\n| 接口说明​ | 移除组织成员。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| organization_id​ | String​ | 必选​ | 74908881444562***​ | 组织 ID。你可以在组织管理>组织设置页面查看对应的组织 ID。​​​​​​ |\n| user_id​ | String​ | 必选​ | 41135614833****​ | 需要移除的扣子用户的 UID。​你可以调用火山引擎的ListCozeUser-成员列表API，查看CozeUserId的值即为扣子用户 UID。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| receiver_user_id​ | String​ | 必选​ | 411356148551****​ | 接收被移除成员资源的扣子用户 UID，需填写组织超级管理员的用户 UID。被移除成员的工作空间、智能体、工作流等资源将转移给该用户。​获取组织超级管理员用户 UID 的步骤如下：​1.在组织管理>组织成员管理页面查看组织的超级管理员信息。​2.组织的超级管理员在扣子编程左下角单击头像，选择账号设置，查看账号的 UID。​ |\n\n\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/create_conversation",
      "title": "创建会话",
      "content": {
        "sections": [],
        "full_text": "创建会话\n\n创建一个会话。\n\n​\n\n接口描述\n\n​\n\n会话是智能体和用户之间的基于一个或多个主题的问答交互，一个会话包含一条或多条消息。创建会话时，扣子编程会同时在会话中创建一个空白的上下文片段，用于存储某个主题的消息。后续发起对话时，上下文片段中的消息是模型可见的消息历史。\n\n​\n\n你可以在创建会话时同步写入消息，或者创建会话后另外调用\n\n创建消息 API\n\n写入消息。消息默认写入到最新的一个上下文片段中，对话时将作为上下文传递给模型。\n\n​\n\n会话、对话、消息和上下文片段的概念说明，可参考\n\n基础概念\n\n。\n\n​\n\n如果需要将不同业务侧用户的会话互相隔离，请参见\n\n如何实现会话隔离\n\n。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/conversation/create\n\n​\n\n权限\n\n​\n\ncreateConversation\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\ncreateConversation\n\n权限，详细信息参考\n\n准备工作\n\n。\n\n​\n\n接口说明\n\n​\n\n创建一个会话。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n730454116184516*\n\n​\n\n会话对应的智能体 ID。\n\n​\n\n创建会话时指定智能体 ID，后续才能通过\n\n查看会话列表\n\n查看指定智能体 ID 对应的会话列表。\n\n​\n\n智能体 ID，获取方法如下：\n\n​\n\n进入智能体的 开发页面，开发页面 URL 中\n\nbot\n\n参数后的数字就是智能体 ID。例如\n\nhttps://www.coze.cn/space/341****/bot/73428668*****\n\n，智能体 ID 为\n\n73428668*****\n\n。\n\n​\n\nname\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n推荐杭州美食\n\n​\n\n会话的名称。默认为空。为了方便区分不同会话，建议设置会话名称。最多支持 100 个字符。\n\n​\n\nmessages\n\n​\n\nArray of\n\nEnterMessage\n\n​\n\n可选\n\n​\n\n[ { \"role\": \"user\", \"content\":\"[{\"type\":\"text\",\"text\":\"你好，这是我的图片\"},{\"type\":\"image\",\"file_id\":\"145657573***\"}]\", \"content_type\":\"object_string\" }, { \"role\": \"assistant\", \"content\": \"你好我是一个bot\", \"content_type\":\"text\" } ]\n\n​\n\n会话中的消息内容。详细说明可参考\n\nEnterMessage object\n\n。\n\n​\n\nconnector_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n1024\n\n​\n\n该会话在哪个渠道创建。目前支持如下渠道：\n\n​\n\nAPI：（默认）1024\n\n​\n\nChatSDK：999\n\n​\n\n自定义渠道：自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在\n\n账号设置\n\n>\n\n发布渠道\n\n>\n\n企业自定义渠道管理\n\n页面查看渠道 ID。\n\n​\n\nmeta_data\n\n​\n\nJSON Map\n\n​\n\n可选\n\n​\n\n{ \"uuid\": \"newid1234\" }\n\n​\n\n附加信息，通常用于封装一些业务相关的字段。\n\n查看会话信息\n\n时，扣子编程会透传此附加信息，\n\n查看消息列表\n\n时不会返回该附加信息。\n\n​\n\n自定义键值对，应指定为 Map 对象格式。长度为 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。\n\n​\n\n​\n\nEnterMessage\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nrole\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nuser\n\n​\n\n发送这条消息的实体。取值：\n\n​\n\nuser\n\n：代表该条消息内容是用户发送的。\n\n​\n\nassistant\n\n：代表该条消息内容是 Bot 发送的。\n\n​\n\ntype\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nquestion\n\n​\n\n消息类型。默认为\n\nquestion。\n\n​\n\nquestion\n\n：用户输入内容。\n\n​\n\nanswer\n\n：Bot 返回给用户的消息内容，支持增量返回。如果工作流绑定了输出节点，可能会存在多 answer 场景，此时可以用流式返回的结束标志来判断所有 answer 完成。\n\n​\n\nfunction_call\n\n：Bot 对话过程中调用函数（function call）的中间结果。\n\n​\n\ntool_response\n\n：调用工具 （function call）后返回的结果。\n\n​\n\nfollow_up\n\n：如果在 Bot 上配置打开了用户问题建议开关，则会返回推荐问题相关的回复内容。不支持在请求中作为入参。\n\n​\n\nverbose\n\n：多 answer 场景下，服务端会返回一个 verbose 包，对应的 content 为 JSON 格式，\n\ncontent.msg_type =generate_answer_finish\n\n代表全部 answer 回复完成。不支持在请求中作为入参。\n\n​\n\n说明\n\n仅发起会话（v3）接口支持将此参数作为入参，且：\n\n​\n\n如果 autoSaveHistory=true，type 支持设置为 question 或 answer。\n\n​\n\n如果 autoSaveHistory=false，type 支持设置为 question、answer、function_call、tool_output/tool_response。\n\n​\n\n其中，type=question 只能和 role=user 对应，即仅用户角色可以且只能发起 question 类型的消息。详细说明可参考\n\n消息 type 说明\n\n。\n\n​\n\n​\n\ncontent\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n[{\"type\":\"text\",\"text\":\"你好，这是我的图片\"},{\"type\":\"image\",\"file_id\":\"145657573***\"}]\n\n​\n\n消息的内容，支持纯文本、多模态（文本、图片、文件混合输入）、卡片等多种类型的内容。\n\n​\n\ncontent_type 为 object_string 时，content 为\n\nobject_string object\n\n数组序列化之后的 JSON String，详细说明可参考\n\nobject_string object。\n\n​\n\n当 content_type\n\n=\n\ntext 时，content 为普通文本，例如\n\n\"content\" :\"Hello!\"\n\n。\n\n​\n\nmeta_data\n\n​\n\nJSON Map\n\n​\n\n可选\n\n​\n\n{ \"uuid\": \"newid1234\" }\n\n​\n\n创建消息时的附加消息，获取消息时也会返回此附加消息。\n\n​\n\n自定义键值对，应指定为 Map 对象格式。长度为 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。\n\n​\n\n说明\n\ncontent 不为空时，此参数为必选。\n\n​\n\n​\n\ncontent_type\n\n​\n\nString\n\n​\n\n可选\n\n​\n\ntext\n\n​\n\n消息内容的类型，支持设置为：\n\n​\n\ntext：文本。\n\n​\n\nobject_string：多模态内容，即文本和文件的组合、文本和图片的组合。\n\n​\n\ncard：卡片。此枚举值仅在接口响应中出现，不支持作为入参。\n\n​\n\n说明\n\ncontent 不为空时，此参数为必选。\n\n​\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nObject of\n\nConversationData\n\n​\n\n\\\n\n​\n\n会话的基础信息，包含会话的唯一标识、名称、创建时间等详细信息。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\n​\n\nConversationData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n737999610479815****\n\n​\n\nConversation ID，即会话的唯一标识。\n\n​\n\nname\n\n​\n\nString\n\n​\n\n推荐杭州美食\n\n​\n\n会话的名称，用于标识和区分不同的会话。\n\n​\n\nmeta_data\n\n​\n\nJSON Map\n\n​\n\n{ \"uuid\": \"newid1234\" }\n\n​\n\n附加信息，通常用于封装一些业务相关的字段。\n\n查看会话信息\n\n时，扣子编程会透传此附加信息，\n\n查看消息列表\n\n时不会返回该附加信息。\n\n​\n\n自定义键值对，应指定为 Map 对象格式。长度为 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。\n\n​\n\ncreator_id\n\n​\n\nString\n\n​\n\n247877439325****\n\n​\n\n会话创建者的扣子 UID，用于标识创建该会话的用户。\n\n​\n\ncreated_at\n\n​\n\nLong\n\n​\n\n1718289297\n\n​\n\n会话创建的时间。格式为 10 位的 Unixtime 时间戳，单位为秒。\n\n​\n\nupdated_at\n\n​\n\nLong\n\n​\n\n1718289297\n\n​\n\n会话的最后更新时间，格式为 10 位的 Unix 时间戳，单位为秒。\n\n​\n\nlast_section_id\n\n​\n\nString\n\n​\n\n749566434761695***\n\n​\n\n会话中最新的一个上下文片段 ID。\n\n​\n\nconnector_id\n\n​\n\nString\n\n​\n\n1024\n\n​\n\n该会话在哪个渠道创建。目前支持如下渠道：\n\n​\n\nAPI：1024\n\n​\n\nChatSDK：999\n\n​\n\n自定义渠道：自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在\n\n账号设置\n\n>\n\n发布渠道\n\n>\n\n企业自定义渠道管理\n\n页面查看渠道 ID。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n创建空会话\n\n创建会话和消息\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/conversation/create'\\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_xitq9LWlowpX3qGCih1lwpAdzvXNqgmpfhpV28HLWFypY37xR5Uaj2GioN****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"737999610479815****\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"推荐杭州美食\"\n\n,\n\n​\n\n\"meta_data\"\n\n:\n\n{\n\n​\n\n\"uuid\"\n\n:\n\n\"newid1234\"\n\n​\n\n},\n\n​\n\n\"created_at\"\n\n:\n\n1718289297\n\n,\n\n​\n\n\"creator_id\"\n\n:\n\n\"247877439325****\"\n\n,\n\n​\n\n\"connector_id\"\n\n:\n\n\"1024\"\n\n,\n\n​\n\n\"updated_at\"\n\n:\n\n1718289297\n\n,\n\n​\n\n\"last_section_id\"\n\n:\n\n\"7495664347616952360\"\n\n​\n\n},\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n移除组织成员\n\n下一篇\n\n查看会话信息",
        "links": []
      },
      "markdown": "| 请求方式​ | POST |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/conversation/create​ |\n| 权限​ | createConversation​确保调用该接口使用的访问令牌开通了createConversation权限，详细信息参考准备工作。​ |\n| 接口说明​ | 创建一个会话。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| bot_id​ | String​ | 可选​ | 730454116184516*​ | 会话对应的智能体 ID。​创建会话时指定智能体 ID，后续才能通过查看会话列表查看指定智能体 ID 对应的会话列表。​智能体 ID，获取方法如下：​进入智能体的 开发页面，开发页面 URL 中bot参数后的数字就是智能体 ID。例如https://www.coze.cn/space/341****/bot/73428668*****，智能体 ID 为73428668*****。​ |\n| name​ | String​ | 可选​ | 推荐杭州美食​ | 会话的名称。默认为空。为了方便区分不同会话，建议设置会话名称。最多支持 100 个字符。​ |\n| messages​ | Array ofEnterMessage​ | 可选​ | [ { \"role\": \"user\", \"content\":\"[{\"type\":\"text\",\"text\":\"你好，这是我的图片\"},{\"type\":\"image\",\"file_id\":\"145657573***\"}]\", \"content_type\":\"object_string\" }, { \"role\": \"assistant\", \"content\": \"你好我是一个bot\", \"content_type\":\"text\" } ]​ | 会话中的消息内容。详细说明可参考EnterMessage object。​ |\n| connector_id​ | String​ | 可选​ | 1024​ | 该会话在哪个渠道创建。目前支持如下渠道：​API：（默认）1024​ChatSDK：999​自定义渠道：自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在账号设置>发布渠道>企业自定义渠道管理页面查看渠道 ID。​ |\n| meta_data​ | JSON Map​ | 可选​ | { \"uuid\": \"newid1234\" }​ | 附加信息，通常用于封装一些业务相关的字段。查看会话信息时，扣子编程会透传此附加信息，查看消息列表时不会返回该附加信息。​自定义键值对，应指定为 Map 对象格式。长度为 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。​ |\n\n- API：（默认）1024 ​\n\n- ChatSDK：999 ​\n\n- 自定义渠道：自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在 账号设置 > 发布渠道 > 企业自定义渠道管理 页面查看渠道 ID。 ​\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| role​ | String​ | 必选​ | user​ | 发送这条消息的实体。取值：​user：代表该条消息内容是用户发送的。​assistant：代表该条消息内容是 Bot 发送的。​ |\n| type​ | String​ | 可选​ | question​ | 消息类型。默认为question。​question：用户输入内容。​answer：Bot 返回给用户的消息内容，支持增量返回。如果工作流绑定了输出节点，可能会存在多 answer 场景，此时可以用流式返回的结束标志来判断所有 answer 完成。​function_call：Bot 对话过程中调用函数（function call）的中间结果。​tool_response：调用工具 （function call）后返回的结果。​follow_up：如果在 Bot 上配置打开了用户问题建议开关，则会返回推荐问题相关的回复内容。不支持在请求中作为入参。​verbose：多 answer 场景下，服务端会返回一个 verbose 包，对应的 content 为 JSON 格式，content.msg_type =generate_answer_finish代表全部 answer 回复完成。不支持在请求中作为入参。​说明仅发起会话（v3）接口支持将此参数作为入参，且：​如果 autoSaveHistory=true，type 支持设置为 question 或 answer。​如果 autoSaveHistory=false，type 支持设置为 question、answer、function_call、tool_output/tool_response。​其中，type=question 只能和 role=user 对应，即仅用户角色可以且只能发起 question 类型的消息。详细说明可参考消息 type 说明。​​ |\n| content​ | String​ | 可选​ | [{\"type\":\"text\",\"text\":\"你好，这是我的图片\"},{\"type\":\"image\",\"file_id\":\"145657573***\"}]​ | 消息的内容，支持纯文本、多模态（文本、图片、文件混合输入）、卡片等多种类型的内容。​content_type 为 object_string 时，content 为object_string object数组序列化之后的 JSON String，详细说明可参考object_string object。​当 content_type=text 时，content 为普通文本，例如\"content\" :\"Hello!\"。​ |\n| meta_data​ | JSON Map​ | 可选​ | { \"uuid\": \"newid1234\" }​ | 创建消息时的附加消息，获取消息时也会返回此附加消息。​自定义键值对，应指定为 Map 对象格式。长度为 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。​说明content 不为空时，此参数为必选。​​ |\n| content_type​ | String​ | 可选​ | text​ | 消息内容的类型，支持设置为：​text：文本。​object_string：多模态内容，即文本和文件的组合、文本和图片的组合。​card：卡片。此枚举值仅在接口响应中出现，不支持作为入参。​说明content 不为空时，此参数为必选。​​​ |\n\n- user ：代表该条消息内容是用户发送的。 ​\n\n- assistant ：代表该条消息内容是 Bot 发送的。 ​\n\n- question ：用户输入内容。 ​\n\n- answer ：Bot 返回给用户的消息内容，支持增量返回。如果工作流绑定了输出节点，可能会存在多 answer 场景，此时可以用流式返回的结束标志来判断所有 answer 完成。 ​\n\n- function_call ：Bot 对话过程中调用函数（function call）的中间结果。 ​\n\n- tool_response ：调用工具 （function call）后返回的结果。 ​\n\n- follow_up ：如果在 Bot 上配置打开了用户问题建议开关，则会返回推荐问题相关的回复内容。不支持在请求中作为入参。 ​\n\n- verbose ：多 answer 场景下，服务端会返回一个 verbose 包，对应的 content 为 JSON 格式， content.msg_type =generate_answer_finish 代表全部 answer 回复完成。不支持在请求中作为入参。 ​\n\n- 如果 autoSaveHistory=true，type 支持设置为 question 或 answer。 ​\n\n- 如果 autoSaveHistory=false，type 支持设置为 question、answer、function_call、tool_output/tool_response。 ​\n\n- content_type 为 object_string 时，content 为 object_string object 数组序列化之后的 JSON String，详细说明可参考 object_string object。 ​\n\n- 当 content_type = text 时，content 为普通文本，例如 \"content\" :\"Hello!\" 。 ​\n\n- text：文本。 ​\n\n- object_string：多模态内容，即文本和文件的组合、文本和图片的组合。 ​\n\n- card：卡片。此枚举值仅在接口响应中出现，不支持作为入参。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | Object ofConversationData​ | \\​ | 会话的基础信息，包含会话的唯一标识、名称、创建时间等详细信息。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 737999610479815****​ | Conversation ID，即会话的唯一标识。​ |\n| name​ | String​ | 推荐杭州美食​ | 会话的名称，用于标识和区分不同的会话。​ |\n| meta_data​ | JSON Map​ | { \"uuid\": \"newid1234\" }​ | 附加信息，通常用于封装一些业务相关的字段。查看会话信息时，扣子编程会透传此附加信息，查看消息列表时不会返回该附加信息。​自定义键值对，应指定为 Map 对象格式。长度为 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。​ |\n| creator_id​ | String​ | 247877439325****​ | 会话创建者的扣子 UID，用于标识创建该会话的用户。​ |\n| created_at​ | Long​ | 1718289297​ | 会话创建的时间。格式为 10 位的 Unixtime 时间戳，单位为秒。​ |\n| updated_at​ | Long​ | 1718289297​ | 会话的最后更新时间，格式为 10 位的 Unix 时间戳，单位为秒。​ |\n| last_section_id​ | String​ | 749566434761695***​ | 会话中最新的一个上下文片段 ID。​ |\n| connector_id​ | String​ | 1024​ | 该会话在哪个渠道创建。目前支持如下渠道：​API：1024​ChatSDK：999​自定义渠道：自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在账号设置>发布渠道>企业自定义渠道管理页面查看渠道 ID。​ |\n\n- API：1024 ​\n\n- ChatSDK：999 ​\n\n- 自定义渠道：自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在 账号设置 > 发布渠道 > 企业自定义渠道管理 页面查看渠道 ID。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/retrieve_conversation",
      "title": "查看会话信息",
      "content": {
        "sections": [],
        "full_text": "查看会话信息\n\n通过会话 ID 查看会话信息。\n\n​\n\n接口限制\n\n​\n\n仅支持查询本人创建的会话。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/conversation/retrieve\n\n​\n\n权限\n\n​\n\nretrieveConversation\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nretrieveConversation\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n通过会话 ID 查看会话信息。\n\n​\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nconversation_id\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\n737989918257****\n\n​\n\nConversation ID，用于查询指定会话的详细信息。你可以在\n\n发起对话\n\n接口的 Response 中通过\n\nconversation_id\n\n字段获取会话 ID。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nObject of\n\nConversationData\n\n​\n\n\\\n\n​\n\n会话的详细信息。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n响应的详细信息。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\n​\n\nConversationData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n737999610479815****\n\n​\n\nConversation ID，即会话的唯一标识。\n\n​\n\nname\n\n​\n\nString\n\n​\n\n推荐杭州美食\n\n​\n\n会话的名称，用于标识和区分不同的会话。\n\n​\n\nmeta_data\n\n​\n\nJSON Map\n\n​\n\n{ \"uuid\": \"newid1234\" }\n\n​\n\n附加信息，通常用于封装一些业务相关的字段。\n\n查看会话信息\n\n时，扣子编程会透传此附加信息，\n\n查看消息列表\n\n时不会返回该附加信息。\n\n​\n\n自定义键值对，应指定为 Map 对象格式。长度为 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。\n\n​\n\ncreator_id\n\n​\n\nString\n\n​\n\n247877439325****\n\n​\n\n会话创建者的扣子 UID，用于标识创建该会话的用户。\n\n​\n\ncreated_at\n\n​\n\nLong\n\n​\n\n1718289297\n\n​\n\n会话创建的时间。格式为 10 位的 Unixtime 时间戳，单位为秒。\n\n​\n\nupdated_at\n\n​\n\nLong\n\n​\n\n1718289297\n\n​\n\n会话的最后更新时间，格式为 10 位的 Unix 时间戳，单位为秒。\n\n​\n\nlast_section_id\n\n​\n\nString\n\n​\n\n749566434761695***\n\n​\n\n会话中最新的一个上下文片段 ID。\n\n​\n\nconnector_id\n\n​\n\nString\n\n​\n\n1024\n\n​\n\n该会话在哪个渠道创建。目前支持如下渠道：\n\n​\n\nAPI：1024\n\n​\n\nChatSDK：999\n\n​\n\n自定义渠道：自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在\n\n账号设置\n\n>\n\n发布渠道\n\n>\n\n企业自定义渠道管理\n\n页面查看渠道 ID。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request GET 'https\n\n:\n\n//api.coze.cn/v1/conversation/retrieve?conversation_id=737989918257****' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"737999610479815****\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"推荐杭州美食\"\n\n,\n\n​\n\n\"meta_data\"\n\n:\n\n{\n\n​\n\n\"uuid\"\n\n:\n\n\"newid1234\"\n\n​\n\n},\n\n​\n\n\"created_at\"\n\n:\n\n1718289297\n\n,\n\n​\n\n\"creator_id\"\n\n:\n\n\"247877439325****\"\n\n,\n\n​\n\n\"connector_id\"\n\n:\n\n\"1024\"\n\n,\n\n​\n\n\"updated_at\"\n\n:\n\n1718289297\n\n,\n\n​\n\n\"last_section_id\"\n\n:\n\n\"7495664347616952360\"\n\n​\n\n},\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n创建会话\n\n下一篇\n\n查看会话列表",
        "links": []
      },
      "markdown": "| 请求方式​ | GET |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/conversation/retrieve​ |\n| 权限​ | retrieveConversation​确保调用该接口使用的访问令牌开通了retrieveConversation权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 通过会话 ID 查看会话信息。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| conversation_id​ | Integer​ | 必选​ | 737989918257****​ | Conversation ID，用于查询指定会话的详细信息。你可以在发起对话接口的 Response 中通过conversation_id字段获取会话 ID。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | Object ofConversationData​ | \\​ | 会话的详细信息。​ |\n| detail​ | Object ofResponseDetail​ | 20241210152726467C48D89D6DB2****​ | 响应的详细信息。​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 737999610479815****​ | Conversation ID，即会话的唯一标识。​ |\n| name​ | String​ | 推荐杭州美食​ | 会话的名称，用于标识和区分不同的会话。​ |\n| meta_data​ | JSON Map​ | { \"uuid\": \"newid1234\" }​ | 附加信息，通常用于封装一些业务相关的字段。查看会话信息时，扣子编程会透传此附加信息，查看消息列表时不会返回该附加信息。​自定义键值对，应指定为 Map 对象格式。长度为 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。​ |\n| creator_id​ | String​ | 247877439325****​ | 会话创建者的扣子 UID，用于标识创建该会话的用户。​ |\n| created_at​ | Long​ | 1718289297​ | 会话创建的时间。格式为 10 位的 Unixtime 时间戳，单位为秒。​ |\n| updated_at​ | Long​ | 1718289297​ | 会话的最后更新时间，格式为 10 位的 Unix 时间戳，单位为秒。​ |\n| last_section_id​ | String​ | 749566434761695***​ | 会话中最新的一个上下文片段 ID。​ |\n| connector_id​ | String​ | 1024​ | 该会话在哪个渠道创建。目前支持如下渠道：​API：1024​ChatSDK：999​自定义渠道：自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在账号设置>发布渠道>企业自定义渠道管理页面查看渠道 ID。​ |\n\n- API：1024 ​\n\n- ChatSDK：999 ​\n\n- 自定义渠道：自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在 账号设置 > 发布渠道 > 企业自定义渠道管理 页面查看渠道 ID。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/list_conversations",
      "title": "查看会话列表",
      "content": {
        "sections": [],
        "full_text": "查看会话列表\n\n查看指定智能体的会话列表。\n\n​\n\n说明\n\n调用此 API 之前，应确认当前使用的访问密钥拥有智能体所在工作空间的权限。\n\n​\n\n仅支持通过此 API 查看智能体在 API 或 Chat SDK 渠道产生的会话。\n\n​\n\n仅支持查询本人创建的会话。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/conversations\n\n​\n\n权限\n\n​\n\nlistConversation\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nlistConversation\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n获取指定智能体的会话列表。\n\n​\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n73428668*****\n\n​\n\n智能体 ID，获取方法如下：\n\n​\n\n进入智能体的 开发页面，开发页面 URL 中\n\nbot\n\n参数后的数字就是智能体 ID。例如\n\nhttps://www.coze.cn/space/341****/bot/73428668*****\n\n，智能体 ID 为\n\n73428668*****\n\n。\n\n​\n\npage_num\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n1\n\n​\n\n分页查询时的页码。默认为 1，即返回第一页数据。\n\n​\n\npage_size\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n40\n\n​\n\n每一页的数据条目个数，默认为 50，最大为 50。\n\n​\n\nsort_order\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nASC\n\n​\n\n会话列表的排序方式：\n\n​\n\nASC\n\n：按创建时间升序排序，最早创建的会话排序最前。\n\n​\n\nDESC\n\n：（默认）按创建时间降序排序，最近创建的会话排序最前。\n\n​\n\nconnector_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n999\n\n​\n\n发布渠道 ID，用于筛选指定渠道的会话。仅支持查看以下渠道的会话：\n\n​\n\n（默认）API 渠道，渠道 ID 为 1024。\n\n​\n\nChat SDK 渠道，渠道 ID 为 999。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndata\n\n​\n\nObject of\n\nListConversationData\n\n​\n\n[{\"id\":\"737999610479815****\",\"name\":\"推荐杭州美食\",\"meta_data\":{\"uuid\":\"newid1234\"},\"creator_id\":\"247877439325****\",\"created_at\":1718289297,\"updated_at\":1718289297,\"last_section_id\":\"7495664347616952360\",\"connector_id\":\"1024\"}]\n\n​\n\n会话列表的详细。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{ \"logid\": \"202412345678901234567890\" }\n\n​\n\n响应的详细信息。\n\n​\n\n​\n\nListConversationData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nhas_more\n\n​\n\nBoolean\n\n​\n\nfalse\n\n​\n\n是否还有更多会话未在本次请求中返回。\n\n​\n\ntrue：还有更多未返回的会话。\n\n​\n\nfalse：已返回符合筛选条件的全部会话。\n\n​\n\nconversations\n\n​\n\nArray of\n\nConversationData\n\n​\n\n{\"id\":\"737999610479815****\",\"name\":\"推荐杭州美食\",\"meta_data\":{\"uuid\":\"newid1234\"},\"creator_id\":\"247877439325****\",\"created_at\":1718289297,\"updated_at\":1718289297,\"last_section_id\":\"7495664347616952360\",\"connector_id\":\"1024\"}\n\n​\n\n会话的详细信息。\n\n​\n\n​\n\nConversationData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n737999610479815****\n\n​\n\nConversation ID，即会话的唯一标识。\n\n​\n\nname\n\n​\n\nString\n\n​\n\n推荐杭州美食\n\n​\n\n会话的名称，用于标识和区分不同的会话。\n\n​\n\nmeta_data\n\n​\n\nJSON Map\n\n​\n\n{ \"uuid\": \"newid1234\" }\n\n​\n\n附加信息，通常用于封装一些业务相关的字段。\n\n查看会话信息\n\n时，扣子编程会透传此附加信息，\n\n查看消息列表\n\n时不会返回该附加信息。\n\n​\n\n自定义键值对，应指定为 Map 对象格式。长度为 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。\n\n​\n\ncreated_at\n\n​\n\nLong\n\n​\n\n1718289297\n\n​\n\n会话创建的时间。格式为 10 位的 Unixtime 时间戳，单位为秒。\n\n​\n\nupdated_at\n\n​\n\nLong\n\n​\n\n1718289297\n\n​\n\n会话的最后更新时间，格式为 10 位的 Unix 时间戳，单位为秒。\n\n​\n\nlast_section_id\n\n​\n\nString\n\n​\n\n749566434761695***\n\n​\n\n会话中最新的一个上下文片段 ID。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request GET 'https\n\n:\n\n//api.coze.cn/v1/conversations?bot_id=73428668*****&page_num=1&page_size=40&sort_order=ASC&connector_id=999' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_xitq9LWlowpX3qGCih1lwpAdzvXNqgmpfhpV28HLWFN****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"has_more\"\n\n:\n\nfalse\n\n,\n\n​\n\n\"conversations\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"737999610479815****\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"推荐杭州美食\"\n\n,\n\n​\n\n\"meta_data\"\n\n:\n\n{\n\n​\n\n\"uuid\"\n\n:\n\n\"newid1234\"\n\n​\n\n},\n\n​\n\n\"creator_id\"\n\n:\n\n\"247877439325****\"\n\n,\n\n​\n\n\"connector_id\"\n\n:\n\n\"1024\"\n\n,\n\n​\n\n\"created_at\"\n\n:\n\n1718289297\n\n,\n\n​\n\n\"updated_at\"\n\n:\n\n1718289297\n\n,\n\n​\n\n\"last_section_id\"\n\n:\n\n\"7495664347616952360\"\n\n​\n\n}\n\n​\n\n]\n\n​\n\n},\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n查看会话信息\n\n下一篇\n\n更新会话名称",
        "links": []
      },
      "markdown": "- 调用此 API 之前，应确认当前使用的访问密钥拥有智能体所在工作空间的权限。 ​\n\n- 仅支持通过此 API 查看智能体在 API 或 Chat SDK 渠道产生的会话。 ​\n\n- 仅支持查询本人创建的会话。 ​\n\n| 请求方式​ | GET |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/conversations​ |\n| 权限​ | listConversation​确保调用该接口使用的访问令牌开通了listConversation权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 获取指定智能体的会话列表。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| bot_id​ | String​ | 必选​ | 73428668*****​ | 智能体 ID，获取方法如下：​进入智能体的 开发页面，开发页面 URL 中bot参数后的数字就是智能体 ID。例如https://www.coze.cn/space/341****/bot/73428668*****，智能体 ID 为73428668*****。​ |\n| page_num​ | Integer​ | 可选​ | 1​ | 分页查询时的页码。默认为 1，即返回第一页数据。​ |\n| page_size​ | Integer​ | 可选​ | 40​ | 每一页的数据条目个数，默认为 50，最大为 50。​ |\n| sort_order​ | String​ | 可选​ | ASC​ | 会话列表的排序方式：​ASC：按创建时间升序排序，最早创建的会话排序最前。​DESC：（默认）按创建时间降序排序，最近创建的会话排序最前。​ |\n| connector_id​ | String​ | 可选​ | 999​ | 发布渠道 ID，用于筛选指定渠道的会话。仅支持查看以下渠道的会话：​（默认）API 渠道，渠道 ID 为 1024。​Chat SDK 渠道，渠道 ID 为 999。​ |\n\n- ASC ：按创建时间升序排序，最早创建的会话排序最前。 ​\n\n- DESC ：（默认）按创建时间降序排序，最近创建的会话排序最前。 ​\n\n- （默认）API 渠道，渠道 ID 为 1024。 ​\n\n- Chat SDK 渠道，渠道 ID 为 999。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| data​ | Object ofListConversationData​ | [{\"id\":\"737999610479815****\",\"name\":\"推荐杭州美食\",\"meta_data\":{\"uuid\":\"newid1234\"},\"creator_id\":\"247877439325****\",\"created_at\":1718289297,\"updated_at\":1718289297,\"last_section_id\":\"7495664347616952360\",\"connector_id\":\"1024\"}]​ | 会话列表的详细。​ |\n| detail​ | Object ofResponseDetail​ | { \"logid\": \"202412345678901234567890\" }​ | 响应的详细信息。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| has_more​ | Boolean​ | false​ | 是否还有更多会话未在本次请求中返回。​true：还有更多未返回的会话。​false：已返回符合筛选条件的全部会话。​ |\n| conversations​ | Array ofConversationData​ | {\"id\":\"737999610479815****\",\"name\":\"推荐杭州美食\",\"meta_data\":{\"uuid\":\"newid1234\"},\"creator_id\":\"247877439325****\",\"created_at\":1718289297,\"updated_at\":1718289297,\"last_section_id\":\"7495664347616952360\",\"connector_id\":\"1024\"}​ | 会话的详细信息。​ |\n\n- true：还有更多未返回的会话。 ​\n\n- false：已返回符合筛选条件的全部会话。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 737999610479815****​ | Conversation ID，即会话的唯一标识。​ |\n| name​ | String​ | 推荐杭州美食​ | 会话的名称，用于标识和区分不同的会话。​ |\n| meta_data​ | JSON Map​ | { \"uuid\": \"newid1234\" }​ | 附加信息，通常用于封装一些业务相关的字段。查看会话信息时，扣子编程会透传此附加信息，查看消息列表时不会返回该附加信息。​自定义键值对，应指定为 Map 对象格式。长度为 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。​ |\n| created_at​ | Long​ | 1718289297​ | 会话创建的时间。格式为 10 位的 Unixtime 时间戳，单位为秒。​ |\n| updated_at​ | Long​ | 1718289297​ | 会话的最后更新时间，格式为 10 位的 Unix 时间戳，单位为秒。​ |\n| last_section_id​ | String​ | 749566434761695***​ | 会话中最新的一个上下文片段 ID。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/edit_conversation",
      "title": "更新会话名称",
      "content": {
        "sections": [],
        "full_text": "更新会话名称\n\n会话创建者可以更新指定会话的会话名，以便更好地识别和管理会话。\n\n​\n\n在创建会话时，扣子编程会默认将用户发送的第一个消息内容作为会话名称。用户也可以根据会话的实际内容或主题对会话名称进行更新，从而更直观地区分不同的会话，提升管理效率。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPUT\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/conversations/:conversation_id\n\n​\n\n​\n\n权限\n\n​\n\neditConversation\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\neditConversation\n\n权限，详细信息参考\n\n准备工作\n\n。\n\n​\n\n接口说明\n\n​\n\n更新指定会话的会话名称。\n\n​\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nconversation_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n737989918257****\n\n​\n\n待更新的会话 ID。你可以在\n\n发起对话\n\n接口的 Response 中通过\n\nconversation_id\n\n字段获取会话 ID。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nname\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n推荐杭州美食\n\n​\n\n更新后的会话名称，最多支持 100 个字符。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nObject of\n\nConversationData\n\n​\n\n{ \"creator_id\": \"14264794847***\", \"connector_id\": \"1024\", \"created_at\": 1749439208, \"id\": \"7513776737285***\", \"meta_data\": {}, \"updated_at\": 1753326053, \"last_section_id\": \"7513776737285570569\", \"name\": \"推荐杭州美食\" }\n\n​\n\n包含会话详细信息的对象。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\n​\n\nConversationData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n737999610479815****\n\n​\n\nConversation ID，即会话的唯一标识。\n\n​\n\nname\n\n​\n\nString\n\n​\n\n推荐杭州美食\n\n​\n\n会话的名称，用于标识和区分不同的会话。\n\n​\n\nmeta_data\n\n​\n\nJSON Map\n\n​\n\n{ \"uuid\": \"newid1234\" }\n\n​\n\n附加信息，通常用于封装一些业务相关的字段。\n\n查看会话信息\n\n时，扣子编程会透传此附加信息，\n\n查看消息列表\n\n时不会返回该附加信息。\n\n​\n\n自定义键值对，应指定为 Map 对象格式。长度为 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。\n\n​\n\ncreator_id\n\n​\n\nString\n\n​\n\n247877439325****\n\n​\n\n会话创建者的扣子 UID，用于标识创建该会话的用户。\n\n​\n\ncreated_at\n\n​\n\nLong\n\n​\n\n1718289297\n\n​\n\n会话创建的时间。格式为 10 位的 Unixtime 时间戳，单位为秒。\n\n​\n\nupdated_at\n\n​\n\nLong\n\n​\n\n1718289297\n\n​\n\n会话的最后更新时间，格式为 10 位的 Unix 时间戳，单位为秒。\n\n​\n\nlast_section_id\n\n​\n\nString\n\n​\n\n749566434761695***\n\n​\n\n会话中最新的一个上下文片段 ID。\n\n​\n\nconnector_id\n\n​\n\nString\n\n​\n\n1024\n\n​\n\n该会话在哪个渠道创建。目前支持如下渠道：\n\n​\n\nAPI：1024\n\n​\n\nChatSDK：999\n\n​\n\n自定义渠道：自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在\n\n账号设置\n\n>\n\n发布渠道\n\n>\n\n企业自定义渠道管理\n\n页面查看渠道 ID。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request PUT 'https\n\n:\n\n//api.coze.cn/v1/conversations/737999610479815****' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_xitq9LWlowpX3qGCih1lwpAdzvXNqgmpfhpV28HLWFypY37xR5Uaj2GioN****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"name\"\n\n:\n\n\"推荐杭州美食\"\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"202507311334280ADC900DF8FCF***\"\n\n​\n\n},\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"creator_id\"\n\n:\n\n\"14264794847***\"\n\n,\n\n​\n\n\"connector_id\"\n\n:\n\n\"1024\"\n\n,\n\n​\n\n\"created_at\"\n\n:\n\n1749439208\n\n,\n\n​\n\n\"id\"\n\n:\n\n\"7513776737285***\"\n\n,\n\n​\n\n\"meta_data\"\n\n:\n\n{},\n\n​\n\n\"updated_at\"\n\n:\n\n1753326053\n\n,\n\n​\n\n\"last_section_id\"\n\n:\n\n\"751377673728557***\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"推荐杭州美食\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n查看会话列表\n\n下一篇\n\n删除会话",
        "links": []
      },
      "markdown": "| 请求方式​ | PUT​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/conversations/:conversation_id​​ |\n| 权限​ | editConversation​确保调用该接口使用的访问令牌开通了editConversation权限，详细信息参考准备工作。​ |\n| 接口说明​ | 更新指定会话的会话名称。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| conversation_id​ | String​ | 必选​ | 737989918257****​ | 待更新的会话 ID。你可以在发起对话接口的 Response 中通过conversation_id字段获取会话 ID。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| name​ | String​ | 必选​ | 推荐杭州美食​ | 更新后的会话名称，最多支持 100 个字符。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | Object ofConversationData​ | { \"creator_id\": \"14264794847***\", \"connector_id\": \"1024\", \"created_at\": 1749439208, \"id\": \"7513776737285***\", \"meta_data\": {}, \"updated_at\": 1753326053, \"last_section_id\": \"7513776737285570569\", \"name\": \"推荐杭州美食\" }​ | 包含会话详细信息的对象。​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 737999610479815****​ | Conversation ID，即会话的唯一标识。​ |\n| name​ | String​ | 推荐杭州美食​ | 会话的名称，用于标识和区分不同的会话。​ |\n| meta_data​ | JSON Map​ | { \"uuid\": \"newid1234\" }​ | 附加信息，通常用于封装一些业务相关的字段。查看会话信息时，扣子编程会透传此附加信息，查看消息列表时不会返回该附加信息。​自定义键值对，应指定为 Map 对象格式。长度为 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。​ |\n| creator_id​ | String​ | 247877439325****​ | 会话创建者的扣子 UID，用于标识创建该会话的用户。​ |\n| created_at​ | Long​ | 1718289297​ | 会话创建的时间。格式为 10 位的 Unixtime 时间戳，单位为秒。​ |\n| updated_at​ | Long​ | 1718289297​ | 会话的最后更新时间，格式为 10 位的 Unix 时间戳，单位为秒。​ |\n| last_section_id​ | String​ | 749566434761695***​ | 会话中最新的一个上下文片段 ID。​ |\n| connector_id​ | String​ | 1024​ | 该会话在哪个渠道创建。目前支持如下渠道：​API：1024​ChatSDK：999​自定义渠道：自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在账号设置>发布渠道>企业自定义渠道管理页面查看渠道 ID。​ |\n\n- API：1024 ​\n\n- ChatSDK：999 ​\n\n- 自定义渠道：自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在 账号设置 > 发布渠道 > 企业自定义渠道管理 页面查看渠道 ID。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/delete_conversation",
      "title": "删除会话",
      "content": {
        "sections": [],
        "full_text": "删除会话\n\n删除指定的会话。\n\n​\n\n仅会话创建者可以删除会话。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nDELETE\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/conversations/:conversation_id\n\n​\n\n​\n\n权限\n\n​\n\neditConversation\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\neditConversation\n\n权限，详细信息参考\n\n准备工作\n\n。\n\n​\n\n接口说明\n\n​\n\n删除指定的会话。\n\n​\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $AccessToken\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nconversation_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n737989918257****\n\n​\n\n待删除的会话 ID。你可以在\n\n发起对话\n\n接口的 Response 中通过 conversation_id 字段获取会话 ID。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request DELETE 'https\n\n:\n\n//api.coze.cn/v1/conversations/737999610479815****' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_xitq9LWlowpX3qGCih1lwpAdzvXNqgmpfhpV28HLWFypY37xR5Uaj2GioN****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n更新会话名称\n\n下一篇\n\n清除上下文",
        "links": []
      },
      "markdown": "| 请求方式​ | DELETE​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/conversations/:conversation_id​​ |\n| 权限​ | editConversation​确保调用该接口使用的访问令牌开通了editConversation权限，详细信息参考准备工作。​ |\n| 接口说明​ | 删除指定的会话。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $AccessToken​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| conversation_id​ | String​ | 必选​ | 737989918257****​ | 待删除的会话 ID。你可以在发起对话接口的 Response 中通过 conversation_id 字段获取会话 ID。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/clear_conversation_context",
      "title": "清除上下文",
      "content": {
        "sections": [],
        "full_text": "清除上下文\n\n清除指定会话中的上下文。\n\n​\n\n接口说明\n\n​\n\n在智能体对话场景中，上下文指模型在处理当前输入时所能参考的历史消息、对话记录，它决定了模型对当前任务的理解深度和连贯性，直接影响输出结果的准确性和相关性。多轮对话中，如果需要开启新的话题，可以调用此 API 清除上下文。清除上下文后，对话中的历史消息不会作为上下文被输入给模型，后续对话不再受之前历史消息的影响，避免信息干扰，确保对话的准确性和连贯性。\n\n​\n\n会话中的消息存储在上下文段落（section）中，每次调用此 API 清除上下文时，系统会自动删除旧的上下文段落，并创建新的上下文段落用于存储新的消息。再次发起对话时，新分区中的消息会作为新的上下文传递给模型参考。\n\n​\n\n说明\n\n清除上下文 API 只是清空模型可见的消息历史，不会实际删除会话中的消息，通过\n\n查看消息列表\n\n或\n\n查看消息详情\n\n等 API 仍能查看到消息内容。\n\n​\n\n仅支持清除本人创建的会话的上下文。\n\n​\n\n会话、对话、消息和上下文段落的术语解释请参见\n\n基础概念\n\n。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/conversations/:conversation_id/clear\n\n​\n\n权限\n\n​\n\neditConversation\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\neditConversation\n\n权限，详细信息参考\n\n准备工作\n\n。\n\n​\n\n接口说明\n\n​\n\n清除指定会话中的上下文。\n\n​\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nconversation_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n737989918257****\n\n​\n\n待清除上下文的会话 ID。你可以在\n\n发起对话\n\n接口的 Response 中通过 conversation_id 字段获取会话 ID。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过\n\nmsg\n\n字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndata\n\n​\n\nObject of\n\nSection\n\n​\n\n{ \"id\": \"75331946251175***\", \"conversation_id\": \"737989918257****\" }\n\n​\n\n上下文段落（section）的详细信息。\n\n​\n\nSection 是一个独立的上下文段落，用于分隔不同的对话阶段或主题。Section 中包括上下文消息，当用户清除上下文时，系统会创建一个新的 Section，从而确保新的对话不受历史消息的影响。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n返回的详情信息，包含本次请求的日志 ID。如果遇到异常报错场景，可以根据此日志 ID 联系技术支持获取帮助。\n\n​\n\n​\n\nSection\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n75331946251175***\n\n​\n\n新的 Session ID，即清除上下文后新创建的上下文段落（section）的 ID。\n\n​\n\n每个上下文段落对应一批独立的上下文消息。每次清除上下文时，系统会新建一个上下文段落用于存储新的上下文消息。\n\n​\n\nconversation_id\n\n​\n\nString\n\n​\n\n737999610479815****\n\n​\n\nConversation ID，即会话的唯一标识。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/conversations/737989918257****/clear' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_xitq9LWlowpX3qGCih1lwpAdzvXNqgmpfhpV28HLWFypY37xR5Uaj2GioN****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"75331946251175***\"\n\n,\n\n​\n\n\"conversation_id\"\n\n:\n\n\"737989918257****\"\n\n​\n\n},\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"202411123456789****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n删除会话\n\n下一篇\n\n创建消息",
        "links": []
      },
      "markdown": "- 清除上下文 API 只是清空模型可见的消息历史，不会实际删除会话中的消息，通过 查看消息列表 或 查看消息详情 等 API 仍能查看到消息内容。 ​\n\n- 仅支持清除本人创建的会话的上下文。 ​\n\n- 会话、对话、消息和上下文段落的术语解释请参见 基础概念 。 ​\n\n| 请求方式​ | POST |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/conversations/:conversation_id/clear​ |\n| 权限​ | editConversation​确保调用该接口使用的访问令牌开通了editConversation权限，详细信息参考准备工作。​ |\n| 接口说明​ | 清除指定会话中的上下文。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| conversation_id​ | String​ | 必选​ | 737989918257****​ | 待清除上下文的会话 ID。你可以在发起对话接口的 Response 中通过 conversation_id 字段获取会话 ID。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过msg字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| data​ | Object ofSection​ | { \"id\": \"75331946251175***\", \"conversation_id\": \"737989918257****\" }​ | 上下文段落（section）的详细信息。​Section 是一个独立的上下文段落，用于分隔不同的对话阶段或主题。Section 中包括上下文消息，当用户清除上下文时，系统会创建一个新的 Section，从而确保新的对话不受历史消息的影响。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 返回的详情信息，包含本次请求的日志 ID。如果遇到异常报错场景，可以根据此日志 ID 联系技术支持获取帮助。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 75331946251175***​ | 新的 Session ID，即清除上下文后新创建的上下文段落（section）的 ID。​每个上下文段落对应一批独立的上下文消息。每次清除上下文时，系统会新建一个上下文段落用于存储新的上下文消息。​ |\n| conversation_id​ | String​ | 737999610479815****​ | Conversation ID，即会话的唯一标识。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/create_message",
      "title": "创建消息",
      "content": {
        "sections": [],
        "full_text": "创建消息\n\n创建一条消息，并将其添加到指定的会话中。\n\n​\n\n会话、对话和消息的概念说明，可参考\n\n基础概念\n\n。\n\n​\n\n说明\n\n消息在服务端的保存时长为 180 天，到期后自动删除。你也可以调用\n\n删除消息\n\n接口，手动从会话中删除消息。\n\n​\n\n你可以通过\n\n查看消息列表\n\n查询指定会话（conversation）中的所有消息。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/conversation/message/create\n\n​\n\n权限\n\n​\n\ncreateMessage\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\ncreateMessage\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n创建一条消息，并将其添加到指定的会话中。\n\n​\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $AccessToken\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nconversation_id\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\n737363834493434****\n\n​\n\nConversation ID，即会话的唯一标识。你可以在\n\n发起对话\n\n接口 Response 中查看 conversation_id 字段。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nrole\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nuser\n\n​\n\n发送这条消息的实体。取值：\n\n​\n\nuser\n\n：代表该条消息内容是用户发送的。\n\n​\n\nassistant\n\n：代表该条消息内容是 Bot 发送的。\n\n​\n\ncontent\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n早上好，今天星期几\n\n​\n\n消息的内容，支持纯文本、多模态（文本、图片、文件混合输入）、卡片等多种类型的内容。\n\n​\n\ncontent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\ntext\n\n​\n\n消息内容的类型，支持设置为：\n\n​\n\ntext：文本\n\n​\n\nobject_string：多模态内容，即文本和文件的组合、文本和图片的组合\n\n​\n\nmeta_data\n\n​\n\nJSON Map\n\n​\n\n可选\n\n​\n\n{\"customKey1\":\"customValue1\",\"customKey2\":\"customValue2\"}\n\n​\n\n创建消息时的附加信息，用于封装业务相关的自定义键值对。获取消息时也会返回此附加信息。支持最多 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nObject of\n\nOpenMessageApi\n\n​\n\n{ \"role\": \"user\", \"content\": \"[{\\\"type\\\":\\\"text\\\",\\\"text\\\":\\\"帮我看看这个图片里有什么内容？\\\"},{\\\"type\\\":\\\"image\\\",\\\"file_id\\\":\\\"7380331280292495370\\\"}]\" \"content_type\": \"object_string\" }\n\n​\n\n消息的详情。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{ \"logid\": \"20250106172024B5F607030EFFAD653960\" }\n\n​\n\n响应详情。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\n​\n\nOpenMessageApi\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n738130009748252****\n\n​\n\nMessage ID，即消息的唯一标识。\n\n​\n\nconversation_id\n\n​\n\nString\n\n​\n\n737999610479815****\n\n​\n\n此消息所在的会话 ID。\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n747363834493437****\n\n​\n\n编写此消息的智能体 ID。此参数仅在对话产生的消息中返回。\n\n​\n\nchat_id\n\n​\n\nString\n\n​\n\n757363834493437****\n\n​\n\nChat ID。此参数仅在对话产生的消息中返回。\n\n​\n\n不同的对话中，系统会生成新的\n\nchat_id\n\n。同一个用户在第一次对话和第二次对话时，\n\nchat_id\n\n不一样。\n\n​\n\nmeta_data\n\n​\n\nJSON Map\n\n​\n\n{\"source\":\"mobile_app\",\"location\":\"Beijing\",\"custom_flag\":\"high_priority\"}\n\n​\n\n创建消息时的附加信息，以键值对形式存储，获取消息时会原样返回。可用于存储与业务相关的自定义数据。\n\n​\n\nrole\n\n​\n\nString\n\n​\n\nuser\n\n​\n\n发送这条消息的实体。取值：\n\n​\n\nuser\n\n：代表该条消息内容是用户发送的。\n\n​\n\nassistant\n\n：代表该条消息内容是 Bot 发送的。\n\n​\n\ncontent\n\n​\n\nString\n\n​\n\n早上好，今天星期几？\n\n​\n\n消息的内容，支持纯文本、多模态（文本、图片、文件混合输入）、卡片等多种类型的内容。\n\n​\n\ncontent_type\n\n​\n\nString\n\n​\n\ntext\n\n​\n\n消息内容的类型，取值包括：\n\n​\n\ntext：文本。\n\n​\n\nobject_string：多模态内容，即文本和文件的组合、文本和图片的组合。\n\n​\n\ncard：卡片。此枚举值仅在接口响应中出现，不支持作为入参。\n\n​\n\ncreated_at\n\n​\n\nLong\n\n​\n\n1718592898\n\n​\n\n消息的创建时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。\n\n​\n\nupdated_at\n\n​\n\nLong\n\n​\n\n1718592898\n\n​\n\n消息的更新时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。\n\n​\n\ntype\n\n​\n\nString\n\n​\n\nquestion\n\n​\n\n消息类型。\n\n​\n\nquestion\n\n：用户输入内容。\n\n​\n\nanswer\n\n：智能体返回给用户的消息内容，支持增量返回。如果工作流绑定了 messge 节点，可能会存在多 answer 场景，此时可以用流式返回的结束标志来判断所有 answer 完成。\n\n​\n\nfunction_call\n\n：智能体对话过程中调用函数（function call）的中间结果。\n\n​\n\ntool_response\n\n：调用工具 （function call）后返回的结果。\n\n​\n\nfollow_up\n\n：如果在 Bot 上配置打开了用户问题建议开关，则会返回推荐问题相关的回复内容。\n\n​\n\nverbose\n\n：多 answer 场景下，服务端会返回一个 verbose 包，对应的 content 为 JSON 格式，\n\ncontent.msg_type =generate_answer_finish\n\n代表全部 answer 回复完成。\n\n​\n\nTip\n\n仅发起对话（v3）接口支持将此参数作为入参，且：\n\n​\n\n如果 autoSaveHistory=true，type 支持设置为 question 或 answer。\n\n​\n\n如果 autoSaveHistory=false，type 支持设置为 question、answer、function_call、tool_output、tool_response。\n\n​\n\n其中，type=question 只能和 role=user 对应，即仅用户角色可以且只能发起 question 类型的消息。详细说明可参考\n\n消息 type 说明\n\n。\n\n​\n\n​\n\nsection_id\n\n​\n\nString\n\n​\n\n757363834493437****\n\n​\n\n上下文片段 ID。每次清除上下文都会生成一个新的 section_id。\n\n​\n\nreasoning_content\n\n​\n\nString\n\n​\n\n好的，我现在需要给一个13岁的大学生提供学习建议。首先，我得考虑用户的情况……\n\n​\n\n模型的思维链（CoT），展示模型如何将复杂问题逐步分解为多个简单步骤并推导出最终答案。仅当模型支持深度思考、且智能体开启了深度思考时返回该字段，当前支持深度思考的模型请参考\n\n模型能力差异\n\n。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n创建文本消息\n\n创建图文消息，图片为在线 URL\n\n创建图文消息，图片为已上传的图片文件\n\n创建文本和文件消息，文件为在线 URL\n\n创建文本和文件消息，文件为已上传的文件\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/conversation/message/create?conversation_id=737363834493434****' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_qad2rHYNqKnCmRYZW4PhVRibaS***' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"role\"\n\n:\n\n\"user\"\n\n,\n\n​\n\n\"content\"\n\n:\n\n\"早上好，今天星期几？\"\n\n​\n\n\"content_type\"\n\n:\n\n\"text\"\n\n​\n\n}\n\n'\n\n​\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"bot_id\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"chat_id\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"content\"\n\n:\n\n\"早上好，今天星期几？\"\n\n,\n\n​\n\n\"content_type\"\n\n:\n\n\"text\"\n\n,\n\n​\n\n\"conversation_id\"\n\n:\n\n\"737999610479815****\"\n\n,\n\n​\n\n\"created_at\"\n\n:\n\n1718592898\n\n,\n\n​\n\n\"id\"\n\n:\n\n\"738130009748252****\"\n\n,\n\n​\n\n\"meta_data\"\n\n:\n\n{},\n\n​\n\n\"role\"\n\n:\n\n\"user\"\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"updated_at\"\n\n:\n\n\"1718592898\"\n\n​\n\n},\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n清除上下文\n\n下一篇\n\n查看消息列表",
        "links": []
      },
      "markdown": "| 请求方式​ | POST |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/conversation/message/create​ |\n| 权限​ | createMessage​确保调用该接口使用的访问令牌开通了createMessage权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 创建一条消息，并将其添加到指定的会话中。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $AccessToken​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| conversation_id​ | Integer​ | 必选​ | 737363834493434****​ | Conversation ID，即会话的唯一标识。你可以在发起对话接口 Response 中查看 conversation_id 字段。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| role​ | String​ | 必选​ | user​ | 发送这条消息的实体。取值：​user：代表该条消息内容是用户发送的。​assistant：代表该条消息内容是 Bot 发送的。​ |\n| content​ | String​ | 必选​ | 早上好，今天星期几​ | 消息的内容，支持纯文本、多模态（文本、图片、文件混合输入）、卡片等多种类型的内容。​ |\n| content_type​ | String​ | 必选​ | text​ | 消息内容的类型，支持设置为：​text：文本​object_string：多模态内容，即文本和文件的组合、文本和图片的组合​ |\n| meta_data​ | JSON Map​ | 可选​ | {\"customKey1\":\"customValue1\",\"customKey2\":\"customValue2\"}​ | 创建消息时的附加信息，用于封装业务相关的自定义键值对。获取消息时也会返回此附加信息。支持最多 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。​ |\n\n- user ：代表该条消息内容是用户发送的。 ​\n\n- assistant ：代表该条消息内容是 Bot 发送的。 ​\n\n- text：文本 ​\n\n- object_string：多模态内容，即文本和文件的组合、文本和图片的组合 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | Object ofOpenMessageApi​ | { \"role\": \"user\", \"content\": \"[{\\\"type\\\":\\\"text\\\",\\\"text\\\":\\\"帮我看看这个图片里有什么内容？\\\"},{\\\"type\\\":\\\"image\\\",\\\"file_id\\\":\\\"7380331280292495370\\\"}]\" \"content_type\": \"object_string\" }​ | 消息的详情。​ |\n| detail​ | Object ofResponseDetail​ | { \"logid\": \"20250106172024B5F607030EFFAD653960\" }​ | 响应详情。​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 738130009748252****​ | Message ID，即消息的唯一标识。​ |\n| conversation_id​ | String​ | 737999610479815****​ | 此消息所在的会话 ID。​ |\n| bot_id​ | String​ | 747363834493437****​ | 编写此消息的智能体 ID。此参数仅在对话产生的消息中返回。​ |\n| chat_id​ | String​ | 757363834493437****​ | Chat ID。此参数仅在对话产生的消息中返回。​不同的对话中，系统会生成新的chat_id。同一个用户在第一次对话和第二次对话时，chat_id不一样。​ |\n| meta_data​ | JSON Map​ | {\"source\":\"mobile_app\",\"location\":\"Beijing\",\"custom_flag\":\"high_priority\"}​ | 创建消息时的附加信息，以键值对形式存储，获取消息时会原样返回。可用于存储与业务相关的自定义数据。​ |\n| role​ | String​ | user​ | 发送这条消息的实体。取值：​user：代表该条消息内容是用户发送的。​assistant：代表该条消息内容是 Bot 发送的。​ |\n| content​ | String​ | 早上好，今天星期几？​ | 消息的内容，支持纯文本、多模态（文本、图片、文件混合输入）、卡片等多种类型的内容。​ |\n| content_type​ | String​ | text​ | 消息内容的类型，取值包括：​text：文本。​object_string：多模态内容，即文本和文件的组合、文本和图片的组合。​card：卡片。此枚举值仅在接口响应中出现，不支持作为入参。​ |\n| created_at​ | Long​ | 1718592898​ | 消息的创建时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。​ |\n| updated_at​ | Long​ | 1718592898​ | 消息的更新时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。​ |\n| type​ | String​ | question​ | 消息类型。​question：用户输入内容。​answer：智能体返回给用户的消息内容，支持增量返回。如果工作流绑定了 messge 节点，可能会存在多 answer 场景，此时可以用流式返回的结束标志来判断所有 answer 完成。​function_call：智能体对话过程中调用函数（function call）的中间结果。​tool_response：调用工具 （function call）后返回的结果。​follow_up：如果在 Bot 上配置打开了用户问题建议开关，则会返回推荐问题相关的回复内容。​verbose：多 answer 场景下，服务端会返回一个 verbose 包，对应的 content 为 JSON 格式，content.msg_type =generate_answer_finish代表全部 answer 回复完成。​Tip仅发起对话（v3）接口支持将此参数作为入参，且：​如果 autoSaveHistory=true，type 支持设置为 question 或 answer。​如果 autoSaveHistory=false，type 支持设置为 question、answer、function_call、tool_output、tool_response。​其中，type=question 只能和 role=user 对应，即仅用户角色可以且只能发起 question 类型的消息。详细说明可参考消息 type 说明。​​ |\n| section_id​ | String​ | 757363834493437****​ | 上下文片段 ID。每次清除上下文都会生成一个新的 section_id。​ |\n| reasoning_content​ | String​ | 好的，我现在需要给一个13岁的大学生提供学习建议。首先，我得考虑用户的情况……​ | 模型的思维链（CoT），展示模型如何将复杂问题逐步分解为多个简单步骤并推导出最终答案。仅当模型支持深度思考、且智能体开启了深度思考时返回该字段，当前支持深度思考的模型请参考模型能力差异。​ |\n\n- user ：代表该条消息内容是用户发送的。 ​\n\n- assistant ：代表该条消息内容是 Bot 发送的。 ​\n\n- text：文本。 ​\n\n- object_string：多模态内容，即文本和文件的组合、文本和图片的组合。 ​\n\n- card：卡片。此枚举值仅在接口响应中出现，不支持作为入参。 ​\n\n- question ：用户输入内容。 ​\n\n- answer ：智能体返回给用户的消息内容，支持增量返回。如果工作流绑定了 messge 节点，可能会存在多 answer 场景，此时可以用流式返回的结束标志来判断所有 answer 完成。 ​\n\n- function_call ：智能体对话过程中调用函数（function call）的中间结果。 ​\n\n- tool_response ：调用工具 （function call）后返回的结果。 ​\n\n- follow_up ：如果在 Bot 上配置打开了用户问题建议开关，则会返回推荐问题相关的回复内容。 ​\n\n- verbose ：多 answer 场景下，服务端会返回一个 verbose 包，对应的 content 为 JSON 格式， content.msg_type =generate_answer_finish 代表全部 answer 回复完成。 ​\n\n- 如果 autoSaveHistory=true，type 支持设置为 question 或 answer。 ​\n\n- 如果 autoSaveHistory=false，type 支持设置为 question、answer、function_call、tool_output、tool_response。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/list_message",
      "title": "查看消息列表",
      "content": {
        "sections": [],
        "full_text": "查看消息列表\n\n查看指定会话的消息列表。\n\n​\n\n查看消息列表\n\nAPI 与\n\n查看对话消息详情\n\nAPI 的区别在于：\n\n​\n\n查看消息列表\n\nAPI 用于查询指定会话（conversation）中的消息记录，不仅包括开发者在会话中手动插入的每一条消息和用户发送的 Query，也包括调用\n\n发起对话\n\nAPI 得到的 type=answer 的智能体回复，但不包括 type=function_call、tool_response 和 follow-up 类型的对话中间态消息。\n\n​\n\n查看对话消息详情\n\nAPI 通常用于非流式对话场景中，查看某次对话（chat）中 type=answer 的智能体回复及 type=function_call、tool_response 和 follow-up 类型的对话中间态消息。不包括用户发送的 Query。\n\n​\n\n说明\n\n消息在服务端的保存时长为180天，期满后，消息将自动从会话的消息记录中删除。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/conversation/message/list\n\n​\n\n权限\n\n​\n\nchat\n\n、\n\nlistMessage\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nchat\n\n和\n\nlistMessage\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n调用接口查看指定会话的消息列表。\n\n​\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $AccessToken\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nconversation_id\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\n737363834493434****\n\n​\n\nConversation ID，即会话的唯一标识。可以在\n\n发起对话\n\n接口 Response 中查看 conversation_id 字段。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\norder\n\n​\n\nString\n\n​\n\n可选\n\n​\n\ndesc\n\n​\n\n消息列表的排序方式。\n\n​\n\ndesc：（默认）按创建时间降序排序，最新的消息排序最前。\n\n​\n\nasc：按创建时间升序排序，最早的消息排序最前。\n\n​\n\nchat_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n737999610479815****\n\n​\n\n筛选指定 Chat ID 中的消息列表。\n\n发起对话\n\n接口 Response 中 Chat 事件的\n\ndata.id\n\n字段即为 Chat ID。\n\n​\n\nbefore_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n737363834493437****\n\n​\n\n查看指定位置之前的消息。\n\n​\n\n默认为 0，表示不指定位置。如需向前翻页，则指定为返回结果中的 first_id。\n\n​\n\nafter_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n737363834493437****\n\n​\n\n查看指定位置之后的消息。\n\n​\n\n默认为 0，表示不指定位置。如需向后翻页，则指定为返回结果中的 last_id。\n\n​\n\nlimit\n\n​\n\nLong\n\n​\n\n可选\n\n​\n\n30\n\n​\n\n每次查询返回的数据量。默认为 50，取值范围为 1~50。\n\n​\n\ninclude_middle_message\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n​\n\n是否包含中间消息\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nArray of\n\nOpenMessageApi\n\n​\n\n[ { \"bot_id\": \"\", \"chat_id\": \"\", \"content\": \"你的名字叫什么\", \"content_type\": \"text\", \"conversation_id\": \"737363834493434****\", \"created_at\": 1716809829, \"id\": \"737363834493437****\", \"meta_data\": {}, \"role\": \"user\", \"type\": \"\", \"updated_at\": \"1716809829\" }]\n\n​\n\n消息详情。\n\n​\n\nhas_more\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n是否已返回全部消息。\n\n​\n\ntrue：未返回全部消息，可再次调用此接口查看其他分页。\n\n​\n\nfalse：已返回全部消息。\n\n​\n\nfirst_id\n\n​\n\nString\n\n​\n\n737363834493437****\n\n​\n\n返回的消息列表中，第一条消息的 Message ID。\n\n​\n\nlast_id\n\n​\n\nString\n\n​\n\n737363834493440****\n\n​\n\n返回的消息列表中，最后一条消息的 Message ID。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{ \"logid\": \"20250106172024B5F607030EFFAD653960\" }\n\n​\n\n响应详情信息。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\n​\n\nOpenMessageApi\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n738130009748252****\n\n​\n\nMessage ID，即消息的唯一标识。\n\n​\n\nconversation_id\n\n​\n\nString\n\n​\n\n737999610479815****\n\n​\n\n此消息所在的会话 ID。\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n747363834493437****\n\n​\n\n编写此消息的智能体 ID。此参数仅在对话产生的消息中返回。\n\n​\n\nchat_id\n\n​\n\nString\n\n​\n\n757363834493437****\n\n​\n\nChat ID。此参数仅在对话产生的消息中返回。\n\n​\n\n不同的对话中，系统会生成新的\n\nchat_id\n\n。同一个用户在第一次对话和第二次对话时，\n\nchat_id\n\n不一样。\n\n​\n\nmeta_data\n\n​\n\nJSON Map\n\n​\n\n{\"source\":\"mobile_app\",\"location\":\"Beijing\",\"custom_flag\":\"high_priority\"}\n\n​\n\n创建消息时的附加信息，以键值对形式存储，获取消息时会原样返回。可用于存储与业务相关的自定义数据。\n\n​\n\nrole\n\n​\n\nString\n\n​\n\nuser\n\n​\n\n发送这条消息的实体。取值：\n\n​\n\nuser\n\n：代表该条消息内容是用户发送的。\n\n​\n\nassistant\n\n：代表该条消息内容是 Bot 发送的。\n\n​\n\ncontent\n\n​\n\nString\n\n​\n\n早上好，今天星期几？\n\n​\n\n消息的内容，支持纯文本、多模态（文本、图片、文件混合输入）、卡片等多种类型的内容。\n\n​\n\ncontent_type\n\n​\n\nString\n\n​\n\ntext\n\n​\n\n消息内容的类型，取值包括：\n\n​\n\ntext：文本。\n\n​\n\nobject_string：多模态内容，即文本和文件的组合、文本和图片的组合。\n\n​\n\ncard：卡片。此枚举值仅在接口响应中出现，不支持作为入参。\n\n​\n\ncreated_at\n\n​\n\nLong\n\n​\n\n1718592898\n\n​\n\n消息的创建时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。\n\n​\n\nupdated_at\n\n​\n\nLong\n\n​\n\n1718592898\n\n​\n\n消息的更新时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。\n\n​\n\ntype\n\n​\n\nString\n\n​\n\nquestion\n\n​\n\n消息类型。\n\n​\n\nquestion\n\n：用户输入内容。\n\n​\n\nanswer\n\n：智能体返回给用户的消息内容，支持增量返回。如果工作流绑定了 messge 节点，可能会存在多 answer 场景，此时可以用流式返回的结束标志来判断所有 answer 完成。\n\n​\n\nfunction_call\n\n：智能体对话过程中调用函数（function call）的中间结果。\n\n​\n\ntool_response\n\n：调用工具 （function call）后返回的结果。\n\n​\n\nfollow_up\n\n：如果在 Bot 上配置打开了用户问题建议开关，则会返回推荐问题相关的回复内容。\n\n​\n\nverbose\n\n：多 answer 场景下，服务端会返回一个 verbose 包，对应的 content 为 JSON 格式，\n\ncontent.msg_type =generate_answer_finish\n\n代表全部 answer 回复完成。\n\n​\n\nTip\n\n仅发起对话（v3）接口支持将此参数作为入参，且：\n\n​\n\n如果 autoSaveHistory=true，type 支持设置为 question 或 answer。\n\n​\n\n如果 autoSaveHistory=false，type 支持设置为 question、answer、function_call、tool_output、tool_response。\n\n​\n\n其中，type=question 只能和 role=user 对应，即仅用户角色可以且只能发起 question 类型的消息。详细说明可参考\n\n消息 type 说明\n\n。\n\n​\n\n​\n\nsection_id\n\n​\n\nString\n\n​\n\n757363834493437****\n\n​\n\n上下文片段 ID。每次清除上下文都会生成一个新的 section_id。\n\n​\n\nreasoning_content\n\n​\n\nString\n\n​\n\n好的，我现在需要给一个13岁的大学生提供学习建议。首先，我得考虑用户的情况……\n\n​\n\n模型的思维链（CoT），展示模型如何将复杂问题逐步分解为多个简单步骤并推导出最终答案。仅当模型支持深度思考、且智能体开启了深度思考时返回该字段，当前支持深度思考的模型请参考\n\n模型能力差异\n\n。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/conversation/message/list?conversation_id=737363834493434****' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_xitq9LWlowpX3qGCih1lwpAdzvXNqgmpfhpV28HLWFypY37xR5Uaj2GioN****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"order\"\n\n:\n\n\"desc\"\n\n,\n\n​\n\n\"chat_id\"\n\n:\n\n\"737999610479815****\"\n\n,\n\n​\n\n\"before_id\"\n\n:\n\n\"737363834493437****\"\n\n,\n\n​\n\n\"after_id\"\n\n:\n\n\"737363834493437****\"\n\n,\n\n​\n\n\"limit\"\n\n:\n\n30\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"data\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"bot_id\"\n\n:\n\n\"737363834493434****\"\n\n,\n\n​\n\n\"chat_id\"\n\n:\n\n\"747363834493434****\"\n\n,\n\n​\n\n\"content\"\n\n:\n\n\"你的名字叫什么\"\n\n,\n\n​\n\n\"content_type\"\n\n:\n\n\"text\"\n\n,\n\n​\n\n\"conversation_id\"\n\n:\n\n\"737363834493434****\"\n\n,\n\n​\n\n\"created_at\"\n\n:\n\n1716809829\n\n,\n\n​\n\n\"id\"\n\n:\n\n\"737363834493437****\"\n\n,\n\n​\n\n\"meta_data\"\n\n:\n\n{},\n\n​\n\n\"role\"\n\n:\n\n\"user\"\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"updated_at\"\n\n:\n\n\"1716809829\"\n\n​\n\n},\n\n​\n\n{\n\n​\n\n\"bot_id\"\n\n:\n\n\"737363834493434****\"\n\n,\n\n​\n\n\"chat_id\"\n\n:\n\n\"747363834493434****\"\n\n,\n\n​\n\n\"content\"\n\n:\n\n\"我的名字叫bot\"\n\n,\n\n​\n\n\"content_type\"\n\n:\n\n\"text\"\n\n,\n\n​\n\n\"conversation_id\"\n\n:\n\n\"737363834493434****\"\n\n,\n\n​\n\n\"created_at\"\n\n:\n\n\"1716809829\"\n\n,\n\n​\n\n\"id\"\n\n:\n\n\"737363834493440****\"\n\n,\n\n​\n\n\"meta_data\"\n\n:\n\n{},\n\n​\n\n\"role\"\n\n:\n\n\"assistant\"\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"updated_at\"\n\n:\n\n\"1716936779\"\n\n​\n\n}\n\n​\n\n],\n\n​\n\n\"first_id\"\n\n:\n\n\"737363834493437****\"\n\n,\n\n​\n\n\"has_more\"\n\n:\n\ntrue\n\n,\n\n​\n\n\"last_id\"\n\n:\n\n\"737363834493440****\"\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20250106172024B5F607030***\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n创建消息\n\n下一篇\n\n查看消息详情",
        "links": []
      },
      "markdown": "- 查看消息列表 API 用于查询指定会话（conversation）中的消息记录，不仅包括开发者在会话中手动插入的每一条消息和用户发送的 Query，也包括调用 发起对话 API 得到的 type=answer 的智能体回复，但不包括 type=function_call、tool_response 和 follow-up 类型的对话中间态消息。 ​\n\n- 查看对话消息详情 API 通常用于非流式对话场景中，查看某次对话（chat）中 type=answer 的智能体回复及 type=function_call、tool_response 和 follow-up 类型的对话中间态消息。不包括用户发送的 Query。 ​\n\n| 请求方式​ | POST |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/conversation/message/list​ |\n| 权限​ | chat、listMessage​确保调用该接口使用的访问令牌开通了chat和listMessage权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 调用接口查看指定会话的消息列表。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $AccessToken​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| conversation_id​ | Integer​ | 必选​ | 737363834493434****​ | Conversation ID，即会话的唯一标识。可以在发起对话接口 Response 中查看 conversation_id 字段。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| order​ | String​ | 可选​ | desc​ | 消息列表的排序方式。​desc：（默认）按创建时间降序排序，最新的消息排序最前。​asc：按创建时间升序排序，最早的消息排序最前。​ |\n| chat_id​ | String​ | 可选​ | 737999610479815****​ | 筛选指定 Chat ID 中的消息列表。发起对话接口 Response 中 Chat 事件的data.id字段即为 Chat ID。​ |\n| before_id​ | String​ | 可选​ | 737363834493437****​ | 查看指定位置之前的消息。​默认为 0，表示不指定位置。如需向前翻页，则指定为返回结果中的 first_id。​ |\n| after_id​ | String​ | 可选​ | 737363834493437****​ | 查看指定位置之后的消息。​默认为 0，表示不指定位置。如需向后翻页，则指定为返回结果中的 last_id。​ |\n| limit​ | Long​ | 可选​ | 30​ | 每次查询返回的数据量。默认为 50，取值范围为 1~50。​ |\n| include_middle_message​ | Boolean​ | 可选​ | ​ | 是否包含中间消息​ |\n\n- desc：（默认）按创建时间降序排序，最新的消息排序最前。 ​\n\n- asc：按创建时间升序排序，最早的消息排序最前。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | Array ofOpenMessageApi​ | [ { \"bot_id\": \"\", \"chat_id\": \"\", \"content\": \"你的名字叫什么\", \"content_type\": \"text\", \"conversation_id\": \"737363834493434****\", \"created_at\": 1716809829, \"id\": \"737363834493437****\", \"meta_data\": {}, \"role\": \"user\", \"type\": \"\", \"updated_at\": \"1716809829\" }]​ | 消息详情。​ |\n| has_more​ | Boolean​ | true​ | 是否已返回全部消息。​true：未返回全部消息，可再次调用此接口查看其他分页。​false：已返回全部消息。​ |\n| first_id​ | String​ | 737363834493437****​ | 返回的消息列表中，第一条消息的 Message ID。​ |\n| last_id​ | String​ | 737363834493440****​ | 返回的消息列表中，最后一条消息的 Message ID。​ |\n| detail​ | Object ofResponseDetail​ | { \"logid\": \"20250106172024B5F607030EFFAD653960\" }​ | 响应详情信息。​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n\n- true：未返回全部消息，可再次调用此接口查看其他分页。 ​\n\n- false：已返回全部消息。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 738130009748252****​ | Message ID，即消息的唯一标识。​ |\n| conversation_id​ | String​ | 737999610479815****​ | 此消息所在的会话 ID。​ |\n| bot_id​ | String​ | 747363834493437****​ | 编写此消息的智能体 ID。此参数仅在对话产生的消息中返回。​ |\n| chat_id​ | String​ | 757363834493437****​ | Chat ID。此参数仅在对话产生的消息中返回。​不同的对话中，系统会生成新的chat_id。同一个用户在第一次对话和第二次对话时，chat_id不一样。​ |\n| meta_data​ | JSON Map​ | {\"source\":\"mobile_app\",\"location\":\"Beijing\",\"custom_flag\":\"high_priority\"}​ | 创建消息时的附加信息，以键值对形式存储，获取消息时会原样返回。可用于存储与业务相关的自定义数据。​ |\n| role​ | String​ | user​ | 发送这条消息的实体。取值：​user：代表该条消息内容是用户发送的。​assistant：代表该条消息内容是 Bot 发送的。​ |\n| content​ | String​ | 早上好，今天星期几？​ | 消息的内容，支持纯文本、多模态（文本、图片、文件混合输入）、卡片等多种类型的内容。​ |\n| content_type​ | String​ | text​ | 消息内容的类型，取值包括：​text：文本。​object_string：多模态内容，即文本和文件的组合、文本和图片的组合。​card：卡片。此枚举值仅在接口响应中出现，不支持作为入参。​ |\n| created_at​ | Long​ | 1718592898​ | 消息的创建时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。​ |\n| updated_at​ | Long​ | 1718592898​ | 消息的更新时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。​ |\n| type​ | String​ | question​ | 消息类型。​question：用户输入内容。​answer：智能体返回给用户的消息内容，支持增量返回。如果工作流绑定了 messge 节点，可能会存在多 answer 场景，此时可以用流式返回的结束标志来判断所有 answer 完成。​function_call：智能体对话过程中调用函数（function call）的中间结果。​tool_response：调用工具 （function call）后返回的结果。​follow_up：如果在 Bot 上配置打开了用户问题建议开关，则会返回推荐问题相关的回复内容。​verbose：多 answer 场景下，服务端会返回一个 verbose 包，对应的 content 为 JSON 格式，content.msg_type =generate_answer_finish代表全部 answer 回复完成。​Tip仅发起对话（v3）接口支持将此参数作为入参，且：​如果 autoSaveHistory=true，type 支持设置为 question 或 answer。​如果 autoSaveHistory=false，type 支持设置为 question、answer、function_call、tool_output、tool_response。​其中，type=question 只能和 role=user 对应，即仅用户角色可以且只能发起 question 类型的消息。详细说明可参考消息 type 说明。​​ |\n| section_id​ | String​ | 757363834493437****​ | 上下文片段 ID。每次清除上下文都会生成一个新的 section_id。​ |\n| reasoning_content​ | String​ | 好的，我现在需要给一个13岁的大学生提供学习建议。首先，我得考虑用户的情况……​ | 模型的思维链（CoT），展示模型如何将复杂问题逐步分解为多个简单步骤并推导出最终答案。仅当模型支持深度思考、且智能体开启了深度思考时返回该字段，当前支持深度思考的模型请参考模型能力差异。​ |\n\n- user ：代表该条消息内容是用户发送的。 ​\n\n- assistant ：代表该条消息内容是 Bot 发送的。 ​\n\n- text：文本。 ​\n\n- object_string：多模态内容，即文本和文件的组合、文本和图片的组合。 ​\n\n- card：卡片。此枚举值仅在接口响应中出现，不支持作为入参。 ​\n\n- question ：用户输入内容。 ​\n\n- answer ：智能体返回给用户的消息内容，支持增量返回。如果工作流绑定了 messge 节点，可能会存在多 answer 场景，此时可以用流式返回的结束标志来判断所有 answer 完成。 ​\n\n- function_call ：智能体对话过程中调用函数（function call）的中间结果。 ​\n\n- tool_response ：调用工具 （function call）后返回的结果。 ​\n\n- follow_up ：如果在 Bot 上配置打开了用户问题建议开关，则会返回推荐问题相关的回复内容。 ​\n\n- verbose ：多 answer 场景下，服务端会返回一个 verbose 包，对应的 content 为 JSON 格式， content.msg_type =generate_answer_finish 代表全部 answer 回复完成。 ​\n\n- 如果 autoSaveHistory=true，type 支持设置为 question 或 answer。 ​\n\n- 如果 autoSaveHistory=false，type 支持设置为 question、answer、function_call、tool_output、tool_response。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/retrieve_message",
      "title": "查看消息详情",
      "content": {
        "sections": [],
        "full_text": "查看消息详情\n\n查看指定消息的详细信息。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/conversation/message/retrieve\n\n​\n\n​\n\n权限\n\n​\n\nretrieveMessage\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nretrieveMessage\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n查看指定消息的详细信息。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $AccessToken\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nconversation_id\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\n737549035601767****\n\n​\n\nConversation ID，即会话的唯一标识。你可以在\n\n发起对话\n\n接口 Response 中查看 conversation_id 字段的值。\n\n​\n\nmessage_id\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\n737549035601806****\n\n​\n\nMessage ID，即消息的唯一标识。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nObject of\n\nOpenMessageApi\n\n​\n\n{ \"bot_id\": \"747999610479815****\", \"chat_id\": \"757999610479815****\", \"content\": \"早上好，今天星期几？\", \"content_type\": \"text\", \"conversation_id\": \"737999610479815****\", \"created_at\": 1718595518, \"id\": \"738131140595115****\", \"meta_data\": {}, \"role\": \"user\", \"type\": \"\", \"updated_at\": \"1718595518\" }\n\n​\n\n消息详情。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{ \"logid\": \"20250106172024B5F607030EFFAD***\" }\n\n​\n\n响应详情。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\n​\n\nOpenMessageApi\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n738130009748252****\n\n​\n\nMessage ID，即消息的唯一标识。\n\n​\n\nconversation_id\n\n​\n\nString\n\n​\n\n737999610479815****\n\n​\n\n此消息所在的会话 ID。\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n747363834493437****\n\n​\n\n编写此消息的智能体 ID。此参数仅在对话产生的消息中返回。\n\n​\n\nchat_id\n\n​\n\nString\n\n​\n\n757363834493437****\n\n​\n\nChat ID。此参数仅在对话产生的消息中返回。\n\n​\n\n不同的对话中，系统会生成新的\n\nchat_id\n\n。同一个用户在第一次对话和第二次对话时，\n\nchat_id\n\n不一样。\n\n​\n\nmeta_data\n\n​\n\nJSON Map\n\n​\n\n{\"source\":\"mobile_app\",\"location\":\"Beijing\",\"custom_flag\":\"high_priority\"}\n\n​\n\n创建消息时的附加信息，以键值对形式存储，获取消息时会原样返回。可用于存储与业务相关的自定义数据。\n\n​\n\nrole\n\n​\n\nString\n\n​\n\nuser\n\n​\n\n发送这条消息的实体。取值：\n\n​\n\nuser\n\n：代表该条消息内容是用户发送的。\n\n​\n\nassistant\n\n：代表该条消息内容是 Bot 发送的。\n\n​\n\ncontent\n\n​\n\nString\n\n​\n\n早上好，今天星期几？\n\n​\n\n消息的内容，支持纯文本、多模态（文本、图片、文件混合输入）、卡片等多种类型的内容。\n\n​\n\ncontent_type\n\n​\n\nString\n\n​\n\ntext\n\n​\n\n消息内容的类型，取值包括：\n\n​\n\ntext：文本。\n\n​\n\nobject_string：多模态内容，即文本和文件的组合、文本和图片的组合。\n\n​\n\ncard：卡片。此枚举值仅在接口响应中出现，不支持作为入参。\n\n​\n\ncreated_at\n\n​\n\nLong\n\n​\n\n1718592898\n\n​\n\n消息的创建时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。\n\n​\n\nupdated_at\n\n​\n\nLong\n\n​\n\n1718592898\n\n​\n\n消息的更新时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。\n\n​\n\ntype\n\n​\n\nString\n\n​\n\nquestion\n\n​\n\n消息类型。\n\n​\n\nquestion\n\n：用户输入内容。\n\n​\n\nanswer\n\n：智能体返回给用户的消息内容，支持增量返回。如果工作流绑定了 messge 节点，可能会存在多 answer 场景，此时可以用流式返回的结束标志来判断所有 answer 完成。\n\n​\n\nfunction_call\n\n：智能体对话过程中调用函数（function call）的中间结果。\n\n​\n\ntool_response\n\n：调用工具 （function call）后返回的结果。\n\n​\n\nfollow_up\n\n：如果在 Bot 上配置打开了用户问题建议开关，则会返回推荐问题相关的回复内容。\n\n​\n\nverbose\n\n：多 answer 场景下，服务端会返回一个 verbose 包，对应的 content 为 JSON 格式，\n\ncontent.msg_type =generate_answer_finish\n\n代表全部 answer 回复完成。\n\n​\n\nTip\n\n仅发起对话（v3）接口支持将此参数作为入参，且：\n\n​\n\n如果 autoSaveHistory=true，type 支持设置为 question 或 answer。\n\n​\n\n如果 autoSaveHistory=false，type 支持设置为 question、answer、function_call、tool_output、tool_response。\n\n​\n\n其中，type=question 只能和 role=user 对应，即仅用户角色可以且只能发起 question 类型的消息。详细说明可参考\n\n消息 type 说明\n\n。\n\n​\n\n​\n\nsection_id\n\n​\n\nString\n\n​\n\n757363834493437****\n\n​\n\n上下文片段 ID。每次清除上下文都会生成一个新的 section_id。\n\n​\n\nreasoning_content\n\n​\n\nString\n\n​\n\n好的，我现在需要给一个13岁的大学生提供学习建议。首先，我得考虑用户的情况……\n\n​\n\n模型的思维链（CoT），展示模型如何将复杂问题逐步分解为多个简单步骤并推导出最终答案。仅当模型支持深度思考、且智能体开启了深度思考时返回该字段，当前支持深度思考的模型请参考\n\n模型能力差异\n\n。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request GET 'https\n\n:\n\n//api.coze.cn/v1/conversation/message/retrieve?conversation_id=737549035601767****&message_id=737549035601806****' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n​\n\n返回示例\n\n​\n\n纯文本消息\n\n多模态消息\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"bot_id\"\n\n:\n\n\"747999610479815****\"\n\n,\n\n​\n\n\"chat_id\"\n\n:\n\n\"757999610479815****\"\n\n,\n\n​\n\n\"content\"\n\n:\n\n\"早上好，今天星期几？\"\n\n,\n\n​\n\n\"content_type\"\n\n:\n\n\"text\"\n\n,\n\n​\n\n\"conversation_id\"\n\n:\n\n\"737999610479815****\"\n\n,\n\n​\n\n\"created_at\"\n\n:\n\n1718595518\n\n,\n\n​\n\n\"id\"\n\n:\n\n\"738131140595115****\"\n\n,\n\n​\n\n\"meta_data\"\n\n:\n\n{},\n\n​\n\n\"role\"\n\n:\n\n\"user\"\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"updated_at\"\n\n:\n\n\"1718595518\"\n\n​\n\n},\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20250106172024B5F607030EFFAD653960\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n查看消息列表\n\n下一篇\n\n修改消息",
        "links": []
      },
      "markdown": "| 请求方式​ | GET​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/conversation/message/retrieve​​ |\n| 权限​ | retrieveMessage​确保调用该接口使用的访问令牌开通了retrieveMessage权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 查看指定消息的详细信息。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $AccessToken​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| conversation_id​ | Integer​ | 必选​ | 737549035601767****​ | Conversation ID，即会话的唯一标识。你可以在发起对话接口 Response 中查看 conversation_id 字段的值。​ |\n| message_id​ | Integer​ | 必选​ | 737549035601806****​ | Message ID，即消息的唯一标识。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | Object ofOpenMessageApi​ | { \"bot_id\": \"747999610479815****\", \"chat_id\": \"757999610479815****\", \"content\": \"早上好，今天星期几？\", \"content_type\": \"text\", \"conversation_id\": \"737999610479815****\", \"created_at\": 1718595518, \"id\": \"738131140595115****\", \"meta_data\": {}, \"role\": \"user\", \"type\": \"\", \"updated_at\": \"1718595518\" }​ | 消息详情。​ |\n| detail​ | Object ofResponseDetail​ | { \"logid\": \"20250106172024B5F607030EFFAD***\" }​ | 响应详情。​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 738130009748252****​ | Message ID，即消息的唯一标识。​ |\n| conversation_id​ | String​ | 737999610479815****​ | 此消息所在的会话 ID。​ |\n| bot_id​ | String​ | 747363834493437****​ | 编写此消息的智能体 ID。此参数仅在对话产生的消息中返回。​ |\n| chat_id​ | String​ | 757363834493437****​ | Chat ID。此参数仅在对话产生的消息中返回。​不同的对话中，系统会生成新的chat_id。同一个用户在第一次对话和第二次对话时，chat_id不一样。​ |\n| meta_data​ | JSON Map​ | {\"source\":\"mobile_app\",\"location\":\"Beijing\",\"custom_flag\":\"high_priority\"}​ | 创建消息时的附加信息，以键值对形式存储，获取消息时会原样返回。可用于存储与业务相关的自定义数据。​ |\n| role​ | String​ | user​ | 发送这条消息的实体。取值：​user：代表该条消息内容是用户发送的。​assistant：代表该条消息内容是 Bot 发送的。​ |\n| content​ | String​ | 早上好，今天星期几？​ | 消息的内容，支持纯文本、多模态（文本、图片、文件混合输入）、卡片等多种类型的内容。​ |\n| content_type​ | String​ | text​ | 消息内容的类型，取值包括：​text：文本。​object_string：多模态内容，即文本和文件的组合、文本和图片的组合。​card：卡片。此枚举值仅在接口响应中出现，不支持作为入参。​ |\n| created_at​ | Long​ | 1718592898​ | 消息的创建时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。​ |\n| updated_at​ | Long​ | 1718592898​ | 消息的更新时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。​ |\n| type​ | String​ | question​ | 消息类型。​question：用户输入内容。​answer：智能体返回给用户的消息内容，支持增量返回。如果工作流绑定了 messge 节点，可能会存在多 answer 场景，此时可以用流式返回的结束标志来判断所有 answer 完成。​function_call：智能体对话过程中调用函数（function call）的中间结果。​tool_response：调用工具 （function call）后返回的结果。​follow_up：如果在 Bot 上配置打开了用户问题建议开关，则会返回推荐问题相关的回复内容。​verbose：多 answer 场景下，服务端会返回一个 verbose 包，对应的 content 为 JSON 格式，content.msg_type =generate_answer_finish代表全部 answer 回复完成。​Tip仅发起对话（v3）接口支持将此参数作为入参，且：​如果 autoSaveHistory=true，type 支持设置为 question 或 answer。​如果 autoSaveHistory=false，type 支持设置为 question、answer、function_call、tool_output、tool_response。​其中，type=question 只能和 role=user 对应，即仅用户角色可以且只能发起 question 类型的消息。详细说明可参考消息 type 说明。​​ |\n| section_id​ | String​ | 757363834493437****​ | 上下文片段 ID。每次清除上下文都会生成一个新的 section_id。​ |\n| reasoning_content​ | String​ | 好的，我现在需要给一个13岁的大学生提供学习建议。首先，我得考虑用户的情况……​ | 模型的思维链（CoT），展示模型如何将复杂问题逐步分解为多个简单步骤并推导出最终答案。仅当模型支持深度思考、且智能体开启了深度思考时返回该字段，当前支持深度思考的模型请参考模型能力差异。​ |\n\n- user ：代表该条消息内容是用户发送的。 ​\n\n- assistant ：代表该条消息内容是 Bot 发送的。 ​\n\n- text：文本。 ​\n\n- object_string：多模态内容，即文本和文件的组合、文本和图片的组合。 ​\n\n- card：卡片。此枚举值仅在接口响应中出现，不支持作为入参。 ​\n\n- question ：用户输入内容。 ​\n\n- answer ：智能体返回给用户的消息内容，支持增量返回。如果工作流绑定了 messge 节点，可能会存在多 answer 场景，此时可以用流式返回的结束标志来判断所有 answer 完成。 ​\n\n- function_call ：智能体对话过程中调用函数（function call）的中间结果。 ​\n\n- tool_response ：调用工具 （function call）后返回的结果。 ​\n\n- follow_up ：如果在 Bot 上配置打开了用户问题建议开关，则会返回推荐问题相关的回复内容。 ​\n\n- verbose ：多 answer 场景下，服务端会返回一个 verbose 包，对应的 content 为 JSON 格式， content.msg_type =generate_answer_finish 代表全部 answer 回复完成。 ​\n\n- 如果 autoSaveHistory=true，type 支持设置为 question 或 answer。 ​\n\n- 如果 autoSaveHistory=false，type 支持设置为 question、answer、function_call、tool_output、tool_response。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/modify_message",
      "title": "修改消息",
      "content": {
        "sections": [],
        "full_text": "修改消息\n\n修改一条消息，支持修改消息内容、附加内容和消息类型。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/conversation/message/modify\n\n​\n\n​\n\n权限\n\n​\n\nmodifyMessage\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nmodifyMessage\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n修改一条消息，支持修改消息内容、附加内容和消息类型。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nconversation_id\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\n737475200011611****\n\n​\n\nConversation ID，即会话的唯一标识。可以在\n\n发起对话\n\n接口 Response 中查看 conversation_id 字段。\n\n​\n\nmessage_id\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\n737492830742885***\n\n​\n\nMessage ID，即消息的唯一标识。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncontent\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n早上好，今天深圳天气怎么样？\n\n​\n\n消息的内容，支持纯文本、多模态（文本、图片、文件混合输入）、卡片等多种类型的内容。\n\n​\n\nTip\n\nmeta_data 和 content 不能同时为空。\n\n​\n\n​\n\ncontent_type\n\n​\n\nString\n\n​\n\n可选\n\n​\n\ntext\n\n​\n\n消息内容的类型。取值包括：\n\n​\n\ntext：文本\n\n​\n\nobject_string：多模态内容，即文本和文件的组合、文本和图片的组合\n\n​\n\nNote\n\n传入 content 时，应同时指定 content_type。\n\n​\n\n​\n\nmeta_data\n\n​\n\nJSON Map\n\n​\n\n可选\n\n​\n\n{}\n\n​\n\n创建消息时的附加消息，获取消息时也会返回此附加消息。\n\n​\n\n自定义键值对，应指定为 Map 对象格式。长度为 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。\n\n​\n\n说明\n\nmeta_data 和 content 不能同时为空。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nmessage\n\n​\n\nObject of\n\nOpenMessageApi\n\n​\n\n{ \"bot_id\": \"\", \"chat_id\": \"\", \"content\": \"早上好，今天深圳天气怎么样？\", \"content_type\": \"text\", \"conversation_id\": \"737999610479815****\", \"created_at\": 1718595518, \"id\": \"738131140595115****\", \"meta_data\": {}, \"role\": \"user\", \"type\": \"\", \"updated_at\": \"1718595677\" }\n\n​\n\n修改后的消息详细信息。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{ \"logid\": \"20250106172024B5F607030EFFA***\" }\n\n​\n\n响应详情。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\n​\n\nOpenMessageApi\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n738130009748252****\n\n​\n\nMessage ID，即消息的唯一标识。\n\n​\n\nconversation_id\n\n​\n\nString\n\n​\n\n737999610479815****\n\n​\n\n此消息所在的会话 ID。\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n747363834493437****\n\n​\n\n编写此消息的智能体 ID。此参数仅在对话产生的消息中返回。\n\n​\n\nchat_id\n\n​\n\nString\n\n​\n\n757363834493437****\n\n​\n\nChat ID。此参数仅在对话产生的消息中返回。\n\n​\n\n不同的对话中，系统会生成新的\n\nchat_id\n\n。同一个用户在第一次对话和第二次对话时，\n\nchat_id\n\n不一样。\n\n​\n\nmeta_data\n\n​\n\nJSON Map\n\n​\n\n{\"source\":\"mobile_app\",\"location\":\"Beijing\",\"custom_flag\":\"high_priority\"}\n\n​\n\n创建消息时的附加信息，以键值对形式存储，获取消息时会原样返回。可用于存储与业务相关的自定义数据。\n\n​\n\nrole\n\n​\n\nString\n\n​\n\nuser\n\n​\n\n发送这条消息的实体。取值：\n\n​\n\nuser\n\n：代表该条消息内容是用户发送的。\n\n​\n\nassistant\n\n：代表该条消息内容是 Bot 发送的。\n\n​\n\ncontent\n\n​\n\nString\n\n​\n\n早上好，今天星期几？\n\n​\n\n消息的内容，支持纯文本、多模态（文本、图片、文件混合输入）、卡片等多种类型的内容。\n\n​\n\ncontent_type\n\n​\n\nString\n\n​\n\ntext\n\n​\n\n消息内容的类型，取值包括：\n\n​\n\ntext：文本。\n\n​\n\nobject_string：多模态内容，即文本和文件的组合、文本和图片的组合。\n\n​\n\ncard：卡片。此枚举值仅在接口响应中出现，不支持作为入参。\n\n​\n\ncreated_at\n\n​\n\nLong\n\n​\n\n1718592898\n\n​\n\n消息的创建时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。\n\n​\n\nupdated_at\n\n​\n\nLong\n\n​\n\n1718592898\n\n​\n\n消息的更新时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。\n\n​\n\ntype\n\n​\n\nString\n\n​\n\nquestion\n\n​\n\n消息类型。\n\n​\n\nquestion\n\n：用户输入内容。\n\n​\n\nanswer\n\n：智能体返回给用户的消息内容，支持增量返回。如果工作流绑定了 messge 节点，可能会存在多 answer 场景，此时可以用流式返回的结束标志来判断所有 answer 完成。\n\n​\n\nfunction_call\n\n：智能体对话过程中调用函数（function call）的中间结果。\n\n​\n\ntool_response\n\n：调用工具 （function call）后返回的结果。\n\n​\n\nfollow_up\n\n：如果在 Bot 上配置打开了用户问题建议开关，则会返回推荐问题相关的回复内容。\n\n​\n\nverbose\n\n：多 answer 场景下，服务端会返回一个 verbose 包，对应的 content 为 JSON 格式，\n\ncontent.msg_type =generate_answer_finish\n\n代表全部 answer 回复完成。\n\n​\n\nTip\n\n仅发起对话（v3）接口支持将此参数作为入参，且：\n\n​\n\n如果 autoSaveHistory=true，type 支持设置为 question 或 answer。\n\n​\n\n如果 autoSaveHistory=false，type 支持设置为 question、answer、function_call、tool_output、tool_response。\n\n​\n\n其中，type=question 只能和 role=user 对应，即仅用户角色可以且只能发起 question 类型的消息。详细说明可参考\n\n消息 type 说明\n\n。\n\n​\n\n​\n\nsection_id\n\n​\n\nString\n\n​\n\n757363834493437****\n\n​\n\n上下文片段 ID。每次清除上下文都会生成一个新的 section_id。\n\n​\n\nreasoning_content\n\n​\n\nString\n\n​\n\n好的，我现在需要给一个13岁的大学生提供学习建议。首先，我得考虑用户的情况……\n\n​\n\n模型的思维链（CoT），展示模型如何将复杂问题逐步分解为多个简单步骤并推导出最终答案。仅当模型支持深度思考、且智能体开启了深度思考时返回该字段，当前支持深度思考的模型请参考\n\n模型能力差异\n\n。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\nPOST https\n\n:\n\n//api.coze.cn/v1/conversation/message/modify?conversation_id=737475200011611****&message_id=737492830742885****\n\n​\n\n{\n\n​\n\n\"content\"\n\n:\n\n\"早上好，今天深圳天气怎么样？\"\n\n,\n\n​\n\n\"content_type\"\n\n:\n\n\"text\"\n\n​\n\n}\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"message\"\n\n:\n\n{\n\n​\n\n\"bot_id\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"chat_id\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"content\"\n\n:\n\n\"早上好，今天深圳天气怎么样？\"\n\n,\n\n​\n\n\"content_type\"\n\n:\n\n\"text\"\n\n,\n\n​\n\n\"conversation_id\"\n\n:\n\n\"737999610479815****\"\n\n,\n\n​\n\n\"created_at\"\n\n:\n\n1718595518\n\n,\n\n​\n\n\"id\"\n\n:\n\n\"738131140595115****\"\n\n,\n\n​\n\n\"meta_data\"\n\n:\n\n{},\n\n​\n\n\"role\"\n\n:\n\n\"user\"\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"updated_at\"\n\n:\n\n\"1718595677\"\n\n​\n\n},\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n查看消息详情\n\n下一篇\n\n删除消息",
        "links": []
      },
      "markdown": "| 请求方式​ | POST​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/conversation/message/modify​​ |\n| 权限​ | modifyMessage​确保调用该接口使用的访问令牌开通了modifyMessage权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 修改一条消息，支持修改消息内容、附加内容和消息类型。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| conversation_id​ | Integer​ | 必选​ | 737475200011611****​ | Conversation ID，即会话的唯一标识。可以在发起对话接口 Response 中查看 conversation_id 字段。​ |\n| message_id​ | Integer​ | 必选​ | 737492830742885***​ | Message ID，即消息的唯一标识。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| content​ | String​ | 可选​ | 早上好，今天深圳天气怎么样？​ | 消息的内容，支持纯文本、多模态（文本、图片、文件混合输入）、卡片等多种类型的内容。​Tipmeta_data 和 content 不能同时为空。​​ |\n| content_type​ | String​ | 可选​ | text​ | 消息内容的类型。取值包括：​text：文本​object_string：多模态内容，即文本和文件的组合、文本和图片的组合​Note传入 content 时，应同时指定 content_type。​​ |\n| meta_data​ | JSON Map​ | 可选​ | {}​ | 创建消息时的附加消息，获取消息时也会返回此附加消息。​自定义键值对，应指定为 Map 对象格式。长度为 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。​说明meta_data 和 content 不能同时为空。​​ |\n\n- text：文本 ​\n\n- object_string：多模态内容，即文本和文件的组合、文本和图片的组合 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| message​ | Object ofOpenMessageApi​ | { \"bot_id\": \"\", \"chat_id\": \"\", \"content\": \"早上好，今天深圳天气怎么样？\", \"content_type\": \"text\", \"conversation_id\": \"737999610479815****\", \"created_at\": 1718595518, \"id\": \"738131140595115****\", \"meta_data\": {}, \"role\": \"user\", \"type\": \"\", \"updated_at\": \"1718595677\" }​ | 修改后的消息详细信息。​ |\n| detail​ | Object ofResponseDetail​ | { \"logid\": \"20250106172024B5F607030EFFA***\" }​ | 响应详情。​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 738130009748252****​ | Message ID，即消息的唯一标识。​ |\n| conversation_id​ | String​ | 737999610479815****​ | 此消息所在的会话 ID。​ |\n| bot_id​ | String​ | 747363834493437****​ | 编写此消息的智能体 ID。此参数仅在对话产生的消息中返回。​ |\n| chat_id​ | String​ | 757363834493437****​ | Chat ID。此参数仅在对话产生的消息中返回。​不同的对话中，系统会生成新的chat_id。同一个用户在第一次对话和第二次对话时，chat_id不一样。​ |\n| meta_data​ | JSON Map​ | {\"source\":\"mobile_app\",\"location\":\"Beijing\",\"custom_flag\":\"high_priority\"}​ | 创建消息时的附加信息，以键值对形式存储，获取消息时会原样返回。可用于存储与业务相关的自定义数据。​ |\n| role​ | String​ | user​ | 发送这条消息的实体。取值：​user：代表该条消息内容是用户发送的。​assistant：代表该条消息内容是 Bot 发送的。​ |\n| content​ | String​ | 早上好，今天星期几？​ | 消息的内容，支持纯文本、多模态（文本、图片、文件混合输入）、卡片等多种类型的内容。​ |\n| content_type​ | String​ | text​ | 消息内容的类型，取值包括：​text：文本。​object_string：多模态内容，即文本和文件的组合、文本和图片的组合。​card：卡片。此枚举值仅在接口响应中出现，不支持作为入参。​ |\n| created_at​ | Long​ | 1718592898​ | 消息的创建时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。​ |\n| updated_at​ | Long​ | 1718592898​ | 消息的更新时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。​ |\n| type​ | String​ | question​ | 消息类型。​question：用户输入内容。​answer：智能体返回给用户的消息内容，支持增量返回。如果工作流绑定了 messge 节点，可能会存在多 answer 场景，此时可以用流式返回的结束标志来判断所有 answer 完成。​function_call：智能体对话过程中调用函数（function call）的中间结果。​tool_response：调用工具 （function call）后返回的结果。​follow_up：如果在 Bot 上配置打开了用户问题建议开关，则会返回推荐问题相关的回复内容。​verbose：多 answer 场景下，服务端会返回一个 verbose 包，对应的 content 为 JSON 格式，content.msg_type =generate_answer_finish代表全部 answer 回复完成。​Tip仅发起对话（v3）接口支持将此参数作为入参，且：​如果 autoSaveHistory=true，type 支持设置为 question 或 answer。​如果 autoSaveHistory=false，type 支持设置为 question、answer、function_call、tool_output、tool_response。​其中，type=question 只能和 role=user 对应，即仅用户角色可以且只能发起 question 类型的消息。详细说明可参考消息 type 说明。​​ |\n| section_id​ | String​ | 757363834493437****​ | 上下文片段 ID。每次清除上下文都会生成一个新的 section_id。​ |\n| reasoning_content​ | String​ | 好的，我现在需要给一个13岁的大学生提供学习建议。首先，我得考虑用户的情况……​ | 模型的思维链（CoT），展示模型如何将复杂问题逐步分解为多个简单步骤并推导出最终答案。仅当模型支持深度思考、且智能体开启了深度思考时返回该字段，当前支持深度思考的模型请参考模型能力差异。​ |\n\n- user ：代表该条消息内容是用户发送的。 ​\n\n- assistant ：代表该条消息内容是 Bot 发送的。 ​\n\n- text：文本。 ​\n\n- object_string：多模态内容，即文本和文件的组合、文本和图片的组合。 ​\n\n- card：卡片。此枚举值仅在接口响应中出现，不支持作为入参。 ​\n\n- question ：用户输入内容。 ​\n\n- answer ：智能体返回给用户的消息内容，支持增量返回。如果工作流绑定了 messge 节点，可能会存在多 answer 场景，此时可以用流式返回的结束标志来判断所有 answer 完成。 ​\n\n- function_call ：智能体对话过程中调用函数（function call）的中间结果。 ​\n\n- tool_response ：调用工具 （function call）后返回的结果。 ​\n\n- follow_up ：如果在 Bot 上配置打开了用户问题建议开关，则会返回推荐问题相关的回复内容。 ​\n\n- verbose ：多 answer 场景下，服务端会返回一个 verbose 包，对应的 content 为 JSON 格式， content.msg_type =generate_answer_finish 代表全部 answer 回复完成。 ​\n\n- 如果 autoSaveHistory=true，type 支持设置为 question 或 answer。 ​\n\n- 如果 autoSaveHistory=false，type 支持设置为 question、answer、function_call、tool_output、tool_response。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/delete_message",
      "title": "删除消息",
      "content": {
        "sections": [],
        "full_text": "删除消息\n\n调用接口在指定会话中删除消息。\n\n​\n\n说明\n\n暂不支持批量操作，需要逐条删除。\n\n​\n\n删除指定 message id 对应的消息。如果消息 type=answer，会同步删除与之相关的 verbose、function_call 等中间态消息，但不支持仅删除某一条中间态消息。\n\n​\n\n删除消息后，无法通过\n\n查看消息列表\n\n或\n\n查看对话消息详情\n\n接口查看已删除的这些消息。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/conversation/message/delete\n\n​\n\n​\n\n权限\n\n​\n\ndeleteMessage\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\ndeleteMessage\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n调用接口在指定会话中删除消息。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nconversation_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n74076802623535*****\n\n​\n\n待删除的消息所属的会话 ID。\n\n​\n\nmessage_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n74076856761178****\n\n​\n\n待删除的消息 ID，你可以选择删除会话中的 question 消息和 answer 消息。\n\n​\n\n待删除消息必须属于 conversation_id 指定的会话。\n\n​\n\n仅支持删除 type=answer 或 question 的消息，不支持单独删除 function_call 等中间态消息。当删除 type=answer 的消息时，系统会同步删除与之关联的 function_call 等中间态消息。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nObject of\n\nOpenMessageApi\n\n​\n\n{ \"bot_id\": \"73250261716436*****\", \"chat_id\": \"74076802623535*****\", \"content\": \"您好呀！今天感觉怎么样？\", \"content_type\": \"text\", \"conversation_id\": \"74076802623535*****\", \"created_at\": 1724734970, \"id\": \"74076802623536*****\", \"meta_data\": {}, \"role\": \"assistant\", \"type\": \"answer\", \"updated_at\": 1724734971 }\n\n​\n\n已删除的 Message 详情。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{ \"logid\": \"20250106172024B5F60***\" }\n\n​\n\n响应详情。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\n​\n\nOpenMessageApi\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n738130009748252****\n\n​\n\nMessage ID，即消息的唯一标识。\n\n​\n\nconversation_id\n\n​\n\nString\n\n​\n\n737999610479815****\n\n​\n\n此消息所在的会话 ID。\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n747363834493437****\n\n​\n\n编写此消息的智能体 ID。此参数仅在对话产生的消息中返回。\n\n​\n\nchat_id\n\n​\n\nString\n\n​\n\n757363834493437****\n\n​\n\nChat ID。此参数仅在对话产生的消息中返回。\n\n​\n\n不同的对话中，系统会生成新的\n\nchat_id\n\n。同一个用户在第一次对话和第二次对话时，\n\nchat_id\n\n不一样。\n\n​\n\nmeta_data\n\n​\n\nJSON Map\n\n​\n\n{\"source\":\"mobile_app\",\"location\":\"Beijing\",\"custom_flag\":\"high_priority\"}\n\n​\n\n创建消息时的附加信息，以键值对形式存储，获取消息时会原样返回。可用于存储与业务相关的自定义数据。\n\n​\n\nrole\n\n​\n\nString\n\n​\n\nuser\n\n​\n\n发送这条消息的实体。取值：\n\n​\n\nuser\n\n：代表该条消息内容是用户发送的。\n\n​\n\nassistant\n\n：代表该条消息内容是 Bot 发送的。\n\n​\n\ncontent\n\n​\n\nString\n\n​\n\n早上好，今天星期几？\n\n​\n\n消息的内容，支持纯文本、多模态（文本、图片、文件混合输入）、卡片等多种类型的内容。\n\n​\n\ncontent_type\n\n​\n\nString\n\n​\n\ntext\n\n​\n\n消息内容的类型，取值包括：\n\n​\n\ntext：文本。\n\n​\n\nobject_string：多模态内容，即文本和文件的组合、文本和图片的组合。\n\n​\n\ncard：卡片。此枚举值仅在接口响应中出现，不支持作为入参。\n\n​\n\ncreated_at\n\n​\n\nLong\n\n​\n\n1718592898\n\n​\n\n消息的创建时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。\n\n​\n\nupdated_at\n\n​\n\nLong\n\n​\n\n1718592898\n\n​\n\n消息的更新时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。\n\n​\n\ntype\n\n​\n\nString\n\n​\n\nquestion\n\n​\n\n消息类型。\n\n​\n\nquestion\n\n：用户输入内容。\n\n​\n\nanswer\n\n：智能体返回给用户的消息内容，支持增量返回。如果工作流绑定了 messge 节点，可能会存在多 answer 场景，此时可以用流式返回的结束标志来判断所有 answer 完成。\n\n​\n\nfunction_call\n\n：智能体对话过程中调用函数（function call）的中间结果。\n\n​\n\ntool_response\n\n：调用工具 （function call）后返回的结果。\n\n​\n\nfollow_up\n\n：如果在 Bot 上配置打开了用户问题建议开关，则会返回推荐问题相关的回复内容。\n\n​\n\nverbose\n\n：多 answer 场景下，服务端会返回一个 verbose 包，对应的 content 为 JSON 格式，\n\ncontent.msg_type =generate_answer_finish\n\n代表全部 answer 回复完成。\n\n​\n\nTip\n\n仅发起对话（v3）接口支持将此参数作为入参，且：\n\n​\n\n如果 autoSaveHistory=true，type 支持设置为 question 或 answer。\n\n​\n\n如果 autoSaveHistory=false，type 支持设置为 question、answer、function_call、tool_output、tool_response。\n\n​\n\n其中，type=question 只能和 role=user 对应，即仅用户角色可以且只能发起 question 类型的消息。详细说明可参考\n\n消息 type 说明\n\n。\n\n​\n\n​\n\nsection_id\n\n​\n\nString\n\n​\n\n757363834493437****\n\n​\n\n上下文片段 ID。每次清除上下文都会生成一个新的 section_id。\n\n​\n\nreasoning_content\n\n​\n\nString\n\n​\n\n好的，我现在需要给一个13岁的大学生提供学习建议。首先，我得考虑用户的情况……\n\n​\n\n模型的思维链（CoT），展示模型如何将复杂问题逐步分解为多个简单步骤并推导出最终答案。仅当模型支持深度思考、且智能体开启了深度思考时返回该字段，当前支持深度思考的模型请参考\n\n模型能力差异\n\n。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/conversation/message/delete?conversation_id=74076802623535*****&message_id=74076856761178****' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"bot_id\"\n\n:\n\n\"73250261716436*****\"\n\n,\n\n​\n\n\"chat_id\"\n\n:\n\n\"74076802623535*****\"\n\n,\n\n​\n\n\"content\"\n\n:\n\n\"您好呀！今天感觉怎么样？\"\n\n,\n\n​\n\n\"content_type\"\n\n:\n\n\"text\"\n\n,\n\n​\n\n\"conversation_id\"\n\n:\n\n\"74076802623535*****\"\n\n,\n\n​\n\n\"created_at\"\n\n:\n\n1724734970\n\n,\n\n​\n\n\"id\"\n\n:\n\n\"74076802623536*****\"\n\n,\n\n​\n\n\"meta_data\"\n\n:\n\n{},\n\n​\n\n\"role\"\n\n:\n\n\"assistant\"\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"answer\"\n\n,\n\n​\n\n\"updated_at\"\n\n:\n\n1724734971\n\n​\n\n},\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n修改消息\n\n下一篇\n\n消息 type 说明",
        "links": []
      },
      "markdown": "- 暂不支持批量操作，需要逐条删除。 ​\n\n- 删除指定 message id 对应的消息。如果消息 type=answer，会同步删除与之相关的 verbose、function_call 等中间态消息，但不支持仅删除某一条中间态消息。 ​\n\n- 删除消息后，无法通过 查看消息列表 或 查看对话消息详情 接口查看已删除的这些消息。 ​\n\n| 请求方式​ | POST​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/conversation/message/delete​​ |\n| 权限​ | deleteMessage​确保调用该接口使用的访问令牌开通了deleteMessage权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 调用接口在指定会话中删除消息。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| conversation_id​ | String​ | 必选​ | 74076802623535*****​ | 待删除的消息所属的会话 ID。​ |\n| message_id​ | String​ | 必选​ | 74076856761178****​ | 待删除的消息 ID，你可以选择删除会话中的 question 消息和 answer 消息。​待删除消息必须属于 conversation_id 指定的会话。​仅支持删除 type=answer 或 question 的消息，不支持单独删除 function_call 等中间态消息。当删除 type=answer 的消息时，系统会同步删除与之关联的 function_call 等中间态消息。​ |\n\n- 待删除消息必须属于 conversation_id 指定的会话。 ​\n\n- 仅支持删除 type=answer 或 question 的消息，不支持单独删除 function_call 等中间态消息。当删除 type=answer 的消息时，系统会同步删除与之关联的 function_call 等中间态消息。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | Object ofOpenMessageApi​ | { \"bot_id\": \"73250261716436*****\", \"chat_id\": \"74076802623535*****\", \"content\": \"您好呀！今天感觉怎么样？\", \"content_type\": \"text\", \"conversation_id\": \"74076802623535*****\", \"created_at\": 1724734970, \"id\": \"74076802623536*****\", \"meta_data\": {}, \"role\": \"assistant\", \"type\": \"answer\", \"updated_at\": 1724734971 }​ | 已删除的 Message 详情。​ |\n| detail​ | Object ofResponseDetail​ | { \"logid\": \"20250106172024B5F60***\" }​ | 响应详情。​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 738130009748252****​ | Message ID，即消息的唯一标识。​ |\n| conversation_id​ | String​ | 737999610479815****​ | 此消息所在的会话 ID。​ |\n| bot_id​ | String​ | 747363834493437****​ | 编写此消息的智能体 ID。此参数仅在对话产生的消息中返回。​ |\n| chat_id​ | String​ | 757363834493437****​ | Chat ID。此参数仅在对话产生的消息中返回。​不同的对话中，系统会生成新的chat_id。同一个用户在第一次对话和第二次对话时，chat_id不一样。​ |\n| meta_data​ | JSON Map​ | {\"source\":\"mobile_app\",\"location\":\"Beijing\",\"custom_flag\":\"high_priority\"}​ | 创建消息时的附加信息，以键值对形式存储，获取消息时会原样返回。可用于存储与业务相关的自定义数据。​ |\n| role​ | String​ | user​ | 发送这条消息的实体。取值：​user：代表该条消息内容是用户发送的。​assistant：代表该条消息内容是 Bot 发送的。​ |\n| content​ | String​ | 早上好，今天星期几？​ | 消息的内容，支持纯文本、多模态（文本、图片、文件混合输入）、卡片等多种类型的内容。​ |\n| content_type​ | String​ | text​ | 消息内容的类型，取值包括：​text：文本。​object_string：多模态内容，即文本和文件的组合、文本和图片的组合。​card：卡片。此枚举值仅在接口响应中出现，不支持作为入参。​ |\n| created_at​ | Long​ | 1718592898​ | 消息的创建时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。​ |\n| updated_at​ | Long​ | 1718592898​ | 消息的更新时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。​ |\n| type​ | String​ | question​ | 消息类型。​question：用户输入内容。​answer：智能体返回给用户的消息内容，支持增量返回。如果工作流绑定了 messge 节点，可能会存在多 answer 场景，此时可以用流式返回的结束标志来判断所有 answer 完成。​function_call：智能体对话过程中调用函数（function call）的中间结果。​tool_response：调用工具 （function call）后返回的结果。​follow_up：如果在 Bot 上配置打开了用户问题建议开关，则会返回推荐问题相关的回复内容。​verbose：多 answer 场景下，服务端会返回一个 verbose 包，对应的 content 为 JSON 格式，content.msg_type =generate_answer_finish代表全部 answer 回复完成。​Tip仅发起对话（v3）接口支持将此参数作为入参，且：​如果 autoSaveHistory=true，type 支持设置为 question 或 answer。​如果 autoSaveHistory=false，type 支持设置为 question、answer、function_call、tool_output、tool_response。​其中，type=question 只能和 role=user 对应，即仅用户角色可以且只能发起 question 类型的消息。详细说明可参考消息 type 说明。​​ |\n| section_id​ | String​ | 757363834493437****​ | 上下文片段 ID。每次清除上下文都会生成一个新的 section_id。​ |\n| reasoning_content​ | String​ | 好的，我现在需要给一个13岁的大学生提供学习建议。首先，我得考虑用户的情况……​ | 模型的思维链（CoT），展示模型如何将复杂问题逐步分解为多个简单步骤并推导出最终答案。仅当模型支持深度思考、且智能体开启了深度思考时返回该字段，当前支持深度思考的模型请参考模型能力差异。​ |\n\n- user ：代表该条消息内容是用户发送的。 ​\n\n- assistant ：代表该条消息内容是 Bot 发送的。 ​\n\n- text：文本。 ​\n\n- object_string：多模态内容，即文本和文件的组合、文本和图片的组合。 ​\n\n- card：卡片。此枚举值仅在接口响应中出现，不支持作为入参。 ​\n\n- question ：用户输入内容。 ​\n\n- answer ：智能体返回给用户的消息内容，支持增量返回。如果工作流绑定了 messge 节点，可能会存在多 answer 场景，此时可以用流式返回的结束标志来判断所有 answer 完成。 ​\n\n- function_call ：智能体对话过程中调用函数（function call）的中间结果。 ​\n\n- tool_response ：调用工具 （function call）后返回的结果。 ​\n\n- follow_up ：如果在 Bot 上配置打开了用户问题建议开关，则会返回推荐问题相关的回复内容。 ​\n\n- verbose ：多 answer 场景下，服务端会返回一个 verbose 包，对应的 content 为 JSON 格式， content.msg_type =generate_answer_finish 代表全部 answer 回复完成。 ​\n\n- 如果 autoSaveHistory=true，type 支持设置为 question 或 answer。 ​\n\n- 如果 autoSaveHistory=false，type 支持设置为 question、answer、function_call、tool_output、tool_response。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/message_type",
      "title": "消息 type 说明",
      "content": {
        "sections": [],
        "full_text": "消息 type 说明\n\n仅\n\n​\n\n发起对话\n\n接口需要在接口传参中添加消息内容（content）和消息类型（type），但不同场景支持传入的消息类型和角色类型（role）不同。本文档介绍各个场景支持的 type 类型及各种类型消息内容示例。\n\n​\n\n支持的 type 类型\n\n​\n\n仅\n\n​\n\n发起对话\n\n接口支持将此参数作为入参，且：\n\n​\n\n如果 autoSaveHistory=true，type 支持设置为 question 或 answer。\n\n​\n\n如果 autoSaveHistory=false，type 支持设置为 question、answer、function_call、tool_output/tool_response。\n\n​\n\n其中，type=question 只能和 role=user 对应，即仅用户角色可以且只能发起 question 类型的消息。\n\n​\n\n​\n\ntype\n\n​\n\n发起对话\n\n​\n\n​\n\n​\n\n​\n\nResponse\n\n​\n\nRequest，且 autoSaveHistory=false\n\n​\n\nRequest，且 autoSaveHistory=true\n\n​\n\nquestion\n\n​\n\n❌\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\nanswer\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\nfunction_call\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n❌\n\n​\n\ntool_output/tool_response\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n❌\n\n​\n\nfollow_up\n\n​\n\n✔️\n\n​\n\n❌\n\n​\n\n❌\n\n​\n\nknowledge\n\n​\n\n✔️\n\n​\n\n❌\n\n​\n\n❌\n\n​\n\nverbose\n\n​\n\n✔️\n\n​\n\n❌\n\n​\n\n❌\n\n​\n\n​\n\n消息结构示例\n\n​\n\n创建消息并指定消息类型时，应遵循 type、role 和 content_type 的匹配关系，例如 role 为 user 时，type 只能为 question。详细的匹配关系及消息体示例可参考下表。\n\n​\n\n​\n\n消息类型（type）\n\n​\n\n角色\n\n​\n\n（role）\n\n​\n\n内容类型\n\n​\n\n（content_type）\n\n​\n\n示例\n\n​\n\nquestion\n\n​\n\nuser\n\n​\n\ntext\n\n​\n\nobject_string\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"role\"\n\n:\n\n\"user\"\n\n,\n\n​\n\n\"content\"\n\n:\n\n\"--- 只需要回答最新的这一条问题：搜几个最新的军事新闻\"\n\n,\n\n​\n\n\"content_type\"\n\n:\n\n\"text\"\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"question\"\n\n​\n\n}\n\n​\n\n​\n\nanswer\n\n​\n\nassistant\n\n​\n\ntext\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"role\"\n\n:\n\n\"assistant\"\n\n,\n\n​\n\n\"content\"\n\n:\n\n\"以下是最新的体育新闻 ......\"\n\n,\n\n​\n\n\"content_type\"\n\n:\n\n\"text\"\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"answer\"\n\n​\n\n}\n\n​\n\n​\n\nfunction_call\n\n​\n\nassistant\n\n​\n\ntext\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"role\": \"assistant\",\n\n​\n\n\"content\": \"{\\\"name\\\":\\\"toutiaosousuo-search\\\",\\\"arguments\\\":{\\\"cursor\\\":0,\\\"input_query\\\":\\\"体育新闻\\\"...}\",\n\n​\n\n\"content_type\": \"text\",\n\n​\n\n\"type\": \"function_call\"\n\n​\n\n}\n\n​\n\n​\n\ntool_output/tool_response\n\n​\n\nassistant\n\n​\n\ntext\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"role\": \"assistant\",\n\n​\n\n\"content\": \"{\\\"news\\\":[{\\\"title\\\":\\\"新闻内容：.....\\\"}]}\",\n\n​\n\n\"content_type\": \"text\",\n\n​\n\n\"type\": \"tool_output\"\n\n​\n\n},\n\n​\n\n​\n\nfollow_up\n\n​\n\nassistant\n\n​\n\ntext\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"role\"\n\n:\n\n\"assistant\"\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"follow_up\"\n\n,\n\n​\n\n\"content\"\n\n:\n\n\"国足将会有哪些变化和调整？\"\n\n,\n\n​\n\n\"content_type\"\n\n:\n\n\"text\"\n\n​\n\n}\n\n​\n\n​\n\nverbose\n\n​\n\nassistant\n\n​\n\ntext\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"role\"\n\n:\n\n\"assistant\"\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"verbose\"\n\n,\n\n​\n\n// generate_answer_finish 表示全部 answer 已回复完毕\n\n​\n\n\"content\"\n\n:\n\n\"{\\\"msg_type\\\":\\\"generate_answer_finish\\\",\\\"data\\\":\\\"\\\",\\\"from_module\\\":null,\\\"from_unit\\\":null}\"\n\n,\n\n​\n\n\"content_type\"\n\n:\n\n\"text\"\n\n​\n\n}\n\n​\n\n​\n\n​\n\n上一篇\n\n删除消息\n\n下一篇\n\n提交消息评价",
        "links": []
      },
      "markdown": "- 如果 autoSaveHistory=true，type 支持设置为 question 或 answer。 ​\n\n- 如果 autoSaveHistory=false，type 支持设置为 question、answer、function_call、tool_output/tool_response。 ​\n\n| type​ | 发起对话​ | ​ | ​ |\n| ​ | Response​ | Request，且 autoSaveHistory=false​ | Request，且 autoSaveHistory=true​ |\n| question​ | ❌​ | ✔️​ | ✔️​ |\n| answer​ | ✔️​ | ✔️​ | ✔️​ |\n| function_call​ | ✔️​ | ✔️​ | ❌​ |\n| tool_output/tool_response​ | ✔️​ | ✔️​ | ❌​ |\n| follow_up​ | ✔️​ | ❌​ | ❌​ |\n| knowledge​ | ✔️​ | ❌​ | ❌​ |\n| verbose​ | ✔️​ | ❌​ | ❌​ |\n\n| 消息类型（type）​ | 角色​（role）​ | 内容类型​（content_type）​ | 示例​ |\n| question​ | user​ | text​object_string​ | ​JSON复制{​\"role\":\"user\",​\"content\":\"--- 只需要回答最新的这一条问题：搜几个最新的军事新闻\",​\"content_type\":\"text\",​\"type\":\"question\"​}​​ |\n| answer​ | assistant​ | text​ | ​JSON复制{​\"role\":\"assistant\",​\"content\":\"以下是最新的体育新闻 ......\",​\"content_type\":\"text\",​\"type\":\"answer\"​}​​ |\n| function_call​ | assistant​ | text​ | ​JSON复制{​\"role\": \"assistant\",​\"content\": \"{\\\"name\\\":\\\"toutiaosousuo-search\\\",\\\"arguments\\\":{\\\"cursor\\\":0,\\\"input_query\\\":\\\"体育新闻\\\"...}\",​\"content_type\": \"text\",​\"type\": \"function_call\"​}​​ |\n| tool_output/tool_response​ | assistant​ | text​ | ​JSON复制{​\"role\": \"assistant\",​\"content\": \"{\\\"news\\\":[{\\\"title\\\":\\\"新闻内容：.....\\\"}]}\",​\"content_type\": \"text\",​\"type\": \"tool_output\"​},​​ |\n| follow_up​ | assistant​ | text​ | ​JSON复制{​\"role\":\"assistant\",​\"type\":\"follow_up\",​\"content\":\"国足将会有哪些变化和调整？\",​\"content_type\":\"text\"​}​​ |\n| verbose​ | assistant​ | text​ | ​JSON复制{​\"role\":\"assistant\",​\"type\":\"verbose\",​// generate_answer_finish 表示全部 answer 已回复完毕​\"content\":\"{\\\"msg_type\\\":\\\"generate_answer_finish\\\",\\\"data\\\":\\\"\\\",\\\"from_module\\\":null,\\\"from_unit\\\":null}\",​\"content_type\":\"text\"​}​​ |\n\n- text ​\n\n- object_string ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/message_feedback",
      "title": "提交消息评价",
      "content": {
        "sections": [],
        "full_text": "提交消息评价\n\n用户可以对智能体或应用回复的消息提交评价，包括点赞、点踩和反馈详细的评论。\n\n​\n\n接口描述\n\n​\n\n无论是“一问一答”还是“一问多答”场景，每条消息的评价都是独立的，不会相互覆盖或影响。如果用户对同一条消息多次提交评价，系统将仅保留最后一次的评价内容。\n\n​\n\n开发者可以在扣子罗盘的消息日志中查看消息的评价数据，以便改进智能体或应用。\n\n​\n\n接口限制\n\n​\n\n仅会话创建者能评价对应会话中的消息。\n\n​\n\n仅支持评价以下来源的文本消息:\n\n​\n\n通过发起对话 API 生成的\n\ntype=answer\n\n类型的文本消息。\n\n​\n\n通过执行对话流 API 返回的文本消息。\n\n​\n\n仅支持评价 2025 年 7 月 11 日 0 时之后的消息。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/conversations/:conversation_id/messages/:message_id/feedback\n\n​\n\n​\n\n权限\n\n​\n\nfeedback\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nfeedback\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n对智能体或应用回复的消息提交评价。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nconversation_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n737363834493434****\n\n​\n\nConversation ID，即会话的唯一标识。你可以在\n\n发起对话\n\nAPI 返回的 Response 中查看 conversation_id 字段。\n\n​\n\nmessage_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n74076856761178****\n\n​\n\n针对指定的消息 ID 提交评价。你可以通过\n\n查看对话消息详情\n\nAPI 返回的 Response 中查看消息 ID。\n\n​\n\n此消息必须在 conversation_id 指定的会话中。\n\n​\n\n仅支持评价以下来源的文本消息：\n\n​\n\n通过发起对话 API 生成的\n\ntype=answer\n\n类型的文本消息。\n\n​\n\n通过执行对话流 API 返回的文本消息。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nfeedback_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nlike\n\n​\n\n对智能体或应用回复的消息提交评价，包括以下枚举值：\n\n​\n\nlike\n\n：点赞。\n\n​\n\nunlike\n\n：点踩。\n\n​\n\nreason_types\n\n​\n\nArray of String\n\n​\n\n可选\n\n​\n\n[\"事实性错误\",\"逻辑矛盾\",\"格式混乱\"]\n\n​\n\n用户自定义的反馈标签列表，用于分类标识对智能体回复的具体不满类型。每个标签应为简明扼要的分类描述，如问题类型等。\n\n​\n\n最多可添加 10 个标签，单个标签长度不超过 30 个字符。\n\n​\n\ncomment\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n智能体关于产品功能的回答存在错误，实际参数应为 5.0 版本而非 4.0 版本。\n\n​\n\n用户对智能体回复消息的具体评价，最多可输入 250 个字符。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细日志信息，用于问题排查。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/conversations/7515364893***/messages/752173729302***/feedback' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_xFWpGsNio4S7sfAzpu02vHCkAdL38VnSsTOIu8CkySdY9Z2xmeM8jjn***' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n{\n\n​\n\n\"feedback_type\"\n\n:\n\n\"unlike\"\n\n,\n\n​\n\n\"reason_types\"\n\n:\n\n[\n\n​\n\n\"内容有误\"\n\n,\n\n​\n\n\"不够详细\"\n\n​\n\n],\n\n​\n\n\"comment\"\n\n:\n\n\"实际参数应为 5.0 版本而非 4.0 版本。\"\n\n​\n\n}\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210191248C8EF760***\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n消息 type 说明\n\n下一篇\n\n删除消息评价",
        "links": []
      },
      "markdown": "- 仅会话创建者能评价对应会话中的消息。 ​\n\n- 仅支持评价以下来源的文本消息: ​\n\n- 通过发起对话 API 生成的 type=answer 类型的文本消息。 ​\n\n- 通过执行对话流 API 返回的文本消息。 ​\n\n- 仅支持评价 2025 年 7 月 11 日 0 时之后的消息。 ​\n\n| 请求方式​ | POST​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/conversations/:conversation_id/messages/:message_id/feedback​​ |\n| 权限​ | feedback​确保调用该接口使用的访问令牌开通了feedback权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 对智能体或应用回复的消息提交评价。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| conversation_id​ | String​ | 必选​ | 737363834493434****​ | Conversation ID，即会话的唯一标识。你可以在发起对话API 返回的 Response 中查看 conversation_id 字段。​ |\n| message_id​ | String​ | 必选​ | 74076856761178****​ | 针对指定的消息 ID 提交评价。你可以通过查看对话消息详情API 返回的 Response 中查看消息 ID。​此消息必须在 conversation_id 指定的会话中。​仅支持评价以下来源的文本消息：​通过发起对话 API 生成的type=answer类型的文本消息。​通过执行对话流 API 返回的文本消息。​ |\n\n- 此消息必须在 conversation_id 指定的会话中。 ​\n\n- 仅支持评价以下来源的文本消息： ​\n\n- 通过发起对话 API 生成的 type=answer 类型的文本消息。 ​\n\n- 通过执行对话流 API 返回的文本消息。 ​\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| feedback_type​ | String​ | 必选​ | like​ | 对智能体或应用回复的消息提交评价，包括以下枚举值：​like：点赞。​unlike：点踩。​ |\n| reason_types​ | Array of String​ | 可选​ | [\"事实性错误\",\"逻辑矛盾\",\"格式混乱\"]​ | 用户自定义的反馈标签列表，用于分类标识对智能体回复的具体不满类型。每个标签应为简明扼要的分类描述，如问题类型等。​最多可添加 10 个标签，单个标签长度不超过 30 个字符。​ |\n| comment​ | String​ | 可选​ | 智能体关于产品功能的回答存在错误，实际参数应为 5.0 版本而非 4.0 版本。​ | 用户对智能体回复消息的具体评价，最多可输入 250 个字符。​ |\n\n- like ：点赞。 ​\n\n- unlike ：点踩。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细日志信息，用于问题排查。​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/delete_message_feedback",
      "title": "删除消息评价",
      "content": {
        "sections": [],
        "full_text": "删除消息评价\n\n删除指定消息的评价。\n\n​\n\n接口限制\n\n​\n\n仅会话创建者能删除对应会话中消息的评价。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nDELETE\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/conversations/:conversation_id/messages/:message_id/feedback\n\n​\n\n​\n\n权限\n\n​\n\nfeedback\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nfeedback\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n删除指定消息的评价。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nconversation_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n737363834493434****\n\n​\n\nConversation ID，即会话的唯一标识。可以在\n\n发起对话\n\n接口 Response 中查看 conversation_id 字段。\n\n​\n\nmessage_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n74076856761178****\n\n​\n\n待删除评价的消息 ID。你可以通过\n\n查看对话消息详情\n\nAPI 返回的 Response 中查看消息 ID。\n\n​\n\n此消息必须在 conversation_id 指定的会话中。\n\n​\n\n仅支持评价以下来源的文本消息：\n\n​\n\n通过发起对话 API 生成的\n\ntype=answer\n\n类型的文本消息。\n\n​\n\n通过执行对话流 API 返回的文本消息。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细日志信息，用于问题排查和技术支持。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\nDELETE https\n\n:\n\n//api.coze.cn/v1/conversations/751536489399***/messages/751903981556***/feedback \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_xFWpGsNio4S7sfAzpu02vHCkAdL38VnSsTOIu8CkySdY9Z2xmeM8jjn****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210191248C8EF76****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n提交消息评价\n\n下一篇\n\n发起对话",
        "links": []
      },
      "markdown": "| 请求方式​ | DELETE​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/conversations/:conversation_id/messages/:message_id/feedback​​ |\n| 权限​ | feedback​确保调用该接口使用的访问令牌开通了feedback权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 删除指定消息的评价。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| conversation_id​ | String​ | 必选​ | 737363834493434****​ | Conversation ID，即会话的唯一标识。可以在发起对话接口 Response 中查看 conversation_id 字段。​ |\n| message_id​ | String​ | 必选​ | 74076856761178****​ | 待删除评价的消息 ID。你可以通过查看对话消息详情API 返回的 Response 中查看消息 ID。​此消息必须在 conversation_id 指定的会话中。​仅支持评价以下来源的文本消息：​通过发起对话 API 生成的type=answer类型的文本消息。​通过执行对话流 API 返回的文本消息。​ |\n\n- 此消息必须在 conversation_id 指定的会话中。 ​\n\n- 仅支持评价以下来源的文本消息： ​\n\n- 通过发起对话 API 生成的 type=answer 类型的文本消息。 ​\n\n- 通过执行对话流 API 返回的文本消息。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细日志信息，用于问题排查和技术支持。​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/chat_v3",
      "title": "发起对话",
      "content": {
        "sections": [],
        "full_text": "发起对话\n\n调用此接口发起一次对话，支持添加上下文和流式响应。\n\n​\n\n会话、对话和消息的概念说明，可参考\n\n基础概念\n\n。\n\n​\n\n接口说明\n\n​\n\n发起对话接口用于向指定智能体发起一次对话，支持在对话时添加对话的上下文消息，以便智能体基于历史消息做出合理的回复。开发者可以按需选择响应方式，即流式或非流式响应，响应方式决定了开发者获取智能体回复的方式。关于获取智能体回复的详细说明可参考\n\n通过对话接口获取智能体回复\n\n。\n\n​\n\n流式响应\n\n：智能体在生成回复的同时，将回复消息以数据流的形式逐条发送给客户端。处理结束后，服务端会返回一条完整的智能体回复。详细说明可参考\n\n流式响应\n\n。\n\n​\n\n非流式响应\n\n：无论对话是否处理完毕，立即发送响应消息。开发者可以通过接口\n\n查看对话详情\n\n确认本次对话处理结束后，再调用\n\n查看对话消息详情\n\n接口查看模型回复等完整响应内容。详细说明可参考\n\n非流式响应\n\n。\n\n​\n\n创建会话\n\nAPI 和\n\n发起对话\n\nAPI 的区别如下：\n\n​\n\n创建会话：\n\n​\n\n主要用于初始化一个新的会话环境。\n\n​\n\n一个会话是Bot和用户之间的一段问答交互，可以包含多条消息。\n\n​\n\n创建会话时，可以选择携带初始的消息内容。\n\n​\n\n发起对话：\n\n​\n\n用于在已经存在的会话中发起一次对话。\n\n​\n\n支持添加上下文和流式响应。\n\n​\n\n可以基于历史消息进行上下文关联，提供更符合语境的回复。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/\n\nv3/chat\n\n​\n\n​\n\n权限\n\n​\n\nchat\n\n​\n\n确保调用该接口使用的个人令牌开通了\n\nchat\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n调用此接口发起一次对话，支持添加上下文和流式响应。\n\n​\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n​\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nconversation_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n标识对话发生在哪一次会话中。\n\n​\n\n会话是智能体和用户之间的一段问答交互。一个会话包含一条或多条消息。对话是会话中对智能体的一次调用，智能体会将对话中产生的消息添加到会话中。\n\n​\n\n可以使用已创建的会话，会话中已存在的消息将作为上下文传递给模型。创建会话的方式可参考\n\n​\n\n创建会话\n\n。\n\n​\n\n对于一问一答等不需要区分 conversation 的场合可不传该参数，系统会自动生成一个会话。\n\n​\n\n说明\n\n一个会话中，只能有一个进行中的对话，否则调用此接口时会报错 4016。\n\n​\n\n​\n\n​\n\nBody\n\n​\n\n​\n\nEnterMessage Object\n\n​\n\n​\n\nobject_string object\n\n​\n\n​\n\n​\n\n例如，以下数组是一个完整的多模态内容：\n\n​\n\n​\n\n消息结构示例：\n\n​\n\n​\n\nShortcutCommandDetail Object\n\n​\n\n​\n\n返回结果\n\n​\n\n此接口通过请求 Body 参数 stream 为 true 或 false 来指定 Response 为流式或非流式响应。你可以根据以下步骤判断当前业务场景适合的响应模式。\n\n​\n\n流程图\n\nNo\n\n是否需要打字机效果\n\n显示Response\n\n是否需要\n\n同步处理 Response\n\n流式响应\n\nstream=true\n\n非流式响应\n\nstream=false\n\n是否需要\n\n即时查看 Bot 回复\n\nYES\n\nYES\n\nYES\n\nNo\n\nNo\n\n​\n\n流式响应\n\n​\n\n在流式响应中，服务端不会一次性发送所有数据，而是以数据流的形式逐条发送数据给客户端，数据流中包含对话过程中触发的各种事件（event），直至处理完毕或处理中断。处理结束后，服务端会通过 conversation.message.completed 事件返回拼接后完整的模型回复信息。各个事件的说明可参考\n\n流式响应事件\n\n。\n\n​\n\n流式响应允许客户端在接收到完整的数据流之前就开始处理数据，例如在对话界面实时展示智能体的回复内容，减少客户端等待模型完整回复的时间。\n\n​\n\n流式响应的整体流程如下：\n\n​\n\n​\n\n返回的事件消息体结构如下：\n\n​\n\n​\n\n流式响应事件\n\n​\n\n​\n\n非流式响应\n\n​\n\n在非流式响应中，无论服务端是否处理完毕，立即发送响应消息。其中包括本次对话的 chat_id、状态等元数据信息，但不包括模型处理的最终结果。\n\n​\n\n非流式响应不需要维持长连接，在场景实现上更简单，但通常需要客户端主动查询对话状态和消息详情才能得到完整的数据。你可以通过接口\n\n​\n\n查看对话详情\n\n确认本次对话处理结束后，再调用\n\n​\n\n查看对话消息详情\n\n接口查看模型回复等完整响应内容。流程如下：\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n非流式响应的结构如下：\n\n​\n\n​\n\n响应参数\n\n​\n\n​\n\nMessage Object\n\n​\n\n​\n\n示例\n\n​\n\n流式响应\n\n​\n\n​\n\n非流式响应\n\n​\n\n​\n\n给自定义参数赋值\n\n​\n\n自定义参数用于在智能体交互中存储和管理每个用户的特定信息，例如用户ID、地理位置等，以便实现个性化处理和差异化响应。你可以对话流中输入自定义参数，并在用户与智能体对话时动态更新和读取变量值。\n\n​\n\n1.\n\n在对话流开始节点的输入参数中设置自定义用户变量。本文以自定义参数\n\nuser\n\n为例，你可以根据实际业务场景设置其他参数。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n2.\n\n在调用发起对话接口时，通过\n\nparameters\n\n参数传入变量的值。例如给自定义参数\n\nuser\n\n赋值，API 调用的示例代码如下：\n\n​\n\n​\n\nPrompt 变量\n\n​\n\n例如在智能体的 Prompt 中定义了一个 {{bot_name}} 的变量，在调用接口时，可以通过\n\ncustom_variables\n\n参数传入变量值。\n\n​\n\n​\n\n扣子编程也支持 Jinja2 语法。在下面这个模板中，prompt1 将在 key 变量存在时使用，而 prompt2 将在 key 变量不存在时使用。通过在 custom_variables 中传递 key 的值，你可以控制智能体的响应。\n\n​\n\n​\n\n​\n\n​\n\n携带上下文\n\n​\n\n你可以在发起对话时把多条消息作为上下文一起上传，模型会参考上下文消息，对用户 Query 进行针对性回复。在发起对话时，扣子编程会将以下内容作为上下文传递给模型。\n\n​\n\n会话中的消息\n\n：调用\n\n发起对话\n\n接口时，如果指定了会话 ID，会话中已有的消息会作为上下文传递给模型。\n\n​\n\nadditional_messages 中的消息\n\n：如果 additional_messages 中有多条消息，则最后一条会作为本次用户 Query，其他消息为上下文。\n\n​\n\n扣子编程推荐你通过以下方式在对话中指定上下文：\n\n​\n\n​\n\n以方式一为例，在对话中携带上下文的操作步骤如下：\n\n​\n\n1.\n\n准备上下文消息。\n\n​\n\n​\n\n以下消息列表是一个完整的上下文消息。其中：\n\n​\n\n第 2 行是用户传入的历史消息\n\n​\n\n第 4 行是模型返回的历史消息\n\n​\n\n​\n\n2.\n\n调用\n\n​\n\n创建会话\n\n接口创建一个会话，其中包含以上两条消息，并记录会话 ID。\n\n​\n\n请求示例如下：\n\n​\n\n​\n\n3.\n\n调用发起对话（V3）接口，并指定会话 ID。\n\n​\n\n在对话中可以通过 additional_messages 增加本次对话的 query。这些消息会和对话中已有的消息一起作为上下文被传递给大模型。\n\n​\n\n​\n\n4.\n\n调用接口\n\n​\n\n查看对话消息详情\n\n查看模型回复。\n\n​\n\n你可以从智能体的回复中看出这一次会话是符合上下文语境的。响应信息如下：\n\n​\n\n​\n\n​\n\n​\n\n​\n\n上一篇\n\n删除消息评价\n\n下一篇\n\n查看对话详情",
        "links": []
      },
      "markdown": "- 流式响应 ：智能体在生成回复的同时，将回复消息以数据流的形式逐条发送给客户端。处理结束后，服务端会返回一条完整的智能体回复。详细说明可参考 流式响应 。 ​\n\n- 非流式响应 ：无论对话是否处理完毕，立即发送响应消息。开发者可以通过接口 查看对话详情 确认本次对话处理结束后，再调用 查看对话消息详情 接口查看模型回复等完整响应内容。详细说明可参考 非流式响应 。 ​\n\n- 创建会话： ​\n\n- 主要用于初始化一个新的会话环境。 ​\n\n- 一个会话是Bot和用户之间的一段问答交互，可以包含多条消息。 ​\n\n- 创建会话时，可以选择携带初始的消息内容。 ​\n\n- 发起对话： ​\n\n- 用于在已经存在的会话中发起一次对话。 ​\n\n- 支持添加上下文和流式响应。 ​\n\n- 可以基于历史消息进行上下文关联，提供更符合语境的回复。 ​\n\n| 请求方式​ | POST​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v3/chat​​ |\n| 权限​ | chat​确保调用该接口使用的个人令牌开通了chat权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 调用此接口发起一次对话，支持添加上下文和流式响应。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考​准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| conversation_id​ | String​ | 可选​ | 标识对话发生在哪一次会话中。​会话是智能体和用户之间的一段问答交互。一个会话包含一条或多条消息。对话是会话中对智能体的一次调用，智能体会将对话中产生的消息添加到会话中。​可以使用已创建的会话，会话中已存在的消息将作为上下文传递给模型。创建会话的方式可参考​创建会话。​对于一问一答等不需要区分 conversation 的场合可不传该参数，系统会自动生成一个会话。​说明一个会话中，只能有一个进行中的对话，否则调用此接口时会报错 4016。​​ |\n\n- 可以使用已创建的会话，会话中已存在的消息将作为上下文传递给模型。创建会话的方式可参考 ​ 创建会话 。 ​\n\n- 对于一问一答等不需要区分 conversation 的场合可不传该参数，系统会自动生成一个会话。 ​\n\n\n- ​ ​ ​ ​ ​\n\n\n- ​\n\n- 会话中的消息 ：调用 发起对话 接口时，如果指定了会话 ID，会话中已有的消息会作为上下文传递给模型。 ​\n\n- additional_messages 中的消息 ：如果 additional_messages 中有多条消息，则最后一条会作为本次用户 Query，其他消息为上下文。 ​\n\n\n- ​\n\n- 以下消息列表是一个完整的上下文消息。其中： ​\n\n- 第 2 行是用户传入的历史消息 ​\n\n- 第 4 行是模型返回的历史消息 ​\n\n- ​\n\n\n- 请求示例如下： ​\n\n- ​\n\n\n- 在对话中可以通过 additional_messages 增加本次对话的 query。这些消息会和对话中已有的消息一起作为上下文被传递给大模型。 ​\n\n- ​\n\n\n- 你可以从智能体的回复中看出这一次会话是符合上下文语境的。响应信息如下： ​\n\n- ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/retrieve_chat",
      "title": "查看对话详情",
      "content": {
        "sections": [],
        "full_text": "查看对话详情\n\n查看对话的详细信息。\n\n​\n\n在非流式会话场景中，调用\n\n发起对话\n\n接口后，可以先轮询此 API 确认本轮对话已结束（status=completed），再调用接口\n\n查看对话消息详情\n\n查看本轮对话的模型回复。\n\n​\n\n说明\n\n仅在对话开启了保存历史记录（auto_save_history=true）后，可通过此接口查看对话的详细信息。\n\n​\n\n建议一个对话每秒轮询一次。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v3/chat/retrieve\n\n​\n\n权限\n\n​\n\ngetChat\n\n​\n\n确保调用该接口使用的个人令牌开通了\n\ngetChat\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n查看对话的详细信息。\n\n​\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nconversation_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n738137187639794****\n\n​\n\nConversation ID，即会话的唯一标识。可以在\n\n发起对话\n\n接口 Response 中查看 conversation_id 字段。\n\n​\n\nchat_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n738136585609548****\n\n​\n\nChat ID，即对话的唯一标识。可以在\n\n发起对话\n\n接口 Response 中查看 id 字段，如果是流式响应，则在 Response 的 chat 事件中查看 id 字段。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nObject of\n\nChatV3ChatDetail\n\n​\n\n\\\n\n​\n\n本次对话的基本信息。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此\n\nlogid\n\n及错误码联系扣子团队获取帮助。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\n​\n\nChatV3ChatDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n738137187639794****\n\n​\n\n对话 ID，即对话的唯一标识。\n\n​\n\nconversation_id\n\n​\n\nString\n\n​\n\n738136585609548****\n\n​\n\n会话 ID，即会话的唯一标识。\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n737946218936519****\n\n​\n\n该会话所属的智能体的 ID。\n\n​\n\nstatus\n\n​\n\nString\n\n​\n\ncompleted\n\n​\n\n对话的运行状态。取值为：\n\n​\n\ncreated：对话已创建。\n\n​\n\nin_progress：智能体正在处理中。\n\n​\n\ncompleted：智能体已完成处理，本次对话结束。\n\n​\n\nfailed：对话失败。\n\n​\n\nrequires_action：对话中断，需要进一步处理。\n\n​\n\ncanceled：对话已取消。\n\n​\n\ncreated_at\n\n​\n\nInteger\n\n​\n\n1718609571\n\n​\n\n对话创建的时间。格式为 10 位的 Unixtime 时间戳，单位为秒。\n\n​\n\ncompleted_at\n\n​\n\nInteger\n\n​\n\n1718609575\n\n​\n\n对话结束的时间。格式为 10 位的 Unixtime 时间戳，单位为秒。\n\n​\n\nfailed_at\n\n​\n\nInteger\n\n​\n\n1718609571\n\n​\n\n对话失败的时间。格式为 10 位的 Unixtime 时间戳，单位为秒。\n\n​\n\nmeta_data\n\n​\n\nJSON Map\n\n​\n\n{\"customKey1\":\"customValue1\",\"customKey2\":\"customValue2\"}\n\n​\n\n发起对话时的附加消息，用于传入使用方的自定义数据，\n\n查看对话详情\n\n时也会返回此附加消息。\n\n​\n\n自定义键值对，应指定为 Map 对象格式。长度为 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。\n\n​\n\nlast_error\n\n​\n\nObject of\n\nLastError\n\n​\n\n\\\n\n​\n\n对话运行异常时，此字段中返回详细的错误信息，包括：\n\n​\n\nCode：错误码。Integer 类型。0 表示成功，其他值表示失败。\n\n​\n\nMsg：错误信息。String 类型。\n\n​\n\nsection_id\n\n​\n\nString\n\n​\n\n737946218936519****\n\n​\n\n上下文片段 ID。每次调用\n\n清除上下文\n\nAPI 都会生成一个新的 section_id。\n\n​\n\nrequired_action\n\n​\n\nObject of\n\nRequiredAction\n\n​\n\n{\"type\":\"submit_tool_outputs\",\"submit_tool_outputs\":{\"tool_calls\":[{\"id\":\"738137187639794****\",\"type\":\"function\",\"function\":{\"name\":\"get_weather\",\"arguments\":\"{\\\"city\\\":\\\"Beijing\\\"}\"}}]}}\n\n​\n\n当对话状态为\n\nrequires_action\n\n时，此字段包含需要进一步处理的信息详情，用于继续对话。\n\n​\n\nusage\n\n​\n\nObject of\n\nUsage\n\n​\n\n​\n\n预留字段，无需关注，具体消耗的 Token 请查看火山账单。\n\n​\n\n​\n\nLastError\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n详见响应示例\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\ncode\n\n​\n\nInteger\n\n​\n\n0\n\n​\n\n状态码。\n\n​\n\n0 代表调用成功。\n\n​\n\n​\n\nRequiredAction\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ntype\n\n​\n\nString\n\n​\n\nsubmit_tool_outputs\n\n​\n\n额外操作的类型，枚举值：\n\n​\n\nsubmit_tool_outputs\n\n：需要提交工具输出以继续对话。\n\n​\n\nsubmit_tool_outputs\n\n​\n\nObject of\n\nSubmitToolOutputs\n\n​\n\n{\"tool_calls\":[{\"id\":\"738137187639794****\",\"type\":\"function\",\"function\":{\"name\":\"get_weather\",\"arguments\":\"{\\\"city\\\":\\\"Beijing\\\"}\"}}]}\n\n​\n\n当对话状态为\n\nrequires_action\n\n时，此字段包含需要提交的工具输出信息，用于继续对话。通常包含一个工具调用列表，每个工具调用包含工具类型和参数。\n\n​\n\n​\n\nSubmitToolOutputs\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ntool_calls\n\n​\n\nArray of\n\nInterruptPlugin\n\n​\n\n[{\"id\":\"738137187639794****\",\"type\":\"function\",\"function\":{\"name\":\"get_weather\",\"arguments\":\"{\\\"city\\\":\\\"Beijing\\\"}\"}}]\n\n​\n\n当对话状态为\n\nrequires_action\n\n时，此字段包含需要提交的工具调用列表，每个工具调用包含工具类型和参数。\n\n​\n\n​\n\nInterruptPlugin\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n738137187639794****\n\n​\n\n上报运行结果的 ID。\n\n​\n\ntype\n\n​\n\nString\n\n​\n\nfunction\n\n​\n\n工具类型，枚举值包括：\n\n​\n\nfunction：待执行的方法，通常是端插件。触发端插件时会返回此枚举值。\n\n​\n\nreply_message：待回复的选项。触发工作流问答节点时会返回此枚举值。\n\n​\n\nfunction\n\n​\n\nObject of\n\nInterruptFunction\n\n​\n\n{\"name\":\"get_weather\",\"arguments\":\"{\\\"city\\\":\\\"Beijing\\\"}\"}\n\n​\n\n当对话状态为\n\nrequires_action\n\n时，此字段表示需要调用的工具或函数的定义，包含函数名称和参数。通常用于指定工具的具体执行方法。\n\n​\n\n​\n\nInterruptFunction\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nname\n\n​\n\nString\n\n​\n\nget_weather\n\n​\n\n当对话状态为\n\nrequires_action\n\n时，此字段表示需要调用的工具或函数的名称，用于继续对话。通常与\n\narguments\n\n字段配合使用，指定工具的具体执行方法。\n\n​\n\narguments\n\n​\n\nString\n\n​\n\n{\"city\":\"Beijing\"}\n\n​\n\n当对话状态为\n\nrequires_action\n\n时，此字段表示需要调用的工具或函数的参数，通常为 JSON 格式的字符串，用于指定工具的具体执行参数。\n\n​\n\n​\n\nUsage\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ninput_count\n\n​\n\nInteger\n\n​\n\n50\n\n​\n\n输入内容所消耗的 Token 数，包含对话上下文、系统提示词、用户当前输入等所有输入类的 Token 消耗。\n\n​\n\ntoken_count\n\n​\n\nInteger\n\n​\n\n150\n\n​\n\n本次 API 调用消耗的 Token 总量，包括输入和输出两部分的消耗。\n\n​\n\noutput_count\n\n​\n\nInteger\n\n​\n\n100\n\n​\n\n大模型输出的内容所消耗的 Token 数。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request GET 'https\n\n:\n\n//api.coze.cn/v3/chat/retrieve?conversation_id=738137187639794****&chat_id=738136585609548****' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer *$Access_Token*' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n​\n\n返回示例\n\n​\n\n状态正常的对话\n\n需要使用方额外处理的对话\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"bot_id\"\n\n:\n\n\"737946218936519****\"\n\n,\n\n​\n\n\"completed_at\"\n\n:\n\n1718609575\n\n,\n\n​\n\n\"conversation_id\"\n\n:\n\n\"738136585609548****\"\n\n,\n\n​\n\n\"created_at\"\n\n:\n\n1718609571\n\n,\n\n​\n\n\"id\"\n\n:\n\n\"738137187639794****\"\n\n,\n\n​\n\n\"status\"\n\n:\n\n\"completed\"\n\n,\n\n​\n\n\"usage\"\n\n:\n\n{\n\n​\n\n\"input_count\"\n\n:\n\n242\n\n,\n\n​\n\n\"output_count\"\n\n:\n\n56\n\n,\n\n​\n\n\"token_count\"\n\n:\n\n298\n\n​\n\n}\n\n​\n\n},\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n​\n\n错误码\n\n​\n\n该接口有两处错误需要判断。一个位于回包的\n\n.code\n\n，对应该接口本身的错误；另一个位于回包的\n\n.last_error.code\n\n，对应/v3/chat的错误。\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n发起对话\n\n下一篇\n\n查看对话消息详情",
        "links": []
      },
      "markdown": "- 仅在对话开启了保存历史记录（auto_save_history=true）后，可通过此接口查看对话的详细信息。 ​\n\n- 建议一个对话每秒轮询一次。 ​\n\n| 请求方式​ | GET |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v3/chat/retrieve​ |\n| 权限​ | getChat​确保调用该接口使用的个人令牌开通了getChat权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 查看对话的详细信息。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| conversation_id​ | String​ | 必选​ | 738137187639794****​ | Conversation ID，即会话的唯一标识。可以在发起对话接口 Response 中查看 conversation_id 字段。​ |\n| chat_id​ | String​ | 必选​ | 738136585609548****​ | Chat ID，即对话的唯一标识。可以在发起对话接口 Response 中查看 id 字段，如果是流式响应，则在 Response 的 chat 事件中查看 id 字段。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | Object ofChatV3ChatDetail​ | \\​ | 本次对话的基本信息。​ |\n| detail​ | Object ofResponseDetail​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此logid及错误码联系扣子团队获取帮助。​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 738137187639794****​ | 对话 ID，即对话的唯一标识。​ |\n| conversation_id​ | String​ | 738136585609548****​ | 会话 ID，即会话的唯一标识。​ |\n| bot_id​ | String​ | 737946218936519****​ | 该会话所属的智能体的 ID。​ |\n| status​ | String​ | completed​ | 对话的运行状态。取值为：​created：对话已创建。​in_progress：智能体正在处理中。​completed：智能体已完成处理，本次对话结束。​failed：对话失败。​requires_action：对话中断，需要进一步处理。​canceled：对话已取消。​ |\n| created_at​ | Integer​ | 1718609571​ | 对话创建的时间。格式为 10 位的 Unixtime 时间戳，单位为秒。​ |\n| completed_at​ | Integer​ | 1718609575​ | 对话结束的时间。格式为 10 位的 Unixtime 时间戳，单位为秒。​ |\n| failed_at​ | Integer​ | 1718609571​ | 对话失败的时间。格式为 10 位的 Unixtime 时间戳，单位为秒。​ |\n| meta_data​ | JSON Map​ | {\"customKey1\":\"customValue1\",\"customKey2\":\"customValue2\"}​ | 发起对话时的附加消息，用于传入使用方的自定义数据，查看对话详情时也会返回此附加消息。​自定义键值对，应指定为 Map 对象格式。长度为 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。​ |\n| last_error​ | Object ofLastError​ | \\​ | 对话运行异常时，此字段中返回详细的错误信息，包括：​Code：错误码。Integer 类型。0 表示成功，其他值表示失败。​Msg：错误信息。String 类型。​ |\n| section_id​ | String​ | 737946218936519****​ | 上下文片段 ID。每次调用清除上下文API 都会生成一个新的 section_id。​ |\n| required_action​ | Object ofRequiredAction​ | {\"type\":\"submit_tool_outputs\",\"submit_tool_outputs\":{\"tool_calls\":[{\"id\":\"738137187639794****\",\"type\":\"function\",\"function\":{\"name\":\"get_weather\",\"arguments\":\"{\\\"city\\\":\\\"Beijing\\\"}\"}}]}}​ | 当对话状态为requires_action时，此字段包含需要进一步处理的信息详情，用于继续对话。​ |\n| usage​ | Object ofUsage​ | ​ | 预留字段，无需关注，具体消耗的 Token 请查看火山账单。​ |\n\n- created：对话已创建。 ​\n\n- in_progress：智能体正在处理中。 ​\n\n- completed：智能体已完成处理，本次对话结束。 ​\n\n- failed：对话失败。 ​\n\n- requires_action：对话中断，需要进一步处理。 ​\n\n- canceled：对话已取消。 ​\n\n- Code：错误码。Integer 类型。0 表示成功，其他值表示失败。 ​\n\n- Msg：错误信息。String 类型。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| msg​ | String​ | 详见响应示例​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​ |\n| code​ | Integer​ | 0​ | 状态码。​0 代表调用成功。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| type​ | String​ | submit_tool_outputs​ | 额外操作的类型，枚举值：​submit_tool_outputs：需要提交工具输出以继续对话。​ |\n| submit_tool_outputs​ | Object ofSubmitToolOutputs​ | {\"tool_calls\":[{\"id\":\"738137187639794****\",\"type\":\"function\",\"function\":{\"name\":\"get_weather\",\"arguments\":\"{\\\"city\\\":\\\"Beijing\\\"}\"}}]}​ | 当对话状态为requires_action时，此字段包含需要提交的工具输出信息，用于继续对话。通常包含一个工具调用列表，每个工具调用包含工具类型和参数。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| tool_calls​ | Array ofInterruptPlugin​ | [{\"id\":\"738137187639794****\",\"type\":\"function\",\"function\":{\"name\":\"get_weather\",\"arguments\":\"{\\\"city\\\":\\\"Beijing\\\"}\"}}]​ | 当对话状态为requires_action时，此字段包含需要提交的工具调用列表，每个工具调用包含工具类型和参数。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 738137187639794****​ | 上报运行结果的 ID。​ |\n| type​ | String​ | function​ | 工具类型，枚举值包括：​function：待执行的方法，通常是端插件。触发端插件时会返回此枚举值。​reply_message：待回复的选项。触发工作流问答节点时会返回此枚举值。​ |\n| function​ | Object ofInterruptFunction​ | {\"name\":\"get_weather\",\"arguments\":\"{\\\"city\\\":\\\"Beijing\\\"}\"}​ | 当对话状态为requires_action时，此字段表示需要调用的工具或函数的定义，包含函数名称和参数。通常用于指定工具的具体执行方法。​ |\n\n- function：待执行的方法，通常是端插件。触发端插件时会返回此枚举值。 ​\n\n- reply_message：待回复的选项。触发工作流问答节点时会返回此枚举值。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| name​ | String​ | get_weather​ | 当对话状态为requires_action时，此字段表示需要调用的工具或函数的名称，用于继续对话。通常与arguments字段配合使用，指定工具的具体执行方法。​ |\n| arguments​ | String​ | {\"city\":\"Beijing\"}​ | 当对话状态为requires_action时，此字段表示需要调用的工具或函数的参数，通常为 JSON 格式的字符串，用于指定工具的具体执行参数。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| input_count​ | Integer​ | 50​ | 输入内容所消耗的 Token 数，包含对话上下文、系统提示词、用户当前输入等所有输入类的 Token 消耗。​ |\n| token_count​ | Integer​ | 150​ | 本次 API 调用消耗的 Token 总量，包括输入和输出两部分的消耗。​ |\n| output_count​ | Integer​ | 100​ | 大模型输出的内容所消耗的 Token 数。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/list_chat_messages",
      "title": "查看对话消息详情",
      "content": {
        "sections": [],
        "full_text": "查看对话消息详情\n\n查看指定对话中除 Query 以外的其他消息，包括模型回复、智能体执行的中间结果等消息。\n\n​\n\n接口描述\n\n​\n\n查看消息列表\n\nAPI 与\n\n查看对话消息详情\n\nAPI 的区别在于：\n\n​\n\n查看消息列表\n\nAPI 用于查询指定会话（conversation）中的消息记录，不仅包括开发者在会话中手动插入的每一条消息和用户发送的 Query，也包括调用\n\n发起对话\n\nAPI 得到的 type=answer 的智能体回复，但不包括 type=function_call、tool_response 和 follow-up 类型的对话中间态消息。\n\n​\n\n查看对话消息详情\n\nAPI 通常用于非流式对话场景中，查看某次对话（chat）中 type=answer 的智能体回复及 type=function_call、tool_response 和 follow-up 类型类型的对话中间态消息。不包括用户发送的 Query。\n\n​\n\n说明\n\n调用此 API 之前，建议先以每秒最多 1 次的频率轮询\n\n查看对话详情\n\nAPI 确认本轮对话已结束（status=completed），否则调用此 API 时获取到的消息内容可能不完整。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v3/chat/message/list\n\n​\n\n权限\n\n​\n\nchat\n\n、\n\nlistMessage\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nchat\n\n和\n\nlistMessage\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n查看指定对话中除 Query 以外的其他消息，包括模型回复、智能体执行的中间结果等消息。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nconversation_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n738216760624714****\n\n​\n\nConversation ID，即会话的唯一标识。可以在\n\n发起对话\n\n接口 Response 中查看 conversation_id 字段。\n\n​\n\nchat_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n738147352534297****\n\n​\n\nChat ID，即对话的唯一标识。可以在\n\n发起对话\n\n接口 Response 中查看 id 字段，如果是流式响应，则在 Response 的 chat 事件中查看 id 字段。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nArray of\n\nChatV3MessageDetail\n\n​\n\n[ { \"bot_id\": \"737946218936519****\", \"content\": \"{\\\"msg_type\\\":\\\"generate_answer_finish\\\",\\\"data\\\":\\\"\\\",\\\"from_module\\\":null,\\\"from_unit\\\":null}\", \"content_type\": \"text\", \"conversation_id\": \"738147352534297****\", \"id\": \"738216762080970****\", \"role\": \"assistant\", \"type\": \"verbose\" }]\n\n​\n\n指定对话中除 Query 以外的其他消息，包括模型回复、智能体执行的中间结果等消息。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{ \"logid\": \"20250106172024B5F607030EFFAD653960\" }\n\n​\n\n响应详情信息。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\n​\n\nChatV3MessageDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n738216762080970****\n\n​\n\n智能体回复的消息的 Message ID，即消息的唯一标识。\n\n​\n\nconversation_id\n\n​\n\nString\n\n​\n\n738147352534297****\n\n​\n\n此消息所在的会话 ID。\n\n​\n\nrole\n\n​\n\nString\n\n​\n\nassistant\n\n​\n\n发送这条消息的实体。取值：\n\n​\n\nuser：代表该条消息内容是用户发送的。\n\n​\n\nassistant：代表该条消息内容是智能体发送的。\n\n​\n\ntype\n\n​\n\nString\n\n​\n\nverbose\n\n​\n\n消息类型。\n\n​\n\nquestion\n\n：用户输入内容。\n\n​\n\nanswer\n\n：智能体返回给用户的消息内容，支持增量返回。如果工作流绑定了 messge 节点，可能会存在多 answer 场景，此时可以用流式返回的结束标志来判断所有 answer 完成。\n\n​\n\nfunction_call\n\n：智能体对话过程中调用函数（function call）的中间结果。\n\n​\n\ntool_output\n\n：调用工具 （function call）后返回的结果。\n\n​\n\ntool_response\n\n：调用工具 （function call）后返回的结果。\n\n​\n\nfollow_up\n\n：如果在智能体上配置打开了用户问题建议开关，则会返回推荐问题相关的回复内容。\n\n​\n\nverbose\n\n：多 answer 场景下，服务端会返回一个 verbose 包，对应的 content 为 JSON 格式，content.msg_type =generate_answer_finish 代表全部 answer 回复完成。\n\n​\n\n说明\n\n仅发起对话（v3）接口支持将此参数作为入参，且：\n\n​\n\n如果 autoSaveHistory=true，type 支持设置为 question 或 answer。\n\n​\n\n如果 autoSaveHistory=false，type 支持设置为 question、answer、function_call、tool_output、tool_response。\n\n​\n\n其中，type=question 只能和 role=user 对应，即仅用户角色可以且只能发起 question 类型的消息。详细说明可参考\n\n消息 type 说明\n\n。\n\n​\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n737946218936519****\n\n​\n\n编写此消息的智能体 ID。此参数仅在对话产生的消息中返回。\n\n​\n\nchat_id\n\n​\n\nString\n\n​\n\n747946218936519****\n\n​\n\nChat ID。此参数仅在对话产生的消息中返回。\n\n​\n\nsection_id\n\n​\n\nString\n\n​\n\n767946218936519****\n\n​\n\n上下文片段 ID。每次调用\n\n清除上下文\n\nAPI 都会生成一个新的 section_id。\n\n​\n\ncontent\n\n​\n\nString\n\n​\n\n{\"msg_type\":\"generate_answer_finish\",\"data\":\"\",\"from_module\":null,\"from_unit\":null}\n\n​\n\n消息的内容，支持纯文本、多模态（文本、图片、文件混合输入）、卡片等多种类型的内容。\n\n​\n\n说明\n\n当\n\nrole\n\n为 user 时，支持返回多模态内容。\n\n​\n\n当\n\nrole\n\n为 assistant 时，只支持返回纯文本内容。\n\n​\n\n​\n\nmeta_data\n\n​\n\nJSON Map\n\n​\n\n{ \"uuid\": \"newid1234\" }\n\n​\n\n创建消息时的附加消息，\n\n查看消息列表\n\n时也会返回此附加消息。\n\n​\n\ncreated_at\n\n​\n\nLong\n\n​\n\n1718592898\n\n​\n\n消息的创建时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。\n\n​\n\nupdated_at\n\n​\n\nLong\n\n​\n\n1718592898\n\n​\n\n消息的更新时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。\n\n​\n\ncontent_type\n\n​\n\nString\n\n​\n\ntext\n\n​\n\n消息内容的类型，取值包括：\n\n​\n\ntext：文本。\n\n​\n\nobject_string：多模态内容，即文本和文件的组合、文本和图片的组合。\n\n​\n\ncard：卡片。此枚举值仅在接口响应中出现，不支持作为入参。\n\n​\n\nreasoning_content\n\n​\n\nString\n\n​\n\n好的，我现在需要给一个13岁的大学生提供学习建议。首先，我得考虑用户的情况……\n\n​\n\n模型的思维链（CoT），展示模型如何将复杂问题逐步分解为多个简单步骤并推导出最终答案。仅当模型支持深度思考、且智能体开启了深度思考时返回该字段，当前支持深度思考的模型请参考\n\n模型能力差异\n\n。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request GET 'https\n\n:\n\n//api.coze.cn/v3/chat/message/list?conversation_id=738216760624714****&chat_id=738147352534297****' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n​\n\n返回示例\n\n​\n\n基础对话\n\n图文对话\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"data\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"bot_id\"\n\n:\n\n\"737946218936519****\"\n\n,\n\n​\n\n\"content\"\n\n:\n\n\"{\\\"msg_type\\\":\\\"generate_answer_finish\\\",\\\"data\\\":\\\"\\\",\\\"from_module\\\":null,\\\"from_unit\\\":null}\"\n\n,\n\n​\n\n\"content_type\"\n\n:\n\n\"text\"\n\n,\n\n​\n\n\"conversation_id\"\n\n:\n\n\"738147352534297****\"\n\n,\n\n​\n\n\"id\"\n\n:\n\n\"738216762080970****\"\n\n,\n\n​\n\n\"role\"\n\n:\n\n\"assistant\"\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"verbose\"\n\n​\n\n},\n\n​\n\n{\n\n​\n\n\"bot_id\"\n\n:\n\n\"7379462189365198898\"\n\n,\n\n​\n\n\"content\"\n\n:\n\n\"2024 年 10 月 1 日是星期二。您可以通过日历或者相关的日期查询工具来核实确认。 \"\n\n,\n\n​\n\n\"content_type\"\n\n:\n\n\"text\"\n\n,\n\n​\n\n\"conversation_id\"\n\n:\n\n\"738147352534297****\"\n\n,\n\n​\n\n\"id\"\n\n:\n\n\"738216760624724****\"\n\n,\n\n​\n\n\"role\"\n\n:\n\n\"assistant\"\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"answer\"\n\n​\n\n}\n\n​\n\n],\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20250106172024B5F607030EFF***\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n查看对话详情\n\n下一篇\n\n提交工具执行结果",
        "links": []
      },
      "markdown": "- 查看消息列表 API 用于查询指定会话（conversation）中的消息记录，不仅包括开发者在会话中手动插入的每一条消息和用户发送的 Query，也包括调用 发起对话 API 得到的 type=answer 的智能体回复，但不包括 type=function_call、tool_response 和 follow-up 类型的对话中间态消息。 ​\n\n- 查看对话消息详情 API 通常用于非流式对话场景中，查看某次对话（chat）中 type=answer 的智能体回复及 type=function_call、tool_response 和 follow-up 类型类型的对话中间态消息。不包括用户发送的 Query。 ​\n\n| 请求方式​ | GET |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v3/chat/message/list​ |\n| 权限​ | chat、listMessage​确保调用该接口使用的访问令牌开通了chat和listMessage权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 查看指定对话中除 Query 以外的其他消息，包括模型回复、智能体执行的中间结果等消息。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| conversation_id​ | String​ | 必选​ | 738216760624714****​ | Conversation ID，即会话的唯一标识。可以在发起对话接口 Response 中查看 conversation_id 字段。​ |\n| chat_id​ | String​ | 必选​ | 738147352534297****​ | Chat ID，即对话的唯一标识。可以在发起对话接口 Response 中查看 id 字段，如果是流式响应，则在 Response 的 chat 事件中查看 id 字段。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | Array ofChatV3MessageDetail​ | [ { \"bot_id\": \"737946218936519****\", \"content\": \"{\\\"msg_type\\\":\\\"generate_answer_finish\\\",\\\"data\\\":\\\"\\\",\\\"from_module\\\":null,\\\"from_unit\\\":null}\", \"content_type\": \"text\", \"conversation_id\": \"738147352534297****\", \"id\": \"738216762080970****\", \"role\": \"assistant\", \"type\": \"verbose\" }]​ | 指定对话中除 Query 以外的其他消息，包括模型回复、智能体执行的中间结果等消息。​ |\n| detail​ | Object ofResponseDetail​ | { \"logid\": \"20250106172024B5F607030EFFAD653960\" }​ | 响应详情信息。​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 738216762080970****​ | 智能体回复的消息的 Message ID，即消息的唯一标识。​ |\n| conversation_id​ | String​ | 738147352534297****​ | 此消息所在的会话 ID。​ |\n| role​ | String​ | assistant​ | 发送这条消息的实体。取值：​user：代表该条消息内容是用户发送的。​assistant：代表该条消息内容是智能体发送的。​ |\n| type​ | String​ | verbose​ | 消息类型。​question：用户输入内容。​answer：智能体返回给用户的消息内容，支持增量返回。如果工作流绑定了 messge 节点，可能会存在多 answer 场景，此时可以用流式返回的结束标志来判断所有 answer 完成。​function_call：智能体对话过程中调用函数（function call）的中间结果。​tool_output：调用工具 （function call）后返回的结果。​tool_response：调用工具 （function call）后返回的结果。​follow_up：如果在智能体上配置打开了用户问题建议开关，则会返回推荐问题相关的回复内容。​verbose：多 answer 场景下，服务端会返回一个 verbose 包，对应的 content 为 JSON 格式，content.msg_type =generate_answer_finish 代表全部 answer 回复完成。​说明仅发起对话（v3）接口支持将此参数作为入参，且：​如果 autoSaveHistory=true，type 支持设置为 question 或 answer。​如果 autoSaveHistory=false，type 支持设置为 question、answer、function_call、tool_output、tool_response。​其中，type=question 只能和 role=user 对应，即仅用户角色可以且只能发起 question 类型的消息。详细说明可参考消息 type 说明。​​ |\n| bot_id​ | String​ | 737946218936519****​ | 编写此消息的智能体 ID。此参数仅在对话产生的消息中返回。​ |\n| chat_id​ | String​ | 747946218936519****​ | Chat ID。此参数仅在对话产生的消息中返回。​ |\n| section_id​ | String​ | 767946218936519****​ | 上下文片段 ID。每次调用清除上下文API 都会生成一个新的 section_id。​ |\n| content​ | String​ | {\"msg_type\":\"generate_answer_finish\",\"data\":\"\",\"from_module\":null,\"from_unit\":null}​ | 消息的内容，支持纯文本、多模态（文本、图片、文件混合输入）、卡片等多种类型的内容。​说明当role为 user 时，支持返回多模态内容。​当role为 assistant 时，只支持返回纯文本内容。​​ |\n| meta_data​ | JSON Map​ | { \"uuid\": \"newid1234\" }​ | 创建消息时的附加消息，查看消息列表时也会返回此附加消息。​ |\n| created_at​ | Long​ | 1718592898​ | 消息的创建时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。​ |\n| updated_at​ | Long​ | 1718592898​ | 消息的更新时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。​ |\n| content_type​ | String​ | text​ | 消息内容的类型，取值包括：​text：文本。​object_string：多模态内容，即文本和文件的组合、文本和图片的组合。​card：卡片。此枚举值仅在接口响应中出现，不支持作为入参。​ |\n| reasoning_content​ | String​ | 好的，我现在需要给一个13岁的大学生提供学习建议。首先，我得考虑用户的情况……​ | 模型的思维链（CoT），展示模型如何将复杂问题逐步分解为多个简单步骤并推导出最终答案。仅当模型支持深度思考、且智能体开启了深度思考时返回该字段，当前支持深度思考的模型请参考模型能力差异。​ |\n\n- user：代表该条消息内容是用户发送的。 ​\n\n- assistant：代表该条消息内容是智能体发送的。 ​\n\n- question ：用户输入内容。 ​\n\n- answer ：智能体返回给用户的消息内容，支持增量返回。如果工作流绑定了 messge 节点，可能会存在多 answer 场景，此时可以用流式返回的结束标志来判断所有 answer 完成。 ​\n\n- function_call ：智能体对话过程中调用函数（function call）的中间结果。 ​\n\n- tool_output ：调用工具 （function call）后返回的结果。 ​\n\n- tool_response ：调用工具 （function call）后返回的结果。 ​\n\n- follow_up ：如果在智能体上配置打开了用户问题建议开关，则会返回推荐问题相关的回复内容。 ​\n\n- verbose ：多 answer 场景下，服务端会返回一个 verbose 包，对应的 content 为 JSON 格式，content.msg_type =generate_answer_finish 代表全部 answer 回复完成。 ​\n\n- 如果 autoSaveHistory=true，type 支持设置为 question 或 answer。 ​\n\n- 如果 autoSaveHistory=false，type 支持设置为 question、answer、function_call、tool_output、tool_response。 ​\n\n- 当 role 为 user 时，支持返回多模态内容。 ​\n\n- 当 role 为 assistant 时，只支持返回纯文本内容。 ​\n\n- text：文本。 ​\n\n- object_string：多模态内容，即文本和文件的组合、文本和图片的组合。 ​\n\n- card：卡片。此枚举值仅在接口响应中出现，不支持作为入参。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/chat_submit_tool_outputs",
      "title": "提交工具执行结果",
      "content": {
        "sections": [],
        "full_text": "提交工具执行结果\n\n调用此接口提交工具执行的结果。\n\n​\n\n接口说明\n\n​\n\n你可以将需要客户端执行的操作定义为插件，对话中如果触发这个插件，流式 event 响应信息会提示“conversation.chat.requires_action”，此时需要执行客户端的操作后，通过此接口提交插件执行后的结果。\n\n​\n\n说明\n\n调用\n\n发起对话\n\nAPI 时，\n\nauto_save_history\n\n参数需要设置为\n\ntrue\n\n，否则调用本 API 提交工具执行结果时会提示 5000 错误。\n\n​\n\n仅触发了端插件的对话需要调用此接口提交执行结果。端插件是非扣子服务端执行的插件，需要开发者自行执行任务后提交结果，通常用于 IoT 等设备控制场景。详细说明可参考\n\n通过 API 使用端插件\n\n。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v3/chat/submit_tool_outputs\n\n​\n\n​\n\n权限\n\n​\n\nsubmitToolChat\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nsubmitToolChat\n\n权限，详细信息参考\n\n准备工作\n\n。\n\n​\n\n接口说明\n\n​\n\n调用接口提交工具执行结果。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n鉴权方式\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nconversation_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n748348012449138***\n\n​\n\nConversation ID，即会话的唯一标识。可以在\n\n发起对话\n\n接口 Response 中查看 conversation_id 字段。\n\n​\n\nchat_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n738137187639794***\n\n​\n\nChat ID，即对话的唯一标识。可以在\n\n发起对话\n\n接口 Response 中查看 id 字段，如果是流式响应，则在 Response 的 chat 事件中查看 id 字段。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\nToolOutput\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n非流式响应\n\n​\n\n在非流式响应中，无论服务端是否处理完毕，立即发送响应消息。其中包括本次对话的 chat_id、状态等元数据信息，但不包括模型处理的最终结果。\n\n​\n\n非流式响应不需要维持长连接，在场景实现上更简单，但通常需要客户端主动查询对话状态和消息详情才能得到完整的数据。你可以通过接口\n\n​\n\n查看对话详情\n\n确认本次对话处理结束后，再调用\n\n​\n\n查看对话消息详情\n\n接口查看模型回复等完整响应内容。流程如下：\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n非流式响应的结构如下：\n\n​\n\n​\n\nChatV3ChatDetail\n\n​\n\n​\n\nLastError\n\n​\n\n​\n\nRequiredAction\n\n​\n\n​\n\nSubmitToolOutputs\n\n​\n\n​\n\nInterruptPlugin\n\n​\n\n​\n\nInterruptFunction\n\n​\n\n​\n\nUsage\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n流式响应\n\n​\n\n在流式响应中，服务端不会一次性发送所有数据，而是以数据流的形式逐条发送数据给客户端，数据流中包含对话过程中触发的各种事件（event），直至处理完毕或处理中断。处理结束后，服务端会通过 conversation.message.completed 事件返回拼接后完整的模型回复信息。各个事件的说明可参考\n\n流式响应事件\n\n。\n\n​\n\n流式响应允许客户端在接收到完整的数据流之前就开始处理数据，例如在对话界面实时展示智能体的回复内容，减少客户端等待模型完整回复的时间。\n\n​\n\n流式响应的整体流程如下：\n\n​\n\n​\n\n​\n\n​\n\nChatV3MessageDetail\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n查看对话消息详情\n\n下一篇\n\n取消进行中的对话",
        "links": []
      },
      "markdown": "- 调用 发起对话 API 时， auto_save_history 参数需要设置为 true ，否则调用本 API 提交工具执行结果时会提示 5000 错误。 ​\n\n- 仅触发了端插件的对话需要调用此接口提交执行结果。端插件是非扣子服务端执行的插件，需要开发者自行执行任务后提交结果，通常用于 IoT 等设备控制场景。详细说明可参考 通过 API 使用端插件 。 ​\n\n| 请求方式​ | POST​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v3/chat/submit_tool_outputs​​ |\n| 权限​ | submitToolChat​确保调用该接口使用的访问令牌开通了submitToolChat权限，详细信息参考准备工作。​ |\n| 接口说明​ | 调用接口提交工具执行结果。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考鉴权方式。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| conversation_id​ | String​ | 必选​ | 748348012449138***​ | Conversation ID，即会话的唯一标识。可以在发起对话接口 Response 中查看 conversation_id 字段。​ |\n| chat_id​ | String​ | 必选​ | 738137187639794***​ | Chat ID，即对话的唯一标识。可以在发起对话接口 Response 中查看 id 字段，如果是流式响应，则在 Response 的 chat 事件中查看 id 字段。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/chat_cancel",
      "title": "取消进行中的对话",
      "content": {
        "sections": [],
        "full_text": "取消进行中的对话\n\n调用此接口取消进行中的对话。\n\n​\n\n调用\n\n发起对话\n\n接口时，如果对话触发了复杂的工作流、图像流，或模型处理数据量大时，对话可能耗时较久。对话进行中时，用户无法在此会话中发起新的对话。此时可以调用此接口取消正在进行中的对话，取消后，对话转为已取消状态（status=canceled），你可以在会话中创建新的对话。\n\n​\n\n注意事项\n\n​\n\n调用取消对话 API 仅切换对话状态，不会中断 chat API 的流式回复，同时根据完整回复内容来计算消耗的模型 Token。如需中断流式回复、停止打印机效果，可以在调用此 API 之后主动中断客户端连接，例如调用浏览器 Web API\n\nAbortController\n\n。\n\n​\n\n取消对话后，本轮用户的 Query 和智能体的回复不会记录为对话的上下文。\n\n​\n\n不支持取消以下状态的对话。你可以通过\n\n查看对话详情\n\n接口的 status 字段查看对话状态。\n\n​\n\ncompleted：会话结束。\n\n​\n\nfailed：会话失败。\n\n​\n\nrequires_action：会话中断。\n\n​\n\n对话过程中的状态流转：\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v3/chat/cancel\n\n​\n\n权限\n\n​\n\ncancelChat\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\ncancelChat\n\n权限，详细信息可参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n调用此接口取消进行中的对话。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n鉴权方式\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n请求正文的方式。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nchat_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n7398048669188****\n\n​\n\n对话 ID，即 Chat ID。可以在\n\n发起对话\n\n接口 Response 中查看 id 字段，如果是流式响应，则在 Response 的 chat 事件中查看 id 字段。\n\n​\n\nconversation_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n7397787494399****\n\n​\n\n会话 ID，即 Conversation ID。可以在\n\n发起对话\n\n接口 Response 中查看 conversation_id 字段。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nObject of\n\nChatV3ChatDetail\n\n​\n\n详见响应示例\n\n​\n\n被取消对话的详细信息。详细说明可参考\n\nChatV3ChatDetail\n\n。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n详见响应示例\n\n​\n\n详细信息。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。\n\n​\n\n0 表示调用成功。\n\n​\n\n其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\n​\n\nChatV3ChatDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n738137187639794****\n\n​\n\n对话 ID，即对话的唯一标识。\n\n​\n\nconversation_id\n\n​\n\nString\n\n​\n\n738136585609548****\n\n​\n\n会话 ID，即会话的唯一标识。\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n737946218936519****\n\n​\n\n该会话所属的智能体的 ID。\n\n​\n\nstatus\n\n​\n\nString\n\n​\n\ncompleted\n\n​\n\n对话的运行状态。取值为：\n\n​\n\ncreated：对话已创建。\n\n​\n\nin_progress：智能体正在处理中。\n\n​\n\ncompleted：智能体已完成处理，本次对话结束。\n\n​\n\nfailed：对话失败。\n\n​\n\nrequires_action：对话中断，需要进一步处理。\n\n​\n\ncanceled：对话已取消。\n\n​\n\ncreated_at\n\n​\n\nInteger\n\n​\n\n1718609571\n\n​\n\n对话创建的时间。格式为 10 位的 Unixtime 时间戳，单位为秒。\n\n​\n\ncompleted_at\n\n​\n\nInteger\n\n​\n\n1718609575\n\n​\n\n对话结束的时间。格式为 10 位的 Unixtime 时间戳，单位为秒。\n\n​\n\nfailed_at\n\n​\n\nInteger\n\n​\n\n1718609571\n\n​\n\n对话失败的时间。格式为 10 位的 Unixtime 时间戳，单位为秒。\n\n​\n\nmeta_data\n\n​\n\nJSON Map\n\n​\n\n{\"customKey1\":\"customValue1\",\"customKey2\":\"customValue2\"}\n\n​\n\n发起对话时的附加消息，用于传入使用方的自定义数据，\n\n查看对话详情\n\n时也会返回此附加消息。\n\n​\n\n自定义键值对，应指定为 Map 对象格式。长度为 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。\n\n​\n\nlast_error\n\n​\n\nObject of\n\nLastError\n\n​\n\n\\\n\n​\n\n对话运行异常时，此字段中返回详细的错误信息，包括：\n\n​\n\nCode：错误码。Integer 类型。0 表示成功，其他值表示失败。\n\n​\n\nMsg：错误信息。String 类型。\n\n​\n\nsection_id\n\n​\n\nString\n\n​\n\n737946218936519****\n\n​\n\n上下文片段 ID。每次调用\n\n清除上下文\n\nAPI 都会生成一个新的 section_id。\n\n​\n\nrequired_action\n\n​\n\nObject of\n\nRequiredAction\n\n​\n\n{\"type\":\"submit_tool_outputs\",\"submit_tool_outputs\":{\"tool_calls\":[{\"id\":\"738137187639794****\",\"type\":\"function\",\"function\":{\"name\":\"get_weather\",\"arguments\":\"{\\\"city\\\":\\\"Beijing\\\"}\"}}]}}\n\n​\n\n当对话状态为\n\nrequires_action\n\n时，此字段包含需要进一步处理的信息详情，用于继续对话。\n\n​\n\nusage\n\n​\n\nObject of\n\nUsage\n\n​\n\n​\n\n预留字段，无需关注，具体消耗的 Token 请查看火山账单。\n\n​\n\n​\n\nLastError\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n详见响应示例\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\ncode\n\n​\n\nInteger\n\n​\n\n0\n\n​\n\n状态码。\n\n​\n\n0 代表调用成功。\n\n​\n\n​\n\nRequiredAction\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ntype\n\n​\n\nString\n\n​\n\nsubmit_tool_outputs\n\n​\n\n额外操作的类型，枚举值：\n\n​\n\nsubmit_tool_outputs\n\n：需要提交工具输出以继续对话。\n\n​\n\nsubmit_tool_outputs\n\n​\n\nObject of\n\nSubmitToolOutputs\n\n​\n\n{\"tool_calls\":[{\"id\":\"738137187639794****\",\"type\":\"function\",\"function\":{\"name\":\"get_weather\",\"arguments\":\"{\\\"city\\\":\\\"Beijing\\\"}\"}}]}\n\n​\n\n当对话状态为\n\nrequires_action\n\n时，此字段包含需要提交的工具输出信息，用于继续对话。通常包含一个工具调用列表，每个工具调用包含工具类型和参数。\n\n​\n\n​\n\nSubmitToolOutputs\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ntool_calls\n\n​\n\nArray of\n\nInterruptPlugin\n\n​\n\n[{\"id\":\"738137187639794****\",\"type\":\"function\",\"function\":{\"name\":\"get_weather\",\"arguments\":\"{\\\"city\\\":\\\"Beijing\\\"}\"}}]\n\n​\n\n当对话状态为\n\nrequires_action\n\n时，此字段包含需要提交的工具调用列表，每个工具调用包含工具类型和参数。\n\n​\n\n​\n\nInterruptPlugin\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n738137187639794****\n\n​\n\n上报运行结果的 ID。\n\n​\n\ntype\n\n​\n\nString\n\n​\n\nfunction\n\n​\n\n工具类型，枚举值包括：\n\n​\n\nfunction：待执行的方法，通常是端插件。触发端插件时会返回此枚举值。\n\n​\n\nreply_message：待回复的选项。触发工作流问答节点时会返回此枚举值。\n\n​\n\nfunction\n\n​\n\nObject of\n\nInterruptFunction\n\n​\n\n{\"name\":\"get_weather\",\"arguments\":\"{\\\"city\\\":\\\"Beijing\\\"}\"}\n\n​\n\n当对话状态为\n\nrequires_action\n\n时，此字段表示需要调用的工具或函数的定义，包含函数名称和参数。通常用于指定工具的具体执行方法。\n\n​\n\n​\n\nInterruptFunction\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nname\n\n​\n\nString\n\n​\n\nget_weather\n\n​\n\n当对话状态为\n\nrequires_action\n\n时，此字段表示需要调用的工具或函数的名称，用于继续对话。通常与\n\narguments\n\n字段配合使用，指定工具的具体执行方法。\n\n​\n\narguments\n\n​\n\nString\n\n​\n\n{\"city\":\"Beijing\"}\n\n​\n\n当对话状态为\n\nrequires_action\n\n时，此字段表示需要调用的工具或函数的参数，通常为 JSON 格式的字符串，用于指定工具的具体执行参数。\n\n​\n\n​\n\nUsage\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ninput_count\n\n​\n\nInteger\n\n​\n\n50\n\n​\n\n输入内容所消耗的 Token 数，包含对话上下文、系统提示词、用户当前输入等所有输入类的 Token 消耗。\n\n​\n\ntoken_count\n\n​\n\nInteger\n\n​\n\n150\n\n​\n\n本次 API 调用消耗的 Token 总量，包括输入和输出两部分的消耗。\n\n​\n\noutput_count\n\n​\n\nInteger\n\n​\n\n100\n\n​\n\n大模型输出的内容所消耗的 Token 数。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v3/chat/cancel' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_hfwkehfncaf****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"chat_id\"\n\n:\n\n\"73980486691***\"\n\n,\n\n​\n\n\"conversation_id\"\n\n:\n\n\"739778749439***\"\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"738137187639794****\"\n\n,\n\n​\n\n\"usage\"\n\n:\n\n{},\n\n​\n\n\"bot_id\"\n\n:\n\n\"737946218936519****\"\n\n,\n\n​\n\n\"status\"\n\n:\n\n\"completed\"\n\n,\n\n​\n\n\"failed_at\"\n\n:\n\nnull\n\n,\n\n​\n\n\"meta_data\"\n\n:\n\n{},\n\n​\n\n\"created_at\"\n\n:\n\n1718609571\n\n,\n\n​\n\n\"last_error\"\n\n:\n\n{\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"code\"\n\n:\n\nnull\n\n​\n\n},\n\n​\n\n\"section_id\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"completed_at\"\n\n:\n\n1718609575\n\n,\n\n​\n\n\"conversation_id\"\n\n:\n\n\"739778749439***\"\n\n,\n\n​\n\n\"required_action\"\n\n:\n\n{\n\n​\n\n\"type\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"submit_tool_outputs\"\n\n:\n\n{\n\n​\n\n\"tool_calls\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"function\"\n\n:\n\n{\n\n​\n\n\"name\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"arguments\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n]\n\n​\n\n}\n\n​\n\n}\n\n​\n\n},\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2F37A23\"\n\n​\n\n},\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n提交工具执行结果\n\n下一篇\n\n执行工作流",
        "links": []
      },
      "markdown": "- 调用取消对话 API 仅切换对话状态，不会中断 chat API 的流式回复，同时根据完整回复内容来计算消耗的模型 Token。如需中断流式回复、停止打印机效果，可以在调用此 API 之后主动中断客户端连接，例如调用浏览器 Web API AbortController 。 ​\n\n- 取消对话后，本轮用户的 Query 和智能体的回复不会记录为对话的上下文。 ​\n\n- 不支持取消以下状态的对话。你可以通过 查看对话详情 接口的 status 字段查看对话状态。 ​\n\n- completed：会话结束。 ​\n\n- failed：会话失败。 ​\n\n- requires_action：会话中断。 ​\n\n| 请求方式​ | POST |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v3/chat/cancel​ |\n| 权限​ | cancelChat​确保调用该接口使用的访问令牌开通了cancelChat权限，详细信息可参考鉴权方式。​ |\n| 接口说明​ | 调用此接口取消进行中的对话。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考鉴权方式。​ |\n| Content-Type​ | application/json​ | 请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| chat_id​ | String​ | 必选​ | 7398048669188****​ | 对话 ID，即 Chat ID。可以在发起对话接口 Response 中查看 id 字段，如果是流式响应，则在 Response 的 chat 事件中查看 id 字段。​ |\n| conversation_id​ | String​ | 必选​ | 7397787494399****​ | 会话 ID，即 Conversation ID。可以在发起对话接口 Response 中查看 conversation_id 字段。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | Object ofChatV3ChatDetail​ | 详见响应示例​ | 被取消对话的详细信息。详细说明可参考ChatV3ChatDetail。​ |\n| detail​ | Object ofResponseDetail​ | 详见响应示例​ | 详细信息。​ |\n| code​ | Long​ | 0​ | 调用状态码。​0 表示调用成功。​其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n\n- 0 表示调用成功。 ​\n\n- 其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 738137187639794****​ | 对话 ID，即对话的唯一标识。​ |\n| conversation_id​ | String​ | 738136585609548****​ | 会话 ID，即会话的唯一标识。​ |\n| bot_id​ | String​ | 737946218936519****​ | 该会话所属的智能体的 ID。​ |\n| status​ | String​ | completed​ | 对话的运行状态。取值为：​created：对话已创建。​in_progress：智能体正在处理中。​completed：智能体已完成处理，本次对话结束。​failed：对话失败。​requires_action：对话中断，需要进一步处理。​canceled：对话已取消。​ |\n| created_at​ | Integer​ | 1718609571​ | 对话创建的时间。格式为 10 位的 Unixtime 时间戳，单位为秒。​ |\n| completed_at​ | Integer​ | 1718609575​ | 对话结束的时间。格式为 10 位的 Unixtime 时间戳，单位为秒。​ |\n| failed_at​ | Integer​ | 1718609571​ | 对话失败的时间。格式为 10 位的 Unixtime 时间戳，单位为秒。​ |\n| meta_data​ | JSON Map​ | {\"customKey1\":\"customValue1\",\"customKey2\":\"customValue2\"}​ | 发起对话时的附加消息，用于传入使用方的自定义数据，查看对话详情时也会返回此附加消息。​自定义键值对，应指定为 Map 对象格式。长度为 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。​ |\n| last_error​ | Object ofLastError​ | \\​ | 对话运行异常时，此字段中返回详细的错误信息，包括：​Code：错误码。Integer 类型。0 表示成功，其他值表示失败。​Msg：错误信息。String 类型。​ |\n| section_id​ | String​ | 737946218936519****​ | 上下文片段 ID。每次调用清除上下文API 都会生成一个新的 section_id。​ |\n| required_action​ | Object ofRequiredAction​ | {\"type\":\"submit_tool_outputs\",\"submit_tool_outputs\":{\"tool_calls\":[{\"id\":\"738137187639794****\",\"type\":\"function\",\"function\":{\"name\":\"get_weather\",\"arguments\":\"{\\\"city\\\":\\\"Beijing\\\"}\"}}]}}​ | 当对话状态为requires_action时，此字段包含需要进一步处理的信息详情，用于继续对话。​ |\n| usage​ | Object ofUsage​ | ​ | 预留字段，无需关注，具体消耗的 Token 请查看火山账单。​ |\n\n- created：对话已创建。 ​\n\n- in_progress：智能体正在处理中。 ​\n\n- completed：智能体已完成处理，本次对话结束。 ​\n\n- failed：对话失败。 ​\n\n- requires_action：对话中断，需要进一步处理。 ​\n\n- canceled：对话已取消。 ​\n\n- Code：错误码。Integer 类型。0 表示成功，其他值表示失败。 ​\n\n- Msg：错误信息。String 类型。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| msg​ | String​ | 详见响应示例​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​ |\n| code​ | Integer​ | 0​ | 状态码。​0 代表调用成功。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| type​ | String​ | submit_tool_outputs​ | 额外操作的类型，枚举值：​submit_tool_outputs：需要提交工具输出以继续对话。​ |\n| submit_tool_outputs​ | Object ofSubmitToolOutputs​ | {\"tool_calls\":[{\"id\":\"738137187639794****\",\"type\":\"function\",\"function\":{\"name\":\"get_weather\",\"arguments\":\"{\\\"city\\\":\\\"Beijing\\\"}\"}}]}​ | 当对话状态为requires_action时，此字段包含需要提交的工具输出信息，用于继续对话。通常包含一个工具调用列表，每个工具调用包含工具类型和参数。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| tool_calls​ | Array ofInterruptPlugin​ | [{\"id\":\"738137187639794****\",\"type\":\"function\",\"function\":{\"name\":\"get_weather\",\"arguments\":\"{\\\"city\\\":\\\"Beijing\\\"}\"}}]​ | 当对话状态为requires_action时，此字段包含需要提交的工具调用列表，每个工具调用包含工具类型和参数。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 738137187639794****​ | 上报运行结果的 ID。​ |\n| type​ | String​ | function​ | 工具类型，枚举值包括：​function：待执行的方法，通常是端插件。触发端插件时会返回此枚举值。​reply_message：待回复的选项。触发工作流问答节点时会返回此枚举值。​ |\n| function​ | Object ofInterruptFunction​ | {\"name\":\"get_weather\",\"arguments\":\"{\\\"city\\\":\\\"Beijing\\\"}\"}​ | 当对话状态为requires_action时，此字段表示需要调用的工具或函数的定义，包含函数名称和参数。通常用于指定工具的具体执行方法。​ |\n\n- function：待执行的方法，通常是端插件。触发端插件时会返回此枚举值。 ​\n\n- reply_message：待回复的选项。触发工作流问答节点时会返回此枚举值。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| name​ | String​ | get_weather​ | 当对话状态为requires_action时，此字段表示需要调用的工具或函数的名称，用于继续对话。通常与arguments字段配合使用，指定工具的具体执行方法。​ |\n| arguments​ | String​ | {\"city\":\"Beijing\"}​ | 当对话状态为requires_action时，此字段表示需要调用的工具或函数的参数，通常为 JSON 格式的字符串，用于指定工具的具体执行参数。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| input_count​ | Integer​ | 50​ | 输入内容所消耗的 Token 数，包含对话上下文、系统提示词、用户当前输入等所有输入类的 Token 消耗。​ |\n| token_count​ | Integer​ | 150​ | 本次 API 调用消耗的 Token 总量，包括输入和输出两部分的消耗。​ |\n| output_count​ | Integer​ | 100​ | 大模型输出的内容所消耗的 Token 数。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/workflow_run",
      "title": "执行工作流",
      "content": {
        "sections": [],
        "full_text": "执行工作流\n\n执行已发布的工作流。\n\n​\n\n接口说明\n\n​\n\n此接口为非流式响应模式，如果需要采用流式输出，请参考\n\n执行工作流（流式响应）\n\n。\n\n​\n\n调用此接口后，你可以从响应中获得 debug_url，访问链接即可通过可视化界面查看工作流的试运行过程，其中包含每个执行节点的输入输出等详细信息，帮助你在线调试或排障。\n\n​\n\n扣子个人付费版、企业版（企业标准版、企业旗舰版）用户调用此接口时，支持通过\n\nis_async\n\n参数异步运行工作流，适用于工作流执行耗时较长，导致运行超时的情况。异步运行后可通过本接口返回的 execute_id 调用\n\n查询工作流异步执行结果\n\nAPI 获取工作流的执行结果。\n\n​\n\n限制说明\n\n​\n\n说明\n\n调用此非流式响应 API 时，若 API 在 90 秒内未收到响应，将因超时而断开连接。对于执行耗时较长的工作流，建议使用\n\n执行工作流（流式响应）\n\nAPI。\n\n​\n\n​\n\n​\n\n限制项\n\n​\n\n说明\n\n​\n\n工作流发布状态\n\n​\n\n必须为已发布。执行未发布的工作流会返回错误码 4200。 创建并发布工作流的操作可参考\n\n使用工作流\n\n。\n\n​\n\n节点限制\n\n​\n\n工作流中不能包含输出节点、开启了流式输出的结束节点。\n\n​\n\n关联智能体\n\n​\n\n调用此 API 之前，应先在扣子平台中试运行此工作流，如果试运行时需要关联智能体，则调用此 API 执行工作流时，也需要指定智能体ID。通常情况下，执行存在数据库节点、变量节点等节点的工作流需要关联智能体。\n\n​\n\n请求大小上限\n\n​\n\n20 MB，包括输入参数及运行期间产生的消息历史等所有相关数据。\n\n​\n\n超时时间\n\n​\n\n未开启工作流异步运行时，工作流整体超时时间为 10 分钟，建议执行时间控制在 5 分钟以内，否则不保障执行结果的准确性。 详细说明可参考\n\n工作流使用限制\n\n。\n\n​\n\n开启工作流异步运行后，工作流整体超时时间为 24 小时。\n\n​\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/workflow/run\n\n​\n\n权限\n\n​\n\nrun\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nrun\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n执行已发布的工作流。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子平台中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nworkflow_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n73664689170551*****\n\n​\n\n待执行的 Workflow ID，此工作流应已发布。\n\n​\n\n进入 Workflow 编排页面，在页面 URL 中，\n\nworkflow\n\n参数后的数字就是 Workflow ID。例如\n\nhttps://www.coze.com/work_flow?space_id=42463***&workflow_id=73505836754923***\n\n，Workflow ID 为\n\n73505836754923***\n\n。\n\n​\n\nparameters\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n{\"image\": \"{\\\"file_id\\\":\\\"1122334455\\\"}\",\"user_name\":\"George\"}\n\n​\n\n工作流开始节点的输入参数及取值，以 JSON 序列化字符串形式传入。你可以在指定工作流的编排页面查看输入参数列表。\n\n​\n\n如果工作流输入参数为 Image 等类型的文件，你可以传入文件 URL 或调用\n\n上传文件\n\nAPI 获取 file_id 后传入 file_id。示例：\n\n​\n\n上传文件并传入 file_id：\n\n​\n\n单个文件示例：\n\n\"parameters\": { \"image\": \"{\\\"file_id\\\":\\\"1122334455\\\"}\" }\n\n​\n\n文件数组示例：\n\n\"parameters\": { \"image\": [ \"{\\\"file_id\\\":\\\"1122334455\\\"}\" ] }\n\n。\n\n​\n\n传入文件 URL：\n\n“parameters” :{\"input\":\"请总结图片内容\", \"image\": \"\n\nhttps://example.com/tos-cn-i-mdko3gqilj/example.png\n\n\" }\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n73428668*****\n\n​\n\n需要关联的智能体 ID。 部分工作流执行时需要指定关联的智能体，例如存在数据库节点、变量节点等节点的工作流。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n进入智能体的开发页面，开发页面 URL 中 bot 参数后的数字就是智能体t ID。例如\n\nhttps://www.coze.com/space/341****/bot/73428668*****\n\n，智能体 ID 为\n\n73428668*****\n\n。\n\n​\n\nTip\n\n确保调用该接口使用的令牌开通了此智能体所在空间的权限。\n\n​\n\n确保该智能体已发布为 API 服务。\n\n​\n\n​\n\napp_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n744208683**\n\n​\n\n该工作流关联的扣子应用的 ID。\n\n​\n\n进入应用开发界面，开发页面 URL 中的\n\nproject-ide\n\n参数后的数字就是 AppID，例如\n\nhttps://\n\nwww.coze.cn\n\n/space/74421656*****/project-ide/744208683**\n\n，扣子应用 ID 为\n\n744208683**\n\n。\n\n​\n\n说明\n\n仅运行扣子应用中的工作流时，才需要设置 app_id。智能体绑定的工作流、空间资源库中的工作流无需设置 app_id。\n\n​\n\n​\n\next\n\n​\n\nJSON Map\n\n​\n\n可选\n\n​\n\n{\"latitude\": \"39.9042\", \"longitude\": \"116.4074\"}\n\n​\n\n用于指定一些额外的字段，以 Map[String][String] 格式传入。例如某些插件会隐式用到的经纬度等字段。\n\n​\n\n目前仅支持以下字段：\n\n​\n\nlatitude：String 类型，表示纬度。\n\n​\n\nlongitude：String 类型，表示经度。\n\n​\n\nuser_id：String 类型，表示用户 ID。\n\n​\n\nis_async\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\ntrue\n\n​\n\n是否异步运行。异步运行后可通过本接口返回的 execute_id 调用\n\n查询工作流异步执行结果\n\nAPI 获取工作流的最终执行结果。\n\n​\n\ntrue：异步运行。\n\n​\n\nfalse：（默认）同步运行。\n\n​\n\nTip\n\n异步运行的参数 is_async 仅限扣子个人付费版、企业版（企业标准版、企业旗舰版）使用，否则调用此接口会报错 6003 Workflow execution with is_async=true is a premium feature available only to Coze Professional users\n\n​\n\n​\n\nworkflow_version\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nv0.0.5\n\n​\n\n工作流的版本号，仅当运行的工作流属于资源库工作流时有效。未指定版本号时默认执行最新版本的工作流。\n\n​\n\nconnector_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n​\n\n渠道 ID，用于配置该工作流在什么渠道执行。\n\n​\n\n当智能体或扣子应用发布到某个渠道后，可以通过该参数指定工作流在对应的渠道执行。\n\n​\n\n扣子的渠道 ID 包括：\n\n​\n\n1024（默认值）：API 渠道。\n\n​\n\n999：Chat SDK。\n\n​\n\n998：WebSDK。\n\n​\n\n10000122：扣子商店。\n\n​\n\n10000113：微信客服。\n\n​\n\n10000120：微信服务号。\n\n​\n\n10000121：微信订阅号。\n\n​\n\n10000126：抖音小程序。\n\n​\n\n10000127：微信小程序。\n\n​\n\n10000011：飞书。\n\n​\n\n10000128：飞书多维表格。\n\n​\n\n10000117：掘金。\n\n​\n\n自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子左下角单击头像，在\n\n账号设置\n\n>\n\n发布渠道\n\n>\n\n企业自定义渠道管理\n\n页面查看渠道 ID。\n\n​\n\n说明\n\n不同渠道的用户数据、会话记录等相互隔离，进行数据分析统计时，不支持跨渠道数据调用。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nString\n\n​\n\n\\\n\n​\n\n工作流执行结果，通常为 JSON 序列化字符串，部分场景下可能返回非 JSON 结构的字符串。\n\n​\n\nexecute_id\n\n​\n\nString\n\n​\n\n741364789030728****\n\n​\n\n异步执行的事件 ID。\n\n​\n\ndebug_url\n\n​\n\nString\n\n​\n\nhttps://www.coze.cn/work_flow?execute_id=741364789030728****&space_id=736142423532160****&workflow_id=738958910358870****\n\n​\n\n工作流试运行调试页面。访问此页面可查看每个工作流节点的运行结果、输入输出等信息。\n\n​\n\n说明\n\ndebug_url 的访问有效期为 7 天，过期后将无法访问。\n\n​\n\n​\n\nusage\n\n​\n\nObject of\n\nUsage\n\n​\n\n{\"input_count\":50,\"token_count\":150,\"output_count\":100}\n\n​\n\n资源使用情况，包含本次 API 调用消耗的 Token 数量等信息。\n\n​\n\n此处大模型返回的消耗 Token 仅供参考，以\n\n火山引擎账单\n\n实际为准。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。\n\n​\n\n0 表示调用成功。\n\n​\n\n其他值表示调用失败。你可以通过 msg 字段判断详细的错误原因。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\ninterrupt_data\n\n​\n\nObject of\n\nInterrupt\n\n​\n\n{\"data\":\"{\\\"content_type\\\":\\\"text\\\",\\\"content\\\":\\\"请输入您的姓名\\\"}\",\"type\":2,\"event_id\":\"740483198820252***\",\"required_parameters\":{\"name\":{\"type\":\"string\",\"required\":true}}}\n\n​\n\n中断事件的详细信息，包含中断控制内容、中断类型和事件 ID 等信息。\n\n​\n\n​\n\nUsage\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ninput_count\n\n​\n\nInteger\n\n​\n\n50\n\n​\n\n输入内容所消耗的 Token 数，包含对话上下文、系统提示词、用户当前输入等所有输入类的 Token 消耗。\n\n​\n\noutput_count\n\n​\n\nInteger\n\n​\n\n100\n\n​\n\n大模型输出的内容所消耗的 Token 数。\n\n​\n\ntoken_count\n\n​\n\nInteger\n\n​\n\n150\n\n​\n\n本次 API 调用消耗的 Token 总量，包括输入和输出两部分的消耗。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\nInterrupt\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nString\n\n​\n\n{\\\"content_type\\\":\\\"text\\\",\\\"content\\\":\\\"[{\\\\\\\"type\\\\\\\":\\\\\\\"string\\\\\\\",\\\\\\\"name\\\\\\\":\\\\\\\"img\\\\\\\",\\\\\\\"required\\\\\\\":true,\\\\\\\"assistType\\\\\\\":2}]\\\"}\n\n​\n\n中断控制内容，用于在工作流中断时传递控制信息。当工作流需要用户输入或执行特定操作时，通过此字段传递相关信息。\n\n​\n\ntype\n\n​\n\nInteger\n\n​\n\n2\n\n​\n\n工作流中断类型，调用\n\n恢复运行工作流\n\nAPI 恢复运行时应回传此字段。\n\n​\n\n枚举值：\n\n​\n\n6\n\n：端插件触发中断。\n\n​\n\n2\n\n：问答节点触发中断。\n\n​\n\n5\n\n：输入节点触发中断。\n\n​\n\n7\n\n：OAuth 插件触发中断。\n\n​\n\nevent_id\n\n​\n\nString\n\n​\n\n740483198820252***\n\n​\n\n工作流中断事件 ID，调用\n\n恢复运行工作流\n\nAPI 恢复运行时应回传此字段。\n\n​\n\nrequired_parameters\n\n​\n\nJSON Map\n\n​\n\n{ \"img\": { \"required\": true, \"type\": \"image\" } }\n\n​\n\n工作流中断时需要补充的参数信息，采用键值对（key-value）结构，其中 key 为输入节点对应的参数名称，value 为该参数的定义信息（包含类型、是否必填等属性）。\n\n​\n\n​\n\nRequiredParameters\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ntype\n\n​\n\nString\n\n​\n\nstring\n\n​\n\n该参数的类型。\n\n​\n\nitems\n\n​\n\nObject of\n\nOpenAPIParameter\n\n​\n\n{\"type\":\"image\"}\n\n​\n\n当参数类型为\n\narray\n\n时，该字段用于定义数组元素的子类型。\n\n​\n\nrequired\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n标识输入参数是否为必填项。\n\n​\n\ntrue\n\n：该参数为必填项。\n\n​\n\nfalse\n\n：该参数为可选项。\n\n​\n\nproperties\n\n​\n\nJSON Map\n\n​\n\n{ \"arr_obj_num\": { \"required\": false, \"type\": \"number\" } }\n\n​\n\n当参数类型为\n\nobject\n\n时，该字段用于定义对象类型的子参数信息，采用键值对（key-value）结构，其中 key 为子参数的名称，value 为该子参数的定义信息（包含类型、是否必填等属性）。\n\n​\n\ndescription\n\n​\n\nString\n\n​\n\n上传的图片。\n\n​\n\n该参数的描述信息。\n\n​\n\ndefault_value\n\n​\n\nString\n\n​\n\n-\n\n​\n\n该参数配置的默认值。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n同步执行工作流\n\n异步执行工作流\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/workflow/run' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_hfwkehfncaf****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"workflow_id\"\n\n:\n\n\"73664689170551*****\"\n\n,\n\n​\n\n\"parameters\"\n\n:\n\n{\n\n​\n\n\"user_name\"\n\n:\n\n\"George\"\n\n​\n\n}\n\n​\n\n}\n\n'\n\n​\n\n​\n\n​\n\n返回示例\n\n​\n\n同步执行工作流\n\n异步执行工作流\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"data\"\n\n:\n\n\"{\\\"output\\\":\\\"北京的经度为116.4074°E，纬度为39.9042°N。\\\"}\"\n\n,\n\n​\n\n\"debug_url\"\n\n:\n\n\"https://www.coze.cn/work_flow?execute_id=741364789030728****&space_id=736142423532160****&workflow_id=738958910358870****\"\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"usage\"\n\n:\n\n{\n\n​\n\n\"input_count\"\n\n:\n\n50\n\n,\n\n​\n\n\"token_count\"\n\n:\n\n150\n\n,\n\n​\n\n\"output_count\"\n\n:\n\n100\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n取消进行中的对话\n\n下一篇\n\n执行工作流（流式响应）",
        "links": []
      },
      "markdown": "| 限制项​ | 说明​ |\n| 工作流发布状态​ | 必须为已发布。执行未发布的工作流会返回错误码 4200。 创建并发布工作流的操作可参考使用工作流。​ |\n| 节点限制​ | 工作流中不能包含输出节点、开启了流式输出的结束节点。​ |\n| 关联智能体​ | 调用此 API 之前，应先在扣子平台中试运行此工作流，如果试运行时需要关联智能体，则调用此 API 执行工作流时，也需要指定智能体ID。通常情况下，执行存在数据库节点、变量节点等节点的工作流需要关联智能体。​ |\n| 请求大小上限​ | 20 MB，包括输入参数及运行期间产生的消息历史等所有相关数据。​ |\n| 超时时间​ | 未开启工作流异步运行时，工作流整体超时时间为 10 分钟，建议执行时间控制在 5 分钟以内，否则不保障执行结果的准确性。 详细说明可参考工作流使用限制。​开启工作流异步运行后，工作流整体超时时间为 24 小时。​ |\n\n- 未开启工作流异步运行时，工作流整体超时时间为 10 分钟，建议执行时间控制在 5 分钟以内，否则不保障执行结果的准确性。 详细说明可参考 工作流使用限制 。 ​\n\n- 开启工作流异步运行后，工作流整体超时时间为 24 小时。 ​\n\n| 请求方式​ | POST |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/workflow/run​ |\n| 权限​ | run​确保调用该接口使用的访问令牌开通了run权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 执行已发布的工作流。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子平台中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| workflow_id​ | String​ | 必选​ | 73664689170551*****​ | 待执行的 Workflow ID，此工作流应已发布。​进入 Workflow 编排页面，在页面 URL 中，workflow参数后的数字就是 Workflow ID。例如https://www.coze.com/work_flow?space_id=42463***&workflow_id=73505836754923***，Workflow ID 为73505836754923***。​ |\n| parameters​ | String​ | 可选​ | {\"image\": \"{\\\"file_id\\\":\\\"1122334455\\\"}\",\"user_name\":\"George\"}​ | 工作流开始节点的输入参数及取值，以 JSON 序列化字符串形式传入。你可以在指定工作流的编排页面查看输入参数列表。​如果工作流输入参数为 Image 等类型的文件，你可以传入文件 URL 或调用上传文件API 获取 file_id 后传入 file_id。示例：​上传文件并传入 file_id：​单个文件示例：\"parameters\": { \"image\": \"{\\\"file_id\\\":\\\"1122334455\\\"}\" }​文件数组示例：\"parameters\": { \"image\": [ \"{\\\"file_id\\\":\\\"1122334455\\\"}\" ] }。​传入文件 URL：“parameters” :{\"input\":\"请总结图片内容\", \"image\": \"https://example.com/tos-cn-i-mdko3gqilj/example.png\" }​ |\n| bot_id​ | String​ | 可选​ | 73428668*****​ | 需要关联的智能体 ID。 部分工作流执行时需要指定关联的智能体，例如存在数据库节点、变量节点等节点的工作流。​​​​​​进入智能体的开发页面，开发页面 URL 中 bot 参数后的数字就是智能体t ID。例如https://www.coze.com/space/341****/bot/73428668*****，智能体 ID 为73428668*****。​Tip确保调用该接口使用的令牌开通了此智能体所在空间的权限。​确保该智能体已发布为 API 服务。​​ |\n| app_id​ | String​ | 可选​ | 744208683**​ | 该工作流关联的扣子应用的 ID。​进入应用开发界面，开发页面 URL 中的project-ide参数后的数字就是 AppID，例如https://www.coze.cn/space/74421656*****/project-ide/744208683**，扣子应用 ID 为744208683**。​说明仅运行扣子应用中的工作流时，才需要设置 app_id。智能体绑定的工作流、空间资源库中的工作流无需设置 app_id。​​ |\n| ext​ | JSON Map​ | 可选​ | {\"latitude\": \"39.9042\", \"longitude\": \"116.4074\"}​ | 用于指定一些额外的字段，以 Map[String][String] 格式传入。例如某些插件会隐式用到的经纬度等字段。​目前仅支持以下字段：​latitude：String 类型，表示纬度。​longitude：String 类型，表示经度。​user_id：String 类型，表示用户 ID。​ |\n| is_async​ | Boolean​ | 可选​ | true​ | 是否异步运行。异步运行后可通过本接口返回的 execute_id 调用查询工作流异步执行结果API 获取工作流的最终执行结果。​true：异步运行。​false：（默认）同步运行。​Tip异步运行的参数 is_async 仅限扣子个人付费版、企业版（企业标准版、企业旗舰版）使用，否则调用此接口会报错 6003 Workflow execution with is_async=true is a premium feature available only to Coze Professional users​​ |\n| workflow_version​ | String​ | 可选​ | v0.0.5​ | 工作流的版本号，仅当运行的工作流属于资源库工作流时有效。未指定版本号时默认执行最新版本的工作流。​ |\n| connector_id​ | String​ | 可选​ | ​ | 渠道 ID，用于配置该工作流在什么渠道执行。​当智能体或扣子应用发布到某个渠道后，可以通过该参数指定工作流在对应的渠道执行。​扣子的渠道 ID 包括：​1024（默认值）：API 渠道。​999：Chat SDK。​998：WebSDK。​10000122：扣子商店。​10000113：微信客服。​10000120：微信服务号。​10000121：微信订阅号。​10000126：抖音小程序。​10000127：微信小程序。​10000011：飞书。​10000128：飞书多维表格。​10000117：掘金。​自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子左下角单击头像，在账号设置>发布渠道>企业自定义渠道管理页面查看渠道 ID。​说明不同渠道的用户数据、会话记录等相互隔离，进行数据分析统计时，不支持跨渠道数据调用。​​ |\n\n- 上传文件并传入 file_id： ​\n\n- 单个文件示例： \"parameters\": { \"image\": \"{\\\"file_id\\\":\\\"1122334455\\\"}\" } ​\n\n- 文件数组示例： \"parameters\": { \"image\": [ \"{\\\"file_id\\\":\\\"1122334455\\\"}\" ] } 。 ​\n\n- 传入文件 URL： “parameters” :{\"input\":\"请总结图片内容\", \"image\": \" https://example.com/tos-cn-i-mdko3gqilj/example.png \" } ​\n\n- 确保调用该接口使用的令牌开通了此智能体所在空间的权限。 ​\n\n- 确保该智能体已发布为 API 服务。 ​\n\n- latitude：String 类型，表示纬度。 ​\n\n- longitude：String 类型，表示经度。 ​\n\n- user_id：String 类型，表示用户 ID。 ​\n\n- true：异步运行。 ​\n\n- false：（默认）同步运行。 ​\n\n- 1024（默认值）：API 渠道。 ​\n\n- 999：Chat SDK。 ​\n\n- 998：WebSDK。 ​\n\n- 10000122：扣子商店。 ​\n\n- 10000113：微信客服。 ​\n\n- 10000120：微信服务号。 ​\n\n- 10000121：微信订阅号。 ​\n\n- 10000126：抖音小程序。 ​\n\n- 10000127：微信小程序。 ​\n\n- 10000011：飞书。 ​\n\n- 10000128：飞书多维表格。 ​\n\n- 10000117：掘金。 ​\n\n- 自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子左下角单击头像，在 账号设置 > 发布渠道 > 企业自定义渠道管理 页面查看渠道 ID。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | String​ | \\​ | 工作流执行结果，通常为 JSON 序列化字符串，部分场景下可能返回非 JSON 结构的字符串。​ |\n| execute_id​ | String​ | 741364789030728****​ | 异步执行的事件 ID。​ |\n| debug_url​ | String​ | https://www.coze.cn/work_flow?execute_id=741364789030728****&space_id=736142423532160****&workflow_id=738958910358870****​ | 工作流试运行调试页面。访问此页面可查看每个工作流节点的运行结果、输入输出等信息。​说明debug_url 的访问有效期为 7 天，过期后将无法访问。​​ |\n| usage​ | Object ofUsage​ | {\"input_count\":50,\"token_count\":150,\"output_count\":100}​ | 资源使用情况，包含本次 API 调用消耗的 Token 数量等信息。​此处大模型返回的消耗 Token 仅供参考，以火山引擎账单实际为准。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| code​ | Long​ | 0​ | 调用状态码。​0 表示调用成功。​其他值表示调用失败。你可以通过 msg 字段判断详细的错误原因。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n| interrupt_data​ | Object ofInterrupt​ | {\"data\":\"{\\\"content_type\\\":\\\"text\\\",\\\"content\\\":\\\"请输入您的姓名\\\"}\",\"type\":2,\"event_id\":\"740483198820252***\",\"required_parameters\":{\"name\":{\"type\":\"string\",\"required\":true}}}​ | 中断事件的详细信息，包含中断控制内容、中断类型和事件 ID 等信息。​ |\n\n- 0 表示调用成功。 ​\n\n- 其他值表示调用失败。你可以通过 msg 字段判断详细的错误原因。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| input_count​ | Integer​ | 50​ | 输入内容所消耗的 Token 数，包含对话上下文、系统提示词、用户当前输入等所有输入类的 Token 消耗。​ |\n| output_count​ | Integer​ | 100​ | 大模型输出的内容所消耗的 Token 数。​ |\n| token_count​ | Integer​ | 150​ | 本次 API 调用消耗的 Token 总量，包括输入和输出两部分的消耗。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | String​ | {\\\"content_type\\\":\\\"text\\\",\\\"content\\\":\\\"[{\\\\\\\"type\\\\\\\":\\\\\\\"string\\\\\\\",\\\\\\\"name\\\\\\\":\\\\\\\"img\\\\\\\",\\\\\\\"required\\\\\\\":true,\\\\\\\"assistType\\\\\\\":2}]\\\"}​ | 中断控制内容，用于在工作流中断时传递控制信息。当工作流需要用户输入或执行特定操作时，通过此字段传递相关信息。​ |\n| type​ | Integer​ | 2​ | 工作流中断类型，调用恢复运行工作流API 恢复运行时应回传此字段。​枚举值：​6：端插件触发中断。​2：问答节点触发中断。​5：输入节点触发中断。​7：OAuth 插件触发中断。​ |\n| event_id​ | String​ | 740483198820252***​ | 工作流中断事件 ID，调用恢复运行工作流API 恢复运行时应回传此字段。​ |\n| required_parameters​ | JSON Map​ | { \"img\": { \"required\": true, \"type\": \"image\" } }​ | 工作流中断时需要补充的参数信息，采用键值对（key-value）结构，其中 key 为输入节点对应的参数名称，value 为该参数的定义信息（包含类型、是否必填等属性）。​ |\n\n- 6 ：端插件触发中断。 ​\n\n- 2 ：问答节点触发中断。 ​\n\n- 5 ：输入节点触发中断。 ​\n\n- 7 ：OAuth 插件触发中断。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| type​ | String​ | string​ | 该参数的类型。​ |\n| items​ | Object ofOpenAPIParameter​ | {\"type\":\"image\"}​ | 当参数类型为array时，该字段用于定义数组元素的子类型。​ |\n| required​ | Boolean​ | true​ | 标识输入参数是否为必填项。​true：该参数为必填项。​false：该参数为可选项。​ |\n| properties​ | JSON Map​ | { \"arr_obj_num\": { \"required\": false, \"type\": \"number\" } }​ | 当参数类型为object时，该字段用于定义对象类型的子参数信息，采用键值对（key-value）结构，其中 key 为子参数的名称，value 为该子参数的定义信息（包含类型、是否必填等属性）。​ |\n| description​ | String​ | 上传的图片。​ | 该参数的描述信息。​ |\n| default_value​ | String​ | -​ | 该参数配置的默认值。​ |\n\n- true ：该参数为必填项。 ​\n\n- false ：该参数为可选项。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/workflow_stream_run",
      "title": "执行工作流（流式响应）",
      "content": {
        "sections": [],
        "full_text": "执行工作流（流式响应）\n\n执行已发布的工作流，响应方式为流式响应。\n\n​\n\n接口说明\n\n​\n\n调用 API 执行工作流时，对于支持流式输出的工作流，往往需要使用流式响应方式接收响应数据，例如实时展示工作流的输出信息、呈现打字机效果等。\n\n​\n\n在流式响应中，服务端不会一次性发送所有数据，而是以数据流的形式逐条发送数据给客户端，数据流中包含工作流执行过程中触发的各种事件（event），直至处理完毕或处理中断。处理结束后，服务端会通过\n\nevent: Done\n\n事件提示工作流执行完毕。各个事件的说明可参考\n\n​\n\n返回结果\n\n。\n\n​\n\n说明\n\n目前支持流式响应的工作流节点包括\n\n输出节点\n\n、\n\n问答节点\n\n和\n\n开启了流式输出的结束节点\n\n。对于不包含这些节点的工作流，可以使用\n\n​\n\n执行工作流\n\n接口一次性接收响应数据。\n\n​\n\n​\n\n限制说明\n\n​\n\n通过 API 方式执行工作流前，应确认此工作流已发布，执行从未发布过的工作流时会返回错误码 4200。创建并发布工作流的操作可参考\n\n​\n\n使用低代码工作流\n\n。\n\n​\n\n调用此 API 之前，应先在扣子编程中试运行此工作流。\n\n​\n\n如果试运行时需要关联智能体，则调用此 API 执行工作流时，也需要指定 bot_id。通常情况下，执行存在数据库节点、变量节点等节点的工作流需要关联智能体。\n\n​\n\n执行应用中的工作流时，需要指定 app_id。\n\n​\n\n请勿同时指定 bot_id 和 app_id，否则 API 会报错 4000，表示请求参数错误。\n\n​\n\n此接口为同步接口，如果工作流整体或某些节点运行超时，智能体可能无法提供符合预期的回复，建议将工作流的执行时间控制在 5 分钟以内。同步执行时，工作流整体超时时间限制可参考\n\n​\n\n低代码工作流使用限制\n\n。\n\n​\n\n工作流支持的请求大小上限为 20MB，包括输入参数以及运行期间产生的消息历史等所有相关数据。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/\n\nv1/workflow/stream_run\n\n​\n\n​\n\n权限\n\n​\n\nrun\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nrun\n\n权限，详细信息参考\n\n​\n\n鉴权方式概述\n\n。\n\n​\n\n接口说明\n\n​\n\n执行已发布的工作流，响应方式为流式响应。\n\n​\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n​\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nworkflow_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n待执行的 Workflow ID，此工作流应已发布。\n\n​\n\n进入 Workflow 编排页面，在页面 URL 中，\n\nworkflow\n\n参数后的数字就是 Workflow ID。例如\n\nhttps://www.coze.com/work_flow?space_id=42463***&workflow_id=73505836754923***\n\n，Workflow ID 为\n\n73505836754923***\n\n。\n\n​\n\nparameters\n\n​\n\nmap[String]Any\n\n​\n\n可选\n\n​\n\n工作流开始节点的输入参数及取值，你可以在指定工作流的编排页面查看参数列表。\n\n​\n\n如果工作流输入参数为 Image 等类型的文件，你可以传入文件 URL 或调用\n\n上传文件\n\nAPI 获取 file_id 后传入 file_id。示例：\n\n​\n\n上传文件并传入 file_id：\n\n​\n\n单个文件示例：\n\n\"parameters\": { \"image\": \"{\\\"file_id\\\":\\\"1122334455\\\"}\" }\n\n​\n\n文件数组示例：\n\n\"parameters\": { \"image\": [ \"{\\\"file_id\\\":\\\"1122334455\\\"}\" ] }\n\n。\n\n​\n\n传入文件 URL：\n\n​\n\n“parameters” :{\"input\":\"请总结图片内容\", \"image\": \"\n\nhttps://example.com/tos-cn-i-mdko3gqilj/example.png\n\n\" }\n\n​\n\nbot_id\n\n​\n\n​\n\nString\n\n​\n\n​\n\n可选\n\n​\n\n​\n\n需要关联的智能体ID。 部分工作流执行时需要指定关联的智能体，例如存在数据库节点、变量节点等节点的工作流。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n进入智能体的开发页面，开发页面 URL 中\n\nbot\n\n参数后的数字就是智能体ID。例如\n\nhttps://www.coze.com/space/341****/bot/73428668*****\n\n，Bot ID 为\n\n73428668*****\n\n。\n\n​\n\n说明\n\n确保调用该接口使用的令牌开通了此智能体所在空间的权限。\n\n​\n\n确保该智能体已发布为 API 服务。\n\n​\n\n​\n\next\n\n​\n\nMap[String][String]\n\n​\n\n​\n\n可选\n\n​\n\n用于指定一些额外的字段，以 Map[String][String] 格式传入。例如某些插件会隐式用到的经纬度等字段。\n\n​\n\n目前仅支持以下字段：\n\n​\n\nlatitude：String 类型，表示纬度。\n\n​\n\nlongitude：String 类型，表示经度。\n\n​\n\nuser_id：String 类型，表示用户 ID。\n\n​\n\napp_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n工作流所在的应用 ID。\n\n​\n\n你可以通过应用的业务编排页面 URL 中获取应用 ID，也就是 URL 中 project-ide 参数后的一串字符，例如\n\nhttps://www.coze.\n\ncn\n\n/space/739174157340921****/\n\nproject\n\n-ide/743996105122521****/workflow/744102227704147****\n\n中，应用的 ID 为\n\n743996105122521****\n\n。\n\n​\n\n说明\n\n仅运行扣子应用中的工作流时，才需要设置 app_id。智能体绑定的工作流、空间资源库中的工作流无需设置 app_id。\n\n​\n\n​\n\nworkflow_version\n\n​\n\n​\n\n​\n\nString\n\n​\n\n​\n\n可选\n\n​\n\n​\n\n工作流的版本号，仅当运行的工作流属于资源库工作流时有效。未指定版本号时默认执行最新版本的工作流。\n\n​\n\nconnector_id\n\n​\n\nString\n\n​\n\n​\n\n可选\n\n​\n\n​\n\n渠道 ID，用于配置该工作流在什么渠道执行。\n\n​\n\n当智能体或扣子应用发布到某个渠道后，可以通过该参数指定工作流在对应的渠道执行。\n\n​\n\n扣子编程的渠道 ID 包括：\n\n​\n\n1024（默认值）：API 渠道。\n\n​\n\n999：Chat SDK。\n\n​\n\n998：WebSDK。\n\n​\n\n10000122：扣子商店。\n\n​\n\n10000113：微信客服。\n\n​\n\n10000120：微信服务号。\n\n​\n\n10000121：微信订阅号。\n\n​\n\n10000126：抖音小程序。\n\n​\n\n10000127：微信小程序。\n\n​\n\n10000011：飞书。\n\n​\n\n10000128：飞书多维表格。\n\n​\n\n10000117：掘金。\n\n​\n\n自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在\n\n账号设置\n\n>\n\n发布渠道\n\n>\n\n企业自定义渠道管理\n\n页面查看渠道 ID。\n\n​\n\n说明\n\n不同渠道的用户数据、会话记录等相互隔离，进行数据分析统计时，不支持跨渠道数据调用。\n\n​\n\n​\n\n​\n\n返回结果\n\n​\n\n​\n\n说明\n\n在流式响应中，开发者需要注意是否存在丢包现象。\n\n​\n\n事件 ID（id）默认从 0 开始计数，以包含\n\nevent: Done\n\n的事件为结束标志。开发者应根据 id 确认响应消息整体无丢包现象。\n\n​\n\nMessage 事件的消息 ID 默认从 0 开始计数，以包含\n\nnode_is_finish : true\n\n的事件为结束标志。开发者应根据 node_seq_id 确认 Message 事件中每条消息均完整返回，无丢包现象。\n\n​\n\n​\n\n​\n\n参数名\n\n​\n\n参数类型\n\n​\n\n参数描述\n\n​\n\nid\n\n​\n\nInteger\n\n​\n\n此消息在接口响应中的事件 ID。以 0 为开始。\n\n​\n\nevent\n\n​\n\nString\n\n​\n\n当前流式返回的数据包事件。包括以下类型：\n\n​\n\nMessage：工作流节点输出消息，例如输出节点、结束节点的输出消息。可以在 data 中查看具体的消息内容。\n\n​\n\nError：报错。可以在 data 中查看 error_code 和 error_message，排查问题。\n\n​\n\nDone：结束。表示工作流执行结束，此时 data 中包含 debug URL。\n\n​\n\nInterrupt：中断。表示工作流中断，此时 data 字段中包含具体的中断信息。\n\n​\n\nPING：心跳信号。表示工作流执行中，消息内容为空，用于维持连接。\n\n​\n\ndata\n\n​\n\nObject\n\n​\n\n事件内容。各个 event 类型的事件内容格式不同。\n\n​\n\n​\n\nMessage 事件\n\n​\n\nMessage 事件中，data 的结构如下：\n\n​\n\n​\n\n参数名\n\n​\n\n参数类型\n\n​\n\n参数描述\n\n​\n\ncontent\n\n​\n\nString\n\n​\n\n流式输出的消息内容。\n\n​\n\nnode_title\n\n​\n\nString\n\n​\n\n输出消息的节点名称，例如输出节点、结束节点。\n\n​\n\nnode_seq_id\n\n​\n\nString\n\n​\n\n此消息在节点中的消息 ID，从 0 开始计数，例如输出节点的第 5 条消息。\n\n​\n\nnode_is_finish\n\n​\n\nBoolean\n\n​\n\n当前消息是否为此节点的最后一个数据包。\n\n​\n\next\n\n​\n\nMap[String]String\n\n​\n\n额外字段。\n\n​\n\nusage\n\n​\n\nObject of\n\n​\n\nUsage\n\n​\n\n资源使用情况，包含本次 API 调用消耗的 Token 数量等信息。\n\n​\n\nnode_id\n\n​\n\nString\n\n​\n\n输出消息的节点 ID。\n\n​\n\nnode_execute_uuid\n\n​\n\nString\n\n​\n\n节点每次执行的 ID，用于追踪和识别工作流中特定节点的单次执行情况。\n\n​\n\n​\n\nusage\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ninput_count\n\n​\n\n​\n\n​\n\nInteger\n\n​\n\n​\n\n50\n\n​\n\n​\n\n输入内容所消耗的 Token 数，包含对话上下文、系统提示词、用户当前输入等所有输入类的 Token 消耗。\n\n​\n\noutput_count\n\n​\n\n​\n\n​\n\nInteger\n\n​\n\n​\n\n100\n\n​\n\n​\n\n大模型输出的内容所消耗的 Token 数。\n\n​\n\n​\n\n​\n\ntoken_count\n\n​\n\n​\n\n​\n\nInteger\n\n​\n\n​\n\n150\n\n​\n\n​\n\n本次 API 调用消耗的 Token 总量，包括输入和输出两部分的消耗。\n\n​\n\n​\n\n​\n\n​\n\nInterrupt 事件\n\n​\n\nInterrupt 事件中，data 的结构如下：\n\n​\n\n​\n\n参数名\n\n​\n\n参数类型\n\n​\n\n参数描述\n\n​\n\ninterrupt_data\n\n​\n\nObject\n\n​\n\n中断控制内容。\n\n​\n\ninterrupt_data.event_id\n\n​\n\nString\n\n​\n\n工作流中断事件 ID，恢复运行时应回传此字段，具体请参见\n\n​\n\n流式恢复运行工作流\n\n。\n\n​\n\ninterrupt_data.type\n\n​\n\nInteger\n\n​\n\n工作流中断类型，恢复运行时应回传此字段，具体请参见\n\n​\n\n流式恢复运行工作流\n\n。\n\n​\n\ninterrupt_data.required_parameters\n\n​\n\nmap<String,WorkflowParameter>\n\n​\n\n工作流中断时需要补充的参数信息，采用键值对（key-value）结构：key为参数名称，value为该参数的值。\n\n​\n\n​\n\nnode_title\n\n​\n\nString\n\n​\n\n输出消息的节点名称，例如“问答”。\n\n​\n\n​\n\nError 事件\n\n​\n\nError 事件中，data 的结构如下：\n\n​\n\n​\n\n参数名\n\n​\n\n参数类型\n\n​\n\n参数描述\n\n​\n\nerror_code\n\n​\n\nInteger\n\n​\n\n调用状态码。\n\n​\n\n0 表示调用成功。\n\n​\n\n其他值表示调用失败。你可以通过 error_message 字段判断详细的错误原因。\n\n​\n\nerror_message\n\n​\n\nString\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n​\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nShell\n\n复制\n\ncurl --location --request POST 'https://api.coze.cn/v1/workflow/stream_run' \\\n\n​\n\n--header 'Authorization: Bearer pat_fhwefweuk****' \\\n\n​\n\n--header 'Content-Type: application/json' \\\n\n​\n\n--data-raw '{\n\n​\n\n\"workflow_id\": \"73664689170551*****\",\n\n​\n\n\"parameters\": {\n\n​\n\n\"user_name\":\"George\"\n\n​\n\n}\n\n​\n\n}'\n\n​\n\n​\n\n响应示例\n\n​\n\nMessage 事件\n\nError 事件\n\nInterrupt 事件\n\n​\n\nJSON\n\n复制\n\nid\n\n:\n\n0\n\n​\n\nevent\n\n:\n\nMessage\n\n​\n\ndata\n\n:\n\n{\n\n\"content\"\n\n:\n\n\"msg\"\n\n,\n\n\"node_is_finish\"\n\n:\n\nfalse\n\n,\n\n\"node_seq_id\"\n\n:\n\n\"0\"\n\n,\n\n\"node_title\"\n\n:\n\n\"Message\"\n\n}\n\n​\n\n​\n\nid\n\n:\n\n1\n\n​\n\nevent\n\n:\n\nMessage\n\n​\n\ndata\n\n:\n\n{\n\n\"content\"\n\n:\n\n\"为\"\n\n,\n\n\"node_is_finish\"\n\n:\n\nfalse\n\n,\n\n\"node_seq_id\"\n\n:\n\n\"1\"\n\n,\n\n\"node_title\"\n\n:\n\n\"Message\"\n\n}\n\n​\n\n​\n\nid\n\n:\n\n2\n\n​\n\nevent\n\n:\n\nMessage\n\n​\n\ndata\n\n:\n\n{\n\n\"content\"\n\n:\n\n\"什么小明要带一把尺子去看电影？\\n因\"\n\n,\n\n\"node_is_finish\"\n\n:\n\nfalse\n\n,\n\n\"node_seq_id\"\n\n:\n\n\"2\"\n\n,\n\n\"node_title\"\n\n:\n\n\"Message\"\n\n}\n\n​\n\n​\n\nid\n\n:\n\n3\n\n​\n\nevent\n\n:\n\nMessage\n\n​\n\ndata\n\n:\n\n{\n\n\"content\"\n\n:\n\n\"为他听说电影很长，怕\"\n\n,\n\n\"node_is_finish\"\n\n:\n\nfalse\n\n,\n\n\"node_seq_id\"\n\n:\n\n\"3\"\n\n,\n\n\"node_title\"\n\n:\n\n\"Message\"\n\n}\n\n​\n\n​\n\nid\n\n:\n\n4\n\n​\n\nevent\n\n:\n\nMessage\n\n​\n\ndata\n\n:\n\n{\n\n\"content\"\n\n:\n\n\"坐不下！\"\n\n,\n\n\"node_is_finish\"\n\n:\n\ntrue\n\n,\n\n\"node_seq_id\"\n\n:\n\n\"4\"\n\n,\n\n\"node_title\"\n\n:\n\n\"Message\"\n\n}\n\n​\n\n​\n\nid\n\n:\n\n5\n\n​\n\nevent\n\n:\n\nMessage\n\n​\n\ndata\n\n:\n\n{\n\n\"content\"\n\n:\n\n\"{\\\"output\\\":\\\"为什么小明要带一把尺子去看电影？\\\\n因为他听说电影很长，怕坐不下！\\\"}\"\n\n,\n\n\"cost\"\n\n:\n\n\"0.00\"\n\n,\n\n\"node_is_finish\"\n\n:\n\ntrue\n\n,\n\n\"node_seq_id\"\n\n:\n\n\"0\"\n\n,\n\n\"node_title\"\n\n:\n\n\"\"\n\n,\n\n\"token\"\n\n:\n\n0\n\n}\n\n​\n\n​\n\nid\n\n:\n\n6\n\n​\n\nevent\n\n:\n\nDone\n\n​\n\ndata\n\n:\n\n{}\n\n​\n\n​\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n​\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n执行工作流\n\n下一篇\n\n恢复运行工作流（流式响应）",
        "links": [
          {
            "text": "上传文件",
            "href": "https://www.coze.cn/open/docs/developer_guides/upload_files"
          }
        ]
      },
      "markdown": "- 通过 API 方式执行工作流前，应确认此工作流已发布，执行从未发布过的工作流时会返回错误码 4200。创建并发布工作流的操作可参考 ​ 使用低代码工作流 。 ​\n\n- 调用此 API 之前，应先在扣子编程中试运行此工作流。 ​\n\n- 如果试运行时需要关联智能体，则调用此 API 执行工作流时，也需要指定 bot_id。通常情况下，执行存在数据库节点、变量节点等节点的工作流需要关联智能体。 ​\n\n- 执行应用中的工作流时，需要指定 app_id。 ​\n\n- 请勿同时指定 bot_id 和 app_id，否则 API 会报错 4000，表示请求参数错误。 ​\n\n- 此接口为同步接口，如果工作流整体或某些节点运行超时，智能体可能无法提供符合预期的回复，建议将工作流的执行时间控制在 5 分钟以内。同步执行时，工作流整体超时时间限制可参考 ​ 低代码工作流使用限制 。 ​\n\n- 工作流支持的请求大小上限为 20MB，包括输入参数以及运行期间产生的消息历史等所有相关数据。 ​\n\n| 请求方式​ | POST​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/workflow/stream_run​​ |\n| 权限​ | run​确保调用该接口使用的访问令牌开通了run权限，详细信息参考​鉴权方式概述。​ |\n| 接口说明​ | 执行已发布的工作流，响应方式为流式响应。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考​准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| workflow_id​ | String​ | 必选​ | 待执行的 Workflow ID，此工作流应已发布。​进入 Workflow 编排页面，在页面 URL 中，workflow参数后的数字就是 Workflow ID。例如https://www.coze.com/work_flow?space_id=42463***&workflow_id=73505836754923***，Workflow ID 为73505836754923***。​ |\n| parameters​ | map[String]Any​ | 可选​ | 工作流开始节点的输入参数及取值，你可以在指定工作流的编排页面查看参数列表。​如果工作流输入参数为 Image 等类型的文件，你可以传入文件 URL 或调用上传文件API 获取 file_id 后传入 file_id。示例：​上传文件并传入 file_id：​单个文件示例：\"parameters\": { \"image\": \"{\\\"file_id\\\":\\\"1122334455\\\"}\" }​文件数组示例：\"parameters\": { \"image\": [ \"{\\\"file_id\\\":\\\"1122334455\\\"}\" ] }。​传入文件 URL：​“parameters” :{\"input\":\"请总结图片内容\", \"image\": \"https://example.com/tos-cn-i-mdko3gqilj/example.png\" }​ |\n| bot_id​​ | String​​ | 可选​​ | 需要关联的智能体ID。 部分工作流执行时需要指定关联的智能体，例如存在数据库节点、变量节点等节点的工作流。​​​​​​进入智能体的开发页面，开发页面 URL 中bot参数后的数字就是智能体ID。例如https://www.coze.com/space/341****/bot/73428668*****，Bot ID 为73428668*****。​说明确保调用该接口使用的令牌开通了此智能体所在空间的权限。​确保该智能体已发布为 API 服务。​​ |\n| ext​ | Map[String][String]​​ | 可选​ | 用于指定一些额外的字段，以 Map[String][String] 格式传入。例如某些插件会隐式用到的经纬度等字段。​目前仅支持以下字段：​latitude：String 类型，表示纬度。​longitude：String 类型，表示经度。​user_id：String 类型，表示用户 ID。​ |\n| app_id​ | String​ | 可选​ | 工作流所在的应用 ID。​你可以通过应用的业务编排页面 URL 中获取应用 ID，也就是 URL 中 project-ide 参数后的一串字符，例如https://www.coze.cn/space/739174157340921****/project-ide/743996105122521****/workflow/744102227704147****中，应用的 ID 为743996105122521****。​说明仅运行扣子应用中的工作流时，才需要设置 app_id。智能体绑定的工作流、空间资源库中的工作流无需设置 app_id。​​ |\n| workflow_version​​​ | String​​ | 可选​​ | 工作流的版本号，仅当运行的工作流属于资源库工作流时有效。未指定版本号时默认执行最新版本的工作流。​ |\n| connector_id​ | String​​ | 可选​​ | 渠道 ID，用于配置该工作流在什么渠道执行。​当智能体或扣子应用发布到某个渠道后，可以通过该参数指定工作流在对应的渠道执行。​扣子编程的渠道 ID 包括：​1024（默认值）：API 渠道。​999：Chat SDK。​998：WebSDK。​10000122：扣子商店。​10000113：微信客服。​10000120：微信服务号。​10000121：微信订阅号。​10000126：抖音小程序。​10000127：微信小程序。​10000011：飞书。​10000128：飞书多维表格。​10000117：掘金。​自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在账号设置>发布渠道>企业自定义渠道管理页面查看渠道 ID。​说明不同渠道的用户数据、会话记录等相互隔离，进行数据分析统计时，不支持跨渠道数据调用。​​ |\n\n- 上传文件并传入 file_id： ​\n\n- 单个文件示例： \"parameters\": { \"image\": \"{\\\"file_id\\\":\\\"1122334455\\\"}\" } ​\n\n- 文件数组示例： \"parameters\": { \"image\": [ \"{\\\"file_id\\\":\\\"1122334455\\\"}\" ] } 。 ​\n\n- 传入文件 URL： ​\n\n- 确保调用该接口使用的令牌开通了此智能体所在空间的权限。 ​\n\n- 确保该智能体已发布为 API 服务。 ​\n\n- latitude：String 类型，表示纬度。 ​\n\n- longitude：String 类型，表示经度。 ​\n\n- user_id：String 类型，表示用户 ID。 ​\n\n- 1024（默认值）：API 渠道。 ​\n\n- 999：Chat SDK。 ​\n\n- 998：WebSDK。 ​\n\n- 10000122：扣子商店。 ​\n\n- 10000113：微信客服。 ​\n\n- 10000120：微信服务号。 ​\n\n- 10000121：微信订阅号。 ​\n\n- 10000126：抖音小程序。 ​\n\n- 10000127：微信小程序。 ​\n\n- 10000011：飞书。 ​\n\n- 10000128：飞书多维表格。 ​\n\n- 10000117：掘金。 ​\n\n- 自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在 账号设置 > 发布渠道 > 企业自定义渠道管理 页面查看渠道 ID。 ​\n\n- 事件 ID（id）默认从 0 开始计数，以包含 event: Done 的事件为结束标志。开发者应根据 id 确认响应消息整体无丢包现象。 ​\n\n- Message 事件的消息 ID 默认从 0 开始计数，以包含 node_is_finish : true 的事件为结束标志。开发者应根据 node_seq_id 确认 Message 事件中每条消息均完整返回，无丢包现象。 ​\n\n| 参数名​ | 参数类型​ | 参数描述​ |\n| id​ | Integer​ | 此消息在接口响应中的事件 ID。以 0 为开始。​ |\n| event​ | String​ | 当前流式返回的数据包事件。包括以下类型：​Message：工作流节点输出消息，例如输出节点、结束节点的输出消息。可以在 data 中查看具体的消息内容。​Error：报错。可以在 data 中查看 error_code 和 error_message，排查问题。​Done：结束。表示工作流执行结束，此时 data 中包含 debug URL。​Interrupt：中断。表示工作流中断，此时 data 字段中包含具体的中断信息。​PING：心跳信号。表示工作流执行中，消息内容为空，用于维持连接。​ |\n| data​ | Object​ | 事件内容。各个 event 类型的事件内容格式不同。​ |\n\n- Message：工作流节点输出消息，例如输出节点、结束节点的输出消息。可以在 data 中查看具体的消息内容。 ​\n\n- Error：报错。可以在 data 中查看 error_code 和 error_message，排查问题。 ​\n\n- Done：结束。表示工作流执行结束，此时 data 中包含 debug URL。 ​\n\n- Interrupt：中断。表示工作流中断，此时 data 字段中包含具体的中断信息。 ​\n\n- PING：心跳信号。表示工作流执行中，消息内容为空，用于维持连接。 ​\n\n| 参数名​ | 参数类型​ | 参数描述​ |\n| content​ | String​ | 流式输出的消息内容。​ |\n| node_title​ | String​ | 输出消息的节点名称，例如输出节点、结束节点。​ |\n| node_seq_id​ | String​ | 此消息在节点中的消息 ID，从 0 开始计数，例如输出节点的第 5 条消息。​ |\n| node_is_finish​ | Boolean​ | 当前消息是否为此节点的最后一个数据包。​ |\n| ext​ | Map[String]String​ | 额外字段。​ |\n| usage​ | Object of​Usage​ | 资源使用情况，包含本次 API 调用消耗的 Token 数量等信息。​ |\n| node_id​ | String​ | 输出消息的节点 ID。​ |\n| node_execute_uuid​ | String​ | 节点每次执行的 ID，用于追踪和识别工作流中特定节点的单次执行情况。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| input_count​​​ | Integer​​ | 50​​ | 输入内容所消耗的 Token 数，包含对话上下文、系统提示词、用户当前输入等所有输入类的 Token 消耗。​ |\n| output_count​​​ | Integer​​ | 100​​ | 大模型输出的内容所消耗的 Token 数。​​​ |\n| token_count​​​ | Integer​​ | 150​​ | 本次 API 调用消耗的 Token 总量，包括输入和输出两部分的消耗。​​​ |\n\n| 参数名​ | 参数类型​ | 参数描述​ |\n| interrupt_data​ | Object​ | 中断控制内容。​ |\n| interrupt_data.event_id​ | String​ | 工作流中断事件 ID，恢复运行时应回传此字段，具体请参见​流式恢复运行工作流。​ |\n| interrupt_data.type​ | Integer​ | 工作流中断类型，恢复运行时应回传此字段，具体请参见​流式恢复运行工作流。​ |\n| interrupt_data.required_parameters​ | map<String,WorkflowParameter>​ | 工作流中断时需要补充的参数信息，采用键值对（key-value）结构：key为参数名称，value为该参数的值。​​ |\n| node_title​ | String​ | 输出消息的节点名称，例如“问答”。​ |\n\n| 参数名​ | 参数类型​ | 参数描述​ |\n| error_code​ | Integer​ | 调用状态码。​0 表示调用成功。​其他值表示调用失败。你可以通过 error_message 字段判断详细的错误原因。​ |\n| error_message​ | String​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​ |\n\n- 0 表示调用成功。 ​\n\n- 其他值表示调用失败。你可以通过 error_message 字段判断详细的错误原因。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/workflow_resume",
      "title": "恢复运行工作流（流式响应）",
      "content": {
        "sections": [],
        "full_text": "恢复运行工作流（流式响应）\n\n流式恢复运行已中断的工作流。\n\n​\n\n接口说明\n\n​\n\n执行包含问答节点的工作流时，智能体会以指定问题向用户提问，并等待用户回答。此时工作流为中断状态，开发者需要调用此接口回答问题，并恢复运行工作流。如果用户的响应和智能体预期提取的信息不匹配，例如缺少必选的字段，或字段数据类型不一致，工作流会再次中断并追问。如果询问 3 次仍未收到符合预期的回复，则判定为工作流执行失败。\n\n​\n\n恢复运行工作流（流式响应）\n\n和\n\n恢复运行工作流\n\n的区别如下：\n\n​\n\n如果调用\n\n执行工作流（流式响应）\n\nAPI，中断恢复时需要使用\n\n恢复运行工作流（流式响应）\n\nAPI，该 API 通过流式返回执行结果。\n\n​\n\n如果调用\n\n执行工作流\n\nAPI，中断恢复时需要使用\n\n恢复运行工作流\n\nAPI，该 API 支持同步运行或异步运行返回执行结果。\n\n​\n\n限制说明\n\n​\n\n最多调用此接口恢复运行 3 次，如果第三次恢复运行时智能体仍未收到符合预期的回复，则判定为工作流执行失败。\n\n​\n\n恢复运行后，index 和节点 index 都会重置。\n\n​\n\n恢复运行工作流也会产生 token 消耗，且与\n\n执行工作流（流式响应）\n\n时消耗的 token 数量相同。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/workflow/stream_resume\n\n​\n\n​\n\n权限\n\n​\n\nrun\n\n​\n\n确保调用该接口使用的访问令牌开通了 run 权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n恢复运行已中断的工作流。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nworkflow_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n73505836754923***\n\n​\n\n待执行的 Workflow ID，此工作流应已发布。\n\n​\n\n进入 Workflow 编排页面，在页面 URL 中，workflow 参数后的数字就是 Workflow ID。例如\n\nhttps://www.coze.com/work_flow?space_id=42463***&workflow_id=73505836754923***\n\n，Workflow ID 为 73505836754923***。\n\n​\n\nevent_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n74048319882025***\n\n​\n\n工作流执行中断事件 ID。你可以从\n\n执行工作流（流式响应）\n\n的响应信息中获得中断事件 ID。\n\n​\n\ninterrupt_type\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\n2\n\n​\n\n工作流执行中断的类型，用于标识导致工作流中断的具体原因，你可以从\n\n执行工作流\n\n的响应信息中获得中断事件的中断类型。枚举值：\n\n​\n\n6\n\n：端插件触发中断。\n\n​\n\n2\n\n：问答节点触发中断。\n\n​\n\n5\n\n：输入节点触发中断。\n\n​\n\n7\n\n：OAuth 插件触发中断。\n\n​\n\nresume_data\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n杭州，2024-08-20\n\n​\n\n恢复执行时，用户对智能体指定问题的回复。\n\n​\n\n如果是问答节点导致的中断，回复中应包含问答节点中的必选参数，否则工作流会再次中断并提问。\n\n​\n\n如果要传入 Image 等类型的文件，可以调用\n\n上传文件\n\n​\n\n上传文件\n\nAPI 获取 file_id，在调用此 API 时在 resume_data 中以序列化之后的 JSON 格式传入 file_id。例如\n\n“resume_data” : \"{\\\"file_id\\\": \\\"1456234***\\\"}\"\n\n。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n说明\n\n在流式响应中，开发者需要注意是否存在丢包现象。\n\n​\n\n事件 ID（id）默认从 0 开始计数，以包含\n\nevent: Done\n\n的事件为结束标志。开发者应根据 id 确认响应消息整体无丢包现象。\n\n​\n\nMessage 事件的消息 ID 默认从 0 开始计数，以包含\n\nnode_is_finish : true\n\n的事件为结束标志。开发者应根据 node_seq_id 确认 Message 事件中每条消息均完整返回，无丢包现象。\n\n​\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n0\n\n​\n\n此消息在接口响应中的事件 ID。以 0 为开始。\n\n​\n\nevent\n\n​\n\nString\n\n​\n\nMessage\n\n​\n\n当前流式返回的数据包事件。包括以下类型：\n\n​\n\nMessage：工作流节点输出消息，例如输出节点、结束节点的输出消息。可以在 data 中查看具体的消息内容。\n\n​\n\nError：报错。可以在 data 中查看 error_code 和 error_message，排查问题。\n\n​\n\nDone：结束。表示工作流执行结束，此时 data 中包含。\n\n​\n\nInterrupt：中断。表示工作流中断，此时 data 字段中包含具体的中断信息。\n\n​\n\nnode_seq_id\n\n​\n\nString\n\n​\n\n0\n\n​\n\n此消息在节点中的消息 ID，从 0 开始计数，例如输出节点的第 5 条消息。\n\n​\n\nnode_title\n\n​\n\nString\n\n​\n\nEnd\n\n​\n\n输出消息的节点名称，例如输出节点、结束节点。\n\n​\n\ncontent\n\n​\n\nString\n\n​\n\n请问你想查看哪个城市、哪一天的天气呢\n\n​\n\n流式输出的消息内容。\n\n​\n\nnode_is_finish\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n当前消息是否为此节点的最后一个数据包。\n\n​\n\ninterrupt_data\n\n​\n\nObject of\n\nInterrupt\n\n​\n\n{\"data\":\"\",\"event_id\":\"7404831988202520614/6302059919516746633\",\"type\":2}\n\n​\n\ncontent type为interrupt时传输，中断协议\n\n​\n\ncost\n\n​\n\nString\n\n​\n\n0\n\n​\n\n预留字段，无需关注。\n\n​\n\nerror_code\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。\n\n​\n\n0 表示调用成功。\n\n​\n\n其他值表示调用失败。你可以通过 error_message 字段判断详细的错误原因。\n\n​\n\nerror_message\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\nusage\n\n​\n\nObject of\n\nUsage\n\n​\n\n​\n\n资源使用情况。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n响应详情。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\n​\n\nInterrupt\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nString\n\n​\n\n{\\\"content_type\\\":\\\"text\\\",\\\"content\\\":\\\"[{\\\\\\\"type\\\\\\\":\\\\\\\"string\\\\\\\",\\\\\\\"name\\\\\\\":\\\\\\\"img\\\\\\\",\\\\\\\"required\\\\\\\":true,\\\\\\\"assistType\\\\\\\":2}]\\\"}\n\n​\n\n中断控制内容，用于在工作流中断时传递控制信息。当工作流需要用户输入或执行特定操作时，通过此字段传递相关信息。\n\n​\n\ntype\n\n​\n\nInteger\n\n​\n\n2\n\n​\n\n工作流中断类型，调用\n\n恢复运行工作流\n\nAPI 恢复运行时应回传此字段。\n\n​\n\n枚举值：\n\n​\n\n6\n\n：端插件触发中断。\n\n​\n\n2\n\n：问答节点触发中断。\n\n​\n\n5\n\n：输入节点触发中断。\n\n​\n\n7\n\n：OAuth 插件触发中断。\n\n​\n\nevent_id\n\n​\n\nString\n\n​\n\n740483198820252***\n\n​\n\n工作流中断事件 ID，调用\n\n恢复运行工作流\n\nAPI 恢复运行时应回传此字段。\n\n​\n\nrequired_parameters\n\n​\n\nJSON Map\n\n​\n\n{ \"img\": { \"required\": true, \"type\": \"image\" } }\n\n​\n\n工作流中断时需要补充的参数信息，采用键值对（key-value）结构，其中 key 为输入节点对应的参数名称，value 为该参数的定义信息（包含类型、是否必填等属性）。\n\n​\n\n​\n\nRequiredParameters\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ntype\n\n​\n\nString\n\n​\n\nstring\n\n​\n\n该参数的类型。\n\n​\n\nitems\n\n​\n\nObject of\n\nOpenAPIParameter\n\n​\n\n{\"type\":\"image\"}\n\n​\n\n当参数类型为\n\narray\n\n时，该字段用于定义数组元素的子类型。\n\n​\n\nrequired\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n标识输入参数是否为必填项。\n\n​\n\ntrue\n\n：该参数为必填项。\n\n​\n\nfalse\n\n：该参数为可选项。\n\n​\n\nproperties\n\n​\n\nJSON Map\n\n​\n\n{ \"arr_obj_num\": { \"required\": false, \"type\": \"number\" } }\n\n​\n\n当参数类型为\n\nobject\n\n时，该字段用于定义对象类型的子参数信息，采用键值对（key-value）结构，其中 key 为子参数的名称，value 为该子参数的定义信息（包含类型、是否必填等属性）。\n\n​\n\ndescription\n\n​\n\nString\n\n​\n\n上传的图片。\n\n​\n\n该参数的描述信息。\n\n​\n\ndefault_value\n\n​\n\nString\n\n​\n\n-\n\n​\n\n该参数配置的默认值。\n\n​\n\n​\n\nUsage\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ninput_count\n\n​\n\nInteger\n\n​\n\n50\n\n​\n\n输入内容所消耗的 Token 数，包含对话上下文、系统提示词、用户当前输入等所有输入类的 Token 消耗。\n\n​\n\noutput_count\n\n​\n\nInteger\n\n​\n\n100\n\n​\n\n大模型输出的内容所消耗的 Token 数。\n\n​\n\ntoken_count\n\n​\n\nInteger\n\n​\n\n150\n\n​\n\n本次 API 调用消耗的 Token 总量，包括输入和输出两部分的消耗。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location 'https\n\n:\n\n//api.coze.cn/v1/workflow/stream_resume' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_vTG1****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data '\n\n{\n\n​\n\n\"event_id\"\n\n:\n\n\"740483727529459****/433802199567434****\"\n\n,\n\n​\n\n\"interrupt_type\"\n\n:\n\n2\n\n,\n\n​\n\n\"resume_data\"\n\n:\n\n\"杭州，2024-08-20\"\n\n,\n\n​\n\n\"workflow_id\"\n\n:\n\n\"739739507914235****\"\n\n​\n\n}\n\n'\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\nid\n\n:\n\n0\n\n​\n\nevent\n\n:\n\nMessage\n\n​\n\ndata\n\n:\n\n{\n\n\"content\"\n\n:\n\n\"{\\\"output\\\":[{\\\"condition\\\":\\\"中到大雨\\\",\\\"humidity\\\":72,\\\"predict_date\\\":\\\"2024-08-20\\\",\\\"temp_high\\\":35,\\\"temp_low\\\":26,\\\"weather_day\\\":\\\"中到大雨\\\",\\\"wind_dir_day\\\":\\\"西风\\\",\\\"wind_dir_night\\\":\\\"西风\\\",\\\"wind_level_day\\\":\\\"3\\\",\\\"wind_level_night\\\":\\\"3\\\"}]}\"\n\n,\n\n\"content_type\"\n\n:\n\n\"text\"\n\n,\n\n\"cost\"\n\n:\n\n\"0\"\n\n,\n\n\"node_is_finish\"\n\n:\n\ntrue\n\n,\n\n\"node_seq_id\"\n\n:\n\n\"0\"\n\n,\n\n\"node_title\"\n\n:\n\n\"End\"\n\n,\n\n\"token\"\n\n:\n\n386\n\n}\n\n​\n\nid\n\n:\n\n1\n\n​\n\nevent\n\n:\n\nDone\n\n​\n\ndata\n\n:\n\n{}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n执行工作流（流式响应）\n\n下一篇\n\n恢复运行工作流",
        "links": []
      },
      "markdown": "- 如果调用 执行工作流（流式响应） API，中断恢复时需要使用 恢复运行工作流（流式响应） API，该 API 通过流式返回执行结果。 ​\n\n- 如果调用 执行工作流 API，中断恢复时需要使用 恢复运行工作流 API，该 API 支持同步运行或异步运行返回执行结果。 ​\n\n- 最多调用此接口恢复运行 3 次，如果第三次恢复运行时智能体仍未收到符合预期的回复，则判定为工作流执行失败。 ​\n\n- 恢复运行后，index 和节点 index 都会重置。 ​\n\n- 恢复运行工作流也会产生 token 消耗，且与 执行工作流（流式响应） 时消耗的 token 数量相同。 ​\n\n| 请求方式​ | POST​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/workflow/stream_resume​​ |\n| 权限​ | run​确保调用该接口使用的访问令牌开通了 run 权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 恢复运行已中断的工作流。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| workflow_id​ | String​ | 必选​ | 73505836754923***​ | 待执行的 Workflow ID，此工作流应已发布。​进入 Workflow 编排页面，在页面 URL 中，workflow 参数后的数字就是 Workflow ID。例如https://www.coze.com/work_flow?space_id=42463***&workflow_id=73505836754923***，Workflow ID 为 73505836754923***。​ |\n| event_id​ | String​ | 必选​ | 74048319882025***​ | 工作流执行中断事件 ID。你可以从执行工作流（流式响应）的响应信息中获得中断事件 ID。​ |\n| interrupt_type​ | Integer​ | 必选​ | 2​ | 工作流执行中断的类型，用于标识导致工作流中断的具体原因，你可以从执行工作流的响应信息中获得中断事件的中断类型。枚举值：​6：端插件触发中断。​2：问答节点触发中断。​5：输入节点触发中断。​7：OAuth 插件触发中断。​ |\n| resume_data​ | String​ | 必选​ | 杭州，2024-08-20​ | 恢复执行时，用户对智能体指定问题的回复。​如果是问答节点导致的中断，回复中应包含问答节点中的必选参数，否则工作流会再次中断并提问。​如果要传入 Image 等类型的文件，可以调用上传文件​上传文件API 获取 file_id，在调用此 API 时在 resume_data 中以序列化之后的 JSON 格式传入 file_id。例如“resume_data” : \"{\\\"file_id\\\": \\\"1456234***\\\"}\"。​ |\n\n- 6 ：端插件触发中断。 ​\n\n- 2 ：问答节点触发中断。 ​\n\n- 5 ：输入节点触发中断。 ​\n\n- 7 ：OAuth 插件触发中断。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 0​ | 此消息在接口响应中的事件 ID。以 0 为开始。​ |\n| event​ | String​ | Message​ | 当前流式返回的数据包事件。包括以下类型：​Message：工作流节点输出消息，例如输出节点、结束节点的输出消息。可以在 data 中查看具体的消息内容。​Error：报错。可以在 data 中查看 error_code 和 error_message，排查问题。​Done：结束。表示工作流执行结束，此时 data 中包含。​Interrupt：中断。表示工作流中断，此时 data 字段中包含具体的中断信息。​ |\n| node_seq_id​ | String​ | 0​ | 此消息在节点中的消息 ID，从 0 开始计数，例如输出节点的第 5 条消息。​ |\n| node_title​ | String​ | End​ | 输出消息的节点名称，例如输出节点、结束节点。​ |\n| content​ | String​ | 请问你想查看哪个城市、哪一天的天气呢​ | 流式输出的消息内容。​ |\n| node_is_finish​ | Boolean​ | true​ | 当前消息是否为此节点的最后一个数据包。​ |\n| interrupt_data​ | Object ofInterrupt​ | {\"data\":\"\",\"event_id\":\"7404831988202520614/6302059919516746633\",\"type\":2}​ | content type为interrupt时传输，中断协议​ |\n| cost​ | String​ | 0​ | 预留字段，无需关注。​ |\n| error_code​ | Long​ | 0​ | 调用状态码。​0 表示调用成功。​其他值表示调用失败。你可以通过 error_message 字段判断详细的错误原因。​ |\n| error_message​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​ |\n| usage​ | Object ofUsage​ | ​ | 资源使用情况。​ |\n| detail​ | Object ofResponseDetail​ | 20241210152726467C48D89D6DB2****​ | 响应详情。​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n\n- Message：工作流节点输出消息，例如输出节点、结束节点的输出消息。可以在 data 中查看具体的消息内容。 ​\n\n- Error：报错。可以在 data 中查看 error_code 和 error_message，排查问题。 ​\n\n- Done：结束。表示工作流执行结束，此时 data 中包含。 ​\n\n- Interrupt：中断。表示工作流中断，此时 data 字段中包含具体的中断信息。 ​\n\n- 0 表示调用成功。 ​\n\n- 其他值表示调用失败。你可以通过 error_message 字段判断详细的错误原因。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | String​ | {\\\"content_type\\\":\\\"text\\\",\\\"content\\\":\\\"[{\\\\\\\"type\\\\\\\":\\\\\\\"string\\\\\\\",\\\\\\\"name\\\\\\\":\\\\\\\"img\\\\\\\",\\\\\\\"required\\\\\\\":true,\\\\\\\"assistType\\\\\\\":2}]\\\"}​ | 中断控制内容，用于在工作流中断时传递控制信息。当工作流需要用户输入或执行特定操作时，通过此字段传递相关信息。​ |\n| type​ | Integer​ | 2​ | 工作流中断类型，调用恢复运行工作流API 恢复运行时应回传此字段。​枚举值：​6：端插件触发中断。​2：问答节点触发中断。​5：输入节点触发中断。​7：OAuth 插件触发中断。​ |\n| event_id​ | String​ | 740483198820252***​ | 工作流中断事件 ID，调用恢复运行工作流API 恢复运行时应回传此字段。​ |\n| required_parameters​ | JSON Map​ | { \"img\": { \"required\": true, \"type\": \"image\" } }​ | 工作流中断时需要补充的参数信息，采用键值对（key-value）结构，其中 key 为输入节点对应的参数名称，value 为该参数的定义信息（包含类型、是否必填等属性）。​ |\n\n- 6 ：端插件触发中断。 ​\n\n- 2 ：问答节点触发中断。 ​\n\n- 5 ：输入节点触发中断。 ​\n\n- 7 ：OAuth 插件触发中断。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| type​ | String​ | string​ | 该参数的类型。​ |\n| items​ | Object ofOpenAPIParameter​ | {\"type\":\"image\"}​ | 当参数类型为array时，该字段用于定义数组元素的子类型。​ |\n| required​ | Boolean​ | true​ | 标识输入参数是否为必填项。​true：该参数为必填项。​false：该参数为可选项。​ |\n| properties​ | JSON Map​ | { \"arr_obj_num\": { \"required\": false, \"type\": \"number\" } }​ | 当参数类型为object时，该字段用于定义对象类型的子参数信息，采用键值对（key-value）结构，其中 key 为子参数的名称，value 为该子参数的定义信息（包含类型、是否必填等属性）。​ |\n| description​ | String​ | 上传的图片。​ | 该参数的描述信息。​ |\n| default_value​ | String​ | -​ | 该参数配置的默认值。​ |\n\n- true ：该参数为必填项。 ​\n\n- false ：该参数为可选项。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| input_count​ | Integer​ | 50​ | 输入内容所消耗的 Token 数，包含对话上下文、系统提示词、用户当前输入等所有输入类的 Token 消耗。​ |\n| output_count​ | Integer​ | 100​ | 大模型输出的内容所消耗的 Token 数。​ |\n| token_count​ | Integer​ | 150​ | 本次 API 调用消耗的 Token 总量，包括输入和输出两部分的消耗。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/resume_workflow",
      "title": "恢复运行工作流",
      "content": {
        "sections": [],
        "full_text": "恢复运行工作流\n\n恢复运行工作流。\n\n​\n\n接口说明\n\n​\n\n当调用\n\n执行工作流\n\nAPI 执行包含问答节点、输入节点的工作流时，智能体会以指定问题向用户提问，并等待用户回答。此时工作流为中断状态，开发者需要调用此 API 回答问题，并恢复运行工作流。如果问答节点勾选了\n\n从回复中提取字段\n\n，当用户的响应和智能体预期提取的信息不匹配，例如缺少必选的字段，或字段数据类型不一致，工作流会再次中断并追问。\n\n​\n\n如果\n\n执行工作流\n\nAPI 为同步运行，则恢复运行工作流也为同步运行。如果\n\n执行工作流\n\nAPI 为异步运行，则恢复运行工作流也为异步运行，你还需要调用\n\n查询异步执行结果\n\nAPI 查询执行结果。\n\n​\n\n恢复运行工作流（流式响应）\n\n和\n\n恢复运行工作流\n\n的区别如下：\n\n​\n\n如果调用\n\n执行工作流（流式响应）\n\nAPI 时工作流中断，恢复时需要使用\n\n恢复运行工作流（流式响应）\n\nAPI，该 API 通过流式返回执行结果。\n\n​\n\n如果调用\n\n执行工作流\n\nAPI 时工作流中断，恢复时需要使用\n\n恢复运行工作流\n\nAPI，该 API 支持同步运行或异步运行返回执行结果。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/workflows/resume\n\n​\n\n​\n\n权限\n\n​\n\nrun\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nrun\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n恢复运行工作流。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nworkflow_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n73505836754923***\n\n​\n\n待执行的 Workflow ID，此工作流应已发布。\n\n​\n\n进入 Workflow 编排页面，在页面 URL 中，workflow 参数后的数字就是 Workflow ID。例如\n\nhttps://www.coze.com/work_flow?space_id=42463***&workflow_id=73505836754923***\n\n，Workflow ID 为\n\n73505836754923***\n\n。\n\n​\n\nevent_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n74048319882025***\n\n​\n\n工作流执行中断事件 ID。你可以从\n\n执行工作流\n\n的响应信息中获得中断事件 ID。\n\n​\n\nresume_data\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n杭州，2024-08-20\n\n​\n\n恢复执行时，用户对智能体指定问题的回复。\n\n​\n\n如果是问答节点或输入节点导致的中断，回复中应包含对应节点中的必选参数，否则工作流会再次中断并提问。\n\n​\n\n如果要传入 Image 等类型的文件，可以调用\n\n上传文件\n\nAPI 获取 file_id，在调用此 API 时在 resume_data 中以序列化之后的 JSON 格式传入 file_id。例如\n\n“resume_data” : \"{\\\"file_id\\\": \\\"1456234***\\\"}\"\n\n。\n\n​\n\ninterrupt_type\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\n2\n\n​\n\n工作流执行中断的类型，用于标识导致工作流中断的具体原因，你可以从\n\n执行工作流\n\n的响应信息中获得中断事件的中断类型。枚举值：\n\n​\n\n6\n\n：端插件触发中断。\n\n​\n\n2\n\n：问答节点触发中断。\n\n​\n\n5\n\n：输入节点触发中断。\n\n​\n\n7\n\n：OAuth 插件触发中断。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndata\n\n​\n\nString\n\n​\n\n{\\\"output\\\":\\\"杭州当天的天气为小雨。\\\"}\n\n​\n\n同步运行时返回的工作流执行结果，通常为 JSON 序列化字符串，部分场景下可能返回非 JSON 结构的字符串。\n\n​\n\ndebug_url\n\n​\n\nString\n\n​\n\nhttps://www.coze.cn/work_flow?execute_id=743104097880585****&space_id=730976060439760****&workflow_id=742963539464539****\n\n​\n\n工作流试运行调试页面。访问此页面可查看每个工作流节点的运行结果、输入输出等信息。\n\n​\n\n说明\n\ndebug_url 的访问有效期为 7 天，过期后将无法访问。\n\n​\n\n​\n\nusage\n\n​\n\nObject of\n\nUsage\n\n​\n\n{\"input_count\":50,\"token_count\":150,\"output_count\":100}\n\n​\n\n本次 API 调用消耗的 Token 数量。\n\n​\n\n此处大模型返回的消耗 Token 仅供参考，以\n\n火山引擎账单\n\n实际为准。\n\n​\n\ninterrupt_data\n\n​\n\nObject of\n\nInterrupt\n\n​\n\n{\"data\":\"{\\\"content_type\\\":\\\"text\\\",\\\"content\\\":\\\"请输入您的姓名\\\"}\",\"type\":2,\"event_id\":\"740483198820252***\",\"required_parameters\":{\"name\":{\"type\":\"string\",\"required\":true}}}\n\n​\n\n中断事件的详细信息，包含中断控制内容、中断类型和事件 ID 等信息。\n\n​\n\nexecute_id\n\n​\n\nString\n\n​\n\n743104097880585****\n\n​\n\n异步运行时的事件 ID。如果\n\n执行工作流\n\n为异步运行时，本 API 也为异步运行，响应信息中会返回 execute_id。\n\n​\n\n调用\n\n查询异步执行结果\n\nAPI 时需要传入此 ID，查询工作流的执行状态或结果。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含本次请求的日志信息，用于问题排查和技术支持。\n\n​\n\n​\n\nUsage\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ninput_count\n\n​\n\nInteger\n\n​\n\n50\n\n​\n\n输入内容所消耗的 Token 数，包含对话上下文、系统提示词、用户当前输入等所有输入类的 Token 消耗。\n\n​\n\noutput_count\n\n​\n\nInteger\n\n​\n\n100\n\n​\n\n大模型输出的内容所消耗的 Token 数。\n\n​\n\ntoken_count\n\n​\n\nInteger\n\n​\n\n150\n\n​\n\n本次 API 调用消耗的 Token 总量，包括输入和输出两部分的消耗。\n\n​\n\n​\n\nInterrupt\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nString\n\n​\n\n{\\\"content_type\\\":\\\"text\\\",\\\"content\\\":\\\"[{\\\\\\\"type\\\\\\\":\\\\\\\"string\\\\\\\",\\\\\\\"name\\\\\\\":\\\\\\\"img\\\\\\\",\\\\\\\"required\\\\\\\":true,\\\\\\\"assistType\\\\\\\":2}]\\\"}\n\n​\n\n中断控制内容，用于在工作流中断时传递控制信息。当工作流需要用户输入或执行特定操作时，通过此字段传递相关信息。\n\n​\n\ntype\n\n​\n\nInteger\n\n​\n\n2\n\n​\n\n工作流中断类型，调用\n\n恢复运行工作流\n\nAPI 恢复运行时应回传此字段。\n\n​\n\n枚举值：\n\n​\n\n6\n\n：端插件触发中断。\n\n​\n\n2\n\n：问答节点触发中断。\n\n​\n\n5\n\n：输入节点触发中断。\n\n​\n\n7\n\n：OAuth 插件触发中断。\n\n​\n\nevent_id\n\n​\n\nString\n\n​\n\n740483198820252***\n\n​\n\n工作流中断事件 ID，调用\n\n恢复运行工作流\n\nAPI 恢复运行时应回传此字段。\n\n​\n\nrequired_parameters\n\n​\n\nJSON Map\n\n​\n\n{ \"img\": { \"required\": true, \"type\": \"image\" } }\n\n​\n\n工作流中断时需要补充的参数信息，采用键值对（key-value）结构，其中 key 为输入节点对应的参数名称，value 为该参数的定义信息（包含类型、是否必填等属性）。\n\n​\n\n​\n\nRequiredParameters\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ntype\n\n​\n\nString\n\n​\n\nstring\n\n​\n\n该参数的类型。\n\n​\n\nitems\n\n​\n\nObject of\n\nOpenAPIParameter\n\n​\n\n{\"type\":\"image\"}\n\n​\n\n当参数类型为\n\narray\n\n时，该字段用于定义数组元素的子类型。\n\n​\n\nrequired\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n标识输入参数是否为必填项。\n\n​\n\ntrue\n\n：该参数为必填项。\n\n​\n\nfalse\n\n：该参数为可选项。\n\n​\n\nproperties\n\n​\n\nJSON Map\n\n​\n\n{ \"arr_obj_num\": { \"required\": false, \"type\": \"number\" } }\n\n​\n\n当参数类型为\n\nobject\n\n时，该字段用于定义对象类型的子参数信息，采用键值对（key-value）结构，其中 key 为子参数的名称，value 为该子参数的定义信息（包含类型、是否必填等属性）。\n\n​\n\ndescription\n\n​\n\nString\n\n​\n\n上传的图片。\n\n​\n\n该参数的描述信息。\n\n​\n\ndefault_value\n\n​\n\nString\n\n​\n\n-\n\n​\n\n该参数配置的默认值。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/workflows/resume' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_I6w8e****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"event_id\"\n\n:\n\n\"75683404684*****/25042098367****\"\n\n,\n\n​\n\n\"interrupt_type\"\n\n:\n\n2\n\n,\n\n​\n\n\"resume_data\"\n\n:\n\n\"{\\\"file_id\\\": \\\"1456234***\\\"}\"\n\n,\n\n​\n\n\"workflow_id\"\n\n:\n\n\"73505836754923***\"\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"debug_url\"\n\n:\n\n\"https://api.coze.cn/work_flow?execute_id=756949870377***&space_id=75687968944***&workflow_id=75688742653***&execute_mode=2\"\n\n,\n\n​\n\n\"interrupt_data\"\n\n:\n\n{\n\n​\n\n\"data\"\n\n:\n\n\"{\\\"content_type\\\":\\\"text\\\",\\\"content\\\":\\\"[{\\\\\\\"type\\\\\\\":\\\\\\\"string\\\\\\\",\\\\\\\"name\\\\\\\":\\\\\\\"img\\\\\\\",\\\\\\\"required\\\\\\\":true,\\\\\\\"assistType\\\\\\\":2}]\\\"}\"\n\n,\n\n​\n\n\"required_parameters\"\n\n:\n\n{\n\n​\n\n\"img\"\n\n:\n\n{\n\n​\n\n\"required\"\n\n:\n\ntrue\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"image\"\n\n​\n\n}\n\n​\n\n},\n\n​\n\n\"event_id\"\n\n:\n\n\"75694987037***/2691977632***\"\n\n,\n\n​\n\n\"type\"\n\n:\n\n5\n\n​\n\n},\n\n​\n\n\"execute_id\"\n\n:\n\n\"7569498703774***\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"202511061720005429856FA5***\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n恢复运行工作流（流式响应）\n\n下一篇\n\n查询工作流异步运行结果",
        "links": []
      },
      "markdown": "- 如果调用 执行工作流（流式响应） API 时工作流中断，恢复时需要使用 恢复运行工作流（流式响应） API，该 API 通过流式返回执行结果。 ​\n\n- 如果调用 执行工作流 API 时工作流中断，恢复时需要使用 恢复运行工作流 API，该 API 支持同步运行或异步运行返回执行结果。 ​\n\n| 请求方式​ | POST​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/workflows/resume​​ |\n| 权限​ | run​确保调用该接口使用的访问令牌开通了run权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 恢复运行工作流。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| workflow_id​ | String​ | 必选​ | 73505836754923***​ | 待执行的 Workflow ID，此工作流应已发布。​进入 Workflow 编排页面，在页面 URL 中，workflow 参数后的数字就是 Workflow ID。例如https://www.coze.com/work_flow?space_id=42463***&workflow_id=73505836754923***，Workflow ID 为73505836754923***。​ |\n| event_id​ | String​ | 必选​ | 74048319882025***​ | 工作流执行中断事件 ID。你可以从执行工作流的响应信息中获得中断事件 ID。​ |\n| resume_data​ | String​ | 必选​ | 杭州，2024-08-20​ | 恢复执行时，用户对智能体指定问题的回复。​如果是问答节点或输入节点导致的中断，回复中应包含对应节点中的必选参数，否则工作流会再次中断并提问。​如果要传入 Image 等类型的文件，可以调用上传文件API 获取 file_id，在调用此 API 时在 resume_data 中以序列化之后的 JSON 格式传入 file_id。例如“resume_data” : \"{\\\"file_id\\\": \\\"1456234***\\\"}\"。​ |\n| interrupt_type​ | Integer​ | 必选​ | 2​ | 工作流执行中断的类型，用于标识导致工作流中断的具体原因，你可以从执行工作流的响应信息中获得中断事件的中断类型。枚举值：​6：端插件触发中断。​2：问答节点触发中断。​5：输入节点触发中断。​7：OAuth 插件触发中断。​ |\n\n- 6 ：端插件触发中断。 ​\n\n- 2 ：问答节点触发中断。 ​\n\n- 5 ：输入节点触发中断。 ​\n\n- 7 ：OAuth 插件触发中断。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| data​ | String​ | {\\\"output\\\":\\\"杭州当天的天气为小雨。\\\"}​ | 同步运行时返回的工作流执行结果，通常为 JSON 序列化字符串，部分场景下可能返回非 JSON 结构的字符串。​ |\n| debug_url​ | String​ | https://www.coze.cn/work_flow?execute_id=743104097880585****&space_id=730976060439760****&workflow_id=742963539464539****​ | 工作流试运行调试页面。访问此页面可查看每个工作流节点的运行结果、输入输出等信息。​说明debug_url 的访问有效期为 7 天，过期后将无法访问。​​ |\n| usage​ | Object ofUsage​ | {\"input_count\":50,\"token_count\":150,\"output_count\":100}​ | 本次 API 调用消耗的 Token 数量。​此处大模型返回的消耗 Token 仅供参考，以火山引擎账单实际为准。​ |\n| interrupt_data​ | Object ofInterrupt​ | {\"data\":\"{\\\"content_type\\\":\\\"text\\\",\\\"content\\\":\\\"请输入您的姓名\\\"}\",\"type\":2,\"event_id\":\"740483198820252***\",\"required_parameters\":{\"name\":{\"type\":\"string\",\"required\":true}}}​ | 中断事件的详细信息，包含中断控制内容、中断类型和事件 ID 等信息。​ |\n| execute_id​ | String​ | 743104097880585****​ | 异步运行时的事件 ID。如果执行工作流为异步运行时，本 API 也为异步运行，响应信息中会返回 execute_id。​调用查询异步执行结果API 时需要传入此 ID，查询工作流的执行状态或结果。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含本次请求的日志信息，用于问题排查和技术支持。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| input_count​ | Integer​ | 50​ | 输入内容所消耗的 Token 数，包含对话上下文、系统提示词、用户当前输入等所有输入类的 Token 消耗。​ |\n| output_count​ | Integer​ | 100​ | 大模型输出的内容所消耗的 Token 数。​ |\n| token_count​ | Integer​ | 150​ | 本次 API 调用消耗的 Token 总量，包括输入和输出两部分的消耗。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | String​ | {\\\"content_type\\\":\\\"text\\\",\\\"content\\\":\\\"[{\\\\\\\"type\\\\\\\":\\\\\\\"string\\\\\\\",\\\\\\\"name\\\\\\\":\\\\\\\"img\\\\\\\",\\\\\\\"required\\\\\\\":true,\\\\\\\"assistType\\\\\\\":2}]\\\"}​ | 中断控制内容，用于在工作流中断时传递控制信息。当工作流需要用户输入或执行特定操作时，通过此字段传递相关信息。​ |\n| type​ | Integer​ | 2​ | 工作流中断类型，调用恢复运行工作流API 恢复运行时应回传此字段。​枚举值：​6：端插件触发中断。​2：问答节点触发中断。​5：输入节点触发中断。​7：OAuth 插件触发中断。​ |\n| event_id​ | String​ | 740483198820252***​ | 工作流中断事件 ID，调用恢复运行工作流API 恢复运行时应回传此字段。​ |\n| required_parameters​ | JSON Map​ | { \"img\": { \"required\": true, \"type\": \"image\" } }​ | 工作流中断时需要补充的参数信息，采用键值对（key-value）结构，其中 key 为输入节点对应的参数名称，value 为该参数的定义信息（包含类型、是否必填等属性）。​ |\n\n- 6 ：端插件触发中断。 ​\n\n- 2 ：问答节点触发中断。 ​\n\n- 5 ：输入节点触发中断。 ​\n\n- 7 ：OAuth 插件触发中断。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| type​ | String​ | string​ | 该参数的类型。​ |\n| items​ | Object ofOpenAPIParameter​ | {\"type\":\"image\"}​ | 当参数类型为array时，该字段用于定义数组元素的子类型。​ |\n| required​ | Boolean​ | true​ | 标识输入参数是否为必填项。​true：该参数为必填项。​false：该参数为可选项。​ |\n| properties​ | JSON Map​ | { \"arr_obj_num\": { \"required\": false, \"type\": \"number\" } }​ | 当参数类型为object时，该字段用于定义对象类型的子参数信息，采用键值对（key-value）结构，其中 key 为子参数的名称，value 为该子参数的定义信息（包含类型、是否必填等属性）。​ |\n| description​ | String​ | 上传的图片。​ | 该参数的描述信息。​ |\n| default_value​ | String​ | -​ | 该参数配置的默认值。​ |\n\n- true ：该参数为必填项。 ​\n\n- false ：该参数为可选项。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/workflow_history",
      "title": "查询工作流异步运行结果",
      "content": {
        "sections": [],
        "full_text": "查询工作流异步运行结果\n\n工作流异步运行后，查看执行结果。\n\n​\n\n接口说明\n\n​\n\n调用\n\n执行工作流\n\n或\n\n恢复运行工作流\n\nAPI 时，如果选择异步运行工作流，响应信息中会返回 execute_id，开发者可以通过本 API 查询指定事件的执行结果。\n\n​\n\n限制说明\n\n​\n\n本 API 的流控限制请参见\n\nAPI 介绍\n\n。\n\n​\n\n工作流的\n\n输出节点\n\n的输出数据最多保存 24 小时，\n\n结束节点\n\n为 7 天。\n\n​\n\n输出节点的输出内容超过 1MB 时，无法保证返回内容的完整性。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/workflows/:workflow_id/run_histories/:execute_id\n\n​\n\n权限\n\n​\n\nlistRunHistory\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nlistRunHistory\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n工作流异步运行后，查看执行结果。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nworkflow_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n73505836754923***\n\n​\n\n待执行的 Workflow ID，此工作流应已发布。\n\n​\n\n进入 Workflow 编排页面，在页面 URL 中，workflow 参数后的数字就是 Workflow ID。例如\n\nhttps://www.coze.com/work_flow?space_id=42463***&workflow_id=73505836754923***\n\n，Workflow ID 为\n\n73505836754923***\n\n。\n\n​\n\nexecute_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n743104097880585****\n\n​\n\n工作流执行 ID。调用接口\n\n执行工作流\n\n，如果选择异步执行工作流，响应信息中会返回 execute_id。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndata\n\n​\n\nArray of\n\nWorkflowExecuteHistory\n\n​\n\n\\\n\n​\n\n异步工作流的执行结果。\n\n​\n\n每次只能查询一个异步事件的执行结果，所以此数组只有一个对象。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n本次请求的执行详情。\n\n​\n\n​\n\nWorkflowExecuteHistory\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nexecute_id\n\n​\n\nString\n\n​\n\n743104097880585****\n\n​\n\n工作流执行 ID。\n\n​\n\nexecute_status\n\n​\n\nString\n\n​\n\nSuccess\n\n​\n\n执行状态。\n\n​\n\nSuccess：执行成功。\n\n​\n\nRunning：执行中。\n\n​\n\nFail：执行失败。\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n75049216555930****\n\n​\n\n执行工作流时指定的 Agent ID。返回 0 表示未指定智能体 ID。\n\n​\n\nconnector_id\n\n​\n\nString\n\n​\n\n1024\n\n​\n\n智能体的发布渠道 ID，默认仅显示 Agent as API 渠道，渠道 ID 为 1024。\n\n​\n\nconnector_uid\n\n​\n\nString\n\n​\n\n123\n\n​\n\n用户 UID，执行工作流时通过 ext 字段指定的 user_id。如果未指定，则返回 Token 申请人的扣子用户 UID。\n\n​\n\nrun_mode\n\n​\n\nInteger\n\n​\n\n0\n\n​\n\n工作流的运行方式：\n\n​\n\n0：同步运行。\n\n​\n\n1：流式运行。\n\n​\n\n2：异步运行。\n\n​\n\noutput\n\n​\n\nString\n\n​\n\n{\\\"Output\\\":\\\"{\\\\\\\"content_type\\\\\\\":1,\\\\\\\"data\\\\\\\":\\\\\\\"来找姐姐有什么事呀\\\\\\\",\\\\\\\"original_result\\\\\\\":null,\\\\\\\"type_for_model\\\\\\\":2}\\\"}\n\n​\n\n工作流的输出，通常为 JSON 序列化字符串，也有可能是非 JSON 结构的字符串。\n\n​\n\n工作流输出的内容包括：\n\n​\n\n输出节点的输出。\n\n​\n\n结束节点的输出。在扣子编程代码中，结束节点的输出是通过键（key）\n\nOutput\n\n来标识。\n\n​\n\n工作流输出的结构如下所示：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"Output\"\n\n:\n\n\"结束节点的输出内容\"\n\n,\n\n​\n\n\"输出节点_1\"\n\n:\n\n\"输出节点_1的输出内容\"\n\n,\n\n​\n\n\"输出节点_2\"\n\n:\n\n\"输出节点_2的输出内容\"\n\n​\n\n}\n\n​\n\n​\n\ncreate_time\n\n​\n\nLong\n\n​\n\n1730174063\n\n​\n\n工作流运行开始时间，Unixtime 时间戳格式，单位为秒。\n\n​\n\nupdate_time\n\n​\n\nLong\n\n​\n\n1730174063\n\n​\n\n工作流的恢复运行时间，Unixtime 时间戳格式，单位为秒。\n\n​\n\nnode_execute_status\n\n​\n\nJSON Map\n\n​\n\n\\\n\n​\n\n输出节点的运行情况。字段的格式为：\n\nkey:node_status,value:map[node_title]*nodeExecuteStatus{}\n\n。\n\n​\n\nkey\n\n为节点的名称，如果节点运行了多次，则会随机生成节点名称。\n\n​\n\n说明\n\n当输出节点的输出内容超过 1MB 时，调用本 API 会导致返回内容不完整，建议通过\n\n查询工作流节点的输出\n\nAPI 逐一查询各节点的输出内容。\n\n​\n\n​\n\nerror_code\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n执行失败调用状态码。0 表示调用成功。其他值表示调用失败。你可以通过 error_message 字段判断详细的错误原因。\n\n​\n\ndebug_url\n\n​\n\nString\n\n​\n\nhttps://www.coze.cn/work_flow?execute_id=743104097880585****&space_id=730976060439760****&workflow_id=742963539464539****\n\n​\n\n工作流试运行调试页面。访问此页面可查看每个工作流节点的运行结果、输入输出等信息。\n\n​\n\n说明\n\ndebug_url 的访问有效期为 7 天，过期后将无法访问。\n\n​\n\n​\n\nusage\n\n​\n\nObject of\n\nUsage\n\n​\n\n{\"input_count\":50,\"token_count\":150,\"output_count\":100}\n\n​\n\n本次 API 调用消耗的 Token 数量。\n\n​\n\n此处大模型返回的消耗 Token 仅供参考，以\n\n火山引擎账单\n\n实际为准。\n\n​\n\nis_output_trimmed\n\n​\n\nBoolean\n\n​\n\nfalse\n\n​\n\n标识工作流的输出内容是否因过大而不完整。\n\n​\n\ntrue\n\n：输出内容因过大被截断。\n\n​\n\nfalse\n\n：输出内容完整。\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\nerror_message\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\ninterrupt_data\n\n​\n\nObject of\n\nInterrupt\n\n​\n\n{\"data\":\"{\\\"content_type\\\":\\\"text\\\",\\\"content\\\":\\\"请输入您的姓名\\\"}\",\"type\":2,\"event_id\":\"740483198820252***\",\"required_parameters\":{\"name\":{\"type\":\"string\",\"required\":true}}}\n\n​\n\n中断事件的详细信息，包含中断控制内容、中断类型和事件 ID 等信息。\n\n​\n\n​\n\nNodeExecuteStatus\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nnode_id\n\n​\n\nString\n\n​\n\nnode_123\n\n​\n\n工作流中的节点 ID。\n\n​\n\nis_finish\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n工作流中的节点是否已经运行结束。\n\n​\n\nloop_index\n\n​\n\nLong\n\n​\n\n2\n\n​\n\n当前节点在循环节点中的循环次数。\n\n​\n\n第一次循环时值为\n\n0\n\n。\n\n​\n\n说明\n\n仅当节点为循环节点，且未嵌套子工作流时，才会返回该参数。\n\n​\n\n​\n\nbatch_index\n\n​\n\nLong\n\n​\n\n3\n\n​\n\n当前节点在批处理节点中的执行次数。\n\n​\n\n第一次执行时值为\n\n0\n\n。\n\n​\n\n说明\n\n仅当节点为批处理节点，且未嵌套子工作流时，才会返回该参数。\n\n​\n\n​\n\nupdate_time\n\n​\n\nLong\n\n​\n\n1730174063\n\n​\n\n工作流上次运行的时间，采用 Unix 时间戳格式，单位为秒。\n\n​\n\nsub_execute_id\n\n​\n\nString\n\n​\n\n743104097880585****\n\n​\n\n子工作流执行的 ID。\n\n​\n\nnode_execute_uuid\n\n​\n\nString\n\n​\n\n78923456777*****\n\n​\n\n节点每次执行的 ID，用于追踪和识别工作流中特定节点的单次执行情况。\n\n​\n\n​\n\nUsage\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ninput_count\n\n​\n\nInteger\n\n​\n\n50\n\n​\n\n输入内容所消耗的 Token 数，包含对话上下文、系统提示词、用户当前输入等所有输入类的 Token 消耗。\n\n​\n\noutput_count\n\n​\n\nInteger\n\n​\n\n100\n\n​\n\n大模型输出的内容所消耗的 Token 数。\n\n​\n\ntoken_count\n\n​\n\nInteger\n\n​\n\n150\n\n​\n\n本次 API 调用消耗的 Token 总量，包括输入和输出两部分的消耗。\n\n​\n\n​\n\nInterrupt\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nString\n\n​\n\n{\\\"content_type\\\":\\\"text\\\",\\\"content\\\":\\\"[{\\\\\\\"type\\\\\\\":\\\\\\\"string\\\\\\\",\\\\\\\"name\\\\\\\":\\\\\\\"img\\\\\\\",\\\\\\\"required\\\\\\\":true,\\\\\\\"assistType\\\\\\\":2}]\\\"}\n\n​\n\n中断控制内容，用于在工作流中断时传递控制信息。当工作流需要用户输入或执行特定操作时，通过此字段传递相关信息。\n\n​\n\ntype\n\n​\n\nInteger\n\n​\n\n2\n\n​\n\n工作流中断类型，调用\n\n恢复运行工作流\n\nAPI 恢复运行时应回传此字段。\n\n​\n\n枚举值：\n\n​\n\n6\n\n：端插件触发中断。\n\n​\n\n2\n\n：问答节点触发中断。\n\n​\n\n5\n\n：输入节点触发中断。\n\n​\n\n7\n\n：OAuth 插件触发中断。\n\n​\n\nevent_id\n\n​\n\nString\n\n​\n\n740483198820252***\n\n​\n\n工作流中断事件 ID，调用\n\n恢复运行工作流\n\nAPI 恢复运行时应回传此字段。\n\n​\n\nrequired_parameters\n\n​\n\nJSON Map\n\n​\n\n{ \"img\": { \"required\": true, \"type\": \"image\" } }\n\n​\n\n工作流中断时需要补充的参数信息，采用键值对（key-value）结构，其中 key 为输入节点对应的参数名称，value 为该参数的定义信息（包含类型、是否必填等属性）。\n\n​\n\n​\n\nRequiredParameters\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ntype\n\n​\n\nString\n\n​\n\nstring\n\n​\n\n该参数的类型。\n\n​\n\nitems\n\n​\n\nObject of\n\nOpenAPIParameter\n\n​\n\n{\"type\":\"image\"}\n\n​\n\n当参数类型为\n\narray\n\n时，该字段用于定义数组元素的子类型。\n\n​\n\nrequired\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n标识输入参数是否为必填项。\n\n​\n\ntrue\n\n：该参数为必填项。\n\n​\n\nfalse\n\n：该参数为可选项。\n\n​\n\nproperties\n\n​\n\nJSON Map\n\n​\n\n{ \"arr_obj_num\": { \"required\": false, \"type\": \"number\" } }\n\n​\n\n当参数类型为\n\nobject\n\n时，该字段用于定义对象类型的子参数信息，采用键值对（key-value）结构，其中 key 为子参数的名称，value 为该子参数的定义信息（包含类型、是否必填等属性）。\n\n​\n\ndescription\n\n​\n\nString\n\n​\n\n上传的图片。\n\n​\n\n该参数的描述信息。\n\n​\n\ndefault_value\n\n​\n\nString\n\n​\n\n-\n\n​\n\n该参数配置的默认值。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request GET 'https\n\n:\n\n//api.coze.cn/v1/workflows/742963539464539****/run_histories/743104097880585****' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_xitq9LWlowpX3qGCih1lwpAdzvXNqgmpfhpV28HLWFypY37xR5Uaj2GioN****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241029152003BC531DC784F1897B****\"\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"update_time\"\n\n:\n\n1730174065\n\n,\n\n​\n\n\"usage\"\n\n:\n\n{\n\n​\n\n\"input_count\"\n\n:\n\n50\n\n,\n\n​\n\n\"token_count\"\n\n:\n\n150\n\n,\n\n​\n\n\"output_count\"\n\n:\n\n100\n\n​\n\n},\n\n​\n\n\"output\"\n\n:\n\n\"{\\\"Output\\\":\\\"{\\\\\\\"content_type\\\\\\\":1,\\\\\\\"data\\\\\\\":\\\\\\\"来找姐姐有什么事呀\\\\\\\",\\\\\\\"original_result\\\\\\\":null,\\\\\\\"type_for_model\\\\\\\":2}\\\"}\"\n\n,\n\n​\n\n\"bot_id\"\n\n:\n\n\"742963486232569****\"\n\n,\n\n​\n\n\"token\"\n\n:\n\n\"0\"\n\n,\n\n​\n\n\"execute_status\"\n\n:\n\n\"Success\"\n\n,\n\n​\n\n\"connector_uid\"\n\n:\n\n\"223687073464****\"\n\n,\n\n​\n\n\"run_mode\"\n\n:\n\n0\n\n,\n\n​\n\n\"connector_id\"\n\n:\n\n\"1024\"\n\n,\n\n​\n\n\"logid\"\n\n:\n\n\"20241029115423ED85C3401395715F726E\"\n\n,\n\n​\n\n\"debug_url\"\n\n:\n\n\"https://www.coze.cn/work_flow?execute_id=743104097880585****&space_id=730976060439760****&workflow_id=742963539464539****\"\n\n,\n\n​\n\n\"error_code\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"error_message\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"execute_id\"\n\n:\n\n\"743104097880585****\"\n\n,\n\n​\n\n\"create_time\"\n\n:\n\n1730174063\n\n​\n\n}\n\n​\n\n]\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n恢复运行工作流\n\n下一篇\n\n执行对话流",
        "links": []
      },
      "markdown": "- 本 API 的流控限制请参见 API 介绍 。 ​\n\n- 工作流的 输出节点 的输出数据最多保存 24 小时， 结束节点 为 7 天。 ​\n\n- 输出节点的输出内容超过 1MB 时，无法保证返回内容的完整性。 ​\n\n| 请求方式​ | GET |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/workflows/:workflow_id/run_histories/:execute_id​ |\n| 权限​ | listRunHistory​确保调用该接口使用的访问令牌开通了listRunHistory权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 工作流异步运行后，查看执行结果。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| workflow_id​ | String​ | 可选​ | 73505836754923***​ | 待执行的 Workflow ID，此工作流应已发布。​进入 Workflow 编排页面，在页面 URL 中，workflow 参数后的数字就是 Workflow ID。例如https://www.coze.com/work_flow?space_id=42463***&workflow_id=73505836754923***，Workflow ID 为73505836754923***。​ |\n| execute_id​ | String​ | 可选​ | 743104097880585****​ | 工作流执行 ID。调用接口执行工作流，如果选择异步执行工作流，响应信息中会返回 execute_id。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| data​ | Array ofWorkflowExecuteHistory​ | \\​ | 异步工作流的执行结果。​每次只能查询一个异步事件的执行结果，所以此数组只有一个对象。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 本次请求的执行详情。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| execute_id​ | String​ | 743104097880585****​ | 工作流执行 ID。​ |\n| execute_status​ | String​ | Success​ | 执行状态。​Success：执行成功。​Running：执行中。​Fail：执行失败。​ |\n| bot_id​ | String​ | 75049216555930****​ | 执行工作流时指定的 Agent ID。返回 0 表示未指定智能体 ID。​ |\n| connector_id​ | String​ | 1024​ | 智能体的发布渠道 ID，默认仅显示 Agent as API 渠道，渠道 ID 为 1024。​ |\n| connector_uid​ | String​ | 123​ | 用户 UID，执行工作流时通过 ext 字段指定的 user_id。如果未指定，则返回 Token 申请人的扣子用户 UID。​ |\n| run_mode​ | Integer​ | 0​ | 工作流的运行方式：​0：同步运行。​1：流式运行。​2：异步运行。​ |\n| output​ | String​ | {\\\"Output\\\":\\\"{\\\\\\\"content_type\\\\\\\":1,\\\\\\\"data\\\\\\\":\\\\\\\"来找姐姐有什么事呀\\\\\\\",\\\\\\\"original_result\\\\\\\":null,\\\\\\\"type_for_model\\\\\\\":2}\\\"}​ | 工作流的输出，通常为 JSON 序列化字符串，也有可能是非 JSON 结构的字符串。​工作流输出的内容包括：​输出节点的输出。​结束节点的输出。在扣子编程代码中，结束节点的输出是通过键（key）Output来标识。​工作流输出的结构如下所示：​​JSON复制{​\"Output\":\"结束节点的输出内容\",​\"输出节点_1\":\"输出节点_1的输出内容\",​\"输出节点_2\":\"输出节点_2的输出内容\"​}​​ |\n| create_time​ | Long​ | 1730174063​ | 工作流运行开始时间，Unixtime 时间戳格式，单位为秒。​ |\n| update_time​ | Long​ | 1730174063​ | 工作流的恢复运行时间，Unixtime 时间戳格式，单位为秒。​ |\n| node_execute_status​ | JSON Map​ | \\​ | 输出节点的运行情况。字段的格式为：key:node_status,value:map[node_title]*nodeExecuteStatus{}。​key为节点的名称，如果节点运行了多次，则会随机生成节点名称。​说明当输出节点的输出内容超过 1MB 时，调用本 API 会导致返回内容不完整，建议通过查询工作流节点的输出API 逐一查询各节点的输出内容。​​ |\n| error_code​ | String​ | \"\"​ | 执行失败调用状态码。0 表示调用成功。其他值表示调用失败。你可以通过 error_message 字段判断详细的错误原因。​ |\n| debug_url​ | String​ | https://www.coze.cn/work_flow?execute_id=743104097880585****&space_id=730976060439760****&workflow_id=742963539464539****​ | 工作流试运行调试页面。访问此页面可查看每个工作流节点的运行结果、输入输出等信息。​说明debug_url 的访问有效期为 7 天，过期后将无法访问。​​ |\n| usage​ | Object ofUsage​ | {\"input_count\":50,\"token_count\":150,\"output_count\":100}​ | 本次 API 调用消耗的 Token 数量。​此处大模型返回的消耗 Token 仅供参考，以火山引擎账单实际为准。​ |\n| is_output_trimmed​ | Boolean​ | false​ | 标识工作流的输出内容是否因过大而不完整。​true：输出内容因过大被截断。​false：输出内容完整。​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |\n| error_message​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​ |\n| interrupt_data​ | Object ofInterrupt​ | {\"data\":\"{\\\"content_type\\\":\\\"text\\\",\\\"content\\\":\\\"请输入您的姓名\\\"}\",\"type\":2,\"event_id\":\"740483198820252***\",\"required_parameters\":{\"name\":{\"type\":\"string\",\"required\":true}}}​ | 中断事件的详细信息，包含中断控制内容、中断类型和事件 ID 等信息。​ |\n\n- Success：执行成功。 ​\n\n- Running：执行中。 ​\n\n- Fail：执行失败。 ​\n\n- 0：同步运行。 ​\n\n- 1：流式运行。 ​\n\n- 2：异步运行。 ​\n\n- 输出节点的输出。 ​\n\n- 结束节点的输出。在扣子编程代码中，结束节点的输出是通过键（key） Output 来标识。 ​\n\n- true ：输出内容因过大被截断。 ​\n\n- false ：输出内容完整。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| node_id​ | String​ | node_123​ | 工作流中的节点 ID。​ |\n| is_finish​ | Boolean​ | true​ | 工作流中的节点是否已经运行结束。​ |\n| loop_index​ | Long​ | 2​ | 当前节点在循环节点中的循环次数。​第一次循环时值为0。​说明仅当节点为循环节点，且未嵌套子工作流时，才会返回该参数。​​ |\n| batch_index​ | Long​ | 3​ | 当前节点在批处理节点中的执行次数。​第一次执行时值为0。​说明仅当节点为批处理节点，且未嵌套子工作流时，才会返回该参数。​​ |\n| update_time​ | Long​ | 1730174063​ | 工作流上次运行的时间，采用 Unix 时间戳格式，单位为秒。​ |\n| sub_execute_id​ | String​ | 743104097880585****​ | 子工作流执行的 ID。​ |\n| node_execute_uuid​ | String​ | 78923456777*****​ | 节点每次执行的 ID，用于追踪和识别工作流中特定节点的单次执行情况。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| input_count​ | Integer​ | 50​ | 输入内容所消耗的 Token 数，包含对话上下文、系统提示词、用户当前输入等所有输入类的 Token 消耗。​ |\n| output_count​ | Integer​ | 100​ | 大模型输出的内容所消耗的 Token 数。​ |\n| token_count​ | Integer​ | 150​ | 本次 API 调用消耗的 Token 总量，包括输入和输出两部分的消耗。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | String​ | {\\\"content_type\\\":\\\"text\\\",\\\"content\\\":\\\"[{\\\\\\\"type\\\\\\\":\\\\\\\"string\\\\\\\",\\\\\\\"name\\\\\\\":\\\\\\\"img\\\\\\\",\\\\\\\"required\\\\\\\":true,\\\\\\\"assistType\\\\\\\":2}]\\\"}​ | 中断控制内容，用于在工作流中断时传递控制信息。当工作流需要用户输入或执行特定操作时，通过此字段传递相关信息。​ |\n| type​ | Integer​ | 2​ | 工作流中断类型，调用恢复运行工作流API 恢复运行时应回传此字段。​枚举值：​6：端插件触发中断。​2：问答节点触发中断。​5：输入节点触发中断。​7：OAuth 插件触发中断。​ |\n| event_id​ | String​ | 740483198820252***​ | 工作流中断事件 ID，调用恢复运行工作流API 恢复运行时应回传此字段。​ |\n| required_parameters​ | JSON Map​ | { \"img\": { \"required\": true, \"type\": \"image\" } }​ | 工作流中断时需要补充的参数信息，采用键值对（key-value）结构，其中 key 为输入节点对应的参数名称，value 为该参数的定义信息（包含类型、是否必填等属性）。​ |\n\n- 6 ：端插件触发中断。 ​\n\n- 2 ：问答节点触发中断。 ​\n\n- 5 ：输入节点触发中断。 ​\n\n- 7 ：OAuth 插件触发中断。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| type​ | String​ | string​ | 该参数的类型。​ |\n| items​ | Object ofOpenAPIParameter​ | {\"type\":\"image\"}​ | 当参数类型为array时，该字段用于定义数组元素的子类型。​ |\n| required​ | Boolean​ | true​ | 标识输入参数是否为必填项。​true：该参数为必填项。​false：该参数为可选项。​ |\n| properties​ | JSON Map​ | { \"arr_obj_num\": { \"required\": false, \"type\": \"number\" } }​ | 当参数类型为object时，该字段用于定义对象类型的子参数信息，采用键值对（key-value）结构，其中 key 为子参数的名称，value 为该子参数的定义信息（包含类型、是否必填等属性）。​ |\n| description​ | String​ | 上传的图片。​ | 该参数的描述信息。​ |\n| default_value​ | String​ | -​ | 该参数配置的默认值。​ |\n\n- true ：该参数为必填项。 ​\n\n- false ：该参数为可选项。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/workflow_chat",
      "title": "执行对话流",
      "content": {
        "sections": [],
        "full_text": "执行对话流\n\n执行已发布的对话流。\n\n​\n\n接口说明\n\n​\n\n对话流是基于对话场景的特殊工作流，专门\n\n用于处理对话类请求。对话流通过对话的方式和用户交互，并完成复杂的业务逻辑。\n\n在应用中添加对话流，将对话中的用户指令拆分为一个个步骤节点，并为其设计用户界面，你可以搭建出适用于移动端或网页端的对话式 AI 应用，\n\n实现自动化、智能化的对话流程。\n\n关于对话流的详细说明可参考\n\n​\n\n工作流与对话流\n\n。\n\n​\n\n此接口为流式响应模式，允许客户端在接收到完整的数据流之前就开始处理数据，例如在对话界面实时展示回复内容，减少客户端等待模型完整回复的时间。\n\n​\n\n此接口支持包括问答节点、输入节点等可能导致对话中断的节点，对话中断时只需再次调用对话流，在 additional_messages 中指定输入内容，即可继续对话。\n\n​\n\n说明\n\n如果对话流的输入中包含文件、图片等多模态内容，需要先上传多模态内容以获取文件 ID 或 URL 地址，再将其作为对话流的输入。上传方式包括：\n\n​\n\n调用\n\n上传文件\n\nAPI，获取文件 ID，将此 ID 作为对话流的输入。\n\n​\n\n上传到第三方存储工具中，并获取一个公开可访问的 URL 地址，将此 URL 作为对话流的输入。\n\n​\n\n调用接口后，你可以从响应的 Done 事件中获得 debug_url，访问链接即可通过可视化界面查看对话流的试运行过程，其中包含每个执行节点的输入输出等详细信息，帮助你在线调试或排障。debug_url 的访问有效期为 7 天，过期后将无法访问。\n\n​\n\n​\n\n此接口可用于调用空间资源库中的对话流，或低代码应用中的对话流。调用这两种对话流时，入参不同：\n\n​\n\n​\n\n入参\n\n​\n\n资源库对话流\n\n​\n\n​\n\n低代码应用中的对话流\n\n​\n\n​\n\n在智能体中执行\n\n​\n\n在低代码应用中执行\n\n​\n\n​\n\nworkflow_id\n\n​\n\n必选\n\n​\n\n必选\n\n​\n\n必选\n\n​\n\napp_id\n\n​\n\n不传\n\n​\n\n必选\n\n​\n\n必选\n\n​\n\nbot_id\n\n​\n\n必选\n\n​\n\n不传\n\n​\n\n不传\n\n​\n\nconversation_id\n\n​\n\n可选\n\n​\n\n可选\n\n​\n\n可选\n\n​\n\n​\n\n限制说明\n\n​\n\n通过 API 方式执行对话流前，应确认此对话流已发布，执行从未发布过的对话流时会返回错误码 4200。如果是低代码应用中的对话流，应先发布低代码应用为 API 服务；如果是空间资源库中的对话流，应先在资源库中发布对话流。\n\n​\n\n此接口暂不支持异步运行。\n\n​\n\n对话流中不支持提交端插件结果。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://\n\napi.coze.cn\n\n/v1/workflows/chat\n\n​\n\n​\n\n权限\n\n​\n\nrun\n\n​\n\n确保调用该接口使用的令牌开通了\n\nrun\n\n权限，详细信息参考\n\n​\n\n鉴权方式概述\n\n。\n\n​\n\n接口说明\n\n​\n\n执行已发布的对话流。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n​\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nworkflow_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n73505836754923***\n\n​\n\n待执行的对话流 ID，此对话流应已发布。\n\n​\n\n进入对话流编排页面，在页面 URL 中，\n\nworkflow\n\n参数后的数字就是 Workflow ID。例如\n\nhttps://\n\nwww.coze.cn\n\n/work_flow?space_id=42463***&workflow_id=73505836754923***\n\n，Workflow ID 为\n\n73505836754923***\n\n。\n\n​\n\nadditional_messages\n\n​\n\n​\n\n​\n\nArray of additional_messages object\n\n​\n\n​\n\n必选\n\n​\n\n​\n\n[ { \"role\": \"user\", \"content_type\": \"text\", \"content\": \"你好\" } ]\n\n​\n\n对话中用户问题和历史消息。数组长度限制为 50，即最多传入 50 条消息。\n\n​\n\n你需要通过此字段传入本次对话中用户的问题，也就是对话流的输入参数 USER_INPUT 的值。\n\n​\n\n可以同时传入多条历史消息，也就是本次对话的上下文。多条消息应按对话顺序排列，最后一条消息应为 role=user 的记录，也就是本次对话中用户的问题；其他消息为历史消息。\n\n​\n\n说明\n\n对话流执行到问答节点、输入节点等节点时可能导致对话中断，此时只需再次调用对话流，在 additional_messages 中指定输入内容即可继续对话。\n\n​\n\n​\n\nparameters\n\n​\n\nmap[String]any\n\n​\n\n必选\n\n​\n\n{\"image\": \"{\\\"file_id\\\":\\\"1122334455\\\"}\",\"user_name\":\"George\"}\n\n​\n\n设置对话流输入参数中的自定义参数。以 JSON 序列化字符串形式传入。你可以在指定对话流的编排页面查看自定义输入参数列表。\n\n​\n\n设置文件类型的自定义参数\n\n​\n\n如果对话流输入参数为 Image 等类型的文件，你可以传入文件 URL 或调用\n\n上传文件\n\nAPI 获取 file_id 后传入 file_id。示例：\n\n​\n\n上传文件并传入 file_id：\n\n​\n\n单个文件示例：\n\n\"parameters\": { \"image\": \"{\\\"file_id\\\":\\\"1122334455\\\"}\" }\n\n​\n\n文件数组示例：\n\n\"parameters\": { \"image\": [ \"{\\\"file_id\\\":\\\"1122334455\\\"}\" ] }\n\n。\n\n​\n\n传入文件 URL：\n\n“parameters” :{\"input\":\"请总结图片内容\", \"image\": \"\n\nhttps://example.com/tos-cn-i-mdko3gqilj/example.png\n\n\" }\n\n​\n\n会话名称绑定\n\n​\n\n你可以通过输入参数中的\n\nCONVERSATION_NAME\n\n绑定对应的会话名称，对话流产生的消息将保存到该会话中。推荐使用\n\nconversation_id\n\n绑定会话。\n\n​\n\n生效范围\n\n：此设置仅对低代码应用中的对话流生效。对于资源库对话流，你需要同时传入\n\napp_id\n\n以关联一个低代码应用，该设置才会生效。\n\n​\n\n获取方法\n\n：你可以在应用编排页面的会话管理中查看会话名称，或通过工作流中的\n\n查询会话列表\n\n节点查询会话名称。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n说明\n\n对话流的输入参数  USER_INPUT 应在 additional_messages 中传入，在 parameters 中的 USER_INPUT 不生效。\n\n​\n\n如果 parameters 中未指定 CONVERSATION_NAME 或自定义输入参数，则使用参数默认值运行对话流；如果指定了这些参数，则使用指定值。\n\n​\n\n​\n\napp_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n744208683**\n\n​\n\n需要关联的低代码应用 ID。调用对话流时，必须指定 app_id 或 bot_id，便于模型调用智能体或应用的数据库、变量等数据处理问题。\n\n​\n\n进入应用开发界面，开发页面URL中的project-ide参数后的数字就是AppID，例如\n\nhttps://\n\nwww.coze.cn\n\n/space/74421656*****/project-ide/744208683**\n\n，低代码应用 ID 为\n\n744208683**\n\n。\n\n​\n\n说明\n\n运行低代码应用中的对话流时，app_id 必选。详细说明可参考\n\n​\n\n接口说明\n\n。\n\n​\n\n​\n\nbot_id\n\n​\n\n​\n\nString\n\n​\n\n​\n\n可选\n\n​\n\n​\n\n75049216555930****\n\n​\n\n需要关联的智能体 ID。 调用对话流时，必须指定 app_id 或 bot_id，便于模型调用智能体或应用的数据库、变量等数据处理问题。\n\n​\n\n进入智能体开发页面，开发页面 URL 中\n\nbot\n\n参数后的数字就是智能体 ID。例如\n\nhttps://\n\nwww.coze.cn\n\n/space/73428668341****/bot/73428668*****\n\n，bot ID 为\n\n73428668*****\n\n。\n\n​\n\n说明\n\n运行资源库中的对话流时，根据对话流执行的位置（智能体或低代码应用）选择设置 bot_id 还是 app_id。详细说明可参考\n\n​\n\n接口说明\n\n。\n\n​\n\n​\n\nconversation_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n748348012449138****\n\n​\n\n对话流对应的会话 ID，对话流产生的消息会保存到此会话中。会话默认为开始节点设置的 CONVERSATION_NAME，也可以通过 conversation_id 参数指定会话。\n\n​\n\n说明\n\n指定 conversation_id 时，parameters 中设置的 CONVERSATION_NAME 不生效。\n\n​\n\n会话的创建者必须和执行对话流的用户一致，即 API 访问令牌的创建者一致，否则无法执行对话流。\n\n​\n\n会话与 app_id、渠道匹配，不同渠道的会话隔离。\n\n​\n\n指定 bot_id 时，如果没有传入 conversation_id ，扣子编程会创建一个新的 conversation_id。不支持同时指定 bot_id 和 app_id。详细说明可参考\n\n​\n\n接口说明\n\n。\n\n​\n\n​\n\next\n\n​\n\nMap[String][String]\n\n​\n\n​\n\n可选\n\n​\n\n{\"latitude\":\"39.9042\",\"longitude\":\"116.4074\",\"user_id\":\"123456789\"}\n\n​\n\n用于指定一些额外的字段，以 Map[String][String] 格式传入。例如某些插件会隐式用到的经纬度等字段。\n\n​\n\n目前仅支持以下字段：\n\n​\n\nlatitude：String 类型，表示纬度。\n\n​\n\nlongitude：String 类型，表示经度。\n\n​\n\nuser_id：String 类型，表示用户 ID。\n\n​\n\nworkflow_version\n\n​\n\n​\n\n​\n\nString\n\n​\n\n​\n\n可选\n\n​\n\n​\n\nv0.0.5\n\n​\n\n对话流的版本号，仅当运行的对话流属于资源库对话流时有效。未指定版本号时默认执行最新版本的对话流。\n\n​\n\n​\n\nconnector_id\n\n​\n\nString\n\n​\n\n​\n\n可选\n\n​\n\n​\n\n1024\n\n​\n\n​\n\n渠道 ID，用于配置该对话流在什么渠道执行。\n\n​\n\n当智能体或低代码应用发布到某个渠道后，可以通过该参数指定对话流在对应的渠道执行。\n\n​\n\n扣子编程的渠道 ID 包括：\n\n​\n\n1024（默认值）：API 渠道。\n\n​\n\n999：Chat SDK。\n\n​\n\n998：WebSDK。\n\n​\n\n10000122：扣子商店。\n\n​\n\n10000113：微信客服。\n\n​\n\n10000120：微信服务号。\n\n​\n\n10000121：微信订阅号。\n\n​\n\n10000126：抖音小程序。\n\n​\n\n10000127：微信小程序。\n\n​\n\n10000011：飞书。\n\n​\n\n10000128：飞书多维表格。\n\n​\n\n10000117：掘金。\n\n​\n\n自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在\n\n账号设置\n\n>\n\n发布渠道\n\n>\n\n企业自定义渠道管理\n\n页面查看渠道 ID。\n\n​\n\n说明\n\n不同渠道的用户数据、会话记录等相互隔离，进行数据分析统计时，不支持跨渠道数据调用。\n\n​\n\n​\n\nadditional_messages object\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nrole\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nuser\n\n​\n\n发送这条消息的实体。取值：\n\n​\n\nuser\n\n：代表该条消息内容是用户发送的。\n\n​\n\nassistant\n\n：代表该条消息内容是模型发送的。\n\n​\n\ntype\n\n​\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n​\n\nquestion\n\n​\n\n消息类型。默认为\n\nquestion。\n\n​\n\nquestion\n\n：用户输入内容。\n\n​\n\nanswer\n\n：模型返回给用户的消息内容，支持增量返回。如果对话流绑定了输出节点，可能会存在多 answer 场景，此时可以用流式返回的结束标志来判断所有 answer 完成。\n\n​\n\nfunction_call\n\n：智能体对话过程中调用函数（function call）的中间结果。\n\n​\n\ntool_response\n\n：调用工具 （function call）后返回的结果。\n\n​\n\ncontent\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n北京今天的天气怎么样\n\n​\n\n消息的内容，仅支持纯文本。\n\n​\n\n如果需要通过\n\n输入节点\n\n输入消息，可通过如下两种格式：\n\n​\n\nJSON 格式的键值对，例如：\n\n{\"input\":\"北京今天的天气怎么样\"}\n\n。\n\n​\n\n用\n\n\\n\n\n分隔的键值对，例如：\n\n{key1:val1\\nkey2:val2\\nkey3:val3}\n\n。\n\n​\n\n说明\n\n暂不支持在\n\ncontent\n\n中输入多模态（文本、图片、文件混合输入）、卡片等类型的内容。\n\n​\n\n如果需要传入图片、文件等多模态内容，你可以在\n\nparameters\n\n中传入对应的自定义参数及其值。\n\n​\n\n​\n\ncontent_type\n\n​\n\nString\n\n​\n\n可选\n\n​\n\ntext\n\n​\n\n消息内容的类型。\n\n​\n\ncontent_type\n\n固定为 text，表示普通文本。\n\n​\n\n说明\n\n指定 content 时，应同时设置 content_type。\n\n​\n\n​\n\nmeta_data\n\n​\n\nMap\n\n​\n\n可选\n\n​\n\n{\"key1\":\"value1\", \"key2\":\"value2\"}\n\n​\n\n创建消息时的附加消息，获取消息时也会返回此附加消息。\n\n​\n\n自定义键值对，应指定为 Map 对象格式。长度为 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。\n\n​\n\n​\n\n返回参数\n\n​\n\n流式响应允许客户端在接收到完整的数据流之前就开始处理数据，例如在对话界面实时展示回复内容，减少客户端等待模型完整回复的时间。\n\n​\n\n流式响应的整体流程如下：\n\n​\n\n流式响应流程\n\n流式响应示例\n\n​\n\nPlain Text\n\n复制\n\n######### 整体概览 （chat, MESSAGE 两级）\n\n​\n\n# chat - 开始\n\n​\n\n# chat - 处理中\n\n​\n\n#   MESSAGE - 知识库召回\n\n​\n\n#   MESSAGE - function_call\n\n​\n\n#   MESSAGE - tool_output\n\n​\n\n#   MESSAGE - answer is normal text\n\n​\n\n#   MESSAGE - 多 answer 的情况下，会继续有 message.delta\n\n​\n\n# chat - 完成\n\n​\n\n# 流结束 event: done\n\n​\n\n#########\n\n​\n\n​\n\n​\n\n返回的事件消息体结构如下：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n说明\n\n​\n\nevent\n\n​\n\nString\n\n​\n\n当前流式返回的数据包事件。在流式响应中，服务端不会一次性发送所有数据，而是以数据流的形式逐条发送数据给客户端，数据流中包含对话过程中触发的各种事件（event），直至处理完毕或处理中断。处理结束后，服务端会通过 conversation.message.completed 事件返回拼接后完整的模型回复信息。各个事件的说明可参考下表。\n\n​\n\ndata\n\n​\n\nObject\n\n​\n\n消息内容。其中，chat 事件和 message 事件的格式不同。\n\n​\n\nchat 事件中，data 为\n\nChat\n\nObject\n\n。\n\n​\n\nmessage 事件中，data 为\n\nMessage\n\nObject\n\n。\n\n​\n\n​\n\n流式响应事件列表：\n\n​\n\n​\n\n事件（event）名称\n\n​\n\n说明\n\n​\n\nconversation.chat.created\n\n​\n\n创建对话的事件，表示对话开始。\n\n​\n\nconversation.chat.in_progress\n\n​\n\n服务端正在处理对话。\n\n​\n\nconversation.message.delta\n\n​\n\n增量消息，通常是 type=answer 时的增量消息。\n\n​\n\nconversation.message.completed\n\n​\n\nmessage 已回复完成。此时流式包中带有所有 message.delta 的拼接结果，且每个消息均为 completed 状态。\n\n​\n\nconversation.chat.completed\n\n​\n\n对话完成。\n\n​\n\nconversation.chat.failed\n\n​\n\n此事件用于标识对话失败。\n\n​\n\nconversation.chat.requires_action\n\n​\n\n对话中断，需要使用方上报工具的执行结果。通常是触发了问答节点或输入节点，需要再次调用此接口继续对话。\n\n​\n\nerror\n\n​\n\n流式响应过程中的错误事件。关于 code 和 msg 的详细说明，可参考\n\n​\n\n错误码\n\n。\n\n​\n\ndone\n\n​\n\n本次会话的流式返回正常结束。\n\n​\n\n​\n\nChat Object\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否可选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必填\n\n​\n\n对话 ID，即对话的唯一标识。\n\n​\n\nconversation_id\n\n​\n\nString\n\n​\n\n必填\n\n​\n\n会话 ID，即会话的唯一标识。\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n必填\n\n​\n\n要进行会话聊天的智能体 ID。\n\n​\n\ncreated_at\n\n​\n\nInteger\n\n​\n\n选填\n\n​\n\n对话创建的时间。格式为 10 位的 Unixtime 时间戳，单位为秒。\n\n​\n\ncompleted_at\n\n​\n\nInteger\n\n​\n\n选填\n\n​\n\n对话结束的时间。格式为 10 位的 Unixtime 时间戳，单位为秒。\n\n​\n\nfailed_at\n\n​\n\nInteger\n\n​\n\n选填\n\n​\n\n对话失败的时间。格式为 10 位的 Unixtime 时间戳，单位为秒。\n\n​\n\nmeta_data\n\n​\n\nMap<String,String>\n\n​\n\n选填\n\n​\n\n创建消息时的附加消息，用于传入使用方的自定义数据，获取消息时也会返回此附加消息。\n\n​\n\n自定义键值对，应指定为 Map 对象格式。长度为 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。\n\n​\n\nlast_error\n\n​\n\n​\n\nObject\n\n​\n\n选填\n\n​\n\n对话运行异常时，此字段中返回详细的错误信息，包括：\n\n​\n\nCode：错误码。Integer 类型。0 表示成功，其他值表示失败。\n\n​\n\nMsg：错误信息。String 类型。\n\n​\n\n说明\n\n对话正常运行时，此字段返回 null。\n\n​\n\nsuggestion 失败不会被标记为运行异常，不计入 last_error。\n\n​\n\n​\n\nstatus\n\n​\n\n​\n\nString\n\n​\n\n必填\n\n​\n\n对话的运行状态。取值为：\n\n​\n\ncreated：对话已创建。\n\n​\n\nin_progress：智能体正在处理中。\n\n​\n\ncompleted：智能体已完成处理，本次对话结束。\n\n​\n\nfailed：对话失败。\n\n​\n\nrequires_action：对话中断，需要进一步处理。\n\n​\n\ncanceled：对话已取消。\n\n​\n\nrequired_action\n\n​\n\nObject\n\n​\n\n选填\n\n​\n\n需要运行的信息详情。\n\n​\n\nusage\n\n​\n\nObject\n\n​\n\n选填\n\n​\n\nToken 消耗的详细信息。实际的 Token 消耗以对话结束后返回的值为准。\n\n​\n\n»token_count\n\n​\n\nInteger\n\n​\n\n选填\n\n​\n\n本次对话消耗的 Token 总数，包括 input 和 output 部分的消耗。\n\n​\n\n»output_count\n\n​\n\nInteger\n\n​\n\n选填\n\n​\n\noutput 部分消耗的 Token 总数。\n\n​\n\n»input_count\n\n​\n\nInteger\n\n​\n\n选填\n\n​\n\ninput 部分消耗的 Token 总数。\n\n​\n\n​\n\nChat Object 的示例如下：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n// 在 chat 事件里，data 字段中的 id 为 Chat ID，即会话 ID。\n\n​\n\n\"id\"\n\n:\n\n\"737662389258662****\"\n\n,\n\n​\n\n\"conversation_id\"\n\n:\n\n\"737554565555041****\"\n\n,\n\n​\n\n\"bot_id\"\n\n:\n\n\"736661612448078****\"\n\n,\n\n​\n\n\"completed_at\"\n\n:\n\n1717508113\n\n,\n\n​\n\n\"last_error\"\n\n:\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n​\n\n},\n\n​\n\n\"status\"\n\n:\n\n\"completed\"\n\n,\n\n​\n\n\"usage\"\n\n:\n\n{\n\n​\n\n\"token_count\"\n\n:\n\n6644\n\n,\n\n​\n\n\"output_count\"\n\n:\n\n766\n\n,\n\n​\n\n\"input_count\"\n\n:\n\n5878\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\nMessage Object\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\nMessage ID，即消息的唯一标识。\n\n​\n\nconversation_id\n\n​\n\nString\n\n​\n\n此消息所在的会话 ID。\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n编写此消息的智能体ID。此参数仅在对话产生的消息中返回。\n\n​\n\nchat_id\n\n​\n\nString\n\n​\n\nChat ID。此参数仅在对话产生的消息中返回。\n\n​\n\nmeta_data\n\n​\n\nMap\n\n​\n\n创建消息时的附加消息，获取消息时也会返回此附加消息。\n\n​\n\nrole\n\n​\n\nString\n\n​\n\n发送这条消息的实体。取值：\n\n​\n\nuser\n\n：代表该条消息内容是用户发送的。\n\n​\n\nassistant\n\n：代表该条消息内容是智能体发送的。\n\n​\n\ncontent\n\n​\n\nString\n\n​\n\n消息的内容，支持纯文本、多模态（文本、图片、文件混合输入）等多种类型的内容。\n\n​\n\ncontent_type\n\n​\n\nString\n\n​\n\n消息内容的类型，取值包括：\n\n​\n\ntext：文本。\n\n​\n\nobject_string：多模态内容，即文本和文件的组合、文本和图片的组合。\n\n​\n\ncreated_at\n\n​\n\nInteger\n\n​\n\n消息的创建时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。\n\n​\n\nupdated_at\n\n​\n\nInteger\n\n​\n\n消息的更新时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。\n\n​\n\ntype\n\n​\n\nString\n\n​\n\n消息类型。\n\n​\n\nquestion\n\n：用户输入内容。\n\n​\n\nanswer\n\n：智能体返回给用户的消息内容，支持增量返回。如果对话流绑定了 messge 节点，可能会存在多 answer 场景，此时可以用流式返回的结束标志来判断所有 answer 完成。\n\n​\n\nfunction_call\n\n：智能体对话过程中调用函数（function call）的中间结果。\n\n​\n\ntool_response\n\n：调用工具 （function call）后返回的结果。\n\n​\n\nsection_id\n\n​\n\nString\n\n​\n\n预留字段，仅在调用\n\n​\n\n发起对话\n\nAPI 时的部分场景下返回，无需关注。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n执行应用对话流\n\n执行资源库对话流\n\n执行低代码应用中的对话流时，需要通过 app_id 指定应用 ID。\n\n​\n\n示例如下：\n\n​\n\n​\n\nShell\n\n复制\n\ncurl --location 'https://\n\napi.coze.cn\n\n/v1/workflows/chat' \\\n\n​\n\n--header 'Authorization: Bearer pat_*****' \\\n\n​\n\n--header 'Content-Type: application/json' \\\n\n​\n\n--data '{\n\n​\n\n\"workflow_id\": \"74423***\",\n\n​\n\n\"app_id\": \"7439828073***\",\n\n​\n\n\"additional_messages\": [\n\n​\n\n{\n\n​\n\n\"role\": \"user\",\n\n​\n\n\"content_type\": \"text\",\n\n​\n\n\"content\": \"你好\"\n\n​\n\n}\n\n​\n\n],\n\n​\n\n\"parameters\": {\n\n​\n\n\"image\":\"{\\\"file_id\\\":\\\"1122334455\\\"}\"\n\n​\n\n}\n\n​\n\n}'\n\n​\n\n​\n\n​\n\n返回示例\n\n​\n\n执行成功\n\n执行失败\n\n​\n\nJSON\n\n复制\n\n# chat - 开始\n\n​\n\nevent\n\n:\n\nconversation.chat.created\n\n​\n\ndata\n\n:\n\n{\n\n\"last_error\"\n\n:{\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n\"code\"\n\n:\n\n0\n\n},\n\n\"usage\"\n\n:{\n\n\"token_count\"\n\n:\n\n0\n\n,\n\n\"output_count\"\n\n:\n\n0\n\n,\n\n\"input_count\"\n\n:\n\n0\n\n},\n\n\"id\"\n\n:\n\n\"75598600924738*****\"\n\n,\n\n\"conversation_id\"\n\n:\n\n\"75598599835687*****\"\n\n,\n\n\"section_id\"\n\n:\n\n\"75598599835687*****\"\n\n,\n\n\"status\"\n\n:\n\n\"created\"\n\n,\n\n\"created_at\"\n\n:\n\n1760167093\n\n}\n\n​\n\n# chat - 处理中\n\n​\n\nevent\n\n:\n\nconversation.chat.in_progress\n\n​\n\ndata\n\n:\n\n{\n\n\"usage\"\n\n:{\n\n\"token_count\"\n\n:\n\n0\n\n,\n\n\"output_count\"\n\n:\n\n0\n\n,\n\n\"input_count\"\n\n:\n\n0\n\n},\n\n\"conversation_id\"\n\n:\n\n\"75598599835687*****\"\n\n,\n\n\"id\"\n\n:\n\n\"75598600924738*****\"\n\n,\n\n\"section_id\"\n\n:\n\n\"75598599835687*****\"\n\n,\n\n\"last_error\"\n\n:{\n\n\"code\"\n\n:\n\n0\n\n,\n\n\"msg\"\n\n:\n\n\"\"\n\n},\n\n\"status\"\n\n:\n\n\"in_progress\"\n\n,\n\n\"created_at\"\n\n:\n\n1760167093\n\n}\n\n​\n\n​\n\nevent\n\n:\n\nconversation.message.delta\n\n​\n\ndata\n\n:\n\n{\n\n\"conversation_id\"\n\n:\n\n\"75598599835687*****\"\n\n,\n\n\"role\"\n\n:\n\n\"assistant\"\n\n,\n\n\"section_id\"\n\n:\n\n\"75598599835687*****\"\n\n,\n\n\"chat_id\"\n\n:\n\n\"75598600924738*****\"\n\n,\n\n\"id\"\n\n:\n\n\"75598601273532*****\"\n\n,\n\n\"type\"\n\n:\n\n\"answer\"\n\n,\n\n\"content\"\n\n:\n\n\"那我给你讲\"\n\n,\n\n\"content_type\"\n\n:\n\n\"text\"\n\n}\n\n​\n\n​\n\nevent\n\n:\n\nconversation.message.delta\n\n​\n\ndata\n\n:\n\n{\n\n\"content\"\n\n:\n\n\"个会冒冷气的笑话哦！从前有只小企鹅问\"\n\n,\n\n\"content_type\"\n\n:\n\n\"text\"\n\n,\n\n\"section_id\"\n\n:\n\n\"75598599835687*****\"\n\n,\n\n\"conversation_id\"\n\n:\n\n\"75598599835687*****\"\n\n,\n\n\"type\"\n\n:\n\n\"answer\"\n\n,\n\n\"chat_id\"\n\n:\n\n\"75598600924738*****\"\n\n,\n\n\"id\"\n\n:\n\n\"75598601273532*****\"\n\n,\n\n\"role\"\n\n:\n\n\"assistant\"\n\n}\n\n​\n\n​\n\nevent\n\n:\n\nconversation.message.delta\n\n​\n\ndata\n\n:\n\n{\n\n\"id\"\n\n:\n\n\"75598601273532*****\"\n\n,\n\n\"conversation_id\"\n\n:\n\n\"75598599835687*****\"\n\n,\n\n\"role\"\n\n:\n\n\"assistant\"\n\n,\n\n\"content_type\"\n\n:\n\n\"text\"\n\n,\n\n\"chat_id\"\n\n:\n\n\"75598600924738*****\"\n\n,\n\n\"type\"\n\n:\n\n\"answer\"\n\n,\n\n\"content\"\n\n:\n\n\"妈妈：\\\"为什么我们住在南极呀\"\n\n,\n\n\"section_id\"\n\n:\n\n\"75598599835687*****\"\n\n}\n\n​\n\n​\n\nevent\n\n:\n\nconversation.message.delta\n\n​\n\ndata\n\n:\n\n{\n\n\"content\"\n\n:\n\n\"？\\\"妈妈摸着它的圆脑袋说\"\n\n,\n\n\"role\"\n\n:\n\n\"assistant\"\n\n,\n\n\"conversation_id\"\n\n:\n\n\"75598599835687*****\"\n\n,\n\n\"type\"\n\n:\n\n\"answer\"\n\n,\n\n\"content_type\"\n\n:\n\n\"text\"\n\n,\n\n\"chat_id\"\n\n:\n\n\"75598600924738*****\"\n\n,\n\n\"section_id\"\n\n:\n\n\"75598599835687*****\"\n\n,\n\n\"id\"\n\n:\n\n\"75598601273532*****\"\n\n}\n\n​\n\n​\n\nevent\n\n:\n\nconversation.message.delta\n\n​\n\ndata\n\n:\n\n{\n\n\"role\"\n\n:\n\n\"assistant\"\n\n,\n\n\"type\"\n\n:\n\n\"answer\"\n\n,\n\n\"chat_id\"\n\n:\n\n\"75598600924738*****\"\n\n,\n\n\"section_id\"\n\n:\n\n\"75598599835687*****\"\n\n,\n\n\"id\"\n\n:\n\n\"75598601273532*****\"\n\n,\n\n\"conversation_id\"\n\n:\n\n\"75598599835687*****\"\n\n,\n\n\"content\"\n\n:\n\n\"：\\\"因为这里有好多好多鱼呀~\\\"小\"\n\n,\n\n\"content_type\"\n\n:\n\n\"text\"\n\n}\n\n​\n\n​\n\nevent\n\n:\n\nconversation.message.delta\n\n​\n\ndata\n\n:\n\n{\n\n\"role\"\n\n:\n\n\"assistant\"\n\n,\n\n\"chat_id\"\n\n:\n\n\"75598600924738*****\"\n\n,\n\n\"id\"\n\n:\n\n\"75598601273532*****\"\n\n,\n\n\"conversation_id\"\n\n:\n\n\"75598599835687*****\"\n\n,\n\n\"type\"\n\n:\n\n\"answer\"\n\n,\n\n\"content\"\n\n:\n\n\"企鹅眨巴眨巴眼睛：\\\"可是北极熊住在\"\n\n,\n\n\"content_type\"\n\n:\n\n\"text\"\n\n,\n\n\"section_id\"\n\n:\n\n\"75598599835687*****\"\n\n}\n\n​\n\n​\n\nevent\n\n:\n\nconversation.message.delta\n\n​\n\ndata\n\n:\n\n{\n\n\"content\"\n\n:\n\n\"北极也有鱼呀！\\\"妈妈突然把翅膀\"\n\n,\n\n\"chat_id\"\n\n:\n\n\"75598600924738*****\"\n\n,\n\n\"section_id\"\n\n:\n\n\"75598599835687*****\"\n\n,\n\n\"role\"\n\n:\n\n\"assistant\"\n\n,\n\n\"type\"\n\n:\n\n\"answer\"\n\n,\n\n\"content_type\"\n\n:\n\n\"text\"\n\n,\n\n\"id\"\n\n:\n\n\"75598601273532*****\"\n\n,\n\n\"conversation_id\"\n\n:\n\n\"75598599835687*****\"\n\n}\n\n​\n\n​\n\nevent\n\n:\n\nconversation.message.delta\n\n​\n\ndata\n\n:\n\n{\n\n\"id\"\n\n:\n\n\"75598601273532*****\"\n\n,\n\n\"conversation_id\"\n\n:\n\n\"75598599835687*****\"\n\n,\n\n\"role\"\n\n:\n\n\"assistant\"\n\n,\n\n\"type\"\n\n:\n\n\"answer\"\n\n,\n\n\"section_id\"\n\n:\n\n\"75598599835687*****\"\n\n,\n\n\"content\"\n\n:\n\n\"搭在它肩上，压低声音说\"\n\n,\n\n\"content_type\"\n\n:\n\n\"text\"\n\n,\n\n\"chat_id\"\n\n:\n\n\"75598600924738*****\"\n\n}\n\n​\n\n​\n\nevent\n\n:\n\nconversation.message.delta\n\n​\n\ndata\n\n:\n\n{\n\n\"role\"\n\n:\n\n\"assistant\"\n\n,\n\n\"type\"\n\n:\n\n\"answer\"\n\n,\n\n\"content\"\n\n:\n\n\"：\\\"傻孩子...因为如果我们搬到北极，就\"\n\n,\n\n\"content_type\"\n\n:\n\n\"text\"\n\n,\n\n\"id\"\n\n:\n\n\"75598601273532*****\"\n\n,\n\n\"conversation_id\"\n\n:\n\n\"75598599835687*****\"\n\n,\n\n\"chat_id\"\n\n:\n\n\"75598600924738*****\"\n\n,\n\n\"section_id\"\n\n:\n\n\"75598599835687*****\"\n\n}\n\n​\n\n​\n\nevent\n\n:\n\nconversation.message.delta\n\n​\n\ndata\n\n:\n\n{\n\n\"conversation_id\"\n\n:\n\n\"75598599835687*****\"\n\n,\n\n\"role\"\n\n:\n\n\"assistant\"\n\n,\n\n\"type\"\n\n:\n\n\"answer\"\n\n,\n\n\"content_type\"\n\n:\n\n\"text\"\n\n,\n\n\"section_id\"\n\n:\n\n\"75598599835687*****\"\n\n,\n\n\"id\"\n\n:\n\n\"75598601273532*****\"\n\n,\n\n\"content\"\n\n:\n\n\"会变成'北极大企鹅啦！\"\n\n,\n\n\"chat_id\"\n\n:\n\n\"75598600924738*****\"\n\n}\n\n​\n\n​\n\n# MESSAGE - 消息结束\n\n​\n\nevent\n\n:\n\nconversation.message.completed\n\n​\n\ndata\n\n:\n\n{\n\n\"chat_id\"\n\n:\n\n\"75598600924738*****\"\n\n,\n\n\"created_at\"\n\n:\n\n1760167105\n\n,\n\n\"id\"\n\n:\n\n\"75598601273532*****\"\n\n,\n\n\"content\"\n\n:\n\n\"那我给你讲个会冒冷气的笑话哦！从前有只小企鹅问妈妈：\\\"为什么我们住在南极呀？\\\"妈妈摸着它的圆脑袋说：\\\"因为这里有好多好多鱼呀~\\\"小企鹅眨巴眨巴眼睛：\\\"可是北极熊住在北极也有鱼呀！\\\"妈妈突然把翅膀搭在它肩上，压低声音说：\\\"傻孩子...因为如果我们搬到北极，就会变成'北极大企鹅'啦！\\\"\"\n\n,\n\n\"content_type\"\n\n:\n\n\"text\"\n\n,\n\n\"section_id\"\n\n:\n\n\"75598599835687*****\"\n\n,\n\n\"conversation_id\"\n\n:\n\n\"75598599835687*****\"\n\n,\n\n\"role\"\n\n:\n\n\"assistant\"\n\n,\n\n\"type\"\n\n:\n\n\"answer\"\n\n}\n\n​\n\n​\n\nevent\n\n:\n\nconversation.message.completed\n\n​\n\ndata\n\n:\n\n{\n\n\"updated_at\"\n\n:\n\n1760167107\n\n,\n\n\"id\"\n\n:\n\n\"75598601516393*****\"\n\n,\n\n\"role\"\n\n:\n\n\"assistant\"\n\n,\n\n\"content_type\"\n\n:\n\n\"text\"\n\n,\n\n\"chat_id\"\n\n:\n\n\"75598600924738*****\"\n\n,\n\n\"created_at\"\n\n:\n\n1760167107\n\n,\n\n\"conversation_id\"\n\n:\n\n\"75598599835687*****\"\n\n,\n\n\"type\"\n\n:\n\n\"verbose\"\n\n,\n\n\"content\"\n\n:\n\n\"{\\\"msg_type\\\":\\\"empty result\\\",\\\"data\\\":\\\"empty result\\\",\\\"from_module\\\":null,\\\"from_unit\\\":null}\"\n\n,\n\n\"section_id\"\n\n:\n\n\"75598599835687*****\"\n\n}\n\n​\n\n​\n\nevent\n\n:\n\nconversation.message.completed\n\n​\n\ndata\n\n:\n\n{\n\n\"updated_at\"\n\n:\n\n1760167107\n\n,\n\n\"id\"\n\n:\n\n\"75598601569435*****\"\n\n,\n\n\"content\"\n\n:\n\n\"{\\\"msg_type\\\":\\\"generate_answer_finish\\\",\\\"data\\\":\\\"{\\\\\\\"finish_reason\\\\\\\":0,\\\\\\\"FinData\\\\\\\":\\\\\\\"\\\\\\\"}\\\",\\\"from_module\\\":null,\\\"from_unit\\\":null}\"\n\n,\n\n\"content_type\"\n\n:\n\n\"text\"\n\n,\n\n\"chat_id\"\n\n:\n\n\"75598600924738*****\"\n\n,\n\n\"section_id\"\n\n:\n\n\"75598599835687*****\"\n\n,\n\n\"created_at\"\n\n:\n\n1760167107\n\n,\n\n\"conversation_id\"\n\n:\n\n\"75598599835687*****\"\n\n,\n\n\"role\"\n\n:\n\n\"assistant\"\n\n,\n\n\"type\"\n\n:\n\n\"verbose\"\n\n}\n\n​\n\n# chat - 结束\n\n​\n\nevent\n\n:\n\nconversation.chat.completed\n\n​\n\ndata\n\n:\n\n{\n\n\"status\"\n\n:\n\n\"completed\"\n\n,\n\n\"usage\"\n\n:{\n\n\"token_count\"\n\n:\n\n1736\n\n,\n\n\"output_count\"\n\n:\n\n498\n\n,\n\n\"input_count\"\n\n:\n\n1238\n\n},\n\n\"created_at\"\n\n:\n\n1760167093\n\n,\n\n\"id\"\n\n:\n\n\"75598600924738*****\"\n\n,\n\n\"section_id\"\n\n:\n\n\"75598599835687*****\"\n\n,\n\n\"completed_at\"\n\n:\n\n1760167107\n\n,\n\n\"conversation_id\"\n\n:\n\n\"75598599835687*****\"\n\n,\n\n\"last_error\"\n\n:{\n\n\"code\"\n\n:\n\n0\n\n,\n\n\"msg\"\n\n:\n\n\"\"\n\n}}\n\n​\n\n​\n\nevent\n\n:\n\ndone\n\n​\n\ndata\n\n:\n\n{\n\n\"debug_url\"\n\n:\n\n\"https://www.coze.cn/work_flow?execute_id=75598600951038*****&space_id=74982048832804*****&workflow_id=75228046974940*****&execute_mode=2\"\n\n}\n\n​\n\n​\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n​\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n​\n\n上一篇\n\n查询工作流异步运行结果\n\n下一篇\n\n查询输出节点的执行结果",
        "links": [
          {
            "text": "上传文件",
            "href": "https://www.coze.cn/open/docs/developer_guides/upload_files"
          }
        ]
      },
      "markdown": "- 如果对话流的输入中包含文件、图片等多模态内容，需要先上传多模态内容以获取文件 ID 或 URL 地址，再将其作为对话流的输入。上传方式包括： ​\n\n- 调用 上传文件 API，获取文件 ID，将此 ID 作为对话流的输入。 ​\n\n- 上传到第三方存储工具中，并获取一个公开可访问的 URL 地址，将此 URL 作为对话流的输入。 ​\n\n- 调用接口后，你可以从响应的 Done 事件中获得 debug_url，访问链接即可通过可视化界面查看对话流的试运行过程，其中包含每个执行节点的输入输出等详细信息，帮助你在线调试或排障。debug_url 的访问有效期为 7 天，过期后将无法访问。 ​\n\n| 入参​ | 资源库对话流​ | ​ | 低代码应用中的对话流​ |\n| ​ | 在智能体中执行​ | 在低代码应用中执行​ | ​ |\n| workflow_id​ | 必选​ | 必选​ | 必选​ |\n| app_id​ | 不传​ | 必选​ | 必选​ |\n| bot_id​ | 必选​ | 不传​ | 不传​ |\n| conversation_id​ | 可选​ | 可选​ | 可选​ |\n\n- 通过 API 方式执行对话流前，应确认此对话流已发布，执行从未发布过的对话流时会返回错误码 4200。如果是低代码应用中的对话流，应先发布低代码应用为 API 服务；如果是空间资源库中的对话流，应先在资源库中发布对话流。 ​\n\n- 此接口暂不支持异步运行。 ​\n\n- 对话流中不支持提交端插件结果。 ​\n\n| 请求方式​ | POST​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/workflows/chat​​ |\n| 权限​ | run​确保调用该接口使用的令牌开通了run权限，详细信息参考​鉴权方式概述。​ |\n| 接口说明​ | 执行已发布的对话流。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考​准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| workflow_id​ | String​ | 必选​ | 73505836754923***​ | 待执行的对话流 ID，此对话流应已发布。​进入对话流编排页面，在页面 URL 中，workflow参数后的数字就是 Workflow ID。例如https://www.coze.cn/work_flow?space_id=42463***&workflow_id=73505836754923***，Workflow ID 为73505836754923***。​ |\n| additional_messages​​​ | Array of additional_messages object​​ | 必选​​ | [ { \"role\": \"user\", \"content_type\": \"text\", \"content\": \"你好\" } ]​ | 对话中用户问题和历史消息。数组长度限制为 50，即最多传入 50 条消息。​你需要通过此字段传入本次对话中用户的问题，也就是对话流的输入参数 USER_INPUT 的值。​可以同时传入多条历史消息，也就是本次对话的上下文。多条消息应按对话顺序排列，最后一条消息应为 role=user 的记录，也就是本次对话中用户的问题；其他消息为历史消息。​说明对话流执行到问答节点、输入节点等节点时可能导致对话中断，此时只需再次调用对话流，在 additional_messages 中指定输入内容即可继续对话。​​ |\n| parameters​ | map[String]any​ | 必选​ | {\"image\": \"{\\\"file_id\\\":\\\"1122334455\\\"}\",\"user_name\":\"George\"}​ | 设置对话流输入参数中的自定义参数。以 JSON 序列化字符串形式传入。你可以在指定对话流的编排页面查看自定义输入参数列表。​设置文件类型的自定义参数​如果对话流输入参数为 Image 等类型的文件，你可以传入文件 URL 或调用上传文件API 获取 file_id 后传入 file_id。示例：​上传文件并传入 file_id：​单个文件示例：\"parameters\": { \"image\": \"{\\\"file_id\\\":\\\"1122334455\\\"}\" }​文件数组示例：\"parameters\": { \"image\": [ \"{\\\"file_id\\\":\\\"1122334455\\\"}\" ] }。​传入文件 URL：“parameters” :{\"input\":\"请总结图片内容\", \"image\": \"https://example.com/tos-cn-i-mdko3gqilj/example.png\" }​会话名称绑定​你可以通过输入参数中的CONVERSATION_NAME绑定对应的会话名称，对话流产生的消息将保存到该会话中。推荐使用conversation_id绑定会话。​生效范围：此设置仅对低代码应用中的对话流生效。对于资源库对话流，你需要同时传入app_id以关联一个低代码应用，该设置才会生效。​获取方法：你可以在应用编排页面的会话管理中查看会话名称，或通过工作流中的查询会话列表节点查询会话名称。​​​​​​说明对话流的输入参数  USER_INPUT 应在 additional_messages 中传入，在 parameters 中的 USER_INPUT 不生效。​如果 parameters 中未指定 CONVERSATION_NAME 或自定义输入参数，则使用参数默认值运行对话流；如果指定了这些参数，则使用指定值。​​ |\n| app_id​ | String​ | 可选​ | 744208683**​ | 需要关联的低代码应用 ID。调用对话流时，必须指定 app_id 或 bot_id，便于模型调用智能体或应用的数据库、变量等数据处理问题。​进入应用开发界面，开发页面URL中的project-ide参数后的数字就是AppID，例如https://www.coze.cn/space/74421656*****/project-ide/744208683**，低代码应用 ID 为744208683**。​说明运行低代码应用中的对话流时，app_id 必选。详细说明可参考​接口说明。​​ |\n| bot_id​​ | String​​ | 可选​​ | 75049216555930****​ | 需要关联的智能体 ID。 调用对话流时，必须指定 app_id 或 bot_id，便于模型调用智能体或应用的数据库、变量等数据处理问题。​进入智能体开发页面，开发页面 URL 中bot参数后的数字就是智能体 ID。例如https://www.coze.cn/space/73428668341****/bot/73428668*****，bot ID 为73428668*****。​说明运行资源库中的对话流时，根据对话流执行的位置（智能体或低代码应用）选择设置 bot_id 还是 app_id。详细说明可参考​接口说明。​​ |\n| conversation_id​ | String​ | 可选​ | 748348012449138****​ | 对话流对应的会话 ID，对话流产生的消息会保存到此会话中。会话默认为开始节点设置的 CONVERSATION_NAME，也可以通过 conversation_id 参数指定会话。​说明指定 conversation_id 时，parameters 中设置的 CONVERSATION_NAME 不生效。​会话的创建者必须和执行对话流的用户一致，即 API 访问令牌的创建者一致，否则无法执行对话流。​会话与 app_id、渠道匹配，不同渠道的会话隔离。​指定 bot_id 时，如果没有传入 conversation_id ，扣子编程会创建一个新的 conversation_id。不支持同时指定 bot_id 和 app_id。详细说明可参考​接口说明。​​ |\n| ext​ | Map[String][String]​​ | 可选​ | {\"latitude\":\"39.9042\",\"longitude\":\"116.4074\",\"user_id\":\"123456789\"}​ | 用于指定一些额外的字段，以 Map[String][String] 格式传入。例如某些插件会隐式用到的经纬度等字段。​目前仅支持以下字段：​latitude：String 类型，表示纬度。​longitude：String 类型，表示经度。​user_id：String 类型，表示用户 ID。​ |\n| workflow_version​​​ | String​​ | 可选​​ | v0.0.5​ | 对话流的版本号，仅当运行的对话流属于资源库对话流时有效。未指定版本号时默认执行最新版本的对话流。​​ |\n| connector_id​ | String​​ | 可选​​ | 1024​​ | 渠道 ID，用于配置该对话流在什么渠道执行。​当智能体或低代码应用发布到某个渠道后，可以通过该参数指定对话流在对应的渠道执行。​扣子编程的渠道 ID 包括：​1024（默认值）：API 渠道。​999：Chat SDK。​998：WebSDK。​10000122：扣子商店。​10000113：微信客服。​10000120：微信服务号。​10000121：微信订阅号。​10000126：抖音小程序。​10000127：微信小程序。​10000011：飞书。​10000128：飞书多维表格。​10000117：掘金。​自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在账号设置>发布渠道>企业自定义渠道管理页面查看渠道 ID。​说明不同渠道的用户数据、会话记录等相互隔离，进行数据分析统计时，不支持跨渠道数据调用。​ |\n\n- 你需要通过此字段传入本次对话中用户的问题，也就是对话流的输入参数 USER_INPUT 的值。 ​\n\n- 可以同时传入多条历史消息，也就是本次对话的上下文。多条消息应按对话顺序排列，最后一条消息应为 role=user 的记录，也就是本次对话中用户的问题；其他消息为历史消息。 ​\n\n- 设置文件类型的自定义参数 ​\n\n- 如果对话流输入参数为 Image 等类型的文件，你可以传入文件 URL 或调用 上传文件 API 获取 file_id 后传入 file_id。示例： ​\n\n- 上传文件并传入 file_id： ​\n\n- 单个文件示例： \"parameters\": { \"image\": \"{\\\"file_id\\\":\\\"1122334455\\\"}\" } ​\n\n- 文件数组示例： \"parameters\": { \"image\": [ \"{\\\"file_id\\\":\\\"1122334455\\\"}\" ] } 。 ​\n\n- 传入文件 URL： “parameters” :{\"input\":\"请总结图片内容\", \"image\": \" https://example.com/tos-cn-i-mdko3gqilj/example.png \" } ​\n\n- 会话名称绑定 ​\n\n- 你可以通过输入参数中的 CONVERSATION_NAME 绑定对应的会话名称，对话流产生的消息将保存到该会话中。推荐使用 conversation_id 绑定会话。 ​\n\n- 生效范围 ：此设置仅对低代码应用中的对话流生效。对于资源库对话流，你需要同时传入 app_id 以关联一个低代码应用，该设置才会生效。 ​\n\n- 获取方法 ：你可以在应用编排页面的会话管理中查看会话名称，或通过工作流中的 查询会话列表 节点查询会话名称。 ​\n\n- ​ ​ ​ ​ ​\n\n- 对话流的输入参数  USER_INPUT 应在 additional_messages 中传入，在 parameters 中的 USER_INPUT 不生效。 ​\n\n- 如果 parameters 中未指定 CONVERSATION_NAME 或自定义输入参数，则使用参数默认值运行对话流；如果指定了这些参数，则使用指定值。 ​\n\n- 指定 conversation_id 时，parameters 中设置的 CONVERSATION_NAME 不生效。 ​\n\n- 会话的创建者必须和执行对话流的用户一致，即 API 访问令牌的创建者一致，否则无法执行对话流。 ​\n\n- 会话与 app_id、渠道匹配，不同渠道的会话隔离。 ​\n\n- 指定 bot_id 时，如果没有传入 conversation_id ，扣子编程会创建一个新的 conversation_id。不支持同时指定 bot_id 和 app_id。详细说明可参考 ​ 接口说明 。 ​\n\n- latitude：String 类型，表示纬度。 ​\n\n- longitude：String 类型，表示经度。 ​\n\n- user_id：String 类型，表示用户 ID。 ​\n\n- 1024（默认值）：API 渠道。 ​\n\n- 999：Chat SDK。 ​\n\n- 998：WebSDK。 ​\n\n- 10000122：扣子商店。 ​\n\n- 10000113：微信客服。 ​\n\n- 10000120：微信服务号。 ​\n\n- 10000121：微信订阅号。 ​\n\n- 10000126：抖音小程序。 ​\n\n- 10000127：微信小程序。 ​\n\n- 10000011：飞书。 ​\n\n- 10000128：飞书多维表格。 ​\n\n- 10000117：掘金。 ​\n\n- 自定义渠道 ID。自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在 账号设置 > 发布渠道 > 企业自定义渠道管理 页面查看渠道 ID。 ​\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| role​ | String​ | 必选​ | user​ | 发送这条消息的实体。取值：​user：代表该条消息内容是用户发送的。​assistant：代表该条消息内容是模型发送的。​ |\n| type​​ | String​ | 可选​​ | question​ | 消息类型。默认为question。​question：用户输入内容。​answer：模型返回给用户的消息内容，支持增量返回。如果对话流绑定了输出节点，可能会存在多 answer 场景，此时可以用流式返回的结束标志来判断所有 answer 完成。​function_call：智能体对话过程中调用函数（function call）的中间结果。​tool_response：调用工具 （function call）后返回的结果。​ |\n| content​ | String​ | 可选​ | 北京今天的天气怎么样​ | 消息的内容，仅支持纯文本。​如果需要通过输入节点输入消息，可通过如下两种格式：​JSON 格式的键值对，例如：{\"input\":\"北京今天的天气怎么样\"}。​用\\n分隔的键值对，例如：{key1:val1\\nkey2:val2\\nkey3:val3}。​说明暂不支持在content中输入多模态（文本、图片、文件混合输入）、卡片等类型的内容。​如果需要传入图片、文件等多模态内容，你可以在parameters中传入对应的自定义参数及其值。​​ |\n| content_type​ | String​ | 可选​ | text​ | 消息内容的类型。​content_type固定为 text，表示普通文本。​说明指定 content 时，应同时设置 content_type。​​ |\n| meta_data​ | Map​ | 可选​ | {\"key1\":\"value1\", \"key2\":\"value2\"}​ | 创建消息时的附加消息，获取消息时也会返回此附加消息。​自定义键值对，应指定为 Map 对象格式。长度为 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。​ |\n\n- user ：代表该条消息内容是用户发送的。 ​\n\n- assistant ：代表该条消息内容是模型发送的。 ​\n\n- question ：用户输入内容。 ​\n\n- answer ：模型返回给用户的消息内容，支持增量返回。如果对话流绑定了输出节点，可能会存在多 answer 场景，此时可以用流式返回的结束标志来判断所有 answer 完成。 ​\n\n- function_call ：智能体对话过程中调用函数（function call）的中间结果。 ​\n\n- tool_response ：调用工具 （function call）后返回的结果。 ​\n\n- JSON 格式的键值对，例如： {\"input\":\"北京今天的天气怎么样\"} 。 ​\n\n- 用 \\n 分隔的键值对，例如： {key1:val1\\nkey2:val2\\nkey3:val3} 。 ​\n\n- 暂不支持在 content 中输入多模态（文本、图片、文件混合输入）、卡片等类型的内容。 ​\n\n- 如果需要传入图片、文件等多模态内容，你可以在 parameters 中传入对应的自定义参数及其值。 ​\n\n| 参数​ | 类型​ | 说明​ |\n| event​ | String​ | 当前流式返回的数据包事件。在流式响应中，服务端不会一次性发送所有数据，而是以数据流的形式逐条发送数据给客户端，数据流中包含对话过程中触发的各种事件（event），直至处理完毕或处理中断。处理结束后，服务端会通过 conversation.message.completed 事件返回拼接后完整的模型回复信息。各个事件的说明可参考下表。​ |\n| data​ | Object​ | 消息内容。其中，chat 事件和 message 事件的格式不同。​chat 事件中，data 为ChatObject。​message 事件中，data 为MessageObject。​ |\n\n- chat 事件中，data 为 Chat Object 。 ​\n\n- message 事件中，data 为 Message Object 。 ​\n\n| 事件（event）名称​ | 说明​ |\n| conversation.chat.created​ | 创建对话的事件，表示对话开始。​ |\n| conversation.chat.in_progress​ | 服务端正在处理对话。​ |\n| conversation.message.delta​ | 增量消息，通常是 type=answer 时的增量消息。​ |\n| conversation.message.completed​ | message 已回复完成。此时流式包中带有所有 message.delta 的拼接结果，且每个消息均为 completed 状态。​ |\n| conversation.chat.completed​ | 对话完成。​ |\n| conversation.chat.failed​ | 此事件用于标识对话失败。​ |\n| conversation.chat.requires_action​ | 对话中断，需要使用方上报工具的执行结果。通常是触发了问答节点或输入节点，需要再次调用此接口继续对话。​ |\n| error​ | 流式响应过程中的错误事件。关于 code 和 msg 的详细说明，可参考​错误码。​ |\n| done​ | 本次会话的流式返回正常结束。​ |\n\n| 参数​ | 类型​ | 是否可选​ | 说明​ |\n| id​ | String​ | 必填​ | 对话 ID，即对话的唯一标识。​ |\n| conversation_id​ | String​ | 必填​ | 会话 ID，即会话的唯一标识。​ |\n| bot_id​ | String​ | 必填​ | 要进行会话聊天的智能体 ID。​ |\n| created_at​ | Integer​ | 选填​ | 对话创建的时间。格式为 10 位的 Unixtime 时间戳，单位为秒。​ |\n| completed_at​ | Integer​ | 选填​ | 对话结束的时间。格式为 10 位的 Unixtime 时间戳，单位为秒。​ |\n| failed_at​ | Integer​ | 选填​ | 对话失败的时间。格式为 10 位的 Unixtime 时间戳，单位为秒。​ |\n| meta_data​ | Map<String,String>​ | 选填​ | 创建消息时的附加消息，用于传入使用方的自定义数据，获取消息时也会返回此附加消息。​自定义键值对，应指定为 Map 对象格式。长度为 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。​ |\n| last_error​​ | Object​ | 选填​ | 对话运行异常时，此字段中返回详细的错误信息，包括：​Code：错误码。Integer 类型。0 表示成功，其他值表示失败。​Msg：错误信息。String 类型。​说明对话正常运行时，此字段返回 null。​suggestion 失败不会被标记为运行异常，不计入 last_error。​​ |\n| status​​ | String​ | 必填​ | 对话的运行状态。取值为：​created：对话已创建。​in_progress：智能体正在处理中。​completed：智能体已完成处理，本次对话结束。​failed：对话失败。​requires_action：对话中断，需要进一步处理。​canceled：对话已取消。​ |\n| required_action​ | Object​ | 选填​ | 需要运行的信息详情。​ |\n| usage​ | Object​ | 选填​ | Token 消耗的详细信息。实际的 Token 消耗以对话结束后返回的值为准。​ |\n| »token_count​ | Integer​ | 选填​ | 本次对话消耗的 Token 总数，包括 input 和 output 部分的消耗。​ |\n| »output_count​ | Integer​ | 选填​ | output 部分消耗的 Token 总数。​ |\n| »input_count​ | Integer​ | 选填​ | input 部分消耗的 Token 总数。​ |\n\n- Code：错误码。Integer 类型。0 表示成功，其他值表示失败。 ​\n\n- Msg：错误信息。String 类型。 ​\n\n- 对话正常运行时，此字段返回 null。 ​\n\n- suggestion 失败不会被标记为运行异常，不计入 last_error。 ​\n\n- created：对话已创建。 ​\n\n- in_progress：智能体正在处理中。 ​\n\n- completed：智能体已完成处理，本次对话结束。 ​\n\n- failed：对话失败。 ​\n\n- requires_action：对话中断，需要进一步处理。 ​\n\n- canceled：对话已取消。 ​\n\n| 参数​ | 类型​ | 说明​ |\n| id​ | String​ | Message ID，即消息的唯一标识。​ |\n| conversation_id​ | String​ | 此消息所在的会话 ID。​ |\n| bot_id​ | String​ | 编写此消息的智能体ID。此参数仅在对话产生的消息中返回。​ |\n| chat_id​ | String​ | Chat ID。此参数仅在对话产生的消息中返回。​ |\n| meta_data​ | Map​ | 创建消息时的附加消息，获取消息时也会返回此附加消息。​ |\n| role​ | String​ | 发送这条消息的实体。取值：​user：代表该条消息内容是用户发送的。​assistant：代表该条消息内容是智能体发送的。​ |\n| content​ | String​ | 消息的内容，支持纯文本、多模态（文本、图片、文件混合输入）等多种类型的内容。​ |\n| content_type​ | String​ | 消息内容的类型，取值包括：​text：文本。​object_string：多模态内容，即文本和文件的组合、文本和图片的组合。​ |\n| created_at​ | Integer​ | 消息的创建时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。​ |\n| updated_at​ | Integer​ | 消息的更新时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。​ |\n| type​ | String​ | 消息类型。​question：用户输入内容。​answer：智能体返回给用户的消息内容，支持增量返回。如果对话流绑定了 messge 节点，可能会存在多 answer 场景，此时可以用流式返回的结束标志来判断所有 answer 完成。​function_call：智能体对话过程中调用函数（function call）的中间结果。​tool_response：调用工具 （function call）后返回的结果。​ |\n| section_id​ | String​ | 预留字段，仅在调用​发起对话API 时的部分场景下返回，无需关注。​ |\n\n- user ：代表该条消息内容是用户发送的。 ​\n\n- assistant ：代表该条消息内容是智能体发送的。 ​\n\n- text：文本。 ​\n\n- object_string：多模态内容，即文本和文件的组合、文本和图片的组合。 ​\n\n- question ：用户输入内容。 ​\n\n- answer ：智能体返回给用户的消息内容，支持增量返回。如果对话流绑定了 messge 节点，可能会存在多 answer 场景，此时可以用流式返回的结束标志来判断所有 answer 完成。 ​\n\n- function_call ：智能体对话过程中调用函数（function call）的中间结果。 ​\n\n- tool_response ：调用工具 （function call）后返回的结果。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/get_node_execute_history_response",
      "title": "查询输出节点的执行结果",
      "content": {
        "sections": [],
        "full_text": "查询输出节点的执行结果\n\n查询输出节点的执行结果。\n\n​\n\n接口描述\n\n​\n\n通过\n\n查询工作流异步执行结果\n\nAPI 查询工作流执行结果时，如果工作流输出节点的输出内容超过 1MB，查询工作流异步执行结果 API 无法返回完整的输出节点内容。需要调用本 API，根据工作流的执行 ID 以及\n\n查询工作流异步执行结果\n\nAPI 返回的节点执行 UUID，逐一查询每个节点的输出内容。\n\n​\n\n接口限制\n\n​\n\n本 API 的流控限制请参见\n\nAPI 介绍\n\n。\n\n​\n\n输出节点的输出数据最多保存 24 小时。\n\n​\n\n仅支持查询输出节点的执行结果，不支持查询结束节点的执行结果。\n\n​\n\n输出节点的输出内容超过1MB 时，无法保证返回内容的完整性。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/workflows/:workflow_id/run_histories/:execute_id/execute_nodes/:node_execute_uuid\n\n​\n\n权限\n\n​\n\nlistRunHistory\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nlistRunHistory\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n查询输出节点的执行结果。\n\n​\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nworkflow_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n73505836754923***\n\n​\n\n要执行的 Workflow ID，需要先完成发布 Workflow 的操作。\n\n​\n\n进入 Workflow 编排页，在页面 URL 中，workflow 参数后的数字就是 Workflow ID。例如：\n\n​\n\nhttps://www.coze.com/work_flow?space_id=73119690542463***&workflow_id=73505836754923***\n\n, Workflow ID 为 73505836754923*** 。\n\n​\n\nexecute_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n743104097880585****\n\n​\n\n工作流的执行 ID。调用接口\n\n执行工作流\n\n，如果选择异步执行工作流，响应信息中会返回 execute_id。\n\n​\n\nnode_execute_uuid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n78923456777*****\n\n​\n\n工作流异步执行结果\n\nAPI 中返回的节点执行 uuid。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndata\n\n​\n\nObject of\n\nWorkflowNodeExecuteHistory\n\n​\n\n\\\n\n​\n\n节点的执行结果。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{ \"logid\": \"202410242028595CCF353CEC86A8*****\" }\n\n​\n\n该请求的响应信息。\n\n​\n\n​\n\nWorkflowNodeExecuteHistory\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nis_finish\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n节点是否执行完成。\n\n​\n\ntrue\n\n表示执行已完成。\n\n​\n\nfalse\n\n表示执行未完成。\n\n​\n\nnode_output\n\n​\n\nString\n\n​\n\n0《零的奇妙冒险》\\n\\n在一个神秘而遥远的数字王国里，有一个特殊的数字——零。\n\n​\n\n节点的执行结果输出信息。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request GET 'https\n\n:\n\n//api.coze.cn/v1/workflows/74730423****702316/run_histories/75142305***8428/execute_nodes/63c7f****6d2' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_uk74546778ffgd****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"is_finish\"\n\n:\n\nfalse\n\n,\n\n​\n\n\"node_output\"\n\n:\n\n\"0《零的奇妙冒险》\\n\\n在一个神秘而遥远的数字王国里，有一个特殊的数字——零。零一直觉得自己很渺小，没有什么特别之处，常常感到很孤独。\\n\\n有一天，零百无聊赖地在数字王国的小路上游荡。突然，它听到了一阵哭声。零好奇地顺着哭声找去，发现是数字一在角落里哭泣。\\n\\n“你怎么了，一？”零关心地问。\\n\\n一抽噎着说：“大家都觉得我很孤单，很弱小，没有什么用处。我也不知道自己能做什么。”\\n\\n零听了，心中涌起一股同情。它笑着对一说：“别难过，一。其实我们可以一起变得很强大。你看，当我和你站在一起的时候，我们就变成了十。”\\n\\n一惊讶地看着零，眼中渐渐燃起了希望。从那以后，零和一成为了好朋友，它们一起在数字王国里探索。\\n\\n不久，它们遇到了数字二。二正为自己不能变成更大的数字而苦恼。零和一相视一笑，走过去对二说：“别担心，我们可以一起组成十二。”\\n\\n数字二高兴极了，加入了它们的队伍。随着它们的冒险继续，越来越多的数字加入了零的小团队。它们发现，只要零和其他数字在一起，就能创造出无数的可能。\\n\\n有一次，数字王国遭遇了一场巨大的危机。一个邪恶的数字巫师出现了，他想要把所有的数字都变成他的奴隶，让数字王国陷入黑暗。\\n\\n零和它的朋友们决定挺身而出，保卫数字王国。它们齐心协力，运用各自的力量，与数字巫师展开了一场激烈的战斗。\\n\\n零虽然本身没有很大的力量，但它却能让其他数字发挥出更大的作用。在关键时刻，零带领着大家组成了一个巨大的数字组合，成功地击败了数字巫师。\\n\\n数字王国恢复了往日的和平与欢乐。零也不再觉得自己渺小和孤独了。它明白了，每个数字都有自己的价值，而当大家团结在一起的时候，就能创造出无穷的奇迹。\\n\\n从那以后，零成为了数字王国里最受欢迎的数字之一。它和它的朋友们继续在数字王国里冒险，用它们的团结和智慧，为数字王国带来更多的美好。\\n\\n在这个充满奇幻的数字王国里，零的故事告诉我们，即使是最渺小的存在，也能在合适的时候发挥出巨大的作用。只要我们相信自己，勇敢地去探索，去团结他人，就能创造出属于我们自己的精彩世界。而零，也将继续带着它的勇气和善良，在数字王国里书写更多的传奇故事。\"\n\n​\n\n},\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"202506112018****AB2ADDA\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n执行对话流\n\n下一篇\n\n查询工作流列表",
        "links": []
      },
      "markdown": "- 本 API 的流控限制请参见 API 介绍 。 ​\n\n- 输出节点的输出数据最多保存 24 小时。 ​\n\n- 仅支持查询输出节点的执行结果，不支持查询结束节点的执行结果。 ​\n\n- 输出节点的输出内容超过1MB 时，无法保证返回内容的完整性。 ​\n\n| 请求方式​ | GET |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/workflows/:workflow_id/run_histories/:execute_id/execute_nodes/:node_execute_uuid​ |\n| 权限​ | listRunHistory​确保调用该接口使用的访问令牌开通了listRunHistory权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 查询输出节点的执行结果。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| workflow_id​ | String​ | 必选​ | 73505836754923***​ | 要执行的 Workflow ID，需要先完成发布 Workflow 的操作。​进入 Workflow 编排页，在页面 URL 中，workflow 参数后的数字就是 Workflow ID。例如：​https://www.coze.com/work_flow?space_id=73119690542463***&workflow_id=73505836754923***, Workflow ID 为 73505836754923*** 。​ |\n| execute_id​ | String​ | 必选​ | 743104097880585****​ | 工作流的执行 ID。调用接口执行工作流，如果选择异步执行工作流，响应信息中会返回 execute_id。​ |\n| node_execute_uuid​ | String​ | 必选​ | 78923456777*****​ | 工作流异步执行结果API 中返回的节点执行 uuid。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| data​ | Object ofWorkflowNodeExecuteHistory​ | \\​ | 节点的执行结果。​ |\n| detail​ | Object ofResponseDetail​ | { \"logid\": \"202410242028595CCF353CEC86A8*****\" }​ | 该请求的响应信息。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| is_finish​ | Boolean​ | true​ | 节点是否执行完成。​true表示执行已完成。​false表示执行未完成。​ |\n| node_output​ | String​ | 0《零的奇妙冒险》\\n\\n在一个神秘而遥远的数字王国里，有一个特殊的数字——零。​ | 节点的执行结果输出信息。​ |\n\n- true 表示执行已完成。 ​\n\n- false 表示执行未完成。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/get_workflow_list",
      "title": "查询工作流列表",
      "content": {
        "sections": [],
        "full_text": "查询工作流列表\n\n查询指定工作空间中的工作流列表及其基本信息。\n\n​\n\n你可以查询某个工作空间中的所有工作流或对话流、某个应用关联的工作流或对话流。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/workflows\n\n​\n\n​\n\n权限\n\n​\n\nlistWorkflow\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nlistWorkflow\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n查询指定工作空间中的工作流列表及其基本信息。\n\n​\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nworkspace_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n736163827687053****\n\n​\n\n工作空间 ID，用于指定要查询的工作空间。\n\n​\n\n进入指定空间，空间页面 URL 中\n\nw\n\n参数后的数字就是 工作空间 ID。例如\n\nhttps://code.coze.cn/w/75814654762959***/projects\n\n，工作空间 ID 为\n\n75814654762959***\n\n。\n\n​\n\npage_num\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\n1\n\n​\n\n查询结果分页展示时，此参数用于设置查看的页码。最小值为 1。\n\n​\n\npage_size\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n20\n\n​\n\n查询结果分页展示时，此参数用于设置每页返回的数据量。取值范围为 1 ~ 30，默认为 10。\n\n​\n\nworkflow_mode\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nworkflow\n\n​\n\n工作流类型，默认为空，即查询所有工作流类型。枚举值：\n\n​\n\nworkflow\n\n：工作流。\n\n​\n\nchatflow\n\n：对话流。\n\n​\n\napp_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n744208683**\n\n​\n\n扣子应用 ID，用于查询指定应用关联的工作流。默认为空，即不指定应用。\n\n​\n\n进入应用开发界面，开发页面 URL 中的\n\nproject-ide\n\n参数后的数字就是 AppID，例如\n\nhttps://\n\nwww.coze.cn\n\n/space/74421656*****/project-ide/744208683**\n\n，扣子应用 ID 为\n\n744208683**\n\n。\n\n​\n\npublish_status\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nall\n\n​\n\n工作流的发布状态，用于筛选不同发布状态的版本。枚举值：\n\n​\n\nall ：所有状态。\n\n​\n\npublished_online ：（默认值）已发布的正式版。\n\n​\n\nunpublished_draft ：草稿状态。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nObject of\n\nOpenAPIWorkflowList\n\n​\n\n{\"items\":[{\"app_id\":\"744208683**\",\"creator\":{\"id\":\"2478774393***\",\"name\":\"user41833***\"},\"icon_url\":\"\n\nhttps://example.com/icon/workflow_123.png\n\n\",\"created_at\":\"1700000000\",\"updated_at\":\"1701234567\",\"description\":\"工作流测试\",\"workflow_id\":\"73505836754923***\",\"workflow_name\":\"workflow_example\"}],\"has_more\":false}\n\n​\n\n工作流列表及其详细信息。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\n​\n\nOpenAPIWorkflowList\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nitems\n\n​\n\nArray of\n\nOpenAPIWorkflowBasic\n\n​\n\n[{\"app_id\":\"744208683**\",\"creator\":{\"id\":\"2478774393***\",\"name\":\"user41833***\"},\"icon_url\":\"\n\nhttps://example.com/icon/workflow_123.png\n\n\",\"created_at\":\"1700000000\",\"updated_at\":\"1701234567\",\"description\":\"工作流测试\",\"workflow_id\":\"73505836754923***\",\"workflow_name\":\"workflow_example\"}]\n\n​\n\n工作流的基础信息。\n\n​\n\nhas_more\n\n​\n\nBoolean\n\n​\n\nfalse\n\n​\n\n标识当前返回的工作流列表是否还有更多数据未返回。\n\n​\n\ntrue\n\n：还有更多未返回的回调应用。\n\n​\n\nfalse\n\n：已返回所有数据。\n\n​\n\n​\n\nOpenAPIWorkflowBasic\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\napp_id\n\n​\n\nString\n\n​\n\n744208683**\n\n​\n\n工作流关联的应用 ID。若工作流未关联任何应用，则该字段值为\n\n0\n\n。\n\ncreator\n\n​\n\nObject of\n\nOpenAPIUserInfo\n\n​\n\n{\"id\":\"2478774393***\",\"name\":\"user41833***\"}\n\n​\n\n工作流创建者的信息，包含创建者的用户 ID 和用户名。\n\nicon_url\n\n​\n\nString\n\n​\n\nhttps://example.com/icon/workflow_123.png\n\n​\n\n工作流图标的 URL 地址。\n\n​\n\ncreated_at\n\n​\n\nString\n\n​\n\n1752060786\n\n​\n\n工作流的创建时间，以 Unix 时间戳表示，单位为秒。\n\nupdated_at\n\n​\n\nString\n\n​\n\n1752060827\n\n​\n\n工作流的最后更新时间，以 Unix 时间戳表示，单位为秒。\n\ndescription\n\n​\n\nString\n\n​\n\n生成音乐的工作流\n\n​\n\n工作流的描述。\n\n​\n\nworkflow_id\n\n​\n\nString\n\n​\n\n73505836754923***\n\n​\n\n工作流 ID。\n\n​\n\nworkflow_name\n\n​\n\nString\n\n​\n\nworkflow_example\n\n​\n\n工作流名称。\n\n​\n\n​\n\nOpenAPIUserInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n2478774393***\n\n​\n\n工作流创建者的扣子用户 UID。\n\n​\n\nname\n\n​\n\nString\n\n​\n\nuser41833***\n\n​\n\n工作流创建者的扣子用户名。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request GET 'https\n\n:\n\n//api.coze.cn/v1/workflows?page_num=1&workspace_id=74496******2844844' \\\n\n​\n\n--header 'authorization\n\n:\n\nBearer pat_hBHquB***' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"has_more\"\n\n:\n\ntrue\n\n,\n\n​\n\n\"items\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"updated_at\"\n\n:\n\n\"1752060827\"\n\n,\n\n​\n\n\"workflow_id\"\n\n:\n\n\"7524966*******\"\n\n,\n\n​\n\n\"description\"\n\n:\n\n\"Description\"\n\n,\n\n​\n\n\"app_id\"\n\n:\n\n\"0\"\n\n,\n\n​\n\n\"created_at\"\n\n:\n\n\"1752060786\"\n\n,\n\n​\n\n\"icon_url\"\n\n:\n\n\"https://tosv.****/workflow.png\"\n\n,\n\n​\n\n\"creator\"\n\n:\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"26150****\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"alan\"\n\n​\n\n},\n\n​\n\n\"workflow_name\"\n\n:\n\n\"workflow_Name\"\n\n​\n\n}\n\n​\n\n]\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20250716215828******\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n查询输出节点的执行结果\n\n下一篇\n\n查询工作流基本信息",
        "links": []
      },
      "markdown": "| 请求方式​ | GET​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/workflows​​ |\n| 权限​ | listWorkflow​确保调用该接口使用的访问令牌开通了listWorkflow权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 查询指定工作空间中的工作流列表及其基本信息。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| workspace_id​ | String​ | 必选​ | 736163827687053****​ | 工作空间 ID，用于指定要查询的工作空间。​进入指定空间，空间页面 URL 中w参数后的数字就是 工作空间 ID。例如https://code.coze.cn/w/75814654762959***/projects，工作空间 ID 为75814654762959***。​ |\n| page_num​ | Integer​ | 必选​ | 1​ | 查询结果分页展示时，此参数用于设置查看的页码。最小值为 1。​ |\n| page_size​ | Integer​ | 可选​ | 20​ | 查询结果分页展示时，此参数用于设置每页返回的数据量。取值范围为 1 ~ 30，默认为 10。​ |\n| workflow_mode​ | String​ | 可选​ | workflow​ | 工作流类型，默认为空，即查询所有工作流类型。枚举值：​workflow：工作流。​chatflow：对话流。​ |\n| app_id​ | String​ | 可选​ | 744208683**​ | 扣子应用 ID，用于查询指定应用关联的工作流。默认为空，即不指定应用。​进入应用开发界面，开发页面 URL 中的project-ide参数后的数字就是 AppID，例如https://www.coze.cn/space/74421656*****/project-ide/744208683**，扣子应用 ID 为744208683**。​ |\n| publish_status​ | String​ | 可选​ | all​ | 工作流的发布状态，用于筛选不同发布状态的版本。枚举值：​all ：所有状态。​published_online ：（默认值）已发布的正式版。​unpublished_draft ：草稿状态。​ |\n\n- workflow ：工作流。 ​\n\n- chatflow ：对话流。 ​\n\n- all ：所有状态。 ​\n\n- published_online ：（默认值）已发布的正式版。 ​\n\n- unpublished_draft ：草稿状态。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | Object ofOpenAPIWorkflowList​ | {\"items\":[{\"app_id\":\"744208683**\",\"creator\":{\"id\":\"2478774393***\",\"name\":\"user41833***\"},\"icon_url\":\"https://example.com/icon/workflow_123.png\",\"created_at\":\"1700000000\",\"updated_at\":\"1701234567\",\"description\":\"工作流测试\",\"workflow_id\":\"73505836754923***\",\"workflow_name\":\"workflow_example\"}],\"has_more\":false}​ | 工作流列表及其详细信息。​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| items​ | Array ofOpenAPIWorkflowBasic​ | [{\"app_id\":\"744208683**\",\"creator\":{\"id\":\"2478774393***\",\"name\":\"user41833***\"},\"icon_url\":\"https://example.com/icon/workflow_123.png\",\"created_at\":\"1700000000\",\"updated_at\":\"1701234567\",\"description\":\"工作流测试\",\"workflow_id\":\"73505836754923***\",\"workflow_name\":\"workflow_example\"}]​ | 工作流的基础信息。​ |\n| has_more​ | Boolean​ | false​ | 标识当前返回的工作流列表是否还有更多数据未返回。​true：还有更多未返回的回调应用。​false：已返回所有数据。​ |\n\n- true ：还有更多未返回的回调应用。 ​\n\n- false ：已返回所有数据。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| app_id​ | String​ | 744208683**​ | 工作流关联的应用 ID。若工作流未关联任何应用，则该字段值为0。 |\n| creator​ | Object ofOpenAPIUserInfo​ | {\"id\":\"2478774393***\",\"name\":\"user41833***\"}​ | 工作流创建者的信息，包含创建者的用户 ID 和用户名。 |\n| icon_url​ | String​ | https://example.com/icon/workflow_123.png​ | 工作流图标的 URL 地址。​ |\n| created_at​ | String​ | 1752060786​ | 工作流的创建时间，以 Unix 时间戳表示，单位为秒。 |\n| updated_at​ | String​ | 1752060827​ | 工作流的最后更新时间，以 Unix 时间戳表示，单位为秒。 |\n| description​ | String​ | 生成音乐的工作流​ | 工作流的描述。​ |\n| workflow_id​ | String​ | 73505836754923***​ | 工作流 ID。​ |\n| workflow_name​ | String​ | workflow_example​ | 工作流名称。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 2478774393***​ | 工作流创建者的扣子用户 UID。​ |\n| name​ | String​ | user41833***​ | 工作流创建者的扣子用户名。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/get_workflow_info",
      "title": "查询工作流基本信息",
      "content": {
        "sections": [],
        "full_text": "查询工作流基本信息\n\n查询工作流的基本信息，包括工作流名称、描述、创建者信息等。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/workflows/:workflow_id\n\n​\n\n​\n\n权限\n\n​\n\ngetMetaData\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\ngetMetaData\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n查询工作流基本信息。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nworkflow_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n73505836754923***\n\n​\n\n工作流 ID。\n\n​\n\n进入工作流编排页面，在页面 URL 中，workflow 参数后的数字就是 Workflow ID。例如\n\nhttps://www.coze.com/work_flow?space_id=42463***&workflow_id=73505836754923***\n\n，Workflow ID 为 73505836754923***。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ninclude_input_output\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\ntrue\n\n​\n\n是否在返回结果中返回输入和输出参数的结构体。\n\n​\n\ntrue\n\n：返回输入输出参数结构体\n\n​\n\nfalse\n\n：不返回输入输出参数结构体\n\n​\n\n默认值为\n\nfalse\n\n。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndata\n\n​\n\nObject of\n\nWorkflowInfo\n\n​\n\n\\\n\n​\n\n工作流的详细信息。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含本次请求的日志信息，用于问题排查和技术支持。\n\n​\n\nWorkflowInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ninput\n\n​\n\nObject of\n\nOpenAPIWorkflowInput\n\n​\n\n\\\n\n​\n\n工作流开始节点的输入参数的结构体。\n\n​\n\noutput\n\n​\n\nObject of\n\nOpenAPIWorkflowOutput\n\n​\n\n{ \"parameters\": { \"arr_obj_num\": { \"required\": false, \"type\": \"number\" } }, \"terminate_plan\": \"use_answer_content\", \"content\": \"输出为{{output}}\" }\n\n​\n\n工作流结束节点的输出参数的结构体。\n\n​\n\nworkflow_detail\n\n​\n\nObject of\n\nOpenAPIWorkflowBasic\n\n​\n\n{\"app_id\":\"744208683**\",\"creator\":{\"id\":\"2478774393***\",\"name\":\"user41833***\"},\"icon_url\":\"\n\nhttps://example.com/icon/workflow_123.png\n\n\",\"created_at\":1700000000,\"updated_at\":\"1701234567\",\"description\":\"工作流测试\",\"workflow_id\":\"73505836754923***\",\"workflow_name\":\"workflow_example\"}\n\n​\n\n工作流的详细信息。\n\n​\n\n​\n\nOpenAPIWorkflowInput\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nparameters\n\n​\n\nJSON Map\n\n​\n\n{ \"CONVERSATION_NAME\": { \"required\": false, \"description\": \"\", \"default_value\": \"\", \"type\": \"string\" }}\n\n​\n\n开始节点的输入参数结构体。\n\n​\n\n​\n\nParameters\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ntype\n\n​\n\nString\n\n​\n\nstring\n\n​\n\n该参数的类型。\n\n​\n\nitems\n\n​\n\nObject of\n\nOpenAPIParameter\n\n​\n\n{\"type\":\"image\"}\n\n​\n\n当参数类型为\n\narray\n\n时，该字段用于定义数组元素的子类型。\n\n​\n\nrequired\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n标识输入参数是否为必填项。\n\n​\n\ntrue\n\n：该参数为必填项。\n\n​\n\nfalse\n\n：该参数为可选项。\n\n​\n\nproperties\n\n​\n\nJSON Map\n\n​\n\n{ \"arr_obj_num\": { \"required\": false, \"type\": \"number\" } }\n\n​\n\n当参数类型为\n\nobject\n\n时，该字段用于定义对象类型的子参数信息，采用键值对（key-value）结构，其中 key 为子参数的名称，value 为该子参数的定义信息（包含类型、是否必填等属性）。\n\n​\n\ndescription\n\n​\n\nString\n\n​\n\n上传的图片。\n\n​\n\n该参数的描述信息。\n\n​\n\ndefault_value\n\n​\n\nString\n\n​\n\n-\n\n​\n\n该参数配置的默认值。\n\n​\n\n​\n\nOpenAPIWorkflowOutput\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncontent\n\n​\n\nString\n\n​\n\n数量为{{arr_obj_num}}\n\n​\n\n工作流结束节点返回文本时，智能体回复内容的结构。仅当\n\nterminate_plan\n\n为\n\nuse_answer_content\n\n时会返回。\n\n​\n\nparameters\n\n​\n\nJSON Map\n\n​\n\n{ \"output\": { \"type\": \"string\" } }\n\n​\n\n工作流结束节点输出变量的数组。以键值对形式存储，格式为\n\n{ \"变量名称\": { \"type\": \"变量类型\" } }\n\n。\n\n​\n\nterminate_plan\n\n​\n\nString\n\n​\n\nreturn_variables\n\n​\n\n结束节点的返回类型，枚举值：\n\n​\n\nreturn_variables\n\n：返回变量。\n\n​\n\nuse_answer_content\n\n：返回文本。\n\n​\n\n​\n\nOpenAPIWorkflowBasic\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\napp_id\n\n​\n\nString\n\n​\n\n744208683**\n\n​\n\n工作流关联的应用 ID。若工作流未关联任何应用，则该字段值为\n\n0\n\n。\n\ncreator\n\n​\n\nObject of\n\nOpenAPIUserInfo\n\n​\n\n{\"id\":\"2478774393***\",\"name\":\"user41833***\"}\n\n​\n\n工作流创建者的信息，包含创建者的用户 ID 和用户名。\n\nicon_url\n\n​\n\nString\n\n​\n\nhttps://example.com/icon/workflow_123.png\n\n​\n\n工作流图标的 URL 地址。\n\n​\n\ncreated_at\n\n​\n\nString\n\n​\n\n1752060786\n\n​\n\n工作流的创建时间，以 Unix 时间戳表示，单位为秒。\n\nupdated_at\n\n​\n\nString\n\n​\n\n1752060827\n\n​\n\n工作流的最后更新时间，以 Unix 时间戳表示，单位为秒。\n\ndescription\n\n​\n\nString\n\n​\n\n生成音乐的工作流\n\n​\n\n工作流的描述。\n\n​\n\nworkflow_id\n\n​\n\nString\n\n​\n\n73505836754923***\n\n​\n\n工作流 ID。\n\n​\n\nworkflow_name\n\n​\n\nString\n\n​\n\nworkflow_example\n\n​\n\n工作流名称。\n\n​\n\n​\n\nOpenAPIUserInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n2478774393***\n\n​\n\n工作流创建者的扣子用户 UID。\n\n​\n\nname\n\n​\n\nString\n\n​\n\nuser41833***\n\n​\n\n工作流创建者的扣子用户名。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request GET 'https\n\n:\n\n//api.coze.cn/v1/workflows/7493*****453978?include_input_output=true' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_h******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"workflow_detail\"\n\n:\n\n{\n\n​\n\n\"workflow_name\"\n\n:\n\n\"workflow_image\"\n\n,\n\n​\n\n\"app_id\"\n\n:\n\n\"7493481****8294\"\n\n,\n\n​\n\n\"creator\"\n\n:\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"44246792*****\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"张三\"\n\n​\n\n},\n\n​\n\n\"updated_at\"\n\n:\n\n1747983675\n\n,\n\n​\n\n\"workflow_id\"\n\n:\n\n\"750712******91219\"\n\n,\n\n​\n\n\"description\"\n\n:\n\n\"统计图片数量\"\n\n,\n\n​\n\n\"icon_url\"\n\n:\n\n\"https://*****pi.com/ocean-cloud-tos/plugin_icon/chatflow-icon.png?****\"\n\n,\n\n​\n\n\"created_at\"\n\n:\n\n1747888248\n\n​\n\n},\n\n​\n\n\"input\"\n\n:\n\n{\n\n​\n\n\"parameters\"\n\n:\n\n{\n\n​\n\n\"CONVERSATION_NAME\"\n\n:\n\n{\n\n​\n\n\"required\"\n\n:\n\nfalse\n\n,\n\n​\n\n\"description\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"default_value\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"string\"\n\n​\n\n},\n\n​\n\n\"USER_INPUT\"\n\n:\n\n{\n\n​\n\n\"type\"\n\n:\n\n\"string\"\n\n,\n\n​\n\n\"required\"\n\n:\n\nfalse\n\n​\n\n}\n\n​\n\n}\n\n​\n\n},\n\n​\n\n\"output\"\n\n:\n\n{\n\n​\n\n\"parameters\"\n\n:\n\n{\n\n​\n\n\"arr_obj_num\"\n\n:\n\n{\n\n​\n\n\"type\"\n\n:\n\n\"number\"\n\n​\n\n}\n\n​\n\n},\n\n​\n\n\"terminate_plan\"\n\n:\n\n\"use_answer_content\"\n\n,\n\n​\n\n\"content\"\n\n:\n\n\"数量为{{arr_obj_num}}\"\n\n​\n\n}\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"2025071621341*******4D\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n查询工作流列表\n\n下一篇\n\n查询工作流的版本列表",
        "links": []
      },
      "markdown": "| 请求方式​ | GET​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/workflows/:workflow_id​​ |\n| 权限​ | getMetaData​确保调用该接口使用的访问令牌开通了getMetaData权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 查询工作流基本信息。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| workflow_id​ | String​ | 必选​ | 73505836754923***​ | 工作流 ID。​进入工作流编排页面，在页面 URL 中，workflow 参数后的数字就是 Workflow ID。例如https://www.coze.com/work_flow?space_id=42463***&workflow_id=73505836754923***，Workflow ID 为 73505836754923***。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| include_input_output​ | Boolean​ | 可选​ | true​ | 是否在返回结果中返回输入和输出参数的结构体。​true：返回输入输出参数结构体​false：不返回输入输出参数结构体​默认值为false。​ |\n\n- true ：返回输入输出参数结构体 ​\n\n- false ：不返回输入输出参数结构体 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| data​ | Object ofWorkflowInfo​ | \\​ | 工作流的详细信息。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含本次请求的日志信息，用于问题排查和技术支持。 |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| input​ | Object ofOpenAPIWorkflowInput​ | \\​ | 工作流开始节点的输入参数的结构体。​ |\n| output​ | Object ofOpenAPIWorkflowOutput​ | { \"parameters\": { \"arr_obj_num\": { \"required\": false, \"type\": \"number\" } }, \"terminate_plan\": \"use_answer_content\", \"content\": \"输出为{{output}}\" }​ | 工作流结束节点的输出参数的结构体。​ |\n| workflow_detail​ | Object ofOpenAPIWorkflowBasic​ | {\"app_id\":\"744208683**\",\"creator\":{\"id\":\"2478774393***\",\"name\":\"user41833***\"},\"icon_url\":\"https://example.com/icon/workflow_123.png\",\"created_at\":1700000000,\"updated_at\":\"1701234567\",\"description\":\"工作流测试\",\"workflow_id\":\"73505836754923***\",\"workflow_name\":\"workflow_example\"}​ | 工作流的详细信息。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| parameters​ | JSON Map​ | { \"CONVERSATION_NAME\": { \"required\": false, \"description\": \"\", \"default_value\": \"\", \"type\": \"string\" }}​ | 开始节点的输入参数结构体。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| type​ | String​ | string​ | 该参数的类型。​ |\n| items​ | Object ofOpenAPIParameter​ | {\"type\":\"image\"}​ | 当参数类型为array时，该字段用于定义数组元素的子类型。​ |\n| required​ | Boolean​ | true​ | 标识输入参数是否为必填项。​true：该参数为必填项。​false：该参数为可选项。​ |\n| properties​ | JSON Map​ | { \"arr_obj_num\": { \"required\": false, \"type\": \"number\" } }​ | 当参数类型为object时，该字段用于定义对象类型的子参数信息，采用键值对（key-value）结构，其中 key 为子参数的名称，value 为该子参数的定义信息（包含类型、是否必填等属性）。​ |\n| description​ | String​ | 上传的图片。​ | 该参数的描述信息。​ |\n| default_value​ | String​ | -​ | 该参数配置的默认值。​ |\n\n- true ：该参数为必填项。 ​\n\n- false ：该参数为可选项。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| content​ | String​ | 数量为{{arr_obj_num}}​ | 工作流结束节点返回文本时，智能体回复内容的结构。仅当terminate_plan为use_answer_content时会返回。​ |\n| parameters​ | JSON Map​ | { \"output\": { \"type\": \"string\" } }​ | 工作流结束节点输出变量的数组。以键值对形式存储，格式为{ \"变量名称\": { \"type\": \"变量类型\" } }。​ |\n| terminate_plan​ | String​ | return_variables​ | 结束节点的返回类型，枚举值：​return_variables：返回变量。​use_answer_content：返回文本。​ |\n\n- return_variables ：返回变量。 ​\n\n- use_answer_content ：返回文本。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| app_id​ | String​ | 744208683**​ | 工作流关联的应用 ID。若工作流未关联任何应用，则该字段值为0。 |\n| creator​ | Object ofOpenAPIUserInfo​ | {\"id\":\"2478774393***\",\"name\":\"user41833***\"}​ | 工作流创建者的信息，包含创建者的用户 ID 和用户名。 |\n| icon_url​ | String​ | https://example.com/icon/workflow_123.png​ | 工作流图标的 URL 地址。​ |\n| created_at​ | String​ | 1752060786​ | 工作流的创建时间，以 Unix 时间戳表示，单位为秒。 |\n| updated_at​ | String​ | 1752060827​ | 工作流的最后更新时间，以 Unix 时间戳表示，单位为秒。 |\n| description​ | String​ | 生成音乐的工作流​ | 工作流的描述。​ |\n| workflow_id​ | String​ | 73505836754923***​ | 工作流 ID。​ |\n| workflow_name​ | String​ | workflow_example​ | 工作流名称。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 2478774393***​ | 工作流创建者的扣子用户 UID。​ |\n| name​ | String​ | user41833***​ | 工作流创建者的扣子用户名。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/list_workflow_version",
      "title": "查询工作流的版本列表",
      "content": {
        "sections": [],
        "full_text": "查询工作流的版本列表\n\n查询工作流的版本列表。\n\n​\n\n你可以通过本 API 查询某个工作流的所有历史版本记录，包括版本号、版本描述、操作者和发布时间等。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/workflows/:workflow_id/versions\n\n​\n\n​\n\n权限\n\n​\n\nlistVersion\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nlistVersion\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n查询工作流的版本列表。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nworkflow_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n73505836754923***\n\n​\n\n待查询的 Workflow ID。\n\n​\n\n进入 Workflow 编排页面，在页面 URL 中，workflow 参数后的数字就是 Workflow ID。例如\n\nhttps://www.coze.com/work_flow?space_id=42463***&workflow_id=73505836754923***\n\n，Workflow ID 为 73505836754923***。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\npublish_status\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nall\n\n​\n\n工作流的发布状态，用于筛选不同发布状态的版本。枚举值：\n\n​\n\nall ：所有状态。\n\n​\n\npublished_online ：（默认值）已发布的正式版。\n\n​\n\nunpublished_draft ：草稿状态。\n\n​\n\npage_size\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n20\n\n​\n\n查询结果分页展示时，此参数用于设置每页返回的数据量。取值范围为 1 ~ 30，默认为 10。\n\n​\n\npage_token\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n1752666079000\n\n​\n\n分页查询时的翻页标识，表示下一页的起始位置。默认为\n\n\"\"\n\n，即从第一页数据开始返回。如果要查询下一页，需要使用上一次返回的\n\nnext_page_token\n\n作为这次请求的入参。\n\n​\n\ninclude_input_output\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\ntrue\n\n​\n\n是否在返回结果中返回输入和输出参数的结构体。\n\n​\n\ntrue\n\n：返回输入输出参数结构体\n\n​\n\nfalse\n\n：不返回输入输出参数结构体\n\n​\n\n默认值为\n\nfalse\n\n。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nObject of\n\nOpenAPIListVersionData\n\n​\n\n{\"items\":[{\"creator\":{\"id\":\"2478774393***\",\"name\":\"user41833***\"},\"version\":\"v1.0.0\",\"created_at\":\"1700000000\",\"updated_at\":\"1701234567\",\"description\":\"工作流测试\",\"workflow_id\":\"73505836754923***\"}],\"has_more\":false,\"next_page_token\":\"73505836754923***\"}\n\n​\n\n包含工作流列表及其相关信息的对象，用于返回查询结果。\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\nOpenAPIListVersionData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nitems\n\n​\n\nArray of\n\nOpenAPIVersionMetaInfo\n\n​\n\n\\\n\n​\n\n工作流的历史版本列表。\n\n​\n\nhas_more\n\n​\n\nBoolean\n\n​\n\nfalse\n\n​\n\n标识当前返回的版本列表是否还有更多数据未返回。\n\n​\n\ntrue\n\n：还有更多未返回的回调应用。\n\n​\n\nfalse\n\n：已返回所有数据。\n\n​\n\nnext_page_token\n\n​\n\nString\n\n​\n\n73505836754923***\n\n​\n\n翻页标识，表示下一页的起始位置。当\n\nhas_more\n\n为\n\ntrue\n\n时，表示还有更多数据未返回，可以通过此令牌获取下一页数据。首次请求不填或置空，后续翻页需使用上一次返回的\n\nnext_page_token\n\n。\n\n​\n\n​\n\nOpenAPIVersionMetaInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ninput\n\n​\n\nObject of\n\nOpenAPIWorkflowInput\n\n​\n\n{ \"parameters\": { \"USER_INPUT\": { \"type\": \"string\", \"required\": false }, \"CONVERSATION_NAME\": { \"type\": \"string\", \"required\": false, \"description\": \"\", \"default_value\": \"\" } } }\n\n​\n\n工作流开始节点的输入参数的结构体。\n\n​\n\noutput\n\n​\n\nObject of\n\nOpenAPIWorkflowOutput\n\n​\n\n{ \"parameters\": { \"arr_obj_num\": { \"required\": false, \"type\": \"number\" } }, \"terminate_plan\": \"use_answer_content\", \"content\": \"输出为{{output}}\" }\n\n​\n\n工作流结束节点的输出参数的结构体。\n\n​\n\ncreator\n\n​\n\nObject of\n\nOpenAPIUserInfo\n\n​\n\n{\"id\":\"2478774393***\",\"name\":\"user41833***\"}\n\n​\n\n工作流操作者的信息，包含操作者的用户 UID 和用户名。\n\n​\n\nversion\n\n​\n\nString\n\n​\n\nv0.0.2\n\n​\n\n工作流的版本号，用于标识工作流的不同版本。\n\ncreated_at\n\n​\n\nString\n\n​\n\n1700000000\n\n​\n\n工作流的创建时间，以 Unix 时间戳表示，单位为秒。\n\nupdated_at\n\n​\n\nString\n\n​\n\n1701234567\n\n​\n\n工作流的最后更新时间，以 Unix 时间戳表示，单位为秒。\n\ndescription\n\n​\n\nString\n\n​\n\n工作流测试\n\n​\n\n工作流的描述。\n\n​\n\nworkflow_id\n\n​\n\nString\n\n​\n\n73505836754923***\n\n​\n\n工作流 ID。\n\n​\n\n​\n\nOpenAPIWorkflowInput\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nparameters\n\n​\n\nJSON Map\n\n​\n\n{ \"CONVERSATION_NAME\": { \"required\": false, \"description\": \"\", \"default_value\": \"\", \"type\": \"string\" }}\n\n​\n\n开始节点的输入参数结构体。\n\n​\n\n​\n\nParameters\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ntype\n\n​\n\nString\n\n​\n\nstring\n\n​\n\n该参数的类型。\n\n​\n\nitems\n\n​\n\nObject of\n\nOpenAPIParameter\n\n​\n\n{\"type\":\"image\"}\n\n​\n\n当参数类型为\n\narray\n\n时，该字段用于定义数组元素的子类型。\n\n​\n\nrequired\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n标识输入参数是否为必填项。\n\n​\n\ntrue\n\n：该参数为必填项。\n\n​\n\nfalse\n\n：该参数为可选项。\n\n​\n\nproperties\n\n​\n\nJSON Map\n\n​\n\n{ \"arr_obj_num\": { \"required\": false, \"type\": \"number\" } }\n\n​\n\n当参数类型为\n\nobject\n\n时，该字段用于定义对象类型的子参数信息，采用键值对（key-value）结构，其中 key 为子参数的名称，value 为该子参数的定义信息（包含类型、是否必填等属性）。\n\n​\n\ndescription\n\n​\n\nString\n\n​\n\n上传的图片。\n\n​\n\n该参数的描述信息。\n\n​\n\ndefault_value\n\n​\n\nString\n\n​\n\n-\n\n​\n\n该参数配置的默认值。\n\n​\n\n​\n\nOpenAPIWorkflowOutput\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncontent\n\n​\n\nString\n\n​\n\n数量为{{arr_obj_num}}\n\n​\n\n工作流结束节点返回文本时，智能体回复内容的结构。仅当\n\nterminate_plan\n\n为\n\nuse_answer_content\n\n时会返回。\n\n​\n\nparameters\n\n​\n\nJSON Map\n\n​\n\n{ \"output\": { \"type\": \"string\" } }\n\n​\n\n工作流结束节点输出变量的数组。以键值对形式存储，格式为\n\n{ \"变量名称\": { \"type\": \"变量类型\" } }\n\n。\n\n​\n\nterminate_plan\n\n​\n\nString\n\n​\n\nreturn_variables\n\n​\n\n结束节点的返回类型，枚举值：\n\n​\n\nreturn_variables\n\n：返回变量。\n\n​\n\nuse_answer_content\n\n：返回文本。\n\n​\n\n​\n\nOpenAPIUserInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n2478774393***\n\n​\n\n工作流操作者的扣子用户 UID。\n\n​\n\nname\n\n​\n\nString\n\n​\n\nuser41833***\n\n​\n\n工作流操作者的扣子用户名。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request GET  'https\n\n:\n\n//api.coze.cn/v1/workflows/74800714******84300/versions?page_size=1&page_token=175266607***0&include_input_output=true' \\\n\n​\n\n--header 'authorization\n\n:\n\nBearer pat_A*******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"has_more\"\n\n:\n\nfalse\n\n,\n\n​\n\n\"next_page_token\"\n\n:\n\n\"17552****000\"\n\n,\n\n​\n\n\"items\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"workflow_id\"\n\n:\n\n\"7538347*****8076\"\n\n,\n\n​\n\n\"version\"\n\n:\n\n\"v0.0.1\"\n\n,\n\n​\n\n\"description\"\n\n:\n\n\"统计图片数量\"\n\n,\n\n​\n\n\"created_at\"\n\n:\n\n\"1755251584\"\n\n,\n\n​\n\n\"updated_at\"\n\n:\n\n\"1755****12\"\n\n,\n\n​\n\n\"creator\"\n\n:\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"3361****58211\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"张三\"\n\n​\n\n},\n\n​\n\n\"input\"\n\n:\n\n{\n\n​\n\n\"parameters\"\n\n:\n\n{\n\n​\n\n\"USER_INPUT\"\n\n:\n\n{\n\n​\n\n\"type\"\n\n:\n\n\"string\"\n\n,\n\n​\n\n\"required\"\n\n:\n\nfalse\n\n​\n\n},\n\n​\n\n\"CONVERSATION_NAME\"\n\n:\n\n{\n\n​\n\n\"type\"\n\n:\n\n\"string\"\n\n,\n\n​\n\n\"required\"\n\n:\n\nfalse\n\n,\n\n​\n\n\"description\"\n\n:\n\n\"本次请求绑定的会话，会自动写入消息、会从该会话读对话历史。\"\n\n,\n\n​\n\n\"default_value\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n},\n\n​\n\n\"output\"\n\n:\n\n{\n\n​\n\n\"terminate_plan\"\n\n:\n\n\"use_answer_content\"\n\n,\n\n​\n\n\"content\"\n\n:\n\n\"数量为{{obj_num}}\"\n\n,\n\n​\n\n\"parameters\"\n\n:\n\n{\n\n​\n\n\"obj_num\"\n\n:\n\n{\n\n​\n\n\"type\"\n\n:\n\n\"number\"\n\n,\n\n​\n\n\"required\"\n\n:\n\nfalse\n\n​\n\n}\n\n​\n\n}\n\n​\n\n}\n\n​\n\n}\n\n​\n\n]\n\n​\n\n},\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"202508221521****5C3B159FCD2\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n查询工作流基本信息\n\n下一篇\n\n开启或关闭工作流多人协作",
        "links": []
      },
      "markdown": "| 请求方式​ | GET​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/workflows/:workflow_id/versions​​ |\n| 权限​ | listVersion​确保调用该接口使用的访问令牌开通了listVersion权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 查询工作流的版本列表。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| workflow_id​ | String​ | 必选​ | 73505836754923***​ | 待查询的 Workflow ID。​进入 Workflow 编排页面，在页面 URL 中，workflow 参数后的数字就是 Workflow ID。例如https://www.coze.com/work_flow?space_id=42463***&workflow_id=73505836754923***，Workflow ID 为 73505836754923***。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| publish_status​ | String​ | 可选​ | all​ | 工作流的发布状态，用于筛选不同发布状态的版本。枚举值：​all ：所有状态。​published_online ：（默认值）已发布的正式版。​unpublished_draft ：草稿状态。​ |\n| page_size​ | Integer​ | 可选​ | 20​ | 查询结果分页展示时，此参数用于设置每页返回的数据量。取值范围为 1 ~ 30，默认为 10。​ |\n| page_token​ | String​ | 可选​ | 1752666079000​ | 分页查询时的翻页标识，表示下一页的起始位置。默认为\"\"，即从第一页数据开始返回。如果要查询下一页，需要使用上一次返回的next_page_token作为这次请求的入参。​ |\n| include_input_output​ | Boolean​ | 可选​ | true​ | 是否在返回结果中返回输入和输出参数的结构体。​true：返回输入输出参数结构体​false：不返回输入输出参数结构体​默认值为false。​ |\n\n- all ：所有状态。 ​\n\n- published_online ：（默认值）已发布的正式版。 ​\n\n- unpublished_draft ：草稿状态。 ​\n\n- true ：返回输入输出参数结构体 ​\n\n- false ：不返回输入输出参数结构体 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | Object ofOpenAPIListVersionData​ | {\"items\":[{\"creator\":{\"id\":\"2478774393***\",\"name\":\"user41833***\"},\"version\":\"v1.0.0\",\"created_at\":\"1700000000\",\"updated_at\":\"1701234567\",\"description\":\"工作流测试\",\"workflow_id\":\"73505836754923***\"}],\"has_more\":false,\"next_page_token\":\"73505836754923***\"}​ | 包含工作流列表及其相关信息的对象，用于返回查询结果。 |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。 |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| items​ | Array ofOpenAPIVersionMetaInfo​ | \\​ | 工作流的历史版本列表。​ |\n| has_more​ | Boolean​ | false​ | 标识当前返回的版本列表是否还有更多数据未返回。​true：还有更多未返回的回调应用。​false：已返回所有数据。​ |\n| next_page_token​ | String​ | 73505836754923***​ | 翻页标识，表示下一页的起始位置。当has_more为true时，表示还有更多数据未返回，可以通过此令牌获取下一页数据。首次请求不填或置空，后续翻页需使用上一次返回的next_page_token。​ |\n\n- true ：还有更多未返回的回调应用。 ​\n\n- false ：已返回所有数据。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| input​ | Object ofOpenAPIWorkflowInput​ | { \"parameters\": { \"USER_INPUT\": { \"type\": \"string\", \"required\": false }, \"CONVERSATION_NAME\": { \"type\": \"string\", \"required\": false, \"description\": \"\", \"default_value\": \"\" } } }​ | 工作流开始节点的输入参数的结构体。​ |\n| output​ | Object ofOpenAPIWorkflowOutput​ | { \"parameters\": { \"arr_obj_num\": { \"required\": false, \"type\": \"number\" } }, \"terminate_plan\": \"use_answer_content\", \"content\": \"输出为{{output}}\" }​ | 工作流结束节点的输出参数的结构体。​ |\n| creator​ | Object ofOpenAPIUserInfo​ | {\"id\":\"2478774393***\",\"name\":\"user41833***\"}​ | 工作流操作者的信息，包含操作者的用户 UID 和用户名。​ |\n| version​ | String​ | v0.0.2​ | 工作流的版本号，用于标识工作流的不同版本。 |\n| created_at​ | String​ | 1700000000​ | 工作流的创建时间，以 Unix 时间戳表示，单位为秒。 |\n| updated_at​ | String​ | 1701234567​ | 工作流的最后更新时间，以 Unix 时间戳表示，单位为秒。 |\n| description​ | String​ | 工作流测试​ | 工作流的描述。​ |\n| workflow_id​ | String​ | 73505836754923***​ | 工作流 ID。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| parameters​ | JSON Map​ | { \"CONVERSATION_NAME\": { \"required\": false, \"description\": \"\", \"default_value\": \"\", \"type\": \"string\" }}​ | 开始节点的输入参数结构体。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| type​ | String​ | string​ | 该参数的类型。​ |\n| items​ | Object ofOpenAPIParameter​ | {\"type\":\"image\"}​ | 当参数类型为array时，该字段用于定义数组元素的子类型。​ |\n| required​ | Boolean​ | true​ | 标识输入参数是否为必填项。​true：该参数为必填项。​false：该参数为可选项。​ |\n| properties​ | JSON Map​ | { \"arr_obj_num\": { \"required\": false, \"type\": \"number\" } }​ | 当参数类型为object时，该字段用于定义对象类型的子参数信息，采用键值对（key-value）结构，其中 key 为子参数的名称，value 为该子参数的定义信息（包含类型、是否必填等属性）。​ |\n| description​ | String​ | 上传的图片。​ | 该参数的描述信息。​ |\n| default_value​ | String​ | -​ | 该参数配置的默认值。​ |\n\n- true ：该参数为必填项。 ​\n\n- false ：该参数为可选项。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| content​ | String​ | 数量为{{arr_obj_num}}​ | 工作流结束节点返回文本时，智能体回复内容的结构。仅当terminate_plan为use_answer_content时会返回。​ |\n| parameters​ | JSON Map​ | { \"output\": { \"type\": \"string\" } }​ | 工作流结束节点输出变量的数组。以键值对形式存储，格式为{ \"变量名称\": { \"type\": \"变量类型\" } }。​ |\n| terminate_plan​ | String​ | return_variables​ | 结束节点的返回类型，枚举值：​return_variables：返回变量。​use_answer_content：返回文本。​ |\n\n- return_variables ：返回变量。 ​\n\n- use_answer_content ：返回文本。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 2478774393***​ | 工作流操作者的扣子用户 UID。​ |\n| name​ | String​ | user41833***​ | 工作流操作者的扣子用户名。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/switch_workflow_develop_mode",
      "title": "开启或关闭工作流多人协作",
      "content": {
        "sections": [],
        "full_text": "开启或关闭工作流多人协作\n\n开启或关闭工作流、对话流多人协作。\n\n​\n\n开启多人协作后，你才能调用\n\n添加工作流的协作者\n\nAPI 为工作流添加协作者。\n\n​\n\n接口限制\n\n​\n\n套餐限制\n\n：扣子企业版（企业标准版、企业旗舰版）。\n\n​\n\n只有资源库中的工作流和对话流支持添加多人协作，扣子应用中的工作流不支持开启多人协作模式，否则会报 4000 错误。\n\n​\n\n不支持渠道类型 OAuth 应用。使用 OAuth JWT 应用和服务访问令牌时，只需要有对应权限点即可。其余认证方式，只有\n\n工作流所有者\n\n能开启或关闭工作流的多人协作模式。\n\n​\n\n关闭工作流多人协作前，需要先调用\n\n删除工作流协作者\n\nAPI 删除所有协作者。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/workflows/:workflow_id/collaboration_mode\n\n​\n\n​\n\n权限\n\n​\n\nWorkflow.switchDevelopMode\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nWorkflow.switchDevelopMode\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n开启或关闭工作流多人协作。\n\n​\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nworkflow_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n73505836754923***\n\n​\n\n需要设置协作模式的工作流 ID。\n\n​\n\n进入工作流编排页面，在页面 URL 中，workflow 参数后的数字就是 Workflow ID。例如\n\nhttps://www.coze.com/work_flow?space_id=42463***&workflow_id=73505836754923***\n\n，Workflow ID 为\n\n73505836754923***\n\n。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncollaboration_mode\n\n​\n\nString\n\n​\n\n可选\n\n​\n\ncollaboration\n\n​\n\n工作流的协作模式，枚举值：\n\n​\n\nsingle\n\n：单用户模式。\n\n​\n\ncollaboration\n\n：多人协作模式。\n\n​\n\n说明\n\n如需将工作流多人协作模式变更为单用户模式，需要先调用\n\n删除工作流协作者\n\nAPI 删除所有协作者。\n\n​\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含本次请求的日志信息，用于问题排查和技术支持。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/workflows/73505836754923***/collaboration_mode' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_Osa******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"collaboration_mode\"\n\n:\n\n\"collaboration\"\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n查询工作流的版本列表\n\n下一篇\n\n添加工作流协作者",
        "links": []
      },
      "markdown": "- 套餐限制 ：扣子企业版（企业标准版、企业旗舰版）。 ​\n\n- 只有资源库中的工作流和对话流支持添加多人协作，扣子应用中的工作流不支持开启多人协作模式，否则会报 4000 错误。 ​\n\n- 不支持渠道类型 OAuth 应用。使用 OAuth JWT 应用和服务访问令牌时，只需要有对应权限点即可。其余认证方式，只有 工作流所有者 能开启或关闭工作流的多人协作模式。 ​\n\n- 关闭工作流多人协作前，需要先调用 删除工作流协作者 API 删除所有协作者。 ​\n\n| 请求方式​ | POST​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/workflows/:workflow_id/collaboration_mode​​ |\n| 权限​ | Workflow.switchDevelopMode​确保调用该接口使用的访问令牌开通了Workflow.switchDevelopMode权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 开启或关闭工作流多人协作。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| workflow_id​ | String​ | 可选​ | 73505836754923***​ | 需要设置协作模式的工作流 ID。​进入工作流编排页面，在页面 URL 中，workflow 参数后的数字就是 Workflow ID。例如https://www.coze.com/work_flow?space_id=42463***&workflow_id=73505836754923***，Workflow ID 为73505836754923***。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| collaboration_mode​ | String​ | 可选​ | collaboration​ | 工作流的协作模式，枚举值：​single：单用户模式。​collaboration：多人协作模式。​说明如需将工作流多人协作模式变更为单用户模式，需要先调用删除工作流协作者API 删除所有协作者。​​ |\n\n- single ：单用户模式。 ​\n\n- collaboration ：多人协作模式。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含本次请求的日志信息，用于问题排查和技术支持。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/add_workflow_collaborator",
      "title": "添加工作流协作者",
      "content": {
        "sections": [],
        "full_text": "添加工作流协作者\n\n添加工作流协作者。\n\n​\n\n接口限制\n\n​\n\n套餐限制：扣子企业版（企业标准版、企业旗舰版）。\n\n​\n\n每次请求只能添加一位协作者。如需添加多位，请依次发送请求。\n\n​\n\n协作者只能是该工作空间的成员。\n\n​\n\n主账号内的所有子账号共享同一 API 的流控额度，单个 API 的流控限制为 5 QPS。\n\n​\n\n不支持渠道类型 OAuth 应用。使用 OAuth JWT 应用和服务访问令牌时，只需要有对应权限点即可。其余认证方式，只有\n\n工作流的所有者和协作者\n\n有权添加。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/workflows/:workflow_id/collaborators\n\n​\n\n​\n\n权限\n\n​\n\nWorkflow.addCollaborator\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nBot.addCollaborator\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n添加工作流协作者。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nworkflow_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n73505836754923***\n\n​\n\n需要添加协作者的工作流 ID。\n\n​\n\n进入工作流编排页面，在页面 URL 中，\n\nworkflow\n\n参数后的数字就是 Workflow ID。例如\n\nhttps://www.coze.com/work_flow?space_id=42463***&workflow_id=73505836754923***\n\n，Workflow ID 为\n\n73505836754923***\n\n。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncollaborators\n\n​\n\nArray of\n\nCollaboratorAddData\n\n​\n\n必选\n\n​\n\n[{\"user_id\":\"411479148551****\"}]\n\n​\n\n工作流资源协作者列表。单次最多添加\n\n1\n\n个协作者。\n\n​\n\n​\n\nCollaboratorAddData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nuser_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n411479148551****\n\n​\n\n协作者的扣子用户 UID。你只能添加对应工作空间中的成员作为协作者。\n\n​\n\n在扣子编程平台左下角单击头像，选择\n\n账号设置\n\n，查看账号的 UID。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/workflows/73505836754923***/collaborators' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_hfwkehfncaf****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"collaborators\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"user_id\"\n\n:\n\n\"411479148551****\"\n\n​\n\n}\n\n​\n\n]\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n开启或关闭工作流多人协作\n\n下一篇\n\n删除工作流协作者",
        "links": []
      },
      "markdown": "- 套餐限制：扣子企业版（企业标准版、企业旗舰版）。 ​\n\n- 每次请求只能添加一位协作者。如需添加多位，请依次发送请求。 ​\n\n- 协作者只能是该工作空间的成员。 ​\n\n- 主账号内的所有子账号共享同一 API 的流控额度，单个 API 的流控限制为 5 QPS。 ​\n\n- 不支持渠道类型 OAuth 应用。使用 OAuth JWT 应用和服务访问令牌时，只需要有对应权限点即可。其余认证方式，只有 工作流的所有者和协作者 有权添加。 ​\n\n| 请求方式​ | POST​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/workflows/:workflow_id/collaborators​​ |\n| 权限​ | Workflow.addCollaborator​确保调用该接口使用的访问令牌开通了Bot.addCollaborator权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 添加工作流协作者。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| workflow_id​ | String​ | 必选​ | 73505836754923***​ | 需要添加协作者的工作流 ID。​进入工作流编排页面，在页面 URL 中，workflow参数后的数字就是 Workflow ID。例如https://www.coze.com/work_flow?space_id=42463***&workflow_id=73505836754923***，Workflow ID 为73505836754923***。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| collaborators​ | Array ofCollaboratorAddData​ | 必选​ | [{\"user_id\":\"411479148551****\"}]​ | 工作流资源协作者列表。单次最多添加1个协作者。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| user_id​ | String​ | 必选​ | 411479148551****​ | 协作者的扣子用户 UID。你只能添加对应工作空间中的成员作为协作者。​在扣子编程平台左下角单击头像，选择账号设置，查看账号的 UID。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/remove_workflow_collaborator",
      "title": "删除工作流协作者",
      "content": {
        "sections": [],
        "full_text": "删除工作流协作者\n\n删除工作流协作者。\n\n​\n\n接口限制\n\n​\n\n每次请求只能删除一位协助者。如需删除多位，请依次发送请求。\n\n​\n\n主账号内的所有子账号共享同一 API 的流控额度，单个 API 的流控限制为 5 QPS。\n\n​\n\n不支持渠道类型 OAuth 应用。使用 OAuth JWT 应用和服务访问令牌时，只需要有对应权限点即可。其余认证方式，只有\n\n工作流的所有者和协作者\n\n有权删除。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nDELETE\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/workflows/:workflow_id/collaborators/:user_id\n\n​\n\n​\n\n权限\n\n​\n\nWorkflow.removeCollaborator\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nWorkflow.removeCollaborator\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n删除工作流协作者。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nworkflow_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n73505836754923***\n\n​\n\n需要删除协作者的工作流 ID。\n\n​\n\n进入工作流编排页面，在页面 URL 中，\n\nworkflow\n\n参数后的数字就是 Workflow ID。例如\n\nhttps://www.coze.com/work_flow?space_id=42463***&workflow_id=73505836754923***\n\n，Workflow ID 为\n\n73505836754923***\n\n。\n\n​\n\nuser_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n411479148551****\n\n​\n\n待删除的协作者的扣子用户 UID。\n\n​\n\n在扣子编程平台左下角单击头像，选择\n\n账号设置\n\n，查看账号的 UID。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request DELETE 'https\n\n:\n\n//api.coze.cn/v1/workflows/73505836754923***/collaborators/411479148551****' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_Osa******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n添加工作流协作者\n\n下一篇\n\n上传文件",
        "links": []
      },
      "markdown": "- 每次请求只能删除一位协助者。如需删除多位，请依次发送请求。 ​\n\n- 主账号内的所有子账号共享同一 API 的流控额度，单个 API 的流控限制为 5 QPS。 ​\n\n- 不支持渠道类型 OAuth 应用。使用 OAuth JWT 应用和服务访问令牌时，只需要有对应权限点即可。其余认证方式，只有 工作流的所有者和协作者 有权删除。 ​\n\n| 请求方式​ | DELETE​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/workflows/:workflow_id/collaborators/:user_id​​ |\n| 权限​ | Workflow.removeCollaborator​确保调用该接口使用的访问令牌开通了Workflow.removeCollaborator权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 删除工作流协作者。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| workflow_id​ | String​ | 必选​ | 73505836754923***​ | 需要删除协作者的工作流 ID。​进入工作流编排页面，在页面 URL 中，workflow参数后的数字就是 Workflow ID。例如https://www.coze.com/work_flow?space_id=42463***&workflow_id=73505836754923***，Workflow ID 为73505836754923***。​ |\n| user_id​ | String​ | 必选​ | 411479148551****​ | 待删除的协作者的扣子用户 UID。​在扣子编程平台左下角单击头像，选择账号设置，查看账号的 UID。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/upload_files",
      "title": "上传文件",
      "content": {
        "sections": [],
        "full_text": "上传文件\n\n调用接口上传文件到扣子编程。\n\n​\n\n接口说明\n\n​\n\n消息中无法直接使用本地文件，创建消息或对话前，需要先调用此接口上传本地文件到扣子编程。上传文件后，你可以在消息中通过指定 file_id 的方式在多模态内容中直接使用此文件。此接口上传的文件可用于\n\n发起对话\n\n等 API 中传入文件等多模态内容。使用方式可参考\n\nobject_string object\n\n。\n\n​\n\n使用限制\n\n​\n\n​\n\n限制\n\n​\n\n说明\n\n​\n\n文件大小\n\n​\n\n该 API 允许上传的最大文件大小为 512 MB。然而，在与智能体对话时，实际可使用的文件大小取决于智能体的模型版本。\n\n​\n\n上传方式\n\n​\n\n必须使用 multipart/form-data 方式上传文件。\n\n​\n\n有效期\n\n​\n\n普通上传的文件将保存在扣子编程服务端，有效期为 3 个月。\n\n​\n\n若上传的文件被用作扣子头像，则永久有效。\n\n​\n\n使用限制\n\n​\n\n上传到扣子编程的文件仅限本账号查看或使用。\n\n​\n\n调用此接口上传文件只能获得文件的\n\nfile_id\n\n，如需获取文件的 URL，建议将文件上传到专业的存储工具中。\n\n​\n\n不支持下载已上传的文件。用户仅可在对话、工作流、端插件、RTC 和 WebSocket 中通过\n\nfile.id\n\n访问和使用文件。\n\n​\n\nAPI 流控\n\n​\n\n个人版：10 QPS。\n\n​\n\n企业版：20 QPS。\n\n​\n\n​\n\n支持的文件格式\n\n​\n\n​\n\n文件类型\n\n​\n\n支持的格式\n\n​\n\n文档\n\n​\n\nDOC、DOCX、XLS、XLSX、PPT、PPTX、PDF、Numbers、CSV\n\n​\n\n文本文件\n\n​\n\nCPP、PY、JAVA、C\n\n​\n\n图片\n\n​\n\nJPG、JPG2、PNG、GIF、WEBP、HEIC、HEIF、BMP、PCD、TIFF\n\n​\n\n音频\n\n​\n\nWAV、MP3、FLAC、M4A、AAC、OGG、WMA、MIDI\n\n​\n\n视频\n\n​\n\nMP4、AVI、MOV、3GP、3GPP、FLV、WEBM、WMV、RMVB、M4V、MKV\n\n​\n\n压缩文件\n\n​\n\nRAR、ZIP、7Z、GZ、GZIP、BZ2\n\n​\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/files/upload\n\n​\n\n权限\n\n​\n\nuploadFile\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nuploadFile\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n调用接口上传文件到扣子编程。\n\n​\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\nmultipart/form-data\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nData\n\n​\n\nFile\n\n​\n\n必选\n\n​\n\n@\"/test/1120.jpeg\"'\n\n​\n\n待上传文件的二进制数据。\n\n​\n\n开发者需要在前端应用中实现文件选择功能，获取用户选择的文件后，将文件的二进制内容直接设置为 HTTP 请求体。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nObject of\n\nFile\n\n​\n\n{ \"bytes\": 152236, \"created_at\": 1715847583, \"file_name\": \"1120.jpeg\", \"id\": \"736949598110202****\" }\n\n​\n\n已上传的文件信息。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\n​\n\nFile\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n736949598110202****\n\n​\n\n已上传的文件 ID。\n\n​\n\nbytes\n\n​\n\nLong\n\n​\n\n152236\n\n​\n\n文件的总字节数。\n\n​\n\nfile_name\n\n​\n\nString\n\n​\n\n1120.jpeg\n\n​\n\n文件名称。\n\n​\n\ncreated_at\n\n​\n\nLong\n\n​\n\n1715847583\n\n​\n\n文件的上传时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。\n\n​\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/files/upload' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_O******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\nmultipart/form-data' \\\n\n​\n\n--form 'file=@\n\n\"/test/1120.jpeg\"\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"bytes\"\n\n:\n\n152236\n\n,\n\n​\n\n\"created_at\"\n\n:\n\n1715847583\n\n,\n\n​\n\n\"file_name\"\n\n:\n\n\"1120.jpeg\"\n\n,\n\n​\n\n\"id\"\n\n:\n\n\"736949598110202****\"\n\n​\n\n},\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n删除工作流协作者\n\n下一篇\n\n查看文件详情",
        "links": []
      },
      "markdown": "| 限制​ | 说明​ |\n| 文件大小​ | 该 API 允许上传的最大文件大小为 512 MB。然而，在与智能体对话时，实际可使用的文件大小取决于智能体的模型版本。​ |\n| 上传方式​ | 必须使用 multipart/form-data 方式上传文件。​ |\n| 有效期​ | 普通上传的文件将保存在扣子编程服务端，有效期为 3 个月。​若上传的文件被用作扣子头像，则永久有效。​ |\n| 使用限制​ | 上传到扣子编程的文件仅限本账号查看或使用。​调用此接口上传文件只能获得文件的file_id，如需获取文件的 URL，建议将文件上传到专业的存储工具中。​不支持下载已上传的文件。用户仅可在对话、工作流、端插件、RTC 和 WebSocket 中通过file.id访问和使用文件。​ |\n| API 流控​ | 个人版：10 QPS。​企业版：20 QPS。​ |\n\n- 普通上传的文件将保存在扣子编程服务端，有效期为 3 个月。 ​\n\n- 若上传的文件被用作扣子头像，则永久有效。 ​\n\n- 上传到扣子编程的文件仅限本账号查看或使用。 ​\n\n- 调用此接口上传文件只能获得文件的 file_id ，如需获取文件的 URL，建议将文件上传到专业的存储工具中。 ​\n\n- 不支持下载已上传的文件。用户仅可在对话、工作流、端插件、RTC 和 WebSocket 中通过 file.id 访问和使用文件。 ​\n\n- 个人版：10 QPS。 ​\n\n- 企业版：20 QPS。 ​\n\n| 文件类型​ | 支持的格式​ |\n| 文档​ | DOC、DOCX、XLS、XLSX、PPT、PPTX、PDF、Numbers、CSV​ |\n| 文本文件​ | CPP、PY、JAVA、C​ |\n| 图片​ | JPG、JPG2、PNG、GIF、WEBP、HEIC、HEIF、BMP、PCD、TIFF​ |\n| 音频​ | WAV、MP3、FLAC、M4A、AAC、OGG、WMA、MIDI​ |\n| 视频​ | MP4、AVI、MOV、3GP、3GPP、FLV、WEBM、WMV、RMVB、M4V、MKV​ |\n| 压缩文件​ | RAR、ZIP、7Z、GZ、GZIP、BZ2​ |\n\n| 请求方式​ | POST |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/files/upload​ |\n| 权限​ | uploadFile​确保调用该接口使用的访问令牌开通了uploadFile权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 调用接口上传文件到扣子编程。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | multipart/form-data​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| Data​ | File​ | 必选​ | @\"/test/1120.jpeg\"'​ | 待上传文件的二进制数据。​开发者需要在前端应用中实现文件选择功能，获取用户选择的文件后，将文件的二进制内容直接设置为 HTTP 请求体。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | Object ofFile​ | { \"bytes\": 152236, \"created_at\": 1715847583, \"file_name\": \"1120.jpeg\", \"id\": \"736949598110202****\" }​ | 已上传的文件信息。​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 736949598110202****​ | 已上传的文件 ID。​ |\n| bytes​ | Long​ | 152236​ | 文件的总字节数。​ |\n| file_name​ | String​ | 1120.jpeg​ | 文件名称。​ |\n| created_at​ | Long​ | 1715847583​ | 文件的上传时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/retrieve_files",
      "title": "查看文件详情",
      "content": {
        "sections": [],
        "full_text": "查看文件详情\n\n查看已上传的文件详情。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/files/retrieve\n\n​\n\n​\n\n权限\n\n​\n\nretrieveFile\n\n​\n\n确保调用该接口使用的个人令牌开通了\n\nretrieveFile\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n查看已上传的文件详情。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nfile_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n7369495981102022700\n\n​\n\n已上传的文件 ID。你可以通过\n\n上传文件\n\nAPI 的返回信息中查看文件 ID。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nObject of\n\nFile\n\n​\n\n{\"id\":\"736949598110202****\",\"bytes\":152236,\"file_name\":\"1120.jpeg\",\"created_at\":1715847583}\n\n​\n\n已上传的文件信息，包含文件 ID、文件大小、文件名和上传时间等详细信息。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{ \"logid\": \"20250106172024B5F607030EFFAD653960\" }\n\n​\n\n响应详情信息。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\n​\n\nFile\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n736949598110202****\n\n​\n\n已上传的文件 ID。\n\n​\n\nbytes\n\n​\n\nLong\n\n​\n\n152236\n\n​\n\n文件的总字节数。\n\n​\n\nfile_name\n\n​\n\nString\n\n​\n\n1120.jpeg\n\n​\n\n文件名称。\n\n​\n\ncreated_at\n\n​\n\nLong\n\n​\n\n1715847583\n\n​\n\n文件的上传时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request GET 'https\n\n:\n\n//api.coze.cn/v1/files/retrieve?file_id=7369495981102022700' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"bytes\"\n\n:\n\n152236\n\n,\n\n​\n\n\"created_at\"\n\n:\n\n1715847583\n\n,\n\n​\n\n\"file_name\"\n\n:\n\n\"1120.jpeg\"\n\n,\n\n​\n\n\"id\"\n\n:\n\n\"736949598110202****\"\n\n​\n\n},\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"bytes\"\n\n:\n\n152236\n\n,\n\n​\n\n\"created_at\"\n\n:\n\n1715847583\n\n,\n\n​\n\n\"file_name\"\n\n:\n\n\"1120.jpeg\"\n\n,\n\n​\n\n\"id\"\n\n:\n\n\"736949598110202****\"\n\n​\n\n},\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n上传文件\n\n下一篇\n\n查看音色列表",
        "links": []
      },
      "markdown": "| 请求方式​ | GET​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/files/retrieve​​ |\n| 权限​ | retrieveFile​确保调用该接口使用的个人令牌开通了retrieveFile权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 查看已上传的文件详情。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| file_id​ | String​ | 必选​ | 7369495981102022700​ | 已上传的文件 ID。你可以通过上传文件API 的返回信息中查看文件 ID。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | Object ofFile​ | {\"id\":\"736949598110202****\",\"bytes\":152236,\"file_name\":\"1120.jpeg\",\"created_at\":1715847583}​ | 已上传的文件信息，包含文件 ID、文件大小、文件名和上传时间等详细信息。​ |\n| detail​ | Object ofResponseDetail​ | { \"logid\": \"20250106172024B5F607030EFFAD653960\" }​ | 响应详情信息。​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 736949598110202****​ | 已上传的文件 ID。​ |\n| bytes​ | Long​ | 152236​ | 文件的总字节数。​ |\n| file_name​ | String​ | 1120.jpeg​ | 文件名称。​ |\n| created_at​ | Long​ | 1715847583​ | 文件的上传时间，格式为 10 位的 Unixtime 时间戳，单位为秒（s）。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/list_voices",
      "title": "查看音色列表",
      "content": {
        "sections": [],
        "full_text": "查看音色列表\n\n查看可用的音色列表，包括系统预置音色和自定义音色。\n\n​\n\n接口说明\n\n​\n\n调用此 API 可查看当前扣子用户可使用的音色列表，包括：\n\n​\n\n系统预置音色：扣子编程提供的默认音色。\n\n​\n\n自定义音色：当前扣子用户通过\n\n复刻音色\n\nAPI 复刻的音色、当前账号加入的所有工作空间中其他扣子用户复刻的音色。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/audio/voices\n\n​\n\n权限\n\n​\n\nlistVoice\n\n​\n\n确保调用该接口使用的个人令牌开通了\n\nlistVoice\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n接口说明\n\n​\n\n查看可用的音色列表，包括系统预置音色和自定义音色。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nfilter_system_voice\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\nfalse\n\n查看音色列表时是否过滤掉系统音色。\n\n​\n\ntrue：过滤系统音色\n\n​\n\nfalse：（默认）不过滤系统音色\n\n​\n\nmodel_type\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nbig\n\n​\n\n音色模型的类型，如果不填，默认都返回。可选值包括：\n\n​\n\nbig：大模型\n\n​\n\nsmall：小模型\n\n​\n\nvoice_state\n\n​\n\nString\n\n​\n\n可选\n\n​\n\ncloned\n\n音色克隆状态，用于筛选特定状态的音色。可选值包括：\n\n​\n\ninit：待克隆。\n\n​\n\ncloned：（默认值）已克隆。\n\n​\n\nall：全部。\n\n​\n\npage_num\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n1\n\n查询结果分页展示时，此参数用于设置查看的页码。最小值为 1，默认为 1。\n\n​\n\npage_size\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n100\n\n查询结果分页展示时，此参数用于设置每页返回的数据量。取值范围为 1~100，默认为 100。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n状态码。\n\n​\n\n0\n\n代表调用成功。\n\ndata\n\n​\n\nObject of\n\nListVoiceData\n\n​\n\n参见响应参数\n\n​\n\n音色的详细信息。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{ \"logid\": \"2024102916355736DC98FBC4D32FD7E59C\" }\n\n​\n\n本次请求的详细信息。\n\n​\n\n​\n\nListVoiceData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nhas_more\n\n​\n\nBoolean\n\n​\n\nfalse\n\n​\n\n标识是否还有未返回的音色数据。\n\n​\n\ntrue\n\n：当前返回的音色列表未包含所有符合条件的音色。\n\n​\n\nfalse\n\n：表示已返回所有符合条件的音色数据。\n\n​\n\nvoice_list\n\n​\n\nArray of\n\nOpenAPIVoiceData\n\n​\n\n参见响应参数\n\n​\n\n音色列表详情。\n\n​\n\n​\n\nOpenAPIVoiceData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nname\n\n​\n\nString\n\n​\n\n开朗大男孩\n\n​\n\n音色的名称。\n\n​\n\nstate\n\n​\n\nString\n\n​\n\ncloned\n\n​\n\n音色克隆状态。枚举值：\n\n​\n\ninit：待克隆。\n\n​\n\ncloned：已克隆。\n\n​\n\nvoice_id\n\n​\n\nString\n\n​\n\n734829333445931****\n\n​\n\n音色的 ID。\n\n​\n\nmodel_name\n\n​\n\nString\n\n​\n\n​\n\n模型类型字符串\n\n​\n\nmodel_type\n\n​\n\nString\n\n​\n\nbig\n\n​\n\n音色模型的类型，枚举值：\n\n​\n\nbig：大模型\n\n​\n\nsmall：小模型\n\n​\n\ncreate_time\n\n​\n\nInteger\n\n​\n\n1729686510\n\n​\n\n音色的创建时间，格式为 11 位的 Unixtime 时间戳。\n\n​\n\nupdate_time\n\n​\n\nInteger\n\n​\n\n1729686510\n\n​\n\n音色的更新时间，格式为 11 位的 Unixtime 时间戳。\n\n​\n\npreview_text\n\n​\n\nString\n\n​\n\n你好呀\n\n​\n\n此音色预览音频对应的文案。\n\n​\n\nlanguage_code\n\n​\n\nString\n\n​\n\nzh\n\n​\n\n此音色的语种代号。\n\n​\n\nlanguage_name\n\n​\n\nString\n\n​\n\n中文\n\n​\n\n此音色的语种名称。\n\n​\n\npreview_audio\n\n​\n\nString\n\n​\n\nhttps://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/VolcanoUserVoice/xxxxxx.mp3?lk3s=da27ec82&x-expires=1730277357&x-signature=xu2O6Gp5RvTyJOawqjAfsJZvifc%3D\n\n​\n\n此音色的预览音频。通常是一个公开可访问的网络地址。\n\n​\n\nis_system_voice\n\n​\n\nBoolean\n\n​\n\nfalse\n\n​\n\n标识当前音色是否为系统预置音色。\n\n​\n\ntrue\n\n：系统预置音色。\n\n​\n\nfalse\n\n：用户自定义音色。\n\n​\n\nsupport_emotions\n\n​\n\nArray of\n\nEmotionInfo\n\n​\n\n[{\"emotion\":\"happy\",\"display_name\":\"开心\",\"emotion_scale_interval\":{\"max\":5,\"min\":1,\"default\":4}},{\"emotion\":\"sad\",\"display_name\":\"悲伤\",\"emotion_scale_interval\":{\"max\":5,\"min\":1,\"default\":3}}]\n\n​\n\n音色支持的情感类型列表，仅当音色为多情感音色时返回。\n\n​\n\navailable_training_times\n\n​\n\nInteger\n\n​\n\n6\n\n​\n\n当前音色还可训练的次数。包括首次复刻音色在内，每个自定义音色最多被训练 10 次。\n\n​\n\n​\n\nEmotionInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nemotion\n\n​\n\nString\n\n​\n\nhappy\n\n​\n\n音色支持的情感类型标识符，仅当音色为多情感音色时返回。枚举值如下：\n\n​\n\nhappy\n\n：开心。\n\n​\n\nsad\n\n：悲伤。\n\n​\n\nangry\n\n：愤怒。\n\n​\n\nsurprised\n\n：惊讶。\n\n​\n\nfear\n\n：恐惧。\n\n​\n\nhate\n\n：厌恶。\n\n​\n\nexcited\n\n：兴奋。\n\n​\n\ncoldness\n\n：冷漠。\n\n​\n\nneutral\n\n：中性。\n\n​\n\ndisplay_name\n\n​\n\nString\n\n​\n\n开心\n\n​\n\n音色支持的情感类型的中文显示名称，用于直观展示情感类型。\n\n​\n\nemotion_scale_interval\n\n​\n\nObject of\n\nInterval\n\n​\n\n{\"max\":5,\"min\":1,\"default\":4}\n\n​\n\n情感强度的取值范围，用于量化情感的强度。\n\n​\n\n​\n\nInterval\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nmax\n\n​\n\nDouble\n\n​\n\n5\n\n​\n\n情感强度的最大值。\n\n​\n\nmin\n\n​\n\nDouble\n\n​\n\n1\n\n​\n\n情感强度的最小值。\n\n​\n\ndefault\n\n​\n\nDouble\n\n​\n\n4\n\n​\n\n情感强度的默认值。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request GET 'https\n\n:\n\n//api.coze.cn/v1/audio/voices?filter_system_voice=false&model_type=big&voice_state=&page_num=1&page_size=100' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer Bearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"2024102916355736DC98FBC4D32F***\"\n\n​\n\n},\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"voice_list\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"preview_audio\"\n\n:\n\n\"https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/VolcanoUserVoice/xxxxxx.mp3?lk3s=da27ec82&x-expires=1730277357&x-signature=xu2O6Gp5RvTyJOawqjAfsJZvifc%3D\"\n\n,\n\n​\n\n\"language_name\"\n\n:\n\n\"中文\"\n\n,\n\n​\n\n\"is_system_voice\"\n\n:\n\nfalse\n\n,\n\n​\n\n\"preview_text\"\n\n:\n\n\"你好，欢迎来到AI世界，我是你的专属AI克隆声音，希望未来可以一起好好相处。\"\n\n,\n\n​\n\n\"create_time\"\n\n:\n\n1729686510\n\n,\n\n​\n\n\"update_time\"\n\n:\n\n1729686510\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"jay\"\n\n,\n\n// 音色名称\n\n​\n\n\"language_code\"\n\n:\n\n\"zh\"\n\n,\n\n​\n\n\"voice_id\"\n\n:\n\n\"12344\"\n\n,\n\n​\n\n\"available_training_times\"\n\n:\n\n6\n\n,\n\n// 当前音色还可以训练的次数\n\n​\n\n\"model_type\"\n\n:\n\n\"big\"\n\n​\n\n}\n\n​\n\n],\n\n​\n\n\"has_more\"\n\n:\n\nfalse\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n查看文件详情\n\n下一篇\n\n语音合成",
        "links": []
      },
      "markdown": "- 系统预置音色：扣子编程提供的默认音色。 ​\n\n- 自定义音色：当前扣子用户通过 复刻音色 API 复刻的音色、当前账号加入的所有工作空间中其他扣子用户复刻的音色。 ​\n\n| 请求方式​ | GET |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/audio/voices​ |\n| 权限​ | listVoice​确保调用该接口使用的个人令牌开通了listVoice权限，详细信息参考鉴权方式。 |\n| 接口说明​ | 查看可用的音色列表，包括系统预置音色和自定义音色。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。 |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| filter_system_voice​ | Boolean​ | 可选​ | false | 查看音色列表时是否过滤掉系统音色。​true：过滤系统音色​false：（默认）不过滤系统音色​ |\n| model_type​ | String​ | 可选​ | big​ | 音色模型的类型，如果不填，默认都返回。可选值包括：​big：大模型​small：小模型​ |\n| voice_state​ | String​ | 可选​ | cloned | 音色克隆状态，用于筛选特定状态的音色。可选值包括：​init：待克隆。​cloned：（默认值）已克隆。​all：全部。​ |\n| page_num​ | Integer​ | 可选​ | 1 | 查询结果分页展示时，此参数用于设置查看的页码。最小值为 1，默认为 1。​ |\n| page_size​ | Integer​ | 可选​ | 100 | 查询结果分页展示时，此参数用于设置每页返回的数据量。取值范围为 1~100，默认为 100。​ |\n\n- true：过滤系统音色 ​\n\n- false：（默认）不过滤系统音色 ​\n\n- big：大模型 ​\n\n- small：小模型 ​\n\n- init：待克隆。 ​\n\n- cloned：（默认值）已克隆。 ​\n\n- all：全部。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 状态码。​0代表调用成功。 |\n| data​ | Object ofListVoiceData​ | 参见响应参数​ | 音色的详细信息。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | { \"logid\": \"2024102916355736DC98FBC4D32FD7E59C\" }​ | 本次请求的详细信息。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| has_more​ | Boolean​ | false​ | 标识是否还有未返回的音色数据。​true：当前返回的音色列表未包含所有符合条件的音色。​false：表示已返回所有符合条件的音色数据。​ |\n| voice_list​ | Array ofOpenAPIVoiceData​ | 参见响应参数​ | 音色列表详情。​ |\n\n- true ：当前返回的音色列表未包含所有符合条件的音色。 ​\n\n- false ：表示已返回所有符合条件的音色数据。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| name​ | String​ | 开朗大男孩​ | 音色的名称。​ |\n| state​ | String​ | cloned​ | 音色克隆状态。枚举值：​init：待克隆。​cloned：已克隆。​ |\n| voice_id​ | String​ | 734829333445931****​ | 音色的 ID。​ |\n| model_name​ | String​ | ​ | 模型类型字符串​ |\n| model_type​ | String​ | big​ | 音色模型的类型，枚举值：​big：大模型​small：小模型​ |\n| create_time​ | Integer​ | 1729686510​ | 音色的创建时间，格式为 11 位的 Unixtime 时间戳。​ |\n| update_time​ | Integer​ | 1729686510​ | 音色的更新时间，格式为 11 位的 Unixtime 时间戳。​ |\n| preview_text​ | String​ | 你好呀​ | 此音色预览音频对应的文案。​ |\n| language_code​ | String​ | zh​ | 此音色的语种代号。​ |\n| language_name​ | String​ | 中文​ | 此音色的语种名称。​ |\n| preview_audio​ | String​ | https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/VolcanoUserVoice/xxxxxx.mp3?lk3s=da27ec82&x-expires=1730277357&x-signature=xu2O6Gp5RvTyJOawqjAfsJZvifc%3D​ | 此音色的预览音频。通常是一个公开可访问的网络地址。​ |\n| is_system_voice​ | Boolean​ | false​ | 标识当前音色是否为系统预置音色。​true：系统预置音色。​false：用户自定义音色。​ |\n| support_emotions​ | Array ofEmotionInfo​ | [{\"emotion\":\"happy\",\"display_name\":\"开心\",\"emotion_scale_interval\":{\"max\":5,\"min\":1,\"default\":4}},{\"emotion\":\"sad\",\"display_name\":\"悲伤\",\"emotion_scale_interval\":{\"max\":5,\"min\":1,\"default\":3}}]​ | 音色支持的情感类型列表，仅当音色为多情感音色时返回。​ |\n| available_training_times​ | Integer​ | 6​ | 当前音色还可训练的次数。包括首次复刻音色在内，每个自定义音色最多被训练 10 次。​ |\n\n- init：待克隆。 ​\n\n- cloned：已克隆。 ​\n\n- big：大模型 ​\n\n- small：小模型 ​\n\n- true ：系统预置音色。 ​\n\n- false ：用户自定义音色。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| emotion​ | String​ | happy​ | 音色支持的情感类型标识符，仅当音色为多情感音色时返回。枚举值如下：​happy：开心。​sad：悲伤。​angry：愤怒。​surprised：惊讶。​fear：恐惧。​hate：厌恶。​excited：兴奋。​coldness：冷漠。​neutral：中性。​ |\n| display_name​ | String​ | 开心​ | 音色支持的情感类型的中文显示名称，用于直观展示情感类型。​ |\n| emotion_scale_interval​ | Object ofInterval​ | {\"max\":5,\"min\":1,\"default\":4}​ | 情感强度的取值范围，用于量化情感的强度。​ |\n\n- happy ：开心。 ​\n\n- sad ：悲伤。 ​\n\n- angry ：愤怒。 ​\n\n- surprised ：惊讶。 ​\n\n- fear ：恐惧。 ​\n\n- hate ：厌恶。 ​\n\n- excited ：兴奋。 ​\n\n- coldness ：冷漠。 ​\n\n- neutral ：中性。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| max​ | Double​ | 5​ | 情感强度的最大值。​ |\n| min​ | Double​ | 1​ | 情感强度的最小值。​ |\n| default​ | Double​ | 4​ | 情感强度的默认值。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/text_to_speech",
      "title": "语音合成",
      "content": {
        "sections": [],
        "full_text": "语音合成\n\n将指定文本合成为音频文件。\n\n​\n\n接口描述\n\n​\n\n此 API 用于将指定文本内容合成为自然流畅的音频，同步返回合成的音频文件，适用于有声书合成、智能客服语音、音视频配音等场景。合成音频文件之前，可以先调用\n\n查看音色列表\n\nAPI，查看所有可用音色。\n\n​\n\n注意\n\n调用语音合成 API 会产生\n\n语音合成费用\n\n，具体费用详情请参考\n\n音视频费用\n\n。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/audio/speech\n\n​\n\n权限\n\n​\n\ncreateSpeech\n\n​\n\n确保调用该接口使用的个人令牌开通了\n\ncreateSpeech\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n将指定文本合成为音频文件。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ninput\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n今天天气怎么样\n\n​\n\n合成语音的文本，经由 UTF-8 编码。长度限制为 1024 字节。\n\n​\n\nvoice_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n742894********\n\n​\n\n音频文件使用的音色 ID。\n\n​\n\n调用\n\n查看音色列表\n\nAPI，可查看所有可用音色。\n\n​\n\nemotion\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nhappy\n\n​\n\n设置多情感音色的情感类型，仅当\n\nvoice_id\n\n为多情感音色时才支持设置情感类型。不同音色支持的情感范围不同，可以通过\n\n系统音色列表\n\n查看各音色支持的情感。默认为空。枚举值如下：\n\n​\n\nhappy\n\n：开心。\n\n​\n\nsad\n\n：悲伤。\n\n​\n\nangry\n\n：愤怒。\n\n​\n\nsurprised\n\n：惊讶。\n\n​\n\nfear\n\n：恐惧。\n\n​\n\nhate\n\n：厌恶。\n\n​\n\nexcited\n\n：兴奋。\n\n​\n\ncoldness\n\n：冷漠。\n\n​\n\nneutral\n\n：中性。\n\n​\n\nemotion_scale\n\n​\n\nDouble\n\n​\n\n可选\n\n​\n\n3\n\n​\n\n情感值用于量化情感的强度。数值越高，情感表达越强烈，例如： “开心” 的情感值 5 比 1 更显兴奋。\n\n​\n\n取值范围：1.0~5.0，默认值：4.0。\n\n​\n\nresponse_format\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nmp3\n\n​\n\n音频文件的编码格式，支持设置为：\n\n​\n\nwav：返回二进制 wav 音频。\n\n​\n\npcm：返回二进制 pcm 音频。\n\n​\n\nogg_opus：返回多段含 opus 压缩分片音频。\n\n​\n\nmp3：（默认）返回二进制 mp3 音频。\n\n​\n\nspeed\n\n​\n\nDouble\n\n​\n\n可选\n\n​\n\n1\n\n​\n\n语速，大模型音色的取值范围为 0.5~2，小模型音色的取值范围为 0.2~3，通常保留一位小数即可。\n\n​\n\n其中 0.2 表示 0.2 倍速，3 表示 3 倍速。默认为 1，表示 1 倍速。\n\n​\n\nsample_rate\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n24000\n\n​\n\n音频采样率，单位为 Hz。\n\n​\n\n8000：8k\n\n​\n\n16000：16k\n\n​\n\n22050：22.05k\n\n​\n\n24000：（默认）24k\n\n​\n\n32000：32k\n\n​\n\n44100：44.1k\n\n​\n\n48000：48k\n\n​\n\nloudness_rate\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n30\n\n​\n\n音频输出音量的增益或衰减比例，以百分比形式表示。取值范围为\n\n-50\n\n~\n\n100\n\n，默认值为 0，表示原始音量。\n\n​\n\n负值表示衰减：\n\n-50\n\n表示音量降低 50%（即 0.5 倍）。\n\n​\n\n正值表示增益：\n\n100\n\n表示音量提升 100%（即 2 倍）。\n\n​\n\ncontext_texts\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n用低沉沙哑的语气、带着沧桑与绝望地说\n\n​\n\n语音合成的辅助信息，用于控制合成语音的整体情绪（如悲伤、生气）、方言（如四川话、北京话）、语气（如撒娇、暧昧、吵架、夹子音）、语速（快慢）及音调（高低）等。\n\n​\n\n默认为空。\n\n​\n\n说明\n\n仅当\n\nvoice_id\n\n为豆包语音合成大模型 2.0 音色时才支持该参数，具体音色列表请参见\n\n系统音色列表\n\n。\n\n​\n\n更多关于豆包语音合成 2.0 的\n\ncontext_texts\n\n示例和效果可参考\n\n语音指令-示例库\n\n。\n\n​\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n如果成功调用此 API，接口会直接返回语音文件的内容。\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/audio/speech' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n-d '\n\n{\n\n​\n\n\"input\"\n\n:\n\n\"你好呀\"\n\n,\n\n​\n\n\"voice_id\"\n\n:\n\n\"742894*********\"\n\n,\n\n​\n\n\"response_format\"\n\n:\n\n\"wav\"\n\n​\n\n}\n\n'\n\n​\n\n--output speech.wav\n\n​\n\n​\n\n返回示例\n\n​\n\n无\n\n​\n\n错误码\n\n​\n\n如果调用此 API 失败，返回信息中包含 code 和 msg 字段。其中 code 为非 0 的错误码，表示接口调用失败；msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n查看音色列表\n\n下一篇\n\n语音识别",
        "links": []
      },
      "markdown": "| 请求方式​ | POST |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/audio/speech​ |\n| 权限​ | createSpeech​确保调用该接口使用的个人令牌开通了createSpeech权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 将指定文本合成为音频文件。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| input​ | String​ | 必选​ | 今天天气怎么样​ | 合成语音的文本，经由 UTF-8 编码。长度限制为 1024 字节。​ |\n| voice_id​ | String​ | 必选​ | 742894********​ | 音频文件使用的音色 ID。​调用查看音色列表API，可查看所有可用音色。​ |\n| emotion​ | String​ | 可选​ | happy​ | 设置多情感音色的情感类型，仅当voice_id为多情感音色时才支持设置情感类型。不同音色支持的情感范围不同，可以通过系统音色列表查看各音色支持的情感。默认为空。枚举值如下：​happy：开心。​sad：悲伤。​angry：愤怒。​surprised：惊讶。​fear：恐惧。​hate：厌恶。​excited：兴奋。​coldness：冷漠。​neutral：中性。​ |\n| emotion_scale​ | Double​ | 可选​ | 3​ | 情感值用于量化情感的强度。数值越高，情感表达越强烈，例如： “开心” 的情感值 5 比 1 更显兴奋。​取值范围：1.0~5.0，默认值：4.0。​ |\n| response_format​ | String​ | 可选​ | mp3​ | 音频文件的编码格式，支持设置为：​wav：返回二进制 wav 音频。​pcm：返回二进制 pcm 音频。​ogg_opus：返回多段含 opus 压缩分片音频。​mp3：（默认）返回二进制 mp3 音频。​ |\n| speed​ | Double​ | 可选​ | 1​ | 语速，大模型音色的取值范围为 0.5~2，小模型音色的取值范围为 0.2~3，通常保留一位小数即可。​其中 0.2 表示 0.2 倍速，3 表示 3 倍速。默认为 1，表示 1 倍速。​ |\n| sample_rate​ | Integer​ | 可选​ | 24000​ | 音频采样率，单位为 Hz。​8000：8k​16000：16k​22050：22.05k​24000：（默认）24k​32000：32k​44100：44.1k​48000：48k​ |\n| loudness_rate​ | Integer​ | 可选​ | 30​ | 音频输出音量的增益或衰减比例，以百分比形式表示。取值范围为-50~100，默认值为 0，表示原始音量。​负值表示衰减：-50表示音量降低 50%（即 0.5 倍）。​正值表示增益：100表示音量提升 100%（即 2 倍）。​ |\n| context_texts​ | String​ | 可选​ | 用低沉沙哑的语气、带着沧桑与绝望地说​ | 语音合成的辅助信息，用于控制合成语音的整体情绪（如悲伤、生气）、方言（如四川话、北京话）、语气（如撒娇、暧昧、吵架、夹子音）、语速（快慢）及音调（高低）等。​默认为空。​说明仅当voice_id为豆包语音合成大模型 2.0 音色时才支持该参数，具体音色列表请参见系统音色列表。​更多关于豆包语音合成 2.0 的context_texts示例和效果可参考语音指令-示例库。​​ |\n\n- happy ：开心。 ​\n\n- sad ：悲伤。 ​\n\n- angry ：愤怒。 ​\n\n- surprised ：惊讶。 ​\n\n- fear ：恐惧。 ​\n\n- hate ：厌恶。 ​\n\n- excited ：兴奋。 ​\n\n- coldness ：冷漠。 ​\n\n- neutral ：中性。 ​\n\n- wav：返回二进制 wav 音频。 ​\n\n- pcm：返回二进制 pcm 音频。 ​\n\n- ogg_opus：返回多段含 opus 压缩分片音频。 ​\n\n- mp3：（默认）返回二进制 mp3 音频。 ​\n\n- 8000：8k ​\n\n- 16000：16k ​\n\n- 22050：22.05k ​\n\n- 24000：（默认）24k ​\n\n- 32000：32k ​\n\n- 44100：44.1k ​\n\n- 48000：48k ​\n\n- 负值表示衰减： -50 表示音量降低 50%（即 0.5 倍）。 ​\n\n- 正值表示增益： 100 表示音量提升 100%（即 2 倍）。 ​\n\n- 仅当 voice_id 为豆包语音合成大模型 2.0 音色时才支持该参数，具体音色列表请参见 系统音色列表 。 ​\n\n- 更多关于豆包语音合成 2.0 的 context_texts 示例和效果可参考 语音指令-示例库 。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/audio_transcriptions",
      "title": "语音识别",
      "content": {
        "sections": [],
        "full_text": "语音识别\n\n将音频文件转录为文本。\n\n​\n\n接口描述\n\n​\n\n此 API 用于将指定音频文件转录为文本。\n\n​\n\n注意\n\n调用语音识别 API 会产生\n\n语音识别费用\n\n，具体费用详情请参考\n\n音视频费用\n\n。\n\n​\n\n​\n\n语音文件的具体限制如下：\n\n​\n\n​\n\n限制\n\n​\n\n说明\n\n​\n\n文件格式\n\n​\n\n大模型语音识别支持的文件格式：opus、ogg、mp3、wav、m4a、mp4、pcm、raw、spx、aac、amr。\n\n​\n\n小模型语音识别支持的文件格式：ogg、mp3、wav、mp4、m4a。\n\n​\n\n文件大小\n\n​\n\n每个音频文件最大为 10 MB，并且时长需小于 30 分钟。\n\n​\n\n​\n\n说明\n\n上传的音频文件的采样率和码率等参数无限制。\n\n​\n\n如果语音文件过大，建议调用 WebSocket 的\n\n双向流式语音识别 API\n\n分片上传文件。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/audio/transcriptions\n\n​\n\n权限\n\n​\n\ncreateTranscription\n\n​\n\n确保调用该接口使用的个人令牌开通了\n\ncreateTranscription\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n将音频文件转录为文本。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\nmultipart/form-data\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nbody\n\n​\n\nFile\n\n​\n\n必选\n\n​\n\n-\n\n​\n\n需要语音识别的音频文件的二进制数据，具体文件格式和大小限制请参考接口说明部分。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n状态码。\n\n​\n\n0\n\n代表调用成功。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndata\n\n​\n\nObject of\n\nAudioTranscriptionsData\n\n​\n\n{\"text\":\"你好，请问有什么可以帮您的吗？\"}\n\n​\n\n语音文件对应的文本内容，即语音识别后转换成的文字结果。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\n​\n\nAudioTranscriptionsData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ntext\n\n​\n\nString\n\n​\n\n你好，请问有什么可以帮您的吗？\n\n​\n\n语音文件对应的文本内容，即语音识别后转换成的文字结果。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/audio/transcriptions' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\nmultipart/form-data' \\\n\n​\n\n--form 'file=@\n\n\"/xx/xx/xx/jay.MP3\"\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"202410291302044CD1CC3B4AE0897***\"\n\n​\n\n},\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"text\"\n\n:\n\n\"你好呀\"\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n语音合成\n\n下一篇\n\n复刻音色",
        "links": []
      },
      "markdown": "| 限制​ | 说明​ |\n| 文件格式​ | 大模型语音识别支持的文件格式：opus、ogg、mp3、wav、m4a、mp4、pcm、raw、spx、aac、amr。​小模型语音识别支持的文件格式：ogg、mp3、wav、mp4、m4a。​ |\n| 文件大小​ | 每个音频文件最大为 10 MB，并且时长需小于 30 分钟。​ |\n\n- 大模型语音识别支持的文件格式：opus、ogg、mp3、wav、m4a、mp4、pcm、raw、spx、aac、amr。 ​\n\n- 小模型语音识别支持的文件格式：ogg、mp3、wav、mp4、m4a。 ​\n\n- 上传的音频文件的采样率和码率等参数无限制。 ​\n\n- 如果语音文件过大，建议调用 WebSocket 的 双向流式语音识别 API 分片上传文件。 ​\n\n| 请求方式​ | POST |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/audio/transcriptions​ |\n| 权限​ | createTranscription​确保调用该接口使用的个人令牌开通了createTranscription权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 将音频文件转录为文本。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | multipart/form-data​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| body​ | File​ | 必选​ | -​ | 需要语音识别的音频文件的二进制数据，具体文件格式和大小限制请参考接口说明部分。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 状态码。​0代表调用成功。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| data​ | Object ofAudioTranscriptionsData​ | {\"text\":\"你好，请问有什么可以帮您的吗？\"}​ | 语音文件对应的文本内容，即语音识别后转换成的文字结果。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| text​ | String​ | 你好，请问有什么可以帮您的吗？​ | 语音文件对应的文本内容，即语音识别后转换成的文字结果。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/clone_voices",
      "title": "复刻音色",
      "content": {
        "sections": [],
        "full_text": "复刻音色\n\n复刻指定音频文件中人声的音色。\n\n​\n\n接口说明\n\n​\n\n注意\n\n仅扣子企业版（企业标准版、企业旗舰版）用户可以使用音色复刻功能。\n\n​\n\n企业版订阅套餐中默认赠送了一个复刻音色，如需调用复刻音色 OpenAPI 复刻更多音色，请联系超级管理员或管理员购买音色复刻扩容包，具体步骤请参见\n\n购买音色复刻扩容包\n\n。  音色复刻涉及\n\n音色数量费用\n\n和\n\n音色模型存储数费用\n\n，详细的费用信息可参考\n\n音视频费用\n\n。\n\n​\n\n调用此 API 之前请确认账户中资源点或余额充足，以免账号欠费导致服务中断\n\n。\n\n​\n\n​\n\n和扣子智能体进行实时的智能语音通话时，你可以选择智能体使用的音色，支持使用扣子编程提供系统内置音色，或通过\n\n复刻音色\n\nAPI 复刻出的自定义音色。\n\n​\n\n此 API 用于上传音频文件复刻一个新的音色。调用此 API 时需要上传一个音频文件作为音色复刻的素材。扣子编程会自动复刻音频文件中的人声音色，并将音色保存在当前账号的音色列表中。复刻出的音色可以用于合成语音，或者在扣子编程实时通话中作为智能体的音色。\n\n​\n\n说明\n\n在工作空间中复刻的音色资源仅限于该工作空间的成员使用。即使在同一个企业中，不同工作空间复刻的音色资源是独立的，不允许跨空间使用。\n\n​\n\n同一个音色 ID 最多复刻 10 次。为节省音色成本，你可以调用此接口训练自己已复刻的音色，即录制一个新的音频文件重新复刻音色，训练后的音色会覆盖原音色，但音色 ID 不变。例如，购买一个音色后，你可以对这个音色重新免费复刻 9 次。\n\n​\n\n必须使用 multipart/form-data 方式上传音频文件。\n\n​\n\n​\n\n音色复刻素材要求\n\n​\n\n上传的音频文件素材应符合以下要求：\n\n​\n\n​\n\n类别\n\n​\n\n说明\n\n​\n\n文件格式\n\n​\n\nwav、mp3、ogg、m4a、aac、pcm。其中 pcm 仅支持 24k 采样率，单通道。\n\n​\n\n文件大小\n\n​\n\n最大不超过 10MB。每次最多上传1个音频文件。\n\n​\n\n音频时长\n\n​\n\n建议 10s~30s。\n\n​\n\n语种\n\n​\n\n支持中文、英文、日语、西班牙语、印度尼西亚语葡萄牙语。\n\n​\n\n文件录制\n\n​\n\n录制环境：选择安静的空间，建议将麦克风放置在离说话人50厘米以内的位置，尽量保持自然的发声状态，避免刻意改变声线或呢喃，这样得到的音色会更加自然。\n\n​\n\n音频质量：确保录音中只包含一个人的声音，说话人应保持清晰的发音和音质、稳定的音量和语速，保持姿态稳定。\n\n​\n\n录制内容：避免说话时韵律过于平淡，尽量让语调、节奏和强度有所变化，尽量不要尝试复刻小孩或老人的声音。\n\n​\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/audio/voices/clone\n\n​\n\n权限\n\n​\n\ncreateVoice\n\n​\n\n确保调用该接口使用的个人令牌开通了\n\ncreateVoice\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n复刻指定音频文件中人声的音色。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nvoice_name\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n开朗大男孩\n\n​\n\n此音色的名称，长度限制为 128 字节。\n\n​\n\ntext\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n你好呀\n\n​\n\n音频文件对应的文案。需要和音频文件中人声朗读的内容大致一致，扣子编程服务会对比音频与该文本的差异，若差异过大会报错 1109 WERError。最大长度为 1024 字节。\n\n​\n\nlanguage\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nzh\n\n​\n\n音频文件中的语种，支持以下语种：\n\n​\n\nzh：中文\n\n​\n\nen：英文\n\n​\n\nja：日语\n\n​\n\nes：西班牙语\n\n​\n\nid：印度尼西亚语\n\n​\n\npt：葡萄牙语\n\n​\n\nvoice_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n734829333445931****\n\n​\n\n需要训练的音色 ID，扣子编程支持重新复刻音色，也就是训练音色，训练后的音色会覆盖原有的音色。\n\n​\n\n仅在训练音色时需要指定此参数。如果复刻一个新的音色，则无需指定此参数，扣子编程会为新音色分配一个音色 ID。\n\n​\n\npreview_text\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n你好，我是你的专属AI克隆声音\n\n​\n\n预览音频的文案。如果成功复刻音色，扣子编程会根据此文案生成一段新音色的预览音频。\n\n​\n\n未指定文案时，使用默认文案“你好，我是你的专属AI克隆声音，希望未来可以一起好好相处哦\"。\n\n​\n\nspace_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n736163827687053****\n\n​\n\n克隆音色保存的扣子编程工作空间 ID，默认保存在当前账号的个人空间中。\n\n​\n\n获取方式：进入指定空间，空间页面 URL 中\n\nw\n\n参数后的数字就是 工作空间 ID。例如\n\nhttps://code.coze.cn/w/75814654762959***/projects\n\n，工作空间 ID 为\n\n75814654762959***\n\n。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n状态码。\n\n​\n\n0\n\n代表调用成功。\n\n​\n\ndata\n\n​\n\nObject of\n\nCloneVoiceData\n\n​\n\n{ \"voice_id\": \"xxx\" }\n\n​\n\n新音色的详细信息。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\n​\n\nCloneVoiceData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nvoice_id\n\n​\n\nString\n\n​\n\n734829333445931****\n\n​\n\n复刻后的音色 ID，后续语音生成或重新克隆音色时需要传入该音色 ID。请妥善保存该 ID。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/audio/voices/clone' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--form 'voice_name=\n\n\"jay\"\n\n' \\\n\n​\n\n--form 'preview_text=\n\n\"你好，欢迎来到AI世界，我是你的专属AI克隆声音，希望未来可以一起好好相处。\"\n\n' \\\n\n​\n\n--form 'audio_format=\n\n\"mp3\"\n\n' \\\n\n​\n\n--form 'file=@\n\n\"/xx/xx/xx/jay.MP3\"\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"202410242028595CCF353CEC86A8*****\"\n\n​\n\n},\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"voice_id\"\n\n:\n\n\"xxx\"\n\n// 复刻后音色ID，请保存好，后续语音生成或者重新克隆音色需要传入\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n语音识别\n\n下一篇\n\n创建房间",
        "links": []
      },
      "markdown": "- 仅扣子企业版（企业标准版、企业旗舰版）用户可以使用音色复刻功能。 ​\n\n- 企业版订阅套餐中默认赠送了一个复刻音色，如需调用复刻音色 OpenAPI 复刻更多音色，请联系超级管理员或管理员购买音色复刻扩容包，具体步骤请参见 购买音色复刻扩容包 。  音色复刻涉及 音色数量费用 和 音色模型存储数费用 ，详细的费用信息可参考 音视频费用 。 ​\n\n- 调用此 API 之前请确认账户中资源点或余额充足，以免账号欠费导致服务中断 。 ​\n\n- 在工作空间中复刻的音色资源仅限于该工作空间的成员使用。即使在同一个企业中，不同工作空间复刻的音色资源是独立的，不允许跨空间使用。 ​\n\n- 同一个音色 ID 最多复刻 10 次。为节省音色成本，你可以调用此接口训练自己已复刻的音色，即录制一个新的音频文件重新复刻音色，训练后的音色会覆盖原音色，但音色 ID 不变。例如，购买一个音色后，你可以对这个音色重新免费复刻 9 次。 ​\n\n- 必须使用 multipart/form-data 方式上传音频文件。 ​\n\n| 类别​ | 说明​ |\n| 文件格式​ | wav、mp3、ogg、m4a、aac、pcm。其中 pcm 仅支持 24k 采样率，单通道。​ |\n| 文件大小​ | 最大不超过 10MB。每次最多上传1个音频文件。​ |\n| 音频时长​ | 建议 10s~30s。​ |\n| 语种​ | 支持中文、英文、日语、西班牙语、印度尼西亚语葡萄牙语。​ |\n| 文件录制​ | 录制环境：选择安静的空间，建议将麦克风放置在离说话人50厘米以内的位置，尽量保持自然的发声状态，避免刻意改变声线或呢喃，这样得到的音色会更加自然。​音频质量：确保录音中只包含一个人的声音，说话人应保持清晰的发音和音质、稳定的音量和语速，保持姿态稳定。​录制内容：避免说话时韵律过于平淡，尽量让语调、节奏和强度有所变化，尽量不要尝试复刻小孩或老人的声音。​ |\n\n- 录制环境：选择安静的空间，建议将麦克风放置在离说话人50厘米以内的位置，尽量保持自然的发声状态，避免刻意改变声线或呢喃，这样得到的音色会更加自然。 ​\n\n- 音频质量：确保录音中只包含一个人的声音，说话人应保持清晰的发音和音质、稳定的音量和语速，保持姿态稳定。 ​\n\n- 录制内容：避免说话时韵律过于平淡，尽量让语调、节奏和强度有所变化，尽量不要尝试复刻小孩或老人的声音。 ​\n\n| 请求方式​ | POST |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/audio/voices/clone​ |\n| 权限​ | createVoice​确保调用该接口使用的个人令牌开通了createVoice权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 复刻指定音频文件中人声的音色。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| voice_name​ | String​ | 必选​ | 开朗大男孩​ | 此音色的名称，长度限制为 128 字节。​ |\n| text​ | String​ | 可选​ | 你好呀​ | 音频文件对应的文案。需要和音频文件中人声朗读的内容大致一致，扣子编程服务会对比音频与该文本的差异，若差异过大会报错 1109 WERError。最大长度为 1024 字节。​ |\n| language​ | String​ | 可选​ | zh​ | 音频文件中的语种，支持以下语种：​zh：中文​en：英文​ja：日语​es：西班牙语​id：印度尼西亚语​pt：葡萄牙语​ |\n| voice_id​ | String​ | 可选​ | 734829333445931****​ | 需要训练的音色 ID，扣子编程支持重新复刻音色，也就是训练音色，训练后的音色会覆盖原有的音色。​仅在训练音色时需要指定此参数。如果复刻一个新的音色，则无需指定此参数，扣子编程会为新音色分配一个音色 ID。​ |\n| preview_text​ | String​ | 可选​ | 你好，我是你的专属AI克隆声音​ | 预览音频的文案。如果成功复刻音色，扣子编程会根据此文案生成一段新音色的预览音频。​未指定文案时，使用默认文案“你好，我是你的专属AI克隆声音，希望未来可以一起好好相处哦\"。​ |\n| space_id​ | String​ | 可选​ | 736163827687053****​ | 克隆音色保存的扣子编程工作空间 ID，默认保存在当前账号的个人空间中。​获取方式：进入指定空间，空间页面 URL 中w参数后的数字就是 工作空间 ID。例如https://code.coze.cn/w/75814654762959***/projects，工作空间 ID 为75814654762959***。​ |\n\n- zh：中文 ​\n\n- en：英文 ​\n\n- ja：日语 ​\n\n- es：西班牙语 ​\n\n- id：印度尼西亚语 ​\n\n- pt：葡萄牙语 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 状态码。​0代表调用成功。​ |\n| data​ | Object ofCloneVoiceData​ | { \"voice_id\": \"xxx\" }​ | 新音色的详细信息。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| voice_id​ | String​ | 734829333445931****​ | 复刻后的音色 ID，后续语音生成或重新克隆音色时需要传入该音色 ID。请妥善保存该 ID。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/create_room",
      "title": "创建房间",
      "content": {
        "sections": [],
        "full_text": "创建房间\n\n创建房间，并将智能体加入房间。\n\n​\n\n接口描述\n\n​\n\n注意\n\n调用创建房间 API 之后，智能体随即加入房间并开始计费，包括智能体的\n\n对话式 Al-音频费用\n\n和\n\n语音通话费用\n\n，具体费用详情请参考\n\n音视频费用\n\n。\n\n为避免不必要的费用产生，请在调用接口前仔细了解费用详情，并合理控制创建房间接口的调用频率。\n\n​\n\n用户未加入房间与智能体进行对话时，智能体会在房间等待用户 3 分钟，这期间会产生 3 分钟的最低费用。\n\n​\n\n​\n\n扣子智能语音功能通过 RTC 技术实现用户和智能体的实时语音通话。在 RTC 领域中，房间是一个虚拟的概念，类似逻辑上的分组，同一个房间内的用户才能互相接收和交换音视频数据、实现音视频通话。\n\n​\n\n此 API 用于创建一个房间，并将智能体加入房间，然后才能调用 RTC SDK 和智能体开始语音通话。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/audio/rooms\n\n​\n\n权限\n\n​\n\ncreateRoom\n\n​\n\n确保调用该接口使用的令牌开通了\n\ncreateRoom\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n创建房间，并将智能体加入房间。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n73428668*****\n\n​\n\n智能体 ID。\n\n​\n\n进入智能体的开发页面，开发页面 URL 中 bot 参数后的数字就是智能体 ID。例如\n\nhttps://www.coze.com/space/341****/bot/73428668*****\n\n，bot ID 为\n\n73428668*****\n\n。\n\n​\n\nconversation_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n734829333445931****\n\n​\n\n会话 ID。后续调用发起对话 API 产生的消息记录都会保存在此对话中。\n\n​\n\n调用\n\n创建会话\n\nAPI 可以创建一个会话。若未指定会话 ID，扣子编程会默认创建一个新的会话。\n\n​\n\nvoice_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n734829333445931****\n\n​\n\n智能体使用的音色 ID，默认为\n\n柔美女友\n\n音色。\n\n​\n\n你可以通过\n\n查看音色列表\n\nAPI 获取音色 ID。\n\n​\n\nconfig\n\n​\n\nObject of\n\nRoomConfig\n\n​\n\n可选\n\n​\n\n-\n\n​\n\n房间内的音视频参数配置。\n\n​\n\nuid\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nuid_123\n\n​\n\n标识当前与智能体对话的用户，由使用方自行定义、生成与维护。uid 用于标识对话中的不同用户，不同的 uid，其对话的数据库等对话记忆数据互相隔离。如果不需要用户数据隔离，可以不传此参数。\n\n​\n\n​\n\nRoomConfig\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nroom_mode\n\n​\n\nString\n\n​\n\n可选\n\n​\n\ndefault\n\n​\n\n房间模式，默认值为\n\ndefault\n\n。枚举值：\n\n​\n\ndefault\n\n：对话模式。\n\n​\n\npodcast\n\n：播客模式。\n\n​\n\naudio_config\n\n​\n\nObject of\n\nAudioConfig\n\n​\n\n可选\n\n​\n\n\\\n\n​\n\n房间音频配置。\n\n​\n\nvideo_config\n\n​\n\nObject of\n\nVideoConfig\n\n​\n\n可选\n\n​\n\n\\\n\n​\n\n房间视频配置。\n\n​\n\nturn_detection\n\n​\n\nObject of\n\nTurnDetectionConfig\n\n​\n\n可选\n\n​\n\n{\"type\":\"server_vad\"}\n\n​\n\n语音检测配置，用于控制语音交互的检测方式。\n\n​\n\nprologue_content\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n\\\n\n​\n\n自定义开场白。\n\n​\n\nprologue_delay_duration_ms\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n100\n\n​\n\n在进房后等待多长时间播放开场白，单位：ms。\n\n​\n\n默认为 500ms，取值范围为 0~5000。\n\n​\n\n​\n\nAudioConfig\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncodec\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nOPUS\n\n​\n\n房间音频编码格式，支持设置为：\n\n​\n\nAACLC：AAC-LC 编码格式。\n\n​\n\nG711A：G711A 编码格式。\n\n​\n\nOPUS：（默认）Opus 编码格式。\n\n​\n\nG722：G.722 编码格式。\n\n​\n\n​\n\nVideoConfig\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncodec\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nH264\n\n​\n\n房间视频编码格式，支持设置为：\n\n​\n\nH264：（默认）H264 编码格式。\n\n​\n\nBYTEVC1：火山引擎自研的视频编码格式。\n\n​\n\nvideo_frame_rate\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n15\n\n​\n\n每秒抽帧数，在视频通话过程中，摄像头/屏幕共享捕捉画面的频率。捕捉到的画面会作为视觉模型的输入。\n\n​\n\n默认值为\n\n1\n\n，取值范围为 1~24。\n\n​\n\nstream_video_type\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nmain\n\n​\n\n房间视频流类型, 支持 main 和 screen。\n\n​\n\nmain：主流，包括通过摄像头/麦克风的内部采集机制获取的流，以及通过自定义采集方式获取的流。\n\n​\n\nscreen：屏幕流，用于屏幕共享或屏幕录制的视频流。\n\n​\n\nvideo_frame_expire_duration\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n5\n\n​\n\n用户开始说话前，抽取多少秒画面。主要是兼容连贯动作的场景。用于帮模型理解用户没开始说话前在做什么。\n\n​\n\n单位为秒，默认值为\n\n1\n\n，取值范围为 1~10。\n\n​\n\n​\n\nTurnDetectionConfig\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ntype\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nserver_vad\n\n​\n\n语音检测类型，用于控制语音交互的检测方式，默认值为\n\nserver_vad\n\n。枚举值：\n\n​\n\nserver_vad\n\n：自由对话模式，扣子编程云端通过语音活动检测（VAD）自动判断语音的开始和结束，实现无缝的自然对话体验。\n\n​\n\nclient_interrupt\n\n：按键说话模式，由客户端控制语音的开始与结束，需配合 Realtime 上行事件\n\ninput_audio_buffer.start\n\n和\n\ninput_audio_buffer.complete\n\n使用。\n\n​\n\nsemantic_vad\n\n：采用语义判停的自由对话模式（\n\n此功能仅对企业旗舰版用户开放\n\n），由服务端识别语义来判断是否停止说话。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n状态码。\n\n​\n\n0\n\n代表调用成功。\n\n​\n\ndata\n\n​\n\nObject of\n\nCreateRoomData\n\n​\n\n-\n\n​\n\n接口返回的业务数据。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{ \"logid\": \"202410291302044CD1CC3B4AE0897***\" }\n\n​\n\n本次请求的详细信息。\n\n​\n\n​\n\nCreateRoomData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nuid\n\n​\n\nString\n\n​\n\nuid_123\n\n​\n\n进入房间的用户 ID，和入参中 uid 一致。\n\n​\n\ntoken\n\n​\n\nString\n\n​\n\ntoken123\n\n​\n\n房间密钥，用户加入房间和智能体对话时需要通过 token 进行身份认证和鉴权。\n\n​\n\napp_id\n\n​\n\nString\n\n​\n\napp_id\n\n​\n\nRTC 应用 ID。\n\n​\n\nroom_id\n\n​\n\nString\n\n​\n\nroom_id_123\n\n​\n\n已创建的 RTC 房间的房间 ID。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/audio/rooms' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"bot_id\"\n\n:\n\n\"734829333445931****\"\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"202410291302044CD1CC3B4AE0897***\"\n\n​\n\n},\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"room_id\"\n\n:\n\n\"room_id_743105798342***\"\n\n,\n\n// 房间 id\n\n​\n\n\"app_id\"\n\n:\n\n\"6705332c79516e01****\"\n\n,\n\n// app_id\n\n​\n\n\"token\"\n\n:\n\n\"0016705*****NzkxMxcANTE1MjkFAAAAAAAAAAEAAAAAACAA58QEAvxd****/VB4b1xEFA=\"\n\n,\n\n​\n\n\"uid\"\n\n:\n\n\"uid_74310579834270***\"\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n复刻音色\n\n下一篇\n\nRealtime 上行事件",
        "links": []
      },
      "markdown": "- 调用创建房间 API 之后，智能体随即加入房间并开始计费，包括智能体的 对话式 Al-音频费用 和 语音通话费用 ，具体费用详情请参考 音视频费用 。 为避免不必要的费用产生，请在调用接口前仔细了解费用详情，并合理控制创建房间接口的调用频率。 ​\n\n- 用户未加入房间与智能体进行对话时，智能体会在房间等待用户 3 分钟，这期间会产生 3 分钟的最低费用。 ​\n\n| 请求方式​ | POST |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/audio/rooms​ |\n| 权限​ | createRoom​确保调用该接口使用的令牌开通了createRoom权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 创建房间，并将智能体加入房间。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| bot_id​ | String​ | 必选​ | 73428668*****​ | 智能体 ID。​进入智能体的开发页面，开发页面 URL 中 bot 参数后的数字就是智能体 ID。例如https://www.coze.com/space/341****/bot/73428668*****，bot ID 为73428668*****。​ |\n| conversation_id​ | String​ | 可选​ | 734829333445931****​ | 会话 ID。后续调用发起对话 API 产生的消息记录都会保存在此对话中。​调用创建会话API 可以创建一个会话。若未指定会话 ID，扣子编程会默认创建一个新的会话。​ |\n| voice_id​ | String​ | 可选​ | 734829333445931****​ | 智能体使用的音色 ID，默认为柔美女友音色。​你可以通过查看音色列表API 获取音色 ID。​ |\n| config​ | Object ofRoomConfig​ | 可选​ | -​ | 房间内的音视频参数配置。​ |\n| uid​ | String​ | 可选​ | uid_123​ | 标识当前与智能体对话的用户，由使用方自行定义、生成与维护。uid 用于标识对话中的不同用户，不同的 uid，其对话的数据库等对话记忆数据互相隔离。如果不需要用户数据隔离，可以不传此参数。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| room_mode​ | String​ | 可选​ | default​ | 房间模式，默认值为default。枚举值：​default：对话模式。​podcast：播客模式。​ |\n| audio_config​ | Object ofAudioConfig​ | 可选​ | \\​ | 房间音频配置。​ |\n| video_config​ | Object ofVideoConfig​ | 可选​ | \\​ | 房间视频配置。​ |\n| turn_detection​ | Object ofTurnDetectionConfig​ | 可选​ | {\"type\":\"server_vad\"}​ | 语音检测配置，用于控制语音交互的检测方式。​ |\n| prologue_content​ | String​ | 可选​ | \\​ | 自定义开场白。​ |\n| prologue_delay_duration_ms​ | Integer​ | 可选​ | 100​ | 在进房后等待多长时间播放开场白，单位：ms。​默认为 500ms，取值范围为 0~5000。​ |\n\n- default ：对话模式。 ​\n\n- podcast ：播客模式。 ​\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| codec​ | String​ | 可选​ | OPUS​ | 房间音频编码格式，支持设置为：​AACLC：AAC-LC 编码格式。​G711A：G711A 编码格式。​OPUS：（默认）Opus 编码格式。​G722：G.722 编码格式。​ |\n\n- AACLC：AAC-LC 编码格式。 ​\n\n- G711A：G711A 编码格式。 ​\n\n- OPUS：（默认）Opus 编码格式。 ​\n\n- G722：G.722 编码格式。 ​\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| codec​ | String​ | 可选​ | H264​ | 房间视频编码格式，支持设置为：​H264：（默认）H264 编码格式。​BYTEVC1：火山引擎自研的视频编码格式。​ |\n| video_frame_rate​ | Integer​ | 可选​ | 15​ | 每秒抽帧数，在视频通话过程中，摄像头/屏幕共享捕捉画面的频率。捕捉到的画面会作为视觉模型的输入。​默认值为1，取值范围为 1~24。​ |\n| stream_video_type​ | String​ | 可选​ | main​ | 房间视频流类型, 支持 main 和 screen。​main：主流，包括通过摄像头/麦克风的内部采集机制获取的流，以及通过自定义采集方式获取的流。​screen：屏幕流，用于屏幕共享或屏幕录制的视频流。​ |\n| video_frame_expire_duration​ | Integer​ | 可选​ | 5​ | 用户开始说话前，抽取多少秒画面。主要是兼容连贯动作的场景。用于帮模型理解用户没开始说话前在做什么。​单位为秒，默认值为1，取值范围为 1~10。​ |\n\n- H264：（默认）H264 编码格式。 ​\n\n- BYTEVC1：火山引擎自研的视频编码格式。 ​\n\n- main：主流，包括通过摄像头/麦克风的内部采集机制获取的流，以及通过自定义采集方式获取的流。 ​\n\n- screen：屏幕流，用于屏幕共享或屏幕录制的视频流。 ​\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| type​ | String​ | 可选​ | server_vad​ | 语音检测类型，用于控制语音交互的检测方式，默认值为server_vad。枚举值：​server_vad：自由对话模式，扣子编程云端通过语音活动检测（VAD）自动判断语音的开始和结束，实现无缝的自然对话体验。​client_interrupt：按键说话模式，由客户端控制语音的开始与结束，需配合 Realtime 上行事件input_audio_buffer.start和input_audio_buffer.complete使用。​semantic_vad：采用语义判停的自由对话模式（此功能仅对企业旗舰版用户开放），由服务端识别语义来判断是否停止说话。​ |\n\n- server_vad ：自由对话模式，扣子编程云端通过语音活动检测（VAD）自动判断语音的开始和结束，实现无缝的自然对话体验。 ​\n\n- client_interrupt ：按键说话模式，由客户端控制语音的开始与结束，需配合 Realtime 上行事件 input_audio_buffer.start 和 input_audio_buffer.complete 使用。 ​\n\n- semantic_vad ：采用语义判停的自由对话模式（ 此功能仅对企业旗舰版用户开放 ），由服务端识别语义来判断是否停止说话。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 状态码。​0代表调用成功。​ |\n| data​ | Object ofCreateRoomData​ | -​ | 接口返回的业务数据。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | { \"logid\": \"202410291302044CD1CC3B4AE0897***\" }​ | 本次请求的详细信息。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| uid​ | String​ | uid_123​ | 进入房间的用户 ID，和入参中 uid 一致。​ |\n| token​ | String​ | token123​ | 房间密钥，用户加入房间和智能体对话时需要通过 token 进行身份认证和鉴权。​ |\n| app_id​ | String​ | app_id​ | RTC 应用 ID。​ |\n| room_id​ | String​ | room_id_123​ | 已创建的 RTC 房间的房间 ID。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/signaling_uplink_event",
      "title": "Realtime 上行事件",
      "content": {
        "sections": [],
        "full_text": "Realtime 上行事件\n\n本文介绍扣子编程智能语音信令事件中的上行事件。智能体进房后才能发送上行事件，具体请参见\n\n​\n\n集成音视频 Realtime Web SDK\n\n。\n\n​\n\n说明\n\n事件 ID：每个上行事件 ID 建议不要重复，故障排查场景下便于定位问题。\n\n​\n\n事件发送时机：确保在监听到 Realtime SDK 的 onUserJoined 回调智能体进房后再发送上行事件。\n\n​\n\n事件发送对象：需要发送给房间内的智能体，需要指定传入的 user_id 为创建房间接口传入的 bot_id，而不是创建房间接口返回的 uid。\n\n​\n\n​\n\n更新房间配置\n\n​\n\n事件类型\n\n：\n\nsession.update\n\n​\n\n事件说明\n\n：此事件可更新房间内的配置项。\n\n​\n\n传入哪个字段就改哪个字段，填空值也会更新；若不想修改某个字段，则不要传入该字段更新 RTC 房间的配置信息。支持更新智能体音色、语速等配置，也可以修改 meta_data 等对话配置。 所有参数都是可选的，如果不需要修改某个配置，可以省略对应的参数。\n\n​\n\n若更新成功，会收到下行事件 \"session.updated\"，否则，会收到下行事件 \"error\"。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n必填\n\nsession.update\n\n。\n\n​\n\ndata\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n事件数据，包含会话配置的详细信息。\n\n​\n\ndata.speech_rate\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n模型回复的语速，取值范围 [-50, 100]，默认为 0。-50 表示 0.5 倍速，100 表示 2 倍速。\n\n​\n\ndata.loudness_rate\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n输出音频的音量，取值范围 [-50, 100]，默认为 0。-50 表示 0.5 倍音量，100 表示 2 倍音量。\n\n​\n\ndata.longest_silence_ms\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n当智能体处于长时间沉默状态时，房间将自动解散。此时间以毫秒（ms）为单位计量，默认时长为 180,000 毫秒。\n\n​\n\ndata.event_subscriptions\n\n​\n\nArray<String>\n\n​\n\n可选\n\n​\n\n需要订阅下行事件的事件类型列表。不设置或者设置为空为订阅所有下行事件。\n\n​\n\ndata.chat_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n会话配置。\n\n​\n\ndata.chat_config.meta_data\n\n​\n\nMap<String, String>\n\n​\n\n可选\n\n​\n\n附加信息，通常用于封装一些业务相关的字段。查看对话消息详情时，系统会透传此附加信息。自定义键值对，应指定为 Map 对象格式。长度为 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。\n\n​\n\ndata.chat_config.custom_variables\n\n​\n\nMap<String, String>\n\n​\n\n可选\n\n​\n\n智能体中定义的变量。在智能体 prompt 中设置变量 {{key}} 后，可以通过该参数传入变量值，同时支持 Jinja2 语法。变量名只支持英文字母和下划线。\n\n​\n\ndata.chat_config.extra_params\n\n​\n\nMap<String, String>\n\n​\n\n可选\n\n​\n\n附加参数，通常用于特殊场景下指定一些必要参数供模型判断，例如指定经纬度，并询问智能体此位置的天气。自定义键值对格式，其中键（key）仅支持设置为：\n\n​\n\nlatitude\n\n：纬度，此时值（Value）为纬度值，例如 39.9800718。\n\n​\n\nlongitude\n\n：经度，此时值（Value）为经度值，例如 116.309314。\n\n​\n\ndata.chat_config.plugin_interrupt_mode\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n端插件执行模式，可选值有\n\nblocking\n\n/\n\nnonblocking\n\n，默认为\n\nnonblocking\n\n。\n\n​\n\nblocking\n\n模式下，遇到端插件执行后，会阻塞后续的对话，直到提交端插件结果。\n\n​\n\nnonblocking\n\n模式下，遇到端插件执行后，若未提交端插件结果继续对话，则端插件请求会被丢弃。\n\n​\n\ndata.chat_config.allow_voice_interrupt\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n是否打开语音打断功能，默认为\n\ntrue\n\n。\n\n​\n\ndata.chat_config.interrupt_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n语音打断配置，仅在 allow_voice_interrupt 为\n\ntrue\n\n时生效\n\n​\n\ndata.chat_config.interrupt_config.mode\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n语音打断模式，可选值有\n\nall\n\n/\n\nkeyword_contains\n\n/\n\nkeyword_prefix\n\n，默认为\n\nall\n\n。\n\n​\n\nall\n\n模式下，任意内容都可以打断模型回复。\n\n​\n\nkeyword_contains\n\n模式下，说话内容\n\n包含\n\n关键词才会打断模型回复。例如关键词\"扣子\"，用户正在说“你好呀扣子......” / “扣子你好呀”，模型回复都会被打断。\n\n​\n\nkeyword_prefix\n\n模式下，说话内容\n\n前缀匹配\n\n关键词才会打断模型回复。例如关键词\"扣子\"，用户正在说“扣子你好呀......”，模型回复就会被打断，而用户说“你好呀扣子......”，模型回复不会被打断。\n\n​\n\ndata.chat_config.interrupt_config.keywords\n\n​\n\nArray<String>\n\n​\n\n可选\n\n​\n\n关键词列表，每个关键词长度不超过8个字，最多10个关键词，仅在\n\nkeyword_contains\n\n/\n\nkeyword_prefix\n\n模式下生效。\n\n​\n\ndata.chat_config.parameters\n\n​\n\nMap<String, Any>\n\n​\n\n可选\n\n​\n\n设置对话流的自定义输入参数的值并传递给对话流，具体用法和示例代码可参考\n\n​\n\n为自定义参数赋值\n\n。\n\n​\n\ndata.turn_detection\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n声音检测配置。\n\n​\n\ndata.turn_detection.type\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n语音检测模式，默认为\n\nserver_vad\n\n，可选项包括：\n\n​\n\nserver_vad\n\n：语音活动检测由扣子编程服务端完成，客户端将音频流持续发送到服务端，服务端在接收到音频后，通过服务端 VAD 检测语音的开始和结束。\n\n​\n\nclient_vad\n\n：客户端使用自己的 VAD 检测语音的开始和结束，并将检测到的语音片段发送到服务器进行识别。\n\n​\n\nsemantic_vad\n\n：采用语义判停的自由对话模式（\n\n此功能仅对企业旗舰版用户开放\n\n），由服务端识别语义来判断是否停止说话。\n\n​\n\n详细的检测逻辑请参见\n\n​\n\n如何设置扣子的语音检测模式？\n\n。\n\n​\n\ndata.turn_detection.prefix_padding_ms\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\nVAD 检测到语音之前要包含的音频量，单位为 ms。默认为 600ms。\n\n​\n\ndata.turn_detection.silence_duration_ms\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\nserver_vad\n\n模式下，检测语音停止的静音持续时间，单位为 ms。取值范围为 200~2000，默认为 500ms。\n\n​\n\ndata.turn_detection.semantic_vad_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\nsemantic_vad\n\n模式下，配置判定语音停止的语义检测策略。\n\n​\n\ndata.turn_detection.semantic_vad_config.silence_threshold_ms\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n当用户暂停说话时，持续静音多久后，触发语义判停检测。单位为 ms。默认为 300ms。\n\n​\n\ndata.turn_detection.semantic_vad_config.semantic_unfinished_wait_time_ms\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n当语义检测判断该语句未结束时，持续静音多久后，扣子编程认定语音结束。单位为 ms。默认为 500ms。取值范围为 100~2000。\n\n​\n\ndata.asr_config.stream_mode\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nASR 识别的模式。\n\n​\n\noutput_no_stream\n\n：不会逐字返回语音识别结果，而是等整段语音结束后统一输出完整文本。异步语音消息场景中推荐使用该模式，会整合整句音频信息做上下文分析，减少实时截断导致的误差，提升准确率。\n\n​\n\nbidirectional_stream\n\n（默认值）：逐字的返回语音识别的结果。\n\n​\n\ndata.asr_config.context\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n上下文，限制 800 tokens，超出后自动截断。\n\n​\n\ndata.asr_config.enable_itn\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n将语音转为文本时，是否开启文本规范化（ITN）处理，将识别结果转换为更符合书面表达习惯的格式以提升可读性。默认为\n\ntrue\n\n。\n\n​\n\n开启后，会将口语化数字转换为标准数字格式，示例：\n\n​\n\n将\n\n两点十五分\n\n转换为\n\n14:15\n\n。\n\n​\n\n将\n\n一百美元\n\n转换为\n\n$100\n\n。\n\n​\n\ndata.asr_config.enable_punc\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n将语音转为文本时，是否给文本加上标点符号。默认为\n\ntrue\n\n。\n\n​\n\ndata.asr_config.enable_ddc\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n将语音转为文本时，是否启用顺滑，默认为\n\ntrue\n\n。\n\n​\n\ntrue\n\n：系统在进行语音处理时，会去掉识别结果中诸如 “啊”“嗯” 等语气词，使得输出的文本语义更加流畅自然，符合正常的语言表达习惯，尤其适用于对文本质量要求较高的场景，如正式的会议记录、新闻稿件生成等。\n\n​\n\nfalse\n\n：系统不会对识别结果中的语气词进行处理，识别结果会保留原始的语气词。\n\n​\n\ndata.asr_config.enable_nostream\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n是否开启\n\n二次识别模式\n\n：\n\n​\n\ntrue\n\n：会实时返回逐字识别的文本；当一句话结束时，会结合整句音频进行上下文分析并重新识别，生成优化后的识别结果并返回。这种机制既能满足客户实时上屏的需求，又能确保最终结果的识别准确率。\n\n​\n\nfalse\n\n（默认值）：仅进行一次实时识别，逐字返回文本，不会在一句话结束时重新识别分句，可能存在一定的识别误差。\n\n​\n\ndata.asr_config.enable_emotion\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n识别说话人的情绪\n\n。仅在\n\ndata.asr_config.stream_mode\n\n为\n\noutput_no_stream\n\n时生效。默认为\n\nfalse\n\n。\n\n​\n\n支持的情绪标签包括：\n\n​\n\nangry\n\n：表示情绪为生气\n\n​\n\nhappy\n\n：表示情绪为开心\n\n​\n\nneutral\n\n：表示情绪为平静或中性\n\n​\n\nsad\n\n：表示情绪为悲伤\n\n​\n\nsurprise\n\n：表示情绪为惊讶\n\n​\n\ndata.asr_config.enable_gender\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n是否开启识别说话人的性别（male/female），仅在\n\ndata.asr_config.stream_mode\n\n为\n\noutput_no_stream\n\n时生效。默认为\n\nfalse\n\n。\n\n​\n\ndata.asr_config.sensitive_words_filter\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n敏感词过滤功能，支持以下 3 种过滤方式：\n\n​\n\n过滤系统敏感词，并替换为\n\n*\n\n。\n\n​\n\n过滤自定义敏感词，并替换为空。\n\n​\n\n过滤自定义敏感词，并替换为\n\n*\n\n。\n\n​\n\ndata.asr_config.sensitive_words_filter.system_reserved_filter\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n是否过滤系统自带的敏感词，并将\n\n匹配到的敏感词替换为\n\n*\n\n。（系统自带敏感词主要包含一些限制级词汇）。默认为\n\nfalse\n\n。\n\n​\n\ndata.asr_config.sensitive_words_filter.filter_with_empty\n\n​\n\nArray<string>\n\n​\n\n可选\n\n​\n\n自定义需替换为空的敏感词列表。\n\n​\n\ndata.asr_config.sensitive_words_filter.filter_with_signed\n\n​\n\nArray<string>\n\n​\n\n可选\n\n​\n\n自定义需替换为\n\n*\n\n的敏感词列表。\n\n​\n\ndata.voice_print_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n声纹识别配置。\n\n​\n\ndata.voice_print_config.group_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n声纹组 ID。语音通话时，扣子编程会在该声纹组内进行查找匹配对应的声纹，当声纹匹配度高于\n\nscore\n\n阈值，则认为是同一个人的声音。\n\n​\n\n你可以通过\n\n查看声纹组列表\n\nAPI 查看声纹组 ID。\n\n​\n\ndata.voice_print_config.score\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n声纹匹配的命中阈值，即声音匹配度的最低标准。当声音匹配度达到或超过该阈值时，扣子编程才会认定声纹匹配成功。你可以根据应用的安全性要求进行自定义设置。如果匹配了多轮声纹，扣子编程会取相似度最高的一个。\n\n​\n\n取值范围：0~100，默认值：40。\n\n​\n\ndata.voice_print_config.reuse_voice_info\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n当本轮对话未命中任何声纹时，是否沿用历史声纹信息。\n\n​\n\ntrue\n\n：未命中声纹时，智能体将返回上一次命中的声纹。适用于连续对话场景，当收音不好等情况导致声纹没能正确被识别时，保障对话的连贯性。\n\n​\n\nfalse\n\n：（默认值）未命中声纹时，智能体返回空的声纹信息。\n\n​\n\ndata.voice_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n音色 ID。\n\n​\n\ndata.tts_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n配置语音合成的相关参数，用于控制合成语音的整体风格与情感表达，包括辅助信息（如情绪、方言、语气等）、多情感音色的情感类型及强度等。\n\n​\n\ndata.tts_config.context_texts\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n语音合成的辅助信息，用于控制合成语音的整体情绪（如悲伤、生气）、方言（如四川话、北京话）、语气（如撒娇、暧昧、吵架、夹子\n\n音）、语速（快慢）及音调（高低）等。默认为空。\n\n​\n\n示例：用低沉沙哑的语气、带着沧桑与绝望地说。\n\n​\n\n说明\n\n仅当\n\nvoice_id\n\n为\n\n豆包语音合成大模型 2.0 音色\n\n时才支持该参数，具体支持的音色列表请参见\n\n​\n\n系统音色列表\n\n。\n\n​\n\n更多关于豆包语音合成 2.0 的\n\ncontext_texts\n\n示例和效果可参考\n\n语音指令-示例库\n\n。\n\n​\n\n​\n\ndata.tts_config.emotion\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n设置多情感音色的情感类型，仅当\n\nvoice_id\n\n为多情感音色时才需要设置。\n\n​\n\n不同音色支持的情感范围不同，可以通过\n\n系统音色列表\n\n查看各音色支持的情感。默认为空。枚举值如下：\n\n​\n\nhappy-开心\n\n​\n\nsad-悲伤\n\n​\n\nangry-生气\n\n​\n\nsurprised-惊讶\n\n​\n\nfear-恐惧\n\n​\n\nhate-厌恶\n\n​\n\nexcited-激动\n\n​\n\ncoldness-冷漠\n\n​\n\nneutral-中性\n\n​\n\ndata.tts_config.emotion_scale\n\n​\n\nFloat\n\n​\n\n可选\n\n​\n\n情感值用于量化情感的强度。数值越高，情感表达越强烈，例如： “开心” 的情感值 5 比 1 更显兴奋。\n\n​\n\n仅当\n\nvoice_id\n\n为多情感音色时才需要设置。\n\n​\n\n取值范围：1.0~5.0，默认值：4.0。\n\n​\n\ndata.voice_processing_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n语音降噪配置。默认不启用降噪。\n\n​\n\n说明\n\n仅扣子企业旗舰版支持该配置。\n\n​\n\n​\n\ndata.voice_processing_config.enable_ans\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n主动噪声抑制。自动识别并过滤掉背景环境中的各种噪音（如键盘声、空调声、街道嘈杂声），让说话者的声音更清晰。\n\n​\n\n此功能与下面的\n\nenable_pdns\n\n（声纹降噪）只能\n\n二选一开启\n\n，不能同时使用。\n\n​\n\ndata.voice_processing_config.enable_pdns\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n声纹降噪。专门针对\n\n特定说话人\n\n的声音进行优化，能更精准地保留目标人声。\n\n​\n\n此功能与上面的\n\nenable_ans\n\n只能\n\n二选一开启\n\n，不能同时使用。\n\n​\n\n提供两种模式，你可以根据需要选择：\n\n​\n\n自动提取：设置简单，开箱即用。默认为该模式。\n\n降噪生效稍微有延迟\n\n，服务端需要先听你说一会儿话才能提取出你的声纹特征，在此期间降噪效果可能不佳。另外，提取声纹会受到用户说话场景影响，准确性上可能会弱于主动设置。\n\n​\n\n主动设置：\n\n降噪效果更精准、更快速\n\n，在对话开始时就立即生效。不过需要提前录制声纹并在\n\nvoice_print_feature_id\n\n中设置声纹 ID。\n\n​\n\ndata.voice_print_config.feature_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n目标说话人的声纹 ID。当你选择开启\n\nenable_pdns\n\n（声纹降噪）并希望使用\n\n主动设置\n\n模式时，需要在此处填入你提前录制好的声纹 ID。\n\n​\n\n你可以通过扣子编程录制声纹，具体请参见\n\n​\n\n声纹识别\n\n，或通过\n\n​\n\n创建声纹\n\nAPI 上传声纹并获取声纹 ID。\n\n​\n\n​\n\n事件示例：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"7446668538246561828\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"session.update\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"voice_id\"\n\n:\n\n\"7426720361733046281\"\n\n,\n\n// 音色 ID\n\n​\n\n\"speech_rate\"\n\n:\n\n0\n\n,\n\n// [-50, 100]\n\n​\n\n\"longest_silence_ms\"\n\n:\n\n180000\n\n,\n\n​\n\n\"event_subscriptions\"\n\n:\n\n[\n\n\"error\"\n\n],\n\n​\n\n\"chat_config\"\n\n:\n\n{\n\n​\n\n\"meta_data\"\n\n:\n\n{\n\n​\n\n\"a\"\n\n:\n\n\"123\"\n\n​\n\n},\n\n​\n\n\"custom_variables\"\n\n:\n\n{\n\n​\n\n\"a\"\n\n:\n\n\"123\"\n\n​\n\n},\n\n​\n\n\"extra_params\"\n\n:\n\n{\n\n​\n\n\"a\"\n\n:\n\n\"123\"\n\n​\n\n},\n\n​\n\n\"plugin_interrupt_mode\"\n\n:\n\n\"nonblocking\"\n\n,\n\n// 控制收到端插件执行中断信号后，没有提交端执行请求时的模型\n\n​\n\n// 端插件的执行模型，默认不阻塞，blocking/nonblocking，阻塞的场景如果不提交端执行请求就会让语音链路一直block住\n\n​\n\n\"allow_voice_interrupt\"\n\n:\n\ntrue\n\n,\n\n​\n\n\"interrupt_config\"\n\n:\n\n{\n\n​\n\n\"mode\"\n\n:\n\n\"keyword_prefix\"\n\n,\n\n​\n\n\"keywords\"\n\n:\n\n[\n\n\"扣子\"\n\n]\n\n​\n\n},\n\n​\n\n\"parameters\"\n\n:\n\n{\n\n​\n\n\"a\"\n\n:\n\n123\n\n,\n\n​\n\n\"b\"\n\n:\n\n\"abc\"\n\n​\n\n}\n\n​\n\n},\n\n​\n\n\"turn_detection\"\n\n:\n\n{\n\n​\n\n\"type\"\n\n:\n\n\"server_vad\"\n\n,\n\n// server_vad/client_vad\n\n​\n\n\"prefix_padding_ms\"\n\n:\n\n600\n\n,\n\n​\n\n\"silence_duration_ms\"\n\n:\n\n500\n\n​\n\n},\n\n​\n\n\"asr_config\"\n\n:\n\n{\n\n​\n\n\"hot_words\"\n\n:\n\n[\n\n\"扣子\"\n\n],\n\n​\n\n\"enable_itn\"\n\n:\n\ntrue\n\n,\n\n​\n\n\"enable_punc\"\n\n:\n\ntrue\n\n,\n\n​\n\n\"enable_ddc\"\n\n:\n\ntrue\n\n​\n\n}\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n提交端插件执行结果\n\n​\n\n事件类型\n\n：\n\nconversation.chat.submit_tool_outputs\n\n​\n\n事件说明\n\n：你可以将需要客户端执行的操作定义为插件，对话中如果触发这个插件，会收到一个\n\nevent_type = “conversation.chat.requires_action”\n\n的下行事件，此时需要执行客户端的操作后，通过此上行事件来提交插件执行后的结果。作用等同于\n\n​\n\n提交工具执行结果\n\nAPI。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n事件 ID，也就是事件的唯一标识。由客户端生成，在故障排查场景下用于定位具体的事件，便于排查问题。\n\n​\n\nevent_type\n\n​\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为 conversation.chat.submit_tool_outputs。\n\n​\n\ndata\n\n​\n\nchat_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n对话 ID。\n\n​\n\n​\n\ntool_outputs\n\n​\n\nJSON Array\n\n​\n\n必选\n\n​\n\n工具执行结果。具体的结构定义可参考\n\n​\n\n提交工具执行结果\n\nAPI。\n\n​\n\n​\n\ntool_outputs.tool_call_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n上报运行结果的 ID。你可以在\n\n端插件请求\n\n事件的 tool_calls 字段下查看此 ID。\n\n​\n\n​\n\ntool_outputs.output\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n工具的执行结果。\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"7446668538246561829\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"conversation.chat.submit_tool_outputs\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"chat_id\"\n\n:\n\n\"7446675275930271785\"\n\n,\n\n​\n\n\"tool_outputs\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"tool_call_id\"\n\n:\n\n\"BUJJRUUVEhJGERVeEkRDFV5HEkJAXktLQBZeEEAXREpLSxZFR****=\"\n\n,\n\n​\n\n\"output\"\n\n:\n\n\"{\\\"url\\\":\\\"https://lf3-bot-platform-tos-sign.coze.cn/bot-studio-bot-platform/bot_files/323733792754532/image/jpeg/7446661351415529491/blob****\\\"}\"\n\n​\n\n}\n\n​\n\n]\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n中断 Agent 语音输出\n\n​\n\n事件类型\n\n：\n\nconversation.chat.cancel\n\n​\n\n事件说明\n\n：发送此事件可取消正在进行的对话。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nstring\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nstring\n\n​\n\n必选\n\n​\n\n固定为conversation.chat.cancel。\n\n​\n\n​\n\n事件示例：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"7446668538246561827\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"conversation.chat.cancel\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{}\n\n​\n\n}\n\n​\n\n​\n\n手动提交对话内容\n\n​\n\n事件类型\n\n：conversation.message.create\n\n​\n\n事件说明\n\n：\n\n​\n\n若 role=user，提交事件后就会生成语音回复，适合如下的场景，比如帮我解析xx链接，帮我分析这个图片的内容等。\n\n​\n\n若 role=assistant，提交事件后会加入到对话的上下文。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\n​\n\nstring\n\n​\n\n必\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\n​\n\nstring\n\n​\n\n必选\n\n​\n\n固定为conversation.message.create。\n\n​\n\ndata\n\n​\n\nrole\n\n​\n\nstring\n\n​\n\n​\n\n必选\n\n​\n\n发送这条消息的实体。取值：\n\n​\n\nuser\n\n：代表该条消息内容是用户发送的。\n\n​\n\nassistant\n\n：代表该条消息内容是智能体发送的。\n\n​\n\n​\n\ncontent_type\n\n​\n\n​\n\nstring\n\n​\n\n必选\n\n​\n\n消息内容的类型，支持设置为：\n\n​\n\ntext：文本\n\n​\n\nobject_string：多模态内容，即文本和文件的组合、文本和图片的组合，参考\n\n​\n\n​\n\ncontent\n\n​\n\nstring\n\n​\n\n必选\n\n​\n\n消息的内容，支持纯文本、多模态（文本、图片、文件混合输入）、卡片等多种类型的内容。参考\n\nobject_string object\n\n。\n\n​\n\n​\n\n事件示例：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"7446668538246561826\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"conversation.message.create\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"role\"\n\n:\n\n\"user\"\n\n,\n\n// user/assistant\n\n​\n\n\"content_type\"\n\n:\n\n\"object_string\"\n\n,\n\n// text/object_string\n\n​\n\n\"content\"\n\n:\n\n\"[{\\\"type\\\":\\\"text\\\",\\\"text\\\":\\\"帮我看看这个PDF里有什么内容？\\\"},{\\\"type\\\":\\\"file\\\",\\\"file_url\\\":\\\"https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/eaafba63-0d96-4ea6-b60c-fbadcf2c25e9.?lk3s=edeb9e45&x-expires=1718296132&x-signature=YtlsUsvSeLJi6x31I%2F4S9X53Y6Y%3D\\\"}]\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n客户端 VAD 检测\n\n​\n\n事件类型\n\n：\n\nclient.vad\n\n​\n\n事件说明\n\n：客户端侧的 VAD 检测结果，仅在\n\nturn_detection.type=\"client_vad\"\n\n时生效。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\n​\n\nstring\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\n​\n\nstring\n\n​\n\n必选\n\n​\n\n固定为client.vad。\n\n​\n\ndata\n\n​\n\nvad\n\n​\n\nboolean\n\n​\n\n必选\n\n​\n\n客户端自行检测的 vad 值，只需在变化时上传。\n\n​\n\n​\n\n事件示例：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"74466685382465618283\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"client.vad\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"vad\"\n\n:\n\ntrue\n\n/\n\nfalse\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n更新安抚配置\n\n​\n\n事件类型\n\n：\n\nsession.pre_answer.update\n\n​\n\n事件说明\n\n：此事件可更新房间内的安抚配置，若更新成功，会收到下行事件 \"session.pre_answer.updated\"，否则，会收到下行事件 \"error\"。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\nsession.pre_answer.update\n\n。\n\n​\n\ndata\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件数据，包含安抚配置的详细信息。\n\n​\n\ndata.pre_answer\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n安抚配置。\n\n​\n\ndata.pre_answer.type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n安抚生成类型，可选类型有\n\nnone\n\n/\n\naudio\n\n/\n\ntext\n\n/\n\nbot\n\n。\n\n​\n\nnone\n\n：取消安抚策略，默认值。\n\n​\n\naudio\n\n：根据用户上传的音频文件作为安抚语。\n\n​\n\ntext\n\n：根据用户输入的文本生成安抚语。\n\n​\n\nbot\n\n：指定另一个智能体作为安抚语的生成载体。\n\n​\n\ndata.pre_answer.file_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n仅在\n\naudio\n\n模式下生效，用户需要先通过上传文件接口上传一个音频文件，传入该接口返回的\n\nfile_id\n\n。当前仅支持\n\nwav\n\n\\\n\nmp3\n\n音频文件。\n\n​\n\ndata.pre_answer.pre_answer_list\n\n​\n\nArray<String>\n\n​\n\n可选\n\n​\n\n仅在\n\ntext\n\n模式下生效，用户可以输入一批文本，会在触发安抚策略时随机选取一段文本作为安抚语播放。每段文本的长度上限为 10 个字符。\n\n​\n\ndata.pre_answer.bot_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n仅在\n\nbot\n\n模式下生效，ASR 识别的文本会同时请求这个\n\nBotID\n\n，并将该智能体回复的内容作为安抚语。传入的智能体必须是属于当前用户的智能体。该策略会消耗额外的 Token。\n\n​\n\ndata.trigger\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n触发相关配置。\n\n​\n\ndata.trigger.type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n安抚策略的触发类型，可选类型有\n\nmandatory\n\n/\n\ntime-trigger\n\n/\n\nevent-driven\n\n。\n\n​\n\nmandatory\n\n：必定触发安抚策略，默认值。\n\n​\n\ntime-trigger\n\n：一段时间后模型没有生成回复，就会触发安抚策略。\n\n​\n\nevent-driven\n\n：模型触发 function call 就会触发安抚策略。\n\n​\n\ndata.trigger.time_after\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n仅在\n\ntime-trigger\n\n模式下生效，指定在等待多长时间后触发安抚策略，单位为 ms，取值范围 [0, 3000]，默认值为 1500ms。\n\n​\n\n​\n\n事件示例：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"7446668538246561822\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"session.pre_answer.update\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"pre_answer\"\n\n:\n\n{\n\n​\n\n\"type\"\n\n:\n\n\"none\"\n\n,\n\n​\n\n\"file_id\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"pre_answer_list\"\n\n:\n\n[\n\n\"\"\n\n],\n\n​\n\n\"bot_id\"\n\n:\n\n\"\"\n\n​\n\n},\n\n​\n\n\"trigger\"\n\n:\n\n{\n\n​\n\n\"type\"\n\n:\n\n\"mandatory\"\n\n,\n\n​\n\n\"time_after\"\n\n:\n\n1500\n\n​\n\n}\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n更新房间模式\n\n​\n\n事件类型\n\n：\n\nmode.update\n\n​\n\n事件说明\n\n：更新房间的模式，若更新成功，会收到\n\nmode.updated\n\n下行事件，否则，会收到下行事件 \"error\"。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\nmode.update\n\n。\n\n​\n\ndata\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件数据，包含房间模式和对话设置。\n\n​\n\ndata.mode\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n房间模式。\n\n​\n\n默认为\n\nchat\n\n，即对话模式，跟智能体进行聊天。\n\n​\n\ndata.mode.chat\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n对话模式下的设置，仅当\n\nmode\n\n为\n\nchat\n\n时生效。\n\n​\n\ndata.chat.user_language\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n用户说话的语种，默认为\n\ncommon\n\n支持\n\n中英文、上海话、闽南语，四川、陕西、粤语\n\n识别。\n\n仅在\n\ndata.asr_config.stream_mode\n\n为\n\noutput_no_stream\n\n时可以指定设置语种。\n\n当将其设置为下方特定键时，它可以识别指定语言。\n\n​\n\n英语：en-US\n\n​\n\n日语：ja-JP\n\n​\n\n印尼语：id-ID\n\n​\n\n西班牙语：es-MX\n\n​\n\n葡萄牙语：pt-BR\n\n​\n\n德语：de-DE\n\n​\n\n法语：fr-FR\n\n​\n\n韩语：ko-KR\n\n​\n\n菲律宾语：fil-PH\n\n​\n\n马来语：ms-MY\n\n​\n\n泰语：th-TH\n\n​\n\n阿拉伯语：ar-SA\n\n​\n\n例如，如果输入音频是德语，则此参数传入de-DE\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"mode.update\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"mode\"\n\n:\n\n\"chat\"\n\n,\n\n​\n\n\"chat\"\n\n:\n\n{\n\n​\n\n\"user_language\"\n\n:\n\n\"common\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n语音合成\n\n​\n\n事件类型\n\n：\n\ninput_text.generate_audio\n\n​\n\n事件说明\n\n：你可以主动提交一段文字用来做语音合成，提交的消息不会触发智能体的回复，只会合成音频内容下发到客户端。提交事件的时候如果智能体正在输出语音会被中断输出。适合在和智能体聊天过程中客户端长时间没有响应，智能体可以主动说话暖场的场景。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\ninput_text.generate_audio\n\n。\n\n​\n\ndata\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件数据。\n\n​\n\ndata.mode\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n消息内容的类型，支持设置为：\n\n​\n\ntext\n\n：文本\n\n​\n\ndata.text\n\n​\n\nstring\n\n​\n\n可选\n\n​\n\n当\n\nmode == text\n\n时候必填。长度限制 (0, 1024) 字节\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"744666853824656xxxx\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"input_text.generate_audio\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"mode\"\n\n:\n\n\"text\"\n\n,\n\n​\n\n\"text\"\n\n:\n\n\"亲，你怎么不说话了。\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n用户开始说话\n\n​\n\n事件类型\n\n：\n\ninput_audio_buffer.start\n\n​\n\n事件说明\n\n：发送此事件表示用户开始说话。仅在\n\n按键说话\n\n模式下生效。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nstring\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nstring\n\n​\n\n必选\n\n​\n\n固定为\n\ninput_audio_buffer.start\n\n。\n\n​\n\n​\n\n事件示例：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"7446668538246561827\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"input_audio_buffer.start\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{}\n\n​\n\n}\n\n​\n\n​\n\n用户结束说话\n\n​\n\n事件类型\n\n：\n\ninput_audio_buffer.complete\n\n​\n\n事件说明\n\n：发送此事件表示用户结束说话。仅在\n\n按键说话\n\n模式下生效。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nstring\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nstring\n\n​\n\n必选\n\n​\n\n固定为\n\ninput_audio_buffer.complete\n\n。\n\n​\n\n​\n\n事件示例：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"7446668538246561827\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"input_audio_buffer.complete\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{}\n\n​\n\n}\n\n​\n\n​\n\n​\n\n上一篇\n\n创建房间\n\n下一篇\n\nRealtime 下行事件",
        "links": [
          {
            "text": "查看声纹组列表",
            "href": "https://www.coze.cn/open/docs/developer_guides/list_voiceprint_group"
          },
          {
            "text": "系统音色列表",
            "href": "https://www.coze.cn/open/docs/dev_how_to_guides/sys_voice"
          }
        ]
      },
      "markdown": "- 事件 ID：每个上行事件 ID 建议不要重复，故障排查场景下便于定位问题。 ​\n\n- 事件发送时机：确保在监听到 Realtime SDK 的 onUserJoined 回调智能体进房后再发送上行事件。 ​\n\n- 事件发送对象：需要发送给房间内的智能体，需要指定传入的 user_id 为创建房间接口传入的 bot_id，而不是创建房间接口返回的 uid。 ​\n\n- 事件类型 ： session.update ​\n\n- 事件说明 ：此事件可更新房间内的配置项。 ​\n\n- 传入哪个字段就改哪个字段，填空值也会更新；若不想修改某个字段，则不要传入该字段更新 RTC 房间的配置信息。支持更新智能体音色、语速等配置，也可以修改 meta_data 等对话配置。 所有参数都是可选的，如果不需要修改某个配置，可以省略对应的参数。 ​\n\n- 若更新成功，会收到下行事件 \"session.updated\"，否则，会收到下行事件 \"error\"。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ String ​ 必选 ​ 客户端自行生成的事件 ID，方便定位问题。 ​ event_type ​ String ​ 必选 ​ 必填 session.update 。 ​ data ​ Object ​ 可选 ​ 事件数据，包含会话配置的详细信息。 ​ data.speech_rate ​ Integer ​ 可选 ​ 模型回复的语速，取值范围 [-50, 100]，默认为 0。-50 表示 0.5 倍速，100 表示 2 倍速。 ​ data.loudness_rate ​ Integer ​ 可选 ​ 输出音频的音量，取值范围 [-50, 100]，默认为 0。-50 表示 0.5 倍音量，100 表示 2 倍音量。 ​ data.longest_silence_ms ​ Integer ​ 可选 ​ 当智能体处于长时间沉默状态时，房间将自动解散。此时间以毫秒（ms）为单位计量，默认时长为 180,000 毫秒。 ​ data.event_subscriptions ​ Array<String> ​ 可选 ​ 需要订阅下行事件的事件类型列表。不设置或者设置为空为订阅所有下行事件。 ​ data.chat_config ​ Object ​ 可选 ​ 会话配置。 ​ data.chat_config.meta_data ​ Map<String, String> ​ 可选 ​ 附加信息，通常用于封装一些业务相关的字段。查看对话消息详情时，系统会透传此附加信息。自定义键值对，应指定为 Map 对象格式。长度为 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。 ​ data.chat_config.custom_variables ​ Map<String, String> ​ 可选 ​ 智能体中定义的变量。在智能体 prompt 中设置变量 {{key}} 后，可以通过该参数传入变量值，同时支持 Jinja2 语法。变量名只支持英文字母和下划线。 ​ data.chat_config.extra_params ​ Map<String, String> ​ 可选 ​ 附加参数，通常用于特殊场景下指定一些必要参数供模型判断，例如指定经纬度，并询问智能体此位置的天气。自定义键值对格式，其中键（key）仅支持设置为： ​ latitude ：纬度，此时值（Value）为纬度值，例如 39.9800718。 ​ longitude ：经度，此时值（Value）为经度值，例如 116.309314。 ​ data.chat_config.plugin_interrupt_mode ​ String ​ 可选 ​ 端插件执行模式，可选值有 blocking / nonblocking ，默认为 nonblocking 。 ​ blocking 模式下，遇到端插件执行后，会阻塞后续的对话，直到提交端插件结果。 ​ nonblocking 模式下，遇到端插件执行后，若未提交端插件结果继续对话，则端插件请求会被丢弃。 ​ data.chat_config.allow_voice_interrupt ​ Boolean ​ 可选 ​ 是否打开语音打断功能，默认为 true 。 ​ data.chat_config.interrupt_config ​ Object ​ 可选 ​ 语音打断配置，仅在 allow_voice_interrupt 为 true 时生效 ​ data.chat_config.interrupt_config.mode ​ String ​ 必选 ​ 语音打断模式，可选值有 all / keyword_contains / keyword_prefix ，默认为 all 。 ​ all 模式下，任意内容都可以打断模型回复。 ​ keyword_contains 模式下，说话内容 包含 关键词才会打断模型回复。例如关键词\"扣子\"，用户正在说“你好呀扣子......” / “扣子你好呀”，模型回复都会被打断。 ​ keyword_prefix 模式下，说话内容 前缀匹配 关键词才会打断模型回复。例如关键词\"扣子\"，用户正在说“扣子你好呀......”，模型回复就会被打断，而用户说“你好呀扣子......”，模型回复不会被打断。 ​ data.chat_config.interrupt_config.keywords ​ Array<String> ​ 可选 ​ 关键词列表，每个关键词长度不超过8个字，最多10个关键词，仅在 keyword_contains / keyword_prefix 模式下生效。 ​ data.chat_config.parameters ​ Map<String, Any> ​ 可选 ​ 设置对话流的自定义输入参数的值并传递给对话流，具体用法和示例代码可参考 ​ 为自定义参数赋值 。 ​ data.turn_detection ​ Object ​ 可选 ​ 声音检测配置。 ​ data.turn_detection.type ​ String ​ 可选 ​ 语音检测模式，默认为 server_vad ，可选项包括： ​ server_vad ：语音活动检测由扣子编程服务端完成，客户端将音频流持续发送到服务端，服务端在接收到音频后，通过服务端 VAD 检测语音的开始和结束。 ​ client_vad ：客户端使用自己的 VAD 检测语音的开始和结束，并将检测到的语音片段发送到服务器进行识别。 ​ semantic_vad ：采用语义判停的自由对话模式（ 此功能仅对企业旗舰版用户开放 ），由服务端识别语义来判断是否停止说话。 ​ 详细的检测逻辑请参见 ​ 如何设置扣子的语音检测模式？ 。 ​ data.turn_detection.prefix_padding_ms ​ Integer ​ 可选 ​ VAD 检测到语音之前要包含的音频量，单位为 ms。默认为 600ms。 ​ data.turn_detection.silence_duration_ms ​ Integer ​ 可选 ​ server_vad 模式下，检测语音停止的静音持续时间，单位为 ms。取值范围为 200~2000，默认为 500ms。 ​ data.turn_detection.semantic_vad_config ​ Object ​ 可选 ​ semantic_vad 模式下，配置判定语音停止的语义检测策略。 ​ data.turn_detection.semantic_vad_config.silence_threshold_ms ​ Integer ​ 可选 ​ 当用户暂停说话时，持续静音多久后，触发语义判停检测。单位为 ms。默认为 300ms。 ​ data.turn_detection.semantic_vad_config.semantic_unfinished_wait_time_ms ​ Integer ​ 可选 ​ 当语义检测判断该语句未结束时，持续静音多久后，扣子编程认定语音结束。单位为 ms。默认为 500ms。取值范围为 100~2000。 ​ data.asr_config.stream_mode ​ String ​ 可选 ​ ASR 识别的模式。 ​ output_no_stream ：不会逐字返回语音识别结果，而是等整段语音结束后统一输出完整文本。异步语音消息场景中推荐使用该模式，会整合整句音频信息做上下文分析，减少实时截断导致的误差，提升准确率。 ​ bidirectional_stream （默认值）：逐字的返回语音识别的结果。 ​ data.asr_config.context ​ String ​ 可选 ​ 上下文，限制 800 tokens，超出后自动截断。 ​ data.asr_config.enable_itn ​ Boolean ​ 可选 ​ 将语音转为文本时，是否开启文本规范化（ITN）处理，将识别结果转换为更符合书面表达习惯的格式以提升可读性。默认为 true 。 ​ 开启后，会将口语化数字转换为标准数字格式，示例： ​ 将 两点十五分 转换为 14:15 。 ​ 将 一百美元 转换为 $100 。 ​ data.asr_config.enable_punc ​ Boolean ​ 可选 ​ 将语音转为文本时，是否给文本加上标点符号。默认为 true 。 ​ data.asr_config.enable_ddc ​ Boolean ​ 可选 ​ 将语音转为文本时，是否启用顺滑，默认为 true 。 ​ true ：系统在进行语音处理时，会去掉识别结果中诸如 “啊”“嗯” 等语气词，使得输出的文本语义更加流畅自然，符合正常的语言表达习惯，尤其适用于对文本质量要求较高的场景，如正式的会议记录、新闻稿件生成等。 ​ false ：系统不会对识别结果中的语气词进行处理，识别结果会保留原始的语气词。 ​ data.asr_config.enable_nostream ​ Boolean ​ 可选 ​ 是否开启 二次识别模式 ： ​ true ：会实时返回逐字识别的文本；当一句话结束时，会结合整句音频进行上下文分析并重新识别，生成优化后的识别结果并返回。这种机制既能满足客户实时上屏的需求，又能确保最终结果的识别准确率。 ​ false （默认值）：仅进行一次实时识别，逐字返回文本，不会在一句话结束时重新识别分句，可能存在一定的识别误差。 ​ data.asr_config.enable_emotion ​ Boolean ​ 可选 ​ 识别说话人的情绪 。仅在 data.asr_config.stream_mode 为 output_no_stream 时生效。默认为 false 。 ​ 支持的情绪标签包括： ​ angry ：表示情绪为生气 ​ happy ：表示情绪为开心 ​ neutral ：表示情绪为平静或中性 ​ sad ：表示情绪为悲伤 ​ surprise ：表示情绪为惊讶 ​ data.asr_config.enable_gender ​ Boolean ​ 可选 ​ 是否开启识别说话人的性别（male/female），仅在 data.asr_config.stream_mode 为 output_no_stream 时生效。默认为 false 。 ​ data.asr_config.sensitive_words_filter ​ Object ​ 可选 ​ 敏感词过滤功能，支持以下 3 种过滤方式： ​ 过滤系统敏感词，并替换为 * 。 ​ 过滤自定义敏感词，并替换为空。 ​ 过滤自定义敏感词，并替换为 * 。 ​ data.asr_config.sensitive_words_filter.system_reserved_filter ​ Boolean ​ 可选 ​ 是否过滤系统自带的敏感词，并将 匹配到的敏感词替换为 * 。（系统自带敏感词主要包含一些限制级词汇）。默认为 false 。 ​ data.asr_config.sensitive_words_filter.filter_with_empty ​ Array<string> ​ 可选 ​ 自定义需替换为空的敏感词列表。 ​ data.asr_config.sensitive_words_filter.filter_with_signed ​ Array<string> ​ 可选 ​ 自定义需替换为 * 的敏感词列表。 ​ data.voice_print_config ​ Object ​ 可选 ​ 声纹识别配置。 ​ data.voice_print_config.group_id ​ String ​ 可选 ​ 声纹组 ID。语音通话时，扣子编程会在该声纹组内进行查找匹配对应的声纹，当声纹匹配度高于 score 阈值，则认为是同一个人的声音。 ​ 你可以通过 查看声纹组列表 API 查看声纹组 ID。 ​ data.voice_print_config.score ​ Integer ​ 可选 ​ 声纹匹配的命中阈值，即声音匹配度的最低标准。当声音匹配度达到或超过该阈值时，扣子编程才会认定声纹匹配成功。你可以根据应用的安全性要求进行自定义设置。如果匹配了多轮声纹，扣子编程会取相似度最高的一个。 ​ 取值范围：0~100，默认值：40。 ​ data.voice_print_config.reuse_voice_info ​ Boolean ​ 可选 ​ 当本轮对话未命中任何声纹时，是否沿用历史声纹信息。 ​ true ：未命中声纹时，智能体将返回上一次命中的声纹。适用于连续对话场景，当收音不好等情况导致声纹没能正确被识别时，保障对话的连贯性。 ​ false ：（默认值）未命中声纹时，智能体返回空的声纹信息。 ​ data.voice_id ​ String ​ 可选 ​ 音色 ID。 ​ data.tts_config ​ Object ​ 可选 ​ 配置语音合成的相关参数，用于控制合成语音的整体风格与情感表达，包括辅助信息（如情绪、方言、语气等）、多情感音色的情感类型及强度等。 ​ data.tts_config.context_texts ​ String ​ 可选 ​ 语音合成的辅助信息，用于控制合成语音的整体情绪（如悲伤、生气）、方言（如四川话、北京话）、语气（如撒娇、暧昧、吵架、夹子 音）、语速（快慢）及音调（高低）等。默认为空。 ​ 示例：用低沉沙哑的语气、带着沧桑与绝望地说。 ​ 说明 仅当 voice_id 为 豆包语音合成大模型 2.0 音色 时才支持该参数，具体支持的音色列表请参见 ​ 系统音色列表 。 ​ 更多关于豆包语音合成 2.0 的 context_texts 示例和效果可参考 语音指令-示例库 。 ​ ​ data.tts_config.emotion ​ String ​ 可选 ​ 设置多情感音色的情感类型，仅当 voice_id 为多情感音色时才需要设置。 ​ 不同音色支持的情感范围不同，可以通过 系统音色列表 查看各音色支持的情感。默认为空。枚举值如下： ​ happy-开心 ​ sad-悲伤 ​ angry-生气 ​ surprised-惊讶 ​ fear-恐惧 ​ hate-厌恶 ​ excited-激动 ​ coldness-冷漠 ​ neutral-中性 ​ data.tts_config.emotion_scale ​ Float ​ 可选 ​ 情感值用于量化情感的强度。数值越高，情感表达越强烈，例如： “开心” 的情感值 5 比 1 更显兴奋。 ​ 仅当 voice_id 为多情感音色时才需要设置。 ​ 取值范围：1.0~5.0，默认值：4.0。 ​ data.voice_processing_config ​ Object ​ 可选 ​ 语音降噪配置。默认不启用降噪。 ​ 说明 仅扣子企业旗舰版支持该配置。 ​ ​ data.voice_processing_config.enable_ans ​ Boolean ​ 可选 ​ 主动噪声抑制。自动识别并过滤掉背景环境中的各种噪音（如键盘声、空调声、街道嘈杂声），让说话者的声音更清晰。 ​ 此功能与下面的 enable_pdns （声纹降噪）只能 二选一开启 ，不能同时使用。 ​ data.voice_processing_config.enable_pdns ​ Boolean ​ 可选 ​ 声纹降噪。专门针对 特定说话人 的声音进行优化，能更精准地保留目标人声。 ​ 此功能与上面的 enable_ans 只能 二选一开启 ，不能同时使用。 ​ 提供两种模式，你可以根据需要选择： ​ 自动提取：设置简单，开箱即用。默认为该模式。 降噪生效稍微有延迟 ，服务端需要先听你说一会儿话才能提取出你的声纹特征，在此期间降噪效果可能不佳。另外，提取声纹会受到用户说话场景影响，准确性上可能会弱于主动设置。 ​ 主动设置： 降噪效果更精准、更快速 ，在对话开始时就立即生效。不过需要提前录制声纹并在 voice_print_feature_id 中设置声纹 ID。 ​ data.voice_print_config.feature_id ​ String ​ 可选 ​ 目标说话人的声纹 ID。当你选择开启 enable_pdns （声纹降噪）并希望使用 主动设置 模式时，需要在此处填入你提前录制好的声纹 ID。 ​ 你可以通过扣子编程录制声纹，具体请参见 ​ 声纹识别 ，或通过 ​ 创建声纹 API 上传声纹并获取声纹 ID。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | String​ | 必选​ | 必填session.update。​ |\n| data​ | Object​ | 可选​ | 事件数据，包含会话配置的详细信息。​ |\n| data.speech_rate​ | Integer​ | 可选​ | 模型回复的语速，取值范围 [-50, 100]，默认为 0。-50 表示 0.5 倍速，100 表示 2 倍速。​ |\n| data.loudness_rate​ | Integer​ | 可选​ | 输出音频的音量，取值范围 [-50, 100]，默认为 0。-50 表示 0.5 倍音量，100 表示 2 倍音量。​ |\n| data.longest_silence_ms​ | Integer​ | 可选​ | 当智能体处于长时间沉默状态时，房间将自动解散。此时间以毫秒（ms）为单位计量，默认时长为 180,000 毫秒。​ |\n| data.event_subscriptions​ | Array<String>​ | 可选​ | 需要订阅下行事件的事件类型列表。不设置或者设置为空为订阅所有下行事件。​ |\n| data.chat_config​ | Object​ | 可选​ | 会话配置。​ |\n| data.chat_config.meta_data​ | Map<String, String>​ | 可选​ | 附加信息，通常用于封装一些业务相关的字段。查看对话消息详情时，系统会透传此附加信息。自定义键值对，应指定为 Map 对象格式。长度为 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。​ |\n| data.chat_config.custom_variables​ | Map<String, String>​ | 可选​ | 智能体中定义的变量。在智能体 prompt 中设置变量 {{key}} 后，可以通过该参数传入变量值，同时支持 Jinja2 语法。变量名只支持英文字母和下划线。​ |\n| data.chat_config.extra_params​ | Map<String, String>​ | 可选​ | 附加参数，通常用于特殊场景下指定一些必要参数供模型判断，例如指定经纬度，并询问智能体此位置的天气。自定义键值对格式，其中键（key）仅支持设置为：​latitude：纬度，此时值（Value）为纬度值，例如 39.9800718。​longitude：经度，此时值（Value）为经度值，例如 116.309314。​ |\n| data.chat_config.plugin_interrupt_mode​ | String​ | 可选​ | 端插件执行模式，可选值有blocking/nonblocking，默认为nonblocking。​blocking模式下，遇到端插件执行后，会阻塞后续的对话，直到提交端插件结果。​nonblocking模式下，遇到端插件执行后，若未提交端插件结果继续对话，则端插件请求会被丢弃。​ |\n| data.chat_config.allow_voice_interrupt​ | Boolean​ | 可选​ | 是否打开语音打断功能，默认为true。​ |\n| data.chat_config.interrupt_config​ | Object​ | 可选​ | 语音打断配置，仅在 allow_voice_interrupt 为true时生效​ |\n| data.chat_config.interrupt_config.mode​ | String​ | 必选​ | 语音打断模式，可选值有all/keyword_contains/keyword_prefix，默认为all。​all模式下，任意内容都可以打断模型回复。​keyword_contains模式下，说话内容包含关键词才会打断模型回复。例如关键词\"扣子\"，用户正在说“你好呀扣子......” / “扣子你好呀”，模型回复都会被打断。​keyword_prefix模式下，说话内容前缀匹配关键词才会打断模型回复。例如关键词\"扣子\"，用户正在说“扣子你好呀......”，模型回复就会被打断，而用户说“你好呀扣子......”，模型回复不会被打断。​ |\n| data.chat_config.interrupt_config.keywords​ | Array<String>​ | 可选​ | 关键词列表，每个关键词长度不超过8个字，最多10个关键词，仅在keyword_contains/keyword_prefix模式下生效。​ |\n| data.chat_config.parameters​ | Map<String, Any>​ | 可选​ | 设置对话流的自定义输入参数的值并传递给对话流，具体用法和示例代码可参考​为自定义参数赋值。​ |\n| data.turn_detection​ | Object​ | 可选​ | 声音检测配置。​ |\n| data.turn_detection.type​ | String​ | 可选​ | 语音检测模式，默认为server_vad，可选项包括：​server_vad：语音活动检测由扣子编程服务端完成，客户端将音频流持续发送到服务端，服务端在接收到音频后，通过服务端 VAD 检测语音的开始和结束。​client_vad：客户端使用自己的 VAD 检测语音的开始和结束，并将检测到的语音片段发送到服务器进行识别。​semantic_vad：采用语义判停的自由对话模式（此功能仅对企业旗舰版用户开放），由服务端识别语义来判断是否停止说话。​详细的检测逻辑请参见​如何设置扣子的语音检测模式？。​ |\n| data.turn_detection.prefix_padding_ms​ | Integer​ | 可选​ | VAD 检测到语音之前要包含的音频量，单位为 ms。默认为 600ms。​ |\n| data.turn_detection.silence_duration_ms​ | Integer​ | 可选​ | server_vad模式下，检测语音停止的静音持续时间，单位为 ms。取值范围为 200~2000，默认为 500ms。​ |\n| data.turn_detection.semantic_vad_config​ | Object​ | 可选​ | semantic_vad模式下，配置判定语音停止的语义检测策略。​ |\n| data.turn_detection.semantic_vad_config.silence_threshold_ms​ | Integer​ | 可选​ | 当用户暂停说话时，持续静音多久后，触发语义判停检测。单位为 ms。默认为 300ms。​ |\n| data.turn_detection.semantic_vad_config.semantic_unfinished_wait_time_ms​ | Integer​ | 可选​ | 当语义检测判断该语句未结束时，持续静音多久后，扣子编程认定语音结束。单位为 ms。默认为 500ms。取值范围为 100~2000。​ |\n| data.asr_config.stream_mode​ | String​ | 可选​ | ASR 识别的模式。​output_no_stream：不会逐字返回语音识别结果，而是等整段语音结束后统一输出完整文本。异步语音消息场景中推荐使用该模式，会整合整句音频信息做上下文分析，减少实时截断导致的误差，提升准确率。​bidirectional_stream（默认值）：逐字的返回语音识别的结果。​ |\n| data.asr_config.context​ | String​ | 可选​ | 上下文，限制 800 tokens，超出后自动截断。​ |\n| data.asr_config.enable_itn​ | Boolean​ | 可选​ | 将语音转为文本时，是否开启文本规范化（ITN）处理，将识别结果转换为更符合书面表达习惯的格式以提升可读性。默认为true。​开启后，会将口语化数字转换为标准数字格式，示例：​将两点十五分转换为14:15。​将一百美元转换为$100。​ |\n| data.asr_config.enable_punc​ | Boolean​ | 可选​ | 将语音转为文本时，是否给文本加上标点符号。默认为true。​ |\n| data.asr_config.enable_ddc​ | Boolean​ | 可选​ | 将语音转为文本时，是否启用顺滑，默认为true。​true：系统在进行语音处理时，会去掉识别结果中诸如 “啊”“嗯” 等语气词，使得输出的文本语义更加流畅自然，符合正常的语言表达习惯，尤其适用于对文本质量要求较高的场景，如正式的会议记录、新闻稿件生成等。​false：系统不会对识别结果中的语气词进行处理，识别结果会保留原始的语气词。​ |\n| data.asr_config.enable_nostream​ | Boolean​ | 可选​ | 是否开启二次识别模式：​true：会实时返回逐字识别的文本；当一句话结束时，会结合整句音频进行上下文分析并重新识别，生成优化后的识别结果并返回。这种机制既能满足客户实时上屏的需求，又能确保最终结果的识别准确率。​false（默认值）：仅进行一次实时识别，逐字返回文本，不会在一句话结束时重新识别分句，可能存在一定的识别误差。​ |\n| data.asr_config.enable_emotion​ | Boolean​ | 可选​ | 识别说话人的情绪。仅在data.asr_config.stream_mode为output_no_stream时生效。默认为false。​支持的情绪标签包括：​angry：表示情绪为生气​happy：表示情绪为开心​neutral：表示情绪为平静或中性​sad：表示情绪为悲伤​surprise：表示情绪为惊讶​ |\n| data.asr_config.enable_gender​ | Boolean​ | 可选​ | 是否开启识别说话人的性别（male/female），仅在data.asr_config.stream_mode为output_no_stream时生效。默认为false。​ |\n| data.asr_config.sensitive_words_filter​ | Object​ | 可选​ | 敏感词过滤功能，支持以下 3 种过滤方式：​过滤系统敏感词，并替换为*。​过滤自定义敏感词，并替换为空。​过滤自定义敏感词，并替换为*。​ |\n| data.asr_config.sensitive_words_filter.system_reserved_filter​ | Boolean​ | 可选​ | 是否过滤系统自带的敏感词，并将匹配到的敏感词替换为*。（系统自带敏感词主要包含一些限制级词汇）。默认为false。​ |\n| data.asr_config.sensitive_words_filter.filter_with_empty​ | Array<string>​ | 可选​ | 自定义需替换为空的敏感词列表。​ |\n| data.asr_config.sensitive_words_filter.filter_with_signed​ | Array<string>​ | 可选​ | 自定义需替换为*的敏感词列表。​ |\n| data.voice_print_config​ | Object​ | 可选​ | 声纹识别配置。​ |\n| data.voice_print_config.group_id​ | String​ | 可选​ | 声纹组 ID。语音通话时，扣子编程会在该声纹组内进行查找匹配对应的声纹，当声纹匹配度高于score阈值，则认为是同一个人的声音。​你可以通过查看声纹组列表API 查看声纹组 ID。​ |\n| data.voice_print_config.score​ | Integer​ | 可选​ | 声纹匹配的命中阈值，即声音匹配度的最低标准。当声音匹配度达到或超过该阈值时，扣子编程才会认定声纹匹配成功。你可以根据应用的安全性要求进行自定义设置。如果匹配了多轮声纹，扣子编程会取相似度最高的一个。​取值范围：0~100，默认值：40。​ |\n| data.voice_print_config.reuse_voice_info​ | Boolean​ | 可选​ | 当本轮对话未命中任何声纹时，是否沿用历史声纹信息。​true：未命中声纹时，智能体将返回上一次命中的声纹。适用于连续对话场景，当收音不好等情况导致声纹没能正确被识别时，保障对话的连贯性。​false：（默认值）未命中声纹时，智能体返回空的声纹信息。​ |\n| data.voice_id​ | String​ | 可选​ | 音色 ID。​ |\n| data.tts_config​ | Object​ | 可选​ | 配置语音合成的相关参数，用于控制合成语音的整体风格与情感表达，包括辅助信息（如情绪、方言、语气等）、多情感音色的情感类型及强度等。​ |\n| data.tts_config.context_texts​ | String​ | 可选​ | 语音合成的辅助信息，用于控制合成语音的整体情绪（如悲伤、生气）、方言（如四川话、北京话）、语气（如撒娇、暧昧、吵架、夹子音）、语速（快慢）及音调（高低）等。默认为空。​示例：用低沉沙哑的语气、带着沧桑与绝望地说。​说明仅当voice_id为豆包语音合成大模型 2.0 音色时才支持该参数，具体支持的音色列表请参见​系统音色列表。​更多关于豆包语音合成 2.0 的context_texts示例和效果可参考语音指令-示例库。​​ |\n| data.tts_config.emotion​ | String​ | 可选​ | 设置多情感音色的情感类型，仅当voice_id为多情感音色时才需要设置。​不同音色支持的情感范围不同，可以通过系统音色列表查看各音色支持的情感。默认为空。枚举值如下：​happy-开心​sad-悲伤​angry-生气​surprised-惊讶​fear-恐惧​hate-厌恶​excited-激动​coldness-冷漠​neutral-中性​ |\n| data.tts_config.emotion_scale​ | Float​ | 可选​ | 情感值用于量化情感的强度。数值越高，情感表达越强烈，例如： “开心” 的情感值 5 比 1 更显兴奋。​仅当voice_id为多情感音色时才需要设置。​取值范围：1.0~5.0，默认值：4.0。​ |\n| data.voice_processing_config​ | Object​ | 可选​ | 语音降噪配置。默认不启用降噪。​说明仅扣子企业旗舰版支持该配置。​​ |\n| data.voice_processing_config.enable_ans​ | Boolean​ | 可选​ | 主动噪声抑制。自动识别并过滤掉背景环境中的各种噪音（如键盘声、空调声、街道嘈杂声），让说话者的声音更清晰。​此功能与下面的enable_pdns（声纹降噪）只能二选一开启，不能同时使用。​ |\n| data.voice_processing_config.enable_pdns​ | Boolean​ | 可选​ | 声纹降噪。专门针对特定说话人的声音进行优化，能更精准地保留目标人声。​此功能与上面的enable_ans只能二选一开启，不能同时使用。​提供两种模式，你可以根据需要选择：​自动提取：设置简单，开箱即用。默认为该模式。降噪生效稍微有延迟，服务端需要先听你说一会儿话才能提取出你的声纹特征，在此期间降噪效果可能不佳。另外，提取声纹会受到用户说话场景影响，准确性上可能会弱于主动设置。​主动设置：降噪效果更精准、更快速，在对话开始时就立即生效。不过需要提前录制声纹并在voice_print_feature_id中设置声纹 ID。​ |\n| data.voice_print_config.feature_id​ | String​ | 可选​ | 目标说话人的声纹 ID。当你选择开启enable_pdns（声纹降噪）并希望使用主动设置模式时，需要在此处填入你提前录制好的声纹 ID。​你可以通过扣子编程录制声纹，具体请参见​声纹识别，或通过​创建声纹API 上传声纹并获取声纹 ID。​ |\n\n- latitude ：纬度，此时值（Value）为纬度值，例如 39.9800718。 ​\n\n- longitude ：经度，此时值（Value）为经度值，例如 116.309314。 ​\n\n- blocking 模式下，遇到端插件执行后，会阻塞后续的对话，直到提交端插件结果。 ​\n\n- nonblocking 模式下，遇到端插件执行后，若未提交端插件结果继续对话，则端插件请求会被丢弃。 ​\n\n- all 模式下，任意内容都可以打断模型回复。 ​\n\n- keyword_contains 模式下，说话内容 包含 关键词才会打断模型回复。例如关键词\"扣子\"，用户正在说“你好呀扣子......” / “扣子你好呀”，模型回复都会被打断。 ​\n\n- keyword_prefix 模式下，说话内容 前缀匹配 关键词才会打断模型回复。例如关键词\"扣子\"，用户正在说“扣子你好呀......”，模型回复就会被打断，而用户说“你好呀扣子......”，模型回复不会被打断。 ​\n\n- server_vad ：语音活动检测由扣子编程服务端完成，客户端将音频流持续发送到服务端，服务端在接收到音频后，通过服务端 VAD 检测语音的开始和结束。 ​\n\n- client_vad ：客户端使用自己的 VAD 检测语音的开始和结束，并将检测到的语音片段发送到服务器进行识别。 ​\n\n- semantic_vad ：采用语义判停的自由对话模式（ 此功能仅对企业旗舰版用户开放 ），由服务端识别语义来判断是否停止说话。 ​\n\n- output_no_stream ：不会逐字返回语音识别结果，而是等整段语音结束后统一输出完整文本。异步语音消息场景中推荐使用该模式，会整合整句音频信息做上下文分析，减少实时截断导致的误差，提升准确率。 ​\n\n- bidirectional_stream （默认值）：逐字的返回语音识别的结果。 ​\n\n- 将 两点十五分 转换为 14:15 。 ​\n\n- 将 一百美元 转换为 $100 。 ​\n\n- true ：系统在进行语音处理时，会去掉识别结果中诸如 “啊”“嗯” 等语气词，使得输出的文本语义更加流畅自然，符合正常的语言表达习惯，尤其适用于对文本质量要求较高的场景，如正式的会议记录、新闻稿件生成等。 ​\n\n- false ：系统不会对识别结果中的语气词进行处理，识别结果会保留原始的语气词。 ​\n\n- true ：会实时返回逐字识别的文本；当一句话结束时，会结合整句音频进行上下文分析并重新识别，生成优化后的识别结果并返回。这种机制既能满足客户实时上屏的需求，又能确保最终结果的识别准确率。 ​\n\n- false （默认值）：仅进行一次实时识别，逐字返回文本，不会在一句话结束时重新识别分句，可能存在一定的识别误差。 ​\n\n- angry ：表示情绪为生气 ​\n\n- happy ：表示情绪为开心 ​\n\n- neutral ：表示情绪为平静或中性 ​\n\n- sad ：表示情绪为悲伤 ​\n\n- surprise ：表示情绪为惊讶 ​\n\n- 过滤系统敏感词，并替换为 * 。 ​\n\n- 过滤自定义敏感词，并替换为空。 ​\n\n- 过滤自定义敏感词，并替换为 * 。 ​\n\n- true ：未命中声纹时，智能体将返回上一次命中的声纹。适用于连续对话场景，当收音不好等情况导致声纹没能正确被识别时，保障对话的连贯性。 ​\n\n- false ：（默认值）未命中声纹时，智能体返回空的声纹信息。 ​\n\n- 仅当 voice_id 为 豆包语音合成大模型 2.0 音色 时才支持该参数，具体支持的音色列表请参见 ​ 系统音色列表 。 ​\n\n- 更多关于豆包语音合成 2.0 的 context_texts 示例和效果可参考 语音指令-示例库 。 ​\n\n- happy-开心 ​\n\n- sad-悲伤 ​\n\n- angry-生气 ​\n\n- surprised-惊讶 ​\n\n- fear-恐惧 ​\n\n- hate-厌恶 ​\n\n- excited-激动 ​\n\n- coldness-冷漠 ​\n\n- neutral-中性 ​\n\n- 自动提取：设置简单，开箱即用。默认为该模式。 降噪生效稍微有延迟 ，服务端需要先听你说一会儿话才能提取出你的声纹特征，在此期间降噪效果可能不佳。另外，提取声纹会受到用户说话场景影响，准确性上可能会弱于主动设置。 ​\n\n- 主动设置： 降噪效果更精准、更快速 ，在对话开始时就立即生效。不过需要提前录制声纹并在 voice_print_feature_id 中设置声纹 ID。 ​\n\n- 事件示例： ​\n\n- ​ JSON 复制 { ​ \"id\" : \"7446668538246561828\" , ​ \"event_type\" : \"session.update\" , ​ \"data\" : { ​ \"voice_id\" : \"7426720361733046281\" , // 音色 ID ​ \"speech_rate\" : 0 , // [-50, 100] ​ \"longest_silence_ms\" : 180000 , ​ \"event_subscriptions\" : [ \"error\" ], ​ \"chat_config\" : { ​ \"meta_data\" : { ​ \"a\" : \"123\" ​ }, ​ \"custom_variables\" : { ​ \"a\" : \"123\" ​ }, ​ \"extra_params\" : { ​ \"a\" : \"123\" ​ }, ​ \"plugin_interrupt_mode\" : \"nonblocking\" , // 控制收到端插件执行中断信号后，没有提交端执行请求时的模型 ​ // 端插件的执行模型，默认不阻塞，blocking/nonblocking，阻塞的场景如果不提交端执行请求就会让语音链路一直block住 ​ \"allow_voice_interrupt\" : true , ​ \"interrupt_config\" : { ​ \"mode\" : \"keyword_prefix\" , ​ \"keywords\" : [ \"扣子\" ] ​ }, ​ \"parameters\" : { ​ \"a\" : 123 , ​ \"b\" : \"abc\" ​ } ​ }, ​ \"turn_detection\" : { ​ \"type\" : \"server_vad\" , // server_vad/client_vad ​ \"prefix_padding_ms\" : 600 , ​ \"silence_duration_ms\" : 500 ​ }, ​ \"asr_config\" : { ​ \"hot_words\" : [ \"扣子\" ], ​ \"enable_itn\" : true , ​ \"enable_punc\" : true , ​ \"enable_ddc\" : true ​ } ​ } ​ } ​ ​\n\n- 事件类型 ： conversation.chat.submit_tool_outputs ​\n\n- 事件说明 ：你可以将需要客户端执行的操作定义为插件，对话中如果触发这个插件，会收到一个 event_type = “conversation.chat.requires_action” 的下行事件，此时需要执行客户端的操作后，通过此上行事件来提交插件执行后的结果。作用等同于 ​ 提交工具执行结果 API。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ ​ String ​ 必选 ​ 事件 ID，也就是事件的唯一标识。由客户端生成，在故障排查场景下用于定位具体的事件，便于排查问题。 ​ event_type ​ ​ String ​ 必选 ​ 固定为 conversation.chat.submit_tool_outputs。 ​ data ​ chat_id ​ String ​ 必选 ​ 对话 ID。 ​ ​ tool_outputs ​ JSON Array ​ 必选 ​ 工具执行结果。具体的结构定义可参考 ​ 提交工具执行结果 API。 ​ ​ tool_outputs.tool_call_id ​ String ​ 必选 ​ 上报运行结果的 ID。你可以在 端插件请求 事件的 tool_calls 字段下查看此 ID。 ​ ​ tool_outputs.output ​ String ​ 必选 ​ 工具的执行结果。 ​ ​\n\n| 参数​ | ​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | ​ | String​ | 必选​ | 事件 ID，也就是事件的唯一标识。由客户端生成，在故障排查场景下用于定位具体的事件，便于排查问题。​ |\n| event_type​ | ​ | String​ | 必选​ | 固定为 conversation.chat.submit_tool_outputs。​ |\n| data​ | chat_id​ | String​ | 必选​ | 对话 ID。​ |\n| ​ | tool_outputs​ | JSON Array​ | 必选​ | 工具执行结果。具体的结构定义可参考​提交工具执行结果API。​ |\n| ​ | tool_outputs.tool_call_id​ | String​ | 必选​ | 上报运行结果的 ID。你可以在端插件请求事件的 tool_calls 字段下查看此 ID。​ |\n| ​ | tool_outputs.output​ | String​ | 必选​ | 工具的执行结果。​ |\n\n- 事件示例 ： ​\n\n- ​ JSON 复制 { ​ \"id\" : \"7446668538246561829\" , ​ \"event_type\" : \"conversation.chat.submit_tool_outputs\" , ​ \"data\" : { ​ \"chat_id\" : \"7446675275930271785\" , ​ \"tool_outputs\" : [ ​ { ​ \"tool_call_id\" : \"BUJJRUUVEhJGERVeEkRDFV5HEkJAXktLQBZeEEAXREpLSxZFR****=\" , ​ \"output\" : \"{\\\"url\\\":\\\"https://lf3-bot-platform-tos-sign.coze.cn/bot-studio-bot-platform/bot_files/323733792754532/image/jpeg/7446661351415529491/blob****\\\"}\" ​ } ​ ] ​ } ​ } ​ ​\n\n- 事件类型 ： conversation.chat.cancel ​\n\n- 事件说明 ：发送此事件可取消正在进行的对话。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ string ​ 必选 ​ 客户端自行生成的事件 ID，方便定位问题。 ​ event_type ​ string ​ 必选 ​ 固定为conversation.chat.cancel。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | string​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | string​ | 必选​ | 固定为conversation.chat.cancel。​ |\n\n- 事件示例： ​\n\n- ​ JSON 复制 { ​ \"id\" : \"7446668538246561827\" , ​ \"event_type\" : \"conversation.chat.cancel\" , ​ \"data\" : {} ​ } ​ ​\n\n- 事件类型 ：conversation.message.create ​\n\n- 事件说明 ： ​\n\n- 若 role=user，提交事件后就会生成语音回复，适合如下的场景，比如帮我解析xx链接，帮我分析这个图片的内容等。 ​\n\n- 若 role=assistant，提交事件后会加入到对话的上下文。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ ​ string ​ 必 ​ 客户端自行生成的事件 ID，方便定位问题。 ​ event_type ​ ​ string ​ 必选 ​ 固定为conversation.message.create。 ​ data ​ role ​ string ​ ​ 必选 ​ 发送这条消息的实体。取值： ​ user ：代表该条消息内容是用户发送的。 ​ assistant ：代表该条消息内容是智能体发送的。 ​ ​ content_type ​ ​ string ​ 必选 ​ 消息内容的类型，支持设置为： ​ text：文本 ​ object_string：多模态内容，即文本和文件的组合、文本和图片的组合，参考 ​ ​ content ​ string ​ 必选 ​ 消息的内容，支持纯文本、多模态（文本、图片、文件混合输入）、卡片等多种类型的内容。参考 object_string object 。 ​ ​\n\n| 参数​ | ​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | ​ | string​ | 必​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | ​ | string​ | 必选​ | 固定为conversation.message.create。​ |\n| data​ | role​ | string​​ | 必选​ | 发送这条消息的实体。取值：​user：代表该条消息内容是用户发送的。​assistant：代表该条消息内容是智能体发送的。​ |\n| ​ | content_type​​ | string​ | 必选​ | 消息内容的类型，支持设置为：​text：文本​object_string：多模态内容，即文本和文件的组合、文本和图片的组合，参考​ |\n| ​ | content​ | string​ | 必选​ | 消息的内容，支持纯文本、多模态（文本、图片、文件混合输入）、卡片等多种类型的内容。参考object_string object。​ |\n\n- user ：代表该条消息内容是用户发送的。 ​\n\n- assistant ：代表该条消息内容是智能体发送的。 ​\n\n- text：文本 ​\n\n- object_string：多模态内容，即文本和文件的组合、文本和图片的组合，参考 ​\n\n- 事件示例： ​\n\n- ​ JSON 复制 { ​ \"id\" : \"7446668538246561826\" , ​ \"event_type\" : \"conversation.message.create\" , ​ \"data\" : { ​ \"role\" : \"user\" , // user/assistant ​ \"content_type\" : \"object_string\" , // text/object_string ​ \"content\" : \"[{\\\"type\\\":\\\"text\\\",\\\"text\\\":\\\"帮我看看这个PDF里有什么内容？\\\"},{\\\"type\\\":\\\"file\\\",\\\"file_url\\\":\\\"https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/eaafba63-0d96-4ea6-b60c-fbadcf2c25e9.?lk3s=edeb9e45&x-expires=1718296132&x-signature=YtlsUsvSeLJi6x31I%2F4S9X53Y6Y%3D\\\"}]\" ​ } ​ } ​ ​\n\n- 事件类型 ： client.vad ​\n\n- 事件说明 ：客户端侧的 VAD 检测结果，仅在 turn_detection.type=\"client_vad\" 时生效。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ ​ string ​ 必选 ​ 客户端自行生成的事件 ID，方便定位问题。 ​ event_type ​ ​ string ​ 必选 ​ 固定为client.vad。 ​ data ​ vad ​ boolean ​ 必选 ​ 客户端自行检测的 vad 值，只需在变化时上传。 ​ ​\n\n| 参数​ | ​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | ​ | string​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | ​ | string​ | 必选​ | 固定为client.vad。​ |\n| data​ | vad​ | boolean​ | 必选​ | 客户端自行检测的 vad 值，只需在变化时上传。​ |\n\n- 事件示例： ​\n\n- ​ JSON 复制 { ​ \"id\" : \"74466685382465618283\" , ​ \"event_type\" : \"client.vad\" , ​ \"data\" : { ​ \"vad\" : true / false ​ } ​ } ​ ​\n\n- 事件类型 ： session.pre_answer.update ​\n\n- 事件说明 ：此事件可更新房间内的安抚配置，若更新成功，会收到下行事件 \"session.pre_answer.updated\"，否则，会收到下行事件 \"error\"。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ String ​ 必选 ​ 客户端自行生成的事件 ID，方便定位问题。 ​ event_type ​ String ​ 必选 ​ 固定为 session.pre_answer.update 。 ​ data ​ Object ​ 必选 ​ 事件数据，包含安抚配置的详细信息。 ​ data.pre_answer ​ Object ​ 必选 ​ 安抚配置。 ​ data.pre_answer.type ​ String ​ 必选 ​ 安抚生成类型，可选类型有 none / audio / text / bot 。 ​ none ：取消安抚策略，默认值。 ​ audio ：根据用户上传的音频文件作为安抚语。 ​ text ：根据用户输入的文本生成安抚语。 ​ bot ：指定另一个智能体作为安抚语的生成载体。 ​ data.pre_answer.file_id ​ String ​ 可选 ​ 仅在 audio 模式下生效，用户需要先通过上传文件接口上传一个音频文件，传入该接口返回的 file_id 。当前仅支持 wav \\ mp3 音频文件。 ​ data.pre_answer.pre_answer_list ​ Array<String> ​ 可选 ​ 仅在 text 模式下生效，用户可以输入一批文本，会在触发安抚策略时随机选取一段文本作为安抚语播放。每段文本的长度上限为 10 个字符。 ​ data.pre_answer.bot_id ​ String ​ 可选 ​ 仅在 bot 模式下生效，ASR 识别的文本会同时请求这个 BotID ，并将该智能体回复的内容作为安抚语。传入的智能体必须是属于当前用户的智能体。该策略会消耗额外的 Token。 ​ data.trigger ​ Object ​ 可选 ​ 触发相关配置。 ​ data.trigger.type ​ String ​ 必选 ​ 安抚策略的触发类型，可选类型有 mandatory / time-trigger / event-driven 。 ​ mandatory ：必定触发安抚策略，默认值。 ​ time-trigger ：一段时间后模型没有生成回复，就会触发安抚策略。 ​ event-driven ：模型触发 function call 就会触发安抚策略。 ​ data.trigger.time_after ​ Integer ​ 可选 ​ 仅在 time-trigger 模式下生效，指定在等待多长时间后触发安抚策略，单位为 ms，取值范围 [0, 3000]，默认值为 1500ms。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | String​ | 必选​ | 固定为session.pre_answer.update。​ |\n| data​ | Object​ | 必选​ | 事件数据，包含安抚配置的详细信息。​ |\n| data.pre_answer​ | Object​ | 必选​ | 安抚配置。​ |\n| data.pre_answer.type​ | String​ | 必选​ | 安抚生成类型，可选类型有none/audio/text/bot。​none：取消安抚策略，默认值。​audio：根据用户上传的音频文件作为安抚语。​text：根据用户输入的文本生成安抚语。​bot：指定另一个智能体作为安抚语的生成载体。​ |\n| data.pre_answer.file_id​ | String​ | 可选​ | 仅在audio模式下生效，用户需要先通过上传文件接口上传一个音频文件，传入该接口返回的file_id。当前仅支持wav\\mp3音频文件。​ |\n| data.pre_answer.pre_answer_list​ | Array<String>​ | 可选​ | 仅在text模式下生效，用户可以输入一批文本，会在触发安抚策略时随机选取一段文本作为安抚语播放。每段文本的长度上限为 10 个字符。​ |\n| data.pre_answer.bot_id​ | String​ | 可选​ | 仅在bot模式下生效，ASR 识别的文本会同时请求这个BotID，并将该智能体回复的内容作为安抚语。传入的智能体必须是属于当前用户的智能体。该策略会消耗额外的 Token。​ |\n| data.trigger​ | Object​ | 可选​ | 触发相关配置。​ |\n| data.trigger.type​ | String​ | 必选​ | 安抚策略的触发类型，可选类型有mandatory/time-trigger/event-driven。​mandatory：必定触发安抚策略，默认值。​time-trigger：一段时间后模型没有生成回复，就会触发安抚策略。​event-driven：模型触发 function call 就会触发安抚策略。​ |\n| data.trigger.time_after​ | Integer​ | 可选​ | 仅在time-trigger模式下生效，指定在等待多长时间后触发安抚策略，单位为 ms，取值范围 [0, 3000]，默认值为 1500ms。​ |\n\n- none ：取消安抚策略，默认值。 ​\n\n- audio ：根据用户上传的音频文件作为安抚语。 ​\n\n- text ：根据用户输入的文本生成安抚语。 ​\n\n- bot ：指定另一个智能体作为安抚语的生成载体。 ​\n\n- mandatory ：必定触发安抚策略，默认值。 ​\n\n- time-trigger ：一段时间后模型没有生成回复，就会触发安抚策略。 ​\n\n- event-driven ：模型触发 function call 就会触发安抚策略。 ​\n\n- 事件示例： ​\n\n- ​ JSON 复制 { ​ \"id\" : \"7446668538246561822\" , ​ \"event_type\" : \"session.pre_answer.update\" , ​ \"data\" : { ​ \"pre_answer\" : { ​ \"type\" : \"none\" , ​ \"file_id\" : \"\" , ​ \"pre_answer_list\" : [ \"\" ], ​ \"bot_id\" : \"\" ​ }, ​ \"trigger\" : { ​ \"type\" : \"mandatory\" , ​ \"time_after\" : 1500 ​ } ​ } ​ } ​ ​\n\n- 事件类型 ： mode.update ​\n\n- 事件说明 ：更新房间的模式，若更新成功，会收到 mode.updated 下行事件，否则，会收到下行事件 \"error\"。 ​\n\n- 事件结构 ： ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | String​ | 必选​ | 固定为mode.update。​ |\n| data​ | Object​ | 必选​ | 事件数据，包含房间模式和对话设置。​ |\n| data.mode​ | String​ | 必选​ | 房间模式。​默认为chat，即对话模式，跟智能体进行聊天。​ |\n| data.mode.chat​ | Object​ | 可选​ | 对话模式下的设置，仅当mode为chat时生效。​ |\n| data.chat.user_language​ | String​ | 可选​ | 用户说话的语种，默认为common支持中英文、上海话、闽南语，四川、陕西、粤语识别。仅在data.asr_config.stream_mode为output_no_stream时可以指定设置语种。当将其设置为下方特定键时，它可以识别指定语言。​英语：en-US​日语：ja-JP​印尼语：id-ID​西班牙语：es-MX​葡萄牙语：pt-BR​德语：de-DE​法语：fr-FR​韩语：ko-KR​菲律宾语：fil-PH​马来语：ms-MY​泰语：th-TH​阿拉伯语：ar-SA​例如，如果输入音频是德语，则此参数传入de-DE​ |\n| ​ | ​ | ​ | ​ |\n| ​ | ​ | ​ | ​ |\n| ​ | ​ | ​ | ​ |\n| ​ | ​ | ​ | ​ |\n| ​ | ​ | ​ | ​ |\n| ​ | ​ | ​ | ​ |\n| ​ | ​ | ​ | ​ |\n| ​ | ​ | ​ | ​ |\n| ​ | ​ | ​ | ​ |\n| ​ | ​ | ​ | ​ |\n| ​ | ​ | ​ | ​ |\n| ​ | ​ | ​ | ​ |\n| ​ | ​ | ​ | ​ |\n\n- 英语：en-US ​\n\n- 日语：ja-JP ​\n\n- 印尼语：id-ID ​\n\n- 西班牙语：es-MX ​\n\n- 葡萄牙语：pt-BR ​\n\n- 德语：de-DE ​\n\n- 法语：fr-FR ​\n\n- 韩语：ko-KR ​\n\n- 菲律宾语：fil-PH ​\n\n- 马来语：ms-MY ​\n\n- 泰语：th-TH ​\n\n- 阿拉伯语：ar-SA ​\n\n- 事件示例 ： ​\n\n- 事件类型 ： input_text.generate_audio ​\n\n- 事件说明 ：你可以主动提交一段文字用来做语音合成，提交的消息不会触发智能体的回复，只会合成音频内容下发到客户端。提交事件的时候如果智能体正在输出语音会被中断输出。适合在和智能体聊天过程中客户端长时间没有响应，智能体可以主动说话暖场的场景。 ​\n\n- 事件结构 ： ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | String​ | 必选​ | 固定为input_text.generate_audio。​ |\n| data​ | Object​ | 必选​ | 事件数据。​ |\n| data.mode​ | String​ | 必选​ | 消息内容的类型，支持设置为：​text：文本​ |\n| data.text​ | string​ | 可选​ | 当mode == text时候必填。长度限制 (0, 1024) 字节​ |\n\n- text ：文本 ​\n\n- 事件示例 ： ​\n\n- ​ JSON 复制 { ​ \"id\" : \"744666853824656xxxx\" , ​ \"event_type\" : \"input_text.generate_audio\" , ​ \"data\" : { ​ \"mode\" : \"text\" , ​ \"text\" : \"亲，你怎么不说话了。\" ​ } ​ } ​ ​\n\n- 事件类型 ： input_audio_buffer.start ​\n\n- 事件说明 ：发送此事件表示用户开始说话。仅在 按键说话 模式下生效。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ string ​ 必选 ​ 客户端自行生成的事件 ID，方便定位问题。 ​ event_type ​ string ​ 必选 ​ 固定为 input_audio_buffer.start 。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | string​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | string​ | 必选​ | 固定为input_audio_buffer.start。​ |\n\n- 事件示例： ​\n\n- ​ JSON 复制 { ​ \"id\" : \"7446668538246561827\" , ​ \"event_type\" : \"input_audio_buffer.start\" , ​ \"data\" : {} ​ } ​ ​\n\n- 事件类型 ： input_audio_buffer.complete ​\n\n- 事件说明 ：发送此事件表示用户结束说话。仅在 按键说话 模式下生效。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ string ​ 必选 ​ 客户端自行生成的事件 ID，方便定位问题。 ​ event_type ​ string ​ 必选 ​ 固定为 input_audio_buffer.complete 。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | string​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | string​ | 必选​ | 固定为input_audio_buffer.complete。​ |\n\n- 事件示例： ​\n\n- ​ JSON 复制 { ​ \"id\" : \"7446668538246561827\" , ​ \"event_type\" : \"input_audio_buffer.complete\" , ​ \"data\" : {} ​ } ​ ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/signaling_downlink_event",
      "title": "Realtime 下行事件",
      "content": {
        "sections": [],
        "full_text": "Realtime 下行事件\n\n本文介绍扣子编程智能语音信令事件中的下行事件。\n\n​\n\n房间配置成功\n\n​\n\n事件类型\n\n：\n\nsession.created\n\n​\n\n事件说明\n\n：用户成功进房后会发送此事件。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n服务端生成的唯一 ID。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\nsession.created\n\n。\n\n​\n\ndata\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件数据，包含对话的详细信息。\n\n​\n\ndata.voice_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n音色 ID。\n\n​\n\ndata.log_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n服务端日志 ID，用于查找问题。\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"7446668538246561800\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"session.created\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"voice_id\"\n\n:\n\n\"134\"\n\n,\n\n​\n\n\"log_id\"\n\n:\n\n\"xxx\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n房间配置更新成功\n\n​\n\n事件类型\n\n：\n\nsession.updated\n\n​\n\n事件说明\n\n：房间内的配置更新成功，返回房间内最新的配置。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n服务端生成的唯一 ID。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\nsession.updated\n\n。\n\n​\n\ndata\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件数据，包含对话的详细信息。\n\n​\n\ndata.voice_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n音色 ID。\n\n​\n\ndata.speech_rate\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\n模型回复的语速，取值范围 [-50, 100]，默认为 0。-50 表示 0.5 倍速，100 表示 2 倍速。\n\n​\n\ndata.loudness_rate\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n输出音频的音量，取值范围 [-50, 100]，默认为 0。-50 表示 0.5 倍音量，100 表示 2 倍音量。\n\n​\n\ndata.longest_silence_ms\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n当智能体处于长时间沉默状态时，房间将自动解散。此时间以毫秒（ms）为单位计量，默认时长为 180,000 毫秒。\n\n​\n\ndata.event_subscriptions\n\n​\n\nArray<String>\n\n​\n\n可选\n\n​\n\n订阅的下行事件的事件类型列表。\n\n​\n\ndata.chat_config\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n聊天配置信息。\n\n​\n\ndata.chat_config.meta_data\n\n​\n\nMap<String, String>\n\n​\n\n必选\n\n​\n\n附加信息，通常用于封装一些业务相关的字段。查看对话消息详情时，系统会透传此附加信息。自定义键值对，应指定为 Map 对象格式。长度为 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。\n\n​\n\ndata.chat_config.custom_variables\n\n​\n\nMap<String, String>\n\n​\n\n必选\n\n​\n\n智能体中定义的变量。在智能体 prompt 中设置变量 {{key}} 后，可以通过该参数传入变量值，同时支持 Jinja2 语法。变量名只支持英文字母和下划线。\n\n​\n\ndata.chat_config.extra_params\n\n​\n\nMap<String, String>\n\n​\n\n必选\n\n​\n\n附加参数，通常用于特殊场景下指定一些必要参数供模型判断，例如指定经纬度，并询问智能体此位置的天气。自定义键值对格式，其中键（key）仅支持设置为：\n\n​\n\nlatitude（纬度，值为纬度值，例如 39.9800718）\n\n​\n\nlongitude（经度，值为经度值，例如 116.309314）。\n\n​\n\ndata.chat_config.plugin_interrupt_mode\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n端插件执行模式，可选值有\n\nblocking\n\n/\n\nnonblocking\n\n，默认为\n\nnonblocking\n\n。\n\n​\n\nblocking\n\n模式下，遇到端插件执行后，会阻塞后续的对话，直到提交端插件结果。\n\n​\n\nnonblocking\n\n模式下，遇到端插件执行后，若未提交端插件结果继续对话，则端插件请求会被丢弃。\n\n​\n\ndata.chat_config.allow_voice_interrupt\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n是否打开语音打断功能，默认为\n\ntrue\n\n。\n\n​\n\ndata.chat_config.interrupt_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n语音打断配置，仅在 allow_voice_interrupt 为\n\ntrue\n\n时生效\n\n​\n\ndata.chat_config.interrupt_config.mode\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n语音打断模式，可选值有\n\nall\n\n/\n\nkeyword_contains\n\n/\n\nkeyword_prefix\n\n，默认为\n\nall\n\n。\n\n​\n\nall\n\n模式下，任意内容都可以打断模型回复。\n\n​\n\nkeyword_contains\n\n模式下，说话内容\n\n包含\n\n关键词才会打断模型回复。\n\n​\n\nkeyword_prefix\n\n模式下，说话内容\n\n前缀匹配\n\n关键词才会打断模型回复。\n\n​\n\ndata.chat_config.interrupt_config.keywords\n\n​\n\nArray<String>\n\n​\n\n可选\n\n​\n\n关键词列表，每个关键词长度不超过8个字，最多10个关键词，仅在\n\nkeyword_contains\n\n/\n\nkeyword_prefix\n\n模式下生效。\n\n​\n\ndata.turn_detection\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n声音检测配置。\n\n​\n\ndata.turn_detection.type\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n语音检测模式，默认为\n\nserver_vad\n\n，可选项包括：\n\n​\n\nserver_vad\n\n：语音活动检测由扣子编程服务端完成，客户端将音频流持续发送到服务端，服务端在接收到音频后，通过服务端 VAD 检测语音的开始和结束。\n\n​\n\nclient_vad\n\n：客户端使用自己的 VAD 检测语音的开始和结束，并将检测到的语音片段发送到服务器进行识别。\n\n​\n\nsemantic_vad\n\n：采用语义判停的自由对话模式（\n\n此功能仅对企业旗舰版用户开放\n\n），由服务端识别语义来判断是否停止说话。\n\n​\n\n详细的检测逻辑请参见\n\n​\n\n如何设置扣子的语音检测模式？\n\n。\n\n​\n\ndata.turn_detection.silence_duration_ms\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\nserver_vad\n\n模式下，检测语音停止的静音持续时间，单位为 ms。默认为 500ms。\n\n​\n\ndata.turn_detection.semantic_vad_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\nsemantic_vad\n\n模式下，配置判定语音停止的语义检测策略。\n\n​\n\ndata.turn_detection.semantic_vad_config.silence_threshold_ms\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n当用户暂停说话时，持续静音多久后，触发语义判停检测。单位为 ms。默认为 300ms。\n\n​\n\ndata.turn_detection.semantic_vad_config.semantic_unfinished_wait_time_ms\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n当语义检测判断该语句未结束时，持续静音多久后，扣子编程认定语音结束。单位为 ms。默认为 500ms。\n\n​\n\ndata.asr_config.enable_itn\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n将语音转为文本时，是否开启文本规范化（ITN）处理，将识别结果转换为更符合书面表达习惯的格式以提升可读性。默认为\n\ntrue\n\n。\n\n​\n\n开启后，会将口语化数字转换为标准数字格式，示例：\n\n​\n\n将\n\n两点十五分\n\n转换为\n\n14:15\n\n。\n\n​\n\n将\n\n一百美元\n\n转换为\n\n$100\n\n。\n\n​\n\ndata.asr_config.enable_punc\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n将语音转为文本时，是否给文本加上标点符号。默认为\n\ntrue\n\n。\n\n​\n\ndata.asr_config.enable_ddc\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n将语音转为文本时，是否启用顺滑，默认为\n\ntrue\n\n。\n\n​\n\ntrue\n\n：系统在进行语音处理时，会去掉识别结果中诸如 “啊”“嗯” 等语气词，使得输出的文本语义更加流畅自然，符合正常的语言表达习惯，尤其适用于对文本质量要求较高的场景，如正式的会议记录、新闻稿件生成等。\n\n​\n\nfalse\n\n：系统不会对识别结果中的语气词进行处理，识别结果会保留原始的语气词。\n\n​\n\ndata.asr_config.enable_nostream\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n当前是否开启\n\n二次识别模式\n\n，枚举值：\n\n​\n\ntrue\n\n：已开启二次识别模式。会实时返回逐字识别的文本；当一句话结束时，会结合整句音频进行上下文分析并重新识别，生成优化后的识别结果并返回。这种机制既能满足客户实时上屏的需求，又能确保最终结果的识别准确率。\n\n​\n\nfalse\n\n：未开启二次识别模式。仅进行一次实时识别，逐字返回文本，不会在一句话结束时重新识别分句，可能存在一定的识别误差。\n\n​\n\ndata.asr_config.enable_emotion\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n当前是否开启说话人情绪识别功能，枚举值：\n\n​\n\ntrue\n\n：已开启情绪识别，会返回说话人的情绪标签，仅在\n\ndata.asr_config.stream_mode\n\n为\n\noutput_no_stream\n\n时生效。\n\n​\n\nfalse\n\n：未开启情绪识别。\n\n​\n\n支持的情绪标签包括：\n\n​\n\nangry\n\n：表示情绪为生气\n\n​\n\nhappy\n\n：表示情绪为开心\n\n​\n\nneutral\n\n：表示情绪为平静或中性\n\n​\n\nsad\n\n：表示情绪为悲伤\n\n​\n\nsurprise\n\n：表示情绪为惊讶\n\n​\n\ndata.asr_config.enable_gender\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n当前是否开启说话人性别识别功能，枚举值：\n\n​\n\ntrue\n\n：已开启性别识别，会返回说话人性别（\n\nmale\n\n/\n\nfemale\n\n），仅在\n\ndata.asr_config.stream_mode\n\n为\n\noutput_no_stream\n\n时生效。\n\n​\n\nfalse\n\n：未开启性别识别。\n\n​\n\ndata.asr_config.sensitive_words_filter\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n当前敏感词过滤功能的配置状态，支持以下 3 种过滤方式：\n\n​\n\n过滤系统敏感词，并替换为\n\n*\n\n。\n\n​\n\n过滤自定义敏感词，并替换为空。\n\n​\n\n过滤自定义敏感词，并替换为\n\n*\n\n。\n\n​\n\ndata.asr_config.sensitive_words_filter.system_reserved_filter\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n当前是否启用系统自带敏感词过滤（匹配到的敏感词替换为\n\n*\n\n），枚举值：\n\n​\n\ntrue\n\n：已启用，系统会过滤系统自带敏感词（主要包含限制级词汇）并替换为\n\n*\n\n。\n\n​\n\nfalse\n\n：未启用系统自带敏感词的过滤。\n\n​\n\ndata.asr_config.sensitive_words_filter.filter_with_empty\n\n​\n\nArray<string>\n\n​\n\n可选\n\n​\n\n自定义的需替换为空的敏感词列表。\n\n​\n\ndata.asr_config.sensitive_words_filter.filter_with_signed\n\n​\n\nArray<string>\n\n​\n\n可选\n\n​\n\n自定义的需替换为\n\n*\n\n的敏感词列表。\n\n​\n\ndata.voice_print_config\n\n​\n\nArray<String>\n\n​\n\n可选\n\n​\n\n声纹识别配置。\n\n​\n\ndata.voice_print_config.group_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n声纹组 ID。语音通话时，扣子编程会在该声纹组内进行查找匹配对应的声纹，当声纹匹配度高于\n\nscore\n\n阈值，则认为是同一个人的声音。\n\n​\n\ndata.voice_print_config.score\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n声纹匹配的命中阈值，即声音匹配度的最低标准。当声音匹配度达到或超过该阈值时，扣子编程才会认定声纹匹配成功。你可以根据应用的安全性要求进行自定义设置。如果匹配了多轮声纹，扣子编程会取相似度最高的一个。\n\n​\n\n取值范围：0~100，默认值：40。\n\n​\n\ndata.voice_print_config.reuse_voice_info\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n当本轮对话未命中任何声纹时，是否沿用历史声纹信息。默认为\n\nfalse\n\n。\n\n​\n\ntrue\n\n：未命中声纹时，智能体将返回上一次命中的声纹。适用于连续对话场景，当收音不好等情况导致声纹没能正确被识别时，保障对话的连贯性。\n\n​\n\nfalse\n\n：未命中声纹时，智能体返回空的声纹信息。\n\n​\n\ndata.voice_processing_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n语音降噪配置。默认不启用降噪。\n\n​\n\n说明\n\n仅扣子企业旗舰版支持该配置。\n\n​\n\ndata.voice_processing_config.enable_ans\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n主动噪声抑制。自动识别并过滤掉背景环境中的各种噪音（如键盘声、空调声、街道嘈杂声），让说话者的声音更清晰。\n\n​\n\n此功能与下面的\n\nenable_pdns\n\n（声纹降噪）只能\n\n二选一开启\n\n，不能同时使用。\n\n​\n\ndata.voice_processing_config.enable_pdns\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n声纹降噪。专门针对\n\n特定说话人\n\n的声音进行优化，能更精准地保留目标人声。\n\n​\n\n此功能与上面的\n\nenable_ans\n\n只能\n\n二选一开启\n\n，不能同时使用。\n\n​\n\n提供两种模式，你可以根据需要选择：\n\n​\n\n自动提取：设置简单，开箱即用。默认为该模式。\n\n降噪生效稍微有延迟\n\n，服务端需要先听你说一会儿话才能提取出你的声纹特征，在此期间降噪效果可能不佳。另外，提取声纹会受到用户说话场景影响，准确性上可能会弱于主动设置。\n\n​\n\n主动设置：\n\n降噪效果更精准、更快速\n\n，在对话开始时就立即生效。不过需要提前录制声纹并在\n\nvoice_print_feature_id\n\n中设置声纹 ID。\n\n​\n\ndata.voice_print_config.feature_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n目标说话人的声纹 ID。当你选择开启\n\nenable_pdns\n\n（声纹降噪）并希望使用\n\n主动设置\n\n模式时，需要在此处填入你提前录制好的声纹 ID。\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n会话创建成功\n\n​\n\n事件类型\n\n：\n\nconversation.created\n\n​\n\n事件说明\n\n：用户成功进房后会发送此事件，收到此事件即表明\n\n房间初始化完成。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n对话开始\n\n​\n\n事件类型\n\n：\n\nconversation.chat.created\n\n​\n\n事件说明\n\n：创建对话的事件，表示对话开始。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n对话处理中\n\n​\n\n事件类型\n\n：\n\nconversation.chat.in_progress\n\n​\n\n事件说明\n\n：服务端正在处理对话。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n增量消息\n\n​\n\n事件类型\n\n：\n\nconversation.message.delta\n\n​\n\n事件说明\n\n：增量消息，通常是\n\ntype=answer\n\n时的增量消息。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n消息已完成\n\n​\n\n事件类型\n\n：\n\nconversation.message.completed\n\n​\n\n事件说明\n\n：消息已完成（用户或智能体）。此时事件中带有所有\n\nmessage.delta\n\n的拼接结果，且每个消息均为\n\ncompleted\n\n状态。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例：\n\n​\n\n​\n\n对话完成\n\n​\n\n事件类型\n\n：\n\nconversation.chat.completed\n\n​\n\n事件说明\n\n：表示对话已完成。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n端插件请求\n\n​\n\n事件类型\n\n：conversation.chat.requires_action\n\n​\n\n事件说明\n\n：对话中断，需要使用方上报工具的执行结果。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n对话失败\n\n​\n\n事件类型\n\n：\n\nconversation.chat.failed\n\n​\n\n事件说明\n\n：此事件用于标识对话失败。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n用户开始说话\n\n​\n\n事件类型\n\n：\n\naudio.user.speech_started\n\n​\n\n事件说明\n\n：此事件表示服务端识别到用户正在说话。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n用户结束说话\n\n​\n\n事件类型\n\n：\n\naudio.user.speech_stopped\n\n​\n\n事件说明\n\n：此事件表示服务端识别到用户已停止说话。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n智能体开始说话\n\n​\n\n事件类型\n\n：\n\naudio.agent.speech_started\n\n​\n\n事件说明\n\n：此事件表示智能体正在说话。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n智能体结束说话\n\n​\n\n事件类型\n\n：\n\naudio.agent.speech_stopped\n\n​\n\n事件说明\n\n：此事件表示智能体已停止说话。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n安抚配置更新成功\n\n​\n\n事件类型\n\n：\n\nsession.pre_answer.updated\n\n​\n\n事件说明\n\n：房间内的安抚配置更新成功，返回房间内最新的安抚配置。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n安抚已生成\n\n​\n\n事件类型\n\n：\n\nconversation.chat.pre_answer\n\n​\n\n事件说明\n\n：此事件表明触发了安抚策略。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n用户语音识别字幕\n\n​\n\n事件类型\n\n：\n\nconversation.audio_transcript.delta\n\n​\n\n事件说明\n\n：用户语音识别的中间值，每次返回都是全量文本。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n更新房间模式成功\n\n​\n\n事件类型\n\n：\n\nmode.updated\n\n​\n\n事件说明\n\n：房间模式更新成功，返回最新的房间模式设置。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n用户开始说话\n\n​\n\n事件类型\n\n：\n\ninput_audio_buffer.started\n\n​\n\n事件说明\n\n：表示服务端成功处理用户开始说话事件。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例：\n\n​\n\n​\n\n用户结束说话\n\n​\n\n事件类型\n\n：\n\ninput_audio_buffer.completed\n\n​\n\n事件说明\n\n：表示服务端成功处理用户结束说话事件。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例：\n\n​\n\n​\n\n​\n\n发生错误\n\n​\n\n事件类型\n\n：\n\nerror\n\n​\n\n事件说明\n\n：对话过程中的错误事件。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n​\n\n​\n\n上一篇\n\nRealtime 上行事件\n\n下一篇\n\nRealtime 事件错误码",
        "links": []
      },
      "markdown": "- 事件类型 ： session.created ​\n\n- 事件说明 ：用户成功进房后会发送此事件。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ String ​ 必选 ​ 服务端生成的唯一 ID。 ​ event_type ​ String ​ 必选 ​ 固定为 session.created 。 ​ data ​ Object ​ 必选 ​ 事件数据，包含对话的详细信息。 ​ data.voice_id ​ String ​ 必选 ​ 音色 ID。 ​ data.log_id ​ String ​ 必选 ​ 服务端日志 ID，用于查找问题。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 服务端生成的唯一 ID。​ |\n| event_type​ | String​ | 必选​ | 固定为session.created。​ |\n| data​ | Object​ | 必选​ | 事件数据，包含对话的详细信息。​ |\n| data.voice_id​ | String​ | 必选​ | 音色 ID。​ |\n| data.log_id​ | String​ | 必选​ | 服务端日志 ID，用于查找问题。​ |\n\n- 事件示例 ： ​\n\n- ​ JSON 复制 { ​ \"id\" : \"7446668538246561800\" , ​ \"event_type\" : \"session.created\" , ​ \"data\" : { ​ \"voice_id\" : \"134\" , ​ \"log_id\" : \"xxx\" ​ } ​ } ​ ​\n\n- 事件类型 ： session.updated ​\n\n- 事件说明 ：房间内的配置更新成功，返回房间内最新的配置。 ​\n\n- 事件结构 ： ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 服务端生成的唯一 ID。​ |\n| event_type​ | String​ | 必选​ | 固定为session.updated。​ |\n| data​ | Object​ | 必选​ | 事件数据，包含对话的详细信息。​ |\n| data.voice_id​ | String​ | 必选​ | 音色 ID。​ |\n| data.speech_rate​ | Integer​ | 必选​ | 模型回复的语速，取值范围 [-50, 100]，默认为 0。-50 表示 0.5 倍速，100 表示 2 倍速。​ |\n| data.loudness_rate​ | Integer​ | 可选​ | 输出音频的音量，取值范围 [-50, 100]，默认为 0。-50 表示 0.5 倍音量，100 表示 2 倍音量。​ |\n| data.longest_silence_ms​ | Integer​ | 可选​ | 当智能体处于长时间沉默状态时，房间将自动解散。此时间以毫秒（ms）为单位计量，默认时长为 180,000 毫秒。​ |\n| data.event_subscriptions​ | Array<String>​ | 可选​ | 订阅的下行事件的事件类型列表。​ |\n| data.chat_config​ | Object​ | 必选​ | 聊天配置信息。​ |\n| data.chat_config.meta_data​ | Map<String, String>​ | 必选​ | 附加信息，通常用于封装一些业务相关的字段。查看对话消息详情时，系统会透传此附加信息。自定义键值对，应指定为 Map 对象格式。长度为 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。​ |\n| data.chat_config.custom_variables​ | Map<String, String>​ | 必选​ | 智能体中定义的变量。在智能体 prompt 中设置变量 {{key}} 后，可以通过该参数传入变量值，同时支持 Jinja2 语法。变量名只支持英文字母和下划线。​ |\n| data.chat_config.extra_params​ | Map<String, String>​ | 必选​ | 附加参数，通常用于特殊场景下指定一些必要参数供模型判断，例如指定经纬度，并询问智能体此位置的天气。自定义键值对格式，其中键（key）仅支持设置为：​latitude（纬度，值为纬度值，例如 39.9800718）​longitude（经度，值为经度值，例如 116.309314）。​ |\n| data.chat_config.plugin_interrupt_mode​ | String​ | 必选​ | 端插件执行模式，可选值有blocking/nonblocking，默认为nonblocking。​blocking模式下，遇到端插件执行后，会阻塞后续的对话，直到提交端插件结果。​nonblocking模式下，遇到端插件执行后，若未提交端插件结果继续对话，则端插件请求会被丢弃。​ |\n| data.chat_config.allow_voice_interrupt​ | Boolean​ | 可选​ | 是否打开语音打断功能，默认为true。​ |\n| data.chat_config.interrupt_config​ | Object​ | 可选​ | 语音打断配置，仅在 allow_voice_interrupt 为true时生效​ |\n| data.chat_config.interrupt_config.mode​ | String​ | 必选​ | 语音打断模式，可选值有all/keyword_contains/keyword_prefix，默认为all。​all模式下，任意内容都可以打断模型回复。​keyword_contains模式下，说话内容包含关键词才会打断模型回复。​keyword_prefix模式下，说话内容前缀匹配关键词才会打断模型回复。​ |\n| data.chat_config.interrupt_config.keywords​ | Array<String>​ | 可选​ | 关键词列表，每个关键词长度不超过8个字，最多10个关键词，仅在keyword_contains/keyword_prefix模式下生效。​ |\n| data.turn_detection​ | Object​ | 可选​ | 声音检测配置。​ |\n| data.turn_detection.type​ | String​ | 可选​ | 语音检测模式，默认为server_vad，可选项包括：​server_vad：语音活动检测由扣子编程服务端完成，客户端将音频流持续发送到服务端，服务端在接收到音频后，通过服务端 VAD 检测语音的开始和结束。​client_vad：客户端使用自己的 VAD 检测语音的开始和结束，并将检测到的语音片段发送到服务器进行识别。​semantic_vad：采用语义判停的自由对话模式（此功能仅对企业旗舰版用户开放），由服务端识别语义来判断是否停止说话。​详细的检测逻辑请参见​如何设置扣子的语音检测模式？。​ |\n| data.turn_detection.silence_duration_ms​ | Integer​ | 可选​ | server_vad模式下，检测语音停止的静音持续时间，单位为 ms。默认为 500ms。​ |\n| data.turn_detection.semantic_vad_config​ | Object​ | 可选​ | semantic_vad模式下，配置判定语音停止的语义检测策略。​ |\n| data.turn_detection.semantic_vad_config.silence_threshold_ms​ | Integer​ | 可选​ | 当用户暂停说话时，持续静音多久后，触发语义判停检测。单位为 ms。默认为 300ms。​ |\n| data.turn_detection.semantic_vad_config.semantic_unfinished_wait_time_ms​ | Integer​ | 可选​ | 当语义检测判断该语句未结束时，持续静音多久后，扣子编程认定语音结束。单位为 ms。默认为 500ms。​ |\n| data.asr_config.enable_itn​ | Boolean​ | 可选​ | 将语音转为文本时，是否开启文本规范化（ITN）处理，将识别结果转换为更符合书面表达习惯的格式以提升可读性。默认为true。​开启后，会将口语化数字转换为标准数字格式，示例：​将两点十五分转换为14:15。​将一百美元转换为$100。​ |\n| data.asr_config.enable_punc​ | Boolean​ | 可选​ | 将语音转为文本时，是否给文本加上标点符号。默认为true。​ |\n| data.asr_config.enable_ddc​ | Boolean​ | 可选​ | 将语音转为文本时，是否启用顺滑，默认为true。​true：系统在进行语音处理时，会去掉识别结果中诸如 “啊”“嗯” 等语气词，使得输出的文本语义更加流畅自然，符合正常的语言表达习惯，尤其适用于对文本质量要求较高的场景，如正式的会议记录、新闻稿件生成等。​false：系统不会对识别结果中的语气词进行处理，识别结果会保留原始的语气词。​ |\n| data.asr_config.enable_nostream​ | Boolean​ | 可选​ | 当前是否开启二次识别模式，枚举值：​true：已开启二次识别模式。会实时返回逐字识别的文本；当一句话结束时，会结合整句音频进行上下文分析并重新识别，生成优化后的识别结果并返回。这种机制既能满足客户实时上屏的需求，又能确保最终结果的识别准确率。​false：未开启二次识别模式。仅进行一次实时识别，逐字返回文本，不会在一句话结束时重新识别分句，可能存在一定的识别误差。​ |\n| data.asr_config.enable_emotion​ | Boolean​ | 可选​ | 当前是否开启说话人情绪识别功能，枚举值：​true：已开启情绪识别，会返回说话人的情绪标签，仅在data.asr_config.stream_mode为output_no_stream时生效。​false：未开启情绪识别。​支持的情绪标签包括：​angry：表示情绪为生气​happy：表示情绪为开心​neutral：表示情绪为平静或中性​sad：表示情绪为悲伤​surprise：表示情绪为惊讶​ |\n| data.asr_config.enable_gender​ | Boolean​ | 可选​ | 当前是否开启说话人性别识别功能，枚举值：​true：已开启性别识别，会返回说话人性别（male/female），仅在data.asr_config.stream_mode为output_no_stream时生效。​false：未开启性别识别。​ |\n| data.asr_config.sensitive_words_filter​ | Object​ | 可选​ | 当前敏感词过滤功能的配置状态，支持以下 3 种过滤方式：​过滤系统敏感词，并替换为*。​过滤自定义敏感词，并替换为空。​过滤自定义敏感词，并替换为*。​ |\n| data.asr_config.sensitive_words_filter.system_reserved_filter​ | Boolean​ | 可选​ | 当前是否启用系统自带敏感词过滤（匹配到的敏感词替换为*），枚举值：​true：已启用，系统会过滤系统自带敏感词（主要包含限制级词汇）并替换为*。​false：未启用系统自带敏感词的过滤。​ |\n| data.asr_config.sensitive_words_filter.filter_with_empty​ | Array<string>​ | 可选​ | 自定义的需替换为空的敏感词列表。​ |\n| data.asr_config.sensitive_words_filter.filter_with_signed​ | Array<string>​ | 可选​ | 自定义的需替换为*的敏感词列表。​ |\n| data.voice_print_config​ | Array<String>​ | 可选​ | 声纹识别配置。​ |\n| data.voice_print_config.group_id​ | String​ | 可选​ | 声纹组 ID。语音通话时，扣子编程会在该声纹组内进行查找匹配对应的声纹，当声纹匹配度高于score阈值，则认为是同一个人的声音。​ |\n| data.voice_print_config.score​ | Integer​ | 可选​ | 声纹匹配的命中阈值，即声音匹配度的最低标准。当声音匹配度达到或超过该阈值时，扣子编程才会认定声纹匹配成功。你可以根据应用的安全性要求进行自定义设置。如果匹配了多轮声纹，扣子编程会取相似度最高的一个。​取值范围：0~100，默认值：40。​ |\n| data.voice_print_config.reuse_voice_info​ | Boolean​ | 可选​ | 当本轮对话未命中任何声纹时，是否沿用历史声纹信息。默认为false。​true：未命中声纹时，智能体将返回上一次命中的声纹。适用于连续对话场景，当收音不好等情况导致声纹没能正确被识别时，保障对话的连贯性。​false：未命中声纹时，智能体返回空的声纹信息。​ |\n| data.voice_processing_config​ | Object​ | 可选​ | 语音降噪配置。默认不启用降噪。​说明仅扣子企业旗舰版支持该配置。​ |\n| data.voice_processing_config.enable_ans​ | Boolean​ | 可选​ | 主动噪声抑制。自动识别并过滤掉背景环境中的各种噪音（如键盘声、空调声、街道嘈杂声），让说话者的声音更清晰。​此功能与下面的enable_pdns（声纹降噪）只能二选一开启，不能同时使用。​ |\n| data.voice_processing_config.enable_pdns​ | Boolean​ | 可选​ | 声纹降噪。专门针对特定说话人的声音进行优化，能更精准地保留目标人声。​此功能与上面的enable_ans只能二选一开启，不能同时使用。​提供两种模式，你可以根据需要选择：​自动提取：设置简单，开箱即用。默认为该模式。降噪生效稍微有延迟，服务端需要先听你说一会儿话才能提取出你的声纹特征，在此期间降噪效果可能不佳。另外，提取声纹会受到用户说话场景影响，准确性上可能会弱于主动设置。​主动设置：降噪效果更精准、更快速，在对话开始时就立即生效。不过需要提前录制声纹并在voice_print_feature_id中设置声纹 ID。​ |\n| data.voice_print_config.feature_id​ | String​ | 可选​ | 目标说话人的声纹 ID。当你选择开启enable_pdns（声纹降噪）并希望使用主动设置模式时，需要在此处填入你提前录制好的声纹 ID。​ |\n\n- latitude（纬度，值为纬度值，例如 39.9800718） ​\n\n- longitude（经度，值为经度值，例如 116.309314）。 ​\n\n- blocking 模式下，遇到端插件执行后，会阻塞后续的对话，直到提交端插件结果。 ​\n\n- nonblocking 模式下，遇到端插件执行后，若未提交端插件结果继续对话，则端插件请求会被丢弃。 ​\n\n- all 模式下，任意内容都可以打断模型回复。 ​\n\n- keyword_contains 模式下，说话内容 包含 关键词才会打断模型回复。 ​\n\n- keyword_prefix 模式下，说话内容 前缀匹配 关键词才会打断模型回复。 ​\n\n- server_vad ：语音活动检测由扣子编程服务端完成，客户端将音频流持续发送到服务端，服务端在接收到音频后，通过服务端 VAD 检测语音的开始和结束。 ​\n\n- client_vad ：客户端使用自己的 VAD 检测语音的开始和结束，并将检测到的语音片段发送到服务器进行识别。 ​\n\n- semantic_vad ：采用语义判停的自由对话模式（ 此功能仅对企业旗舰版用户开放 ），由服务端识别语义来判断是否停止说话。 ​\n\n- 将 两点十五分 转换为 14:15 。 ​\n\n- 将 一百美元 转换为 $100 。 ​\n\n- true ：系统在进行语音处理时，会去掉识别结果中诸如 “啊”“嗯” 等语气词，使得输出的文本语义更加流畅自然，符合正常的语言表达习惯，尤其适用于对文本质量要求较高的场景，如正式的会议记录、新闻稿件生成等。 ​\n\n- false ：系统不会对识别结果中的语气词进行处理，识别结果会保留原始的语气词。 ​\n\n- true ：已开启二次识别模式。会实时返回逐字识别的文本；当一句话结束时，会结合整句音频进行上下文分析并重新识别，生成优化后的识别结果并返回。这种机制既能满足客户实时上屏的需求，又能确保最终结果的识别准确率。 ​\n\n- false ：未开启二次识别模式。仅进行一次实时识别，逐字返回文本，不会在一句话结束时重新识别分句，可能存在一定的识别误差。 ​\n\n- true ：已开启情绪识别，会返回说话人的情绪标签，仅在 data.asr_config.stream_mode 为 output_no_stream 时生效。 ​\n\n- false ：未开启情绪识别。 ​\n\n- angry ：表示情绪为生气 ​\n\n- happy ：表示情绪为开心 ​\n\n- neutral ：表示情绪为平静或中性 ​\n\n- sad ：表示情绪为悲伤 ​\n\n- surprise ：表示情绪为惊讶 ​\n\n- true ：已开启性别识别，会返回说话人性别（ male / female ），仅在 data.asr_config.stream_mode 为 output_no_stream 时生效。 ​\n\n- false ：未开启性别识别。 ​\n\n- 过滤系统敏感词，并替换为 * 。 ​\n\n- 过滤自定义敏感词，并替换为空。 ​\n\n- 过滤自定义敏感词，并替换为 * 。 ​\n\n- true ：已启用，系统会过滤系统自带敏感词（主要包含限制级词汇）并替换为 * 。 ​\n\n- false ：未启用系统自带敏感词的过滤。 ​\n\n- true ：未命中声纹时，智能体将返回上一次命中的声纹。适用于连续对话场景，当收音不好等情况导致声纹没能正确被识别时，保障对话的连贯性。 ​\n\n- false ：未命中声纹时，智能体返回空的声纹信息。 ​\n\n- 自动提取：设置简单，开箱即用。默认为该模式。 降噪生效稍微有延迟 ，服务端需要先听你说一会儿话才能提取出你的声纹特征，在此期间降噪效果可能不佳。另外，提取声纹会受到用户说话场景影响，准确性上可能会弱于主动设置。 ​\n\n- 主动设置： 降噪效果更精准、更快速 ，在对话开始时就立即生效。不过需要提前录制声纹并在 voice_print_feature_id 中设置声纹 ID。 ​\n\n- 事件示例 ： ​\n\n- ​\n\n- 事件类型 ： conversation.created ​\n\n- 事件说明 ：用户成功进房后会发送此事件，收到此事件即表明 房间初始化完成。 ​\n\n- 事件结构 ： ​\n\n- ​\n\n- 事件示例 ： ​\n\n- ​\n\n- 事件类型 ： conversation.chat.created ​\n\n- 事件说明 ：创建对话的事件，表示对话开始。 ​\n\n- 事件结构 ： ​\n\n- ​\n\n- 事件示例 ： ​\n\n- ​\n\n- 事件类型 ： conversation.chat.in_progress ​\n\n- 事件说明 ：服务端正在处理对话。 ​\n\n- 事件结构 ： ​\n\n- ​\n\n- 事件示例 ： ​\n\n- ​\n\n- 事件类型 ： conversation.message.delta ​\n\n- 事件说明 ：增量消息，通常是 type=answer 时的增量消息。 ​\n\n- 事件结构 ： ​\n\n- ​\n\n- 事件示例 ： ​\n\n- ​\n\n- 事件类型 ： conversation.message.completed ​\n\n- 事件说明 ：消息已完成（用户或智能体）。此时事件中带有所有 message.delta 的拼接结果，且每个消息均为 completed 状态。 ​\n\n- 事件结构 ： ​\n\n- 事件示例： ​\n\n- 事件类型 ： conversation.chat.completed ​\n\n- 事件说明 ：表示对话已完成。 ​\n\n- 事件结构 ： ​\n\n- 事件示例 ： ​\n\n- 事件类型 ：conversation.chat.requires_action ​\n\n- 事件说明 ：对话中断，需要使用方上报工具的执行结果。 ​\n\n- 事件结构 ： ​\n\n- 事件示例 ： ​\n\n- ​\n\n- 事件类型 ： conversation.chat.failed ​\n\n- 事件说明 ：此事件用于标识对话失败。 ​\n\n- 事件结构 ： ​\n\n- 事件示例 ： ​\n\n- 事件类型 ： audio.user.speech_started ​\n\n- 事件说明 ：此事件表示服务端识别到用户正在说话。 ​\n\n- 事件结构 ： ​\n\n- ​\n\n- 事件示例 ： ​\n\n- ​\n\n- 事件类型 ： audio.user.speech_stopped ​\n\n- 事件说明 ：此事件表示服务端识别到用户已停止说话。 ​\n\n- 事件结构 ： ​\n\n- 事件示例 ： ​\n\n- 事件类型 ： audio.agent.speech_started ​\n\n- 事件说明 ：此事件表示智能体正在说话。 ​\n\n- 事件结构 ： ​\n\n- ​\n\n- 事件示例 ： ​\n\n- ​\n\n- 事件类型 ： audio.agent.speech_stopped ​\n\n- 事件说明 ：此事件表示智能体已停止说话。 ​\n\n- 事件结构 ： ​\n\n- ​\n\n- 事件示例 ： ​\n\n- ​\n\n- 事件类型 ： session.pre_answer.updated ​\n\n- 事件说明 ：房间内的安抚配置更新成功，返回房间内最新的安抚配置。 ​\n\n- 事件结构 ： ​\n\n- ​\n\n- 事件示例 ： ​\n\n- ​\n\n- 事件类型 ： conversation.chat.pre_answer ​\n\n- 事件说明 ：此事件表明触发了安抚策略。 ​\n\n- 事件结构 ： ​\n\n- ​\n\n- 事件示例 ： ​\n\n- ​\n\n- 事件类型 ： conversation.audio_transcript.delta ​\n\n- 事件说明 ：用户语音识别的中间值，每次返回都是全量文本。 ​\n\n- 事件结构 ： ​\n\n- ​\n\n- 事件示例 ： ​\n\n- ​\n\n- 事件类型 ： mode.updated ​\n\n- 事件说明 ：房间模式更新成功，返回最新的房间模式设置。 ​\n\n- 事件结构 ： ​\n\n- 事件示例 ： ​\n\n- 事件类型 ： input_audio_buffer.started ​\n\n- 事件说明 ：表示服务端成功处理用户开始说话事件。 ​\n\n- 事件结构 ： ​\n\n- ​\n\n- 事件示例： ​\n\n- ​\n\n- 事件类型 ： input_audio_buffer.completed ​\n\n- 事件说明 ：表示服务端成功处理用户结束说话事件。 ​\n\n- 事件结构 ： ​\n\n- ​\n\n- 事件示例： ​\n\n- ​\n\n- 事件类型 ： error ​\n\n- 事件说明 ：对话过程中的错误事件。 ​\n\n- 事件结构 ： ​\n\n- ​\n\n- 事件示例 ： ​\n\n- ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/realtime_error_codes",
      "title": "Realtime 事件错误码",
      "content": {
        "sections": [],
        "full_text": "Realtime 事件错误码\n\n本文介绍音视频通话过程中下行事件返回的错误码及其解决方案。\n\n​\n\n​\n\n​\n\ncode\n\n​\n\nmsg\n\n​\n\n说明\n\n​\n\n4027\n\n​\n\nYour account has an overdue payment, please recharge immediately.\n\n​\n\n原因：账户欠费。\n\n​\n\n解决方案：请检查\n\n账户余额\n\n。\n\n​\n\n4028\n\n​\n\nInsufficient coze credits balance, please wait for the quota refresh or upgrade to paid version.\n\n​\n\n原因：免费版资源点不足。\n\n​\n\n解决方案：请检查\n\n账户余额\n\n。\n\n​\n\n4029\n\n​\n\nThe connection was closed due to prolonged user inactivity. Please retry your request.\n\n​\n\n原因: 房间长时间没有对话，自动退出。\n\n​\n\n解决方案:  通过\n\n​\n\nRealtime 上行事件\n\n修改 longest_silence_ms 提高房间的静默时间（默认 3 分钟）。退出房间后需要重新创建房间。\n\n​\n\n​\n\n​\n\n上一篇\n\nRealtime 下行事件\n\n下一篇\n\n双向流式语音识别",
        "links": []
      },
      "markdown": "| code​ | msg​ | 说明​ |\n| 4027​ | Your account has an overdue payment, please recharge immediately.​ | 原因：账户欠费。​解决方案：请检查账户余额。​ |\n| 4028​ | Insufficient coze credits balance, please wait for the quota refresh or upgrade to paid version.​ | 原因：免费版资源点不足。​解决方案：请检查账户余额。​ |\n| 4029​ | The connection was closed due to prolonged user inactivity. Please retry your request.​ | 原因: 房间长时间没有对话，自动退出。​解决方案:  通过​Realtime 上行事件修改 longest_silence_ms 提高房间的静默时间（默认 3 分钟）。退出房间后需要重新创建房间。​ |\n\n- 原因：账户欠费。 ​\n\n- 解决方案：请检查 账户余额 。 ​\n\n- 原因：免费版资源点不足。 ​\n\n- 解决方案：请检查 账户余额 。 ​\n\n- 原因: 房间长时间没有对话，自动退出。 ​\n\n- 解决方案:  通过 ​ Realtime 上行事件 修改 longest_silence_ms 提高房间的静默时间（默认 3 分钟）。退出房间后需要重新创建房间。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/asr_api",
      "title": "双向流式语音识别",
      "content": {
        "sections": [],
        "full_text": "双向流式语音识别\n\n扣子编程提供流式语音识别 WebSocket OpenAPI，可以将指定的音频判断转为文字，支持识别中英文双语种。\n\n​\n\n双向流式语音识别场景下的各类事件详细信息可参考\n\n​\n\n双向流式语音识别事件\n\n。\n\n​\n\n接口信息\n\n​\n\n​\n\nURL\n\n​\n\nwss://\n\nws.coze.cn/v1/audio/transcriptions\n\n​\n\nHeaders\n\n​\n\nAuthorization Bearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息请参考\n\n准备工作\n\n。\n\n​\n\n权限\n\n​\n\ncreateTranscription\n\n​\n\n接口说明\n\n​\n\n将指定的音频判断转为文字，支持识别中英文双语种。\n\n​\n\n​\n\n建连示例代码\n\n​\n\nws module(Node.js)\n\nwebsocket-client(Python)\n\nWebsocket(browsers)\n\n​\n\n​\n\nJavaScript\n\n复制\n\nimport\n\nWebSocket\n\nfrom\n\n'ws'\n\n;\n\n​\n\n​\n\nconst\n\nurl =\n\n`wss://\n\nws.coze.cn/v1/audio/transcriptions?authorization=Bearer\n\n${ACCESS_TOKEN}\n\n`\n\n;\n\n​\n\nconst\n\nws =\n\nnew\n\nWebSocket\n\n(url);\n\n​\n\n​\n\nws.\n\non\n\n(\n\n'open'\n\n,\n\nfunction\n\nopen\n\n() {\n\n​\n\nconsole\n\n.\n\nlog\n\n(\n\n'Connected to server.'\n\n);\n\n​\n\n});\n\n​\n\n​\n\nws.\n\non\n\n(\n\n'message'\n\n,\n\nfunction\n\nincoming\n\n(\n\nmessage\n\n) {\n\n​\n\nconsole\n\n.\n\nlog\n\n(\n\nJSON\n\n.\n\nparse\n\n(message.\n\ntoString\n\n()));\n\n​\n\n});\n\n​\n\n​\n\n​\n\n​\n\nAPI 时序图\n\n​\n\n交互流程如下：\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n上一篇\n\nRealtime 事件错误码\n\n下一篇\n\n双向流式语音识别事件",
        "links": []
      },
      "markdown": "| URL​ | wss://ws.coze.cn/v1/audio/transcriptions​ |\n| Headers​ | Authorization Bearer$Access_Token​用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息请参考准备工作。​ |\n| 权限​ | createTranscription​ |\n| 接口说明​ | 将指定的音频判断转为文字，支持识别中英文双语种。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/asr_event",
      "title": "双向流式语音识别事件",
      "content": {
        "sections": [],
        "full_text": "双向流式语音识别事件\n\n上行事件\n\n​\n\n更新语音识别配置\n\n​\n\n事件类型\n\n：\n\ntranscriptions.update\n\n​\n\n事件说明\n\n：更新语音识别配置。若更新成功，会收到\n\ntranscriptions.updated\n\n的下行事件，否则，会收到\n\nerror\n\n下行事件。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\ntranscriptions.update\n\n。\n\n​\n\ndata\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n事件数据，包含语音识别配置的详细信息。\n\n​\n\ndata.input_audio\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n输入音频格式。\n\n​\n\ndata.input_audio.format\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n输入音频的格式，支持\n\npcm\n\n、\n\nwav\n\n、\n\nogg\n\n。默认为\n\nwav\n\n。\n\n​\n\ndata.input_audio.codec\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n输入音频的编码，支持\n\npcm\n\n、\n\nopus\n\n。默认为\n\npcm\n\n。\n\n​\n\ndata.input_audio.sample_rate\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n输入音频的采样率，默认 24000。\n\n​\n\ndata.input_audio.channel\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n输入音频的声道数，默认是 1（单声道）。\n\n​\n\ndata.input_audio.bit_depth\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n输入音频的位深，默认是 16。\n\n​\n\ndata.asr_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n语音识别配置，包括热词和上下文信息，以便优化语音识别的准确性和相关性。\n\n​\n\ndata.asr_config.hot_words\n\n​\n\nArray<String>\n\n​\n\n可选\n\n​\n\n输入热词列表，以便提升这些词汇的识别准确率。\n\n​\n\n所有热词加起来最多100个 Tokens，超出部分将自动截断。\n\n​\n\ndata.asr_config.context\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n输入上下文信息。\n\n​\n\n最多输入 800 个 Tokens，超出部分将自动截断。\n\n​\n\ndata.asr_config.user_language\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n用户说话的语种，默认为\n\ncommon\n\n。选项包括：\n\n​\n\ncommon：大模型语音识别，可自动识别中英粤。\n\n​\n\nzh：小模型语音识别，中文。\n\n​\n\ncant：小模型语音识别，粤语。\n\n​\n\nsc：小模型语音识别，川渝。\n\n​\n\nen：小模型语音识别，英语。\n\n​\n\nja：小模型语音识别，日语。\n\n​\n\nko：小模型语音识别，韩语。\n\n​\n\nfr：小模型语音识别，法语。\n\n​\n\nid：小模型语音识别，印尼语。\n\n​\n\nes：小模型语音识别，西班牙语。\n\n​\n\npt：小模型语音识别，葡萄牙语。\n\n​\n\nms：小模型语音识别，马来语。\n\n​\n\nru：小模型语音识别，俄语。\n\n​\n\ndata.asr_config.enable_ddc\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n将语音转为文本时，是否启用语义顺滑。默认为\n\ntrue\n\n。\n\n​\n\ntrue\n\n：系统在进行语音处理时，会去掉识别结果中诸如 “啊”“嗯” 等语气词，使得输出的文本语义更加流畅自然，符合正常的语言表达习惯，尤其适用于对文本质量要求较高的场景，如正式的会议记录、新闻稿件生成等。\n\n​\n\nfalse\n\n：系统不会对识别结果中的语气词进行处理，识别结果会保留原始的语气词。\n\n​\n\ndata.asr_config.enable_itn\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n将语音转为文本时，是否开启文本规范化（ITN）处理，将识别结果转换为更符合书面表达习惯的格式以提升可读性。默认为\n\ntrue\n\n。\n\n​\n\n开启后，会将口语化数字转换为标准数字格式，示例：\n\n​\n\n将\n\n两点十五分\n\n转换为\n\n14:15\n\n。\n\n​\n\n将\n\n一百美元\n\n转换为\n\n$100\n\n。\n\n​\n\ndata.asr_config.enable_punc\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n将语音转为文本时，是否给文本加上标点符号。默认为\n\ntrue\n\n。\n\n​\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"event_id\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"transcriptions.update\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"input_audio\"\n\n:\n\n{\n\n​\n\n\"format\"\n\n:\n\n\"pcm\"\n\n,\n\n​\n\n\"codec\"\n\n:\n\n\"pcm\"\n\n,\n\n​\n\n\"sample_rate\"\n\n:\n\n24000\n\n,\n\n​\n\n\"channel\"\n\n:\n\n1\n\n,\n\n​\n\n\"bit_depth\"\n\n:\n\n16\n\n​\n\n}\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n流式上传音频片段\n\n​\n\n事件类型\n\n：\n\ninput_audio_buffer.append\n\n​\n\n事件说明\n\n：流式向服务端提交音频的片段。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\ninput_audio_buffer.append\n\n。\n\n​\n\ndata\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件数据，包含音频片段信息。\n\n​\n\ndata.delta\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nbase64 编码后的音频片段。\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"event_id\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"input_audio_buffer.append\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"delta\"\n\n:\n\n\"base64EncodedAudioDelta\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n提交音频\n\n​\n\n事件类型\n\n：\n\ninput_audio_buffer.complete\n\n​\n\n事件说明\n\n：客户端发送\n\ninput_audio_buffer.complete\n\n事件来告诉服务端提交音频缓冲区的数据。服务端提交成功后会返回\n\ninput_audio_buffer.completed\n\n事件。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\ninput_audio_buffer.complete\n\n。\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"event_id\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"input_audio_buffer.complete\"\n\n​\n\n}\n\n​\n\n​\n\n清除缓冲区音频\n\n​\n\n事件类型\n\n：\n\ninput_audio_buffer.clear\n\n​\n\n事件说明\n\n：客户端发送\n\ninput_audio_buffer.clear\n\n事件来告诉服务端清除缓冲区的音频数据。服务端清除完后将返回\n\ninput_audio_buffer.cleared\n\n事件。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\ninput_audio_buffer.clear\n\n。\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"event_1\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"input_audio_buffer.clear\"\n\n​\n\n}\n\n​\n\n​\n\n下行事件\n\n​\n\n连接成功\n\n​\n\n事件类型\n\n：\n\ntranscriptions.created\n\n​\n\n事件说明\n\n：语音识别连接成功后，返回此事件。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n服务端生成的唯一 ID。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\ntranscriptions.created\n\n。\n\n​\n\ndetail\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件详情。\n\n​\n\ndetail.logid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"7446668538246561xxxx\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"transcriptions.created\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2F3***\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n配置更新成功\n\n​\n\n事件类型\n\n：\n\ntranscriptions.updated\n\n​\n\n事件说明\n\n：配置更新成功后，会返回最新的配置。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\ntranscriptions.updated\n\n。\n\n​\n\ndata\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件数据，包含语音识别配置的详细信息。\n\n​\n\ndata.input_audio\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n输入音频格式。\n\n​\n\ndata.input_audio.format\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n输入音频的格式，支持\n\npcm\n\n、\n\nwav\n\n、\n\nogg\n\n。默认为\n\nwav\n\n。\n\n​\n\ndata.input_audio.codec\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n输入音频的编码，支持\n\npcm\n\n、\n\nopus\n\n。默认为\n\npcm\n\n。\n\n​\n\ndata.input_audio.sample_rate\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\n输入音频的采样率，默认 24000。\n\n​\n\ndata.input_audio.channel\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\n输入音频的声道数，默认是 1（单声道）。\n\n​\n\ndata.input_audio.bit_depth\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\n输入音频的位深，默认是 16。\n\n​\n\ndetail\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件详情。\n\n​\n\ndetail.logid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"event_id\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"transcriptions.updated\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"input_audio\"\n\n:\n\n{\n\n​\n\n\"format\"\n\n:\n\n\"pcm\"\n\n,\n\n​\n\n\"codec\"\n\n:\n\n\"pcm\"\n\n,\n\n​\n\n\"sample_rate\"\n\n:\n\n24000\n\n,\n\n​\n\n\"channel\"\n\n:\n\n1\n\n,\n\n​\n\n\"bit_depth\"\n\n:\n\n16\n\n​\n\n}\n\n​\n\n},\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2F3***\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n音频提交完成\n\n​\n\n事件类型\n\n：\n\ninput_audio_buffer.completed\n\n​\n\n事件说明\n\n：流式提交的音频完成后，返回此事件。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\ninput_audio_buffer.completed\n\n。\n\n​\n\ndetail\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件详情。\n\n​\n\ndetail.logid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"event_id\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"input_audio_buffer.completed\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2F3***\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n音频清除成功\n\n​\n\n事件类型\n\n：\n\ninput_audio_buffer.cleared\n\n​\n\n事件说明\n\n：清除缓冲区音频成功后，返回此事件。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\ninput_audio_buffer.cleared\n\n。\n\n​\n\ndetail\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件详情。\n\n​\n\ndetail.logid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\nPython\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"event_id\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"input_audio_buffer.cleared\"\n\n,\n\n​\n\n\"detail\"\n\n: {\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2F3***\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n识别出文字\n\n​\n\n事件类型\n\n：\n\ntranscriptions.message.update\n\n​\n\n事件说明\n\n：语音识别出文字后，返回此事件，每次都返回全量的识别出来的文字。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\ntranscriptions.message.update\n\n。\n\n​\n\ndata\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件数据，包含识别出的文字。\n\n​\n\ndata.content\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n识别出的文字。\n\n​\n\ndetail\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件详情。\n\n​\n\ndetail.logid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"event_id\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"transcriptions.message.update\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"content\"\n\n:\n\n\"text\"\n\n​\n\n},\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2F3***\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n识别完成\n\n​\n\n事件类型\n\n：\n\ntranscriptions.message.completed\n\n​\n\n事件说明\n\n：语音识别完成后，返回此事件。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\ntranscriptions.message.completed\n\n。\n\n​\n\ndetail\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件详情。\n\n​\n\ndetail.logid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\nHTTP\n\n复制\n\n{\n\n​\n\n\"id\": \"event_id\",\n\n​\n\n\"event_type\": \"transcriptions.message.completed\",\n\n​\n\n\"detail\": {\n\n​\n\n\"logid\": \"20241210152726467C48D89D6DB2F3***\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n发生错误\n\n​\n\n事件类型\n\n：\n\nerror\n\n​\n\n事件说明\n\n：识别过程中的错误事件。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n服务端生成的唯一 ID。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\nerror\n\n。\n\n​\n\ndata\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件数据，包含错误信息。\n\n​\n\ndata.code\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\n错误码。\n\n​\n\ndata.msg\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n错误信息。\n\n​\n\ndetail\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件详情。\n\n​\n\ndetail.logid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"event_1\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"error\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"code\"\n\n:\n\n1\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"发生异常\"\n\n​\n\n},\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2F3***\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n上一篇\n\n双向流式语音识别\n\n下一篇\n\n双向流式语音合成",
        "links": []
      },
      "markdown": "- 事件类型 ： transcriptions.update ​\n\n- 事件说明 ：更新语音识别配置。若更新成功，会收到 transcriptions.updated 的下行事件，否则，会收到 error 下行事件。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ String ​ 必选 ​ 客户端自行生成的事件 ID，方便定位问题。 ​ event_type ​ String ​ 必选 ​ 固定为 transcriptions.update 。 ​ data ​ Object ​ 可选 ​ 事件数据，包含语音识别配置的详细信息。 ​ data.input_audio ​ Object ​ 可选 ​ 输入音频格式。 ​ data.input_audio.format ​ String ​ 可选 ​ 输入音频的格式，支持 pcm 、 wav 、 ogg 。默认为 wav 。 ​ data.input_audio.codec ​ String ​ 可选 ​ 输入音频的编码，支持 pcm 、 opus 。默认为 pcm 。 ​ data.input_audio.sample_rate ​ Integer ​ 可选 ​ 输入音频的采样率，默认 24000。 ​ data.input_audio.channel ​ Integer ​ 可选 ​ 输入音频的声道数，默认是 1（单声道）。 ​ data.input_audio.bit_depth ​ Integer ​ 可选 ​ 输入音频的位深，默认是 16。 ​ data.asr_config ​ Object ​ 可选 ​ 语音识别配置，包括热词和上下文信息，以便优化语音识别的准确性和相关性。 ​ data.asr_config.hot_words ​ Array<String> ​ 可选 ​ 输入热词列表，以便提升这些词汇的识别准确率。 ​ 所有热词加起来最多100个 Tokens，超出部分将自动截断。 ​ data.asr_config.context ​ String ​ 可选 ​ 输入上下文信息。 ​ 最多输入 800 个 Tokens，超出部分将自动截断。 ​ data.asr_config.user_language ​ String ​ 可选 ​ 用户说话的语种，默认为 common 。选项包括： ​ common：大模型语音识别，可自动识别中英粤。 ​ zh：小模型语音识别，中文。 ​ cant：小模型语音识别，粤语。 ​ sc：小模型语音识别，川渝。 ​ en：小模型语音识别，英语。 ​ ja：小模型语音识别，日语。 ​ ko：小模型语音识别，韩语。 ​ fr：小模型语音识别，法语。 ​ id：小模型语音识别，印尼语。 ​ es：小模型语音识别，西班牙语。 ​ pt：小模型语音识别，葡萄牙语。 ​ ms：小模型语音识别，马来语。 ​ ru：小模型语音识别，俄语。 ​ data.asr_config.enable_ddc ​ Boolean ​ 可选 ​ 将语音转为文本时，是否启用语义顺滑。默认为 true 。 ​ true ：系统在进行语音处理时，会去掉识别结果中诸如 “啊”“嗯” 等语气词，使得输出的文本语义更加流畅自然，符合正常的语言表达习惯，尤其适用于对文本质量要求较高的场景，如正式的会议记录、新闻稿件生成等。 ​ false ：系统不会对识别结果中的语气词进行处理，识别结果会保留原始的语气词。 ​ data.asr_config.enable_itn ​ Boolean ​ 可选 ​ 将语音转为文本时，是否开启文本规范化（ITN）处理，将识别结果转换为更符合书面表达习惯的格式以提升可读性。默认为 true 。 ​ 开启后，会将口语化数字转换为标准数字格式，示例： ​ 将 两点十五分 转换为 14:15 。 ​ 将 一百美元 转换为 $100 。 ​ data.asr_config.enable_punc ​ Boolean ​ 可选 ​ 将语音转为文本时，是否给文本加上标点符号。默认为 true 。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | String​ | 必选​ | 固定为transcriptions.update。​ |\n| data​ | Object​ | 可选​ | 事件数据，包含语音识别配置的详细信息。​ |\n| data.input_audio​ | Object​ | 可选​ | 输入音频格式。​ |\n| data.input_audio.format​ | String​ | 可选​ | 输入音频的格式，支持pcm、wav、ogg。默认为wav。​ |\n| data.input_audio.codec​ | String​ | 可选​ | 输入音频的编码，支持pcm、opus。默认为pcm。​ |\n| data.input_audio.sample_rate​ | Integer​ | 可选​ | 输入音频的采样率，默认 24000。​ |\n| data.input_audio.channel​ | Integer​ | 可选​ | 输入音频的声道数，默认是 1（单声道）。​ |\n| data.input_audio.bit_depth​ | Integer​ | 可选​ | 输入音频的位深，默认是 16。​ |\n| data.asr_config​ | Object​ | 可选​ | 语音识别配置，包括热词和上下文信息，以便优化语音识别的准确性和相关性。​ |\n| data.asr_config.hot_words​ | Array<String>​ | 可选​ | 输入热词列表，以便提升这些词汇的识别准确率。​所有热词加起来最多100个 Tokens，超出部分将自动截断。​ |\n| data.asr_config.context​ | String​ | 可选​ | 输入上下文信息。​最多输入 800 个 Tokens，超出部分将自动截断。​ |\n| data.asr_config.user_language​ | String​ | 可选​ | 用户说话的语种，默认为common。选项包括：​common：大模型语音识别，可自动识别中英粤。​zh：小模型语音识别，中文。​cant：小模型语音识别，粤语。​sc：小模型语音识别，川渝。​en：小模型语音识别，英语。​ja：小模型语音识别，日语。​ko：小模型语音识别，韩语。​fr：小模型语音识别，法语。​id：小模型语音识别，印尼语。​es：小模型语音识别，西班牙语。​pt：小模型语音识别，葡萄牙语。​ms：小模型语音识别，马来语。​ru：小模型语音识别，俄语。​ |\n| data.asr_config.enable_ddc​ | Boolean​ | 可选​ | 将语音转为文本时，是否启用语义顺滑。默认为true。​true：系统在进行语音处理时，会去掉识别结果中诸如 “啊”“嗯” 等语气词，使得输出的文本语义更加流畅自然，符合正常的语言表达习惯，尤其适用于对文本质量要求较高的场景，如正式的会议记录、新闻稿件生成等。​false：系统不会对识别结果中的语气词进行处理，识别结果会保留原始的语气词。​ |\n| data.asr_config.enable_itn​ | Boolean​ | 可选​ | 将语音转为文本时，是否开启文本规范化（ITN）处理，将识别结果转换为更符合书面表达习惯的格式以提升可读性。默认为true。​开启后，会将口语化数字转换为标准数字格式，示例：​将两点十五分转换为14:15。​将一百美元转换为$100。​ |\n| data.asr_config.enable_punc​ | Boolean​ | 可选​ | 将语音转为文本时，是否给文本加上标点符号。默认为true。​ |\n\n- common：大模型语音识别，可自动识别中英粤。 ​\n\n- zh：小模型语音识别，中文。 ​\n\n- cant：小模型语音识别，粤语。 ​\n\n- sc：小模型语音识别，川渝。 ​\n\n- en：小模型语音识别，英语。 ​\n\n- ja：小模型语音识别，日语。 ​\n\n- ko：小模型语音识别，韩语。 ​\n\n- fr：小模型语音识别，法语。 ​\n\n- id：小模型语音识别，印尼语。 ​\n\n- es：小模型语音识别，西班牙语。 ​\n\n- pt：小模型语音识别，葡萄牙语。 ​\n\n- ms：小模型语音识别，马来语。 ​\n\n- ru：小模型语音识别，俄语。 ​\n\n- true ：系统在进行语音处理时，会去掉识别结果中诸如 “啊”“嗯” 等语气词，使得输出的文本语义更加流畅自然，符合正常的语言表达习惯，尤其适用于对文本质量要求较高的场景，如正式的会议记录、新闻稿件生成等。 ​\n\n- false ：系统不会对识别结果中的语气词进行处理，识别结果会保留原始的语气词。 ​\n\n- 将 两点十五分 转换为 14:15 。 ​\n\n- 将 一百美元 转换为 $100 。 ​\n\n- 事件示例 ： ​\n\n- 事件类型 ： input_audio_buffer.append ​\n\n- 事件说明 ：流式向服务端提交音频的片段。 ​\n\n- 事件结构 ： ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | String​ | 必选​ | 固定为input_audio_buffer.append。​ |\n| data​ | Object​ | 必选​ | 事件数据，包含音频片段信息。​ |\n| data.delta​ | String​ | 必选​ | base64 编码后的音频片段。​ |\n\n- 事件示例 ： ​\n\n- 事件类型 ： input_audio_buffer.complete ​\n\n- 事件说明 ：客户端发送 input_audio_buffer.complete 事件来告诉服务端提交音频缓冲区的数据。服务端提交成功后会返回 input_audio_buffer.completed 事件。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ String ​ 必选 ​ 客户端自行生成的事件 ID，方便定位问题。 ​ event_type ​ String ​ 必选 ​ 固定为 input_audio_buffer.complete 。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | String​ | 必选​ | 固定为input_audio_buffer.complete。​ |\n\n- 事件示例 ： ​\n\n- ​ JSON 复制 { ​ \"id\" : \"event_id\" , ​ \"event_type\" : \"input_audio_buffer.complete\" ​ } ​ ​\n\n- 事件类型 ： input_audio_buffer.clear ​\n\n- 事件说明 ：客户端发送 input_audio_buffer.clear 事件来告诉服务端清除缓冲区的音频数据。服务端清除完后将返回 input_audio_buffer.cleared 事件。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ String ​ 必选 ​ 客户端自行生成的事件 ID，方便定位问题。 ​ event_type ​ String ​ 必选 ​ 固定为 input_audio_buffer.clear 。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | String​ | 必选​ | 固定为input_audio_buffer.clear。​ |\n\n- 事件示例 ： ​\n\n- ​ JSON 复制 { ​ \"id\" : \"event_1\" , ​ \"event_type\" : \"input_audio_buffer.clear\" ​ } ​ ​\n\n- 事件类型 ： transcriptions.created ​\n\n- 事件说明 ：语音识别连接成功后，返回此事件。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ String ​ 必选 ​ 服务端生成的唯一 ID。 ​ event_type ​ String ​ 必选 ​ 固定为 transcriptions.created 。 ​ detail ​ Object ​ 必选 ​ 事件详情。 ​ detail.logid ​ String ​ 必选 ​ 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 服务端生成的唯一 ID。​ |\n| event_type​ | String​ | 必选​ | 固定为transcriptions.created。​ |\n| detail​ | Object​ | 必选​ | 事件详情。​ |\n| detail.logid​ | String​ | 必选​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |\n\n- 事件示例 ： ​\n\n- ​ JSON 复制 { ​ \"id\" : \"7446668538246561xxxx\" , ​ \"event_type\" : \"transcriptions.created\" , ​ \"detail\" : { ​ \"logid\" : \"20241210152726467C48D89D6DB2F3***\" ​ } ​ } ​ ​\n\n- 事件类型 ： transcriptions.updated ​\n\n- 事件说明 ：配置更新成功后，会返回最新的配置。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ String ​ 必选 ​ 客户端自行生成的事件 ID，方便定位问题。 ​ event_type ​ String ​ 必选 ​ 固定为 transcriptions.updated 。 ​ data ​ Object ​ 必选 ​ 事件数据，包含语音识别配置的详细信息。 ​ data.input_audio ​ Object ​ 必选 ​ 输入音频格式。 ​ data.input_audio.format ​ String ​ 必选 ​ 输入音频的格式，支持 pcm 、 wav 、 ogg 。默认为 wav 。 ​ data.input_audio.codec ​ String ​ 必选 ​ 输入音频的编码，支持 pcm 、 opus 。默认为 pcm 。 ​ data.input_audio.sample_rate ​ Integer ​ 必选 ​ 输入音频的采样率，默认 24000。 ​ data.input_audio.channel ​ Integer ​ 必选 ​ 输入音频的声道数，默认是 1（单声道）。 ​ data.input_audio.bit_depth ​ Integer ​ 必选 ​ 输入音频的位深，默认是 16。 ​ detail ​ Object ​ 必选 ​ 事件详情。 ​ detail.logid ​ String ​ 必选 ​ 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | String​ | 必选​ | 固定为transcriptions.updated。​ |\n| data​ | Object​ | 必选​ | 事件数据，包含语音识别配置的详细信息。​ |\n| data.input_audio​ | Object​ | 必选​ | 输入音频格式。​ |\n| data.input_audio.format​ | String​ | 必选​ | 输入音频的格式，支持pcm、wav、ogg。默认为wav。​ |\n| data.input_audio.codec​ | String​ | 必选​ | 输入音频的编码，支持pcm、opus。默认为pcm。​ |\n| data.input_audio.sample_rate​ | Integer​ | 必选​ | 输入音频的采样率，默认 24000。​ |\n| data.input_audio.channel​ | Integer​ | 必选​ | 输入音频的声道数，默认是 1（单声道）。​ |\n| data.input_audio.bit_depth​ | Integer​ | 必选​ | 输入音频的位深，默认是 16。​ |\n| detail​ | Object​ | 必选​ | 事件详情。​ |\n| detail.logid​ | String​ | 必选​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |\n\n- 事件示例 ： ​\n\n- ​ JSON 复制 { ​ \"id\" : \"event_id\" , ​ \"event_type\" : \"transcriptions.updated\" , ​ \"data\" : { ​ \"input_audio\" : { ​ \"format\" : \"pcm\" , ​ \"codec\" : \"pcm\" , ​ \"sample_rate\" : 24000 , ​ \"channel\" : 1 , ​ \"bit_depth\" : 16 ​ } ​ }, ​ \"detail\" : { ​ \"logid\" : \"20241210152726467C48D89D6DB2F3***\" ​ } ​ } ​ ​\n\n- 事件类型 ： input_audio_buffer.completed ​\n\n- 事件说明 ：流式提交的音频完成后，返回此事件。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ String ​ 必选 ​ 客户端自行生成的事件 ID，方便定位问题。 ​ event_type ​ String ​ 必选 ​ 固定为 input_audio_buffer.completed 。 ​ detail ​ Object ​ 必选 ​ 事件详情。 ​ detail.logid ​ String ​ 必选 ​ 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | String​ | 必选​ | 固定为input_audio_buffer.completed。​ |\n| detail​ | Object​ | 必选​ | 事件详情。​ |\n| detail.logid​ | String​ | 必选​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |\n\n- 事件示例 ： ​\n\n- ​ JSON 复制 { ​ \"id\" : \"event_id\" , ​ \"event_type\" : \"input_audio_buffer.completed\" , ​ \"detail\" : { ​ \"logid\" : \"20241210152726467C48D89D6DB2F3***\" ​ } ​ } ​ ​\n\n- 事件类型 ： input_audio_buffer.cleared ​\n\n- 事件说明 ：清除缓冲区音频成功后，返回此事件。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ String ​ 必选 ​ 客户端自行生成的事件 ID，方便定位问题。 ​ event_type ​ String ​ 必选 ​ 固定为 input_audio_buffer.cleared 。 ​ detail ​ Object ​ 必选 ​ 事件详情。 ​ detail.logid ​ String ​ 必选 ​ 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | String​ | 必选​ | 固定为input_audio_buffer.cleared。​ |\n| detail​ | Object​ | 必选​ | 事件详情。​ |\n| detail.logid​ | String​ | 必选​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |\n\n- 事件示例 ： ​\n\n- ​ Python 复制 { ​ \"id\" : \"event_id\" , ​ \"event_type\" : \"input_audio_buffer.cleared\" , ​ \"detail\" : { ​ \"logid\" : \"20241210152726467C48D89D6DB2F3***\" ​ } ​ } ​ ​\n\n- 事件类型 ： transcriptions.message.update ​\n\n- 事件说明 ：语音识别出文字后，返回此事件，每次都返回全量的识别出来的文字。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ String ​ 必选 ​ 客户端自行生成的事件 ID，方便定位问题。 ​ event_type ​ String ​ 必选 ​ 固定为 transcriptions.message.update 。 ​ data ​ Object ​ 必选 ​ 事件数据，包含识别出的文字。 ​ data.content ​ String ​ 必选 ​ 识别出的文字。 ​ detail ​ Object ​ 必选 ​ 事件详情。 ​ detail.logid ​ String ​ 必选 ​ 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | String​ | 必选​ | 固定为transcriptions.message.update。​ |\n| data​ | Object​ | 必选​ | 事件数据，包含识别出的文字。​ |\n| data.content​ | String​ | 必选​ | 识别出的文字。​ |\n| detail​ | Object​ | 必选​ | 事件详情。​ |\n| detail.logid​ | String​ | 必选​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |\n\n- 事件示例 ： ​\n\n- ​ JSON 复制 { ​ \"id\" : \"event_id\" , ​ \"event_type\" : \"transcriptions.message.update\" , ​ \"data\" : { ​ \"content\" : \"text\" ​ }, ​ \"detail\" : { ​ \"logid\" : \"20241210152726467C48D89D6DB2F3***\" ​ } ​ } ​ ​\n\n- 事件类型 ： transcriptions.message.completed ​\n\n- 事件说明 ：语音识别完成后，返回此事件。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ String ​ 必选 ​ 客户端自行生成的事件 ID，方便定位问题。 ​ event_type ​ String ​ 必选 ​ 固定为 transcriptions.message.completed 。 ​ detail ​ Object ​ 必选 ​ 事件详情。 ​ detail.logid ​ String ​ 必选 ​ 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | String​ | 必选​ | 固定为transcriptions.message.completed。​ |\n| detail​ | Object​ | 必选​ | 事件详情。​ |\n| detail.logid​ | String​ | 必选​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |\n\n- 事件示例 ： ​\n\n- ​ HTTP 复制 { ​ \"id\": \"event_id\", ​ \"event_type\": \"transcriptions.message.completed\", ​ \"detail\": { ​ \"logid\": \"20241210152726467C48D89D6DB2F3***\" ​ } ​ } ​ ​\n\n- 事件类型 ： error ​\n\n- 事件说明 ：识别过程中的错误事件。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ String ​ 必选 ​ 服务端生成的唯一 ID。 ​ event_type ​ String ​ 必选 ​ 固定为 error 。 ​ data ​ Object ​ 必选 ​ 事件数据，包含错误信息。 ​ data.code ​ Integer ​ 必选 ​ 错误码。 ​ data.msg ​ String ​ 必选 ​ 错误信息。 ​ detail ​ Object ​ 必选 ​ 事件详情。 ​ detail.logid ​ String ​ 必选 ​ 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 服务端生成的唯一 ID。​ |\n| event_type​ | String​ | 必选​ | 固定为error。​ |\n| data​ | Object​ | 必选​ | 事件数据，包含错误信息。​ |\n| data.code​ | Integer​ | 必选​ | 错误码。​ |\n| data.msg​ | String​ | 必选​ | 错误信息。​ |\n| detail​ | Object​ | 必选​ | 事件详情。​ |\n| detail.logid​ | String​ | 必选​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |\n\n- 事件示例 ： ​\n\n- ​ JSON 复制 { ​ \"id\" : \"event_1\" , ​ \"event_type\" : \"error\" , ​ \"data\" : { ​ \"code\" : 1 , ​ \"msg\" : \"发生异常\" ​ }, ​ \"detail\" : { ​ \"logid\" : \"20241210152726467C48D89D6DB2F3***\" ​ } ​ } ​ ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/tts_api",
      "title": "双向流式语音合成",
      "content": {
        "sections": [],
        "full_text": "双向流式语音合成\n\n扣子编程提供流式语音合成 WebSocket OpenAPI，可以将文字信息转为指定音色的语音片段。\n\n​\n\n双向流式语音合成场景下的各类事件详细信息可参考\n\n​\n\n双向流式语音合成事件\n\n。\n\n​\n\n接口信息\n\n​\n\n​\n\nURL\n\n​\n\nwss://\n\nws.coze.cn/v1/audio/\n\nspeech\n\n​\n\nHeaders\n\n​\n\nAuthorization Bearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息请参考\n\n准备工作\n\n。\n\n​\n\n权限\n\n​\n\ncreateSpeech\n\n​\n\n接口说明\n\n​\n\n将文字信息转为指定音色的语音片段。\n\n​\n\n​\n\n限制说明\n\n​\n\n单次请求的文字信息长度最大为 1024 个字节。超过上限时会提示\n\n3010\n\n错误。\n\n​\n\n建议一次性不要传输太多文字。\n\n​\n\n建连示例代码\n\n​\n\nws module(Node.js)\n\nwebsocket-client(Python)\n\nWebsocket(browsers)\n\n​\n\n​\n\nJavaScript\n\n复制\n\nimport\n\nWebSocket\n\nfrom\n\n'ws'\n\n;\n\n​\n\n​\n\nconst\n\nurl =\n\n`wss://\n\nws.coze.cn/v1/audio/\n\nspeech\n\n?authorization=Bearer\n\n${ACCESS_TOKEN}\n\n`\n\n;\n\n​\n\nconst\n\nws =\n\nnew\n\nWebSocket\n\n(url);\n\n​\n\n​\n\nws.\n\non\n\n(\n\n'open'\n\n,\n\nfunction\n\nopen\n\n() {\n\n​\n\nconsole\n\n.\n\nlog\n\n(\n\n'Connected to server.'\n\n);\n\n​\n\n});\n\n​\n\n​\n\nws.\n\non\n\n(\n\n'message'\n\n,\n\nfunction\n\nincoming\n\n(\n\nmessage\n\n) {\n\n​\n\nconsole\n\n.\n\nlog\n\n(\n\nJSON\n\n.\n\nparse\n\n(message.\n\ntoString\n\n()));\n\n​\n\n});\n\n​\n\n​\n\n​\n\n​\n\nAPI 时序图\n\n​\n\n交互流程如下：\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n上一篇\n\n双向流式语音识别事件\n\n下一篇\n\n双向流式语音合成事件",
        "links": []
      },
      "markdown": "| URL​ | wss://ws.coze.cn/v1/audio/speech​ |\n| Headers​ | Authorization Bearer$Access_Token​用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息请参考准备工作。​ |\n| 权限​ | createSpeech​ |\n| 接口说明​ | 将文字信息转为指定音色的语音片段。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/tts_event",
      "title": "双向流式语音合成事件",
      "content": {
        "sections": [],
        "full_text": "双向流式语音合成事件\n\n上行事件\n\n​\n\n更新语音合成配置\n\n​\n\n事件类型\n\n：\n\nspeech.update\n\n​\n\n事件说明\n\n：更新流式语音合成配置。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\nspeech.update\n\n。\n\n​\n\ndata\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n事件数据，包含语音合成配置的详细信息。\n\n​\n\ndata.output_audio\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n输出音频格式。\n\n​\n\ndata.output_audio.codec\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n输出音频编码，支持\n\npcm\n\n、\n\nopus\n\n。默认是\n\npcm\n\n。\n\n​\n\ndata.output_audio.pcm_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n当\n\ncodec\n\n设置为\n\nopus\n\n时，不需要设置此字段。\n\n​\n\n说明\n\n当\n\ncodec\n\n设置为\n\npcm\n\n时，返回的 PCM 数据将固定为单声道，采样深度为 16 位。\n\n​\n\n​\n\ndata.output_audio.pcm_config.sample_rate\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n输出\n\npcm\n\n音频的采样率，默认 24000。\n\n​\n\ndata.output_audio.pcm_config.frame_size_ms\n\n​\n\nFloat\n\n​\n\n可选\n\n​\n\n输出每个 pcm 包的时长，单位 ms，默认不限制。\n\n​\n\ndata.output_audio.pcm_config. limit_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n输出音频限流配置，默认不限制。\n\n​\n\ndata.output_audio.pcm_config. limit_config.period\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n周期的时长，单位为秒。例如设置为 10 秒，则以 10 秒作为一个周期。\n\n​\n\ndata.output_audio.pcm_config. limit_config.max_frame_num\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n周期内，最大返回 pcm 包数量。\n\n​\n\ndata.output_audio.opus_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n当\n\ncodec\n\n设置为\n\npcm\n\n时，不需要设置此字段。\n\n​\n\ndata.output_audio.opus_config.bitrate\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n输出\n\nopus\n\n的码率，默认 48000。\n\n​\n\ndata.output_audio.opus_config.use_cbr\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n输出\n\nopus\n\n是否使用 CBR 编码，默认为\n\nfalse\n\n。\n\n​\n\ndata.output_audio.opus_config.frame_size_ms\n\n​\n\nFloat\n\n​\n\n可选\n\n​\n\n输出\n\nopus\n\n的帧长，默认是 10。可选值：\n\n​\n\n2.5、5、10、20、40、60\n\n​\n\ndata.output_audio.opus_config.limit_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n输出音频限流配置，默认不限速。\n\n​\n\ndata.output_audio.opus_config.limit_config.period\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n周期的时长，单位为秒。例如设置为 10 秒，则以 10 秒作为一个周期。\n\n​\n\ndata.output_audio.opus_config.limit_config.max_frame_num\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n周期内最大返回的 Opus 帧数量。\n\n​\n\ndata.output_audio.speech_rate\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n输出音频的语速，取值范围 [-50, 100]，默认为 0。-50 表示 0.5 倍速，100 表示 2 倍速。\n\n​\n\ndata.output_audio.loudness_rate\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n输出音频的音量，取值范围 [-50, 100]，默认为 0。-50 表示 0.5 倍音量，100 表示 2 倍音量。不支持复刻音色。\n\n​\n\ndata.output_audio.voice_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n输出音频的音色 ID。默认音色为\"柔美女友\"。你可以调用\n\n​\n\n查看音色列表\n\nAPI 查看当前可用的所有音色 ID。\n\n​\n\ndata.output_audio.context_texts\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n语音合成的辅助信息，用于控制合成语音的整体情绪（如悲伤、生气）、方言（如四川话、北京话）、语气（如撒娇、暧昧、吵架、夹子音）、语速（快慢）及音调（高低）等。默认为空。\n\n​\n\n示例：用低沉沙哑的语气、带着沧桑与绝望地说。\n\n​\n\n说明\n\n仅当\n\nvoice_id\n\n为豆包语音合成大模型 2.0 音色时才支持该参数，具体音色列表请参见\n\n​\n\n系统音色列表\n\n。\n\n​\n\n更多关于豆包语音合成 2.0 的\n\ncontext_texts\n\n示例和效果可参考\n\n语音指令-示例库\n\n。\n\n​\n\ndata.output_audio.emotion_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n设置多情感音色的情感类型和情感值，仅当\n\nvoice_id\n\n为多情感音色时才需要设置。\n\n​\n\ndata.output_audio.emotion_config.emotion\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n设置多情感音色的情感类型。不同音色支持的情感范围不同，可以通过\n\n系统音色列表\n\n查看各音色支持的情感。默认为空。枚举值如下：\n\n​\n\nhappy-开心\n\n​\n\nsad-悲伤\n\n​\n\nangry-生气\n\n​\n\nsurprised-惊讶\n\n​\n\nfear-恐惧\n\n​\n\nhate-厌恶\n\n​\n\nexcited-激动\n\n​\n\ncoldness-冷漠\n\n​\n\nneutral-中性\n\n​\n\ndata.output_audio.emotion_config.emotion_scale\n\n​\n\nFloat\n\n​\n\n可选\n\n​\n\n情感值用于量化情感的强度。数值越高，情感表达越强烈，例如： “开心” 的情感值 5 比 1 更显兴奋。\n\n​\n\n取值范围：1.0~5.0，默认值：4.0。\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"event_id\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"speech.update\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"output_audio\"\n\n:\n\n{\n\n​\n\n\"codec\"\n\n:\n\n\"pcm\"\n\n,\n\n​\n\n\"pcm_config\"\n\n:\n\n{\n\n​\n\n\"sample_rate\"\n\n:\n\n24000\n\n​\n\n},\n\n​\n\n\"speech_rate\"\n\n:\n\n50\n\n,\n\n​\n\n\"voice_id\"\n\n:\n\n\"音色id\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n流式输入文字\n\n​\n\n事件类型\n\n：\n\ninput_text_buffer.append\n\n​\n\n事件说明\n\n：流式向服务端提交文字的片段。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\ninput_text_buffer.append\n\n。\n\n​\n\ndata\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件数据，包含文字片段。\n\n​\n\ndata.delta\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n需要合成语音的文字片段。\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"event_id\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"input_text_buffer.append\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"delta\"\n\n:\n\n\"text\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n提交文字\n\n​\n\n事件类型\n\n：\n\ninput_text_buffer.complete\n\n​\n\n事件说明\n\n：提交\n\nappend\n\n的文本，发送后将收到\n\ninput_text_buffer.completed\n\n的下行事件。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\ninput_text_buffer.complete\n\n。\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"event_id\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"input_text_buffer.complete\"\n\n​\n\n}\n\n​\n\n​\n\n下行事件\n\n​\n\n连接成功\n\n​\n\n事件类型\n\n：\n\nspeech.created\n\n​\n\n事件说明\n\n：语音合成连接成功后，返回此事件。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n服务端生成的唯一 ID。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\nspeech.created\n\n。\n\n​\n\ndetail\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件详情。\n\n​\n\ndetail.logid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"7446668538246561xxxx\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"speech.created\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2F3***\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n配置更新完成\n\n​\n\n事件类型\n\n：\n\nspeech.updated\n\n​\n\n事件说明\n\n：配置更新成功后，会返回最新的配置。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\nspeech.updated\n\n。\n\n​\n\ndata\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件数据，包含语音合成配置的详细信息。\n\n​\n\ndata.output_audio\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n输出音频格式。\n\n​\n\ndata.output_audio.codec\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n输出音频编码，支持\n\npcm\n\n、\n\nopus\n\n。默认是\n\npcm\n\n。\n\n​\n\ndata.output_audio.pcm_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n当\n\ncodec\n\n设置为\n\nopus\n\n时，不需要设置此字段。\n\n​\n\ndata.output_audio.pcm_config.sample_rate\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n输出\n\npcm\n\n音频的采样率，默认 24000。\n\n​\n\ndata.output_audio.opus_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n当\n\ncodec\n\n设置为\n\npcm\n\n时，不需要设置此字段。\n\n​\n\ndata.output_audio.opus_config.bitrate\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n输出\n\nopus\n\n的码率，默认 48000。\n\n​\n\ndata.output_audio.opus_config.use_cbr\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n输出\n\nopus\n\n是否使用 CBR 编码，默认为\n\nfalse\n\n。\n\n​\n\ndata.output_audio.opus_config.frame_size_ms\n\n​\n\nFloat\n\n​\n\n可选\n\n​\n\n输出\n\nopus\n\n的帧长，默认是 10。\n\n​\n\ndata.output_audio.speech_rate\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\n输出音频的语速，取值范围 [-50, 100]，默认为 0。-50 表示 0.5 倍速，100 表示 2 倍速。\n\n​\n\ndata.output_audio.voice_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n输出音频的音色 ID。\n\n​\n\ndetail\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件详情。\n\n​\n\ndetail.logid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"event_id\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"speech.updated\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"output_audio\"\n\n:\n\n{\n\n​\n\n\"codec\"\n\n:\n\n\"pcm\"\n\n,\n\n​\n\n\"pcm_config\"\n\n:\n\n{\n\n​\n\n\"sample_rate\"\n\n:\n\n24000\n\n​\n\n},\n\n​\n\n\"speech_rate\"\n\n:\n\n50\n\n,\n\n​\n\n\"voice_id\"\n\n:\n\n\"音色id\"\n\n​\n\n}\n\n​\n\n},\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2F3***\"\n\n}\n\n​\n\n}\n\n​\n\n​\n\ninput_text_buffer\n\n提交完成\n\n​\n\n事件类型\n\n：\n\ninput_text_buffer.completed\n\n​\n\n事件说明\n\n：流式提交的文字完成后，返回此事件。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\ninput_text_buffer.completed\n\n。\n\n​\n\ndetail\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件详情。\n\n​\n\ndetail.logid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"event_id\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"input_text_buffer.completed\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2F3***\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n合成增量语音\n\n​\n\n事件类型\n\n：\n\nspeech.audio.update\n\n​\n\n事件说明\n\n：语音合成产生增量语音时，返回此事件。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\nspeech.audio.update\n\n。\n\n​\n\ndata\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件数据，包含音频片段信息。\n\n​\n\ndata.delta\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nbase64 编码后的音频片段。\n\n​\n\ndetail\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件详情。\n\n​\n\ndetail.logid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"event_id\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"speech.audio.update\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"delta\"\n\n:\n\n\"base64EncodedAudioDelta\"\n\n​\n\n},\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2F3***\"\n\n}\n\n​\n\n}\n\n​\n\n​\n\n合成完成\n\n​\n\n事件类型\n\n：\n\nspeech.audio.completed\n\n​\n\n事件说明\n\n：语音合成完成后，返回此事件。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\nspeech.audio.completed\n\n。\n\n​\n\ndetail\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件详情。\n\n​\n\ndetail.logid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"event_id\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"speech.audio.completed\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2F3***\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n发生错误\n\n​\n\n事件类型\n\n：\n\nerror\n\n​\n\n事件说明\n\n：对话过程中的错误事件。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n服务端生成的唯一 ID。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\nerror\n\n。\n\n​\n\ndata\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件数据，包含错误信息。\n\n​\n\ndata.code\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\n错误码。\n\n​\n\ndata.msg\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n错误信息。\n\n​\n\ndetail\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件详情。\n\n​\n\ndetail.logid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"event_1\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"error\"\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"code\"\n\n:\n\n1\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"发生异常\"\n\n​\n\n},\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2F3***\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n上一篇\n\n双向流式语音合成\n\n下一篇\n\n双向流式语音对话",
        "links": [
          {
            "text": "系统音色列表",
            "href": "https://www.coze.cn/open/docs/dev_how_to_guides/sys_voice"
          }
        ]
      },
      "markdown": "- 事件类型 ： speech.update ​\n\n- 事件说明 ：更新流式语音合成配置。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ String ​ 必选 ​ 客户端自行生成的事件 ID，方便定位问题。 ​ event_type ​ String ​ 必选 ​ 固定为 speech.update 。 ​ data ​ Object ​ 可选 ​ 事件数据，包含语音合成配置的详细信息。 ​ data.output_audio ​ Object ​ 可选 ​ 输出音频格式。 ​ data.output_audio.codec ​ String ​ 可选 ​ 输出音频编码，支持 pcm 、 opus 。默认是 pcm 。 ​ data.output_audio.pcm_config ​ Object ​ 可选 ​ 当 codec 设置为 opus 时，不需要设置此字段。 ​ 说明 当 codec 设置为 pcm 时，返回的 PCM 数据将固定为单声道，采样深度为 16 位。 ​ ​ data.output_audio.pcm_config.sample_rate ​ Integer ​ 可选 ​ 输出 pcm 音频的采样率，默认 24000。 ​ data.output_audio.pcm_config.frame_size_ms ​ Float ​ 可选 ​ 输出每个 pcm 包的时长，单位 ms，默认不限制。 ​ data.output_audio.pcm_config. limit_config ​ Object ​ 可选 ​ 输出音频限流配置，默认不限制。 ​ data.output_audio.pcm_config. limit_config.period ​ Integer ​ 可选 ​ 周期的时长，单位为秒。例如设置为 10 秒，则以 10 秒作为一个周期。 ​ data.output_audio.pcm_config. limit_config.max_frame_num ​ Integer ​ 可选 ​ 周期内，最大返回 pcm 包数量。 ​ data.output_audio.opus_config ​ Object ​ 可选 ​ 当 codec 设置为 pcm 时，不需要设置此字段。 ​ data.output_audio.opus_config.bitrate ​ Integer ​ 可选 ​ 输出 opus 的码率，默认 48000。 ​ data.output_audio.opus_config.use_cbr ​ Boolean ​ 可选 ​ 输出 opus 是否使用 CBR 编码，默认为 false 。 ​ data.output_audio.opus_config.frame_size_ms ​ Float ​ 可选 ​ 输出 opus 的帧长，默认是 10。可选值： ​ 2.5、5、10、20、40、60 ​ data.output_audio.opus_config.limit_config ​ Object ​ 可选 ​ 输出音频限流配置，默认不限速。 ​ data.output_audio.opus_config.limit_config.period ​ Integer ​ 可选 ​ 周期的时长，单位为秒。例如设置为 10 秒，则以 10 秒作为一个周期。 ​ data.output_audio.opus_config.limit_config.max_frame_num ​ Integer ​ 可选 ​ 周期内最大返回的 Opus 帧数量。 ​ data.output_audio.speech_rate ​ Integer ​ 可选 ​ 输出音频的语速，取值范围 [-50, 100]，默认为 0。-50 表示 0.5 倍速，100 表示 2 倍速。 ​ data.output_audio.loudness_rate ​ Integer ​ 可选 ​ 输出音频的音量，取值范围 [-50, 100]，默认为 0。-50 表示 0.5 倍音量，100 表示 2 倍音量。不支持复刻音色。 ​ data.output_audio.voice_id ​ String ​ 可选 ​ 输出音频的音色 ID。默认音色为\"柔美女友\"。你可以调用 ​ 查看音色列表 API 查看当前可用的所有音色 ID。 ​ data.output_audio.context_texts ​ String ​ 可选 ​ 语音合成的辅助信息，用于控制合成语音的整体情绪（如悲伤、生气）、方言（如四川话、北京话）、语气（如撒娇、暧昧、吵架、夹子音）、语速（快慢）及音调（高低）等。默认为空。 ​ 示例：用低沉沙哑的语气、带着沧桑与绝望地说。 ​ 说明 仅当 voice_id 为豆包语音合成大模型 2.0 音色时才支持该参数，具体音色列表请参见 ​ 系统音色列表 。 ​ 更多关于豆包语音合成 2.0 的 context_texts 示例和效果可参考 语音指令-示例库 。 ​ data.output_audio.emotion_config ​ Object ​ 可选 ​ 设置多情感音色的情感类型和情感值，仅当 voice_id 为多情感音色时才需要设置。 ​ data.output_audio.emotion_config.emotion ​ String ​ 可选 ​ 设置多情感音色的情感类型。不同音色支持的情感范围不同，可以通过 系统音色列表 查看各音色支持的情感。默认为空。枚举值如下： ​ happy-开心 ​ sad-悲伤 ​ angry-生气 ​ surprised-惊讶 ​ fear-恐惧 ​ hate-厌恶 ​ excited-激动 ​ coldness-冷漠 ​ neutral-中性 ​ data.output_audio.emotion_config.emotion_scale ​ Float ​ 可选 ​ 情感值用于量化情感的强度。数值越高，情感表达越强烈，例如： “开心” 的情感值 5 比 1 更显兴奋。 ​ 取值范围：1.0~5.0，默认值：4.0。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | String​ | 必选​ | 固定为speech.update。​ |\n| data​ | Object​ | 可选​ | 事件数据，包含语音合成配置的详细信息。​ |\n| data.output_audio​ | Object​ | 可选​ | 输出音频格式。​ |\n| data.output_audio.codec​ | String​ | 可选​ | 输出音频编码，支持pcm、opus。默认是pcm。​ |\n| data.output_audio.pcm_config​ | Object​ | 可选​ | 当codec设置为opus时，不需要设置此字段。​说明当codec设置为pcm时，返回的 PCM 数据将固定为单声道，采样深度为 16 位。​​ |\n| data.output_audio.pcm_config.sample_rate​ | Integer​ | 可选​ | 输出pcm音频的采样率，默认 24000。​ |\n| data.output_audio.pcm_config.frame_size_ms​ | Float​ | 可选​ | 输出每个 pcm 包的时长，单位 ms，默认不限制。​ |\n| data.output_audio.pcm_config. limit_config​ | Object​ | 可选​ | 输出音频限流配置，默认不限制。​ |\n| data.output_audio.pcm_config. limit_config.period​ | Integer​ | 可选​ | 周期的时长，单位为秒。例如设置为 10 秒，则以 10 秒作为一个周期。​ |\n| data.output_audio.pcm_config. limit_config.max_frame_num​ | Integer​ | 可选​ | 周期内，最大返回 pcm 包数量。​ |\n| data.output_audio.opus_config​ | Object​ | 可选​ | 当codec设置为pcm时，不需要设置此字段。​ |\n| data.output_audio.opus_config.bitrate​ | Integer​ | 可选​ | 输出opus的码率，默认 48000。​ |\n| data.output_audio.opus_config.use_cbr​ | Boolean​ | 可选​ | 输出opus是否使用 CBR 编码，默认为false。​ |\n| data.output_audio.opus_config.frame_size_ms​ | Float​ | 可选​ | 输出opus的帧长，默认是 10。可选值：​2.5、5、10、20、40、60​ |\n| data.output_audio.opus_config.limit_config​ | Object​ | 可选​ | 输出音频限流配置，默认不限速。​ |\n| data.output_audio.opus_config.limit_config.period​ | Integer​ | 可选​ | 周期的时长，单位为秒。例如设置为 10 秒，则以 10 秒作为一个周期。​ |\n| data.output_audio.opus_config.limit_config.max_frame_num​ | Integer​ | 可选​ | 周期内最大返回的 Opus 帧数量。​ |\n| data.output_audio.speech_rate​ | Integer​ | 可选​ | 输出音频的语速，取值范围 [-50, 100]，默认为 0。-50 表示 0.5 倍速，100 表示 2 倍速。​ |\n| data.output_audio.loudness_rate​ | Integer​ | 可选​ | 输出音频的音量，取值范围 [-50, 100]，默认为 0。-50 表示 0.5 倍音量，100 表示 2 倍音量。不支持复刻音色。​ |\n| data.output_audio.voice_id​ | String​ | 可选​ | 输出音频的音色 ID。默认音色为\"柔美女友\"。你可以调用​查看音色列表API 查看当前可用的所有音色 ID。​ |\n| data.output_audio.context_texts​ | String​ | 可选​ | 语音合成的辅助信息，用于控制合成语音的整体情绪（如悲伤、生气）、方言（如四川话、北京话）、语气（如撒娇、暧昧、吵架、夹子音）、语速（快慢）及音调（高低）等。默认为空。​示例：用低沉沙哑的语气、带着沧桑与绝望地说。​说明仅当voice_id为豆包语音合成大模型 2.0 音色时才支持该参数，具体音色列表请参见​系统音色列表。​更多关于豆包语音合成 2.0 的context_texts示例和效果可参考语音指令-示例库。​ |\n| data.output_audio.emotion_config​ | Object​ | 可选​ | 设置多情感音色的情感类型和情感值，仅当voice_id为多情感音色时才需要设置。​ |\n| data.output_audio.emotion_config.emotion​ | String​ | 可选​ | 设置多情感音色的情感类型。不同音色支持的情感范围不同，可以通过系统音色列表查看各音色支持的情感。默认为空。枚举值如下：​happy-开心​sad-悲伤​angry-生气​surprised-惊讶​fear-恐惧​hate-厌恶​excited-激动​coldness-冷漠​neutral-中性​ |\n| data.output_audio.emotion_config.emotion_scale​ | Float​ | 可选​ | 情感值用于量化情感的强度。数值越高，情感表达越强烈，例如： “开心” 的情感值 5 比 1 更显兴奋。​取值范围：1.0~5.0，默认值：4.0。​ |\n\n- 仅当 voice_id 为豆包语音合成大模型 2.0 音色时才支持该参数，具体音色列表请参见 ​ 系统音色列表 。 ​\n\n- 更多关于豆包语音合成 2.0 的 context_texts 示例和效果可参考 语音指令-示例库 。\n\n- happy-开心 ​\n\n- sad-悲伤 ​\n\n- angry-生气 ​\n\n- surprised-惊讶 ​\n\n- fear-恐惧 ​\n\n- hate-厌恶 ​\n\n- excited-激动 ​\n\n- coldness-冷漠 ​\n\n- neutral-中性 ​\n\n- 事件示例 ： ​\n\n- ​ JSON 复制 { ​ \"id\" : \"event_id\" , ​ \"event_type\" : \"speech.update\" , ​ \"data\" : { ​ \"output_audio\" : { ​ \"codec\" : \"pcm\" , ​ \"pcm_config\" : { ​ \"sample_rate\" : 24000 ​ }, ​ \"speech_rate\" : 50 , ​ \"voice_id\" : \"音色id\" ​ } ​ } ​ } ​ ​\n\n- 事件类型 ： input_text_buffer.append ​\n\n- 事件说明 ：流式向服务端提交文字的片段。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ String ​ 必选 ​ 客户端自行生成的事件 ID，方便定位问题。 ​ event_type ​ String ​ 必选 ​ 固定为 input_text_buffer.append 。 ​ data ​ Object ​ 必选 ​ 事件数据，包含文字片段。 ​ data.delta ​ String ​ 必选 ​ 需要合成语音的文字片段。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | String​ | 必选​ | 固定为input_text_buffer.append。​ |\n| data​ | Object​ | 必选​ | 事件数据，包含文字片段。​ |\n| data.delta​ | String​ | 必选​ | 需要合成语音的文字片段。​ |\n\n- 事件示例 ： ​\n\n- ​ JSON 复制 { ​ \"id\" : \"event_id\" , ​ \"event_type\" : \"input_text_buffer.append\" , ​ \"data\" : { ​ \"delta\" : \"text\" ​ } ​ } ​ ​\n\n- 事件类型 ： input_text_buffer.complete ​\n\n- 事件说明 ：提交 append 的文本，发送后将收到 input_text_buffer.completed 的下行事件。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ String ​ 必选 ​ 客户端自行生成的事件 ID，方便定位问题。 ​ event_type ​ String ​ 必选 ​ 固定为 input_text_buffer.complete 。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | String​ | 必选​ | 固定为input_text_buffer.complete。​ |\n\n- 事件示例 ： ​\n\n- ​ JSON 复制 { ​ \"id\" : \"event_id\" , ​ \"event_type\" : \"input_text_buffer.complete\" ​ } ​ ​\n\n- 事件类型 ： speech.created ​\n\n- 事件说明 ：语音合成连接成功后，返回此事件。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ String ​ 必选 ​ 服务端生成的唯一 ID。 ​ event_type ​ String ​ 必选 ​ 固定为 speech.created 。 ​ detail ​ Object ​ 必选 ​ 事件详情。 ​ detail.logid ​ String ​ 必选 ​ 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 服务端生成的唯一 ID。​ |\n| event_type​ | String​ | 必选​ | 固定为speech.created。​ |\n| detail​ | Object​ | 必选​ | 事件详情。​ |\n| detail.logid​ | String​ | 必选​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |\n\n- 事件示例 ： ​\n\n- ​ JSON 复制 { ​ \"id\" : \"7446668538246561xxxx\" , ​ \"event_type\" : \"speech.created\" , ​ \"detail\" : { ​ \"logid\" : \"20241210152726467C48D89D6DB2F3***\" ​ } ​ } ​ ​\n\n- 事件类型 ： speech.updated ​\n\n- 事件说明 ：配置更新成功后，会返回最新的配置。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ String ​ 必选 ​ 客户端自行生成的事件 ID，方便定位问题。 ​ event_type ​ String ​ 必选 ​ 固定为 speech.updated 。 ​ data ​ Object ​ 必选 ​ 事件数据，包含语音合成配置的详细信息。 ​ data.output_audio ​ Object ​ 必选 ​ 输出音频格式。 ​ data.output_audio.codec ​ String ​ 必选 ​ 输出音频编码，支持 pcm 、 opus 。默认是 pcm 。 ​ data.output_audio.pcm_config ​ Object ​ 可选 ​ 当 codec 设置为 opus 时，不需要设置此字段。 ​ data.output_audio.pcm_config.sample_rate ​ Integer ​ 可选 ​ 输出 pcm 音频的采样率，默认 24000。 ​ data.output_audio.opus_config ​ Object ​ 可选 ​ 当 codec 设置为 pcm 时，不需要设置此字段。 ​ data.output_audio.opus_config.bitrate ​ Integer ​ 可选 ​ 输出 opus 的码率，默认 48000。 ​ data.output_audio.opus_config.use_cbr ​ Boolean ​ 可选 ​ 输出 opus 是否使用 CBR 编码，默认为 false 。 ​ data.output_audio.opus_config.frame_size_ms ​ Float ​ 可选 ​ 输出 opus 的帧长，默认是 10。 ​ data.output_audio.speech_rate ​ Integer ​ 必选 ​ 输出音频的语速，取值范围 [-50, 100]，默认为 0。-50 表示 0.5 倍速，100 表示 2 倍速。 ​ data.output_audio.voice_id ​ String ​ 必选 ​ 输出音频的音色 ID。 ​ detail ​ Object ​ 必选 ​ 事件详情。 ​ detail.logid ​ String ​ 必选 ​ 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | String​ | 必选​ | 固定为speech.updated。​ |\n| data​ | Object​ | 必选​ | 事件数据，包含语音合成配置的详细信息。​ |\n| data.output_audio​ | Object​ | 必选​ | 输出音频格式。​ |\n| data.output_audio.codec​ | String​ | 必选​ | 输出音频编码，支持pcm、opus。默认是pcm。​ |\n| data.output_audio.pcm_config​ | Object​ | 可选​ | 当codec设置为opus时，不需要设置此字段。​ |\n| data.output_audio.pcm_config.sample_rate​ | Integer​ | 可选​ | 输出pcm音频的采样率，默认 24000。​ |\n| data.output_audio.opus_config​ | Object​ | 可选​ | 当codec设置为pcm时，不需要设置此字段。​ |\n| data.output_audio.opus_config.bitrate​ | Integer​ | 可选​ | 输出opus的码率，默认 48000。​ |\n| data.output_audio.opus_config.use_cbr​ | Boolean​ | 可选​ | 输出opus是否使用 CBR 编码，默认为false。​ |\n| data.output_audio.opus_config.frame_size_ms​ | Float​ | 可选​ | 输出opus的帧长，默认是 10。​ |\n| data.output_audio.speech_rate​ | Integer​ | 必选​ | 输出音频的语速，取值范围 [-50, 100]，默认为 0。-50 表示 0.5 倍速，100 表示 2 倍速。​ |\n| data.output_audio.voice_id​ | String​ | 必选​ | 输出音频的音色 ID。​ |\n| detail​ | Object​ | 必选​ | 事件详情。​ |\n| detail.logid​ | String​ | 必选​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |\n\n- 事件示例 ： ​\n\n- ​ JSON 复制 { ​ \"id\" : \"event_id\" , ​ \"event_type\" : \"speech.updated\" , ​ \"data\" : { ​ \"output_audio\" : { ​ \"codec\" : \"pcm\" , ​ \"pcm_config\" : { ​ \"sample_rate\" : 24000 ​ }, ​ \"speech_rate\" : 50 , ​ \"voice_id\" : \"音色id\" ​ } ​ }, ​ \"detail\" : { ​ \"logid\" : \"20241210152726467C48D89D6DB2F3***\" } ​ } ​ ​\n\n- 事件类型 ： input_text_buffer.completed ​\n\n- 事件说明 ：流式提交的文字完成后，返回此事件。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ String ​ 必选 ​ 客户端自行生成的事件 ID，方便定位问题。 ​ event_type ​ String ​ 必选 ​ 固定为 input_text_buffer.completed 。 ​ detail ​ Object ​ 必选 ​ 事件详情。 ​ detail.logid ​ String ​ 必选 ​ 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | String​ | 必选​ | 固定为input_text_buffer.completed。​ |\n| detail​ | Object​ | 必选​ | 事件详情。​ |\n| detail.logid​ | String​ | 必选​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |\n\n- 事件示例 ： ​\n\n- ​ JSON 复制 { ​ \"id\" : \"event_id\" , ​ \"event_type\" : \"input_text_buffer.completed\" , ​ \"detail\" : { ​ \"logid\" : \"20241210152726467C48D89D6DB2F3***\" ​ } ​ } ​ ​\n\n- 事件类型 ： speech.audio.update ​\n\n- 事件说明 ：语音合成产生增量语音时，返回此事件。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ String ​ 必选 ​ 客户端自行生成的事件 ID，方便定位问题。 ​ event_type ​ String ​ 必选 ​ 固定为 speech.audio.update 。 ​ data ​ Object ​ 必选 ​ 事件数据，包含音频片段信息。 ​ data.delta ​ String ​ 必选 ​ base64 编码后的音频片段。 ​ detail ​ Object ​ 必选 ​ 事件详情。 ​ detail.logid ​ String ​ 必选 ​ 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | String​ | 必选​ | 固定为speech.audio.update。​ |\n| data​ | Object​ | 必选​ | 事件数据，包含音频片段信息。​ |\n| data.delta​ | String​ | 必选​ | base64 编码后的音频片段。​ |\n| detail​ | Object​ | 必选​ | 事件详情。​ |\n| detail.logid​ | String​ | 必选​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |\n\n- 事件示例 ： ​\n\n- ​ JSON 复制 { ​ \"id\" : \"event_id\" , ​ \"event_type\" : \"speech.audio.update\" , ​ \"data\" : { ​ \"delta\" : \"base64EncodedAudioDelta\" ​ }, ​ \"detail\" : { ​ \"logid\" : \"20241210152726467C48D89D6DB2F3***\" } ​ } ​ ​\n\n- 事件类型 ： speech.audio.completed ​\n\n- 事件说明 ：语音合成完成后，返回此事件。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ String ​ 必选 ​ 客户端自行生成的事件 ID，方便定位问题。 ​ event_type ​ String ​ 必选 ​ 固定为 speech.audio.completed 。 ​ detail ​ Object ​ 必选 ​ 事件详情。 ​ detail.logid ​ String ​ 必选 ​ 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | String​ | 必选​ | 固定为speech.audio.completed。​ |\n| detail​ | Object​ | 必选​ | 事件详情。​ |\n| detail.logid​ | String​ | 必选​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |\n\n- 事件示例 ： ​\n\n- ​ JSON 复制 { ​ \"id\" : \"event_id\" , ​ \"event_type\" : \"speech.audio.completed\" , ​ \"detail\" : { ​ \"logid\" : \"20241210152726467C48D89D6DB2F3***\" ​ } ​ } ​ ​\n\n- 事件类型 ： error ​\n\n- 事件说明 ：对话过程中的错误事件。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ String ​ 必选 ​ 服务端生成的唯一 ID。 ​ event_type ​ String ​ 必选 ​ 固定为 error 。 ​ data ​ Object ​ 必选 ​ 事件数据，包含错误信息。 ​ data.code ​ Integer ​ 必选 ​ 错误码。 ​ data.msg ​ String ​ 必选 ​ 错误信息。 ​ detail ​ Object ​ 必选 ​ 事件详情。 ​ detail.logid ​ String ​ 必选 ​ 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 服务端生成的唯一 ID。​ |\n| event_type​ | String​ | 必选​ | 固定为error。​ |\n| data​ | Object​ | 必选​ | 事件数据，包含错误信息。​ |\n| data.code​ | Integer​ | 必选​ | 错误码。​ |\n| data.msg​ | String​ | 必选​ | 错误信息。​ |\n| detail​ | Object​ | 必选​ | 事件详情。​ |\n| detail.logid​ | String​ | 必选​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |\n\n- 事件示例 ： ​\n\n- ​ JSON 复制 { ​ \"id\" : \"event_1\" , ​ \"event_type\" : \"error\" ​ \"data\" : { ​ \"code\" : 1 , ​ \"msg\" : \"发生异常\" ​ }, ​ \"detail\" : { ​ \"logid\" : \"20241210152726467C48D89D6DB2F3***\" ​ } ​ } ​ ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/streaming_chat_api",
      "title": "双向流式语音对话",
      "content": {
        "sections": [],
        "full_text": "双向流式语音对话\n\n扣子编程提供流式语音对话 WebSocket OpenAPI，向指定的智能体发起语音对话。\n\n​\n\n双向流式语音对话场景下的各类事件详细信息可参考\n\n​\n\n双向流式对话上行事件\n\n。\n\n​\n\n接口信息\n\n​\n\n​\n\nURL\n\n​\n\nwss://\n\nws.coze.cn/v1/\n\nchat\n\n​\n\nHeaders\n\n​\n\nAuthorization Bearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息请参考\n\n准备工作\n\n。\n\n​\n\n权限\n\n​\n\nchat\n\n​\n\n接口说明\n\n​\n\n向指定的智能体发起语音对话。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nbot_id\n\n​\n\n​\n\nString\n\n​\n\n​\n\n必选\n\n​\n\n​\n\n需要关联的智能体 ID。\n\n​\n\n进入智能体的开发页面，开发页面 URL 中\n\nbot\n\n参数后的数字就是智能体 ID。例如\n\nhttps://www.coze.com/space/341****/bot/73428668*****\n\n，Bot ID 为\n\n73428668*****\n\n。\n\n​\n\n说明\n\n确保调用该接口使用的令牌开通了此智能体所在空间的权限。\n\n​\n\n确保该智能体已发布为 API 服务。\n\n​\n\n​\n\ndevice_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n设备的唯一标识符，在建立 Websocket 连接时建议带上此参数，便于排查问题。\n\n​\n\n说明\n\ndevice_id\n\n的格式为\n\nint64 数字类型\n\n的字符串。如果设备 ID 是纯数字，  可直接填写该数字作为\n\ndevice_id\n\n。如果设备 ID 包含非数字字符，则需先将其转换为纯数字字符串，再填写到\n\ndevice_id\n\n中。\n\n​\n\n​\n\n​\n\n建连示例代码\n\n​\n\nws module(Node.js)\n\nwebsocket-client(Python)\n\nWebsocket(browsers)\n\n​\n\n​\n\nJavaScript\n\n复制\n\nimport\n\nWebSocket\n\nfrom\n\n'ws'\n\n;\n\n​\n\n​\n\nconst\n\nurl =\n\n`wss://\n\nws.coze.cn/v1/chat?bot_id=\n\n${BOT_ID}\n\n&authorization=Bearer\n\n${ACCESS_TOKEN}\n\n`\n\n;\n\n​\n\nconst\n\nws =\n\nnew\n\nWebSocket\n\n(url);\n\n​\n\n​\n\nws.\n\non\n\n(\n\n'open'\n\n,\n\nfunction\n\nopen\n\n() {\n\n​\n\nconsole\n\n.\n\nlog\n\n(\n\n'Connected to server.'\n\n);\n\n​\n\n});\n\n​\n\n​\n\nws.\n\non\n\n(\n\n'message'\n\n,\n\nfunction\n\nincoming\n\n(\n\nmessage\n\n) {\n\n​\n\nconsole\n\n.\n\nlog\n\n(\n\nJSON\n\n.\n\nparse\n\n(message.\n\ntoString\n\n()));\n\n​\n\n});\n\n​\n\n​\n\n​\n\n​\n\nAPI 时序图\n\n​\n\n交互流程如下：\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n上一篇\n\n双向流式语音合成事件\n\n下一篇\n\n双向流式对话上行事件",
        "links": []
      },
      "markdown": "| URL​ | wss://ws.coze.cn/v1/chat​ |\n| Headers​ | Authorization Bearer$Access_Token​用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息请参考准备工作。​ |\n| 权限​ | chat​ |\n| 接口说明​ | 向指定的智能体发起语音对话。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| bot_id​​ | String​​ | 必选​​ | 需要关联的智能体 ID。​进入智能体的开发页面，开发页面 URL 中bot参数后的数字就是智能体 ID。例如https://www.coze.com/space/341****/bot/73428668*****，Bot ID 为73428668*****。​说明确保调用该接口使用的令牌开通了此智能体所在空间的权限。​确保该智能体已发布为 API 服务。​​ |\n| device_id​ | String​ | 可选​ | 设备的唯一标识符，在建立 Websocket 连接时建议带上此参数，便于排查问题。​说明device_id的格式为int64 数字类型的字符串。如果设备 ID 是纯数字，  可直接填写该数字作为device_id。如果设备 ID 包含非数字字符，则需先将其转换为纯数字字符串，再填写到device_id中。​​ |\n\n- 确保调用该接口使用的令牌开通了此智能体所在空间的权限。 ​\n\n- 确保该智能体已发布为 API 服务。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/streaming_chat_event",
      "title": "双向流式对话上行事件",
      "content": {
        "sections": [],
        "full_text": "双向流式对话上行事件\n\n本文介绍扣子编程 WebSocket 双向流式对话事件中的上行事件，双向流式对话下行事件请参见\n\n​\n\n双向流式对话下行事件\n\n。\n\n​\n\n更新对话配置\n\n​\n\n事件类型\n\n：\n\nchat.update\n\n​\n\n事件说明\n\n：此事件可以更新当前对话连接的配置项，若更新成功，会收到\n\nchat.updated\n\n的下行事件，否则，会收到\n\nerror\n\n下行事件。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\nchat.update\n\n。\n\n​\n\ndata\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n事件数据，包含对话配置的详细信息。\n\n​\n\ndata.chat_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n对话配置。\n\n​\n\ndata.chat_config.meta_data\n\n​\n\nMap<String, String>\n\n​\n\n可选\n\n​\n\n附加信息，通常用于封装一些业务相关的字段。查看对话消息详情时，系统会透传此附加信息。自定义键值对，应指定为 Map 对象格式。长度为 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。\n\n​\n\ndata.chat_config.custom_variables\n\n​\n\nMap<String, String>\n\n​\n\n可选\n\n​\n\n智能体中定义的变量。在智能体 prompt 中设置变量 {{key}} 后，可以通过该参数传入变量值，同时支持 Jinja2 语法。详细说明可参考变量示例。变量名只支持英文字母和下划线。\n\n​\n\ndata.chat_config.extra_params\n\n​\n\nMap<String, String>\n\n​\n\n可选\n\n​\n\n附加参数，通常用于特殊场景下指定一些必要参数供模型判断，例如指定经纬度，并询问智能体此位置的天气。自定义键值对格式，其中键（key）仅支持设置为：\n\n​\n\nlatitude\n\n（纬度，此时值（Value）为纬度值，例如 39.9800718）。\n\n​\n\nlongitude\n\n（经度，此时值（Value）为经度值，例如 116.309314）。\n\n​\n\ndata.chat_config.user_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n标识当前与智能体的用户，由使用方自行定义、生成与维护。\n\nuser_id\n\n用于标识对话中的不同用户，不同的\n\nuser_id\n\n，其对话的上下文消息、数据库等对话记忆数据互相隔离。如果不需要用户数据隔离，可将此参数固定为一个任意字符串，例如 123，abc 等。\n\n​\n\ndata.chat_config.conversation_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n标识对话发生在哪一次会话中。会话是智能体和用户之间的一段问答交互。一个会话包含一条或多条消息。对话是会话中对智能体的一次调用，智能体会将对话中产生的消息添加到会话中。可以使用已创建的会话，会话中已存在的消息将作为上下文传递给模型。创建会话的方式可参考创建会话。对于一问一答等不需要区分 conversation 的场合可不传该参数，系统会自动生成一个会话。不传的话会默认创建一个新的 conversation。\n\n​\n\ndata.chat_config.auto_save_history\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n是否保存本次对话记录。\n\n​\n\ntrue\n\n：（默认）会话中保存本次对话记录，包括本次对话的模型回复结果、模型执行中间结果。\n\n​\n\nfalse\n\n：会话中不保存本次对话记录，后续也无法通过任何方式查看本次对话信息、消息详情。在同一个会话中再次发起对话时，本次会话也不会作为上下文传递给模型。\n\n​\n\ndata.chat_config.parameters\n\n​\n\nMap<String, any>\n\n​\n\n可选\n\n​\n\n设置对话流的自定义输入参数的值，具体用法和示例代码可参考\n\n​\n\n为自定义参数赋值\n\n。\n\n​\n\n对话流的输入参数 USER_INPUT 应在\n\nadditional_messages\n\n中传入，在 parameters 中的 USER_INPUT 不生效。\n\n​\n\n如果\n\nparameters\n\n中未指定\n\nCONVERSATION_NAME\n\n或其他输入参数，则使用参数默认值运行对话流；如果指定了这些参数，则使用指定值。\n\n​\n\ndata.input_audio\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n输入音频格式。\n\n​\n\ndata.input_audio.format\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n输入音频的格式，支持\n\npcm\n\n、\n\nwav\n\n、\n\nogg\n\n。默认为\n\nwav\n\n。\n\n​\n\ndata.input_audio.codec\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n输入音频的编码，支持\n\npcm\n\n、\n\nopus\n\n、\n\ng711a\n\n、\n\ng711u\n\n。默认为\n\npcm\n\n。\n\n​\n\n如果音频编码格式为\n\ng711a\n\n或\n\ng711u\n\n，\n\nformat\n\n请设置为\n\npcm\n\n。\n\n​\n\ndata.input_audio.sample_rate\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n输入音频的采样率，默认是 24000。支持 8000、16000、22050、24000、32000、44100、48000。\n\n​\n\n如果音频编码格式\n\ncodec\n\n为\n\ng711a\n\n或\n\ng711u\n\n，音频采样率需设置为 8000。\n\n​\n\ndata.input_audio.channel\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n输入音频的声道数，支持 1（单声道）、2（双声道）。默认是 1（单声道）。\n\n​\n\ndata.input_audio.bit_depth\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n输入音频的位深，默认是 16，支持8、16和24。\n\n​\n\ndata.output_audio\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n输出音频格式。\n\n​\n\ndata.output_audio.codec\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n输出音频编码，支持\n\npcm\n\n、\n\ng711a\n\n、\n\ng711u\n\n、\n\nopus\n\n、\n\nmp3\n\n。默认是\n\npcm\n\n。\n\n​\n\n说明\n\n当\n\ncodec\n\n设置为\n\npcm\n\n、\n\ng711a\n\n或\n\ng711u\n\n时，你可以通过\n\npcm_config\n\n配置 PCM 音频参数。\n\n​\n\n​\n\ndata.output_audio.pcm_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n当\n\ncodec\n\n设置为\n\npcm\n\n、\n\ng711a\n\n或\n\ng711u\n\n时，用于配置 PCM 音频参数。\n\n​\n\n当\n\ncodec\n\n设置为\n\nopus\n\n、\n\nmp3\n\n时，不需要设置此字段。\n\n​\n\n说明\n\n当\n\ncodec\n\n设置为\n\npcm\n\n时，返回的 PCM 数据将固定为单声道，采样深度为 16 位。\n\n​\n\n当\n\ncodec\n\n设置为\n\ng711a\n\n或\n\ng711u\n\n时，返回的数据将是 8000kHz 采样率，单声道，采样深度为 8 位。\n\n​\n\n​\n\ndata.output_audio.pcm_config.sample_rate\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n输出\n\npcm\n\n音频的采样率，默认是 24000。支持 8000、16000、22050、24000、32000、44100、48000。\n\n​\n\n说明\n\n当\n\ncodec\n\n设置为\n\ng711a\n\n或\n\ng711u\n\n时，sample_rate 自动设置为 8000，且不能更改。\n\n​\n\n​\n\ndata.output_audio.pcm_config.frame_size_ms\n\n​\n\nFloat\n\n​\n\n可选\n\n​\n\n输出每个 pcm 包的时长，单位 ms，默认不限制。取值范围：0~1000。\n\n​\n\ndata.output_audio.pcm_config. limit_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n输出音频限流配置，默认不限制。\n\n​\n\n说明\n\n如需实现输出 PCM 音频限流，还需要配置\n\n​\n\ndata.output_audio.pcm_config.frame_size_ms\n\n参数。\n\n​\n\n​\n\ndata.output_audio.pcm_config. limit_config.period\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n周期的时长，单位为秒。例如设置为 10 秒，则以 10 秒作为一个周期。\n\n​\n\ndata.output_audio.pcm_config. limit_config.max_frame_num\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n周期内，最大返回 pcm 包数量。\n\n​\n\ndata.output_audio.opus_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n当\n\ncodec\n\n设置为\n\npcm\n\n、\n\nmp3\n\n时，不需要设置此字段。\n\n​\n\ndata.output_audio.opus_config.sample_rate\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n编码成\n\nopus\n\n时的 pcm 采样率，默认 24k。支持 8000、12000、16000、24000、48000。\n\n​\n\ndata.output_audio.opus_config.bitrate\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n输出\n\nopus\n\n的码率，默认 48000。\n\n​\n\ndata.output_audio.opus_config.use_cbr\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n输出\n\nopus\n\n是否使用 CBR 编码，默认为\n\nfalse\n\n。\n\n​\n\ndata.output_audio.opus_config.frame_size_ms\n\n​\n\nFloat\n\n​\n\n可选\n\n​\n\n输出\n\nopus\n\n的帧长，默认是 10。可选值：\n\n​\n\n2.5、5、10、20、40、60\n\n​\n\ndata.output_audio.opus_config.limit_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n输出音频限流配置，默认不限速。\n\n​\n\ndata.output_audio.opus_config.limit_config.period\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n周期的时长，单位为秒。例如设置为 10 秒，则以 10 秒作为一个周期。\n\n​\n\ndata.output_audio.opus_config.limit_config.max_frame_num\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n周期内最大返回的 Opus 帧数量。\n\n​\n\ndata.output_audio.mp3_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n当\n\ncodec\n\n设置为\n\nmp3\n\n时，用于配置 mp3 音频参数。\n\n​\n\n当\n\ncodec\n\n设置为\n\nopus\n\n、\n\npcm\n\n、\n\ng711a\n\n、\n\ng711u\n\n时，不需要设置此字段。\n\n​\n\ndata.output_audio.mp3_config.sample_rate\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n输出\n\nmp3\n\n音频的采样率，默认是 44100。支持 32000、44100、48000。\n\n​\n\ndata.output_audio.mp3_config.bit_rate\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n输出\n\nmp3\n\n音频的码率，支持 8000~1600000。\n\n​\n\ndata.output_audio.speech_rate\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n输出音频的语速，取值范围 [-50, 100]，默认为 0。-50 表示 0.5 倍速，100 表示 2 倍速。\n\n​\n\ndata.output_audio.loudness_rate\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n输出音频的音量，取值范围 [-50, 100]，默认为 0。-50 表示 0.5 倍音量，100 表示 2 倍音量。\n\n​\n\ndata.output_audio.voice_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n输出音频的音色 ID，默认是柔美女友音色。你可以调用\n\n​\n\n查看音色列表\n\nAPI 查看当前可用的所有音色 ID。\n\n​\n\ndata.output_audio.context_texts\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n语音合成的辅助信息，用于控制合成语音的整体情绪（如悲伤、生气）、方言（如四川话、北京话）、语气（如撒娇、暧昧、吵架、夹子音）、语速（快慢）及音调（高低）等。默认为空。\n\n​\n\n示例：用低沉沙哑的语气、带着沧桑与绝望地说。\n\n​\n\n说明\n\n仅当\n\nvoice_id\n\n为豆包语音合成大模型 2.0 音色时才支持该参数，具体音色列表请参见\n\n​\n\n系统音色列表\n\n。\n\n​\n\n更多关于豆包语音合成 2.0 的\n\ncontext_texts\n\n示例和效果可参考\n\n语音指令-示例库\n\n​\n\n​\n\ndata.output_audio.emotion_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n设置多情感音色的情感和情感值，仅当\n\nvoice_id\n\n为多情感音色时才支持该配置。\n\n​\n\ndata.output_audio.emotion_config.emotion\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n设置多情感音色的情感类型。不同音色支持的情感范围不同，可以通过\n\n系统音色列表\n\n查看各音色支持的情感。默认为空。枚举值如下：\n\n​\n\nhappy-开心\n\n​\n\nsad-悲伤\n\n​\n\nangry-生气\n\n​\n\nsurprised-惊讶\n\n​\n\nfear-恐惧\n\n​\n\nhate-厌恶\n\n​\n\nexcited-激动\n\n​\n\ncoldness-冷漠\n\n​\n\nneutral-中性\n\n​\n\n说明\n\n你需要在对话流开始节点的输入参数中增加\n\n_voice_emotion\n\n参数，用于向对话流传递多情感音色的情感类型配置。\n\n​\n\n​\n\ndata.output_audio.emotion_config.emotion_scale\n\n​\n\nFloat\n\n​\n\n可选\n\n​\n\n情感值用于量化情感的强度。数值越高，情感表达越强烈，例如： “开心” 的情感值 5 比 1 更显兴奋。\n\n​\n\n取值范围：1.0~5.0，默认值：4.0。\n\n​\n\ndata.voice_processing_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n语音处理能力配置。\n\n​\n\n说明\n\n仅扣子企业旗舰版支持该配置。\n\n​\n\n​\n\ndata.voice_processing_config.enable_ans\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n主动噪声抑制。自动识别并过滤掉背景环境中的各种噪音（如键盘声、空调声、街道嘈杂声），让说话者的声音更清晰。\n\n​\n\n此功能与下面的\n\nenable_pdns\n\n（声纹降噪）只能\n\n二选一开启\n\n，不能同时使用。\n\n​\n\ndata.voice_processing_config.enable_pdns\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n声纹降噪。专门针对\n\n特定说话人\n\n的声音进行优化，能更精准地保留目标人声。\n\n​\n\n此功能与上面的\n\nenable_ans\n\n只能\n\n二选一开启\n\n，不能同时使用。\n\n​\n\n提供两种模式，你可以根据需要选择：\n\n​\n\n自动提取：设置简单，开箱即用。默认为该模式。\n\n降噪生效稍微有延迟\n\n，服务端需要先听你说一会儿话才能提取出你的声纹特征，在此期间降噪效果可能不佳。另外，提取声纹会受到用户说话场景影响，准确性上可能会弱于主动设置。\n\n​\n\n主动设置：\n\n降噪效果更精准、更快速\n\n，在对话开始时就立即生效。不过需要提前录制声纹并在\n\nvoice_print_feature_id\n\n中设置声纹 ID。\n\n​\n\ndata.voice_processing_config.voice_print_feature_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n目标说话人的声纹 ID\n\n。当你选择开启\n\nenable_pdns\n\n（声纹降噪）并希望使用\n\n主动设置\n\n模式时，需要在此处填入你提前录制好的声纹 ID。\n\n​\n\n你可以通过扣子编程录制声纹，具体请参见\n\n​\n\n声纹识别\n\n，或通过\n\n​\n\n创建声纹\n\nAPI 上传声纹并获取声纹 ID。\n\n​\n\ndata.event_subscriptions\n\n​\n\nArray<String>\n\n​\n\n可选\n\n​\n\n需要订阅下行事件的事件类型列表。不设置或者设置为空为订阅所有下行事件。\n\n​\n\ndata.need_play_prologue\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n是否需要播放开场白，默认为 false。\n\n​\n\ndata.prologue_content\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n自定义开场白，need_play_prologue 设置为 true 时生效。如果不设定自定义开场白则使用智能体上设置的开场白。\n\n​\n\ndata.turn_detection\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n转检测配置。\n\n​\n\ndata.turn_detection.type\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n语音检测类型，用于控制语音交互的检测方式，枚举值：\n\n​\n\nserver_vad\n\n：自由对话模式，语音数据会传输到服务器端进行实时分析，服务器端的语音活动检测算法会判断用户是否在说话。\n\n​\n\nclient_interrupt\n\n：（默认）按键说话模式，由客户端控制语音的开始与结束。\n\n​\n\nsemantic_vad\n\n：采用语义判停的自由对话模式（\n\n此功能仅对企业旗舰版用户开放\n\n），由服务端识别语义来判断是否停止说话。\n\n​\n\ndata.turn_detection.prefix_padding_ms\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\nserver_vad\n\n模式下，VAD 检测到语音之前要包含的音频量，单位为 ms。默认为 600ms。\n\n​\n\ndata.turn_detection.silence_duration_ms\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\nserver_vad\n\n模式下，检测语音停止的静音持续时间，单位为 ms。默认为 500ms。\n\n​\n\ndata.turn_detection.semantic_vad_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\nsemantic_vad\n\n模式下，配置判定语音停止的语义检测策略。\n\n​\n\ndata.turn_detection.semantic_vad_config.silence_threshold_ms\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n当用户暂停说话时，持续静音多久后，触发语义判停检测。\n\n单位为 ms。\n\n默认为 300ms。\n\n​\n\ndata.turn_detection.semantic_vad_config.semantic_unfinished_wait_time_ms\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n当语义检测判断该语句未结束时，持续静音多久后，扣子编程认定语音结束\n\n。\n\n单位为 ms。默认为 500ms。取值范围为 100~2000。\n\n​\n\ndata.turn_detection.interrupt_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\nserver_vad\n\n模式下，配置语音对话的打断策略。\n\n​\n\n默认采用发声即打断模式，即在检测到语音输入时会中断智能体的输出。\n\n​\n\ndata.turn_detection.interrupt_config.mode\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n配置通过关键词打断，包括:\n\n​\n\nkeyword_contains\n\n模式下，说话内容\n\n包含\n\n关键词才会打断模型回复。例如关键词\"扣子\"，用户正在说“你好呀扣子......” / “扣子你好呀”，模型回复都会被打断。\n\n​\n\nkeyword_prefix\n\n模式下，说话内容\n\n前缀匹配\n\n关键词才会打断模型回复。例如关键词\"扣子\"，用户正在说“扣子你好呀......”，模型回复就会被打断，而用户说“你好呀扣子......”，模型回复不会被打断。\n\n​\n\n详细配置方法请参见\n\n​\n\n通过关键词打断语音对话\n\n。\n\n​\n\ndata.turn_detection.interrupt_config.keywords\n\n​\n\nArray<String>\n\n​\n\n可选\n\n​\n\n打断的关键词配置，最多同时限制 5 个关键词，每个关键词限定长度在 6~24 个字节以内（2~8个汉字以内），不能有标点符号。\n\n​\n\ndata.asr_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n语音识别配置，包括热词和上下文信息，以便优化语音识别的准确性和相关性。\n\n​\n\ndata.asr_config.hot_words\n\n​\n\nArray<String>\n\n​\n\n可选\n\n​\n\n请输入热词列表，以便提升这些词汇的识别准确率。如果设置的热词数量超出以下数量限制，超出部分将自动截断。\n\n​\n\ndata.asr_config.stream_mode\n\n为\n\noutput_no_stream\n\n时：hot_words 支持 5000 tokens。\n\n​\n\ndata.asr_config.stream_mode\n\n为\n\nbidirectional_stream\n\n时： hot_words 支持 100 tokens。\n\n​\n\ndata.asr_config.context\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n请输入上下文信息。\n\n​\n\n最多输入 800 个 Tokens，超出部分将自动截断。\n\n​\n\ndata.asr_config.user_language\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n用户说话的语种，默认为\n\ncommon\n\n支持\n\n中英文、上海话、闽南语，四川、陕西、粤语\n\n识别。\n\n仅在\n\ndata.asr_config.stream_mode\n\n为\n\noutput_no_stream\n\n时可以指定设置语种。\n\n当将其设置为下方特定键时，它可以识别指定语言。\n\n​\n\n英语：en-US\n\n​\n\n日语：ja-JP\n\n​\n\n印尼语：id-ID\n\n​\n\n西班牙语：es-MX\n\n​\n\n葡萄牙语：pt-BR\n\n​\n\n德语：de-DE\n\n​\n\n法语：fr-FR\n\n​\n\n韩语：ko-KR\n\n​\n\n菲律宾语：fil-PH\n\n​\n\n马来语：ms-MY\n\n​\n\n泰语：th-TH\n\n​\n\n阿拉伯语：ar-SA\n\n​\n\n例如，如果输入音频是德语，则此参数传入de-DE\n\n​\n\ndata.asr_config.enable_ddc\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n将语音转为文本时，是否启用语义顺滑。默认为\n\ntrue\n\n。\n\n​\n\ntrue\n\n：系统在进行语音处理时，会去掉识别结果中诸如 “啊”“嗯” 等语气词，使得输出的文本语义更加流畅自然，符合正常的语言表达习惯，尤其适用于对文本质量要求较高的场景，如正式的会议记录、新闻稿件生成等。\n\n​\n\nfalse\n\n：系统不会对识别结果中的语气词进行处理，识别结果会保留原始的语气词。\n\n​\n\ndata.asr_config.enable_itn\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n将语音转为文本时，是否开启文本规范化（ITN）处理，将识别结果转换为更符合书面表达习惯的格式以提升可读性。默认为\n\ntrue\n\n。\n\n​\n\n开启后，会将口语化数字转换为标准数字格式，示例：\n\n​\n\n将\n\n两点十五分\n\n转换为\n\n14:15\n\n。\n\n​\n\n将\n\n一百美元\n\n转换为\n\n$100\n\n。\n\n​\n\ndata.asr_config.enable_punc\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n将语音转为文本时，是否给文本加上标点符号。默认为\n\ntrue\n\n。\n\n​\n\ndata.asr_config.stream_mode\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nASR 识别的模式。\n\n​\n\noutput_no_stream\n\n：不会逐字返回语音识别结果，而是等整段语音结束后统一输出完整文本。异步语音消息场景中推荐使用该模式，会整合整句音频信息做上下文分析，减少实时截断导致的误差，提升准确率。\n\n​\n\nbidirectional_stream\n\n（默认值）：逐字的返回语音识别的结果。\n\n​\n\ndata.asr_config.enable_nostream\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n是否开启\n\n二次识别模式\n\n：\n\n​\n\ntrue\n\n：会实时返回逐字识别的文本；当一句话结束时，会结合整句音频进行上下文分析并重新识别，生成优化后的识别结果并返回。这种机制既能满足客户实时上屏的需求，又能确保最终结果的识别准确率。\n\n​\n\nfalse\n\n（默认值）：仅进行一次实时识别，逐字返回文本，不会在一句话结束时重新识别分句，可能存在一定的识别误差。\n\n​\n\ndata.asr_config.enable_emotion\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n识别说话人的情绪。仅在\n\ndata.asr_config.stream_mode\n\n为\n\noutput_no_stream\n\n时生效。默认为\n\nfalse\n\n。\n\n​\n\n支持的情绪标签包括：\n\n​\n\nangry\n\n：表示情绪为生气\n\n​\n\nhappy\n\n：表示情绪为开心\n\n​\n\nneutral\n\n：表示情绪为平静或中性\n\n​\n\nsad\n\n：表示情绪为悲伤\n\n​\n\nsurprise\n\n：表示情绪为惊讶\n\n​\n\ndata.asr_config.enable_gender\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n是否开启识别说话人的性别（male/female），仅在\n\ndata.asr_config.stream_mode\n\n为\n\noutput_no_stream\n\n时生效。默认为\n\nfalse\n\n。\n\n​\n\n说明\n\n你需要在对话流开始节点的输入参数中增加\n\n_voice_gender\n\n参数，以便对话流获取识别后的说话人性别。\n\n​\n\n​\n\ndata.asr_config.sensitive_words_filter\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n敏感词过滤功能，支持以下 3 种过滤方式：\n\n​\n\n过滤系统敏感词，并替换为\n\n*\n\n。\n\n​\n\n过滤自定义敏感词，并替换为空。\n\n​\n\n过滤自定义敏感词，并替换为\n\n*\n\n。\n\n​\n\ndata.asr_config.sensitive_words_filter.system_reserved_filter\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n是否过滤系统自带的敏感词，并将匹配到的敏感词替换为\n\n*\n\n。（系统自带敏感词主要包含一些限制级词汇）。默认为\n\nfalse\n\n。\n\n​\n\ndata.asr_config.sensitive_words_filter.filter_with_empty\n\n​\n\nArray<string>\n\n​\n\n可选\n\n​\n\n自定义需替换为空的敏感词列表。\n\n​\n\ndata.asr_config.sensitive_words_filter.filter_with_signed\n\n​\n\nArray<string>\n\n​\n\n可选\n\n​\n\n自定义需替换为\n\n*\n\n的敏感词列表。\n\n​\n\ndata.voice_print_config\n\n​\n\nObject<String>\n\n​\n\n可选\n\n​\n\n声纹识别配置。\n\n​\n\ndata.voice_print_config.group_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n声纹组 ID。语音通话时，扣子编程会在该声纹组内进行查找匹配对应的声纹，当声纹匹配度高于\n\nscore\n\n阈值，则认为是同一个人的声音。\n\n​\n\n你可以通过\n\n查看声纹组列表\n\nAPI 查看声纹组 ID。\n\n​\n\ndata.voice_print_config.score\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n声纹匹配的命中阈值，即声音匹配度的最低标准。当声音匹配度达到或超过该阈值时，扣子编程才会认定声纹匹配成功。你可以根据应用的安全性要求进行自定义设置。如果匹配了多轮声纹，扣子编程会取相似度最高的一个。\n\n​\n\n取值范围：0~100，默认值：40。\n\n​\n\ndata.voice_print_config.reuse_voice_info\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n当本轮对话未命中任何声纹时，是否沿用历史声纹信息。\n\n​\n\ntrue\n\n：未命中声纹时，智能体将返回上一次命中的声纹。适用于连续对话场景，当收音不好等情况导致声纹没能正确被识别时，保障对话的连贯性。\n\n​\n\nfalse\n\n：（默认值）未命中声纹时，智能体返回空的声纹信息。\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n输出音频为 pcm\n\n输出音频为 opus\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"event_id\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"chat.update\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"chat_config\"\n\n:\n\n{\n\n​\n\n\"auto_save_history\"\n\n:\n\ntrue\n\n,\n\n// 保存历史记录。默认 true\n\n​\n\n\"conversation_id\"\n\n:\n\n\"xxxx\"\n\n,\n\n// conversation_id\n\n​\n\n\"user_id\"\n\n:\n\n\"xxx\"\n\n,\n\n// 标识当前与智能体的用户，由使用方自行定义、生成与维护。user_id 用于标识对话中的不同用户，不同的 user_id，其对话的上下文消息、数据库等对话记忆数据互相隔离。如果不需要用户数据隔离，可将此参数固定为一个任意字符串\n\n​\n\n\"meta_data\"\n\n:\n\n{},\n\n// 附加信息,通常用于封装一些业务相关的字段。查看对话消息详情时,系统会透传此附加信息。\n\n​\n\n\"custom_variables\"\n\n:\n\n{},\n\n// 智能体中定义的变量。在智能体prompt中设置变量{{key}}后,可以通过该参数传入变量值,同时支持Jinja2语法。详细说明可参考变量示例。变量名只支持英文字母和下划线。\n\n​\n\n\"extra_params\"\n\n:\n\n{},\n\n// 附加参数,通常用于特殊场景下指定一些必要参数供模型判断,例如指定经纬度,并询问智能体此位置的天气。自定义键值对格式,其中键(key)仅支持设置为:latitude:纬度,此时值(Value)为纬度值,例如39.9800718。longitude:经度,此时值(Value)为经度值,例如116.309314。\n\n​\n\n\"parameters\"\n\n:\n\n{\n\n\"custom_var_1\"\n\n:\n\n\"测试\"\n\n}\n\n​\n\n},\n\n​\n\n\"input_audio\"\n\n:\n\n{\n\n// 输入音频格式\n\n​\n\n\"format\"\n\n:\n\n\"pcm\"\n\n,\n\n// 输入音频格式，支持 pcm/wav/ogg。默认 wav\n\n​\n\n\"codec\"\n\n:\n\n\"pcm\"\n\n,\n\n// 输入音频编码。 pcm/opus。默认 pcm\n\n​\n\n\"sample_rate\"\n\n:\n\n24000\n\n,\n\n// 采样率\n\n​\n\n\"channel\"\n\n:\n\n1\n\n,\n\n// 通道数\n\n​\n\n\"bit_depth\"\n\n:\n\n16\n\n// 位深\n\n​\n\n},\n\n​\n\n\"output_audio\"\n\n:\n\n{\n\n// 输出音频格式\n\n​\n\n\"codec\"\n\n:\n\n\"pcm\"\n\n,\n\n​\n\n\"pcm_config\"\n\n:\n\n{\n\n​\n\n\"sample_rate\"\n\n:\n\n16000\n\n,\n\n// 默认  24000\n\n​\n\n\"frame_size_ms\"\n\n:\n\n50\n\n,\n\n​\n\n\"limit_config\"\n\n:\n\n{\n\n​\n\n\"period\"\n\n:\n\n1\n\n,\n\n​\n\n\"max_frame_num\"\n\n:\n\n22\n\n​\n\n}\n\n​\n\n},\n\n​\n\n\"speech_rate\"\n\n:\n\n0\n\n,\n\n// 回复的语速，取值范围 [-50, 100]，默认为 0，-50 表示 0.5 倍速，100 表示 2倍速\n\n​\n\n\"voice_id\"\n\n:\n\n\"7426720361733046281\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n​\n\n​\n\n流式上传音频片段\n\n​\n\n事件类型\n\n：\n\ninput_audio_buffer.append\n\n​\n\n事件说明\n\n：流式向服务端提交音频的片段。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\ninput_audio_buffer.append\n\n。\n\n​\n\ndata\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件数据，包含音频片段信息。\n\n​\n\ndata.delta\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nbase64 编码后的音频片段。\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"event_id\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"input_audio_buffer.append\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"delta\"\n\n:\n\n\"base64EncodedAudioDelta\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n提交音频\n\n​\n\n事件类型\n\n：\n\ninput_audio_buffer.complete\n\n​\n\n事件说明\n\n：客户端发送\n\ninput_audio_buffer.complete\n\n事件来告诉服务端提交音频缓冲区的数据。服务端提交成功后会返回\n\ninput_audio_buffer.completed\n\n事件。在\n\nserver_vad\n\n模式下，提交此事件无效。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\ninput_audio_buffer.complete\n\n。\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"event_id\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"input_audio_buffer.complete\"\n\n​\n\n}\n\n​\n\n​\n\n清除缓冲区音频\n\n​\n\n事件类型\n\n：\n\ninput_audio_buffer.clear\n\n​\n\n事件说明\n\n：客户端发送\n\ninput_audio_buffer.clear\n\n事件来告诉服务端清除缓冲区的音频数据。服务端清除完后将返回\n\ninput_audio_buffer.cleared\n\n事件。在\n\nserver_vad\n\n模式下，提交此事件无效。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\ninput_audio_buffer.clear\n\n。\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"event_1\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"input_audio_buffer.clear\"\n\n​\n\n}\n\n​\n\n​\n\n手动提交对话内容\n\n​\n\n事件类型\n\n：\n\nconversation.message.create\n\n​\n\n事件说明\n\n：若\n\nrole=user\n\n，提交事件后就会生成语音回复，适合如下的场景，比如帮我解析 xx 链接，帮我分析这个图片的内容等。若\n\nrole=assistant\n\n，提交事件后会加入到对话的上下文。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\nconversation.message.create\n\n。\n\n​\n\ndata\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件数据，包含对话内容的详细信息。\n\n​\n\ndata.role\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n发送这条消息的实体。取值：\n\nuser\n\n（代表该条消息内容是用户发送的）、\n\nassistant\n\n（代表该条消息内容是智能体发送的）。\n\n​\n\ndata.content_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n消息内容的类型，支持设置为：\n\n​\n\ntext\n\n：文本\n\n​\n\nobject_string\n\n：多模态内容，即文本和文件的组合、文本和图片的组合。\n\n​\n\ndata.content\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n消息的内容，支持纯文本、多模态（文本、图片、文件混合输入）、卡片等多种类型的内容。当 content_type 为\n\nobject_string\n\n时，content 的结构和详细参数说明请参见\n\n​\n\nobject_string object\n\n。\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"7446668538246561826\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"conversation.message.create\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"role\"\n\n:\n\n\"user\"\n\n,\n\n// user/assistant\n\n​\n\n\"content_type\"\n\n:\n\n\"object_string\"\n\n,\n\n// text/object_string\n\n​\n\n\"content\"\n\n:\n\n\"[{\\\"type\\\":\\\"text\\\",\\\"text\\\":\\\"帮我看看这个PDF里有什么内容？\\\"},{\\\"type\\\":\\\"file\\\",\\\"file_url\\\":\\\"<url id=\\\\\\\"cumqdq0onf4lro6iakgg\\\\\\\" type=\\\\\\\"url\\\\\\\" status=\\\\\\\"failed\\\\\\\" title=\\\\\\\"\\\\\\\" wc=\\\\\\\"0\\\\\\\">https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/eaafba63-0d96-4ea6-b60c-fbadcf2c25e9.?lk3s=edeb9e45&x-expires=1718296132&x-signature=YtlsUsvSeLJi6x31I%2F4S9X53Y6Y%3D</url> \\\"}]\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n清除上下文\n\n​\n\n事件类型\n\n：\n\nconversation.clear\n\n​\n\n事件说明\n\n：清除上下文，会在当前 conversation 下新增一个 section，服务端处理完后会返回\n\nconversation.cleared\n\n事件。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\nconversation.clear\n\n。\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"event_1\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"conversation.clear\"\n\n​\n\n}\n\n​\n\n​\n\n提交端插件执行结果\n\n​\n\n事件类型\n\n：\n\nconversation.chat.submit_tool_outputs\n\n​\n\n事件说明\n\n：你可以将需要客户端执行的操作定义为插件，对话中如果触发这个插件，会收到一个\n\nevent_type = \"conversation.chat.requires_action\"\n\n的下行事件，此时需要执行客户端的操作后，通过此上行事件来提交插件执行后的结果。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\nconversation.chat.submit_tool_outputs\n\n。\n\n​\n\ndata\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件数据，包含工具执行结果的详细信息。\n\n​\n\ndata.chat_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n对话的唯一标识。你可以在扣子编程智能语音对话下行的\n\nconversation.chat.requires_action\n\n事件，通过\n\ndata.id\n\n字段查看此 ID。\n\n​\n\ndata.tool_outputs\n\n​\n\nArray\n\n​\n\n必选\n\n​\n\n工具执行结果。\n\n​\n\ndata.tool_outputs[].tool_call_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n上报运行结果的 ID。你可以在扣子编程智能语音对话信令事件的\n\ntool_calls\n\n字段下查看此 ID。\n\n​\n\ndata.tool_outputs[].output\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n工具的执行结果。\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"744666853824656xxxx\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"conversation.chat.submit_tool_outputs\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"chat_id\"\n\n:\n\n\"74466752759xxxx\"\n\n,\n\n​\n\n\"tool_outputs\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"tool_call_id\"\n\n:\n\n\"BUJJRUUVEhJGERVeEkRDFV5HEkJAXktLQBZeEEAXREpLSxZFR****=\"\n\n,\n\n​\n\n\"output\"\n\n:\n\n\"{\\\"url\\\":\\\"<url id=\\\\\\\"cumqdq0onf4lro6iakh0\\\\\\\" type=\\\\\\\"url\\\\\\\" status=\\\\\\\"failed\\\\\\\" title=\\\\\\\"\\\\\\\" wc=\\\\\\\"0\\\\\\\">https://lf3-bot-platform-tos-sign.coze.cn/bot-studio-bot-platform/bot_files/323733792754xxx/image/jpeg/7446661351415529491/blob</url> ****\\\"}\"\n\n​\n\n}\n\n​\n\n]\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n打断智能体输出\n\n​\n\n事件类型\n\n：\n\nconversation.chat.cancel\n\n​\n\n事件说明\n\n：发送此事件可取消正在进行的对话，中断后，服务端将会返回\n\nconversation.chat.canceled\n\n事件。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n必填\n\nconversation.chat.cancel\n\n。\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"7446668538246561827\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"conversation.chat.cancel\"\n\n​\n\n}\n\n​\n\n​\n\n语音合成\n\n​\n\n事件类型\n\n：\n\ninput_text.generate_audio\n\n​\n\n事件说明\n\n：你可以主动提交一段文字用来做语音合成，提交的消息不会触发智能体的回复，只会合成音频内容下发到客户端。提交事件的时候如果智能体正在输出语音会被中断输出。适合在和智能体聊天过程中客户端长时间没有响应，智能体可以主动说话暖场的场景。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\ninput_text.generate_audio\n\n。\n\n​\n\ndata\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件数据。\n\n​\n\ndata.mode\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n消息内容的类型，支持设置为：\n\n​\n\ntext\n\n：文本\n\n​\n\ndata.text\n\n​\n\nstring\n\n​\n\n可选\n\n​\n\n当\n\nmode == text\n\n时候必填。长度限制 (0, 1024) 字节\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"744666853824656xxxx\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"input_text.generate_audio\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"mode\"\n\n:\n\n\"text\"\n\n,\n\n​\n\n\"text\"\n\n:\n\n\"亲，你怎么不说话了。\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n​\n\n上一篇\n\n双向流式语音对话\n\n下一篇\n\n双向流式对话下行事件",
        "links": [
          {
            "text": "系统音色列表",
            "href": "https://www.coze.cn/open/docs/dev_how_to_guides/sys_voice"
          },
          {
            "text": "查看声纹组列表",
            "href": "https://www.coze.cn/open/docs/developer_guides/list_voiceprint_group"
          }
        ]
      },
      "markdown": "- 事件类型 ： chat.update ​\n\n- 事件说明 ：此事件可以更新当前对话连接的配置项，若更新成功，会收到 chat.updated 的下行事件，否则，会收到 error 下行事件。 ​\n\n- 事件结构 ： ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | String​ | 必选​ | 固定为chat.update。​ |\n| data​ | Object​ | 可选​ | 事件数据，包含对话配置的详细信息。​ |\n| data.chat_config​ | Object​ | 可选​ | 对话配置。​ |\n| data.chat_config.meta_data​ | Map<String, String>​ | 可选​ | 附加信息，通常用于封装一些业务相关的字段。查看对话消息详情时，系统会透传此附加信息。自定义键值对，应指定为 Map 对象格式。长度为 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。​ |\n| data.chat_config.custom_variables​ | Map<String, String>​ | 可选​ | 智能体中定义的变量。在智能体 prompt 中设置变量 {{key}} 后，可以通过该参数传入变量值，同时支持 Jinja2 语法。详细说明可参考变量示例。变量名只支持英文字母和下划线。​ |\n| data.chat_config.extra_params​ | Map<String, String>​ | 可选​ | 附加参数，通常用于特殊场景下指定一些必要参数供模型判断，例如指定经纬度，并询问智能体此位置的天气。自定义键值对格式，其中键（key）仅支持设置为：​latitude（纬度，此时值（Value）为纬度值，例如 39.9800718）。​longitude（经度，此时值（Value）为经度值，例如 116.309314）。​ |\n| data.chat_config.user_id​ | String​ | 可选​ | 标识当前与智能体的用户，由使用方自行定义、生成与维护。user_id用于标识对话中的不同用户，不同的user_id，其对话的上下文消息、数据库等对话记忆数据互相隔离。如果不需要用户数据隔离，可将此参数固定为一个任意字符串，例如 123，abc 等。​ |\n| data.chat_config.conversation_id​ | String​ | 可选​ | 标识对话发生在哪一次会话中。会话是智能体和用户之间的一段问答交互。一个会话包含一条或多条消息。对话是会话中对智能体的一次调用，智能体会将对话中产生的消息添加到会话中。可以使用已创建的会话，会话中已存在的消息将作为上下文传递给模型。创建会话的方式可参考创建会话。对于一问一答等不需要区分 conversation 的场合可不传该参数，系统会自动生成一个会话。不传的话会默认创建一个新的 conversation。​ |\n| data.chat_config.auto_save_history​ | Boolean​ | 可选​ | 是否保存本次对话记录。​true：（默认）会话中保存本次对话记录，包括本次对话的模型回复结果、模型执行中间结果。​false：会话中不保存本次对话记录，后续也无法通过任何方式查看本次对话信息、消息详情。在同一个会话中再次发起对话时，本次会话也不会作为上下文传递给模型。​ |\n| data.chat_config.parameters​ | Map<String, any>​ | 可选​ | 设置对话流的自定义输入参数的值，具体用法和示例代码可参考​为自定义参数赋值。​对话流的输入参数 USER_INPUT 应在additional_messages中传入，在 parameters 中的 USER_INPUT 不生效。​如果parameters中未指定CONVERSATION_NAME或其他输入参数，则使用参数默认值运行对话流；如果指定了这些参数，则使用指定值。​ |\n| data.input_audio​ | Object​ | 可选​ | 输入音频格式。​ |\n| data.input_audio.format​ | String​ | 可选​ | 输入音频的格式，支持pcm、wav、ogg。默认为wav。​ |\n| data.input_audio.codec​ | String​ | 可选​ | 输入音频的编码，支持pcm、opus、g711a、g711u。默认为pcm。​如果音频编码格式为g711a或g711u，format请设置为pcm。​ |\n| data.input_audio.sample_rate​ | Integer​ | 可选​ | 输入音频的采样率，默认是 24000。支持 8000、16000、22050、24000、32000、44100、48000。​如果音频编码格式codec为g711a或g711u，音频采样率需设置为 8000。​ |\n| data.input_audio.channel​ | Integer​ | 可选​ | 输入音频的声道数，支持 1（单声道）、2（双声道）。默认是 1（单声道）。​ |\n| data.input_audio.bit_depth​ | Integer​ | 可选​ | 输入音频的位深，默认是 16，支持8、16和24。​ |\n| data.output_audio​ | Object​ | 可选​ | 输出音频格式。​ |\n| data.output_audio.codec​ | String​ | 可选​ | 输出音频编码，支持pcm、g711a、g711u、opus、mp3。默认是pcm。​说明当codec设置为pcm、g711a或g711u时，你可以通过pcm_config配置 PCM 音频参数。​​ |\n| data.output_audio.pcm_config​ | Object​ | 可选​ | 当codec设置为pcm、g711a或g711u时，用于配置 PCM 音频参数。​当codec设置为opus、mp3时，不需要设置此字段。​说明当codec设置为pcm时，返回的 PCM 数据将固定为单声道，采样深度为 16 位。​当codec设置为g711a或g711u时，返回的数据将是 8000kHz 采样率，单声道，采样深度为 8 位。​​ |\n| data.output_audio.pcm_config.sample_rate​ | Integer​ | 可选​ | 输出pcm音频的采样率，默认是 24000。支持 8000、16000、22050、24000、32000、44100、48000。​说明当codec设置为g711a或g711u时，sample_rate 自动设置为 8000，且不能更改。​​ |\n| data.output_audio.pcm_config.frame_size_ms​ | Float​ | 可选​ | 输出每个 pcm 包的时长，单位 ms，默认不限制。取值范围：0~1000。​ |\n| data.output_audio.pcm_config. limit_config​ | Object​ | 可选​ | 输出音频限流配置，默认不限制。​说明如需实现输出 PCM 音频限流，还需要配置​data.output_audio.pcm_config.frame_size_ms参数。​​ |\n| data.output_audio.pcm_config. limit_config.period​ | Integer​ | 可选​ | 周期的时长，单位为秒。例如设置为 10 秒，则以 10 秒作为一个周期。​ |\n| data.output_audio.pcm_config. limit_config.max_frame_num​ | Integer​ | 可选​ | 周期内，最大返回 pcm 包数量。​ |\n| data.output_audio.opus_config​ | Object​ | 可选​ | 当codec设置为pcm、mp3时，不需要设置此字段。​ |\n| data.output_audio.opus_config.sample_rate​ | Integer​ | 可选​ | 编码成opus时的 pcm 采样率，默认 24k。支持 8000、12000、16000、24000、48000。​ |\n| data.output_audio.opus_config.bitrate​ | Integer​ | 可选​ | 输出opus的码率，默认 48000。​ |\n| data.output_audio.opus_config.use_cbr​ | Boolean​ | 可选​ | 输出opus是否使用 CBR 编码，默认为false。​ |\n| data.output_audio.opus_config.frame_size_ms​ | Float​ | 可选​ | 输出opus的帧长，默认是 10。可选值：​2.5、5、10、20、40、60​ |\n| data.output_audio.opus_config.limit_config​ | Object​ | 可选​ | 输出音频限流配置，默认不限速。​ |\n| data.output_audio.opus_config.limit_config.period​ | Integer​ | 可选​ | 周期的时长，单位为秒。例如设置为 10 秒，则以 10 秒作为一个周期。​ |\n| data.output_audio.opus_config.limit_config.max_frame_num​ | Integer​ | 可选​ | 周期内最大返回的 Opus 帧数量。​ |\n| data.output_audio.mp3_config​ | Object​ | 可选​ | 当codec设置为mp3时，用于配置 mp3 音频参数。​当codec设置为opus、pcm、g711a、g711u时，不需要设置此字段。​ |\n| data.output_audio.mp3_config.sample_rate​ | Integer​ | 可选​ | 输出mp3音频的采样率，默认是 44100。支持 32000、44100、48000。​ |\n| data.output_audio.mp3_config.bit_rate​ | Integer​ | 可选​ | 输出mp3音频的码率，支持 8000~1600000。​ |\n| data.output_audio.speech_rate​ | Integer​ | 可选​ | 输出音频的语速，取值范围 [-50, 100]，默认为 0。-50 表示 0.5 倍速，100 表示 2 倍速。​ |\n| data.output_audio.loudness_rate​ | Integer​ | 可选​ | 输出音频的音量，取值范围 [-50, 100]，默认为 0。-50 表示 0.5 倍音量，100 表示 2 倍音量。​ |\n| data.output_audio.voice_id​ | String​ | 可选​ | 输出音频的音色 ID，默认是柔美女友音色。你可以调用​查看音色列表API 查看当前可用的所有音色 ID。​ |\n| data.output_audio.context_texts​ | String​ | 可选​ | 语音合成的辅助信息，用于控制合成语音的整体情绪（如悲伤、生气）、方言（如四川话、北京话）、语气（如撒娇、暧昧、吵架、夹子音）、语速（快慢）及音调（高低）等。默认为空。​示例：用低沉沙哑的语气、带着沧桑与绝望地说。​说明仅当voice_id为豆包语音合成大模型 2.0 音色时才支持该参数，具体音色列表请参见​系统音色列表。​更多关于豆包语音合成 2.0 的context_texts示例和效果可参考语音指令-示例库​​ |\n| data.output_audio.emotion_config​ | Object​ | 可选​ | 设置多情感音色的情感和情感值，仅当voice_id为多情感音色时才支持该配置。​ |\n| data.output_audio.emotion_config.emotion​ | String​ | 可选​ | 设置多情感音色的情感类型。不同音色支持的情感范围不同，可以通过系统音色列表查看各音色支持的情感。默认为空。枚举值如下：​happy-开心​sad-悲伤​angry-生气​surprised-惊讶​fear-恐惧​hate-厌恶​excited-激动​coldness-冷漠​neutral-中性​说明你需要在对话流开始节点的输入参数中增加_voice_emotion参数，用于向对话流传递多情感音色的情感类型配置。​​ |\n| data.output_audio.emotion_config.emotion_scale​ | Float​ | 可选​ | 情感值用于量化情感的强度。数值越高，情感表达越强烈，例如： “开心” 的情感值 5 比 1 更显兴奋。​取值范围：1.0~5.0，默认值：4.0。​ |\n| data.voice_processing_config​ | Object​ | 可选​ | 语音处理能力配置。​说明仅扣子企业旗舰版支持该配置。​​ |\n| data.voice_processing_config.enable_ans​ | Boolean​ | 可选​ | 主动噪声抑制。自动识别并过滤掉背景环境中的各种噪音（如键盘声、空调声、街道嘈杂声），让说话者的声音更清晰。​此功能与下面的enable_pdns（声纹降噪）只能二选一开启，不能同时使用。​ |\n| data.voice_processing_config.enable_pdns​ | Boolean​ | 可选​ | 声纹降噪。专门针对特定说话人的声音进行优化，能更精准地保留目标人声。​此功能与上面的enable_ans只能二选一开启，不能同时使用。​提供两种模式，你可以根据需要选择：​自动提取：设置简单，开箱即用。默认为该模式。降噪生效稍微有延迟，服务端需要先听你说一会儿话才能提取出你的声纹特征，在此期间降噪效果可能不佳。另外，提取声纹会受到用户说话场景影响，准确性上可能会弱于主动设置。​主动设置：降噪效果更精准、更快速，在对话开始时就立即生效。不过需要提前录制声纹并在voice_print_feature_id中设置声纹 ID。​ |\n| data.voice_processing_config.voice_print_feature_id​ | String​ | 可选​ | 目标说话人的声纹 ID。当你选择开启enable_pdns（声纹降噪）并希望使用主动设置模式时，需要在此处填入你提前录制好的声纹 ID。​你可以通过扣子编程录制声纹，具体请参见​声纹识别，或通过​创建声纹API 上传声纹并获取声纹 ID。​ |\n| data.event_subscriptions​ | Array<String>​ | 可选​ | 需要订阅下行事件的事件类型列表。不设置或者设置为空为订阅所有下行事件。​ |\n| data.need_play_prologue​ | Boolean​ | 可选​ | 是否需要播放开场白，默认为 false。​ |\n| data.prologue_content​ | String​ | 可选​ | 自定义开场白，need_play_prologue 设置为 true 时生效。如果不设定自定义开场白则使用智能体上设置的开场白。​ |\n| data.turn_detection​ | Object​ | 可选​ | 转检测配置。​ |\n| data.turn_detection.type​ | String​ | 可选​ | 语音检测类型，用于控制语音交互的检测方式，枚举值：​server_vad：自由对话模式，语音数据会传输到服务器端进行实时分析，服务器端的语音活动检测算法会判断用户是否在说话。​client_interrupt：（默认）按键说话模式，由客户端控制语音的开始与结束。​semantic_vad：采用语义判停的自由对话模式（此功能仅对企业旗舰版用户开放），由服务端识别语义来判断是否停止说话。​ |\n| data.turn_detection.prefix_padding_ms​ | Integer​ | 可选​ | server_vad模式下，VAD 检测到语音之前要包含的音频量，单位为 ms。默认为 600ms。​ |\n| data.turn_detection.silence_duration_ms​ | Integer​ | 可选​ | server_vad模式下，检测语音停止的静音持续时间，单位为 ms。默认为 500ms。​ |\n| data.turn_detection.semantic_vad_config​ | Object​ | 可选​ | semantic_vad模式下，配置判定语音停止的语义检测策略。​ |\n| data.turn_detection.semantic_vad_config.silence_threshold_ms​ | Integer​ | 可选​ | 当用户暂停说话时，持续静音多久后，触发语义判停检测。单位为 ms。默认为 300ms。​ |\n| data.turn_detection.semantic_vad_config.semantic_unfinished_wait_time_ms​ | Integer​ | 可选​ | 当语义检测判断该语句未结束时，持续静音多久后，扣子编程认定语音结束。单位为 ms。默认为 500ms。取值范围为 100~2000。​ |\n| data.turn_detection.interrupt_config​ | Object​ | 可选​ | server_vad模式下，配置语音对话的打断策略。​默认采用发声即打断模式，即在检测到语音输入时会中断智能体的输出。​ |\n| data.turn_detection.interrupt_config.mode​ | String​ | 可选​ | 配置通过关键词打断，包括:​keyword_contains模式下，说话内容包含关键词才会打断模型回复。例如关键词\"扣子\"，用户正在说“你好呀扣子......” / “扣子你好呀”，模型回复都会被打断。​keyword_prefix模式下，说话内容前缀匹配关键词才会打断模型回复。例如关键词\"扣子\"，用户正在说“扣子你好呀......”，模型回复就会被打断，而用户说“你好呀扣子......”，模型回复不会被打断。​详细配置方法请参见​通过关键词打断语音对话。​ |\n| data.turn_detection.interrupt_config.keywords​ | Array<String>​ | 可选​ | 打断的关键词配置，最多同时限制 5 个关键词，每个关键词限定长度在 6~24 个字节以内（2~8个汉字以内），不能有标点符号。​ |\n| data.asr_config​ | Object​ | 可选​ | 语音识别配置，包括热词和上下文信息，以便优化语音识别的准确性和相关性。​ |\n| data.asr_config.hot_words​ | Array<String>​ | 可选​ | 请输入热词列表，以便提升这些词汇的识别准确率。如果设置的热词数量超出以下数量限制，超出部分将自动截断。​data.asr_config.stream_mode为output_no_stream时：hot_words 支持 5000 tokens。​data.asr_config.stream_mode为bidirectional_stream时： hot_words 支持 100 tokens。​ |\n| data.asr_config.context​ | String​ | 可选​ | 请输入上下文信息。​最多输入 800 个 Tokens，超出部分将自动截断。​ |\n| data.asr_config.user_language​ | String​ | 可选​ | 用户说话的语种，默认为common支持中英文、上海话、闽南语，四川、陕西、粤语识别。仅在data.asr_config.stream_mode为output_no_stream时可以指定设置语种。当将其设置为下方特定键时，它可以识别指定语言。​英语：en-US​日语：ja-JP​印尼语：id-ID​西班牙语：es-MX​葡萄牙语：pt-BR​德语：de-DE​法语：fr-FR​韩语：ko-KR​菲律宾语：fil-PH​马来语：ms-MY​泰语：th-TH​阿拉伯语：ar-SA​例如，如果输入音频是德语，则此参数传入de-DE​ |\n| data.asr_config.enable_ddc​ | Boolean​ | 可选​ | 将语音转为文本时，是否启用语义顺滑。默认为true。​true：系统在进行语音处理时，会去掉识别结果中诸如 “啊”“嗯” 等语气词，使得输出的文本语义更加流畅自然，符合正常的语言表达习惯，尤其适用于对文本质量要求较高的场景，如正式的会议记录、新闻稿件生成等。​false：系统不会对识别结果中的语气词进行处理，识别结果会保留原始的语气词。​ |\n| data.asr_config.enable_itn​ | Boolean​ | 可选​ | 将语音转为文本时，是否开启文本规范化（ITN）处理，将识别结果转换为更符合书面表达习惯的格式以提升可读性。默认为true。​开启后，会将口语化数字转换为标准数字格式，示例：​将两点十五分转换为14:15。​将一百美元转换为$100。​ |\n| data.asr_config.enable_punc​ | Boolean​ | 可选​ | 将语音转为文本时，是否给文本加上标点符号。默认为true。​ |\n| data.asr_config.stream_mode​ | String​ | 可选​ | ASR 识别的模式。​output_no_stream：不会逐字返回语音识别结果，而是等整段语音结束后统一输出完整文本。异步语音消息场景中推荐使用该模式，会整合整句音频信息做上下文分析，减少实时截断导致的误差，提升准确率。​bidirectional_stream（默认值）：逐字的返回语音识别的结果。​ |\n| data.asr_config.enable_nostream​ | Boolean​ | 可选​ | 是否开启二次识别模式：​true：会实时返回逐字识别的文本；当一句话结束时，会结合整句音频进行上下文分析并重新识别，生成优化后的识别结果并返回。这种机制既能满足客户实时上屏的需求，又能确保最终结果的识别准确率。​false（默认值）：仅进行一次实时识别，逐字返回文本，不会在一句话结束时重新识别分句，可能存在一定的识别误差。​ |\n| data.asr_config.enable_emotion​ | Boolean​ | 可选​ | 识别说话人的情绪。仅在data.asr_config.stream_mode为output_no_stream时生效。默认为false。​支持的情绪标签包括：​angry：表示情绪为生气​happy：表示情绪为开心​neutral：表示情绪为平静或中性​sad：表示情绪为悲伤​surprise：表示情绪为惊讶​ |\n| data.asr_config.enable_gender​ | Boolean​ | 可选​ | 是否开启识别说话人的性别（male/female），仅在data.asr_config.stream_mode为output_no_stream时生效。默认为false。​说明你需要在对话流开始节点的输入参数中增加_voice_gender参数，以便对话流获取识别后的说话人性别。​​ |\n| data.asr_config.sensitive_words_filter​ | Object​ | 可选​ | 敏感词过滤功能，支持以下 3 种过滤方式：​过滤系统敏感词，并替换为*。​过滤自定义敏感词，并替换为空。​过滤自定义敏感词，并替换为*。​ |\n| data.asr_config.sensitive_words_filter.system_reserved_filter​ | Boolean​ | 可选​ | 是否过滤系统自带的敏感词，并将匹配到的敏感词替换为*。（系统自带敏感词主要包含一些限制级词汇）。默认为false。​ |\n| data.asr_config.sensitive_words_filter.filter_with_empty​ | Array<string>​ | 可选​ | 自定义需替换为空的敏感词列表。​ |\n| data.asr_config.sensitive_words_filter.filter_with_signed​ | Array<string>​ | 可选​ | 自定义需替换为*的敏感词列表。​ |\n| data.voice_print_config​ | Object<String>​ | 可选​ | 声纹识别配置。​ |\n| data.voice_print_config.group_id​ | String​ | 可选​ | 声纹组 ID。语音通话时，扣子编程会在该声纹组内进行查找匹配对应的声纹，当声纹匹配度高于score阈值，则认为是同一个人的声音。​你可以通过查看声纹组列表API 查看声纹组 ID。​ |\n| data.voice_print_config.score​ | Integer​ | 可选​ | 声纹匹配的命中阈值，即声音匹配度的最低标准。当声音匹配度达到或超过该阈值时，扣子编程才会认定声纹匹配成功。你可以根据应用的安全性要求进行自定义设置。如果匹配了多轮声纹，扣子编程会取相似度最高的一个。​取值范围：0~100，默认值：40。​ |\n| data.voice_print_config.reuse_voice_info​ | Boolean​ | 可选​ | 当本轮对话未命中任何声纹时，是否沿用历史声纹信息。​true：未命中声纹时，智能体将返回上一次命中的声纹。适用于连续对话场景，当收音不好等情况导致声纹没能正确被识别时，保障对话的连贯性。​false：（默认值）未命中声纹时，智能体返回空的声纹信息。​ |\n\n- latitude （纬度，此时值（Value）为纬度值，例如 39.9800718）。 ​\n\n- longitude （经度，此时值（Value）为经度值，例如 116.309314）。 ​\n\n- true ：（默认）会话中保存本次对话记录，包括本次对话的模型回复结果、模型执行中间结果。 ​\n\n- false ：会话中不保存本次对话记录，后续也无法通过任何方式查看本次对话信息、消息详情。在同一个会话中再次发起对话时，本次会话也不会作为上下文传递给模型。 ​\n\n- 对话流的输入参数 USER_INPUT 应在 additional_messages 中传入，在 parameters 中的 USER_INPUT 不生效。 ​\n\n- 如果 parameters 中未指定 CONVERSATION_NAME 或其他输入参数，则使用参数默认值运行对话流；如果指定了这些参数，则使用指定值。 ​\n\n- 当 codec 设置为 pcm 、 g711a 或 g711u 时，用于配置 PCM 音频参数。 ​\n\n- 当 codec 设置为 opus 、 mp3 时，不需要设置此字段。 ​\n\n- 当 codec 设置为 pcm 时，返回的 PCM 数据将固定为单声道，采样深度为 16 位。 ​\n\n- 当 codec 设置为 g711a 或 g711u 时，返回的数据将是 8000kHz 采样率，单声道，采样深度为 8 位。 ​\n\n- 当 codec 设置为 mp3 时，用于配置 mp3 音频参数。 ​\n\n- 当 codec 设置为 opus 、 pcm 、 g711a 、 g711u 时，不需要设置此字段。 ​\n\n- 仅当 voice_id 为豆包语音合成大模型 2.0 音色时才支持该参数，具体音色列表请参见 ​ 系统音色列表 。 ​\n\n- 更多关于豆包语音合成 2.0 的 context_texts 示例和效果可参考 语音指令-示例库 ​\n\n- happy-开心 ​\n\n- sad-悲伤 ​\n\n- angry-生气 ​\n\n- surprised-惊讶 ​\n\n- fear-恐惧 ​\n\n- hate-厌恶 ​\n\n- excited-激动 ​\n\n- coldness-冷漠 ​\n\n- neutral-中性 ​\n\n- 自动提取：设置简单，开箱即用。默认为该模式。 降噪生效稍微有延迟 ，服务端需要先听你说一会儿话才能提取出你的声纹特征，在此期间降噪效果可能不佳。另外，提取声纹会受到用户说话场景影响，准确性上可能会弱于主动设置。 ​\n\n- 主动设置： 降噪效果更精准、更快速 ，在对话开始时就立即生效。不过需要提前录制声纹并在 voice_print_feature_id 中设置声纹 ID。 ​\n\n- server_vad ：自由对话模式，语音数据会传输到服务器端进行实时分析，服务器端的语音活动检测算法会判断用户是否在说话。 ​\n\n- client_interrupt ：（默认）按键说话模式，由客户端控制语音的开始与结束。 ​\n\n- semantic_vad ：采用语义判停的自由对话模式（ 此功能仅对企业旗舰版用户开放 ），由服务端识别语义来判断是否停止说话。 ​\n\n- keyword_contains 模式下，说话内容 包含 关键词才会打断模型回复。例如关键词\"扣子\"，用户正在说“你好呀扣子......” / “扣子你好呀”，模型回复都会被打断。 ​\n\n- keyword_prefix 模式下，说话内容 前缀匹配 关键词才会打断模型回复。例如关键词\"扣子\"，用户正在说“扣子你好呀......”，模型回复就会被打断，而用户说“你好呀扣子......”，模型回复不会被打断。 ​\n\n- data.asr_config.stream_mode 为 output_no_stream 时：hot_words 支持 5000 tokens。 ​\n\n- data.asr_config.stream_mode 为 bidirectional_stream 时： hot_words 支持 100 tokens。 ​\n\n- 英语：en-US ​\n\n- 日语：ja-JP ​\n\n- 印尼语：id-ID ​\n\n- 西班牙语：es-MX ​\n\n- 葡萄牙语：pt-BR ​\n\n- 德语：de-DE ​\n\n- 法语：fr-FR ​\n\n- 韩语：ko-KR ​\n\n- 菲律宾语：fil-PH ​\n\n- 马来语：ms-MY ​\n\n- 泰语：th-TH ​\n\n- 阿拉伯语：ar-SA ​\n\n- true ：系统在进行语音处理时，会去掉识别结果中诸如 “啊”“嗯” 等语气词，使得输出的文本语义更加流畅自然，符合正常的语言表达习惯，尤其适用于对文本质量要求较高的场景，如正式的会议记录、新闻稿件生成等。 ​\n\n- false ：系统不会对识别结果中的语气词进行处理，识别结果会保留原始的语气词。 ​\n\n- 将 两点十五分 转换为 14:15 。 ​\n\n- 将 一百美元 转换为 $100 。 ​\n\n- output_no_stream ：不会逐字返回语音识别结果，而是等整段语音结束后统一输出完整文本。异步语音消息场景中推荐使用该模式，会整合整句音频信息做上下文分析，减少实时截断导致的误差，提升准确率。 ​\n\n- bidirectional_stream （默认值）：逐字的返回语音识别的结果。 ​\n\n- true ：会实时返回逐字识别的文本；当一句话结束时，会结合整句音频进行上下文分析并重新识别，生成优化后的识别结果并返回。这种机制既能满足客户实时上屏的需求，又能确保最终结果的识别准确率。 ​\n\n- false （默认值）：仅进行一次实时识别，逐字返回文本，不会在一句话结束时重新识别分句，可能存在一定的识别误差。 ​\n\n- angry ：表示情绪为生气 ​\n\n- happy ：表示情绪为开心 ​\n\n- neutral ：表示情绪为平静或中性 ​\n\n- sad ：表示情绪为悲伤 ​\n\n- surprise ：表示情绪为惊讶 ​\n\n- 过滤系统敏感词，并替换为 * 。 ​\n\n- 过滤自定义敏感词，并替换为空。 ​\n\n- 过滤自定义敏感词，并替换为 * 。 ​\n\n- true ：未命中声纹时，智能体将返回上一次命中的声纹。适用于连续对话场景，当收音不好等情况导致声纹没能正确被识别时，保障对话的连贯性。 ​\n\n- false ：（默认值）未命中声纹时，智能体返回空的声纹信息。 ​\n\n- 事件示例 ： ​\n\n- 事件类型 ： input_audio_buffer.append ​\n\n- 事件说明 ：流式向服务端提交音频的片段。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ String ​ 必选 ​ 客户端自行生成的事件 ID，方便定位问题。 ​ event_type ​ String ​ 必选 ​ 固定为 input_audio_buffer.append 。 ​ data ​ Object ​ 必选 ​ 事件数据，包含音频片段信息。 ​ data.delta ​ String ​ 必选 ​ base64 编码后的音频片段。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | String​ | 必选​ | 固定为input_audio_buffer.append。​ |\n| data​ | Object​ | 必选​ | 事件数据，包含音频片段信息。​ |\n| data.delta​ | String​ | 必选​ | base64 编码后的音频片段。​ |\n\n- 事件示例 ： ​\n\n- 事件类型 ： input_audio_buffer.complete ​\n\n- 事件说明 ：客户端发送 input_audio_buffer.complete 事件来告诉服务端提交音频缓冲区的数据。服务端提交成功后会返回 input_audio_buffer.completed 事件。在 server_vad 模式下，提交此事件无效。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ String ​ 必选 ​ 客户端自行生成的事件 ID，方便定位问题。 ​ event_type ​ String ​ 必选 ​ 固定为 input_audio_buffer.complete 。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | String​ | 必选​ | 固定为input_audio_buffer.complete。​ |\n\n- 事件示例 ： ​\n\n- 事件类型 ： input_audio_buffer.clear ​\n\n- 事件说明 ：客户端发送 input_audio_buffer.clear 事件来告诉服务端清除缓冲区的音频数据。服务端清除完后将返回 input_audio_buffer.cleared 事件。在 server_vad 模式下，提交此事件无效。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ String ​ 必选 ​ 客户端自行生成的事件 ID，方便定位问题。 ​ event_type ​ String ​ 必选 ​ 固定为 input_audio_buffer.clear 。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | String​ | 必选​ | 固定为input_audio_buffer.clear。​ |\n\n- 事件示例 ： ​\n\n- 事件类型 ： conversation.message.create ​\n\n- 事件说明 ：若 role=user ，提交事件后就会生成语音回复，适合如下的场景，比如帮我解析 xx 链接，帮我分析这个图片的内容等。若 role=assistant ，提交事件后会加入到对话的上下文。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ String ​ 必选 ​ 客户端自行生成的事件 ID，方便定位问题。 ​ event_type ​ String ​ 必选 ​ 固定为 conversation.message.create 。 ​ data ​ Object ​ 必选 ​ 事件数据，包含对话内容的详细信息。 ​ data.role ​ String ​ 必选 ​ 发送这条消息的实体。取值： user （代表该条消息内容是用户发送的）、 assistant （代表该条消息内容是智能体发送的）。 ​ data.content_type ​ String ​ 必选 ​ 消息内容的类型，支持设置为： ​ text ：文本 ​ object_string ：多模态内容，即文本和文件的组合、文本和图片的组合。 ​ data.content ​ String ​ 必选 ​ 消息的内容，支持纯文本、多模态（文本、图片、文件混合输入）、卡片等多种类型的内容。当 content_type 为 object_string 时，content 的结构和详细参数说明请参见 ​ object_string object 。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | String​ | 必选​ | 固定为conversation.message.create。​ |\n| data​ | Object​ | 必选​ | 事件数据，包含对话内容的详细信息。​ |\n| data.role​ | String​ | 必选​ | 发送这条消息的实体。取值：user（代表该条消息内容是用户发送的）、assistant（代表该条消息内容是智能体发送的）。​ |\n| data.content_type​ | String​ | 必选​ | 消息内容的类型，支持设置为：​text：文本​object_string：多模态内容，即文本和文件的组合、文本和图片的组合。​ |\n| data.content​ | String​ | 必选​ | 消息的内容，支持纯文本、多模态（文本、图片、文件混合输入）、卡片等多种类型的内容。当 content_type 为object_string时，content 的结构和详细参数说明请参见​object_string object。​ |\n\n- text ：文本 ​\n\n- object_string ：多模态内容，即文本和文件的组合、文本和图片的组合。 ​\n\n- 事件示例 ： ​\n\n- 事件类型 ： conversation.clear ​\n\n- 事件说明 ：清除上下文，会在当前 conversation 下新增一个 section，服务端处理完后会返回 conversation.cleared 事件。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ String ​ 必选 ​ 客户端自行生成的事件 ID，方便定位问题。 ​ event_type ​ String ​ 必选 ​ 固定为 conversation.clear 。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | String​ | 必选​ | 固定为conversation.clear。​ |\n\n- 事件示例 ： ​\n\n- ​ JSON 复制 { ​ \"id\" : \"event_1\" , ​ \"event_type\" : \"conversation.clear\" ​ } ​ ​\n\n- 事件类型 ： conversation.chat.submit_tool_outputs ​\n\n- 事件说明 ：你可以将需要客户端执行的操作定义为插件，对话中如果触发这个插件，会收到一个 event_type = \"conversation.chat.requires_action\" 的下行事件，此时需要执行客户端的操作后，通过此上行事件来提交插件执行后的结果。 ​\n\n- 事件结构 ： ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | String​ | 必选​ | 固定为conversation.chat.submit_tool_outputs。​ |\n| data​ | Object​ | 必选​ | 事件数据，包含工具执行结果的详细信息。​ |\n| data.chat_id​ | String​ | 必选​ | 对话的唯一标识。你可以在扣子编程智能语音对话下行的conversation.chat.requires_action事件，通过data.id字段查看此 ID。​ |\n| data.tool_outputs​ | Array​ | 必选​ | 工具执行结果。​ |\n| data.tool_outputs[].tool_call_id​ | String​ | 必选​ | 上报运行结果的 ID。你可以在扣子编程智能语音对话信令事件的tool_calls字段下查看此 ID。​ |\n| data.tool_outputs[].output​ | String​ | 必选​ | 工具的执行结果。​ |\n\n- 事件示例 ： ​\n\n- 事件类型 ： conversation.chat.cancel ​\n\n- 事件说明 ：发送此事件可取消正在进行的对话，中断后，服务端将会返回 conversation.chat.canceled 事件。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ String ​ 必选 ​ 客户端自行生成的事件 ID，方便定位问题。 ​ event_type ​ String ​ 必选 ​ 必填 conversation.chat.cancel 。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | String​ | 必选​ | 必填conversation.chat.cancel。​ |\n\n- 事件示例 ： ​\n\n- ​ JSON 复制 { ​ \"id\" : \"7446668538246561827\" , ​ \"event_type\" : \"conversation.chat.cancel\" ​ } ​ ​\n\n- 事件类型 ： input_text.generate_audio ​\n\n- 事件说明 ：你可以主动提交一段文字用来做语音合成，提交的消息不会触发智能体的回复，只会合成音频内容下发到客户端。提交事件的时候如果智能体正在输出语音会被中断输出。适合在和智能体聊天过程中客户端长时间没有响应，智能体可以主动说话暖场的场景。 ​\n\n- 事件结构 ： ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | String​ | 必选​ | 固定为input_text.generate_audio。​ |\n| data​ | Object​ | 必选​ | 事件数据。​ |\n| data.mode​ | String​ | 必选​ | 消息内容的类型，支持设置为：​text：文本​ |\n| data.text​ | string​ | 可选​ | 当mode == text时候必填。长度限制 (0, 1024) 字节​ |\n\n- text ：文本 ​\n\n- 事件示例 ： ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/streaming_chat_downlink_event",
      "title": "双向流式对话下行事件",
      "content": {
        "sections": [],
        "full_text": "双向流式对话下行事件\n\n本文介绍扣子 WebSocket 双向流式对话事件中的下行事件。\n\n​\n\n对话连接成功\n\n​\n\n事件类型\n\n：\n\nchat.created\n\n​\n\n事件说明\n\n：流式对话接口成功建立连接后服务端会发送此事件。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n服务端生成的唯一 ID。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\nchat.created\n\n。\n\n​\n\ndetail\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件详情。\n\n​\n\ndetail.logid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。\n\n​\n\n​\n\n事件示例：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"id\": \"7446668538246561xxxx\",\n\n​\n\n\"event_type\": \"chat.created\",\n\n​\n\n\"detail\": {\n\n​\n\n\"logid\": \"20241210152726467C48D89D6DB2F3***\"    }\n\n​\n\n}\n\n​\n\n​\n\n对话配置成功\n\n​\n\n事件类型\n\n：\n\nchat.updated\n\n​\n\n事件说明\n\n：对话配置更新成功后，会返回最新的配置。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n客户端自行生成的事件 ID，方便定位问题。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n固定为\n\nchat.updated\n\n。\n\n​\n\ndata\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件数据，包含对话配置的详细信息。\n\n​\n\ndata.chat_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n对话配置。\n\n​\n\ndata.chat_config.meta_data\n\n​\n\nMap<String, String>\n\n​\n\n可选\n\n​\n\n附加信息，通常用于封装一些业务相关的字段。查看对话消息详情时，系统会透传此附加信息。自定义键值对，应指定为 Map 对象格式。长度为 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。\n\n​\n\ndata.chat_config.custom_variables\n\n​\n\nMap<String, String>\n\n​\n\n可选\n\n​\n\n智能体中定义的变量。在智能体 prompt 中设置变量 {{key}} 后，可以通过该参数传入变量值，同时支持 Jinja2 语法。详细说明可参考变量示例。变量名只支持英文字母和下划线。\n\n​\n\ndata.chat_config.extra_params\n\n​\n\nMap<String, String>\n\n​\n\n可选\n\n​\n\n附加参数，通常用于特殊场景下指定一些必要参数供模型判断，例如指定经纬度，并询问智能体此位置的天气。自定义键值对格式，其中键（key）仅支持设置为：\n\nlatitude\n\n（纬度，此时值（Value）为纬度值，例如 39.9800718）、\n\nlongitude\n\n（经度，此时值（Value）为经度值，例如 116.309314）。\n\n​\n\ndata.chat_config.user_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n标识当前与智能体的用户，由使用方自行定义、生成与维护。\n\nuser_id\n\n用于标识对话中的不同用户，不同的\n\nuser_id\n\n，其对话的上下文消息、数据库等对话记忆数据互相隔离。如果不需要用户数据隔离，可将此参数固定为一个任意字符串，例如 123，abc 等。\n\n​\n\ndata.chat_config.conversation_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n标识对话发生在哪一次会话中。会话是智能体和用户之间的一段问答交互。一个会话包含一条或多条消息。对话是会话中对智能体的一次调用，智能体会将对话中产生的消息添加到会话中。可以使用已创建的会话，会话中已存在的消息将作为上下文传递给模型。创建会话的方式可参考创建会话。对于一问一答等不需要区分 conversation 的场合可不传该参数，系统会自动生成一个会话。不传的话会默认创建一个新的 conversation。\n\n​\n\ndata.chat_config.auto_save_history\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n是否保存本次对话记录。\n\n​\n\ntrue\n\n：（默认）会话中保存本次对话记录，包括本次对话的模型回复结果、模型执行中间结果。\n\n​\n\nfalse\n\n：会话中不保存本次对话记录，后续也无法通过任何方式查看本次对话信息、消息详情。在同一个会话中再次发起对话时，本次会话也不会作为上下文传递给模型。\n\n​\n\ndata.chat_config.parameters\n\n​\n\nMap<String, any>\n\n​\n\n可选\n\n​\n\n设置对话流的输入参数。\n\n​\n\n对话流的输入参数 USER_INPUT 应在 additional_messages 中传入，在 parameters 中的 USER_INPUT 不生效。\n\n​\n\n如果 parameters 中未指定 CONVERSATION_NAME 或其他输入参数，则使用参数默认值运行对话流；如果指定了这些参数，则使用指定值。\n\n​\n\ndata.input_audio\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n输入音频格式。\n\n​\n\ndata.input_audio.format\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n输入音频的格式，支持\n\npcm\n\n、\n\nwav\n\n、\n\nogg\n\n。默认为\n\nwav\n\n。\n\n​\n\ndata.input_audio.codec\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n输入音频的编码，支持\n\npcm\n\n、\n\nopus\n\n。默认为\n\npcm\n\n。\n\n​\n\ndata.input_audio.sample_rate\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\n输入音频的采样率，默认 24000。\n\n​\n\ndata.input_audio.channel\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\n输入音频的声道数，默认是 1（单声道）。\n\n​\n\ndata.input_audio.bit_depth\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\n输入音频的位深，默认是 16。\n\n​\n\ndata.output_audio\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n输出音频格式。\n\n​\n\ndata.output_audio.codec\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n输出音频编码，支持\n\npcm\n\n、\n\ng711a\n\n、\n\ng711u\n\n、\n\nopus\n\n、\n\nmp3\n\n。默认是\n\npcm\n\n。\n\n​\n\ndata.output_audio.pcm_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n当\n\ncodec\n\n设置为\n\nopus\n\n时，不需要设置此字段。\n\n​\n\ndata.output_audio.pcm_config.sample_rate\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n输出\n\npcm\n\n音频的采样率，默认 24000。\n\n​\n\ndata.output_audio.pcm_config.frame_size_ms\n\n​\n\nFloat\n\n​\n\n可选\n\n​\n\n输出每个 pcm 包的时长，单位 ms，默认不限制。\n\n​\n\ndata.output_audio.pcm_config.limit_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n输出音频限流配置，默认不限制。\n\n​\n\ndata.output_audio.pcm_config.limit_config.period\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n周期的时长，单位为秒。例如设置为 10 秒，则以 10 秒作为一个周期。\n\n​\n\ndata.output_audio.pcm_config.limit_config.max_frame_num\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n周期内，最大返回 pcm 包数量。\n\n​\n\ndata.output_audio.opus_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n当\n\ncodec\n\n设置为\n\npcm\n\n时，不需要设置此字段。\n\n​\n\ndata.output_audio.opus_config.bitrate\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n输出\n\nopus\n\n的码率，默认 48000。\n\n​\n\ndata.output_audio.opus_config.use_cbr\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n输出\n\nopus\n\n是否使用 CBR 编码，默认为\n\nfalse\n\n。\n\n​\n\ndata.output_audio.opus_config.frame_size_ms\n\n​\n\nFloat\n\n​\n\n可选\n\n​\n\n输出\n\nopus\n\n的帧长，默认是 10。\n\n​\n\ndata.output_audio.opus_config.limit_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n输出音频限流配置。\n\n​\n\ndata.output_audio.opus_config.limit_config.period\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n周期的时长，单位为秒。例如设置为 10 秒，则以 10 秒作为一个周期。\n\n​\n\ndata.output_audio.opus_config.limit_config.max_frame_num\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n周期内最大返回的 Opus 帧数量。\n\n​\n\ndata.output_audio.mp3_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n当\n\ncodec\n\n设置为\n\nmp3\n\n时，用于配置 mp3 音频参数。\n\n​\n\n当\n\ncodec\n\n设置为\n\nopus\n\n、\n\npcm\n\n、\n\ng711a\n\n、\n\ng711u\n\n时，不需要设置此字段。\n\n​\n\ndata.output_audio.mp3_config.sample_rate\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n输出\n\nmp3\n\n音频的采样率，默认是 44100。支持 32000，44100，48000。\n\n​\n\ndata.output_audio.mp3_config.bit_rate\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n输出\n\nmp3\n\n音频的码率，支持 8000~1600000。\n\n​\n\ndata.output_audio.loudness_rate\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n输出音频的音量，取值范围 [-50, 100]，默认为 0。-50 表示 0.5 倍音量，100 表示 2 倍音量。\n\n​\n\ndata.output_audio.speech_rate\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\n输出音频的语速，取值范围 [-50, 100]，默认为 0。-50 表示 0.5 倍速，100 表示 2 倍速。\n\n​\n\ndata.output_audio.voice_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n输出音频的音色 ID。\n\n​\n\ndata.output_audio.emotion_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n设置多情感音色的情感和情感值，仅当\n\nvoice_id\n\n为多情感音色时才支持该配置。\n\n​\n\ndata.output_audio.emotion_config.emotion\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n设置多情感音色的情感类型。不同音色支持的情感范围不同，可以通过\n\n系统音色列表\n\n查看各音色支持的情感。默认为空。枚举值如下：\n\n​\n\nhappy-开心\n\n​\n\nsad-悲伤\n\n​\n\nangry-生气\n\n​\n\nsurprised-惊讶\n\n​\n\nfear-恐惧\n\n​\n\nhate-厌恶\n\n​\n\nexcited-激动\n\n​\n\ncoldness-冷漠\n\n​\n\nneutral-中性\n\n​\n\ndata.output_audio.emotion_config.emotion_scale\n\n​\n\nFloat\n\n​\n\n可选\n\n​\n\n情感值用于量化情感的强度。数值越高，情感表达越强烈，例如： “开心” 的情感值 5 比 1 更显兴奋。\n\n​\n\n取值范围：1.0~5.0，默认值：4.0。\n\n​\n\ndata.voice_processing_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n语音处理能力配置。\n\n​\n\n说明\n\n仅扣子企业旗舰版支持该配置。\n\n​\n\ndata.voice_processing_config.enable_ans\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n主动噪声抑制。自动识别并过滤掉背景环境中的各种噪音（如键盘声、空调声、街道嘈杂声），让说话者的声音更清晰。\n\n​\n\n此功能与下面的\n\nenable_pdns\n\n（声纹降噪）只能\n\n二选一开启\n\n，不能同时使用。\n\n​\n\ndata.voice_processing_config.enable_pdns\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n声纹降噪。专门针对\n\n特定说话人\n\n的声音进行优化，能更精准地保留目标人声。\n\n​\n\n此功能与上面的\n\nenable_ans\n\n只能\n\n二选一开启\n\n，不能同时使用。\n\n​\n\n提供两种模式：\n\n​\n\n自动提取：设置简单，开箱即用。默认为该模式。\n\n降噪生效稍微有延迟\n\n，服务端需要先听你说一会儿话才能提取出你的声纹特征，在此期间降噪效果可能不佳。另外，提取声纹会受到用户说话场景影响，准确性上可能会弱于主动设置。\n\n​\n\n主动设置：\n\n降噪效果更精准、更快速\n\n，在对话开始时就立即生效。不过需要提前录制声纹并在\n\nvoice_print_feature_id\n\n中设置声纹 ID。\n\n​\n\ndata.voice_processing_config.voice_print_feature_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n目标说话人的声纹 ID。当你选择开启\n\nenable_pdns\n\n（声纹降噪）并希望使用\n\n主动设置\n\n模式时，需要在此处填入你提前录制好的声纹 ID。\n\n​\n\ndata.turn_detection\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n转检测配置。\n\n​\n\ndata.turn_detection.type\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n语音检测类型，用于控制语音交互的检测方式，枚举值：\n\n​\n\nserver_vad\n\n：自由对话模式，语音数据会传输到服务器端进行实时分析，服务器端的语音活动检测算法会判断用户是否在说话。\n\n​\n\nclient_interrupt\n\n：（默认）按键说话模式，由客户端控制语音的开始与结束。\n\n​\n\nsemantic_vad\n\n：采用语义判停的自由对话模式（\n\n此功能仅对企业旗舰版用户开放\n\n），由服务端识别说话人的说话的语义判断是否停止说话。\n\n​\n\ndata.turn_detection.prefix_padding_ms\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\nserver_vad\n\n模式下，VAD 检测到语音之前要包含的音频量，单位为 ms。默认为 600ms。\n\n​\n\ndata.turn_detection.silence_duration_ms\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\nserver_vad\n\n模式下，检测语音停止的静音持续时间，单位为 ms。默认为 500ms。\n\n​\n\ndata.turn_detection.semantic_vad_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\nsemantic_vad\n\n模式下，配置判定语音停止的语义检测策略。\n\n​\n\ndata.turn_detection.semantic_vad_config.silence_threshold_ms\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n当用户暂停说话时，持续静音多久后，触发语义判停检测。单位为 ms。默认为 300ms。\n\n​\n\ndata.turn_detection.semantic_vad_config.semantic_unfinished_wait_time_ms\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n当语义检测判断该语句未结束时，持续静音多久后，扣子认定语音结束。单位为 ms。默认为 500ms。\n\n​\n\ndata.turn_detection.interrupt_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\nserver_vad\n\n模式下，配置语音对话的打断策略。\n\n​\n\n默认采用发声即打断模式，即在检测到语音输入时会中断智能体的输出。\n\n​\n\ndata.turn_detection.interrupt_config.mode\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n配置通过关键词打断，包括:\n\n​\n\nkeyword_contains\n\n模式下，说话内容\n\n包含\n\n关键词才会打断模型回复。例如关键词\"扣子\"，用户正在说“你好呀扣子......” / “扣子你好呀”，模型回复都会被打断。\n\n​\n\nkeyword_prefix\n\n模式下，说话内容\n\n前缀匹配\n\n关键词才会打断模型回复。例如关键词\"扣子\"，用户正在说“扣子你好呀......”，模型回复就会被打断，而用户说“你好呀扣子......”，模型回复不会被打断。\n\n​\n\n详细配置方法请参见\n\n​\n\n通过关键词打断语音对话\n\n。\n\n​\n\ndata.turn_detection.interrupt_config.keywords\n\n​\n\nArray<String>\n\n​\n\n可选\n\n​\n\n打断的关键词配置，最多同时限制 5 个关键词，每个关键词限定长度在 6~24 个字节以内（2~8个汉字以内），不能有标点符号。\n\n​\n\ndata.asr_config\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n语音识别配置，包括热词和上下文信息，以便优化语音识别的准确性和相关性。\n\n​\n\ndata.asr_config.hot_words\n\n​\n\nArray<String>\n\n​\n\n可选\n\n​\n\n请输入热词列表，以便提升这些词汇的识别准确率。如果设置的热词数量超出以下数量限制，超出部分将自动截断。\n\n​\n\ndata.asr_config.stream_mode\n\n为\n\noutput_no_stream\n\n时：hot_words 支持 5000 tokens。\n\n​\n\ndata.asr_config.stream_mode\n\n为\n\nbidirectional_stream\n\n时： hot_words 支持 100 tokens。\n\n​\n\ndata.asr_config.context\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n请输入上下文信息。\n\n​\n\n最多输入 800 个 Tokens，超出部分将自动截断。\n\n​\n\ndata.asr_config.user_language\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n用户说话的语种，默认为\n\ncommon\n\n。选项包括：\n\n​\n\ncommon：大模型语音识别，支持中英文、上海话、闽南语，四川、陕西、粤语识别。\n\n​\n\n英语：en-US\n\n​\n\n日语：ja-JP\n\n​\n\n印尼语：id-ID\n\n​\n\n西班牙语：es-MX\n\n​\n\n葡萄牙语：pt-BR\n\n​\n\n德语：de-DE\n\n​\n\n法语：fr-FR\n\n​\n\n韩语：ko-KR\n\n​\n\n菲律宾语：fil-PH\n\n​\n\n马来语：ms-MY\n\n​\n\n泰语：th-TH\n\n​\n\n阿拉伯语：ar-SA\n\n​\n\ndata.asr_config.enable_ddc\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n将语音转为文本时，是否启用语义顺滑。默认为\n\ntrue\n\n。\n\n​\n\ntrue\n\n：系统在进行语音处理时，会去掉识别结果中诸如 “啊”“嗯” 等语气词，使得输出的文本语义更加流畅自然，符合正常的语言表达习惯，尤其适用于对文本质量要求较高的场景，如正式的会议记录、新闻稿件生成等。\n\n​\n\nfalse\n\n：系统不会对识别结果中的语气词进行处理，识别结果会保留原始的语气词。\n\n​\n\ndata.asr_config.enable_itn\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n将语音转为文本时，是否开启文本规范化（ITN）处理，将识别结果转换为更符合书面表达习惯的格式以提升可读性。默认为\n\ntrue\n\n。\n\n​\n\n开启后，会将口语化数字转换为标准数字格式，示例：\n\n​\n\n将\n\n两点十五分\n\n转换为\n\n14:15\n\n。\n\n​\n\n将\n\n一百美元\n\n转换为\n\n$100\n\n。\n\n​\n\ndata.asr_config.enable_punc\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n将语音转为文本时，是否给文本加上标点符号。默认为\n\ntrue\n\n。\n\n​\n\ndata.asr_config.stream_mode\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nASR 识别的模式。\n\n​\n\noutput_no_stream\n\n：不会逐字返回语音识别结果，而是等整段语音结束后统一输出完整文本。异步语音消息场景中推荐使用该模式，会整合整句音频信息做上下文分析，减少实时截断导致的误差，提升准确率。\n\n​\n\nbidirectional_stream\n\n（默认值）：逐字的返回语音识别的结果。\n\n​\n\ndata.asr_config.enable_nostream\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n是否开启\n\n二次识别模式\n\n：\n\n​\n\ntrue\n\n：会实时返回逐字识别的文本；当一句话结束时，会结合整句音频进行上下文分析并重新识别，生成优化后的识别结果并返回。这种机制既能满足客户实时上屏的需求，又能确保最终结果的识别准确率。\n\n​\n\nfalse\n\n（默认值）：仅进行一次实时识别，逐字返回文本，不会在一句话结束时重新识别分句，可能存在一定的识别误差。\n\n​\n\ndata.asr_config.enable_emotion\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n识别说话人的情绪。仅在\n\ndata.asr_config.stream_mode\n\n为\n\noutput_no_stream\n\n时生效。默认为\n\nfalse\n\n。\n\n​\n\n支持的情绪标签包括：\n\n​\n\nangry\n\n：表示情绪为生气\n\n​\n\nhappy\n\n：表示情绪为开心\n\n​\n\nneutral\n\n：表示情绪为平静或中性\n\n​\n\nsad\n\n：表示情绪为悲伤\n\n​\n\nsurprise\n\n：表示情绪为惊讶\n\n​\n\ndata.asr_config.enable_gender\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n是否开启识别说话人的性别（male/female），仅在\n\ndata.asr_config.stream_mode\n\n为\n\noutput_no_stream\n\n时生效。默认为\n\nfalse\n\n。\n\n​\n\ndata.asr_config.sensitive_words_filter\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n敏感词过滤功能，支持以下 3 种过滤方式：\n\n​\n\n过滤系统敏感词，并替换为\n\n*\n\n。\n\n​\n\n过滤自定义敏感词，并替换为空。\n\n​\n\n过滤自定义敏感词，并替换为\n\n*\n\n。\n\n​\n\ndata.asr_config.sensitive_words_filter.system_reserved_filter\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n是否过滤系统自带的敏感词，并将匹配到的敏感词替换为\n\n*\n\n。（系统自带敏感词主要包含一些限制级词汇）。默认为\n\nfalse\n\n。\n\n​\n\ndata.asr_config.sensitive_words_filter.filter_with_empty\n\n​\n\nArray<string>\n\n​\n\n可选\n\n​\n\n自定义需替换为空的敏感词列表。\n\n​\n\ndata.asr_config.sensitive_words_filter.filter_with_signed\n\n​\n\nArray<string>\n\n​\n\n可选\n\n​\n\n自定义需替换为\n\n*\n\n的敏感词列表。\n\n​\n\ndata.voice_print_config\n\n​\n\nObject<String>\n\n​\n\n可选\n\n​\n\n声纹识别配置。\n\n​\n\ndata.voice_print_config.group_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n声纹组 ID。语音通话时，扣子会在该声纹组内进行查找匹配对应的声纹，当声纹匹配度高于\n\nscore\n\n阈值，则认为是同一个人的声音。\n\n​\n\ndata.voice_print_config.score\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n声纹匹配的命中阈值，即声音匹配度的最低标准。当声音匹配度达到或超过该阈值时，扣子才会认定声纹匹配成功。你可以根据应用的安全性要求进行自定义设置。如果匹配了多轮声纹，扣子会取相似度最高的一个。\n\n​\n\n取值范围：0~100，默认值：40。\n\n​\n\ndata.voice_print_config.reuse_voice_info\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n当本轮对话未命中任何声纹时，是否沿用历史声纹信息。\n\n​\n\ntrue\n\n：未命中声纹时，智能体将返回上一次命中的声纹。适用于连续对话场景，当收音不好等情况导致声纹没能正确被识别时，保障对话的连贯性。\n\n​\n\nfalse\n\n：（默认值）未命中声纹时，智能体返回空的声纹信息。\n\n​\n\ndetail\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n事件详情。\n\n​\n\ndetail.logid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n对话开始\n\n​\n\n事件类型\n\n：\n\nconversation.chat.created\n\n​\n\n事件说明\n\n：创建对话的事件，表示对话开始。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n对话正在处理\n\n​\n\n事件类型\n\n：\n\nconversation.chat.in_progress\n\n​\n\n事件说明\n\n：服务端正在处理对话。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n增量消息\n\n​\n\n事件类型\n\n：\n\nconversation.message.delta\n\n​\n\n事件说明\n\n：增量消息，通常是\n\ntype=answer\n\n时的增量消息。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n增量语音字幕\n\n​\n\n事件类型：\n\nconversation.audio.sentence_start\n\n​\n\n事件说明\n\n：一条新的字幕句子，后续的\n\nconversation.audio.delta\n\n增量语音均属于当前字幕句子，可能有多个增量语音共同对应此句字幕的文字内容。\n\n​\n\n事件结构：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n增量语音\n\n​\n\n事件类型\n\n：\n\nconversation.audio.delta\n\n​\n\n事件说明\n\n：增量语音，通常是\n\ntype=answer\n\n时的增量语音。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n消息完成\n\n​\n\n事件类型\n\n：\n\nconversation.message.completed\n\n​\n\n事件说明\n\n：消息已回复完成。此时事件中带有所有\n\nmessage.delta\n\n的拼接结果，且每个消息均为\n\ncompleted\n\n状态。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n语音回复完成\n\n​\n\n事件类型\n\n：\n\nconversation.audio.completed\n\n​\n\n事件说明\n\n：音频回复完成。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n对话完成\n\n​\n\n事件类型\n\n：\n\nconversation.chat.completed\n\n​\n\n事件说明\n\n：表示对话已完成。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n对话失败\n\n​\n\n事件类型\n\n：\n\nconversation.chat.failed\n\n​\n\n事件说明\n\n：此事件用于标识对话失败。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n发生错误\n\n​\n\n事件类型\n\n：\n\nerror\n\n​\n\n事件说明\n\n：对话过程中的错误事件。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\ninput_audio_buffer\n\n提交成功\n\n​\n\n事件类型\n\n：\n\ninput_audio_buffer.completed\n\n​\n\n事件说明\n\n：流式提交的音频完成后，返回此事件。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\ninput_audio_buffer\n\n清除成功\n\n​\n\n事件类型\n\n：\n\ninput_audio_buffer.cleared\n\n​\n\n事件说明\n\n：清除缓冲区音频成功后，返回此事件。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n上下文清除完成\n\n​\n\n事件类型\n\n：\n\nconversation.cleared\n\n​\n\n事件说明\n\n：清除上下文成功后，返回此事件。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n智能体输出中断\n\n​\n\n事件类型\n\n：\n\nconversation.chat.canceled\n\n​\n\n事件说明\n\n：客户端提交\n\nconversation.chat.cancel\n\n事件，服务端完成中断后，将返回此事件。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n用户语音识别字幕\n\n​\n\n事件类型\n\n：\n\nconversation.audio_transcript.update\n\n​\n\n事件说明\n\n：用户语音识别的中间值，每次返回都是全量文本。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n用户语音识别完成\n\n​\n\n事件类型\n\n：\n\nconversation.audio_transcript.completed\n\n​\n\n事件说明\n\n：用户语音识别完成。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n端插件请求\n\n​\n\n事件类型\n\n：\n\nconversation.chat.requires_action\n\n​\n\n事件说明\n\n：对话中断，需要使用方上报工具的执行结果。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n用户开始说话\n\n​\n\n事件类型\n\n：\n\ninput_audio_buffer.speech_started\n\n​\n\n事件说明\n\n：此事件表示服务端识别到用户正在说话。只有在\n\nserver_vad\n\n模式下，才会返回此事件。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n用户结束说话\n\n​\n\n事件类型\n\n：\n\ninput_audio_buffer.speech_stopped\n\n​\n\n事件说明\n\n：此事件表示服务端识别到用户已停止说话。只有在\n\nserver_vad\n\n模式下，才会返回此事件。\n\n​\n\n事件结构\n\n：\n\n​\n\n​\n\n事件示例\n\n：\n\n​\n\n​\n\n上一篇\n\n双向流式对话上行事件\n\n下一篇\n\n创建声纹组",
        "links": [
          {
            "text": "系统音色列表",
            "href": "https://www.coze.cn/open/docs/dev_how_to_guides/sys_voice"
          }
        ]
      },
      "markdown": "- 事件类型 ： chat.created ​\n\n- 事件说明 ：流式对话接口成功建立连接后服务端会发送此事件。 ​\n\n- 事件结构 ： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 说明 ​ id ​ String ​ 必选 ​ 服务端生成的唯一 ID。 ​ event_type ​ String ​ 必选 ​ 固定为 chat.created 。 ​ detail ​ Object ​ 必选 ​ 事件详情。 ​ detail.logid ​ String ​ 必选 ​ 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 服务端生成的唯一 ID。​ |\n| event_type​ | String​ | 必选​ | 固定为chat.created。​ |\n| detail​ | Object​ | 必选​ | 事件详情。​ |\n| detail.logid​ | String​ | 必选​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |\n\n- 事件示例： ​\n\n- 事件类型 ： chat.updated ​\n\n- 事件说明 ：对话配置更新成功后，会返回最新的配置。 ​\n\n- 事件结构 ： ​\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| id​ | String​ | 必选​ | 客户端自行生成的事件 ID，方便定位问题。​ |\n| event_type​ | String​ | 必选​ | 固定为chat.updated。​ |\n| data​ | Object​ | 必选​ | 事件数据，包含对话配置的详细信息。​ |\n| data.chat_config​ | Object​ | 可选​ | 对话配置。​ |\n| data.chat_config.meta_data​ | Map<String, String>​ | 可选​ | 附加信息，通常用于封装一些业务相关的字段。查看对话消息详情时，系统会透传此附加信息。自定义键值对，应指定为 Map 对象格式。长度为 16 对键值对，其中键（key）的长度范围为 1～64 个字符，值（value）的长度范围为 1～512 个字符。​ |\n| data.chat_config.custom_variables​ | Map<String, String>​ | 可选​ | 智能体中定义的变量。在智能体 prompt 中设置变量 {{key}} 后，可以通过该参数传入变量值，同时支持 Jinja2 语法。详细说明可参考变量示例。变量名只支持英文字母和下划线。​ |\n| data.chat_config.extra_params​ | Map<String, String>​ | 可选​ | 附加参数，通常用于特殊场景下指定一些必要参数供模型判断，例如指定经纬度，并询问智能体此位置的天气。自定义键值对格式，其中键（key）仅支持设置为：latitude（纬度，此时值（Value）为纬度值，例如 39.9800718）、longitude（经度，此时值（Value）为经度值，例如 116.309314）。​ |\n| data.chat_config.user_id​ | String​ | 可选​ | 标识当前与智能体的用户，由使用方自行定义、生成与维护。user_id用于标识对话中的不同用户，不同的user_id，其对话的上下文消息、数据库等对话记忆数据互相隔离。如果不需要用户数据隔离，可将此参数固定为一个任意字符串，例如 123，abc 等。​ |\n| data.chat_config.conversation_id​ | String​ | 可选​ | 标识对话发生在哪一次会话中。会话是智能体和用户之间的一段问答交互。一个会话包含一条或多条消息。对话是会话中对智能体的一次调用，智能体会将对话中产生的消息添加到会话中。可以使用已创建的会话，会话中已存在的消息将作为上下文传递给模型。创建会话的方式可参考创建会话。对于一问一答等不需要区分 conversation 的场合可不传该参数，系统会自动生成一个会话。不传的话会默认创建一个新的 conversation。​ |\n| data.chat_config.auto_save_history​ | Boolean​ | 可选​ | 是否保存本次对话记录。​true：（默认）会话中保存本次对话记录，包括本次对话的模型回复结果、模型执行中间结果。​false：会话中不保存本次对话记录，后续也无法通过任何方式查看本次对话信息、消息详情。在同一个会话中再次发起对话时，本次会话也不会作为上下文传递给模型。​ |\n| data.chat_config.parameters​ | Map<String, any>​ | 可选​ | 设置对话流的输入参数。​对话流的输入参数 USER_INPUT 应在 additional_messages 中传入，在 parameters 中的 USER_INPUT 不生效。​如果 parameters 中未指定 CONVERSATION_NAME 或其他输入参数，则使用参数默认值运行对话流；如果指定了这些参数，则使用指定值。​ |\n| data.input_audio​ | Object​ | 必选​ | 输入音频格式。​ |\n| data.input_audio.format​ | String​ | 必选​ | 输入音频的格式，支持pcm、wav、ogg。默认为wav。​ |\n| data.input_audio.codec​ | String​ | 必选​ | 输入音频的编码，支持pcm、opus。默认为pcm。​ |\n| data.input_audio.sample_rate​ | Integer​ | 必选​ | 输入音频的采样率，默认 24000。​ |\n| data.input_audio.channel​ | Integer​ | 必选​ | 输入音频的声道数，默认是 1（单声道）。​ |\n| data.input_audio.bit_depth​ | Integer​ | 必选​ | 输入音频的位深，默认是 16。​ |\n| data.output_audio​ | Object​ | 必选​ | 输出音频格式。​ |\n| data.output_audio.codec​ | String​ | 必选​ | 输出音频编码，支持pcm、g711a、g711u、opus、mp3。默认是pcm。​ |\n| data.output_audio.pcm_config​ | Object​ | 可选​ | 当codec设置为opus时，不需要设置此字段。​ |\n| data.output_audio.pcm_config.sample_rate​ | Integer​ | 可选​ | 输出pcm音频的采样率，默认 24000。​ |\n| data.output_audio.pcm_config.frame_size_ms​ | Float​ | 可选​ | 输出每个 pcm 包的时长，单位 ms，默认不限制。​ |\n| data.output_audio.pcm_config.limit_config​ | Object​ | 可选​ | 输出音频限流配置，默认不限制。​ |\n| data.output_audio.pcm_config.limit_config.period​ | Integer​ | 可选​ | 周期的时长，单位为秒。例如设置为 10 秒，则以 10 秒作为一个周期。​ |\n| data.output_audio.pcm_config.limit_config.max_frame_num​ | Integer​ | 可选​ | 周期内，最大返回 pcm 包数量。​ |\n| data.output_audio.opus_config​ | Object​ | 可选​ | 当codec设置为pcm时，不需要设置此字段。​ |\n| data.output_audio.opus_config.bitrate​ | Integer​ | 可选​ | 输出opus的码率，默认 48000。​ |\n| data.output_audio.opus_config.use_cbr​ | Boolean​ | 可选​ | 输出opus是否使用 CBR 编码，默认为false。​ |\n| data.output_audio.opus_config.frame_size_ms​ | Float​ | 可选​ | 输出opus的帧长，默认是 10。​ |\n| data.output_audio.opus_config.limit_config​ | Object​ | 可选​ | 输出音频限流配置。​ |\n| data.output_audio.opus_config.limit_config.period​ | Integer​ | 可选​ | 周期的时长，单位为秒。例如设置为 10 秒，则以 10 秒作为一个周期。​ |\n| data.output_audio.opus_config.limit_config.max_frame_num​ | Integer​ | 可选​ | 周期内最大返回的 Opus 帧数量。​ |\n| data.output_audio.mp3_config​ | Object​ | 可选​ | 当codec设置为mp3时，用于配置 mp3 音频参数。​当codec设置为opus、pcm、g711a、g711u时，不需要设置此字段。​ |\n| data.output_audio.mp3_config.sample_rate​ | Integer​ | 可选​ | 输出mp3音频的采样率，默认是 44100。支持 32000，44100，48000。​ |\n| data.output_audio.mp3_config.bit_rate​ | Integer​ | 可选​ | 输出mp3音频的码率，支持 8000~1600000。​ |\n| data.output_audio.loudness_rate​ | Integer​ | 可选​ | 输出音频的音量，取值范围 [-50, 100]，默认为 0。-50 表示 0.5 倍音量，100 表示 2 倍音量。​ |\n| data.output_audio.speech_rate​ | Integer​ | 必选​ | 输出音频的语速，取值范围 [-50, 100]，默认为 0。-50 表示 0.5 倍速，100 表示 2 倍速。​ |\n| data.output_audio.voice_id​ | String​ | 可选​ | 输出音频的音色 ID。​ |\n| data.output_audio.emotion_config​ | Object​ | 可选​ | 设置多情感音色的情感和情感值，仅当voice_id为多情感音色时才支持该配置。​ |\n| data.output_audio.emotion_config.emotion​ | String​ | 可选​ | 设置多情感音色的情感类型。不同音色支持的情感范围不同，可以通过系统音色列表查看各音色支持的情感。默认为空。枚举值如下：​happy-开心​sad-悲伤​angry-生气​surprised-惊讶​fear-恐惧​hate-厌恶​excited-激动​coldness-冷漠​neutral-中性​ |\n| data.output_audio.emotion_config.emotion_scale​ | Float​ | 可选​ | 情感值用于量化情感的强度。数值越高，情感表达越强烈，例如： “开心” 的情感值 5 比 1 更显兴奋。​取值范围：1.0~5.0，默认值：4.0。​ |\n| data.voice_processing_config​ | Object​ | 可选​ | 语音处理能力配置。​说明仅扣子企业旗舰版支持该配置。​ |\n| data.voice_processing_config.enable_ans​ | Boolean​ | 可选​ | 主动噪声抑制。自动识别并过滤掉背景环境中的各种噪音（如键盘声、空调声、街道嘈杂声），让说话者的声音更清晰。​此功能与下面的enable_pdns（声纹降噪）只能二选一开启，不能同时使用。​ |\n| data.voice_processing_config.enable_pdns​ | Boolean​ | 可选​ | 声纹降噪。专门针对特定说话人的声音进行优化，能更精准地保留目标人声。​此功能与上面的enable_ans只能二选一开启，不能同时使用。​提供两种模式：​自动提取：设置简单，开箱即用。默认为该模式。降噪生效稍微有延迟，服务端需要先听你说一会儿话才能提取出你的声纹特征，在此期间降噪效果可能不佳。另外，提取声纹会受到用户说话场景影响，准确性上可能会弱于主动设置。​主动设置：降噪效果更精准、更快速，在对话开始时就立即生效。不过需要提前录制声纹并在voice_print_feature_id中设置声纹 ID。​ |\n| data.voice_processing_config.voice_print_feature_id​ | String​ | 可选​ | 目标说话人的声纹 ID。当你选择开启enable_pdns（声纹降噪）并希望使用主动设置模式时，需要在此处填入你提前录制好的声纹 ID。​ |\n| data.turn_detection​ | Object​ | 可选​ | 转检测配置。​ |\n| data.turn_detection.type​ | String​ | 可选​ | 语音检测类型，用于控制语音交互的检测方式，枚举值：​server_vad：自由对话模式，语音数据会传输到服务器端进行实时分析，服务器端的语音活动检测算法会判断用户是否在说话。​client_interrupt：（默认）按键说话模式，由客户端控制语音的开始与结束。​semantic_vad：采用语义判停的自由对话模式（此功能仅对企业旗舰版用户开放），由服务端识别说话人的说话的语义判断是否停止说话。​ |\n| data.turn_detection.prefix_padding_ms​ | Integer​ | 可选​ | server_vad模式下，VAD 检测到语音之前要包含的音频量，单位为 ms。默认为 600ms。​ |\n| data.turn_detection.silence_duration_ms​ | Integer​ | 可选​ | server_vad模式下，检测语音停止的静音持续时间，单位为 ms。默认为 500ms。​ |\n| data.turn_detection.semantic_vad_config​ | Object​ | 可选​ | semantic_vad模式下，配置判定语音停止的语义检测策略。​ |\n| data.turn_detection.semantic_vad_config.silence_threshold_ms​ | Integer​ | 可选​ | 当用户暂停说话时，持续静音多久后，触发语义判停检测。单位为 ms。默认为 300ms。​ |\n| data.turn_detection.semantic_vad_config.semantic_unfinished_wait_time_ms​ | Integer​ | 可选​ | 当语义检测判断该语句未结束时，持续静音多久后，扣子认定语音结束。单位为 ms。默认为 500ms。​ |\n| data.turn_detection.interrupt_config​ | Object​ | 可选​ | server_vad模式下，配置语音对话的打断策略。​默认采用发声即打断模式，即在检测到语音输入时会中断智能体的输出。​ |\n| data.turn_detection.interrupt_config.mode​ | String​ | 可选​ | 配置通过关键词打断，包括:​keyword_contains模式下，说话内容包含关键词才会打断模型回复。例如关键词\"扣子\"，用户正在说“你好呀扣子......” / “扣子你好呀”，模型回复都会被打断。​keyword_prefix模式下，说话内容前缀匹配关键词才会打断模型回复。例如关键词\"扣子\"，用户正在说“扣子你好呀......”，模型回复就会被打断，而用户说“你好呀扣子......”，模型回复不会被打断。​详细配置方法请参见​通过关键词打断语音对话。​ |\n| data.turn_detection.interrupt_config.keywords​ | Array<String>​ | 可选​ | 打断的关键词配置，最多同时限制 5 个关键词，每个关键词限定长度在 6~24 个字节以内（2~8个汉字以内），不能有标点符号。​ |\n| data.asr_config​ | Object​ | 可选​ | 语音识别配置，包括热词和上下文信息，以便优化语音识别的准确性和相关性。​ |\n| data.asr_config.hot_words​ | Array<String>​ | 可选​ | 请输入热词列表，以便提升这些词汇的识别准确率。如果设置的热词数量超出以下数量限制，超出部分将自动截断。​data.asr_config.stream_mode为output_no_stream时：hot_words 支持 5000 tokens。​data.asr_config.stream_mode为bidirectional_stream时： hot_words 支持 100 tokens。​ |\n| data.asr_config.context​ | String​ | 可选​ | 请输入上下文信息。​最多输入 800 个 Tokens，超出部分将自动截断。​ |\n| data.asr_config.user_language​ | String​ | 可选​ | 用户说话的语种，默认为common。选项包括：​common：大模型语音识别，支持中英文、上海话、闽南语，四川、陕西、粤语识别。​英语：en-US​日语：ja-JP​印尼语：id-ID​西班牙语：es-MX​葡萄牙语：pt-BR​德语：de-DE​法语：fr-FR​韩语：ko-KR​菲律宾语：fil-PH​马来语：ms-MY​泰语：th-TH​阿拉伯语：ar-SA​ |\n| data.asr_config.enable_ddc​ | Boolean​ | 可选​ | 将语音转为文本时，是否启用语义顺滑。默认为true。​true：系统在进行语音处理时，会去掉识别结果中诸如 “啊”“嗯” 等语气词，使得输出的文本语义更加流畅自然，符合正常的语言表达习惯，尤其适用于对文本质量要求较高的场景，如正式的会议记录、新闻稿件生成等。​false：系统不会对识别结果中的语气词进行处理，识别结果会保留原始的语气词。​ |\n| data.asr_config.enable_itn​ | Boolean​ | 可选​ | 将语音转为文本时，是否开启文本规范化（ITN）处理，将识别结果转换为更符合书面表达习惯的格式以提升可读性。默认为true。​开启后，会将口语化数字转换为标准数字格式，示例：​将两点十五分转换为14:15。​将一百美元转换为$100。​ |\n| data.asr_config.enable_punc​ | Boolean​ | 可选​ | 将语音转为文本时，是否给文本加上标点符号。默认为true。​ |\n| data.asr_config.stream_mode​ | String​ | 可选​ | ASR 识别的模式。​output_no_stream：不会逐字返回语音识别结果，而是等整段语音结束后统一输出完整文本。异步语音消息场景中推荐使用该模式，会整合整句音频信息做上下文分析，减少实时截断导致的误差，提升准确率。​bidirectional_stream（默认值）：逐字的返回语音识别的结果。​ |\n| data.asr_config.enable_nostream​ | Boolean​ | 可选​ | 是否开启二次识别模式：​true：会实时返回逐字识别的文本；当一句话结束时，会结合整句音频进行上下文分析并重新识别，生成优化后的识别结果并返回。这种机制既能满足客户实时上屏的需求，又能确保最终结果的识别准确率。​false（默认值）：仅进行一次实时识别，逐字返回文本，不会在一句话结束时重新识别分句，可能存在一定的识别误差。​ |\n| data.asr_config.enable_emotion​ | Boolean​ | 可选​ | 识别说话人的情绪。仅在data.asr_config.stream_mode为output_no_stream时生效。默认为false。​支持的情绪标签包括：​angry：表示情绪为生气​happy：表示情绪为开心​neutral：表示情绪为平静或中性​sad：表示情绪为悲伤​surprise：表示情绪为惊讶​ |\n| data.asr_config.enable_gender​ | Boolean​ | 可选​ | 是否开启识别说话人的性别（male/female），仅在data.asr_config.stream_mode为output_no_stream时生效。默认为false。​ |\n| data.asr_config.sensitive_words_filter​ | Object​ | 可选​ | 敏感词过滤功能，支持以下 3 种过滤方式：​过滤系统敏感词，并替换为*。​过滤自定义敏感词，并替换为空。​过滤自定义敏感词，并替换为*。​ |\n| data.asr_config.sensitive_words_filter.system_reserved_filter​ | Boolean​ | 可选​ | 是否过滤系统自带的敏感词，并将匹配到的敏感词替换为*。（系统自带敏感词主要包含一些限制级词汇）。默认为false。​ |\n| data.asr_config.sensitive_words_filter.filter_with_empty​ | Array<string>​ | 可选​ | 自定义需替换为空的敏感词列表。​ |\n| data.asr_config.sensitive_words_filter.filter_with_signed​ | Array<string>​ | 可选​ | 自定义需替换为*的敏感词列表。​ |\n| data.voice_print_config​ | Object<String>​ | 可选​ | 声纹识别配置。​ |\n| data.voice_print_config.group_id​ | String​ | 可选​ | 声纹组 ID。语音通话时，扣子会在该声纹组内进行查找匹配对应的声纹，当声纹匹配度高于score阈值，则认为是同一个人的声音。​ |\n| data.voice_print_config.score​ | Integer​ | 可选​ | 声纹匹配的命中阈值，即声音匹配度的最低标准。当声音匹配度达到或超过该阈值时，扣子才会认定声纹匹配成功。你可以根据应用的安全性要求进行自定义设置。如果匹配了多轮声纹，扣子会取相似度最高的一个。​取值范围：0~100，默认值：40。​ |\n| data.voice_print_config.reuse_voice_info​ | Boolean​ | 可选​ | 当本轮对话未命中任何声纹时，是否沿用历史声纹信息。​true：未命中声纹时，智能体将返回上一次命中的声纹。适用于连续对话场景，当收音不好等情况导致声纹没能正确被识别时，保障对话的连贯性。​false：（默认值）未命中声纹时，智能体返回空的声纹信息。​ |\n| detail​ | Object​ | 必选​ | 事件详情。​ |\n| detail.logid​ | String​ | 必选​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |\n\n- true ：（默认）会话中保存本次对话记录，包括本次对话的模型回复结果、模型执行中间结果。 ​\n\n- false ：会话中不保存本次对话记录，后续也无法通过任何方式查看本次对话信息、消息详情。在同一个会话中再次发起对话时，本次会话也不会作为上下文传递给模型。 ​\n\n- 对话流的输入参数 USER_INPUT 应在 additional_messages 中传入，在 parameters 中的 USER_INPUT 不生效。 ​\n\n- 如果 parameters 中未指定 CONVERSATION_NAME 或其他输入参数，则使用参数默认值运行对话流；如果指定了这些参数，则使用指定值。 ​\n\n- 当 codec 设置为 mp3 时，用于配置 mp3 音频参数。 ​\n\n- 当 codec 设置为 opus 、 pcm 、 g711a 、 g711u 时，不需要设置此字段。 ​\n\n- happy-开心 ​\n\n- sad-悲伤 ​\n\n- angry-生气 ​\n\n- surprised-惊讶 ​\n\n- fear-恐惧 ​\n\n- hate-厌恶 ​\n\n- excited-激动 ​\n\n- coldness-冷漠 ​\n\n- neutral-中性 ​\n\n- 自动提取：设置简单，开箱即用。默认为该模式。 降噪生效稍微有延迟 ，服务端需要先听你说一会儿话才能提取出你的声纹特征，在此期间降噪效果可能不佳。另外，提取声纹会受到用户说话场景影响，准确性上可能会弱于主动设置。 ​\n\n- 主动设置： 降噪效果更精准、更快速 ，在对话开始时就立即生效。不过需要提前录制声纹并在 voice_print_feature_id 中设置声纹 ID。 ​\n\n- server_vad ：自由对话模式，语音数据会传输到服务器端进行实时分析，服务器端的语音活动检测算法会判断用户是否在说话。 ​\n\n- client_interrupt ：（默认）按键说话模式，由客户端控制语音的开始与结束。 ​\n\n- semantic_vad ：采用语义判停的自由对话模式（ 此功能仅对企业旗舰版用户开放 ），由服务端识别说话人的说话的语义判断是否停止说话。 ​\n\n- keyword_contains 模式下，说话内容 包含 关键词才会打断模型回复。例如关键词\"扣子\"，用户正在说“你好呀扣子......” / “扣子你好呀”，模型回复都会被打断。 ​\n\n- keyword_prefix 模式下，说话内容 前缀匹配 关键词才会打断模型回复。例如关键词\"扣子\"，用户正在说“扣子你好呀......”，模型回复就会被打断，而用户说“你好呀扣子......”，模型回复不会被打断。 ​\n\n- data.asr_config.stream_mode 为 output_no_stream 时：hot_words 支持 5000 tokens。 ​\n\n- data.asr_config.stream_mode 为 bidirectional_stream 时： hot_words 支持 100 tokens。 ​\n\n- common：大模型语音识别，支持中英文、上海话、闽南语，四川、陕西、粤语识别。 ​\n\n- 英语：en-US ​\n\n- 日语：ja-JP ​\n\n- 印尼语：id-ID ​\n\n- 西班牙语：es-MX ​\n\n- 葡萄牙语：pt-BR ​\n\n- 德语：de-DE ​\n\n- 法语：fr-FR ​\n\n- 韩语：ko-KR ​\n\n- 菲律宾语：fil-PH ​\n\n- 马来语：ms-MY ​\n\n- 泰语：th-TH ​\n\n- 阿拉伯语：ar-SA ​\n\n- true ：系统在进行语音处理时，会去掉识别结果中诸如 “啊”“嗯” 等语气词，使得输出的文本语义更加流畅自然，符合正常的语言表达习惯，尤其适用于对文本质量要求较高的场景，如正式的会议记录、新闻稿件生成等。 ​\n\n- false ：系统不会对识别结果中的语气词进行处理，识别结果会保留原始的语气词。 ​\n\n- 将 两点十五分 转换为 14:15 。 ​\n\n- 将 一百美元 转换为 $100 。 ​\n\n- output_no_stream ：不会逐字返回语音识别结果，而是等整段语音结束后统一输出完整文本。异步语音消息场景中推荐使用该模式，会整合整句音频信息做上下文分析，减少实时截断导致的误差，提升准确率。 ​\n\n- bidirectional_stream （默认值）：逐字的返回语音识别的结果。 ​\n\n- true ：会实时返回逐字识别的文本；当一句话结束时，会结合整句音频进行上下文分析并重新识别，生成优化后的识别结果并返回。这种机制既能满足客户实时上屏的需求，又能确保最终结果的识别准确率。 ​\n\n- false （默认值）：仅进行一次实时识别，逐字返回文本，不会在一句话结束时重新识别分句，可能存在一定的识别误差。 ​\n\n- angry ：表示情绪为生气 ​\n\n- happy ：表示情绪为开心 ​\n\n- neutral ：表示情绪为平静或中性 ​\n\n- sad ：表示情绪为悲伤 ​\n\n- surprise ：表示情绪为惊讶 ​\n\n- 过滤系统敏感词，并替换为 * 。 ​\n\n- 过滤自定义敏感词，并替换为空。 ​\n\n- 过滤自定义敏感词，并替换为 * 。 ​\n\n- true ：未命中声纹时，智能体将返回上一次命中的声纹。适用于连续对话场景，当收音不好等情况导致声纹没能正确被识别时，保障对话的连贯性。 ​\n\n- false ：（默认值）未命中声纹时，智能体返回空的声纹信息。 ​\n\n- 事件示例 ： ​\n\n- 事件类型 ： conversation.chat.created ​\n\n- 事件说明 ：创建对话的事件，表示对话开始。 ​\n\n- 事件结构 ： ​\n\n- 事件示例 ： ​\n\n- 事件类型 ： conversation.chat.in_progress ​\n\n- 事件说明 ：服务端正在处理对话。 ​\n\n- 事件结构 ： ​\n\n- 事件示例 ： ​\n\n- 事件类型 ： conversation.message.delta ​\n\n- 事件说明 ：增量消息，通常是 type=answer 时的增量消息。 ​\n\n- 事件结构 ： ​\n\n- 事件示例 ： ​\n\n- 事件类型： conversation.audio.sentence_start ​\n\n- 事件说明 ：一条新的字幕句子，后续的 conversation.audio.delta 增量语音均属于当前字幕句子，可能有多个增量语音共同对应此句字幕的文字内容。 ​\n\n- 事件结构： ​\n\n- ​\n\n- 事件示例 ： ​\n\n- ​\n\n- 事件类型 ： conversation.audio.delta ​\n\n- 事件说明 ：增量语音，通常是 type=answer 时的增量语音。 ​\n\n- 事件结构 ： ​\n\n- 事件示例 ： ​\n\n- 事件类型 ： conversation.message.completed ​\n\n- 事件说明 ：消息已回复完成。此时事件中带有所有 message.delta 的拼接结果，且每个消息均为 completed 状态。 ​\n\n- 事件结构 ： ​\n\n- 事件示例 ： ​\n\n- 事件类型 ： conversation.audio.completed ​\n\n- 事件说明 ：音频回复完成。 ​\n\n- 事件结构 ： ​\n\n- 事件示例 ： ​\n\n- 事件类型 ： conversation.chat.completed ​\n\n- 事件说明 ：表示对话已完成。 ​\n\n- 事件结构 ： ​\n\n- 事件示例 ： ​\n\n- 事件类型 ： conversation.chat.failed ​\n\n- 事件说明 ：此事件用于标识对话失败。 ​\n\n- 事件结构 ： ​\n\n- ​\n\n- 事件示例 ： ​\n\n- ​\n\n- 事件类型 ： error ​\n\n- 事件说明 ：对话过程中的错误事件。 ​\n\n- 事件结构 ： ​\n\n- ​\n\n- 事件示例 ： ​\n\n- ​\n\n- 事件类型 ： input_audio_buffer.completed ​\n\n- 事件说明 ：流式提交的音频完成后，返回此事件。 ​\n\n- 事件结构 ： ​\n\n- ​\n\n- 事件示例 ： ​\n\n- ​\n\n- 事件类型 ： input_audio_buffer.cleared ​\n\n- 事件说明 ：清除缓冲区音频成功后，返回此事件。 ​\n\n- 事件结构 ： ​\n\n- ​\n\n- 事件示例 ： ​\n\n- ​\n\n- 事件类型 ： conversation.cleared ​\n\n- 事件说明 ：清除上下文成功后，返回此事件。 ​\n\n- 事件结构 ： ​\n\n- ​\n\n- 事件示例 ： ​\n\n- ​\n\n- 事件类型 ： conversation.chat.canceled ​\n\n- 事件说明 ：客户端提交 conversation.chat.cancel 事件，服务端完成中断后，将返回此事件。 ​\n\n- 事件结构 ： ​\n\n- ​\n\n- 事件示例 ： ​\n\n- 事件类型 ： conversation.audio_transcript.update ​\n\n- 事件说明 ：用户语音识别的中间值，每次返回都是全量文本。 ​\n\n- 事件结构 ： ​\n\n- ​\n\n- 事件示例 ： ​\n\n- ​\n\n- 事件类型 ： conversation.audio_transcript.completed ​\n\n- 事件说明 ：用户语音识别完成。 ​\n\n- 事件结构 ： ​\n\n- ​\n\n- 事件示例 ： ​\n\n- ​\n\n- 事件类型 ： conversation.chat.requires_action ​\n\n- 事件说明 ：对话中断，需要使用方上报工具的执行结果。 ​\n\n- 事件结构 ： ​\n\n- ​\n\n- 事件示例 ： ​\n\n- ​\n\n- 事件类型 ： input_audio_buffer.speech_started ​\n\n- 事件说明 ：此事件表示服务端识别到用户正在说话。只有在 server_vad 模式下，才会返回此事件。 ​\n\n- 事件结构 ： ​\n\n- ​\n\n- 事件示例 ： ​\n\n- 事件类型 ： input_audio_buffer.speech_stopped ​\n\n- 事件说明 ：此事件表示服务端识别到用户已停止说话。只有在 server_vad 模式下，才会返回此事件。 ​\n\n- 事件结构 ： ​\n\n- ​\n\n- 事件示例 ： ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/create_voiceprint_group",
      "title": "创建声纹组",
      "content": {
        "sections": [],
        "full_text": "创建声纹组\n\n创建声纹组。\n\n​\n\n接口描述\n\n​\n\n声纹组是声纹的集合单元，例如，你可以为每个设备分别创建一个声纹组。声纹识别时，扣子编程会在指定的声纹组中匹配声纹。\n\n​\n\n默认最多可创建 1000 个声纹组。如需提高配额，需要升级至扣子企业旗舰版，并联系对应销售申请配额扩容。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/audio/voiceprint_groups\n\n​\n\n权限\n\n​\n\ncreateVoiceprintGroup\n\n​\n\n确保调用该接口使用的个人令牌开通了\n\ncreateVoiceprintGroup\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n创建声纹组。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nname\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n音箱2的声纹组\n\n​\n\n声纹组的名称，用于标识和管理不同的声纹组，长度不超过\n\n20\n\n个字符。\n\ndesc\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n该声纹组用于客厅智能音箱的用户语音识别，支持多用户语音指令区分。\n\n​\n\n声纹组的描述信息，用于详细说明该声纹组的用途或特点，长度不超过\n\n500\n\n个字符。\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndata\n\n​\n\nObject of\n\nCreateVoicePrintGroupData\n\n​\n\n{\"id\":\"426614174000\"}\n\n​\n\n声纹组的信息。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{ \"logid\": \"202410242028595CCF353CEC86A8*****\" }\n\n​\n\n响应详情信息。\n\n​\n\n​\n\nCreateVoicePrintGroupData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n426614174000\n\n​\n\n声纹组 ID。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/audio/voiceprint_groups' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n{\n\n​\n\n\"name\"\n\n:\n\n\"音箱1的声纹组\"\n\n,\n\n​\n\n\"desc\"\n\n:\n\n\"音箱1的声纹组\"\n\n​\n\n}\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"202506091635425D49D29729AD9****\"\n\n​\n\n},\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"75138649771889***\"\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n双向流式对话下行事件\n\n下一篇\n\n查询声纹组列表",
        "links": []
      },
      "markdown": "| 请求方式​ | POST |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/audio/voiceprint_groups​ |\n| 权限​ | createVoiceprintGroup​确保调用该接口使用的个人令牌开通了createVoiceprintGroup权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 创建声纹组。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| name​ | String​ | 必选​ | 音箱2的声纹组​ | 声纹组的名称，用于标识和管理不同的声纹组，长度不超过20个字符。 |\n| desc​ | String​ | 可选​ | 该声纹组用于客厅智能音箱的用户语音识别，支持多用户语音指令区分。​ | 声纹组的描述信息，用于详细说明该声纹组的用途或特点，长度不超过500个字符。 |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| data​ | Object ofCreateVoicePrintGroupData​ | {\"id\":\"426614174000\"}​ | 声纹组的信息。​ |\n| detail​ | Object ofResponseDetail​ | { \"logid\": \"202410242028595CCF353CEC86A8*****\" }​ | 响应详情信息。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 426614174000​ | 声纹组 ID。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/list_voiceprint_group",
      "title": "查询声纹组列表",
      "content": {
        "sections": [],
        "full_text": "查询声纹组列表\n\n查询已创建的声纹组列表。\n\n​\n\n接口描述\n\n​\n\n支持通过名称模糊匹配、用户ID、声纹组 ID 进行精确匹配。返回结果包括声纹组的详细信息，包括声纹组的创建者、创建时间等信息。\n\n​\n\n你可以查询团队或企业中的全部声纹组，或查询本人创建的声纹组。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/audio/voiceprint_groups\n\n​\n\n权限\n\n​\n\nlistVoiceprintGroup\n\n​\n\n确保调用该接口使用的个人令牌开通了\n\nlistVoiceprintGroup\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n查询已创建的声纹组列表。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\npage_num\n\n​\n\nLong\n\n​\n\n可选\n\n​\n\n1\n\n​\n\n查询结果分页展示时，此参数用于设置查看的页码。最小值为 1，默认为 1。\n\n​\n\npage_size\n\n​\n\nLong\n\n​\n\n可选\n\n​\n\n20\n\n​\n\n查询结果分页展示时，此参数用于设置每页返回的数据量。取值范围为 1~200，默认为 10。\n\n​\n\nname\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n声纹组\n\n​\n\n用于根据声纹组名称前缀进行模糊匹配筛选，支持输入部分名称前缀进行查询。\n\n​\n\nuser_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n757378***\n\n​\n\n声纹创建者的扣子用户 UID。\n\n​\n\n若指定用户 ID，则只能填写本人的用户 ID，即仅能查询本人创建的声纹组。\n\n​\n\n如果不填写，则查询团队或企业中的所有声纹组。\n\n​\n\n你可以单击扣子编程左下角的头像，选择\n\n账号设置\n\n，在页面底部查看扣子用户的 UID。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\ngroup_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n75143038117378***\n\n​\n\n声纹组 ID，用于指定查询特定的声纹组。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndata\n\n​\n\nObject of\n\nGetVoicePrintGroupListData\n\n​\n\n\\\n\n​\n\n返回的声纹组列表及相关信息。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{logid\": \"202410242028595CCF353CEC86A8*****\" }\n\n​\n\n本次请求返回的详细信息。\n\n​\n\n​\n\nGetVoicePrintGroupListData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nitems\n\n​\n\nArray of\n\nVoicePrintGroup\n\n​\n\n\\\n\n​\n\n声纹组列表，包含多个声纹组的详细信息。\n\n​\n\ntotal\n\n​\n\nLong\n\n​\n\n5\n\n​\n\n声纹组数量。\n\n​\n\n​\n\nVoicePrintGroup\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n75143038117378***\n\n​\n\n声纹组的 ID。\n\n​\n\ndesc\n\n​\n\nString\n\n​\n\n声纹组1\n\n​\n\n声纹组的描述。\n\n​\n\nname\n\n​\n\nString\n\n​\n\n声纹组1\n\n​\n\n声纹组名称。\n\n​\n\nicon_url\n\n​\n\nString\n\n​\n\nhttps://example.com/avatar/751427391012944***.jpg\n\n​\n\n声纹组的头像 URL。\n\n​\n\nuser_info\n\n​\n\nObject of\n\nUserInfo\n\n​\n\n{\"id\":\"324566624\",\"name\":\"小王\",\"nickname\":\"小王\",\"avatar_url\":\"\n\nhttps://example.com/avatar/751427391012944***.jpg\n\n\"}\n\n​\n\n声纹组创建者的信息。\n\n​\n\ncreated_at\n\n​\n\nLong\n\n​\n\n1714567890123\n\n​\n\n声纹组的创建时间，以 Unix 时间戳格式表示，单位为秒。\n\n​\n\nupdated_at\n\n​\n\nLong\n\n​\n\n1714567890223\n\n​\n\n声纹组的更新时间，以 Unix 时间戳格式表示，单位为秒。\n\n​\n\nfeature_count\n\n​\n\nInteger\n\n​\n\n3\n\n​\n\n声纹组中包含的声纹数量。\n\n​\n\n​\n\nUserInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n324566624\n\n​\n\n声纹组创建者的用户 ID。\n\n​\n\nname\n\n​\n\nString\n\n​\n\n小王\n\n​\n\n声纹组创建者的用户名。\n\n​\n\nnickname\n\n​\n\nString\n\n​\n\n小王\n\n​\n\n声纹组创建者的用户昵称。\n\n​\n\navatar_url\n\n​\n\nString\n\n​\n\nhttps://example.com/avatar/751427391012944***.jpg\n\n​\n\n声纹组创建者的用户头像。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\nGET 'https\n\n:\n\n//api.coze.cn/v1/audio/voiceprint_groups?page_num=1&page_size=10&group_id=7511988408546279468' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_gJUE27xgjJxfeH4ZtgrwrJHDnHPD5VTHfmA9IpBMfImgdcAQCzNLXDwm***' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"2025060415553824EF7ACB121****\"\n\n​\n\n},\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"total\"\n\n:\n\n1\n\n,\n\n​\n\n\"items\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"feature_count\"\n\n:\n\n0\n\n,\n\n​\n\n\"desc\"\n\n:\n\n\"This is a test group\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"test_group\"\n\n,\n\n​\n\n\"icon_url\"\n\n:\n\n\"https://example.***/obj/ocean-cloud-tos/voiceprint/default_voiceprint_group_icon.png\"\n\n,\n\n​\n\n\"user_info\"\n\n:\n\n{\n\n​\n\n\"avatar_url\"\n\n:\n\n\"https://p3-passport.byteacctimg.com/img/user-avatar/assets/e7b19241fb224cea967dfa****_1080_1080.png~0x0.image\"\n\n,\n\n​\n\n\"id\"\n\n:\n\n14891859095\n\n***\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"testcase1\"\n\n,\n\n​\n\n\"nickname\"\n\n:\n\n\"5707\"\n\n​\n\n},\n\n​\n\n\"id\"\n\n:\n\n\"751198840854***\"\n\n,\n\n​\n\n\"created_at\"\n\n:\n\n1749021940\n\n,\n\n​\n\n\"updated_at\"\n\n:\n\n1749021940\n\n​\n\n}\n\n​\n\n]\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n创建声纹组\n\n下一篇\n\n更新声纹组信息",
        "links": []
      },
      "markdown": "| 请求方式​ | GET |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/audio/voiceprint_groups​ |\n| 权限​ | listVoiceprintGroup​确保调用该接口使用的个人令牌开通了listVoiceprintGroup权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 查询已创建的声纹组列表。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| page_num​ | Long​ | 可选​ | 1​ | 查询结果分页展示时，此参数用于设置查看的页码。最小值为 1，默认为 1。​ |\n| page_size​ | Long​ | 可选​ | 20​ | 查询结果分页展示时，此参数用于设置每页返回的数据量。取值范围为 1~200，默认为 10。​ |\n| name​ | String​ | 可选​ | 声纹组​ | 用于根据声纹组名称前缀进行模糊匹配筛选，支持输入部分名称前缀进行查询。​ |\n| user_id​ | String​ | 可选​ | 757378***​ | 声纹创建者的扣子用户 UID。​若指定用户 ID，则只能填写本人的用户 ID，即仅能查询本人创建的声纹组。​如果不填写，则查询团队或企业中的所有声纹组。​你可以单击扣子编程左下角的头像，选择账号设置，在页面底部查看扣子用户的 UID。​​​​​​ |\n| group_id​ | String​ | 可选​ | 75143038117378***​ | 声纹组 ID，用于指定查询特定的声纹组。​ |\n\n- 若指定用户 ID，则只能填写本人的用户 ID，即仅能查询本人创建的声纹组。 ​\n\n- 如果不填写，则查询团队或企业中的所有声纹组。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| data​ | Object ofGetVoicePrintGroupListData​ | \\​ | 返回的声纹组列表及相关信息。​ |\n| detail​ | Object ofResponseDetail​ | {logid\": \"202410242028595CCF353CEC86A8*****\" }​ | 本次请求返回的详细信息。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| items​ | Array ofVoicePrintGroup​ | \\​ | 声纹组列表，包含多个声纹组的详细信息。​ |\n| total​ | Long​ | 5​ | 声纹组数量。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 75143038117378***​ | 声纹组的 ID。​ |\n| desc​ | String​ | 声纹组1​ | 声纹组的描述。​ |\n| name​ | String​ | 声纹组1​ | 声纹组名称。​ |\n| icon_url​ | String​ | https://example.com/avatar/751427391012944***.jpg​ | 声纹组的头像 URL。​ |\n| user_info​ | Object ofUserInfo​ | {\"id\":\"324566624\",\"name\":\"小王\",\"nickname\":\"小王\",\"avatar_url\":\"https://example.com/avatar/751427391012944***.jpg\"}​ | 声纹组创建者的信息。​ |\n| created_at​ | Long​ | 1714567890123​ | 声纹组的创建时间，以 Unix 时间戳格式表示，单位为秒。​ |\n| updated_at​ | Long​ | 1714567890223​ | 声纹组的更新时间，以 Unix 时间戳格式表示，单位为秒。​ |\n| feature_count​ | Integer​ | 3​ | 声纹组中包含的声纹数量。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 324566624​ | 声纹组创建者的用户 ID。​ |\n| name​ | String​ | 小王​ | 声纹组创建者的用户名。​ |\n| nickname​ | String​ | 小王​ | 声纹组创建者的用户昵称。​ |\n| avatar_url​ | String​ | https://example.com/avatar/751427391012944***.jpg​ | 声纹组创建者的用户头像。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/update_voiceprint_group",
      "title": "更新声纹组信息",
      "content": {
        "sections": [],
        "full_text": "更新声纹组信息\n\n更新声纹组的名称或描述。\n\n​\n\n接口描述\n\n​\n\n创建声纹组后，你可以调用本 API 更新指定声纹组的名称和描述。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPUT\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/audio/voiceprint_groups/:group_id\n\n​\n\n权限\n\n​\n\nupdateVoiceprintGroup\n\n​\n\n确保调用该接口使用的个人令牌开通了\n\nupdateVoiceprintGroup\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n更新声纹组的名称或描述。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ngroup_id\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\n751430381173789****\n\n​\n\n待更新的声纹组的 ID。你可以通过\n\n查看声纹组列表\n\nAPI 查看声纹组 ID。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nname\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n音箱2的声纹组\n\n​\n\n更新后的声纹组名称，最长 20 个字符。\n\n​\n\ndesc\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n音箱2的声纹组\n\n​\n\n更新后的声纹组描述，最长 500 个字符。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{ \"logid\": \"202410242028595CCF353CEC86A8*****\" }\n\n​\n\n本次请求的详细信息。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request PUT 'https\n\n:\n\n//api.coze.cn/v1/audio/voiceprint_groups/7513864977188***' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n{\n\n​\n\n\"name\"\n\n:\n\n\"音箱2的声纹组\"\n\n,\n\n​\n\n\"desc\"\n\n:\n\n\"音箱2的声纹组\"\n\n​\n\n}\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20250609164004CE42B51AC168FD***\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n查询声纹组列表\n\n下一篇\n\n删除声纹组",
        "links": []
      },
      "markdown": "| 请求方式​ | PUT |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/audio/voiceprint_groups/:group_id​ |\n| 权限​ | updateVoiceprintGroup​确保调用该接口使用的个人令牌开通了updateVoiceprintGroup权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 更新声纹组的名称或描述。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| group_id​ | Integer​ | 必选​ | 751430381173789****​ | 待更新的声纹组的 ID。你可以通过查看声纹组列表API 查看声纹组 ID。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| name​ | String​ | 可选​ | 音箱2的声纹组​ | 更新后的声纹组名称，最长 20 个字符。​ |\n| desc​ | String​ | 可选​ | 音箱2的声纹组​ | 更新后的声纹组描述，最长 500 个字符。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | { \"logid\": \"202410242028595CCF353CEC86A8*****\" }​ | 本次请求的详细信息。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/delete_voiceprint_group",
      "title": "删除声纹组",
      "content": {
        "sections": [],
        "full_text": "删除声纹组\n\n删除声纹组。\n\n​\n\n接口描述\n\n​\n\n声纹组的创建者能删除对应的声纹组。删除声纹组会同时删除声纹组中的所有声纹。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nDELETE\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/audio/voiceprint_groups/:group_id\n\n​\n\n权限\n\n​\n\ndeleteVoiceprintGroup\n\n​\n\n确保调用该接口使用的个人令牌开通了\n\ndeleteVoiceprintGroup\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n删除声纹组。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ngroup_id\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\n751430381173789***\n\n​\n\n待删除的声纹组 ID。你可以通过\n\n查看声纹组列表\n\nAPI 查看声纹组 ID。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{ \"logid\": \"202410242028595CCF353CEC86A8*****\" }\n\n​\n\n本次请求返回的详细信息。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request DELETE 'https\n\n:\n\n//api.coze.cn/v1/audio/voiceprint_groups/7509775482326****' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210191248C8EF7607554A6****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n更新声纹组信息\n\n下一篇\n\n创建声纹",
        "links": []
      },
      "markdown": "| 请求方式​ | DELETE |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/audio/voiceprint_groups/:group_id​ |\n| 权限​ | deleteVoiceprintGroup​确保调用该接口使用的个人令牌开通了deleteVoiceprintGroup权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 删除声纹组。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| group_id​ | Integer​ | 必选​ | 751430381173789***​ | 待删除的声纹组 ID。你可以通过查看声纹组列表API 查看声纹组 ID。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0 | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | { \"logid\": \"202410242028595CCF353CEC86A8*****\" }​ | 本次请求返回的详细信息。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/create_voiceprint",
      "title": "创建声纹",
      "content": {
        "sections": [],
        "full_text": "创建声纹\n\n创建声纹。\n\n​\n\n接口描述\n\n​\n\n创建声纹组后，你可以在对应的声纹组中创建声纹，上传本地预先录制好的音频文件进行创建声纹，扣子将通过该音频文件创建声纹。\n\n​\n\n接口限制\n\n​\n\n每个声纹组中最多可创建 10 个声纹。\n\n​\n\n声纹文件的具体限制如下：\n\n​\n\n​\n\n限制\n\n​\n\n说明\n\n​\n\n文件格式\n\n​\n\n支持的文件格式包括 wav 和 pcm。其中 pcm 仅支持 16kHz 采样率、单声道、16 位采样深度。\n\n​\n\n文件大小\n\n​\n\n每个音频文件最大为 4 MB。\n\n​\n\n文件录制\n\n​\n\n录制环境：选择安静的空间，建议将麦克风放置在离说话人 50 厘米以内的位置，尽量保持自然的发声状态，避免刻意改变声线或呢喃，这样得到的声音会更加自然。尽量减少杂音、噪音和混响的干扰。\n\n​\n\n音频质量：确保录音中只包含一个人的声音。\n\n​\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/audio/voiceprint_groups/:group_id/features\n\n​\n\n权限\n\n​\n\ncreateVoiceprintFeature\n\n​\n\n确保调用该接口使用的个人令牌开通了\n\ncreateVoiceprintFeature\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n创建声纹。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\nmultipart/form-data\n\n​\n\n文件类型。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ngroup_id\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\n75143038117378***\n\n​\n\n声纹所属的声纹组 ID。你可以通过\n\n查看声纹组列表\n\nAPI 查看声纹组 ID。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nfile\n\n​\n\nFile\n\n​\n\n必选\n\n​\n\n无\n\n​\n\n上传本地预先录制好的音频文件。\n\n​\n\nname\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n妈妈\n\n​\n\n声纹的名称。\n\n​\n\ndesc\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n妈妈的声音\n\n​\n\n声纹的描述。\n\n​\n\nsample_rate\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n16000\n\n​\n\n采样率，单位：Hz。当文件类型为 pcm 时需传入该参数。\n\n​\n\n默认为 16kHz 采样率。\n\n​\n\nchannel\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n1\n\n​\n\n声道数，当文件类型为 pcm 时需传入该参数。\n\n​\n\n默认为单声道。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndata\n\n​\n\nObject of\n\nCreateVoicePrintGroupFeatureData\n\n​\n\n{\"id\":\"751427391012944***\"}\n\n​\n\n返回的声纹信息。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{ \"logid\": \"202410242028595CCF353CEC86A8*****\" }\n\n​\n\n本次请求返回的详细信息。\n\n​\n\n​\n\nCreateVoicePrintGroupFeatureData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n751427391012944***\n\n​\n\n声纹的 ID。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\nPOST https\n\n:\n\n//api.coze.cn/v1/audio/voiceprint_groups/75143038117378***/features \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\nmultipart/form-data' \\\n\n​\n\n-F 'file=@/voice_test_data/test_1.wav;type=audio/wav' \\\n\n​\n\n-F 'name=妈妈的声音' \\\n\n​\n\n-F 'desc=妈妈的声音'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"202506091643272FB1EDC9CA****\"\n\n​\n\n},\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"75138652833128***\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n删除声纹组\n\n下一篇\n\n更新声纹",
        "links": []
      },
      "markdown": "- 每个声纹组中最多可创建 10 个声纹。 ​\n\n- 声纹文件的具体限制如下： ​\n\n- ​ 限制 ​ 说明 ​ 文件格式 ​ 支持的文件格式包括 wav 和 pcm。其中 pcm 仅支持 16kHz 采样率、单声道、16 位采样深度。 ​ 文件大小 ​ 每个音频文件最大为 4 MB。 ​ 文件录制 ​ 录制环境：选择安静的空间，建议将麦克风放置在离说话人 50 厘米以内的位置，尽量保持自然的发声状态，避免刻意改变声线或呢喃，这样得到的声音会更加自然。尽量减少杂音、噪音和混响的干扰。 ​ 音频质量：确保录音中只包含一个人的声音。 ​ ​\n\n| 限制​ | 说明​ |\n| 文件格式​ | 支持的文件格式包括 wav 和 pcm。其中 pcm 仅支持 16kHz 采样率、单声道、16 位采样深度。​ |\n| 文件大小​ | 每个音频文件最大为 4 MB。​ |\n| 文件录制​ | 录制环境：选择安静的空间，建议将麦克风放置在离说话人 50 厘米以内的位置，尽量保持自然的发声状态，避免刻意改变声线或呢喃，这样得到的声音会更加自然。尽量减少杂音、噪音和混响的干扰。​音频质量：确保录音中只包含一个人的声音。​ |\n\n- 录制环境：选择安静的空间，建议将麦克风放置在离说话人 50 厘米以内的位置，尽量保持自然的发声状态，避免刻意改变声线或呢喃，这样得到的声音会更加自然。尽量减少杂音、噪音和混响的干扰。 ​\n\n- 音频质量：确保录音中只包含一个人的声音。 ​\n\n| 请求方式​ | POST |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/audio/voiceprint_groups/:group_id/features​ |\n| 权限​ | createVoiceprintFeature​确保调用该接口使用的个人令牌开通了createVoiceprintFeature权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 创建声纹。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | multipart/form-data​ | 文件类型。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| group_id​ | Integer​ | 必选​ | 75143038117378***​ | 声纹所属的声纹组 ID。你可以通过查看声纹组列表API 查看声纹组 ID。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| file​ | File​ | 必选​ | 无​ | 上传本地预先录制好的音频文件。​ |\n| name​ | String​ | 必选​ | 妈妈​ | 声纹的名称。​ |\n| desc​ | String​ | 可选​ | 妈妈的声音​ | 声纹的描述。​ |\n| sample_rate​ | Integer​ | 可选​ | 16000​ | 采样率，单位：Hz。当文件类型为 pcm 时需传入该参数。​默认为 16kHz 采样率。​ |\n| channel​ | Integer​ | 可选​ | 1​ | 声道数，当文件类型为 pcm 时需传入该参数。​默认为单声道。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| data​ | Object ofCreateVoicePrintGroupFeatureData​ | {\"id\":\"751427391012944***\"}​ | 返回的声纹信息。​ |\n| detail​ | Object ofResponseDetail​ | { \"logid\": \"202410242028595CCF353CEC86A8*****\" }​ | 本次请求返回的详细信息。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 751427391012944***​ | 声纹的 ID。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/update_voiceprint",
      "title": "更新声纹",
      "content": {
        "sections": [],
        "full_text": "更新声纹\n\n更新指定声纹组中的声纹。\n\n​\n\n接口描述\n\n​\n\n创建声纹\n\n后，你可以调用本 API 更新声纹组中对应声纹的名称或重新上传声纹的音频数据，更新后的声纹将覆盖原有声纹。\n\n​\n\n仅声纹创建者可以更新对应的声纹。\n\n​\n\n上传的声纹文件的具体限制如下：\n\n​\n\n​\n\n限制\n\n​\n\n说明\n\n​\n\n文件格式\n\n​\n\n支持的文件格式包括 wav 和 pcm。其中 pcm 仅支持 16kHz 采样率、单声道、16 位采样深度。\n\n​\n\n文件大小\n\n​\n\n每个音频文件最大为 4 MB。\n\n​\n\n文件录制\n\n​\n\n录制环境：选择安静的空间，建议将麦克风放置在离说话人 50 厘米以内的位置，尽量保持自然的发声状态，避免刻意改变声线或呢喃，这样得到的声音会更加自然。尽量减少杂音、噪音和混响的干扰。\n\n​\n\n音频质量：确保录音中只包含一个人的声音。\n\n​\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPUT\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/audio/voiceprint_groups/:group_id/features/:feature_id\n\n​\n\n权限\n\n​\n\nupdateVoiceprintFeature\n\n​\n\n确保调用该接口使用的个人令牌开通了\n\nupdateVoiceprintFeature\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n更新指定声纹组中的声纹。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\nmultipart/form-data\n\n​\n\n文件类型。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ngroup_id\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\n75143038117378***\n\n​\n\n声纹所属的声纹组 ID。你可以通过\n\n查看声纹组列表\n\nAPI 查看声纹组 ID。\n\n​\n\nfeature_id\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\n75142739101294****\n\n​\n\n待更新的声纹 ID。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nfile\n\n​\n\nFile\n\n​\n\n可选\n\n​\n\n@/voice_test_data/test_1.wav;type=audio/wav\n\n​\n\n上传本地预先录制好的更新的音频文件。\n\n​\n\nname\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n妈妈\n\n​\n\n更新后的声纹的名称。\n\n​\n\ndesc\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n妈妈的声音\n\n​\n\n更新后的声纹的描述。\n\n​\n\nsample_rate\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n16000\n\n​\n\n采样率，单位：Hz。当文件类型为 pcm 时需传入该参数。\n\n​\n\n默认为 16kHz 采样率。\n\n​\n\nchannel\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n1\n\n​\n\n声道数，当文件类型为 pcm 时需传入该参数。\n\n​\n\n默认为单声道。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{ \"logid\": \"202410242028595CCF353CEC86A8*****\" }\n\n​\n\n该请求返回的详细信息。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request PUT\n\n\"https://api.coze.cn/v1/audio/v1/audio/voiceprint_groups/751198840854627***/features/75119956441528***\"\n\n\\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\nmultipart/form-data' \\\n\n​\n\n-F 'file=@/voice_test_data/test_1.wav;type=audio/wav' \\\n\n​\n\n-F 'name=妈妈的声音' \\\n\n​\n\n-F 'desc=妈妈的声音'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"202506091643272FB1EDC9***\"\n\n​\n\n},\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"751386528331282****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n创建声纹\n\n下一篇\n\n查询声纹列表",
        "links": []
      },
      "markdown": "| 限制​ | 说明​ |\n| 文件格式​ | 支持的文件格式包括 wav 和 pcm。其中 pcm 仅支持 16kHz 采样率、单声道、16 位采样深度。​ |\n| 文件大小​ | 每个音频文件最大为 4 MB。​ |\n| 文件录制​ | 录制环境：选择安静的空间，建议将麦克风放置在离说话人 50 厘米以内的位置，尽量保持自然的发声状态，避免刻意改变声线或呢喃，这样得到的声音会更加自然。尽量减少杂音、噪音和混响的干扰。​音频质量：确保录音中只包含一个人的声音。​ |\n\n- 录制环境：选择安静的空间，建议将麦克风放置在离说话人 50 厘米以内的位置，尽量保持自然的发声状态，避免刻意改变声线或呢喃，这样得到的声音会更加自然。尽量减少杂音、噪音和混响的干扰。 ​\n\n- 音频质量：确保录音中只包含一个人的声音。 ​\n\n| 请求方式​ | PUT |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/audio/voiceprint_groups/:group_id/features/:feature_id​ |\n| 权限​ | updateVoiceprintFeature​确保调用该接口使用的个人令牌开通了updateVoiceprintFeature权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 更新指定声纹组中的声纹。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | multipart/form-data​ | 文件类型。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| group_id​ | Integer​ | 必选​ | 75143038117378***​ | 声纹所属的声纹组 ID。你可以通过查看声纹组列表API 查看声纹组 ID。​ |\n| feature_id​ | Integer​ | 必选​ | 75142739101294****​ | 待更新的声纹 ID。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| file​ | File​ | 可选​ | @/voice_test_data/test_1.wav;type=audio/wav​ | 上传本地预先录制好的更新的音频文件。​ |\n| name​ | String​ | 可选​ | 妈妈​ | 更新后的声纹的名称。​ |\n| desc​ | String​ | 可选​ | 妈妈的声音​ | 更新后的声纹的描述。​ |\n| sample_rate​ | Integer​ | 可选​ | 16000​ | 采样率，单位：Hz。当文件类型为 pcm 时需传入该参数。​默认为 16kHz 采样率。​ |\n| channel​ | Integer​ | 可选​ | 1​ | 声道数，当文件类型为 pcm 时需传入该参数。​默认为单声道。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | { \"logid\": \"202410242028595CCF353CEC86A8*****\" }​ | 该请求返回的详细信息。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/list_voiceprint",
      "title": "查询声纹列表",
      "content": {
        "sections": [],
        "full_text": "查询声纹列表\n\n查询指定声纹组中的声纹列表。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/audio/voiceprint_groups/:group_id/features\n\n​\n\n权限\n\n​\n\nlistVoiceprintFeature\n\n​\n\n确保调用该接口使用的个人令牌开通了\n\nlistVoiceprintFeature\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n查询声纹组中的声纹列表。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ngroup_id\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\n75143038117378***\n\n​\n\n声纹组 ID。你可以通过\n\n查看声纹组列表\n\nAPI 查看声纹组 ID。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\npage_num\n\n​\n\nLong\n\n​\n\n可选\n\n​\n\n1\n\n​\n\n查询结果分页展示时，此参数用于设置查看的页码。最小值为 1，默认为 1。\n\n​\n\npage_size\n\n​\n\nLong\n\n​\n\n可选\n\n​\n\n5\n\n​\n\n查询结果分页展示时，此参数用于设置每页返回的数据量。取值范围为 1~200，默认为 10。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndata\n\n​\n\nObject of\n\nGetVoicePrintGroupFeatureListData\n\n​\n\n\\\n\n​\n\n返回的声纹列表及相关信息。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\n​\n\nGetVoicePrintGroupFeatureListData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nitems\n\n​\n\nArray of\n\nVoicePrintGroupFeature\n\n​\n\n\\\n\n​\n\n声纹列表，包含多个声纹的详细信息。\n\n​\n\ntotal\n\n​\n\nLong\n\n​\n\n5\n\n​\n\n声纹数量。\n\n​\n\n​\n\nVoicePrintGroupFeature\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n751427391012944***\n\n​\n\n声纹的 ID。\n\n​\n\ndesc\n\n​\n\nString\n\n​\n\n妈妈的声纹\n\n​\n\n声纹的描述。\n\n​\n\nname\n\n​\n\nString\n\n​\n\n妈妈\n\n​\n\n声纹的名称。\n\n​\n\ngroup_id\n\n​\n\nString\n\n​\n\n75143038117378***\n\n​\n\n声纹组的 ID。\n\n​\n\nicon_url\n\n​\n\nString\n\n​\n\nhttps://example.com/voiceprint/default_voiceprint_group_feature_icon.png\n\n​\n\n声纹的头像 URL。\n\n​\n\naudio_url\n\n​\n\nString\n\n​\n\nhttps://example.com/audio/751427391012944***.\n\npcm\n\n​\n\n声纹原始音频的 URL 地址，用于访问或下载该声纹对应的音频文件。\n\n​\n\nuser_info\n\n​\n\nObject of\n\nUserInfo\n\n​\n\n{\"id\":\"324566624\",\"name\":\"小王\",\"nickname\":\"小王\",\"avatar_url\":\"\n\nhttps://example.com/avatar/751427391012944***.image\n\n\"}\n\n​\n\n声纹创建者的用户信息。\n\n​\n\ncreated_at\n\n​\n\nLong\n\n​\n\n1714567890123\n\n​\n\n声纹的创建时间，以 Unix 时间戳格式表示，单位为秒。\n\n​\n\nupdated_at\n\n​\n\nLong\n\n​\n\n1714567890223\n\n​\n\n声纹的更新时间，以 Unix 时间戳格式表示，单位为秒。\n\n​\n\n​\n\nUserInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n14891859095***\n\n​\n\n声纹创建者的扣子用户的 UID。\n\n​\n\nname\n\n​\n\nString\n\n​\n\n小王\n\n​\n\n声纹创建者的扣子用户名。\n\n​\n\nnickname\n\n​\n\nString\n\n​\n\n小王\n\n​\n\n声纹创建者的扣子用户昵称。\n\n​\n\navatar_url\n\n​\n\nString\n\n​\n\nhttps://example.com/e7b19241fb224cea967df\n\n****\n\n_1080_1080.png~0x0.image\n\n​\n\n声纹创建者的扣子用户头像。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl -X POST 'https\n\n:\n\n//api.coze.cn/v1/audio/voiceprint_groups/7511988408546279468/features?page_num=1&page_size=10' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_aqtInOKBi7ThceVOrVvm51kguh39iXlvHxvjr9NtZ8pe20xh2qLniSZWeq***' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20250604160710FB81ACE4CFC****\"\n\n​\n\n},\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"total\"\n\n:\n\n1\n\n,\n\n​\n\n\"items\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"7511995644152****\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"test_feature\"\n\n,\n\n​\n\n\"user_info\"\n\n:\n\n{\n\n​\n\n\"id\"\n\n:\n\n14891859095\n\n***\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"testcase1\"\n\n,\n\n​\n\n\"nickname\"\n\n:\n\n\"5707\"\n\n,\n\n​\n\n\"avatar_url\"\n\n:\n\n\"https://example.com/img/user-avatar/assets/e7b19241fb224cea967dfa****_1080_1080.png~0x0.image\"\n\n​\n\n},\n\n​\n\n\"audio_url\"\n\n:\n\n\"https://example.com/voiceprint/9a71240d-f316-4bb6-8a5f-8a****\"\n\n,\n\n​\n\n\"desc\"\n\n:\n\n\"This is a test feature\"\n\n,\n\n​\n\n\"icon_url\"\n\n:\n\n\"https://example.com/voiceprint/default_voiceprint_group_feature_icon.png\"\n\n,\n\n​\n\n\"group_id\"\n\n:\n\n\"75119884085462***\"\n\n,\n\n​\n\n\"created_at\"\n\n:\n\n1749024396\n\n,\n\n​\n\n\"updated_at\"\n\n:\n\n1749024396\n\n​\n\n}\n\n​\n\n]\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n更新声纹\n\n下一篇\n\n删除声纹",
        "links": []
      },
      "markdown": "| 请求方式​ | GET |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/audio/voiceprint_groups/:group_id/features​ |\n| 权限​ | listVoiceprintFeature​确保调用该接口使用的个人令牌开通了listVoiceprintFeature权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 查询声纹组中的声纹列表。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| group_id​ | Integer​ | 必选​ | 75143038117378***​ | 声纹组 ID。你可以通过查看声纹组列表API 查看声纹组 ID。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| page_num​ | Long​ | 可选​ | 1​ | 查询结果分页展示时，此参数用于设置查看的页码。最小值为 1，默认为 1。​ |\n| page_size​ | Long​ | 可选​ | 5​ | 查询结果分页展示时，此参数用于设置每页返回的数据量。取值范围为 1~200，默认为 10。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0 | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| data​ | Object ofGetVoicePrintGroupFeatureListData​ | \\​ | 返回的声纹列表及相关信息。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| items​ | Array ofVoicePrintGroupFeature​ | \\​ | 声纹列表，包含多个声纹的详细信息。​ |\n| total​ | Long​ | 5​ | 声纹数量。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 751427391012944***​ | 声纹的 ID。​ |\n| desc​ | String​ | 妈妈的声纹​ | 声纹的描述。​ |\n| name​ | String​ | 妈妈​ | 声纹的名称。​ |\n| group_id​ | String​ | 75143038117378***​ | 声纹组的 ID。​ |\n| icon_url​ | String​ | https://example.com/voiceprint/default_voiceprint_group_feature_icon.png​ | 声纹的头像 URL。​ |\n| audio_url​ | String​ | https://example.com/audio/751427391012944***.pcm​ | 声纹原始音频的 URL 地址，用于访问或下载该声纹对应的音频文件。​ |\n| user_info​ | Object ofUserInfo​ | {\"id\":\"324566624\",\"name\":\"小王\",\"nickname\":\"小王\",\"avatar_url\":\"https://example.com/avatar/751427391012944***.image\"}​ | 声纹创建者的用户信息。​ |\n| created_at​ | Long​ | 1714567890123​ | 声纹的创建时间，以 Unix 时间戳格式表示，单位为秒。​ |\n| updated_at​ | Long​ | 1714567890223​ | 声纹的更新时间，以 Unix 时间戳格式表示，单位为秒。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 14891859095***​ | 声纹创建者的扣子用户的 UID。​ |\n| name​ | String​ | 小王​ | 声纹创建者的扣子用户名。​ |\n| nickname​ | String​ | 小王​ | 声纹创建者的扣子用户昵称。​ |\n| avatar_url​ | String​ | https://example.com/e7b19241fb224cea967df****_1080_1080.png~0x0.image​ | 声纹创建者的扣子用户头像。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/delete_voiceprint",
      "title": "删除声纹",
      "content": {
        "sections": [],
        "full_text": "删除声纹\n\n删除声纹。\n\n​\n\n接口限制\n\n​\n\n只有声纹创建者能删除对应的声纹。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nDELETE\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/audio/voiceprint_groups/:group_id/features/:feature_id\n\n​\n\n权限\n\n​\n\ndeleteVoiceprintFeature\n\n​\n\n确保调用该接口使用的个人令牌开通了\n\ndeleteVoiceprintFeature\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n删除声纹。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ngroup_id\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\n75143038117378***\n\n​\n\n声纹所属的声纹组 ID。你可以通过\n\n查看声纹组列表\n\nAPI 查看声纹组 ID。\n\n​\n\nfeature_id\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\n75142739101294****\n\n​\n\n待删除的声纹 ID。你可以通过\n\n查看声纹列表\n\nAPI 查看声纹 ID。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{ \"logid\": \"202410242028595CCF353CEC86A8*****\" }\n\n​\n\n该请求返回的详细信息。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request DELETE 'https\n\n:\n\n//api.coze.cn/v1/audio/voiceprint_groups/75119884085462****/features/75119956441531****' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"202506041638009B2412738DD***\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n查询声纹列表\n\n下一篇\n\n声纹特征比对",
        "links": []
      },
      "markdown": "| 请求方式​ | DELETE |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/audio/voiceprint_groups/:group_id/features/:feature_id​ |\n| 权限​ | deleteVoiceprintFeature​确保调用该接口使用的个人令牌开通了deleteVoiceprintFeature权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 删除声纹。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| group_id​ | Integer​ | 必选​ | 75143038117378***​ | 声纹所属的声纹组 ID。你可以通过查看声纹组列表API 查看声纹组 ID。​ |\n| feature_id​ | Integer​ | 必选​ | 75142739101294****​ | 待删除的声纹 ID。你可以通过查看声纹列表API 查看声纹 ID。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | { \"logid\": \"202410242028595CCF353CEC86A8*****\" }​ | 该请求返回的详细信息。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/identify_voiceprint",
      "title": "声纹特征比对",
      "content": {
        "sections": [],
        "full_text": "声纹特征比对\n\n声纹特征比对。\n\n​\n\n接口说明\n\n​\n\n注意\n\n声纹特征比对将产生声纹识别费用，详细费用说明可参考\n\n音视频费用\n\n。\n\n​\n\n​\n\n你可以调用本 API 识别说话者的身份。上传说话者的音频，扣子编程将根据该音频与指定声纹组中已有的声纹进行对比，计算相似度，并返回与各声纹的匹配度列表。\n\n​\n\n上传的音频文件的限制如下：\n\n​\n\n​\n\n限制\n\n​\n\n说明\n\n​\n\n文件格式\n\n​\n\n支持的文件格式包括 wav 和 pcm。其中 pcm 仅支持 16kHz 采样率、单声道、16 位采样深度。\n\n​\n\n文件大小\n\n​\n\n每个音频文件最大为 4 MB。\n\n​\n\n文件录制\n\n​\n\n录制环境：选择安静的空间，建议将麦克风放置在离说话人 50 厘米以内的位置，尽量保持自然的发声状态，避免刻意改变声线或呢喃，这样得到的声音会更加自然。尽量减少杂音、噪音和混响的干扰。\n\n​\n\n音频质量：确保录音中只包含一个人的声音。\n\n​\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/audio/voiceprint_groups/:group_id/speaker_identify\n\n​\n\n权限\n\n​\n\nidentifyInVoiceprintGroup\n\n​\n\n确保调用该接口使用的个人令牌开通了\n\nidentifyInVoiceprintGroup\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n声纹特征比对。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\napplication/json\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\nmultipart/form-data\n\n​\n\n文件类型。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ngroup_id\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n75143038117378***\n\n​\n\n声纹所属的声纹组 ID。你可以通过\n\n查看声纹组列表\n\nAPI 查看声纹组 ID。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nfile\n\n​\n\nFile\n\n​\n\n必选\n\n​\n\n@/voice_test_data/test_1.wav;type=audio/wav\n\n​\n\n上传需要进行声纹特征比对的音频文件。\n\n​\n\ntop_k\n\n​\n\nInterger\n\n​\n\n可选\n\n​\n\n5\n\n​\n\n返回特征匹配度最高的前 k 项结果。若未指定，则默认返回全部匹配结果。\n\n​\n\nsample_rate\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n16000\n\n​\n\n采样率，单位：Hz。当文件类型为 pcm 时需传入该参数。\n\n​\n\n默认的采样率为 16kHz。\n\n​\n\nchannel\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n1\n\n​\n\n声道数，当文件类型为 pcm 时需传入该参数。\n\n​\n\n默认为单声道。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndata\n\n​\n\nObject of\n\nSpeakerIdentifyData\n\n​\n\n[{\"score\":60,\"feature_id\":\"751427391012944***\",\"feature_desc\":\"妈妈的声音\",\"feature_name\":\"妈妈\"}]\n\n​\n\n声纹匹配度列表，包含测试音频与声纹库中已有声纹的匹配信息。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{ \"logid\": \"202410242028595CCF353CEC86A8*****\" }\n\n​\n\n本次请求返回的详细信息。\n\n​\n\n​\n\nSpeakerIdentifyData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nfeature_score_list\n\n​\n\nArray of\n\nFeatureScore\n\n​\n\n{\"score\":60,\"feature_id\":\"751427391012944***\",\"feature_desc\":\"妈妈的声音\",\"feature_name\":\"妈妈\"}\n\n​\n\n声纹匹配度列表，包含测试音频与声纹库中已有声纹的匹配信息。\n\n​\n\n​\n\nFeatureScore\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nscore\n\n​\n\nDouble\n\n​\n\n60\n\n​\n\n声纹匹配度。表示测试音频与声纹库中已有声纹的匹配程度，数值范围为 0~100，数值越高表示匹配度越高。\n\n​\n\nfeature_id\n\n​\n\nString\n\n​\n\n751427391012944***\n\n​\n\n与测试音频匹配的声纹的 ID。\n\n​\n\nfeature_desc\n\n​\n\nString\n\n​\n\n妈妈的声音\n\n​\n\n声纹的描述。\n\n​\n\nfeature_name\n\n​\n\nString\n\n​\n\n妈妈\n\n​\n\n声纹的名称。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/audio/voiceprint_groups/7513864977189*****/speaker_identify' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\nmultipart/form-data' \\\n\n​\n\n-F 'file=@/voice_test_data/test_3.wav;type=audio/wav'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"feature_score_list\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"score\"\n\n:\n\n23.139079321463843\n\n,\n\n​\n\n\"feature_name\"\n\n:\n\n\"妈妈的声音\"\n\n,\n\n​\n\n\"feature_desc\"\n\n:\n\n\"妈妈的声音\"\n\n,\n\n​\n\n\"feature_id\"\n\n:\n\n\"7513865283312***\"\n\n​\n\n}\n\n​\n\n]\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"202506091647409DF126AF380****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n删除声纹\n\n下一篇\n\n创建知识库",
        "links": []
      },
      "markdown": "| 限制​ | 说明​ |\n| 文件格式​ | 支持的文件格式包括 wav 和 pcm。其中 pcm 仅支持 16kHz 采样率、单声道、16 位采样深度。​ |\n| 文件大小​ | 每个音频文件最大为 4 MB。​ |\n| 文件录制​ | 录制环境：选择安静的空间，建议将麦克风放置在离说话人 50 厘米以内的位置，尽量保持自然的发声状态，避免刻意改变声线或呢喃，这样得到的声音会更加自然。尽量减少杂音、噪音和混响的干扰。​音频质量：确保录音中只包含一个人的声音。​ |\n\n- 录制环境：选择安静的空间，建议将麦克风放置在离说话人 50 厘米以内的位置，尽量保持自然的发声状态，避免刻意改变声线或呢喃，这样得到的声音会更加自然。尽量减少杂音、噪音和混响的干扰。 ​\n\n- 音频质量：确保录音中只包含一个人的声音。 ​\n\n| 请求方式​ | POST |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/audio/voiceprint_groups/:group_id/speaker_identify​ |\n| 权限​ | identifyInVoiceprintGroup​确保调用该接口使用的个人令牌开通了identifyInVoiceprintGroup权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 声纹特征比对。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | application/json​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | multipart/form-data​ | 文件类型。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| group_id​ | Integer​ | 可选​ | 75143038117378***​ | 声纹所属的声纹组 ID。你可以通过查看声纹组列表API 查看声纹组 ID。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| file​ | File​ | 必选​ | @/voice_test_data/test_1.wav;type=audio/wav​ | 上传需要进行声纹特征比对的音频文件。​ |\n| top_k​ | Interger​ | 可选​ | 5​ | 返回特征匹配度最高的前 k 项结果。若未指定，则默认返回全部匹配结果。​ |\n| sample_rate​ | Integer​ | 可选​ | 16000​ | 采样率，单位：Hz。当文件类型为 pcm 时需传入该参数。​默认的采样率为 16kHz。​ |\n| channel​ | Integer​ | 可选​ | 1​ | 声道数，当文件类型为 pcm 时需传入该参数。​默认为单声道。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| data​ | Object ofSpeakerIdentifyData​ | [{\"score\":60,\"feature_id\":\"751427391012944***\",\"feature_desc\":\"妈妈的声音\",\"feature_name\":\"妈妈\"}]​ | 声纹匹配度列表，包含测试音频与声纹库中已有声纹的匹配信息。​ |\n| detail​ | Object ofResponseDetail​ | { \"logid\": \"202410242028595CCF353CEC86A8*****\" }​ | 本次请求返回的详细信息。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| feature_score_list​ | Array ofFeatureScore​ | {\"score\":60,\"feature_id\":\"751427391012944***\",\"feature_desc\":\"妈妈的声音\",\"feature_name\":\"妈妈\"}​ | 声纹匹配度列表，包含测试音频与声纹库中已有声纹的匹配信息。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| score​ | Double​ | 60​ | 声纹匹配度。表示测试音频与声纹库中已有声纹的匹配程度，数值范围为 0~100，数值越高表示匹配度越高。​ |\n| feature_id​ | String​ | 751427391012944***​ | 与测试音频匹配的声纹的 ID。​ |\n| feature_desc​ | String​ | 妈妈的声音​ | 声纹的描述。​ |\n| feature_name​ | String​ | 妈妈​ | 声纹的名称。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/create_dataset",
      "title": "创建知识库",
      "content": {
        "sections": [],
        "full_text": "创建知识库\n\n调用此接口以创建一个扣子知识库。\n\n​\n\n调用此 API，你可以创建一个文本知识库或图片知识库。新知识库默认为空，需要通过 API\n\n创建知识库文件\n\n上传文本或图片。\n\n​\n\n说明\n\n知识库分为扣子知识库和火山知识库，该 API 仅用于创建扣子知识库，不支持火山知识库的创建，如果需要创建火山知识库，请参见\n\n创建火山知识库 API 文档\n\n。\n\n​\n\n暂不支持通过 API 创建表格知识库。\n\n​\n\n创建知识库时如需设置知识库图标，需要提前调用 API\n\n上传文件\n\n，将图片文件上传至扣子编程。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/datasets\n\n​\n\n​\n\n权限\n\n​\n\ncreateKnowledge\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\ncreateKnowledge\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n调用此接口创建知识库。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n请求正文的方式。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nname\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n产品文档\n\n​\n\n知识库名称，长度不超过 100 个字符。\n\n​\n\nspace_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n744632974166804****\n\n​\n\n知识库所在的空间的工作空间 ID。Space ID 是空间的唯一标识。\n\n​\n\n进入指定空间，空间页面 URL 中\n\nw\n\n参数后的数字就是 工作空间 ID。例如\n\nhttps://code.coze.cn/w/75814654762959***/projects\n\n，Space ID 为\n\n75814654762959***\n\n。\n\n​\n\nformat_type\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\n2\n\n​\n\n知识库类型。取值包括：\n\n​\n\n0：文本类型\n\n​\n\n2：图片类型\n\n​\n\ndescription\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nA 的产品文档\n\n​\n\n知识库描述信息。\n\n​\n\nfile_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n744667846938145****\n\n​\n\n知识库图标，应传入\n\n上传文件\n\n接口中获取的 file_id。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nObject of\n\nCreateDatasetOpenApiData\n\n​\n\n{ \"dataset_id\": \"744668935865830****\" }\n\n​\n\n返回内容\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n状态码。\n\n​\n\n0 代表调用成功。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n20241210160547B25AEC1917B03A2F1F07\n\n​\n\n本次请求的日志 ID。\n\n​\n\n​\n\nCreateDatasetOpenApiData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndataset_id\n\n​\n\nString\n\n​\n\n744668935865830****\n\n​\n\n新知识库的 ID。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/datasets' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_xitq9LWlowpX3qGCih1lwpAdzvXN****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"name\"\n\n:\n\n\"产品文档\"\n\n,\n\n​\n\n\"description\"\n\n:\n\n\"产品文档\"\n\n,\n\n​\n\n\"space_id\"\n\n:\n\n\"731121948439879****\"\n\n,\n\n​\n\n\"format_type\"\n\n:\n\n2\n\n,\n\n​\n\n\"file_id\"\n\n:\n\n\"744667846938145****\"\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"dataset_id\"\n\n:\n\n\"744668935865830****\"\n\n​\n\n},\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210160547B25AEC1917B0***\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n声纹特征比对\n\n下一篇\n\n查看知识库列表",
        "links": []
      },
      "markdown": "- 知识库分为扣子知识库和火山知识库，该 API 仅用于创建扣子知识库，不支持火山知识库的创建，如果需要创建火山知识库，请参见 创建火山知识库 API 文档 。 ​\n\n- 暂不支持通过 API 创建表格知识库。 ​\n\n- 创建知识库时如需设置知识库图标，需要提前调用 API 上传文件 ，将图片文件上传至扣子编程。 ​\n\n| 请求方式​ | POST​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/datasets​​ |\n| 权限​ | createKnowledge​确保调用该接口使用的访问令牌开通了createKnowledge权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 调用此接口创建知识库。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| name​ | String​ | 必选​ | 产品文档​ | 知识库名称，长度不超过 100 个字符。​ |\n| space_id​ | String​ | 必选​ | 744632974166804****​ | 知识库所在的空间的工作空间 ID。Space ID 是空间的唯一标识。​进入指定空间，空间页面 URL 中w参数后的数字就是 工作空间 ID。例如https://code.coze.cn/w/75814654762959***/projects，Space ID 为75814654762959***。​ |\n| format_type​ | Integer​ | 必选​ | 2​ | 知识库类型。取值包括：​0：文本类型​2：图片类型​ |\n| description​ | String​ | 可选​ | A 的产品文档​ | 知识库描述信息。​ |\n| file_id​ | String​ | 可选​ | 744667846938145****​ | 知识库图标，应传入上传文件接口中获取的 file_id。​ |\n\n- 0：文本类型 ​\n\n- 2：图片类型 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | Object ofCreateDatasetOpenApiData​ | { \"dataset_id\": \"744668935865830****\" }​ | 返回内容​ |\n| code​ | Long​ | 0​ | 状态码。​0 代表调用成功。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | 20241210160547B25AEC1917B03A2F1F07​ | 本次请求的日志 ID。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| dataset_id​ | String​ | 744668935865830****​ | 新知识库的 ID。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/list_dataset",
      "title": "查看知识库列表",
      "content": {
        "sections": [],
        "full_text": "查看知识库列表\n\n调用此接口查看指定空间资源库下的全部知识库。\n\n​\n\n此接口可查看工作空间下，空间资源库中的全部知识库，包括扣子知识库和火山知识库，无论知识库是否归本人所有。\n\n​\n\n说明\n\n暂不支持通过 API 查看低代码应用中的知识库。\n\n​\n\n暂不支持通过该 API 查看火山知识库中的文件列表等详细信息。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/datasets\n\n​\n\n​\n\n权限\n\n​\n\nlistKnowledge\n\n​\n\n确保调用该接口使用的个人令牌开通了\n\nlistKnowledge\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n调用此接口查看指定空间下的全部知识库。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n请求正文的方式。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nspace_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n731121948439879****\n\n​\n\n知识库所在的空间的 Space ID。Space ID 是空间的唯一标识。\n\n​\n\n进入指定空间，空间页面 URL 中\n\nw\n\n参数后的数字就是 工作空间 ID。例如\n\nhttps://code.coze.cn/w/75814654762959***/projects\n\n，工作空间 ID 为\n\n75814654762959***\n\n。\n\n​\n\nname\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n知识库\n\n​\n\n知识库名称，支持模糊搜索。\n\n​\n\nformat_type\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n2\n\n​\n\n类型\n\n​\n\npage_num\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n1\n\n​\n\n查询结果分页展示时，此参数用于设置查看的页码。最小值为 1，默认为 1。\n\n​\n\npage_size\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n5\n\n​\n\n查询结果分页展示时，此参数用于设置每页返回的数据量。取值范围为 1~300，默认为 10。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nObject of\n\nListDatasetOpenApiData\n\n​\n\n参考请求示例部分\n\n​\n\n接口响应的业务信息。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n4000\n\n​\n\n状态码。\n\n​\n\n0 代表调用成功。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{ \"logid\": \"20250106172024B5F607030EFFAD653960\" }\n\n​\n\n响应详情信息。\n\n​\n\n​\n\nListDatasetOpenApiData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ntotal_count\n\n​\n\nInteger\n\n​\n\n1\n\n​\n\n空间中的知识库总数量。\n\n​\n\ndataset_list\n\n​\n\nArray of\n\nDataset\n\n​\n\n参考请求示例部分\n\n​\n\n知识库详情。\n\n​\n\n​\n\nDataset\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nname\n\n​\n\nString\n\n​\n\nopenapi\n\n​\n\n知识库名称。\n\n​\n\nstatus\n\n​\n\nInteger\n\n​\n\n1\n\n​\n\n知识库状态，取值包括：\n\n​\n\n1：启用中\n\n​\n\n3：未启用\n\n​\n\ncan_edit\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n当前用户是否为该知识库的所有者。\n\n​\n\nicon_uri\n\n​\n\nString\n\n​\n\nFileBizType.BIZ_DATASET_ICON/217526895615****.jpg\n\n​\n\n知识库图标的 uri。\n\n​\n\nicon_url\n\n​\n\nString\n\n​\n\nhttps://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/FileBizType.BIZ_DATASET_ICON/217526895615****.jpg?lk3s=5ec9c6e9&x-expires=1733821937&x-signature=U6X%2BhLXnRk8%2FHr1xP7wiMJ3IE****\n\n​\n\n知识库图标的 URL。\n\n​\n\nspace_id\n\n​\n\nString\n\n​\n\n731121948439879****\n\n​\n\n知识库所在空间的空间 ID。\n\n​\n\ndoc_count\n\n​\n\nInteger\n\n​\n\n2\n\n​\n\n知识库中的文件数量。\n\n​\n\nfile_list\n\n​\n\nArray of String\n\n​\n\n[\"8f6a939c9aad434fa81624556abf8a62****.png\",\"9k7a939c9aad434fa81624556abf8a62****.png\"]\n\n​\n\n知识库中的文件列表。\n\n​\n\nhit_count\n\n​\n\nInteger\n\n​\n\n0\n\n​\n\n知识库命中总次数。\n\n​\n\navatar_url\n\n​\n\nString\n\n​\n\nhttps://p6-passport.byteacctimg.com/img/user-avatar/assets/e7b19241fb224cea967****.png~300x300.image\n\n​\n\n知识库创建者的头像 url。\n\n​\n\ncreator_id\n\n​\n\nString\n\n​\n\n217526895615****\n\n​\n\n知识库创建者的扣子用户 UID。\n\n​\n\ndataset_id\n\n​\n\nString\n\n​\n\n744668935865830****\n\n​\n\n知识库 ID。\n\n​\n\ncreate_time\n\n​\n\nInteger\n\n​\n\n1733817948\n\n​\n\n知识库创建时间，秒级时间戳。\n\n​\n\ndescription\n\n​\n\nString\n\n​\n\ndescription\n\n​\n\n知识库描述信息。\n\n​\n\nformat_type\n\n​\n\nInteger\n\n​\n\n2\n\n​\n\n知识库类型，包括：\n\n​\n\n0：文本类型\n\n​\n\n1：表格类型\n\n​\n\n2：图片类型\n\n​\n\nslice_count\n\n​\n\nInteger\n\n​\n\n1\n\n​\n\n知识库分段总数。\n\n​\n\nupdate_time\n\n​\n\nInteger\n\n​\n\n1733817948\n\n​\n\n知识库的更新时间，秒级时间戳。\n\n​\n\ncreator_name\n\n​\n\nString\n\n​\n\nyour name\n\n​\n\n知识库创建者的用户名。\n\n​\n\nall_file_size\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n知识库中已存文件的总大小。\n\n​\n\nbot_used_count\n\n​\n\nInteger\n\n​\n\n0\n\n​\n\n知识库已绑定的智能体数量。\n\n​\n\nchunk_strategy\n\n​\n\nObject of\n\nChunkStrategy\n\n​\n\n{“chunk_type”: 0}\n\n​\n\n知识库的切片规则。\n\n​\n\nfailed_file_list\n\n​\n\nArray of String\n\n​\n\n[\"8f6a939c9aad434fa81624556abf8a62****.png\",\"9k7a939c9aad434fa81624556abf8a62****.png\"]\n\n​\n\n处理失败的文件列表。\n\n​\n\nprocessing_file_list\n\n​\n\nArray of String\n\n​\n\n[\"8f6a939c9aad434fa81624556abf8a62****.png\",\"9k7a939c9aad434fa81624556abf8a62****.png\"]\n\n​\n\n处理中的文件名。\n\n​\n\nprocessing_file_id_list\n\n​\n\nArray of String\n\n​\n\n[\"744779282568390****\"]\n\n​\n\n处理中的文件 ID。\n\n​\n\n​\n\nChunkStrategy\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nchunk_type\n\n​\n\nInteger\n\n​\n\n0\n\n​\n\n分段设置。取值包括：\n\n​\n\n0：自动分段与清洗。采用扣子编程预置规则进行数据分段与处理。\n\n​\n\n1：自定义。此时需要通过 separator、max_tokens、remove_extra_spaces 和 remove_urls_emails 分段规则细节。\n\n​\n\nseparator\n\n​\n\nString\n\n​\n\n#\n\n​\n\n分段标识符。\n\n​\n\n在 chunk_type=1 时必选。\n\n​\n\nmax_tokens\n\n​\n\nLong\n\n​\n\n800\n\n​\n\n最大分段长度，取值范围为 100~2000。\n\n​\n\n在 chunk_type=1 时必选。\n\n​\n\nremove_extra_spaces\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n是否自动过滤连续的空格、换行符和制表符。取值包括：\n\n​\n\ntrue：自动过滤\n\n​\n\nfalse：（默认）不自动过滤\n\n​\n\n在 chunk_type=1 时生效。\n\n​\n\nremove_urls_emails\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n是否自动过滤所有 URL 和电子邮箱地址。取值包括：\n\n​\n\ntrue：自动过滤\n\n​\n\nfalse：（默认）不自动过滤\n\n​\n\n在 chunk_type=1 时生效。\n\n​\n\ncaption_type\n\n​\n\nInteger\n\n​\n\n0\n\n​\n\n图片知识库的标注方式：\n\n​\n\n0：（默认）系统自动标注描述信息\n\n​\n\n1：手工标注。上传图片后需要再次调用 API\n\n更新知识库图片描述\n\n来手动设置标注。\n\n​\n\n说明\n\n在空的知识库中首次上传图片时，需要手工设置\n\ncaption_type\n\n参数的值，否则会报错。\n\n​\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request GET 'https\n\n:\n\n//api.coze.cn/v1/datasets?space_id=731121948439879****&name=知识库&format_type=&page_num=1&page_size=5' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_O******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"total_count\"\n\n:\n\n1\n\n,\n\n​\n\n\"dataset_list\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"hit_count\"\n\n:\n\n0\n\n,\n\n​\n\n\"doc_count\"\n\n:\n\n0\n\n,\n\n​\n\n\"status\"\n\n:\n\n1\n\n,\n\n​\n\n\"icon_url\"\n\n:\n\n\"https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/FileBizType.BIZ_DATASET_ICON/217526895615****.jpg?lk3s=5ec9c6e9&x-expires=1733821937&x-signature=U6X%2BhLXnRk8%2FHr1xP7wiMJ3IE****\"\n\n,\n\n​\n\n\"creator_name\"\n\n:\n\n\"xxx\"\n\n,\n\n​\n\n\"avatar_url\"\n\n:\n\n\"https://p6-passport.byteacctimg.com/img/user-avatar/assets/e7b19241fb224cea967****.png~300x300.image\"\n\n,\n\n​\n\n\"can_edit\"\n\n:\n\ntrue\n\n,\n\n​\n\n\"space_id\"\n\n:\n\n\"731121948439879****\"\n\n,\n\n​\n\n\"failed_file_list\"\n\n:\n\n[],\n\n​\n\n\"processing_file_id_list\"\n\n:\n\n[],\n\n​\n\n\"description\"\n\n:\n\n\"openapi\"\n\n,\n\n​\n\n\"chunk_strategy\"\n\n:\n\n{},\n\n​\n\n\"create_time\"\n\n:\n\n1733817948\n\n,\n\n​\n\n\"slice_count\"\n\n:\n\n0\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"openapi_img3\"\n\n,\n\n​\n\n\"format_type\"\n\n:\n\n2\n\n,\n\n​\n\n\"project_id\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"all_file_size\"\n\n:\n\n\"0\"\n\n,\n\n​\n\n\"update_time\"\n\n:\n\n1733817948\n\n,\n\n​\n\n\"creator_id\"\n\n:\n\n\"217526895615****\"\n\n,\n\n​\n\n\"file_list\"\n\n:\n\n[],\n\n​\n\n\"processing_file_list\"\n\n:\n\n[],\n\n​\n\n\"icon_uri\"\n\n:\n\n\"FileBizType.BIZ_DATASET_ICON/217526895615****.jpg\"\n\n,\n\n​\n\n\"dataset_id\"\n\n:\n\n\"744668935865830****\"\n\n,\n\n​\n\n\"bot_used_count\"\n\n:\n\n0\n\n​\n\n}\n\n​\n\n]\n\n​\n\n},\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210161217C90C9ABB86428***\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n创建知识库\n\n下一篇\n\n修改知识库信息",
        "links": []
      },
      "markdown": "- 暂不支持通过 API 查看低代码应用中的知识库。 ​\n\n- 暂不支持通过该 API 查看火山知识库中的文件列表等详细信息。 ​\n\n| 请求方式​ | GET​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/datasets​​ |\n| 权限​ | listKnowledge​确保调用该接口使用的个人令牌开通了listKnowledge权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 调用此接口查看指定空间下的全部知识库。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| space_id​ | String​ | 必选​ | 731121948439879****​ | 知识库所在的空间的 Space ID。Space ID 是空间的唯一标识。​进入指定空间，空间页面 URL 中w参数后的数字就是 工作空间 ID。例如https://code.coze.cn/w/75814654762959***/projects，工作空间 ID 为75814654762959***。​ |\n| name​ | String​ | 可选​ | 知识库​ | 知识库名称，支持模糊搜索。​ |\n| format_type​ | Integer​ | 可选​ | 2​ | 类型​ |\n| page_num​ | Integer​ | 可选​ | 1​ | 查询结果分页展示时，此参数用于设置查看的页码。最小值为 1，默认为 1。​ |\n| page_size​ | Integer​ | 可选​ | 5​ | 查询结果分页展示时，此参数用于设置每页返回的数据量。取值范围为 1~300，默认为 10。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | Object ofListDatasetOpenApiData​ | 参考请求示例部分​ | 接口响应的业务信息。​ |\n| code​ | Long​ | 4000​ | 状态码。​0 代表调用成功。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | { \"logid\": \"20250106172024B5F607030EFFAD653960\" }​ | 响应详情信息。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| total_count​ | Integer​ | 1​ | 空间中的知识库总数量。​ |\n| dataset_list​ | Array ofDataset​ | 参考请求示例部分​ | 知识库详情。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| name​ | String​ | openapi​ | 知识库名称。​ |\n| status​ | Integer​ | 1​ | 知识库状态，取值包括：​1：启用中​3：未启用​ |\n| can_edit​ | Boolean​ | true​ | 当前用户是否为该知识库的所有者。​ |\n| icon_uri​ | String​ | FileBizType.BIZ_DATASET_ICON/217526895615****.jpg​ | 知识库图标的 uri。​ |\n| icon_url​ | String​ | https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/FileBizType.BIZ_DATASET_ICON/217526895615****.jpg?lk3s=5ec9c6e9&x-expires=1733821937&x-signature=U6X%2BhLXnRk8%2FHr1xP7wiMJ3IE****​ | 知识库图标的 URL。​ |\n| space_id​ | String​ | 731121948439879****​ | 知识库所在空间的空间 ID。​ |\n| doc_count​ | Integer​ | 2​ | 知识库中的文件数量。​ |\n| file_list​ | Array of String​ | [\"8f6a939c9aad434fa81624556abf8a62****.png\",\"9k7a939c9aad434fa81624556abf8a62****.png\"]​ | 知识库中的文件列表。​ |\n| hit_count​ | Integer​ | 0​ | 知识库命中总次数。​ |\n| avatar_url​ | String​ | https://p6-passport.byteacctimg.com/img/user-avatar/assets/e7b19241fb224cea967****.png~300x300.image​ | 知识库创建者的头像 url。​ |\n| creator_id​ | String​ | 217526895615****​ | 知识库创建者的扣子用户 UID。​ |\n| dataset_id​ | String​ | 744668935865830****​ | 知识库 ID。​ |\n| create_time​ | Integer​ | 1733817948​ | 知识库创建时间，秒级时间戳。​ |\n| description​ | String​ | description​ | 知识库描述信息。​ |\n| format_type​ | Integer​ | 2​ | 知识库类型，包括：​0：文本类型​1：表格类型​2：图片类型​ |\n| slice_count​ | Integer​ | 1​ | 知识库分段总数。​ |\n| update_time​ | Integer​ | 1733817948​ | 知识库的更新时间，秒级时间戳。​ |\n| creator_name​ | String​ | your name​ | 知识库创建者的用户名。​ |\n| all_file_size​ | Long​ | 0​ | 知识库中已存文件的总大小。​ |\n| bot_used_count​ | Integer​ | 0​ | 知识库已绑定的智能体数量。​ |\n| chunk_strategy​ | Object ofChunkStrategy​ | {“chunk_type”: 0}​ | 知识库的切片规则。​ |\n| failed_file_list​ | Array of String​ | [\"8f6a939c9aad434fa81624556abf8a62****.png\",\"9k7a939c9aad434fa81624556abf8a62****.png\"]​ | 处理失败的文件列表。​ |\n| processing_file_list​ | Array of String​ | [\"8f6a939c9aad434fa81624556abf8a62****.png\",\"9k7a939c9aad434fa81624556abf8a62****.png\"]​ | 处理中的文件名。​ |\n| processing_file_id_list​ | Array of String​ | [\"744779282568390****\"]​ | 处理中的文件 ID。​ |\n\n- 1：启用中 ​\n\n- 3：未启用 ​\n\n- 0：文本类型 ​\n\n- 1：表格类型 ​\n\n- 2：图片类型 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| chunk_type​ | Integer​ | 0​ | 分段设置。取值包括：​0：自动分段与清洗。采用扣子编程预置规则进行数据分段与处理。​1：自定义。此时需要通过 separator、max_tokens、remove_extra_spaces 和 remove_urls_emails 分段规则细节。​ |\n| separator​ | String​ | #​ | 分段标识符。​在 chunk_type=1 时必选。​ |\n| max_tokens​ | Long​ | 800​ | 最大分段长度，取值范围为 100~2000。​在 chunk_type=1 时必选。​ |\n| remove_extra_spaces​ | Boolean​ | true​ | 是否自动过滤连续的空格、换行符和制表符。取值包括：​true：自动过滤​false：（默认）不自动过滤​在 chunk_type=1 时生效。​ |\n| remove_urls_emails​ | Boolean​ | true​ | 是否自动过滤所有 URL 和电子邮箱地址。取值包括：​true：自动过滤​false：（默认）不自动过滤​在 chunk_type=1 时生效。​ |\n| caption_type​ | Integer​ | 0​ | 图片知识库的标注方式：​0：（默认）系统自动标注描述信息​1：手工标注。上传图片后需要再次调用 API更新知识库图片描述来手动设置标注。​说明在空的知识库中首次上传图片时，需要手工设置caption_type参数的值，否则会报错。​​ |\n\n- 0：自动分段与清洗。采用扣子编程预置规则进行数据分段与处理。 ​\n\n- 1：自定义。此时需要通过 separator、max_tokens、remove_extra_spaces 和 remove_urls_emails 分段规则细节。 ​\n\n- true：自动过滤 ​\n\n- false：（默认）不自动过滤 ​\n\n- true：自动过滤 ​\n\n- false：（默认）不自动过滤 ​\n\n- 0：（默认）系统自动标注描述信息 ​\n\n- 1：手工标注。上传图片后需要再次调用 API 更新知识库图片描述 来手动设置标注。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/update_dataset",
      "title": "修改知识库信息",
      "content": {
        "sections": [],
        "full_text": "修改知识库信息\n\n调用此接口修改扣子知识库信息。\n\n​\n\n说明\n\n此接口会全量刷新知识库的 name、file_id 和 description 配置，如果未设置这些参数，参数将恢复默认配置。\n\n​\n\n知识库分为扣子知识库和火山知识库，该 API 仅用于修改扣子知识库，不支持修改火山知识库，如果需要修改火山知识库的信息，请参见\n\n修改火山知识库信息 API 文档\n\n。\n\n​\n\n仅支持修改本人为所有者的知识库信息，包括知识库名称、图标、描述等信息。\n\n​\n\n如需修改知识库图标，需要先调用 API\n\n上传文件\n\n，将图片文件上传至扣子编程。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPUT\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/datasets/:dataset_id\n\n​\n\n​\n\n权限\n\n​\n\nupdate\n\n​\n\n确保调用该接口使用的个人令牌开通了\n\nupdate\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n调用此接口修改知识库信息。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndataset_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n744632974166804****\n\n​\n\n知识库 ID。\n\n​\n\n在扣子编程中打开指定知识库页面，页面 URL 中\n\nknowledge\n\n参数后的数字就是知识库 ID。例如\n\nhttps://www.coze.cn/space/736142423532160****/knowledge/738509371792341****\n\n，知识库 ID 为\n\n738509371792341****\n\n。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nname\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nknowledge\n\n​\n\n知识库名称，长度不超过 100 个字符。\n\n​\n\nfile_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n744667846938145****\n\n​\n\n知识库图标，应传入\n\n上传文件\n\n接口中获取的 file_id。\n\n​\n\ndescription\n\n​\n\nString\n\n​\n\n可选\n\n​\n\ndescription of knowledge\n\n​\n\n知识库描述信息。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n4000\n\n​\n\n状态码。\n\n​\n\n0 代表调用成功。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{ \"logid\": \"20250106172024B5F607030EFFAD653960\" }\n\n​\n\n响应详情信息。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request PUT 'https\n\n:\n\n//api.coze.cn/v1/datasets/:dataset_id' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_qad2rHYNqKnCmRYZW4PhVRibaS***' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"name\"\n\n:\n\n\"AI知识库\"\n\n,\n\n​\n\n\"file_id\"\n\n:\n\n\"74466784693814***\"\n\n,\n\n​\n\n\"description\"\n\n:\n\n\"这是一个关于人工智能的知识库，包含机器学习、深度学习等内容。\"\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210191248C8EF7607554A****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n查看知识库列表\n\n下一篇\n\n删除知识库",
        "links": []
      },
      "markdown": "- 此接口会全量刷新知识库的 name、file_id 和 description 配置，如果未设置这些参数，参数将恢复默认配置。 ​\n\n- 知识库分为扣子知识库和火山知识库，该 API 仅用于修改扣子知识库，不支持修改火山知识库，如果需要修改火山知识库的信息，请参见 修改火山知识库信息 API 文档 。 ​\n\n- 仅支持修改本人为所有者的知识库信息，包括知识库名称、图标、描述等信息。 ​\n\n- 如需修改知识库图标，需要先调用 API 上传文件 ，将图片文件上传至扣子编程。 ​\n\n| 请求方式​ | PUT​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/datasets/:dataset_id​​ |\n| 权限​ | update​确保调用该接口使用的个人令牌开通了update权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 调用此接口修改知识库信息。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| dataset_id​ | String​ | 必选​ | 744632974166804****​ | 知识库 ID。​在扣子编程中打开指定知识库页面，页面 URL 中knowledge参数后的数字就是知识库 ID。例如https://www.coze.cn/space/736142423532160****/knowledge/738509371792341****，知识库 ID 为738509371792341****。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| name​ | String​ | 必选​ | knowledge​ | 知识库名称，长度不超过 100 个字符。​ |\n| file_id​ | String​ | 可选​ | 744667846938145****​ | 知识库图标，应传入上传文件接口中获取的 file_id。​ |\n| description​ | String​ | 可选​ | description of knowledge​ | 知识库描述信息。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 4000​ | 状态码。​0 代表调用成功。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | { \"logid\": \"20250106172024B5F607030EFFAD653960\" }​ | 响应详情信息。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/delete_dataset",
      "title": "删除知识库",
      "content": {
        "sections": [],
        "full_text": "删除知识库\n\n调用此接口删除扣子知识库。\n\n​\n\n说明\n\n空间管理员可以删除团队中所有知识库，其他成员只能删除本人为所有者的知识库，\n\n​\n\n删除知识库时，会同时删除知识库中已上传的所有文件，且绑定此知识库的智能体会自动解绑。\n\n​\n\n此 API 仅支持删除扣子知识库，不适用于火山知识库。如需删除火山知识库，请参考\n\n删除火山知识库\n\n。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nDELETE\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/datasets/:dataset_id\n\n​\n\n​\n\n权限\n\n​\n\ndelete\n\n​\n\n确保调用该接口使用的个人令牌开通了\n\ndelete\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n调用此接口以删除本人持有的知识库信息。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndataset_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n744632974166804****\n\n​\n\n扣子知识库 ID。\n\n​\n\n在扣子编程中打开指定知识库页面，页面 URL 中\n\nknowledge\n\n参数后的数字就是知识库 ID。例如\n\nhttps://www.coze.cn/space/736142423532160****/knowledge/738509371792341****\n\n，知识库 ID 为\n\n738509371792341****\n\n。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n状态码。\n\n​\n\n0 代表调用成功。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n-\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request DELETE  'https\n\n:\n\n//api.coze.cn/v1/datasets/744668935865830****' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_O******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210191248C8EF7607554A***\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n修改知识库信息\n\n下一篇\n\n创建知识库文件",
        "links": []
      },
      "markdown": "- 空间管理员可以删除团队中所有知识库，其他成员只能删除本人为所有者的知识库， ​\n\n- 删除知识库时，会同时删除知识库中已上传的所有文件，且绑定此知识库的智能体会自动解绑。 ​\n\n- 此 API 仅支持删除扣子知识库，不适用于火山知识库。如需删除火山知识库，请参考 删除火山知识库 。 ​\n\n| 请求方式​ | DELETE​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/datasets/:dataset_id​​ |\n| 权限​ | delete​确保调用该接口使用的个人令牌开通了delete权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 调用此接口以删除本人持有的知识库信息。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| dataset_id​ | String​ | 必选​ | 744632974166804****​ | 扣子知识库 ID。​在扣子编程中打开指定知识库页面，页面 URL 中knowledge参数后的数字就是知识库 ID。例如https://www.coze.cn/space/736142423532160****/knowledge/738509371792341****，知识库 ID 为738509371792341****。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 状态码。​0 代表调用成功。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | -​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/create_knowledge_files",
      "title": "创建知识库文件",
      "content": {
        "sections": [],
        "full_text": "创建知识库文件\n\n调用此 API 向指定的扣子知识库上传文件。\n\n​\n\n接口说明\n\n​\n\n通过此 API，你可以向文本或图片知识库中上传文件。\n\n​\n\n暂不支持通过 API 创建表格知识库。\n\n​\n\n本 API 仅适用于扣子知识库的文件上传操作，不适用于火山知识库上传文件。火山知识库上传文件请参见\n\n火山知识库上传文件\n\n。\n\n​\n\n上传图片到图片知识库时，可以通过\n\ncaption_type\n\n参数设置系统标注或手动标注，如果选择手动标注，还需要调用\n\n更新知识库图片描述\n\nAPI 手动设置标注。\n\n​\n\n支持的上传方式如下：\n\n​\n\n​\n\n上传方式\n\n​\n\n文本知识库\n\n​\n\n图片知识库\n\n​\n\n通过 Base 64 上传本地文件\n\n​\n\n✅\n\n​\n\n格式支持 pdf、txt、doc、docx 类型。\n\n​\n\n❌\n\n​\n\n上传在线网页\n\n​\n\n✅\n\n​\n\n❌\n\n​\n\n通过\n\n上传文件\n\n上传\n\n​\n\n❌\n\n​\n\n✅\n\n​\n\n​\n\n注意事项\n\n​\n\n每次最多可上传 10 个文件。\n\n​\n\n必须上传和知识库类型匹配的文件，例如 txt 等文档类型的文件只能上传到文档知识库中，不可上传到表格知识库中。\n\n​\n\n每个请求只能选择一种上传方式，不支持同时上传在线网页和本地文档。\n\n​\n\n仅知识库的所有者可以向知识库中上传文件。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/open_api/knowledge/document/create\n\n​\n\n权限\n\n​\n\ncreateDocument\n\n​\n\n确保调用该接口使用的服务令牌开通了\n\ncreateDocument\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n调用此接口向指定知识库中上传文件。\n\n​\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n请求正文的方式。\n\n​\n\nAgw-Js-Conv\n\n​\n\nstr\n\n​\n\n防止丢失数字类型参数的精度。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndataset_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n736356924530694****\n\n​\n\n扣子知识库 ID。\n\n​\n\n在扣子编程中打开指定知识库页面，页面 URL 中\n\nknowledge\n\n参数后的数字就是知识库 ID。例如\n\nhttps://www.coze.cn/space/736142423532160****/knowledge/738509371792341****\n\n，知识库 ID 为\n\n738509371792341****\n\n。\n\n​\n\ndocument_bases\n\n​\n\nArray of\n\nDocumentBase\n\n​\n\n必选\n\n​\n\n[ { \"name\": \"Coze.pdf\", \"source_info\": { \"file_base64\": \"5rWL6K+V5LiA5LiL5ZOm\", \"file_type\": \"pdf\" } } ]\n\n​\n\n待上传文件的元数据信息。数组最大长度为 10，即每次最多上传 10 个文件。\n\n​\n\n支持的上传方式如下：\n\n​\n\n文本知识库：\n\n​\n\n通过 Base64 上传本地文件。\n\n​\n\n上传在线网页。\n\n​\n\n图片知识库：通过\n\n上传文件\n\nAPI 获取的 file_id 上传图片。\n\n​\n\nchunk_strategy\n\n​\n\nObject of\n\nChunkStrategy\n\n​\n\n必选\n\n​\n\n{\n\n​\n\n\"separator\":\n\n\"\n\n\\n\\n\",\n\n​\n\n\"max_tokens\": 800,\n\n​\n\n\"remove_extra_spaces\": false,\n\n​\n\n\"remove_urls_emails\": false,\n\n​\n\n\"chunk_type\": 1\n\n​\n\n}\n\n​\n\n分段规则。详见\n\nChunkStrategy object\n\n​\n\nTip\n\n每次都需要传入\n\n​\n\n​\n\nformat_type\n\n​\n\nInteger\n\n​\n\n必选\n\n​\n\n2\n\n​\n\n知识库类型。取值包括：\n\n​\n\n0：文本类型\n\n​\n\n2：图片类型\n\n​\n\n​\n\nDocumentBase\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nname\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nCoze.pdf\n\n​\n\n文件名称。\n\n​\n\nsource_info\n\n​\n\nObject of\n\nSourceInfo\n\n​\n\n必选\n\n​\n\n{ \"file_base64\": \"5rWL6K+V5LiA5LiL5ZOm\", \"file_type\": \"pdf\" }\n\n​\n\n文件的元数据信息。\n\n​\n\n不同的上传方式需要指定不同参数：\n\n​\n\n本地文件\n\n：Base64 形式上传，需要设置参数 file_base64、file_type。\n\n​\n\n在线网页\n\n：需要设置参数 web_url、document_source。\n\n​\n\nfile_id\n\n：需要设置参数 source_file_id、document_source。其中 source_file_id 为\n\n上传文件\n\nAPI 的响应参数 file_id。\n\n​\n\nupdate_rule\n\n​\n\nObject of\n\nUpdateRule\n\n​\n\n可选\n\n​\n\n{\"update_type\": 0}\n\n​\n\n在线网页的更新策略。默认不自动更新。仅上传在线网页时需要设置。\n\n​\n\ncaption\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n可爱的\n\n​\n\n当知识库类型为图片类型时，通过该字段设置图片描述。\n\n​\n\n​\n\nSourceInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nfile_base64\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n5rWL6K+V5LiA5LiL5ZOm\n\n​\n\n本地文件的 Base64 编码。\n\n​\n\n说明\n\n上传本地文件时必选。\n\n​\n\n​\n\nfile_type\n\n​\n\nString\n\n​\n\n可选\n\n​\n\npdf\n\n​\n\n本地文件格式，即文件后缀，例如 txt。格式支持 pdf、txt、doc、docx 类型。\n\n​\n\n上传的文件类型应与知识库类型匹配，例如 txt 文件只能上传到文档类型的知识库中。\n\n​\n\n说明\n\n上传本地文件时必选。\n\n​\n\n​\n\nweb_url\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nhttps://docs.coze.cn/developer_guides/upload_files\n\n​\n\n网页的 URL 地址。\n\n​\n\n说明\n\n上传在线网页时必选。\n\n​\n\n​\n\ndocument_source\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n1\n\n​\n\n文件的上传方式。支持设置为：\n\n​\n\n0：本地文件上传。\n\n​\n\n1：上传在线网页。\n\n​\n\n5：通过\n\n上传文件\n\n上传图片。\n\n​\n\nsource_file_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n736949598110202****\n\n​\n\n通过\n\n上传文件\n\n接口获取的文件 ID。\n\n​\n\n​\n\nUpdateRule\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nupdate_type\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n1\n\n​\n\n在线网页是否自动更新。取值包括：\n\n​\n\n0：（默认）不自动更新\n\n​\n\n1：自动更新\n\n​\n\nupdate_interval\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n24\n\n​\n\n在线网页自动更新的频率。单位为小时，最小值为 24。\n\n​\n\n​\n\nChunkStrategy\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nchunk_type\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n0\n\n​\n\n分段设置。取值包括：\n\n​\n\n0：自动分段与清洗。采用扣子编程预置规则进行数据分段与处理。\n\n​\n\n1：自定义。此时需要通过 separator、max_tokens、remove_extra_spaces 和 remove_urls_emails 分段规则细节。\n\n​\n\nseparator\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n#\n\n​\n\n分段标识符。\n\n​\n\n在 chunk_type=1 时必选。\n\n​\n\nmax_tokens\n\n​\n\nLong\n\n​\n\n可选\n\n​\n\n800\n\n​\n\n最大分段长度，取值范围为 100~2000。\n\n​\n\n在 chunk_type=1 时必选。\n\n​\n\nremove_extra_spaces\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\ntrue\n\n​\n\n是否自动过滤连续的空格、换行符和制表符。取值包括：\n\n​\n\ntrue：自动过滤\n\n​\n\nfalse：（默认）不自动过滤\n\n​\n\n在 chunk_type=1 时生效。\n\n​\n\nremove_urls_emails\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\ntrue\n\n​\n\n是否自动过滤所有 URL 和电子邮箱地址。取值包括：\n\n​\n\ntrue：自动过滤\n\n​\n\nfalse：（默认）不自动过滤\n\n​\n\n在 chunk_type=1 时生效。\n\n​\n\ncaption_type\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n0\n\n​\n\n图片知识库的标注方式：\n\n​\n\n0：（默认）系统自动标注描述信息\n\n​\n\n1：手工标注。上传图片后需要再次调用 API\n\n更新知识库图片描述\n\n来手动设置标注。\n\n​\n\n说明\n\n在空的知识库中首次上传图片时，需要手工设置\n\ncaption_type\n\n参数的值，否则会报错。\n\n​\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndocument_infos\n\n​\n\nArray of\n\nDocumentInfo\n\n​\n\n-\n\n​\n\n已上传文件的基本信息。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n状态码。\n\n​\n\n0 代表调用成功。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{ \"logid\": \"20250106172024B5F607030EFFAD653960\" }\n\n​\n\n响应详情信息。\n\n​\n\n​\n\nDocumentInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nchar_count\n\n​\n\nInteger\n\n​\n\n4\n\n​\n\n文件内容的总字符数量。\n\n​\n\nchunk_strategy\n\n​\n\nObject of\n\nChunkStrategy\n\n​\n\n{ \"chunk_type\": 1, \"max_tokens\": 800, \"remove_extra_spaces\": false, \"remove_urls_emails\": false, \"separator\": \"#\" }\n\n​\n\n分段规则。\n\n​\n\ncreate_time\n\n​\n\nInteger\n\n​\n\n1719907964\n\n​\n\n文件的上传时间，格式为 10 位的 Unixtime 时间戳。\n\n​\n\ndocument_id\n\n​\n\nString\n\n​\n\n738694205603010****\n\n​\n\n文件的 ID。\n\n​\n\nformat_type\n\n​\n\nInteger\n\n​\n\n0\n\n​\n\n文件的格式类型。取值包括：\n\n​\n\n0：文档类型，例如 txt 、pdf 、在线网页等格式均属于文档类型。\n\n​\n\n1：表格类型，例如 xls 表格等格式属于表格类型。\n\n​\n\n2：照片类型，例如 png 图片等格式属于照片类型。\n\n​\n\nhit_count\n\n​\n\nInteger\n\n​\n\n0\n\n​\n\n被对话命中的次数。\n\n​\n\nname\n\n​\n\nString\n\n​\n\nCoze.pdf\n\n​\n\n文件的名称。\n\n​\n\nsize\n\n​\n\nInteger\n\n​\n\n14164\n\n​\n\n文件的大小，单位为字节。\n\n​\n\nslice_count\n\n​\n\nInteger\n\n​\n\n1\n\n​\n\n文件的分段数量。\n\n​\n\nsource_type\n\n​\n\nInteger\n\n​\n\n0\n\n​\n\n文件的上传方式。取值包括：\n\n​\n\n0：上传本地文件。\n\n​\n\n1：上传在线网页。\n\n​\n\nstatus\n\n​\n\nInteger\n\n​\n\n1\n\n​\n\n文件的处理状态。取值包括：\n\n​\n\n0：处理中\n\n​\n\n1：处理完毕\n\n​\n\n9：处理失败，建议重新上传\n\n​\n\ntype\n\n​\n\nString\n\n​\n\npdf\n\n​\n\n本地文件格式，即文件后缀，例如 txt。格式支持 pdf、txt、doc、docx 类型。\n\n​\n\nupdate_interval\n\n​\n\nInteger\n\n​\n\n0\n\n​\n\n在线网页自动更新的频率。单位为小时。\n\n​\n\nupdate_time\n\n​\n\nInteger\n\n​\n\n1719907969\n\n​\n\n文件的最近一次修改时间，格式为 10 位的 Unixtime 时间戳。\n\n​\n\nupdate_type\n\n​\n\nInteger\n\n​\n\n0\n\n​\n\n在线网页是否自动更新。取值包括：\n\n​\n\n0：不自动更新\n\n​\n\n1：自动更新\n\n​\n\ntos_uri\n\n​\n\nString\n\n​\n\nFileBizType.BIZ_BOT_DATASET/847077809337655_1727579972975689529_0ytrdq****.docx\n\n​\n\n上传的本地文档的唯一标识。\n\n​\n\n​\n\nChunkStrategy\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nchunk_type\n\n​\n\nInteger\n\n​\n\n0\n\n​\n\n分段设置。取值包括：\n\n​\n\n0：自动分段与清洗。采用扣子编程预置规则进行数据分段与处理。\n\n​\n\n1：自定义。此时需要通过 separator、max_tokens、remove_extra_spaces 和 remove_urls_emails 分段规则细节。\n\n​\n\nseparator\n\n​\n\nString\n\n​\n\n#\n\n​\n\n分段标识符。\n\n​\n\n在 chunk_type=1 时必选。\n\n​\n\nmax_tokens\n\n​\n\nLong\n\n​\n\n800\n\n​\n\n最大分段长度，取值范围为 100~2000。\n\n​\n\n在 chunk_type=1 时必选。\n\n​\n\nremove_extra_spaces\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n是否自动过滤连续的空格、换行符和制表符。取值包括：\n\n​\n\ntrue：自动过滤\n\n​\n\nfalse：（默认）不自动过滤\n\n​\n\n在 chunk_type=1 时生效。\n\n​\n\nremove_urls_emails\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n是否自动过滤所有 URL 和电子邮箱地址。取值包括：\n\n​\n\ntrue：自动过滤\n\n​\n\nfalse：（默认）不自动过滤\n\n​\n\n在 chunk_type=1 时生效。\n\n​\n\ncaption_type\n\n​\n\nInteger\n\n​\n\n0\n\n​\n\n图片知识库的标注方式：\n\n​\n\n0：（默认）系统自动标注描述信息\n\n​\n\n1：手工标注。上传图片后需要再次调用 API\n\n更新知识库图片描述\n\n来手动设置标注。\n\n​\n\n说明\n\n在空的知识库中首次上传图片时，需要手工设置\n\ncaption_type\n\n参数的值，否则会报错。\n\n​\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n上传本地文件\n\n上传在线网页\n\n通过 file_id 上传图片\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/open_api/knowledge/document/create' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"dataset_id\"\n\n:\n\n\"736356924530694****\"\n\n,\n\n​\n\n\"document_bases\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"name\"\n\n:\n\n\"Coze.pdf\"\n\n,\n\n​\n\n\"source_info\"\n\n:\n\n{\n\n​\n\n\"file_base64\"\n\n:\n\n\"5rWL6K+V5LiA5LiL5ZOm\"\n\n,\n\n​\n\n\"file_type\"\n\n:\n\n\"pdf\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n],\n\n​\n\n\"chunk_strategy\"\n\n:\n\n{\n\n​\n\n\"separator\"\n\n:\n\n\"\\n\\n\"\n\n,\n\n​\n\n\"max_tokens\"\n\n:\n\n800\n\n,\n\n​\n\n\"remove_extra_spaces\"\n\n:\n\nfalse\n\n,\n\n​\n\n\"remove_urls_emails\"\n\n:\n\nfalse\n\n,\n\n​\n\n\"chunk_type\"\n\n:\n\n1\n\n​\n\n}\n\n​\n\n}\n\n'\n\n​\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"document_infos\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"name\"\n\n:\n\n\"Coze.pdf\"\n\n,\n\n​\n\n\"size\"\n\n:\n\n14164\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"pdf\"\n\n,\n\n​\n\n\"status\"\n\n:\n\n1\n\n,\n\n​\n\n\"tos_uri\"\n\n:\n\n\"FileBizType.BIZ_BOT_DATASET/847077809337655_1727579972975689529_0ytrdq****.docx\"\n\n,\n\n​\n\n\"hit_count\"\n\n:\n\n0\n\n,\n\n​\n\n\"char_count\"\n\n:\n\n4\n\n,\n\n​\n\n\"create_time\"\n\n:\n\n1719907964\n\n,\n\n​\n\n\"document_id\"\n\n:\n\n\"738694205603010****\"\n\n,\n\n​\n\n\"format_type\"\n\n:\n\n2\n\n,\n\n​\n\n\"slice_count\"\n\n:\n\n1\n\n,\n\n​\n\n\"source_type\"\n\n:\n\nnull\n\n,\n\n​\n\n\"update_time\"\n\n:\n\n1719907969\n\n,\n\n​\n\n\"update_type\"\n\n:\n\nnull\n\n,\n\n​\n\n\"chunk_strategy\"\n\n:\n\n{\n\n​\n\n\"chunk_type\"\n\n:\n\n1\n\n,\n\n​\n\n\"max_tokens\"\n\n:\n\n800\n\n,\n\n​\n\n\"remove_extra_spaces\"\n\n:\n\nfalse\n\n,\n\n​\n\n\"remove_urls_emails\"\n\n:\n\nfalse\n\n,\n\n​\n\n\"separator\"\n\n:\n\n\"\\n\\n\"\n\n​\n\n},\n\n​\n\n\"update_interval\"\n\n:\n\n0\n\n​\n\n}\n\n​\n\n],\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20250106172024B5F607030EFFA***\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n删除知识库\n\n下一篇\n\n修改知识库文件",
        "links": []
      },
      "markdown": "- 通过此 API，你可以向文本或图片知识库中上传文件。 ​\n\n- 暂不支持通过 API 创建表格知识库。 ​\n\n- 本 API 仅适用于扣子知识库的文件上传操作，不适用于火山知识库上传文件。火山知识库上传文件请参见 火山知识库上传文件 。 ​\n\n- 上传图片到图片知识库时，可以通过 caption_type 参数设置系统标注或手动标注，如果选择手动标注，还需要调用 更新知识库图片描述 API 手动设置标注。 ​\n\n- 支持的上传方式如下： ​\n\n| 上传方式​ | 文本知识库​ | 图片知识库​ |\n| 通过 Base 64 上传本地文件​ | ✅​格式支持 pdf、txt、doc、docx 类型。​ | ❌​ |\n| 上传在线网页​ | ✅​ | ❌​ |\n| 通过上传文件上传​ | ❌​ | ✅​ |\n\n- 每次最多可上传 10 个文件。 ​\n\n- 必须上传和知识库类型匹配的文件，例如 txt 等文档类型的文件只能上传到文档知识库中，不可上传到表格知识库中。 ​\n\n- 每个请求只能选择一种上传方式，不支持同时上传在线网页和本地文档。 ​\n\n- 仅知识库的所有者可以向知识库中上传文件。 ​\n\n| 请求方式​ | POST |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/open_api/knowledge/document/create​ |\n| 权限​ | createDocument​确保调用该接口使用的服务令牌开通了createDocument权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 调用此接口向指定知识库中上传文件。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 请求正文的方式。​ |\n| Agw-Js-Conv​ | str​ | 防止丢失数字类型参数的精度。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| dataset_id​ | String​ | 必选​ | 736356924530694****​ | 扣子知识库 ID。​在扣子编程中打开指定知识库页面，页面 URL 中knowledge参数后的数字就是知识库 ID。例如https://www.coze.cn/space/736142423532160****/knowledge/738509371792341****，知识库 ID 为738509371792341****。​ |\n| document_bases​ | Array ofDocumentBase​ | 必选​ | [ { \"name\": \"Coze.pdf\", \"source_info\": { \"file_base64\": \"5rWL6K+V5LiA5LiL5ZOm\", \"file_type\": \"pdf\" } } ]​ | 待上传文件的元数据信息。数组最大长度为 10，即每次最多上传 10 个文件。​支持的上传方式如下：​文本知识库：​通过 Base64 上传本地文件。​上传在线网页。​图片知识库：通过上传文件API 获取的 file_id 上传图片。​ |\n| chunk_strategy​ | Object ofChunkStrategy​ | 必选​ | {​\"separator\":\"\\n\\n\",​\"max_tokens\": 800,​\"remove_extra_spaces\": false,​\"remove_urls_emails\": false,​\"chunk_type\": 1​}​ | 分段规则。详见ChunkStrategy object​Tip每次都需要传入​​ |\n| format_type​ | Integer​ | 必选​ | 2​ | 知识库类型。取值包括：​0：文本类型​2：图片类型​ |\n\n- 文本知识库： ​\n\n- 通过 Base64 上传本地文件。 ​\n\n- 上传在线网页。 ​\n\n- 图片知识库：通过 上传文件 API 获取的 file_id 上传图片。 ​\n\n- 0：文本类型 ​\n\n- 2：图片类型 ​\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| name​ | String​ | 必选​ | Coze.pdf​ | 文件名称。​ |\n| source_info​ | Object ofSourceInfo​ | 必选​ | { \"file_base64\": \"5rWL6K+V5LiA5LiL5ZOm\", \"file_type\": \"pdf\" }​ | 文件的元数据信息。​不同的上传方式需要指定不同参数：​本地文件：Base64 形式上传，需要设置参数 file_base64、file_type。​在线网页：需要设置参数 web_url、document_source。​file_id：需要设置参数 source_file_id、document_source。其中 source_file_id 为上传文件API 的响应参数 file_id。​ |\n| update_rule​ | Object ofUpdateRule​ | 可选​ | {\"update_type\": 0}​ | 在线网页的更新策略。默认不自动更新。仅上传在线网页时需要设置。​ |\n| caption​ | String​ | 可选​ | 可爱的​ | 当知识库类型为图片类型时，通过该字段设置图片描述。​ |\n\n- 本地文件 ：Base64 形式上传，需要设置参数 file_base64、file_type。 ​\n\n- 在线网页 ：需要设置参数 web_url、document_source。 ​\n\n- file_id ：需要设置参数 source_file_id、document_source。其中 source_file_id 为 上传文件 API 的响应参数 file_id。 ​\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| file_base64​ | String​ | 可选​ | 5rWL6K+V5LiA5LiL5ZOm​ | 本地文件的 Base64 编码。​说明上传本地文件时必选。​​ |\n| file_type​ | String​ | 可选​ | pdf​ | 本地文件格式，即文件后缀，例如 txt。格式支持 pdf、txt、doc、docx 类型。​上传的文件类型应与知识库类型匹配，例如 txt 文件只能上传到文档类型的知识库中。​说明上传本地文件时必选。​​ |\n| web_url​ | String​ | 可选​ | https://docs.coze.cn/developer_guides/upload_files​ | 网页的 URL 地址。​说明上传在线网页时必选。​​ |\n| document_source​ | Integer​ | 可选​ | 1​ | 文件的上传方式。支持设置为：​0：本地文件上传。​1：上传在线网页。​5：通过上传文件上传图片。​ |\n| source_file_id​ | String​ | 可选​ | 736949598110202****​ | 通过上传文件接口获取的文件 ID。​ |\n\n- 0：本地文件上传。 ​\n\n- 1：上传在线网页。 ​\n\n- 5：通过 上传文件 上传图片。 ​\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| update_type​ | Integer​ | 可选​ | 1​ | 在线网页是否自动更新。取值包括：​0：（默认）不自动更新​1：自动更新​ |\n| update_interval​ | Integer​ | 可选​ | 24​ | 在线网页自动更新的频率。单位为小时，最小值为 24。​ |\n\n- 0：（默认）不自动更新 ​\n\n- 1：自动更新 ​\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| chunk_type​ | Integer​ | 可选​ | 0​ | 分段设置。取值包括：​0：自动分段与清洗。采用扣子编程预置规则进行数据分段与处理。​1：自定义。此时需要通过 separator、max_tokens、remove_extra_spaces 和 remove_urls_emails 分段规则细节。​ |\n| separator​ | String​ | 可选​ | #​ | 分段标识符。​在 chunk_type=1 时必选。​ |\n| max_tokens​ | Long​ | 可选​ | 800​ | 最大分段长度，取值范围为 100~2000。​在 chunk_type=1 时必选。​ |\n| remove_extra_spaces​ | Boolean​ | 可选​ | true​ | 是否自动过滤连续的空格、换行符和制表符。取值包括：​true：自动过滤​false：（默认）不自动过滤​在 chunk_type=1 时生效。​ |\n| remove_urls_emails​ | Boolean​ | 可选​ | true​ | 是否自动过滤所有 URL 和电子邮箱地址。取值包括：​true：自动过滤​false：（默认）不自动过滤​在 chunk_type=1 时生效。​ |\n| caption_type​ | Integer​ | 可选​ | 0​ | 图片知识库的标注方式：​0：（默认）系统自动标注描述信息​1：手工标注。上传图片后需要再次调用 API更新知识库图片描述来手动设置标注。​说明在空的知识库中首次上传图片时，需要手工设置caption_type参数的值，否则会报错。​​ |\n\n- 0：自动分段与清洗。采用扣子编程预置规则进行数据分段与处理。 ​\n\n- 1：自定义。此时需要通过 separator、max_tokens、remove_extra_spaces 和 remove_urls_emails 分段规则细节。 ​\n\n- true：自动过滤 ​\n\n- false：（默认）不自动过滤 ​\n\n- true：自动过滤 ​\n\n- false：（默认）不自动过滤 ​\n\n- 0：（默认）系统自动标注描述信息 ​\n\n- 1：手工标注。上传图片后需要再次调用 API 更新知识库图片描述 来手动设置标注。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| document_infos​ | Array ofDocumentInfo​ | -​ | 已上传文件的基本信息。​ |\n| code​ | Long​ | 0​ | 状态码。​0 代表调用成功。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | { \"logid\": \"20250106172024B5F607030EFFAD653960\" }​ | 响应详情信息。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| char_count​ | Integer​ | 4​ | 文件内容的总字符数量。​ |\n| chunk_strategy​ | Object ofChunkStrategy​ | { \"chunk_type\": 1, \"max_tokens\": 800, \"remove_extra_spaces\": false, \"remove_urls_emails\": false, \"separator\": \"#\" }​ | 分段规则。​ |\n| create_time​ | Integer​ | 1719907964​ | 文件的上传时间，格式为 10 位的 Unixtime 时间戳。​ |\n| document_id​ | String​ | 738694205603010****​ | 文件的 ID。​ |\n| format_type​ | Integer​ | 0​ | 文件的格式类型。取值包括：​0：文档类型，例如 txt 、pdf 、在线网页等格式均属于文档类型。​1：表格类型，例如 xls 表格等格式属于表格类型。​2：照片类型，例如 png 图片等格式属于照片类型。​ |\n| hit_count​ | Integer​ | 0​ | 被对话命中的次数。​ |\n| name​ | String​ | Coze.pdf​ | 文件的名称。​ |\n| size​ | Integer​ | 14164​ | 文件的大小，单位为字节。​ |\n| slice_count​ | Integer​ | 1​ | 文件的分段数量。​ |\n| source_type​ | Integer​ | 0​ | 文件的上传方式。取值包括：​0：上传本地文件。​1：上传在线网页。​ |\n| status​ | Integer​ | 1​ | 文件的处理状态。取值包括：​0：处理中​1：处理完毕​9：处理失败，建议重新上传​ |\n| type​ | String​ | pdf​ | 本地文件格式，即文件后缀，例如 txt。格式支持 pdf、txt、doc、docx 类型。​ |\n| update_interval​ | Integer​ | 0​ | 在线网页自动更新的频率。单位为小时。​ |\n| update_time​ | Integer​ | 1719907969​ | 文件的最近一次修改时间，格式为 10 位的 Unixtime 时间戳。​ |\n| update_type​ | Integer​ | 0​ | 在线网页是否自动更新。取值包括：​0：不自动更新​1：自动更新​ |\n| tos_uri​ | String​ | FileBizType.BIZ_BOT_DATASET/847077809337655_1727579972975689529_0ytrdq****.docx​ | 上传的本地文档的唯一标识。​ |\n\n- 0：文档类型，例如 txt 、pdf 、在线网页等格式均属于文档类型。 ​\n\n- 1：表格类型，例如 xls 表格等格式属于表格类型。 ​\n\n- 2：照片类型，例如 png 图片等格式属于照片类型。 ​\n\n- 0：上传本地文件。 ​\n\n- 1：上传在线网页。 ​\n\n- 0：处理中 ​\n\n- 1：处理完毕 ​\n\n- 9：处理失败，建议重新上传 ​\n\n- 0：不自动更新 ​\n\n- 1：自动更新 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| chunk_type​ | Integer​ | 0​ | 分段设置。取值包括：​0：自动分段与清洗。采用扣子编程预置规则进行数据分段与处理。​1：自定义。此时需要通过 separator、max_tokens、remove_extra_spaces 和 remove_urls_emails 分段规则细节。​ |\n| separator​ | String​ | #​ | 分段标识符。​在 chunk_type=1 时必选。​ |\n| max_tokens​ | Long​ | 800​ | 最大分段长度，取值范围为 100~2000。​在 chunk_type=1 时必选。​ |\n| remove_extra_spaces​ | Boolean​ | true​ | 是否自动过滤连续的空格、换行符和制表符。取值包括：​true：自动过滤​false：（默认）不自动过滤​在 chunk_type=1 时生效。​ |\n| remove_urls_emails​ | Boolean​ | true​ | 是否自动过滤所有 URL 和电子邮箱地址。取值包括：​true：自动过滤​false：（默认）不自动过滤​在 chunk_type=1 时生效。​ |\n| caption_type​ | Integer​ | 0​ | 图片知识库的标注方式：​0：（默认）系统自动标注描述信息​1：手工标注。上传图片后需要再次调用 API更新知识库图片描述来手动设置标注。​说明在空的知识库中首次上传图片时，需要手工设置caption_type参数的值，否则会报错。​​ |\n\n- 0：自动分段与清洗。采用扣子编程预置规则进行数据分段与处理。 ​\n\n- 1：自定义。此时需要通过 separator、max_tokens、remove_extra_spaces 和 remove_urls_emails 分段规则细节。 ​\n\n- true：自动过滤 ​\n\n- false：（默认）不自动过滤 ​\n\n- true：自动过滤 ​\n\n- false：（默认）不自动过滤 ​\n\n- 0：（默认）系统自动标注描述信息 ​\n\n- 1：手工标注。上传图片后需要再次调用 API 更新知识库图片描述 来手动设置标注。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/modify_knowledge_files",
      "title": "修改知识库文件",
      "content": {
        "sections": [],
        "full_text": "修改知识库文件\n\n调用接口修改扣子知识库文件名称和更新策略。\n\n​\n\n说明\n\n调用接口修改扣子知识库文件名称和更新策略。\n\n​\n\n知识库分为扣子知识库和火山知识库，该 API 仅用于创建扣子知识库，不支持火山知识库的创建，如果需要创建火山知识库，请参见\n\n创建火山知识库 API 文档\n\n。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/open_api/knowledge/document/update\n\n​\n\n权限\n\n​\n\nupdateDocument\n\n​\n\n确保调用该接口使用的个人令牌开通了\n\nupdateDocument\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n接口说明\n\n​\n\n调用接口修改知识库文件名称和更新策略。\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n请求正文的方式。\n\n​\n\nAgw-Js-Conv\n\n​\n\nstr\n\n​\n\n防止丢失数字类型参数的精度。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndocument_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n738694205603010****\n\n​\n\n待修改的知识库文件 ID。\n\ndocument_name\n\n​\n\nString\n\n​\n\n可选\n\n​\n\ncozeoverview\n\n​\n\n知识库文件的新名称。\n\nupdate_rule\n\n​\n\nObject of\n\nUpdateRule\n\n​\n\n可选\n\n​\n\n{\"update_type\":1,\"update_interval\":1}\n\n​\n\n在线网页的更新配置。\n\n​\n\n​\n\nUpdateRule\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nupdate_type\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n1\n\n​\n\n在线网页是否自动更新。取值包括：\n\n​\n\n0：（默认）不自动更新\n\n​\n\n1：自动更新\n\n​\n\nupdate_interval\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n24\n\n​\n\n在线网页自动更新的频率。单位为小时，最小值为 24。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndocument_info\n\n​\n\nObject of\n\nDocumentInfo\n\n​\n\n-\n\n​\n\ndeprecated 兼容老接口，更新内容时会返回。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n状态码。\n\n​\n\n0 代表调用成功。\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\n​\n\nDocumentInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nchar_count\n\n​\n\nInteger\n\n​\n\n4\n\n​\n\n文件内容的总字符数量。\n\n​\n\nchunk_strategy\n\n​\n\nObject of\n\nChunkStrategy\n\n​\n\n{ \"chunk_type\": 1, \"max_tokens\": 800, \"remove_extra_spaces\": false, \"remove_urls_emails\": false, \"separator\": \"#\" }\n\n​\n\n分段规则。\n\n​\n\ncreate_time\n\n​\n\nInteger\n\n​\n\n1719907964\n\n​\n\n文件的上传时间，格式为 10 位的 Unixtime 时间戳。\n\n​\n\ndocument_id\n\n​\n\nString\n\n​\n\n738694205603010****\n\n​\n\n文件的 ID。\n\n​\n\nformat_type\n\n​\n\nInteger\n\n​\n\n0\n\n​\n\n文件的格式类型。取值包括：\n\n​\n\n0：文档类型，例如 txt 、pdf 、在线网页等格式均属于文档类型。\n\n​\n\n1：表格类型，例如 xls 表格等格式属于表格类型。\n\n​\n\n2：照片类型，例如 png 图片等格式属于照片类型。\n\n​\n\nhit_count\n\n​\n\nInteger\n\n​\n\n0\n\n​\n\n被对话命中的次数。\n\n​\n\nname\n\n​\n\nString\n\n​\n\nCoze.pdf\n\n​\n\n文件的名称。\n\n​\n\nsize\n\n​\n\nInteger\n\n​\n\n14164\n\n​\n\n文件的大小，单位为字节。\n\n​\n\nslice_count\n\n​\n\nInteger\n\n​\n\n1\n\n​\n\n文件的分段数量。\n\n​\n\nsource_type\n\n​\n\nInteger\n\n​\n\n0\n\n​\n\n文件的上传方式。取值包括：\n\n​\n\n0：上传本地文件。\n\n​\n\n1：上传在线网页。\n\n​\n\nstatus\n\n​\n\nInteger\n\n​\n\n1\n\n​\n\n文件的处理状态。取值包括：\n\n​\n\n0：处理中\n\n​\n\n1：处理完毕\n\n​\n\n9：处理失败，建议重新上传\n\n​\n\ntype\n\n​\n\nString\n\n​\n\npdf\n\n​\n\n本地文件格式，即文件后缀，例如 txt。格式支持 pdf、txt、doc、docx 类型。\n\n​\n\nupdate_interval\n\n​\n\nInteger\n\n​\n\n0\n\n​\n\n在线网页自动更新的频率。单位为小时。\n\n​\n\nupdate_time\n\n​\n\nInteger\n\n​\n\n1719907969\n\n​\n\n文件的最近一次修改时间，格式为 10 位的 Unixtime 时间戳。\n\n​\n\nupdate_type\n\n​\n\nInteger\n\n​\n\n0\n\n​\n\n在线网页是否自动更新。取值包括：\n\n​\n\n0：不自动更新\n\n​\n\n1：自动更新\n\n​\n\ntos_uri\n\n​\n\nString\n\n​\n\nFileBizType.BIZ_BOT_DATASET/847077809337655_1727579972975689529_0ytrdq****.docx\n\n​\n\n上传的本地文档的唯一标识。\n\n​\n\n​\n\nChunkStrategy\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nchunk_type\n\n​\n\nInteger\n\n​\n\n0\n\n​\n\n分段设置。取值包括：\n\n​\n\n0：自动分段与清洗。采用扣子编程预置规则进行数据分段与处理。\n\n​\n\n1：自定义。此时需要通过 separator、max_tokens、remove_extra_spaces 和 remove_urls_emails 分段规则细节。\n\n​\n\nseparator\n\n​\n\nString\n\n​\n\n#\n\n​\n\n分段标识符。\n\n​\n\n在 chunk_type=1 时必选。\n\n​\n\nmax_tokens\n\n​\n\nLong\n\n​\n\n800\n\n​\n\n最大分段长度，取值范围为 100~2000。\n\n​\n\n在 chunk_type=1 时必选。\n\n​\n\nremove_extra_spaces\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n是否自动过滤连续的空格、换行符和制表符。取值包括：\n\n​\n\ntrue：自动过滤\n\n​\n\nfalse：（默认）不自动过滤\n\n​\n\n在 chunk_type=1 时生效。\n\n​\n\nremove_urls_emails\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n是否自动过滤所有 URL 和电子邮箱地址。取值包括：\n\n​\n\ntrue：自动过滤\n\n​\n\nfalse：（默认）不自动过滤\n\n​\n\n在 chunk_type=1 时生效。\n\n​\n\ncaption_type\n\n​\n\nInteger\n\n​\n\n0\n\n​\n\n图片知识库的标注方式：\n\n​\n\n0：（默认）系统自动标注描述信息\n\n​\n\n1：手工标注。上传图片后需要再次调用 API\n\n更新知识库图片描述\n\n来手动设置标注。\n\n​\n\n说明\n\n在空的知识库中首次上传图片时，需要手工设置\n\ncaption_type\n\n参数的值，否则会报错。\n\n​\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/open_api/knowledge/document/update' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--header 'Agw-Js-Conv\n\n:\n\nstr' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"document_id\"\n\n:\n\n\"738694205603010****\"\n\n,\n\n​\n\n\"document_name\"\n\n:\n\n\"cozeoverview\"\n\n,\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n创建知识库文件\n\n下一篇\n\n查看知识库文件列表",
        "links": []
      },
      "markdown": "| 请求方式​ | POST |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/open_api/knowledge/document/update​ |\n| 权限​ | updateDocument​确保调用该接口使用的个人令牌开通了updateDocument权限，详细信息参考鉴权方式。 |\n| 接口说明​ | 调用接口修改知识库文件名称和更新策略。 |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 请求正文的方式。​ |\n| Agw-Js-Conv​ | str​ | 防止丢失数字类型参数的精度。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| document_id​ | String​ | 可选​ | 738694205603010****​ | 待修改的知识库文件 ID。 |\n| document_name​ | String​ | 可选​ | cozeoverview​ | 知识库文件的新名称。 |\n| update_rule​ | Object ofUpdateRule​ | 可选​ | {\"update_type\":1,\"update_interval\":1}​ | 在线网页的更新配置。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| update_type​ | Integer​ | 可选​ | 1​ | 在线网页是否自动更新。取值包括：​0：（默认）不自动更新​1：自动更新​ |\n| update_interval​ | Integer​ | 可选​ | 24​ | 在线网页自动更新的频率。单位为小时，最小值为 24。​ |\n\n- 0：（默认）不自动更新 ​\n\n- 1：自动更新 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| document_info​ | Object ofDocumentInfo​ | -​ | deprecated 兼容老接口，更新内容时会返回。​ |\n| code​ | Long​ | 0​ | 状态码。​0 代表调用成功。 |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| char_count​ | Integer​ | 4​ | 文件内容的总字符数量。​ |\n| chunk_strategy​ | Object ofChunkStrategy​ | { \"chunk_type\": 1, \"max_tokens\": 800, \"remove_extra_spaces\": false, \"remove_urls_emails\": false, \"separator\": \"#\" }​ | 分段规则。​ |\n| create_time​ | Integer​ | 1719907964​ | 文件的上传时间，格式为 10 位的 Unixtime 时间戳。​ |\n| document_id​ | String​ | 738694205603010****​ | 文件的 ID。​ |\n| format_type​ | Integer​ | 0​ | 文件的格式类型。取值包括：​0：文档类型，例如 txt 、pdf 、在线网页等格式均属于文档类型。​1：表格类型，例如 xls 表格等格式属于表格类型。​2：照片类型，例如 png 图片等格式属于照片类型。​ |\n| hit_count​ | Integer​ | 0​ | 被对话命中的次数。​ |\n| name​ | String​ | Coze.pdf​ | 文件的名称。​ |\n| size​ | Integer​ | 14164​ | 文件的大小，单位为字节。​ |\n| slice_count​ | Integer​ | 1​ | 文件的分段数量。​ |\n| source_type​ | Integer​ | 0​ | 文件的上传方式。取值包括：​0：上传本地文件。​1：上传在线网页。​ |\n| status​ | Integer​ | 1​ | 文件的处理状态。取值包括：​0：处理中​1：处理完毕​9：处理失败，建议重新上传​ |\n| type​ | String​ | pdf​ | 本地文件格式，即文件后缀，例如 txt。格式支持 pdf、txt、doc、docx 类型。​ |\n| update_interval​ | Integer​ | 0​ | 在线网页自动更新的频率。单位为小时。​ |\n| update_time​ | Integer​ | 1719907969​ | 文件的最近一次修改时间，格式为 10 位的 Unixtime 时间戳。​ |\n| update_type​ | Integer​ | 0​ | 在线网页是否自动更新。取值包括：​0：不自动更新​1：自动更新​ |\n| tos_uri​ | String​ | FileBizType.BIZ_BOT_DATASET/847077809337655_1727579972975689529_0ytrdq****.docx​ | 上传的本地文档的唯一标识。​ |\n\n- 0：文档类型，例如 txt 、pdf 、在线网页等格式均属于文档类型。 ​\n\n- 1：表格类型，例如 xls 表格等格式属于表格类型。 ​\n\n- 2：照片类型，例如 png 图片等格式属于照片类型。 ​\n\n- 0：上传本地文件。 ​\n\n- 1：上传在线网页。 ​\n\n- 0：处理中 ​\n\n- 1：处理完毕 ​\n\n- 9：处理失败，建议重新上传 ​\n\n- 0：不自动更新 ​\n\n- 1：自动更新 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| chunk_type​ | Integer​ | 0​ | 分段设置。取值包括：​0：自动分段与清洗。采用扣子编程预置规则进行数据分段与处理。​1：自定义。此时需要通过 separator、max_tokens、remove_extra_spaces 和 remove_urls_emails 分段规则细节。​ |\n| separator​ | String​ | #​ | 分段标识符。​在 chunk_type=1 时必选。​ |\n| max_tokens​ | Long​ | 800​ | 最大分段长度，取值范围为 100~2000。​在 chunk_type=1 时必选。​ |\n| remove_extra_spaces​ | Boolean​ | true​ | 是否自动过滤连续的空格、换行符和制表符。取值包括：​true：自动过滤​false：（默认）不自动过滤​在 chunk_type=1 时生效。​ |\n| remove_urls_emails​ | Boolean​ | true​ | 是否自动过滤所有 URL 和电子邮箱地址。取值包括：​true：自动过滤​false：（默认）不自动过滤​在 chunk_type=1 时生效。​ |\n| caption_type​ | Integer​ | 0​ | 图片知识库的标注方式：​0：（默认）系统自动标注描述信息​1：手工标注。上传图片后需要再次调用 API更新知识库图片描述来手动设置标注。​说明在空的知识库中首次上传图片时，需要手工设置caption_type参数的值，否则会报错。​​ |\n\n- 0：自动分段与清洗。采用扣子编程预置规则进行数据分段与处理。 ​\n\n- 1：自定义。此时需要通过 separator、max_tokens、remove_extra_spaces 和 remove_urls_emails 分段规则细节。 ​\n\n- true：自动过滤 ​\n\n- false：（默认）不自动过滤 ​\n\n- true：自动过滤 ​\n\n- false：（默认）不自动过滤 ​\n\n- 0：（默认）系统自动标注描述信息 ​\n\n- 1：手工标注。上传图片后需要再次调用 API 更新知识库图片描述 来手动设置标注。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/list_knowledge_files",
      "title": "查看知识库文件列表",
      "content": {
        "sections": [],
        "full_text": "查看知识库文件列表\n\n调用接口查看指定扣子知识库的文件列表，即文档、表格或图像列表。\n\n​\n\n说明\n\n仅支持通过本 API 查看扣子知识库中的文件列表，不支持查看火山知识库中的文件列表。查看火山知识库中的文件列表请参见\n\n查看火山知识库的文件列表\n\n。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/open_api/knowledge/document/list\n\n​\n\n权限\n\n​\n\nlistDocument\n\n​\n\n确保调用该接口使用的个人令牌开通了\n\nlistDocument\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n接口说明\n\n​\n\n调用接口查看指定扣子知识库的内容列表，即文件、表格或图像列表。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n请求正文的方式。\n\n​\n\nAgw-Js-Conv\n\n​\n\nstr\n\n​\n\n防止丢失数字类型参数的精度。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndataset_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n75034727177617***\n\n​\n\n待查看文件的扣子知识库 ID。\n\n​\n\n仅支持扣子知识库，不支持火山知识库。\n\n​\n\n在扣子编程中打开指定知识库页面，页面 URL 中\n\nknowledge\n\n参数后的数字就是知识库 ID。例如\n\nhttps://www.coze.cn/space/736142423532160****/knowledge/738509371792341****\n\n，知识库 ID 为\n\n738509371792341****\n\n。\n\n​\n\npage\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n1\n\n​\n\n分页查询时的页码。默认为 1，即从第一页数据开始返回。\n\nsize\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n20\n\n​\n\n分页大小。默认为 10，即每页返回 10 条数据。\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n状态码。\n\n​\n\n0 代表调用成功。\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndocument_infos\n\n​\n\nArray of\n\nDocumentInfo\n\n​\n\n[ ]\n\n​\n\n知识库文件列表。详细说明可参考\n\nDocumentInfo object\n\n。\n\ntotal\n\n​\n\nInteger\n\n​\n\n20\n\n​\n\n指定知识库中的文件总数。\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n返回详情，包含本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此\n\nlogid\n\n及错误码联系扣子团队获取帮助。\n\n​\n\n​\n\nDocumentInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nchar_count\n\n​\n\nInteger\n\n​\n\n4\n\n​\n\n文件内容的总字符数量。\n\n​\n\nchunk_strategy\n\n​\n\nObject of\n\nChunkStrategy\n\n​\n\n{ \"chunk_type\": 1, \"max_tokens\": 800, \"remove_extra_spaces\": false, \"remove_urls_emails\": false, \"separator\": \"#\" }\n\n​\n\n分段规则。\n\n​\n\ncreate_time\n\n​\n\nInteger\n\n​\n\n1719907964\n\n​\n\n文件的上传时间，格式为 10 位的 Unixtime 时间戳。\n\n​\n\ndocument_id\n\n​\n\nString\n\n​\n\n738694205603010****\n\n​\n\n文件的 ID。\n\n​\n\nformat_type\n\n​\n\nInteger\n\n​\n\n0\n\n​\n\n文件的格式类型。取值包括：\n\n​\n\n0：文档类型，例如 txt 、pdf 、在线网页等格式均属于文档类型。\n\n​\n\n1：表格类型，例如 xls 表格等格式属于表格类型。\n\n​\n\n2：照片类型，例如 png 图片等格式属于照片类型。\n\n​\n\nhit_count\n\n​\n\nInteger\n\n​\n\n0\n\n​\n\n被对话命中的次数。\n\n​\n\nname\n\n​\n\nString\n\n​\n\nCoze.pdf\n\n​\n\n文件的名称。\n\n​\n\nsize\n\n​\n\nInteger\n\n​\n\n14164\n\n​\n\n文件的大小，单位为字节。\n\n​\n\nslice_count\n\n​\n\nInteger\n\n​\n\n1\n\n​\n\n文件的分段数量。\n\n​\n\nsource_type\n\n​\n\nInteger\n\n​\n\n0\n\n​\n\n文件的上传方式。取值包括：\n\n​\n\n0：上传本地文件。\n\n​\n\n1：上传在线网页。\n\n​\n\nstatus\n\n​\n\nInteger\n\n​\n\n1\n\n​\n\n文件的处理状态。取值包括：\n\n​\n\n0：处理中\n\n​\n\n1：处理完毕\n\n​\n\n9：处理失败，建议重新上传\n\n​\n\ntype\n\n​\n\nString\n\n​\n\npdf\n\n​\n\n本地文件格式，即文件后缀，例如 txt。格式支持 pdf、txt、doc、docx 类型。\n\n​\n\nupdate_interval\n\n​\n\nInteger\n\n​\n\n0\n\n​\n\n在线网页自动更新的频率。单位为小时。\n\n​\n\nupdate_time\n\n​\n\nInteger\n\n​\n\n1719907969\n\n​\n\n文件的最近一次修改时间，格式为 10 位的 Unixtime 时间戳。\n\n​\n\nupdate_type\n\n​\n\nInteger\n\n​\n\n0\n\n​\n\n在线网页是否自动更新。取值包括：\n\n​\n\n0：不自动更新\n\n​\n\n1：自动更新\n\n​\n\ntos_uri\n\n​\n\nString\n\n​\n\nFileBizType.BIZ_BOT_DATASET/847077809337655_1727579972975689529_0ytrdq****.docx\n\n​\n\n上传的本地文档的唯一标识。\n\n​\n\n​\n\nChunkStrategy\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nchunk_type\n\n​\n\nInteger\n\n​\n\n0\n\n​\n\n分段设置。取值包括：\n\n​\n\n0：自动分段与清洗。采用扣子编程预置规则进行数据分段与处理。\n\n​\n\n1：自定义。此时需要通过 separator、max_tokens、remove_extra_spaces 和 remove_urls_emails 分段规则细节。\n\n​\n\nseparator\n\n​\n\nString\n\n​\n\n#\n\n​\n\n分段标识符。\n\n​\n\n在 chunk_type=1 时必选。\n\n​\n\nmax_tokens\n\n​\n\nLong\n\n​\n\n800\n\n​\n\n最大分段长度，取值范围为 100~2000。\n\n​\n\n在 chunk_type=1 时必选。\n\n​\n\nremove_extra_spaces\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n是否自动过滤连续的空格、换行符和制表符。取值包括：\n\n​\n\ntrue：自动过滤\n\n​\n\nfalse：（默认）不自动过滤\n\n​\n\n在 chunk_type=1 时生效。\n\n​\n\nremove_urls_emails\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n是否自动过滤所有 URL 和电子邮箱地址。取值包括：\n\n​\n\ntrue：自动过滤\n\n​\n\nfalse：（默认）不自动过滤\n\n​\n\n在 chunk_type=1 时生效。\n\n​\n\ncaption_type\n\n​\n\nInteger\n\n​\n\n0\n\n​\n\n图片知识库的标注方式：\n\n​\n\n0：（默认）系统自动标注描述信息\n\n​\n\n1：手工标注。上传图片后需要再次调用 API\n\n更新知识库图片描述\n\n来手动设置标注。\n\n​\n\n说明\n\n在空的知识库中首次上传图片时，需要手工设置\n\ncaption_type\n\n参数的值，否则会报错。\n\n​\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/open_api/knowledge/document/list' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--header 'Agw-Js-Conv\n\n:\n\nstr' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"dataset_id\"\n\n:\n\n\"736356924530694****\"\n\n,\n\n​\n\n\"page\"\n\n:\n\n0\n\n,\n\n​\n\n\"size\"\n\n:\n\n10\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"document_infos\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"char_count\"\n\n:\n\n4\n\n,\n\n​\n\n\"chunk_strategy\"\n\n:\n\n{\n\n​\n\n\"chunk_type\"\n\n:\n\n0\n\n,\n\n​\n\n\"max_tokens\"\n\n:\n\n0\n\n,\n\n​\n\n\"remove_extra_spaces\"\n\n:\n\nfalse\n\n,\n\n​\n\n\"remove_urls_emails\"\n\n:\n\nfalse\n\n,\n\n​\n\n\"separator\"\n\n:\n\n\"\"\n\n​\n\n},\n\n​\n\n\"create_time\"\n\n:\n\n1719476392\n\n,\n\n​\n\n\"document_id\"\n\n:\n\n\"738508308097900****\"\n\n,\n\n​\n\n\"format_type\"\n\n:\n\n0\n\n,\n\n​\n\n\"hit_count\"\n\n:\n\n0\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"小猫的阳光午睡.pdf.pdf\"\n\n,\n\n​\n\n\"size\"\n\n:\n\n30142\n\n,\n\n​\n\n\"slice_count\"\n\n:\n\n1\n\n,\n\n​\n\n\"source_type\"\n\n:\n\n0\n\n,\n\n​\n\n\"status\"\n\n:\n\n1\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"pdf\"\n\n,\n\n​\n\n\"update_interval\"\n\n:\n\n0\n\n,\n\n​\n\n\"update_time\"\n\n:\n\n1719476430\n\n,\n\n​\n\n\"update_type\"\n\n:\n\n0\n\n​\n\n}\n\n​\n\n],\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"total\"\n\n:\n\n1\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n修改知识库文件\n\n下一篇\n\n查看知识库文件上传进度",
        "links": []
      },
      "markdown": "| 请求方式​ | POST |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/open_api/knowledge/document/list​ |\n| 权限​ | listDocument​确保调用该接口使用的个人令牌开通了listDocument权限，详细信息参考鉴权方式。 |\n| 接口说明​ | 调用接口查看指定扣子知识库的内容列表，即文件、表格或图像列表。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 请求正文的方式。​ |\n| Agw-Js-Conv​ | str​ | 防止丢失数字类型参数的精度。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| dataset_id​ | String​ | 必选​ | 75034727177617***​ | 待查看文件的扣子知识库 ID。​仅支持扣子知识库，不支持火山知识库。​在扣子编程中打开指定知识库页面，页面 URL 中knowledge参数后的数字就是知识库 ID。例如https://www.coze.cn/space/736142423532160****/knowledge/738509371792341****，知识库 ID 为738509371792341****。​ |\n| page​ | Integer​ | 可选​ | 1​ | 分页查询时的页码。默认为 1，即从第一页数据开始返回。 |\n| size​ | Integer​ | 可选​ | 20​ | 分页大小。默认为 10，即每页返回 10 条数据。 |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0 | 状态码。​0 代表调用成功。 |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| document_infos​ | Array ofDocumentInfo​ | [ ]​ | 知识库文件列表。详细说明可参考DocumentInfo object。 |\n| total​ | Integer​ | 20​ | 指定知识库中的文件总数。 |\n| detail​ | Object ofResponseDetail​ | \"20241210152726467C48D89D6DB2****\"​ | 返回详情，包含本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此logid及错误码联系扣子团队获取帮助。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| char_count​ | Integer​ | 4​ | 文件内容的总字符数量。​ |\n| chunk_strategy​ | Object ofChunkStrategy​ | { \"chunk_type\": 1, \"max_tokens\": 800, \"remove_extra_spaces\": false, \"remove_urls_emails\": false, \"separator\": \"#\" }​ | 分段规则。​ |\n| create_time​ | Integer​ | 1719907964​ | 文件的上传时间，格式为 10 位的 Unixtime 时间戳。​ |\n| document_id​ | String​ | 738694205603010****​ | 文件的 ID。​ |\n| format_type​ | Integer​ | 0​ | 文件的格式类型。取值包括：​0：文档类型，例如 txt 、pdf 、在线网页等格式均属于文档类型。​1：表格类型，例如 xls 表格等格式属于表格类型。​2：照片类型，例如 png 图片等格式属于照片类型。​ |\n| hit_count​ | Integer​ | 0​ | 被对话命中的次数。​ |\n| name​ | String​ | Coze.pdf​ | 文件的名称。​ |\n| size​ | Integer​ | 14164​ | 文件的大小，单位为字节。​ |\n| slice_count​ | Integer​ | 1​ | 文件的分段数量。​ |\n| source_type​ | Integer​ | 0​ | 文件的上传方式。取值包括：​0：上传本地文件。​1：上传在线网页。​ |\n| status​ | Integer​ | 1​ | 文件的处理状态。取值包括：​0：处理中​1：处理完毕​9：处理失败，建议重新上传​ |\n| type​ | String​ | pdf​ | 本地文件格式，即文件后缀，例如 txt。格式支持 pdf、txt、doc、docx 类型。​ |\n| update_interval​ | Integer​ | 0​ | 在线网页自动更新的频率。单位为小时。​ |\n| update_time​ | Integer​ | 1719907969​ | 文件的最近一次修改时间，格式为 10 位的 Unixtime 时间戳。​ |\n| update_type​ | Integer​ | 0​ | 在线网页是否自动更新。取值包括：​0：不自动更新​1：自动更新​ |\n| tos_uri​ | String​ | FileBizType.BIZ_BOT_DATASET/847077809337655_1727579972975689529_0ytrdq****.docx​ | 上传的本地文档的唯一标识。​ |\n\n- 0：文档类型，例如 txt 、pdf 、在线网页等格式均属于文档类型。 ​\n\n- 1：表格类型，例如 xls 表格等格式属于表格类型。 ​\n\n- 2：照片类型，例如 png 图片等格式属于照片类型。 ​\n\n- 0：上传本地文件。 ​\n\n- 1：上传在线网页。 ​\n\n- 0：处理中 ​\n\n- 1：处理完毕 ​\n\n- 9：处理失败，建议重新上传 ​\n\n- 0：不自动更新 ​\n\n- 1：自动更新 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| chunk_type​ | Integer​ | 0​ | 分段设置。取值包括：​0：自动分段与清洗。采用扣子编程预置规则进行数据分段与处理。​1：自定义。此时需要通过 separator、max_tokens、remove_extra_spaces 和 remove_urls_emails 分段规则细节。​ |\n| separator​ | String​ | #​ | 分段标识符。​在 chunk_type=1 时必选。​ |\n| max_tokens​ | Long​ | 800​ | 最大分段长度，取值范围为 100~2000。​在 chunk_type=1 时必选。​ |\n| remove_extra_spaces​ | Boolean​ | true​ | 是否自动过滤连续的空格、换行符和制表符。取值包括：​true：自动过滤​false：（默认）不自动过滤​在 chunk_type=1 时生效。​ |\n| remove_urls_emails​ | Boolean​ | true​ | 是否自动过滤所有 URL 和电子邮箱地址。取值包括：​true：自动过滤​false：（默认）不自动过滤​在 chunk_type=1 时生效。​ |\n| caption_type​ | Integer​ | 0​ | 图片知识库的标注方式：​0：（默认）系统自动标注描述信息​1：手工标注。上传图片后需要再次调用 API更新知识库图片描述来手动设置标注。​说明在空的知识库中首次上传图片时，需要手工设置caption_type参数的值，否则会报错。​​ |\n\n- 0：自动分段与清洗。采用扣子编程预置规则进行数据分段与处理。 ​\n\n- 1：自定义。此时需要通过 separator、max_tokens、remove_extra_spaces 和 remove_urls_emails 分段规则细节。 ​\n\n- true：自动过滤 ​\n\n- false：（默认）不自动过滤 ​\n\n- true：自动过滤 ​\n\n- false：（默认）不自动过滤 ​\n\n- 0：（默认）系统自动标注描述信息 ​\n\n- 1：手工标注。上传图片后需要再次调用 API 更新知识库图片描述 来手动设置标注。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/get_dataset_progress",
      "title": "查看知识库文件上传进度",
      "content": {
        "sections": [],
        "full_text": "查看知识库文件上传进度\n\n调用此接口获取扣子知识库文件的上传进度。\n\n​\n\n此接口支持查看所有类型知识库文件的上传进度，例如文本、图片、表格。\n\n​\n\n支持批量查看多个文件的进度，多个文件必须位于同一个知识库中。\n\n​\n\n该 API 仅支持查看扣子知识库中的文件上传进度，不支持查看火山知识库中的文件上传进度。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/datasets/:dataset_id/process\n\n​\n\n权限\n\n​\n\nreadDocumentProgress\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nreadDocumentProgress\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n接口说明\n\n​\n\n调用此接口获取知识库文件的上传进度。\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n请求正文的方式。\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndataset_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n744258581358768****\n\n​\n\n扣子知识库 ID。不能填写火山知识库 ID。\n\n​\n\n在扣子编程中打开指定扣子知识库页面，页面 URL 中\n\nknowledge\n\n参数后的数字就是扣子知识库 ID。例如\n\nhttps://www.coze.cn/space/736142423532160****/knowledge/738509371792341****\n\n，扣子知识库 ID 为\n\n738509371792341****\n\n。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndocument_ids\n\n​\n\nArray of String\n\n​\n\n必选\n\n​\n\n[\"744258581358768****\", \"744258581358768****\"]\n\n需要获取上传进度的文件 ID 列表。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nObject of\n\nGetDocumentProgressOpenApiData\n\n​\n\n参考返回示例\n\n接口返回的业务信息。\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\n​\n\nGetDocumentProgressOpenApiData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nArray of\n\nDocumentProgress\n\n​\n\n参考返回示例\n\n​\n\n文件的上传进度详情。\n\n​\n\n​\n\nDocumentProgress\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nurl\n\n​\n\nString\n\n​\n\nhttps://example.com/ocean-cloud-tos/FileBizType.BIZ_BOT_DATASET/217526895615***.jpg?lk3s=5ec9c6e9&x-expires=1733819246&x-signature=G9VVp2ObiCwUourS7rv44YLdh****\n\n​\n\n文件地址。\n\n​\n\nsize\n\n​\n\nLong\n\n​\n\n171340\n\n​\n\n文件的大小，单位为字节。\n\n​\n\ntype\n\n​\n\nString\n\n​\n\njpg\n\n​\n\n本地文件格式，即文件后缀，例如 txt。格式支持 pdf、txt、doc、docx 类型。\n\n​\n\nstatus\n\n​\n\nInteger\n\n​\n\n1\n\n​\n\n文件的处理状态。取值包括：\n\n​\n\n0：处理中\n\n​\n\n1：处理完毕\n\n​\n\n9：处理失败，建议重新上传\n\n​\n\nprogress\n\n​\n\nInteger\n\n​\n\n100\n\n​\n\n文件上传的进度。单位为百分比。\n\n​\n\ndocument_id\n\n​\n\nString\n\n​\n\n744667080521909***\n\n​\n\n文件的 ID。\n\n​\n\nupdate_type\n\n​\n\nInteger\n\n​\n\n0\n\n​\n\n在线网页是否自动更新。取值包括：\n\n​\n\n0：不自动更新\n\n​\n\n1：自动更新\n\n​\n\ndocument_name\n\n​\n\nString\n\n​\n\ntest\n\n​\n\n文件名称。\n\n​\n\nremaining_time\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n预期剩余时间，单位为秒。\n\n​\n\nstatus_descript\n\n​\n\nString\n\n​\n\n​\n\n失败状态的详细描述，例如切片失败时返回失败信息。\n\n​\n\n仅文档处理失败时会返回此参数。\n\n​\n\nupdate_interval\n\n​\n\nInteger\n\n​\n\n0\n\n​\n\n在线网页自动更新的频率。单位为小时。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/datasets/:dataset_id/process' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_O******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"document_ids\"\n\n:\n\n[\n\n​\n\n\"7442585813587***\"\n\n,\n\n​\n\n\"7442585813668***\"\n\n​\n\n]\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"data\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"progress\"\n\n:\n\n100\n\n,\n\n​\n\n\"update_interval\"\n\n:\n\n0\n\n,\n\n​\n\n\"status\"\n\n:\n\n1\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"jpg\"\n\n,\n\n​\n\n\"update_type\"\n\n:\n\n0\n\n,\n\n​\n\n\"document_id\"\n\n:\n\n\"744667080521909***\"\n\n,\n\n​\n\n\"remaining_time\"\n\n:\n\n0\n\n,\n\n​\n\n\"size\"\n\n:\n\n171340\n\n,\n\n​\n\n\"document_name\"\n\n:\n\n\"test1\"\n\n,\n\n​\n\n\"url\"\n\n:\n\n\"https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/FileBizType.BIZ_BOT_DATASET/217526895615***.jpg?lk3s=5ec9c6e9&x-expires=1733819246&x-signature=G9VVp2ObiCwUourS7rv44YLdh****\"\n\n​\n\n}\n\n​\n\n]\n\n​\n\n},\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6***\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n查看知识库文件列表\n\n下一篇\n\n更新知识库图片描述",
        "links": []
      },
      "markdown": "- 此接口支持查看所有类型知识库文件的上传进度，例如文本、图片、表格。 ​\n\n- 支持批量查看多个文件的进度，多个文件必须位于同一个知识库中。 ​\n\n- 该 API 仅支持查看扣子知识库中的文件上传进度，不支持查看火山知识库中的文件上传进度。 ​\n\n| 请求方式​ | POST |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/datasets/:dataset_id/process​ |\n| 权限​ | readDocumentProgress​确保调用该接口使用的访问令牌开通了readDocumentProgress权限，详细信息参考鉴权方式。 |\n| 接口说明​ | 调用此接口获取知识库文件的上传进度。 |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 请求正文的方式。 |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| dataset_id​ | String​ | 必选​ | 744258581358768****​ | 扣子知识库 ID。不能填写火山知识库 ID。​在扣子编程中打开指定扣子知识库页面，页面 URL 中knowledge参数后的数字就是扣子知识库 ID。例如https://www.coze.cn/space/736142423532160****/knowledge/738509371792341****，扣子知识库 ID 为738509371792341****。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| document_ids​ | Array of String​ | 必选​ | [\"744258581358768****\", \"744258581358768****\"] | 需要获取上传进度的文件 ID 列表。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | Object ofGetDocumentProgressOpenApiData​ | 参考返回示例 | 接口返回的业务信息。 |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | Array ofDocumentProgress​ | 参考返回示例​ | 文件的上传进度详情。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| url​ | String​ | https://example.com/ocean-cloud-tos/FileBizType.BIZ_BOT_DATASET/217526895615***.jpg?lk3s=5ec9c6e9&x-expires=1733819246&x-signature=G9VVp2ObiCwUourS7rv44YLdh****​ | 文件地址。​ |\n| size​ | Long​ | 171340​ | 文件的大小，单位为字节。​ |\n| type​ | String​ | jpg​ | 本地文件格式，即文件后缀，例如 txt。格式支持 pdf、txt、doc、docx 类型。​ |\n| status​ | Integer​ | 1​ | 文件的处理状态。取值包括：​0：处理中​1：处理完毕​9：处理失败，建议重新上传​ |\n| progress​ | Integer​ | 100​ | 文件上传的进度。单位为百分比。​ |\n| document_id​ | String​ | 744667080521909***​ | 文件的 ID。​ |\n| update_type​ | Integer​ | 0​ | 在线网页是否自动更新。取值包括：​0：不自动更新​1：自动更新​ |\n| document_name​ | String​ | test​ | 文件名称。​ |\n| remaining_time​ | Long​ | 0​ | 预期剩余时间，单位为秒。​ |\n| status_descript​ | String​ | ​ | 失败状态的详细描述，例如切片失败时返回失败信息。​仅文档处理失败时会返回此参数。​ |\n| update_interval​ | Integer​ | 0​ | 在线网页自动更新的频率。单位为小时。​ |\n\n- 0：处理中 ​\n\n- 1：处理完毕 ​\n\n- 9：处理失败，建议重新上传 ​\n\n- 0：不自动更新 ​\n\n- 1：自动更新 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/update_image_caption",
      "title": "更新知识库图片描述",
      "content": {
        "sections": [],
        "full_text": "更新知识库图片描述\n\n调用此接口更新扣子知识库中图片的描述信息。\n\n​\n\n接口限制\n\n​\n\n此 API 仅支持更新扣子知识库中的图片描述信息，不适用于火山知识库。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPUT\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/datasets/:dataset_id/images/:document_id\n\n​\n\n权限\n\n​\n\nupdatePhoto\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nupdatePhoto\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n调用此接口更新扣子知识库中图片的描述信息。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n请求正文的方式。\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndocument_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n744667080521909****\n\n​\n\n待更新描述的图片 ID。\n\n​\n\ndataset_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n\"744632974166804****\"\n\n​\n\n知识库 ID。\n\n​\n\n在扣子编程中打开指定知识库页面，页面 URL 中\n\nknowledge\n\n参数后的数字就是知识库 ID。例如\n\nhttps://bots.bytedance.net/space/736142423532160****/knowledge/738509371792341****\n\n，知识库 ID 为\n\n738509371792341****\n\n。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncaption\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n小猫\n\n图片的描述信息。\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n状态码。\n\n​\n\n0 代表调用成功。\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request PUT 'https\n\n:\n\n//api.coze.cn/v1/datasets/744632265564659****/images/744667080521911****' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"caption\"\n\n:\n\n\"小猫\"\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"202412101551329A18A4BFB***\"\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n查看知识库文件上传进度\n\n下一篇\n\n查看知识库图片列表",
        "links": []
      },
      "markdown": "| 请求方式​ | PUT |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/datasets/:dataset_id/images/:document_id​ |\n| 权限​ | updatePhoto​确保调用该接口使用的访问令牌开通了updatePhoto权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 调用此接口更新扣子知识库中图片的描述信息。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 请求正文的方式。 |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| document_id​ | String​ | 必选​ | 744667080521909****​ | 待更新描述的图片 ID。​ |\n| dataset_id​ | String​ | 必选​ | \"744632974166804****\"​ | 知识库 ID。​在扣子编程中打开指定知识库页面，页面 URL 中knowledge参数后的数字就是知识库 ID。例如https://bots.bytedance.net/space/736142423532160****/knowledge/738509371792341****，知识库 ID 为738509371792341****。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| caption​ | String​ | 必选​ | 小猫 | 图片的描述信息。 |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0 | 状态码。​0 代表调用成功。 |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/get_images",
      "title": "查看知识库图片列表",
      "content": {
        "sections": [],
        "full_text": "查看知识库图片列表\n\n调用此接口查看图片类知识库中图片的详细信息。\n\n​\n\n查看图片时，支持通过图片的标注进行筛选。\n\n​\n\n接口限制\n\n​\n\n此 API 仅支持查看扣子知识库中的图片详细信息，不适用于火山知识库。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/datasets/:dataset_id/images\n\n​\n\n​\n\n权限\n\n​\n\nlistPhoto\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nlistPhoto\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n调用此接口查看图片类知识库中图片的详细信息。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndataset_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n744632974166804****\n\n​\n\n知识库 ID。\n\n​\n\n在扣子编程中打开指定知识库页面，页面 URL 中\n\nknowledge\n\n参数后的数字就是知识库 ID。例如\n\nhttps://www.coze.cn/space/736142423532160****/knowledge/738509371792341****\n\n，知识库 ID 为\n\n738509371792341****\n\n。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\npage_num\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n1\n\n​\n\n查询结果分页展示时，此参数用于设置查看的页码。最小值为 1，默认为 1。\n\n​\n\npage_size\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n5\n\n​\n\n查询结果分页展示时，此参数用于设置每页返回的数据量。取值范围为 1~299，默认为 10。\n\n​\n\nkeyword\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n小猫\n\n​\n\n对图片描述进行搜索时，搜索的关键字。\n\n​\n\nhas_caption\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\ntrue\n\n​\n\n图片是否已设置了描述信息。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata\n\n​\n\nObject of\n\nListPhotoOpenApiData\n\n​\n\n参考返回示例\n\n​\n\n返回内容\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n状态码。\n\n​\n\n0 代表调用成功。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此\n\nlogid\n\n及错误码联系扣子团队获取帮助。\n\n​\n\n​\n\nListPhotoOpenApiData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nphoto_infos\n\n​\n\nArray of\n\nPhotoInfo\n\n​\n\n参考返回示例\n\n​\n\n图片的详细信息。\n\n​\n\ntotal_count\n\n​\n\nInteger\n\n​\n\n1\n\n​\n\n符合查询条件的图片总数量。\n\n​\n\n​\n\nPhotoInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nurl\n\n​\n\nString\n\n​\n\nhttps://lf26-appstore-sign.oceancloudapi.com/ocean-cloud-tos/FileBizType.BIZ_BOT_DATASET/217526895615****.jpg?lk3s=5ec9c6e9&x-expires=1733821017&x-signature=KJbBgbcwSZYYh5Uf5gISU5HAPB****\n\n​\n\n图片链接。\n\n​\n\nname\n\n​\n\nString\n\n​\n\ntest2\n\n​\n\n图片名。\n\n​\n\nsize\n\n​\n\nInteger\n\n​\n\n171340\n\n​\n\n图片大小，单位为字节。\n\n​\n\ntype\n\n​\n\nString\n\n​\n\njpg\n\n​\n\n文件格式，即文件后缀，例如 jpg、png。\n\n​\n\nstatus\n\n​\n\nInteger\n\n​\n\n1\n\n​\n\n文件的状态。取值包括：\n\n​\n\n0：处理中\n\n​\n\n1：处理完毕\n\n​\n\n9：处理失败，建议重新上传\n\n​\n\ncaption\n\n​\n\nString\n\n​\n\n小猫\n\n​\n\n图片描述信息。\n\n​\n\ncreator_id\n\n​\n\nString\n\n​\n\n217526895615****\n\n​\n\n创建人的扣子 UID。\n\n​\n\ncreate_time\n\n​\n\nInteger\n\n​\n\n1733815232\n\n​\n\n图片的上传时间，格式为 10 位的 Unixtime 时间戳。\n\n​\n\ndocument_id\n\n​\n\nString\n\n​\n\n744667080521911****\n\n​\n\n图片的 ID。\n\n​\n\nsource_type\n\n​\n\nInteger\n\n​\n\n5\n\n​\n\n上传方式。取值包括：\n\n​\n\n0：上传本地文件。\n\n​\n\n1：上传在线网页。\n\n​\n\n5：上传 file_id。\n\n​\n\nupdate_time\n\n​\n\nInteger\n\n​\n\n1733817093\n\n​\n\n更新时间，格式为 10 位的 Unixtime 时间戳。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request GET 'https\n\n:\n\n//api.coze.cn/v1/datasets/744632974166804****/images?page_num=1&page_size=5&keyword=小猫&has_caption=true' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_hfwkehfncaf****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"2024121015565741D31B341C9C0***\"\n\n​\n\n},\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"total_count\"\n\n:\n\n1\n\n,\n\n​\n\n\"photo_infos\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"name\"\n\n:\n\n\"test2\"\n\n,\n\n​\n\n\"status\"\n\n:\n\n1\n\n,\n\n​\n\n\"creator_id\"\n\n:\n\n\"217526895615****\"\n\n,\n\n​\n\n\"create_time\"\n\n:\n\n1733815232\n\n,\n\n​\n\n\"update_time\"\n\n:\n\n1733817093\n\n,\n\n​\n\n\"size\"\n\n:\n\n171340\n\n,\n\n​\n\n\"url\"\n\n:\n\n\"https://lf26-appstore-sign.oceancloudapi.com/ocean-cloud-tos/FileBizType.BIZ_BOT_DATASET/217526895615****.jpg?lk3s=5ec9c6e9&x-expires=1733821017&x-signature=KJbBgbcwSZYYh5Uf5gISU5HAPB****\"\n\n,\n\n​\n\n\"caption\"\n\n:\n\n\"小猫\"\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"jpg\"\n\n,\n\n​\n\n\"source_type\"\n\n:\n\n5\n\n,\n\n​\n\n\"document_id\"\n\n:\n\n\"744667080521911****\"\n\n​\n\n}\n\n​\n\n]\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n更新知识库图片描述\n\n下一篇\n\n删除知识库文件",
        "links": []
      },
      "markdown": "| 请求方式​ | GET​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/datasets/:dataset_id/images​​ |\n| 权限​ | listPhoto​确保调用该接口使用的访问令牌开通了listPhoto权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 调用此接口查看图片类知识库中图片的详细信息。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| dataset_id​ | String​ | 必选​ | 744632974166804****​ | 知识库 ID。​在扣子编程中打开指定知识库页面，页面 URL 中knowledge参数后的数字就是知识库 ID。例如https://www.coze.cn/space/736142423532160****/knowledge/738509371792341****，知识库 ID 为738509371792341****。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| page_num​ | Integer​ | 可选​ | 1​ | 查询结果分页展示时，此参数用于设置查看的页码。最小值为 1，默认为 1。​ |\n| page_size​ | Integer​ | 可选​ | 5​ | 查询结果分页展示时，此参数用于设置每页返回的数据量。取值范围为 1~299，默认为 10。​ |\n| keyword​ | String​ | 可选​ | 小猫​ | 对图片描述进行搜索时，搜索的关键字。​ |\n| has_caption​ | Boolean​ | 可选​ | true​ | 图片是否已设置了描述信息。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data​ | Object ofListPhotoOpenApiData​ | 参考返回示例​ | 返回内容​ |\n| code​ | Long​ | 0​ | 状态码。​0 代表调用成功。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此logid及错误码联系扣子团队获取帮助。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| photo_infos​ | Array ofPhotoInfo​ | 参考返回示例​ | 图片的详细信息。​ |\n| total_count​ | Integer​ | 1​ | 符合查询条件的图片总数量。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| url​ | String​ | https://lf26-appstore-sign.oceancloudapi.com/ocean-cloud-tos/FileBizType.BIZ_BOT_DATASET/217526895615****.jpg?lk3s=5ec9c6e9&x-expires=1733821017&x-signature=KJbBgbcwSZYYh5Uf5gISU5HAPB****​ | 图片链接。​ |\n| name​ | String​ | test2​ | 图片名。​ |\n| size​ | Integer​ | 171340​ | 图片大小，单位为字节。​ |\n| type​ | String​ | jpg​ | 文件格式，即文件后缀，例如 jpg、png。​ |\n| status​ | Integer​ | 1​ | 文件的状态。取值包括：​0：处理中​1：处理完毕​9：处理失败，建议重新上传​ |\n| caption​ | String​ | 小猫​ | 图片描述信息。​ |\n| creator_id​ | String​ | 217526895615****​ | 创建人的扣子 UID。​ |\n| create_time​ | Integer​ | 1733815232​ | 图片的上传时间，格式为 10 位的 Unixtime 时间戳。​ |\n| document_id​ | String​ | 744667080521911****​ | 图片的 ID。​ |\n| source_type​ | Integer​ | 5​ | 上传方式。取值包括：​0：上传本地文件。​1：上传在线网页。​5：上传 file_id。​ |\n| update_time​ | Integer​ | 1733817093​ | 更新时间，格式为 10 位的 Unixtime 时间戳。​ |\n\n- 0：处理中 ​\n\n- 1：处理完毕 ​\n\n- 9：处理失败，建议重新上传 ​\n\n- 0：上传本地文件。 ​\n\n- 1：上传在线网页。 ​\n\n- 5：上传 file_id。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/delete_knowdge_files",
      "title": "删除知识库文件",
      "content": {
        "sections": [],
        "full_text": "删除知识库文件\n\n调用此接口删除扣子知识库中的文本、图片、表格等文件，支持批量删除。\n\n​\n\n说明\n\n仅知识库的所有者可以删除知识库文件。\n\n​\n\n知识库分为扣子知识库和火山知识库，该 API 仅用于删除扣子知识库中的文件，不支持删除火山知识库中的文件，如果需要删除火山知识库中的文件，请参见\n\n删除火山知识库文件\n\n。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/open_api/knowledge/document/delete\n\n​\n\n权限\n\n​\n\ndeleteDocument\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\ndeleteDocument\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n调用此接口删除知识库中的文本、图片、表格等文件，支持批量删除。\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n请求正文的方式。\n\n​\n\nAgw-Js-Conv\n\n​\n\nstr\n\n​\n\n防止丢失数字类型参数的精度。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndocument_ids\n\n​\n\nArray of String\n\n​\n\n必选\n\n​\n\n[\"123\"]\n\n​\n\n待删除的知识库文件列表。数组最大长度为 100，即一次性最多可删除 100 个文件。\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n状态码。\n\n​\n\n0 代表调用成功。\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n包含请求的详细信息，主要用于调试和问题排查。如果遇到异常报错场景，且反复重试仍然报错，可以根据此字段中的\n\nlogid\n\n联系扣子团队获取帮助。\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/open_api/knowledge/document/delete' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--header 'Agw-Js-Conv\n\n:\n\nstr' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"document_ids\"\n\n:\n\n[\n\n​\n\n\"123\"\n\n​\n\n]\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n查看知识库图片列表\n\n下一篇\n\n查询付费插件列表",
        "links": []
      },
      "markdown": "- 仅知识库的所有者可以删除知识库文件。 ​\n\n- 知识库分为扣子知识库和火山知识库，该 API 仅用于删除扣子知识库中的文件，不支持删除火山知识库中的文件，如果需要删除火山知识库中的文件，请参见 删除火山知识库文件 。 ​\n\n| 请求方式​ | POST |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/open_api/knowledge/document/delete​ |\n| 权限​ | deleteDocument​确保调用该接口使用的访问令牌开通了deleteDocument权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 调用此接口删除知识库中的文本、图片、表格等文件，支持批量删除。 |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 请求正文的方式。​ |\n| Agw-Js-Conv​ | str​ | 防止丢失数字类型参数的精度。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| document_ids​ | Array of String​ | 必选​ | [\"123\"]​ | 待删除的知识库文件列表。数组最大长度为 100，即一次性最多可删除 100 个文件。 |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 状态码。​0 代表调用成功。 |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"} | 包含请求的详细信息，主要用于调试和问题排查。如果遇到异常报错场景，且反复重试仍然报错，可以根据此字段中的logid联系扣子团队获取帮助。 |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/list_plugin",
      "title": "查询付费插件列表",
      "content": {
        "sections": [],
        "full_text": "查询付费插件列表\n\n查询插件商店中的付费插件列表。\n\n​\n\n接口描述\n\n​\n\n查询插件商店中的付费插件列表，包括扣子编程官方插件和三方插件，或通过关键词模糊搜索相关插件。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/stores/plugins\n\n​\n\n​\n\n权限\n\n​\n\n无\n\n​\n\n接口说明\n\n​\n\n查询插件商店中的付费插件列表。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nkeyword\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n语音识别\n\n​\n\n插件搜索的关键词，支持模糊匹配。\n\n​\n\nis_official\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\ntrue\n\n​\n\n是否为扣子编程官方插件。默认返回官方插件和三方插件。\n\n​\n\ntrue\n\n：官方插件。\n\n​\n\nfalse\n\n：三方插件。\n\n​\n\ncategory_ids\n\n​\n\nArray of String\n\n​\n\n可选\n\n​\n\n747593003997698***,73271372757147***\n\n​\n\n插件分类 ID 列表，用于筛选指定多个分类下的插件。默认为空，即返回所有分类下的插件。可以通过\n\n查询插件分类\n\nAPI 获取对应的插件分类 ID。\n\n​\n\npage_num\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n1\n\n​\n\n分页查询时的页码。默认为 1，即返回第一页数据。\n\n​\n\npage_size\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n20\n\n​\n\n每页返回的数据条数，用于分页查询。默认值为 20，最大值为 100。\n\n​\n\nsort_type\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nheat\n\n​\n\n排序类型，用于指定返回插件的排序方式。支持的排序方式如下所示：\n\n​\n\nheat\n\n：最受欢迎。\n\n​\n\nnewest\n\n：最近发布。\n\n​\n\nrelative\n\n：相关性，仅用于搜索场景。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndata\n\n​\n\nObject of\n\nListPluginData\n\n​\n\n\\\n\n​\n\n返回的插件列表及其相关信息的对象。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\n​\n\nListPluginData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nitems\n\n​\n\nArray of\n\nProductPluginInfo\n\n​\n\n\\\n\n​\n\n插件列表，包含多个插件项的数组。每个插件项包含插件的元信息和运行统计信息。\n\n​\n\nhas_more\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n是否已返回全部消息。\n\n​\n\ntrue：未返回全部信息，可再次调用此接口查看其他分页。\n\n​\n\nfalse：已返回全部信息。\n\n​\n\n​\n\nProductPluginInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nmetainfo\n\n​\n\nObject of\n\nProductMetainfo\n\n​\n\n\\\n\n​\n\n插件的详细信息。\n\n​\n\nplugin_info\n\n​\n\nObject of\n\nPluginInfo\n\n​\n\n{\"heat\":1500,\"call_count\":1000,\"description\":\"该插件提供高质量的语音识别功能。\",\"success_rate\":0.95,\"bots_use_count\":7,\"favorite_count\":50,\"total_tools_count\":1,\"avg_exec_duration_ms\":120,\"associated_bots_use_count\":2}\n\n​\n\n插件的运行数据和统计信息，包括热度、调用次数、成功率、收藏数等指标，以及被智能体使用的情况。\n\n​\n\n​\n\nProductMetainfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nname\n\n​\n\nString\n\n​\n\n语音识别插件\n\n​\n\n插件的名称。\n\n​\n\ncategory\n\n​\n\nObject of\n\nProductCategory\n\n​\n\n{\"id\":\"732713727571473***\",\"name\":\"社交\"}\n\n​\n\n插件所属的分类信息，包含分类 ID 和分类名称。\n\n​\n\nicon_url\n\n​\n\nString\n\n​\n\nhttps://example.com/plugins/voice-recognition/icon.png\n\n​\n\n插件的图标 URL。\n\n​\n\nentity_id\n\n​\n\nString\n\n​\n\n75464997639954***\n\n​\n\n插件 ID。\n\n​\n\nlisted_at\n\n​\n\nLong\n\n​\n\n1757474787\n\n​\n\n插件上架时间，以 Unix 时间戳格式表示，单位为秒。\n\n​\n\npaid_type\n\n​\n\nString\n\n​\n\npaid\n\n​\n\n插件的付费类型，固定为\n\npaid\n\n，即付费插件。\n\n​\n\nuser_info\n\n​\n\nObject of\n\nProductUserInfo\n\n​\n\n{\"user_id\":32351795934732,\"nick_name\":\"开发者小张\",\"user_name\":\"developer_zhang\",\"avatar_url\":\"\n\nhttps://example.com/img/user-avatar/e67e7ddd636a2087e79d624a64a***~300x300.image\n\n\"}\n\n​\n\n插件开发者的相关信息，包含开发者的用户 ID、昵称、用户名和头像 URL。\n\n​\n\nproduct_id\n\n​\n\nString\n\n​\n\n75462004326583***\n\n​\n\n商品的 ID，用于在插件商店中唯一标识该插件商品。\n\n​\n\ndescription\n\n​\n\nString\n\n​\n\n该插件提供高质量的语音识别功能。\n\n​\n\n插件的描述信息，用于说明插件的功能、用途和特点。\n\n​\n\nentity_type\n\n​\n\nString\n\n​\n\nplugin\n\n​\n\n实体类型，当前仅支持\n\nplugin\n\n，表示插件。\n\n​\n\nis_official\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n标识插件是否为官方发布。\n\n​\n\ntrue\n\n表示该插件由扣子编程官方发布。\n\n​\n\nfalse\n\n表示由第三方开发者发布。\n\n​\n\nentity_version\n\n​\n\nString\n\n​\n\n0\n\n​\n\n插件的版本号，用于标识插件的当前版本。\n\n​\n\n​\n\nProductCategory\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n732713727571473***\n\n​\n\n插件分类 ID。\n\n​\n\nname\n\n​\n\nString\n\n​\n\n社交\n\n​\n\n插件分类名称。\n\n​\n\n​\n\nProductUserInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nuser_id\n\n​\n\nLong\n\n​\n\n32351795934732***\n\n​\n\n插件开发者的扣子用户 ID。\n\n​\n\nnick_name\n\n​\n\nString\n\n​\n\n开发者小张\n\n​\n\n插件开发者在扣子编程上的昵称。\n\n​\n\nuser_name\n\n​\n\nString\n\n​\n\ndeveloper_zhang\n\n​\n\n插件开发者在扣子编程上的用户名。\n\n​\n\navatar_url\n\n​\n\nString\n\n​\n\nhttps://example.com/img/user-avatar/e67e7ddd636a2087e79d624a64a***~300x300.image\n\n​\n\n插件开发者在扣子编程上的头像 URL，用于展示开发者的头像信息。\n\n​\n\n​\n\nPluginInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nheat\n\n​\n\nInteger\n\n​\n\n1500\n\n​\n\n插件的热度值，用于表示该插件的受欢迎程度或使用频率。数值越大表示热度越高。\n\n​\n\ncall_count\n\n​\n\nLong\n\n​\n\n1000\n\n​\n\n插件的调用量，表示该插件的累计调用次数。\n\n​\n\ndescription\n\n​\n\nString\n\n​\n\n该插件提供高质量的语音识别功能。\n\n​\n\n插件的详细描述信息，用于说明插件的功能、用途和特点。\n\n​\n\nsuccess_rate\n\n​\n\nDouble\n\n​\n\n0.95\n\n​\n\n插件的调用成功率，以小数形式表示，数值范围为 0 到 1。\n\n​\n\nbots_use_count\n\n​\n\nLong\n\n​\n\n7\n\n​\n\n该插件在智能体或工作流中的累计关联次数。\n\n​\n\nfavorite_count\n\n​\n\nInteger\n\n​\n\n50\n\n​\n\n插件的收藏量，表示该插件被用户收藏的总次数。\n\n​\n\nis_call_available\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n标识该插件当前是否可被调用。\n\n​\n\ntrue\n\n：插件可正常调用。\n\n​\n\nfalse\n\n：插件暂时不可用，例如已下架。\n\n​\n\ntotal_tools_count\n\n​\n\nInteger\n\n​\n\n1\n\n​\n\n插件包含的工具总数。\n\n​\n\navg_exec_duration_ms\n\n​\n\nDouble\n\n​\n\n120\n\n​\n\n插件执行的平均耗时，单位为毫秒。\n\n​\n\nassociated_bots_use_count\n\n​\n\nLong\n\n​\n\n2\n\n​\n\n当前扣子商店中关联了该插件的智能体数量。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request GET 'https\n\n:\n\n//api.coze.cn/v1/stores/plugins' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_3UXDHN82MgQANqK59BIAeH****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\" \"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"items\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"metainfo\"\n\n:\n\n{\n\n​\n\n\"name\"\n\n:\n\n\"语音识别插件\"\n\n,\n\n​\n\n\"category\"\n\n:\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"7327137275714732069\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"社交\"\n\n​\n\n},\n\n​\n\n\"icon_url\"\n\n:\n\n\"https://example.com/plugins/voice-recognition/icon.png\"\n\n,\n\n​\n\n\"entity_id\"\n\n:\n\n\"75464997639954***\"\n\n,\n\n​\n\n\"listed_at\"\n\n:\n\n1757474787\n\n,\n\n​\n\n\"paid_type\"\n\n:\n\n\"paid\"\n\n,\n\n​\n\n\"user_info\"\n\n:\n\n{\n\n​\n\n\"user_id\"\n\n:\n\n32351795934732\n\n,\n\n​\n\n\"nick_name\"\n\n:\n\n\"开发者小张\"\n\n,\n\n​\n\n\"user_name\"\n\n:\n\n\"developer_zhang\"\n\n,\n\n​\n\n\"avatar_url\"\n\n:\n\n\"https://example.com/img/user-avatar/e67e7ddd636a2087e79d624a64a***~300x300.image\"\n\n​\n\n},\n\n​\n\n\"product_id\"\n\n:\n\n\"75462004326583***\"\n\n,\n\n​\n\n\"description\"\n\n:\n\n\"该插件提供高质量的语音识别功能。\"\n\n,\n\n​\n\n\"entity_type\"\n\n:\n\n\"plugin\"\n\n,\n\n​\n\n\"is_official\"\n\n:\n\ntrue\n\n,\n\n​\n\n\"entity_version\"\n\n:\n\n\"0\"\n\n​\n\n},\n\n​\n\n\"plugin_info\"\n\n:\n\n{\n\n​\n\n\"heat\"\n\n:\n\n1500\n\n,\n\n​\n\n\"call_count\"\n\n:\n\n1000\n\n,\n\n​\n\n\"description\"\n\n:\n\n\"该插件提供高质量的语音识别功能。\"\n\n,\n\n​\n\n\"success_rate\"\n\n:\n\n0.95\n\n,\n\n​\n\n\"bots_use_count\"\n\n:\n\n7\n\n,\n\n​\n\n\"favorite_count\"\n\n:\n\n50\n\n,\n\n​\n\n\"total_tools_count\"\n\n:\n\n1\n\n,\n\n​\n\n\"is_call_available\"\n\n:\n\ntrue\n\n,\n\n​\n\n\"avg_exec_duration_ms\"\n\n:\n\n120\n\n,\n\n​\n\n\"associated_bots_use_count\"\n\n:\n\n2\n\n​\n\n}\n\n​\n\n}\n\n​\n\n],\n\n​\n\n\"has_more\"\n\n:\n\nfalse\n\n​\n\n},\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n上一篇\n\n删除知识库文件\n\n下一篇\n\n查询插件分类",
        "links": []
      },
      "markdown": "| 请求方式​ | GET​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/stores/plugins​​ |\n| 权限​ | 无​ |\n| 接口说明​ | 查询插件商店中的付费插件列表。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| keyword​ | String​ | 可选​ | 语音识别​ | 插件搜索的关键词，支持模糊匹配。​ |\n| is_official​ | Boolean​ | 可选​ | true​ | 是否为扣子编程官方插件。默认返回官方插件和三方插件。​true：官方插件。​false：三方插件。​ |\n| category_ids​ | Array of String​ | 可选​ | 747593003997698***,73271372757147***​ | 插件分类 ID 列表，用于筛选指定多个分类下的插件。默认为空，即返回所有分类下的插件。可以通过查询插件分类API 获取对应的插件分类 ID。​ |\n| page_num​ | Integer​ | 可选​ | 1​ | 分页查询时的页码。默认为 1，即返回第一页数据。​ |\n| page_size​ | Integer​ | 可选​ | 20​ | 每页返回的数据条数，用于分页查询。默认值为 20，最大值为 100。​ |\n| sort_type​ | String​ | 可选​ | heat​ | 排序类型，用于指定返回插件的排序方式。支持的排序方式如下所示：​heat：最受欢迎。​newest：最近发布。​relative：相关性，仅用于搜索场景。​ |\n\n- true ：官方插件。 ​\n\n- false ：三方插件。 ​\n\n- heat ：最受欢迎。 ​\n\n- newest ：最近发布。 ​\n\n- relative ：相关性，仅用于搜索场景。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| data​ | Object ofListPluginData​ | \\​ | 返回的插件列表及其相关信息的对象。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| items​ | Array ofProductPluginInfo​ | \\​ | 插件列表，包含多个插件项的数组。每个插件项包含插件的元信息和运行统计信息。​ |\n| has_more​ | Boolean​ | true​ | 是否已返回全部消息。​true：未返回全部信息，可再次调用此接口查看其他分页。​false：已返回全部信息。​ |\n\n- true：未返回全部信息，可再次调用此接口查看其他分页。 ​\n\n- false：已返回全部信息。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| metainfo​ | Object ofProductMetainfo​ | \\​ | 插件的详细信息。​ |\n| plugin_info​ | Object ofPluginInfo​ | {\"heat\":1500,\"call_count\":1000,\"description\":\"该插件提供高质量的语音识别功能。\",\"success_rate\":0.95,\"bots_use_count\":7,\"favorite_count\":50,\"total_tools_count\":1,\"avg_exec_duration_ms\":120,\"associated_bots_use_count\":2}​ | 插件的运行数据和统计信息，包括热度、调用次数、成功率、收藏数等指标，以及被智能体使用的情况。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| name​ | String​ | 语音识别插件​ | 插件的名称。​ |\n| category​ | Object ofProductCategory​ | {\"id\":\"732713727571473***\",\"name\":\"社交\"}​ | 插件所属的分类信息，包含分类 ID 和分类名称。​ |\n| icon_url​ | String​ | https://example.com/plugins/voice-recognition/icon.png​ | 插件的图标 URL。​ |\n| entity_id​ | String​ | 75464997639954***​ | 插件 ID。​ |\n| listed_at​ | Long​ | 1757474787​ | 插件上架时间，以 Unix 时间戳格式表示，单位为秒。​ |\n| paid_type​ | String​ | paid​ | 插件的付费类型，固定为paid，即付费插件。​ |\n| user_info​ | Object ofProductUserInfo​ | {\"user_id\":32351795934732,\"nick_name\":\"开发者小张\",\"user_name\":\"developer_zhang\",\"avatar_url\":\"https://example.com/img/user-avatar/e67e7ddd636a2087e79d624a64a***~300x300.image\"}​ | 插件开发者的相关信息，包含开发者的用户 ID、昵称、用户名和头像 URL。​ |\n| product_id​ | String​ | 75462004326583***​ | 商品的 ID，用于在插件商店中唯一标识该插件商品。​ |\n| description​ | String​ | 该插件提供高质量的语音识别功能。​ | 插件的描述信息，用于说明插件的功能、用途和特点。​ |\n| entity_type​ | String​ | plugin​ | 实体类型，当前仅支持plugin，表示插件。​ |\n| is_official​ | Boolean​ | true​ | 标识插件是否为官方发布。​true表示该插件由扣子编程官方发布。​false表示由第三方开发者发布。​ |\n| entity_version​ | String​ | 0​ | 插件的版本号，用于标识插件的当前版本。​ |\n\n- true 表示该插件由扣子编程官方发布。 ​\n\n- false 表示由第三方开发者发布。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 732713727571473***​ | 插件分类 ID。​ |\n| name​ | String​ | 社交​ | 插件分类名称。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| user_id​ | Long​ | 32351795934732***​ | 插件开发者的扣子用户 ID。​ |\n| nick_name​ | String​ | 开发者小张​ | 插件开发者在扣子编程上的昵称。​ |\n| user_name​ | String​ | developer_zhang​ | 插件开发者在扣子编程上的用户名。​ |\n| avatar_url​ | String​ | https://example.com/img/user-avatar/e67e7ddd636a2087e79d624a64a***~300x300.image​ | 插件开发者在扣子编程上的头像 URL，用于展示开发者的头像信息。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| heat​ | Integer​ | 1500​ | 插件的热度值，用于表示该插件的受欢迎程度或使用频率。数值越大表示热度越高。​ |\n| call_count​ | Long​ | 1000​ | 插件的调用量，表示该插件的累计调用次数。​ |\n| description​ | String​ | 该插件提供高质量的语音识别功能。​ | 插件的详细描述信息，用于说明插件的功能、用途和特点。​ |\n| success_rate​ | Double​ | 0.95​ | 插件的调用成功率，以小数形式表示，数值范围为 0 到 1。​ |\n| bots_use_count​ | Long​ | 7​ | 该插件在智能体或工作流中的累计关联次数。​ |\n| favorite_count​ | Integer​ | 50​ | 插件的收藏量，表示该插件被用户收藏的总次数。​ |\n| is_call_available​ | Boolean​ | true​ | 标识该插件当前是否可被调用。​true：插件可正常调用。​false：插件暂时不可用，例如已下架。​ |\n| total_tools_count​ | Integer​ | 1​ | 插件包含的工具总数。​ |\n| avg_exec_duration_ms​ | Double​ | 120​ | 插件执行的平均耗时，单位为毫秒。​ |\n| associated_bots_use_count​ | Long​ | 2​ | 当前扣子商店中关联了该插件的智能体数量。​ |\n\n- true ：插件可正常调用。 ​\n\n- false ：插件暂时不可用，例如已下架。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/list_plugin_category",
      "title": "查询插件分类",
      "content": {
        "sections": [],
        "full_text": "查询插件分类\n\n查询插件分类信息。\n\n​\n\n你可以通过本 API 获取插件的分类 ID，后续调用\n\n查询插件列表\n\nAPI 查询指定分类下的插件。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/stores/categories\n\n​\n\n​\n\n权限\n\n​\n\n无\n\n​\n\n接口说明\n\n​\n\n查询插件分类信息。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nentity_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nplugin\n\n​\n\n实体类型，当前仅支持\n\nplugin\n\n，表示插件。\n\n​\n\npage_num\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n1\n\n​\n\n分页查询时的页码。默认为 1，即返回第一页数据。\n\n​\n\npage_size\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n20\n\n​\n\n每页返回的数据条数，用于分页查询。默认值为 20，最大值为 100。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndata\n\n​\n\nObject of\n\nListCategoryData\n\n​\n\n{\"items\":[{\"id\":\"732713727571473***\",\"name\":\"社交\"}],\"has_more\":false}\n\n​\n\n返回插件分类列表及相关分页信息。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含本次请求的详细日志信息，用于问题排查和技术支持。\n\n​\n\n​\n\nListCategoryData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nitems\n\n​\n\nArray of\n\nProductCategory\n\n​\n\n{ \"id\": \"7475930039976984614\", \"name\": \"智能硬件\" }\n\n​\n\n插件分类列表。\n\n​\n\nhas_more\n\n​\n\nBoolean\n\n​\n\nfalse\n\n​\n\n是否已返回全部消息。\n\n​\n\ntrue：未返回全部数据，可再次调用此接口查看其他分页。\n\n​\n\nfalse：已返回全部数据。\n\n​\n\n​\n\nProductCategory\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n732713727571473***\n\n​\n\n插件分类 ID。\n\n​\n\nname\n\n​\n\nString\n\n​\n\n社交\n\n​\n\n插件分类名称。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request GET 'https\n\n:\n\n//api.coze.cn/v1/stores/categories?entity_type=plugin' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_O******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"2025092517382882216851350ED***\"\n\n​\n\n},\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"has_more\"\n\n:\n\nfalse\n\n,\n\n​\n\n\"items\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"7475930039976984614\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"智能硬件\"\n\n​\n\n},\n\n​\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"7327137275714732069\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"新闻阅读\"\n\n​\n\n},\n\n​\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"7327137275714781221\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"便利生活\"\n\n​\n\n},\n\n​\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"7327137275714748453\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"图像\"\n\n​\n\n},\n\n​\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"7327137275714764837\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"实用工具\"\n\n​\n\n},\n\n​\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"7327137275714797605\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"网页搜索\"\n\n​\n\n},\n\n​\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"7327137275714813989\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"科学与教育\"\n\n​\n\n},\n\n​\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"7327137275714830373\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"社交\"\n\n​\n\n}\n\n​\n\n]\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n查询付费插件列表\n\n下一篇\n\n查询插件详情",
        "links": []
      },
      "markdown": "| 请求方式​ | GET​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/stores/categories​​ |\n| 权限​ | 无​ |\n| 接口说明​ | 查询插件分类信息。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| entity_type​ | String​ | 必选​ | plugin​ | 实体类型，当前仅支持plugin，表示插件。​ |\n| page_num​ | Integer​ | 可选​ | 1​ | 分页查询时的页码。默认为 1，即返回第一页数据。​ |\n| page_size​ | Integer​ | 可选​ | 20​ | 每页返回的数据条数，用于分页查询。默认值为 20，最大值为 100。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| data​ | Object ofListCategoryData​ | {\"items\":[{\"id\":\"732713727571473***\",\"name\":\"社交\"}],\"has_more\":false}​ | 返回插件分类列表及相关分页信息。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含本次请求的详细日志信息，用于问题排查和技术支持。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| items​ | Array ofProductCategory​ | { \"id\": \"7475930039976984614\", \"name\": \"智能硬件\" }​ | 插件分类列表。​ |\n| has_more​ | Boolean​ | false​ | 是否已返回全部消息。​true：未返回全部数据，可再次调用此接口查看其他分页。​false：已返回全部数据。​ |\n\n- true：未返回全部数据，可再次调用此接口查看其他分页。 ​\n\n- false：已返回全部数据。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 732713727571473***​ | 插件分类 ID。​ |\n| name​ | String​ | 社交​ | 插件分类名称。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/get_plugin",
      "title": "查询插件详情",
      "content": {
        "sections": [],
        "full_text": "查询插件详情\n\n查询指定插件的详细信息。\n\n​\n\n接口描述\n\n​\n\n你可以调用本 API 查询指定插件的详细信息，支持查询官方插件、三方插件和资源库插件。返回信息包括插件工具列表（工具名称、描述、输入参数和返回参数），付费插件还支持返回 MCP Server 的配置信息，以便在 Trae 等外部平台配置 MCP 服务，并调用插件工具。\n\n​\n\n接口限制\n\n​\n\n不支持通过渠道 Token 调用该 API。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/plugins/:plugin_id\n\n​\n\n​\n\n权限\n\n​\n\nPlugin.getPlugin\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nPlugin.getPlugin\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n查询插件详细信息。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nplugin_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n75458732632938***\n\n​\n\n待查询插件详情的插件 ID。支持查询官方插件、三方插件和资源库插件。\n\n​\n\n获取插件 ID 的方法如下：\n\n​\n\n调用\n\n查询插件列表\n\nAPI 获取对应的插件 ID，即\n\nentity_id\n\n的值。\n\n​\n\n资源库自定义插件：在插件编辑页面的 URL 中获取插件 ID。例如在 URL\n\nhttps://www.coze.cn/space/74982048832804***/plugin/75331489586134***\n\n中，\n\nplugin\n\n后面的数字即为插件 ID。\n\n​\n\n说明\n\n不支持通过插件商店 URL 中的插件商品 ID 查询插件详情。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata.tools\n\n​\n\nArray of\n\nTools\n\n​\n\n\\\n\n​\n\n插件工具的详细信息，包括名称、描述、输入参数和返回参数。\n\n​\n\ndata.mcp_json\n\n​\n\nString\n\n​\n\n{ \"mcpServers\": { \"coze_plugin_***\": { \"url\": \"\n\nhttps://mcp.coze.cn/v1/plugins/75458732632941***\n\n\", \"headers\": { \"Authorization\": \"Bearer ${COZE_API_TOKEN}\" } } } }\n\n​\n\nMCP Server 的配置信息，包含 MCP 服务器信息、插件 URL 和访问令牌。\n\n​\n\n说明\n\nAuthorization\n\n中的访问令牌默认生成的是临时访问凭证，有效期为 1 天。\n\n​\n\n如需使用长期凭证，在 Trae 等支持 MCP Server 的平台配置 MCP 信息时，需要手动替换为你在扣子编程中生成的访问令牌。支持个人访问令牌（PAT）、服务访问令牌（SAT）和 OAuth 鉴权，具体参考\n\n获取访问令牌\n\n。\n\n​\n\n​\n\ndata.name_for_model\n\n​\n\nString\n\n​\n\nyuyinhecheng\n\n​\n\n插件在模型内部使用的唯一标识符，用于AI模型在调用插件时快速识别和定位目标插件。\n\n​\n\ndata.icon_url\n\n​\n\nString\n\n​\n\nhttps://example.com/ocean-cloud-tos/plugin_icon/\n\nexample\n\n.jpeg?lk3s=cd508e2b&x-expires=1763780763&x-signature=W0osLsZ\n\n***\n\n​\n\n插件图标的 URL 链接。\n\n​\n\ndata.is_call_available\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n标识该插件当前是否可被调用。\n\n​\n\ntrue\n\n：插件可正常调用。\n\n​\n\nfalse\n\n：暂时无法调用，三方付费插件未签署协议。\n\n​\n\ndata.created_at\n\n​\n\nNumber\n\n​\n\n1759044695\n\n​\n\n插件创建时间，以 Unix 时间戳格式表示，单位为秒。\n\n​\n\ndata.updated_at\n\n​\n\nNumber\n\n​\n\n1761188383\n\n​\n\n插件最后更新时间，以 Unix 时间戳格式表示，单位为秒。\n\n​\n\n​\n\n​\n\nTools\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nname\n\n​\n\nString\n\n​\n\nasr_lite\n\n​\n\n插件工具的名称。\n\n​\n\ndescription\n\n​\n\nString\n\n​\n\n准确地将语音内容转写成文字。\n\n​\n\n插件工具的描述。\n\n​\n\ninputSchema\n\n​\n\nObject\n\n​\n\n{ \"required\": [ \"audio_url\" ], \"properties\": { \"audio_url\": { \"description\": \"音频文件地址，插件会尝试识别文件格式，对于无后缀的 URL 可能识别不到。文件类型支持 raw / wav / mp3 / ogg\", \"type\": \"string\" } }, \"type\": \"object\" }\n\n​\n\n由插件开发者定义的插件工具的输入参数的数据结构，包含参数名称、参数说明、必填项、格式约束等。\n\n​\n\noutputSchema\n\n​\n\nObject\n\n​\n\n{ \"properties\": { \"code\": { \"description\": \"运行状态。0 为成功，否则为报错码\", \"type\": \"number\" }, \"data\": { \"properties\": { \"text\": { \"description\": \"识别出的文本\", \"type\": \"string\" } }, \"type\": \"object\" }, \"log_id\": { \"type\": \"string\" }, \"msg\": { \"type\": \"string\" } }, \"type\": \"object\" }\n\n​\n\n由插件开发者定义的插件工具的输出参数的数据结构，用于描述当前插件工具调用成功后，返回数据的结构，如字段名称、类型、嵌套关系等。\n\n​\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request GET 'https\n\n:\n\n//api.coze.cn/v1/plugins/75458732632938906***' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_O******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"tools\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"description\"\n\n:\n\n\"准确地将语音内容转写成文字。适用于录音质检、会议总结、音频内容分析、课堂内容分析等场景。按照时长计费，对应计费项“录音文件识别（极速版）”。计费项&免费额度说明：https://docs.coze.cn/coze_pro/asr_tts_fee\"\n\n,\n\n​\n\n\"inputSchema\"\n\n:\n\n{\n\n​\n\n\"required\"\n\n:\n\n[\n\n​\n\n\"audio_url\"\n\n,\n\n​\n\n\"language\"\n\n​\n\n],\n\n​\n\n\"properties\"\n\n:\n\n{\n\n​\n\n\"audio_url\"\n\n:\n\n{\n\n​\n\n\"description\"\n\n:\n\n\"音频文件地址，插件会尝试识别文件格式，对于无后缀的 URL 可能识别不到。文件类型支持 raw / wav / mp3 / ogg \"\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"string\"\n\n​\n\n},\n\n​\n\n\"language\"\n\n:\n\n{\n\n​\n\n\"description\"\n\n:\n\n\"音频语言，当前支持：普通话，粤语，四川话，上海话，英文，日语，法语，韩语，西班牙语，葡萄牙语，印尼语\"\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"string\"\n\n​\n\n}\n\n​\n\n},\n\n​\n\n\"type\"\n\n:\n\n\"object\"\n\n​\n\n},\n\n​\n\n\"name\"\n\n:\n\n\"asr_lite\"\n\n,\n\n​\n\n\"outputSchema\"\n\n:\n\n{\n\n​\n\n\"properties\"\n\n:\n\n{\n\n​\n\n\"code\"\n\n:\n\n{\n\n​\n\n\"type\"\n\n:\n\n\"number\"\n\n​\n\n},\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"properties\"\n\n:\n\n{\n\n​\n\n\"text\"\n\n:\n\n{\n\n​\n\n\"description\"\n\n:\n\n\"识别出的文本\"\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"string\"\n\n​\n\n}\n\n​\n\n},\n\n​\n\n\"type\"\n\n:\n\n\"object\"\n\n​\n\n},\n\n​\n\n\"log_id\"\n\n:\n\n{\n\n​\n\n\"type\"\n\n:\n\n\"string\"\n\n​\n\n},\n\n​\n\n\"msg\"\n\n:\n\n{\n\n​\n\n\"type\"\n\n:\n\n\"string\"\n\n​\n\n}\n\n​\n\n},\n\n​\n\n\"type\"\n\n:\n\n\"object\"\n\n​\n\n},\n\n​\n\n\"tool_id\"\n\n:\n\n\"7506818401994***\"\n\n​\n\n}\n\n​\n\n],\n\n​\n\n\"mcp_json\"\n\n:\n\n\"{\\\"mcpServers\\\":{\\\"coze_plugin_yuyinshibie\\\":{\\\"url\\\":\\\"https://mcp.coze.cn/v1/plugins/7506818401994735616\\\",\\\"headers\\\":{\\\"Authorization\\\":\\\"Bearer ${COZE_API_TOKEN}\\\"}}}}\"\n\n,\n\n​\n\n\"plugin_id\"\n\n:\n\n\"7506818401994***\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"语音识别\"\n\n,\n\n​\n\n\"name_for_model\"\n\n:\n\n\"yuyinshibie\"\n\n,\n\n​\n\n\"description\"\n\n:\n\n\"准确地将语音内容转写成文字。适用于录音质检、会议总结、音频内容分析、课堂内容分析等场景。按照时长计费，对应计费项“录音文件识别（极速版）”。计费项&免费额度说明：https://docs.coze.cn/coze_pro/asr_tts_fee\"\n\n,\n\n​\n\n\"icon_url\"\n\n:\n\n\"https://example.com/ocean-cloud-tos/plugin_icon/example.jpeg?lk3s=cd508e2b&x-expires=1763792613&x-signature=Pn1***\"\n\n,\n\n​\n\n\"is_call_available\"\n\n:\n\ntrue\n\n,\n\n​\n\n\"created_at\"\n\n:\n\n1759045245\n\n,\n\n​\n\n\"updated_at\"\n\n:\n\n1761197207\n\n​\n\n},\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20251023142333EF26D5DA***\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n查询插件分类\n\n下一篇\n\n批量查询插件信息",
        "links": []
      },
      "markdown": "| 请求方式​ | GET​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/plugins/:plugin_id​​ |\n| 权限​ | Plugin.getPlugin​确保调用该接口使用的访问令牌开通了Plugin.getPlugin权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 查询插件详细信息。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| plugin_id​ | String​ | 必选​ | 75458732632938***​ | 待查询插件详情的插件 ID。支持查询官方插件、三方插件和资源库插件。​获取插件 ID 的方法如下：​调用查询插件列表API 获取对应的插件 ID，即entity_id的值。​资源库自定义插件：在插件编辑页面的 URL 中获取插件 ID。例如在 URLhttps://www.coze.cn/space/74982048832804***/plugin/75331489586134***中，plugin后面的数字即为插件 ID。​说明不支持通过插件商店 URL 中的插件商品 ID 查询插件详情。​​ |\n\n- 调用 查询插件列表 API 获取对应的插件 ID，即 entity_id 的值。 ​\n\n- 资源库自定义插件：在插件编辑页面的 URL 中获取插件 ID。例如在 URL https://www.coze.cn/space/74982048832804***/plugin/75331489586134*** 中， plugin 后面的数字即为插件 ID。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data.tools​ | Array ofTools​ | \\​ | 插件工具的详细信息，包括名称、描述、输入参数和返回参数。​ |\n| data.mcp_json​ | String​ | { \"mcpServers\": { \"coze_plugin_***\": { \"url\": \"https://mcp.coze.cn/v1/plugins/75458732632941***\", \"headers\": { \"Authorization\": \"Bearer ${COZE_API_TOKEN}\" } } } }​ | MCP Server 的配置信息，包含 MCP 服务器信息、插件 URL 和访问令牌。​说明Authorization中的访问令牌默认生成的是临时访问凭证，有效期为 1 天。​如需使用长期凭证，在 Trae 等支持 MCP Server 的平台配置 MCP 信息时，需要手动替换为你在扣子编程中生成的访问令牌。支持个人访问令牌（PAT）、服务访问令牌（SAT）和 OAuth 鉴权，具体参考获取访问令牌。​​ |\n| data.name_for_model​ | String​ | yuyinhecheng​ | 插件在模型内部使用的唯一标识符，用于AI模型在调用插件时快速识别和定位目标插件。​ |\n| data.icon_url​ | String​ | https://example.com/ocean-cloud-tos/plugin_icon/example.jpeg?lk3s=cd508e2b&x-expires=1763780763&x-signature=W0osLsZ***​ | 插件图标的 URL 链接。​ |\n| data.is_call_available​ | Boolean​ | true​ | 标识该插件当前是否可被调用。​true：插件可正常调用。​false：暂时无法调用，三方付费插件未签署协议。​ |\n| data.created_at​ | Number​ | 1759044695​ | 插件创建时间，以 Unix 时间戳格式表示，单位为秒。​ |\n| data.updated_at​ | Number​ | 1761188383​ | 插件最后更新时间，以 Unix 时间戳格式表示，单位为秒。​ |\n\n- true ：插件可正常调用。 ​\n\n- false ：暂时无法调用，三方付费插件未签署协议。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| name​ | String​ | asr_lite​ | 插件工具的名称。​ |\n| description​ | String​ | 准确地将语音内容转写成文字。​ | 插件工具的描述。​ |\n| inputSchema​ | Object​ | { \"required\": [ \"audio_url\" ], \"properties\": { \"audio_url\": { \"description\": \"音频文件地址，插件会尝试识别文件格式，对于无后缀的 URL 可能识别不到。文件类型支持 raw / wav / mp3 / ogg\", \"type\": \"string\" } }, \"type\": \"object\" }​ | 由插件开发者定义的插件工具的输入参数的数据结构，包含参数名称、参数说明、必填项、格式约束等。​ |\n| outputSchema​ | Object​ | { \"properties\": { \"code\": { \"description\": \"运行状态。0 为成功，否则为报错码\", \"type\": \"number\" }, \"data\": { \"properties\": { \"text\": { \"description\": \"识别出的文本\", \"type\": \"string\" } }, \"type\": \"object\" }, \"log_id\": { \"type\": \"string\" }, \"msg\": { \"type\": \"string\" } }, \"type\": \"object\" }​ | 由插件开发者定义的插件工具的输出参数的数据结构，用于描述当前插件工具调用成功后，返回数据的结构，如字段名称、类型、嵌套关系等。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/batch_get_plugins_info",
      "title": "批量查询插件信息",
      "content": {
        "sections": [],
        "full_text": "批量查询插件信息\n\n批量查询插件的详细信息。\n\n​\n\n接口描述\n\n​\n\n你可以调用本 API 批量查询插件的详细信息，支持查询官方插件、三方插件和资源库插件。返回信息包括插件工具列表（工具名称、描述、输入参数和返回参数），付费插件还支持返回 MCP Server 的配置信息，以便在 Trae 等外部平台配置 MCP 服务，并调用插件工具。\n\n​\n\n接口限制\n\n​\n\n单次请求最多支持查询 20 个插件。\n\n​\n\n不支持通过渠道 Token 调用该 API。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/plugins/mget\n\n​\n\n​\n\n权限\n\n​\n\nPlugin.getPlugin\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nPlugin.getPlugin\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n批量查询插件信息。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nids\n\n​\n\nArray of String\n\n​\n\n必选\n\n​\n\n7506817938062819***,742665585406735***\n\n​\n\n待查询插件详情的插件 ID 列表，多个 ID 需以英文逗号分隔。支持查询官方插件、三方插件和资源库插件。\n\n​\n\n获取插件 ID 的方法如下：\n\n​\n\n调用\n\n查询插件列表\n\nAPI 获取对应的插件 ID，即\n\nentity_id\n\n的值。\n\n​\n\n资源库自定义插件：在插件编辑页面的 URL 中获取插件 ID。例如在 URL\n\nhttps://www.coze.cn/space/74982048832804***/plugin/75331489586134***\n\n中，\n\nplugin\n\n后面的数字即为插件 ID。\n\n​\n\n说明\n\n单次请求最多支持输入 20 个插件ID。\n\n​\n\n不支持通过插件商店 URL 中的插件商品 ID 查询插件详情。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata.tools\n\n​\n\nArray of\n\nTools\n\n​\n\n\\\n\n​\n\n插件工具的详细信息，包括名称、描述、输入参数和返回参数。\n\n​\n\ndata.mcp_json\n\n​\n\nString\n\n​\n\n{ \"mcpServers\": { \"coze_plugin_***\": { \"url\": \"\n\nhttps://mcp.coze.cn/v1/plugins/75458732632941***\n\n\", \"headers\": { \"Authorization\": \"Bearer ${COZE_API_TOKEN}\" } } } }\n\n​\n\nMCP Server 的配置信息，包含 MCP 服务器信息、插件 URL 和访问令牌。\n\n​\n\n说明\n\nAuthorization\n\n中的访问令牌默认生成的是临时访问凭证，有效期为 1 天。\n\n​\n\n如需使用长期凭证，在 Trae 等支持 MCP Server 的平台配置 MCP 信息时，需要手动替换为你在扣子编程中生成的访问令牌。支持个人访问令牌（PAT）、服务访问令牌（SAT）和 OAuth 鉴权，具体参考\n\n获取访问令牌\n\n。\n\n​\n\n​\n\ndata.name_for_model\n\n​\n\nString\n\n​\n\nyuyinhecheng\n\n​\n\n插件在模型内部使用的唯一标识符，用于AI模型在调用插件时快速识别和定位目标插件。\n\n​\n\ndata.icon_url\n\n​\n\nString\n\n​\n\nhttps://example.com/ocean-cloud-tos/plugin_icon/example.jpeg?lk3s=cd508e2b&x-expires=1763780763&x-signature=W0osLsZ\n\n***\n\n​\n\n插件图标的 URL 链接。\n\n​\n\ndata.is_call_available\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n标识该插件当前是否可被调用。\n\n​\n\ntrue\n\n：插件可正常调用。\n\n​\n\nfalse\n\n：暂时无法调用，三方付费插件未签署协议。\n\n​\n\ndata.created_at\n\n​\n\nNumber\n\n​\n\n1759044695\n\n​\n\n插件创建时间，以 Unix 时间戳格式表示，单位为秒。\n\n​\n\ndata.updated_at\n\n​\n\nNumber\n\n​\n\n1761188383\n\n​\n\n插件最后更新时间，以 Unix 时间戳格式表示，单位为秒。\n\n​\n\n​\n\nTools\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nname\n\n​\n\nString\n\n​\n\nasr_lite\n\n​\n\n插件工具的名称。\n\n​\n\ndescription\n\n​\n\nString\n\n​\n\n准确地将语音内容转写成文字。\n\n​\n\n插件工具的描述。\n\n​\n\ninputSchema\n\n​\n\nObject\n\n​\n\n{ \"required\": [ \"audio_url\" ], \"properties\": { \"audio_url\": { \"description\": \"音频文件地址，插件会尝试识别文件格式，对于无后缀的 URL 可能识别不到。文件类型支持 raw / wav / mp3 / ogg\", \"type\": \"string\" } }, \"type\": \"object\" }\n\n​\n\n由插件开发者定义的插件工具的输入参数的数据结构，包含参数名称、参数说明、必填项、格式约束等。\n\n​\n\noutputSchema\n\n​\n\nObject\n\n​\n\n{ \"properties\": { \"code\": { \"description\": \"运行状态。0 为成功，否则为报错码\", \"type\": \"number\" }, \"data\": { \"properties\": { \"text\": { \"description\": \"识别出的文本\", \"type\": \"string\" } }, \"type\": \"object\" }, \"log_id\": { \"type\": \"string\" }, \"msg\": { \"type\": \"string\" } }, \"type\": \"object\" }\n\n​\n\n由插件开发者定义的插件工具的输出参数的数据结构，用于描述当前插件工具调用成功后，返回数据的结构，如字段名称、类型、嵌套关系等。\n\n​\n\n​\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request GET 'https\n\n:\n\n//api.coze.cn/v1/plugins/mget?ids=7506817938062819***,742665585406735***' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_O******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"items\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"tools\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"description\"\n\n:\n\n\"相比传统模型有更高的准确率；对多语种多方言/口音/噪声和背景人声更准确；能根据上下文、用户输入、背景信息输入有更多理解。按照时长计费，对应计费项“大模型录音文件识别时长”。计费项&免费额度说明：https://docs.coze.cn/coze_pro/asr_tts_fee\"\n\n,\n\n​\n\n\"inputSchema\"\n\n:\n\n{\n\n​\n\n\"required\"\n\n:\n\n[\n\n​\n\n\"audio_url\"\n\n​\n\n],\n\n​\n\n\"properties\"\n\n:\n\n{\n\n​\n\n\"audio_url\"\n\n:\n\n{\n\n​\n\n\"description\"\n\n:\n\n\"音频文件地址，插件会尝试识别文件格式，对于无后缀的 URL 可能识别不到。文件类型支持 raw / wav / mp3 / ogg\"\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"string\"\n\n​\n\n}\n\n​\n\n},\n\n​\n\n\"type\"\n\n:\n\n\"object\"\n\n​\n\n},\n\n​\n\n\"name\"\n\n:\n\n\"asr_llm\"\n\n,\n\n​\n\n\"outputSchema\"\n\n:\n\n{\n\n​\n\n\"properties\"\n\n:\n\n{\n\n​\n\n\"code\"\n\n:\n\n{\n\n​\n\n\"description\"\n\n:\n\n\"运行状态。0 为成功，否则为报错码\"\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"number\"\n\n​\n\n},\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"properties\"\n\n:\n\n{\n\n​\n\n\"text\"\n\n:\n\n{\n\n​\n\n\"description\"\n\n:\n\n\"识别出的文本\"\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"string\"\n\n​\n\n}\n\n​\n\n},\n\n​\n\n\"type\"\n\n:\n\n\"object\"\n\n​\n\n},\n\n​\n\n\"log_id\"\n\n:\n\n{\n\n​\n\n\"type\"\n\n:\n\n\"string\"\n\n​\n\n},\n\n​\n\n\"msg\"\n\n:\n\n{\n\n​\n\n\"type\"\n\n:\n\n\"string\"\n\n​\n\n}\n\n​\n\n},\n\n​\n\n\"type\"\n\n:\n\n\"object\"\n\n​\n\n},\n\n​\n\n\"tool_id\"\n\n:\n\n\"75068179380628***\"\n\n​\n\n}\n\n​\n\n],\n\n​\n\n\"mcp_json\"\n\n:\n\n\"{\\\"mcpServers\\\":{\\\"coze_plugin_damoxingyuyinshibie\\\":{\\\"url\\\":\\\"https://mcp.coze.cn/v1/plugins/7506817938062819355\\\",\\\"headers\\\":{\\\"Authorization\\\":\\\"Bearer ${COZE_API_TOKEN}\\\"}}}}\"\n\n,\n\n​\n\n\"plugin_id\"\n\n:\n\n\"75068179380628***\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"大模型语音识别\"\n\n,\n\n​\n\n\"name_for_model\"\n\n:\n\n\"damoxingyuyinshibie\"\n\n,\n\n​\n\n\"description\"\n\n:\n\n\"相比传统模型有更高的准确率；对多语种多方言/口音/噪声和背景人声更准确；能根据上下文、用户输入、背景信息输入有更多理解。按照时长计费，对应计费项“大模型录音文件识别时长”。计费项&免费额度说明：https://docs.coze.cn/coze_pro/asr_tts_fee\"\n\n,\n\n​\n\n\"icon_url\"\n\n:\n\n\"https://example.com/ocean-cloud-tos/plugin_icon/example.jpeg?lk3s=cd508e2b&x-expires=1763780763&x-signature=W0osLsZ***\"\n\n,\n\n​\n\n\"is_call_available\"\n\n:\n\ntrue\n\n,\n\n​\n\n\"created_at\"\n\n:\n\n1754644595\n\n,\n\n​\n\n\"updated_at\"\n\n:\n\n1761197219\n\n​\n\n},\n\n​\n\n{\n\n​\n\n\"tools\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"description\"\n\n:\n\n\"根据音色和文本合成音频。按照字符数计费，计费项&免费额度说明：https://docs.coze.cn/coze_pro/asr_tts_fee。使用资源库音色时，计费项为复刻音色文字转语音字数；使用预设音色时，模型为大模型对应系统音色文字转语音字数，小模型对应小模型合成次数 。\"\n\n,\n\n​\n\n\"inputSchema\"\n\n:\n\n{\n\n​\n\n\"required\"\n\n:\n\n[\n\n​\n\n\"text\"\n\n​\n\n],\n\n​\n\n\"properties\"\n\n:\n\n{\n\n​\n\n\"voice_id\"\n\n:\n\n{\n\n​\n\n\"description\"\n\n:\n\n\"扣子编程音色 ID，支持选择扣子编程系统预置的音色或资源库中复刻的音色。 可以在操作页面直接选择音色，或通过系统音色列表https://docs.coze.cn/dev_how_to_guides/sys_voice查看音色 ID。\"\n\n,\n\n​\n\n\"format\"\n\n:\n\n\"voice_id\"\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"string\"\n\n​\n\n},\n\n​\n\n\"emotion\"\n\n:\n\n{\n\n​\n\n\"description\"\n\n:\n\n\"语音情感\"\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"string\"\n\n​\n\n},\n\n​\n\n\"emotion_scale\"\n\n:\n\n{\n\n​\n\n\"description\"\n\n:\n\n\"调用emotion设置情感参数后可使用emotion_scale进一步设置情绪值，范围1~5，不设置时默认值为4。 注：理论上情绪值越大，情感越明显。但情绪值1~5实际为非线性增长，可能存在超过某个值后，情绪增加不明显，例如设置3和5时情绪值可能接近。\"\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"number\"\n\n​\n\n},\n\n​\n\n\"language\"\n\n:\n\n{\n\n​\n\n\"description\"\n\n:\n\n\"音色的语种，非必填，所有中文音色支持中英文混合场景。可参考系统音色列表https://docs.coze.cn/dev_how_to_guides/sys_voice查看各音色支持的语种。\"\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"string\"\n\n​\n\n},\n\n​\n\n\"speaker_id\"\n\n:\n\n{\n\n​\n\n\"description\"\n\n:\n\n\"音色ID，默认为爽快思思/Skye。详细音色列表参考 https://docs.coze.cn/guides/text_to_speech_plugin, default value is 爽快思思/Skye\"\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"string\"\n\n​\n\n},\n\n​\n\n\"speed_ratio\"\n\n:\n\n{\n\n​\n\n\"description\"\n\n:\n\n\"语速，范围是[0.2,3]，默认为1，通常保留一位小数即可, default value is 1\"\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"number\"\n\n​\n\n},\n\n​\n\n\"text\"\n\n:\n\n{\n\n​\n\n\"description\"\n\n:\n\n\"要合成音频的文本内容\"\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"string\"\n\n​\n\n}\n\n​\n\n},\n\n​\n\n\"type\"\n\n:\n\n\"object\"\n\n​\n\n},\n\n​\n\n\"name\"\n\n:\n\n\"speech_synthesis\"\n\n,\n\n​\n\n\"outputSchema\"\n\n:\n\n{\n\n​\n\n\"properties\"\n\n:\n\n{\n\n​\n\n\"msg\"\n\n:\n\n{\n\n​\n\n\"type\"\n\n:\n\n\"string\"\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n{\n\n​\n\n\"type\"\n\n:\n\n\"number\"\n\n​\n\n},\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"properties\"\n\n:\n\n{\n\n​\n\n\"duration\"\n\n:\n\n{\n\n​\n\n\"description\"\n\n:\n\n\"音频时长，单位是s\"\n\n,\n\n​\n\n\"type\"\n\n:\n\n\"number\"\n\n​\n\n},\n\n​\n\n\"link\"\n\n:\n\n{\n\n​\n\n\"type\"\n\n:\n\n\"string\"\n\n​\n\n}\n\n​\n\n},\n\n​\n\n\"type\"\n\n:\n\n\"object\"\n\n​\n\n},\n\n​\n\n\"log_id\"\n\n:\n\n{\n\n​\n\n\"type\"\n\n:\n\n\"string\"\n\n​\n\n}\n\n​\n\n},\n\n​\n\n\"type\"\n\n:\n\n\"object\"\n\n​\n\n},\n\n​\n\n\"tool_id\"\n\n:\n\n\"7426655854067***\"\n\n​\n\n}\n\n​\n\n],\n\n​\n\n\"mcp_json\"\n\n:\n\n\"{\\\"mcpServers\\\":{\\\"coze_plugin_yuyinhecheng\\\":{\\\"url\\\":\\\"https://mcp.coze.cn/v1/plugins/7426655854067351562\\\",\\\"headers\\\":{\\\"Authorization\\\":\\\"Bearer ${COZE_API_TOKEN}\\\"}}}}\"\n\n,\n\n​\n\n\"plugin_id\"\n\n:\n\n\"742665585406***\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"语音合成\"\n\n,\n\n​\n\n\"name_for_model\"\n\n:\n\n\"yuyinhecheng\"\n\n,\n\n​\n\n\"description\"\n\n:\n\n\"根据音色和文本合成音频。按照字符数计费，计费项&免费额度说明：https://docs.coze.cn/coze_pro/asr_tts_fee。使用资源库音色时，计费项为复刻音色文字转语音字数；使用预设音色时，模型为大模型对应系统音色文字转语音字数，小模型对应小模型合成次数 。\"\n\n,\n\n​\n\n\"icon_url\"\n\n:\n\n\"https://example.com/ocean-cloud-tos/plugin_icon/example.jpeg?lk3s=cd508e2b&x-expires=1763780763&x-signature=W0osLsZ***\"\n\n,\n\n​\n\n\"is_call_available\"\n\n:\n\ntrue\n\n,\n\n​\n\n\"created_at\"\n\n:\n\n1759044695\n\n,\n\n​\n\n\"updated_at\"\n\n:\n\n1761199709\n\n​\n\n}\n\n​\n\n]\n\n​\n\n},\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"202510231410590AC026226***\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n查询插件详情\n\n下一篇\n\n调用插件工具",
        "links": []
      },
      "markdown": "- 单次请求最多支持查询 20 个插件。 ​\n\n- 不支持通过渠道 Token 调用该 API。 ​\n\n| 请求方式​ | GET​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/plugins/mget​​ |\n| 权限​ | Plugin.getPlugin​确保调用该接口使用的访问令牌开通了Plugin.getPlugin权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 批量查询插件信息。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| ids​ | Array of String​ | 必选​ | 7506817938062819***,742665585406735***​ | 待查询插件详情的插件 ID 列表，多个 ID 需以英文逗号分隔。支持查询官方插件、三方插件和资源库插件。​获取插件 ID 的方法如下：​调用查询插件列表API 获取对应的插件 ID，即entity_id的值。​资源库自定义插件：在插件编辑页面的 URL 中获取插件 ID。例如在 URLhttps://www.coze.cn/space/74982048832804***/plugin/75331489586134***中，plugin后面的数字即为插件 ID。​说明单次请求最多支持输入 20 个插件ID。​不支持通过插件商店 URL 中的插件商品 ID 查询插件详情。​​ |\n\n- 调用 查询插件列表 API 获取对应的插件 ID，即 entity_id 的值。 ​\n\n- 资源库自定义插件：在插件编辑页面的 URL 中获取插件 ID。例如在 URL https://www.coze.cn/space/74982048832804***/plugin/75331489586134*** 中， plugin 后面的数字即为插件 ID。 ​\n\n- 单次请求最多支持输入 20 个插件ID。 ​\n\n- 不支持通过插件商店 URL 中的插件商品 ID 查询插件详情。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data.tools​ | Array ofTools​ | \\​ | 插件工具的详细信息，包括名称、描述、输入参数和返回参数。​ |\n| data.mcp_json​ | String​ | { \"mcpServers\": { \"coze_plugin_***\": { \"url\": \"https://mcp.coze.cn/v1/plugins/75458732632941***\", \"headers\": { \"Authorization\": \"Bearer ${COZE_API_TOKEN}\" } } } }​ | MCP Server 的配置信息，包含 MCP 服务器信息、插件 URL 和访问令牌。​说明Authorization中的访问令牌默认生成的是临时访问凭证，有效期为 1 天。​如需使用长期凭证，在 Trae 等支持 MCP Server 的平台配置 MCP 信息时，需要手动替换为你在扣子编程中生成的访问令牌。支持个人访问令牌（PAT）、服务访问令牌（SAT）和 OAuth 鉴权，具体参考获取访问令牌。​​ |\n| data.name_for_model​ | String​ | yuyinhecheng​ | 插件在模型内部使用的唯一标识符，用于AI模型在调用插件时快速识别和定位目标插件。​ |\n| data.icon_url​ | String​ | https://example.com/ocean-cloud-tos/plugin_icon/example.jpeg?lk3s=cd508e2b&x-expires=1763780763&x-signature=W0osLsZ***​ | 插件图标的 URL 链接。​ |\n| data.is_call_available​ | Boolean​ | true​ | 标识该插件当前是否可被调用。​true：插件可正常调用。​false：暂时无法调用，三方付费插件未签署协议。​ |\n| data.created_at​ | Number​ | 1759044695​ | 插件创建时间，以 Unix 时间戳格式表示，单位为秒。​ |\n| data.updated_at​ | Number​ | 1761188383​ | 插件最后更新时间，以 Unix 时间戳格式表示，单位为秒。​ |\n\n- true ：插件可正常调用。 ​\n\n- false ：暂时无法调用，三方付费插件未签署协议。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| name​ | String​ | asr_lite​ | 插件工具的名称。​ |\n| description​ | String​ | 准确地将语音内容转写成文字。​ | 插件工具的描述。​ |\n| inputSchema​ | Object​ | { \"required\": [ \"audio_url\" ], \"properties\": { \"audio_url\": { \"description\": \"音频文件地址，插件会尝试识别文件格式，对于无后缀的 URL 可能识别不到。文件类型支持 raw / wav / mp3 / ogg\", \"type\": \"string\" } }, \"type\": \"object\" }​ | 由插件开发者定义的插件工具的输入参数的数据结构，包含参数名称、参数说明、必填项、格式约束等。​ |\n| outputSchema​ | Object​ | { \"properties\": { \"code\": { \"description\": \"运行状态。0 为成功，否则为报错码\", \"type\": \"number\" }, \"data\": { \"properties\": { \"text\": { \"description\": \"识别出的文本\", \"type\": \"string\" } }, \"type\": \"object\" }, \"log_id\": { \"type\": \"string\" }, \"msg\": { \"type\": \"string\" } }, \"type\": \"object\" }​ | 由插件开发者定义的插件工具的输出参数的数据结构，用于描述当前插件工具调用成功后，返回数据的结构，如字段名称、类型、嵌套关系等。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/call_plugin_tool",
      "title": "调用插件工具",
      "content": {
        "sections": [],
        "full_text": "调用插件工具\n\n调用指定付费插件中的工具。\n\n​\n\n插件限制\n\n​\n\n套餐限制：仅付费版本支持此能力。\n\n​\n\n调用额度与 QPS 限制：请参见\n\n通过 MCP 方式调用付费插件\n\n。\n\n​\n\n插件类型：仅支持调用付费插件，包括扣子编程官方插件和三方插件。\n\n​\n\nToken 限制：不支持渠道 Token 调用该 API。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/plugins/:plugin_id/tools/call\n\n​\n\n​\n\n权限\n\n​\n\nPlugin.callTool\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nPlugin.callTool\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n调用付费插件工具。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nplugin_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n75458732632938***\n\n​\n\n待执行的插件 ID。你可以调用\n\n查询插件列表\n\nAPI 获取对应的插件 ID，即\n\nentity_id\n\n的值。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ntool_name\n\n​\n\nString\n\n​\n\n必选\n\n​\n\ngetToutiaoNews\n\n​\n\n插件工具的名称。你可以通过\n\n查询插件详情\n\nAPI 获取。\n\n​\n\narguments\n\n​\n\nMap[String, Any]\n\n​\n\n必选\n\n​\n\n{ \"q\": \"杭州秋假\" }\n\n​\n\n请根据对应插件工具的输入参数结构，输入相应参数的键值对。\n\n​\n\n你可以通过\n\n查询插件详情\n\nAPI 获取插件工具的输入参数结构体（\n\ninputSchema\n\n）。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndata.result\n\n​\n\nmap\n\n​\n\n\\\n\n​\n\n插件工具的返回结果，具体由插件的返回结构体定义。\n\n​\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/plugins/7545873263293***/tools/call' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_3UXDHN82MgQANqK****' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"tool_name\"\n\n:\n\n\"getToutiaoNews\"\n\n,\n\n​\n\n\"arguments\"\n\n:\n\n{\n\n​\n\n\"q\"\n\n:\n\n\"杭州秋假\"\n\n​\n\n}\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"result\"\n\n:\n\n{\n\n​\n\n\"news\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"time\"\n\n:\n\n\"2025-09-19 15:02\"\n\n,\n\n​\n\n\"url\"\n\n:\n\n\"https://toutiao.com/group/75516909358***/\"\n\n,\n\n​\n\n\"summary\"\n\n:\n\n\"2025 年秋假安排：杭州市多城区 2025 年中小学秋假时间定为 9 月 28 日 - 30 日共 3 天，9 月 27 日上课。加上国庆、中秋假期，最长可连休 11 天\"\n\n,\n\n​\n\n\"media_name\"\n\n:\n\n\"长江日报\"\n\n,\n\n​\n\n\"categories\"\n\n:\n\n[\n\n​\n\n\"news_society/news_law/statute\"\n\n,\n\n​\n\n\"news_society/negative_energy_society\"\n\n,\n\n​\n\n\"news_society/news_law\"\n\n,\n\n​\n\n\"legal\"\n\n,\n\n​\n\n\"news_society\"\n\n​\n\n],\n\n​\n\n\"title\"\n\n:\n\n\"杭州中小学秋假相关信息\"\n\n,\n\n​\n\n\"cover\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n]\n\n​\n\n}\n\n​\n\n},\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20250926192926C176DEC5A***\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n批量查询插件信息\n\n下一篇\n\n申请插件扩容回调事件",
        "links": []
      },
      "markdown": "- 套餐限制：仅付费版本支持此能力。 ​\n\n- 调用额度与 QPS 限制：请参见 通过 MCP 方式调用付费插件 。 ​\n\n- 插件类型：仅支持调用付费插件，包括扣子编程官方插件和三方插件。 ​\n\n- Token 限制：不支持渠道 Token 调用该 API。 ​\n\n| 请求方式​ | POST​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/plugins/:plugin_id/tools/call​​ |\n| 权限​ | Plugin.callTool​确保调用该接口使用的访问令牌开通了Plugin.callTool权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 调用付费插件工具。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| plugin_id​ | String​ | 必选​ | 75458732632938***​ | 待执行的插件 ID。你可以调用查询插件列表API 获取对应的插件 ID，即entity_id的值。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| tool_name​ | String​ | 必选​ | getToutiaoNews​ | 插件工具的名称。你可以通过查询插件详情API 获取。​ |\n| arguments​ | Map[String, Any]​ | 必选​ | { \"q\": \"杭州秋假\" }​ | 请根据对应插件工具的输入参数结构，输入相应参数的键值对。​你可以通过查询插件详情API 获取插件工具的输入参数结构体（inputSchema）。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| data.result​ | map​ | \\​ | 插件工具的返回结果，具体由插件的返回结构体定义。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/benefit_plugin_scale_requested",
      "title": "申请插件扩容回调事件",
      "content": {
        "sections": [],
        "full_text": "申请插件扩容回调事件\n\n如果三方付费插件支持扩容，插件开发者可以订阅\n\n申请插件扩容回调事件\n\n。当用户申请插件扩容时，扣子编程会向指定的回调地址推送回调消息，消息中包含插件扩容的详细信息。订阅回调的具体操作请参见\n\n​\n\n订阅回调\n\n。\n\n​\n\n说明\n\n申请插件扩容回调仅支持普通回调，不支持渠道回调。\n\n​\n\n​\n\n触发条件\n\n​\n\n仅\n\n插件开发者\n\n可订阅，当用户申请插件扩容时，对应的回调地址会收到申请插件扩容回调事件。\n\n​\n\n回调结构体\n\n​\n\n回调消息的结构体 Body 中包含两个主要字段：\n\nheader\n\n和\n\nevent\n\n。\n\n​\n\nheader\n\n参数的参数说明请参见\n\n​\n\n回调事件\n\n。\n\n​\n\nevent\n\n参数中包括以下参数：\n\n​\n\n​\n\n字段\n\n​\n\n类型\n\n​\n\n说明\n\n​\n\napply_id\n\n​\n\nString\n\n​\n\n扩容申请的 ID。\n\n​\n\nbegin_at\n\n​\n\nInteger\n\n​\n\n扩容生效开始时间，采用 Unix 时间戳格式，单位：秒。\n\n​\n\nend_at\n\n​\n\nInteger\n\n​\n\n扩容过期时间，采用 Unix 时间戳格式，单位：秒。\n\n​\n\nresource_id\n\n​\n\nString\n\n​\n\n扩容插件的 ID。\n\n​\n\nusage_in_30d\n\n​\n\nNumber\n\n​\n\n该用户在最近 30 天内调用该插件的次数。\n\n​\n\napplicant_info.user_id\n\n​\n\nInteger\n\n​\n\n发起扩容申请的扣子用户 ID。\n\n​\n\napplicant_info.user_name\n\n​\n\nString\n\n​\n\n发起扩容申请的扣子用户名称。\n\n​\n\nextension_type\n\n​\n\nString\n\n​\n\n扩容类型， 当前仅支持 QPS（Queries Per Second），即每秒最大请求数。\n\n​\n\norigin_capacity\n\n​\n\nNumber\n\n​\n\n扩容前的原始 QPS。\n\n​\n\ntarget_capacity\n\n​\n\nNumber\n\n​\n\n扩容后期望达到的目标 QPS。\n\n​\n\n​\n\n回调结构体示例：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"header\"\n\n:\n\n{\n\n​\n\n\"event_type\"\n\n:\n\n\"benefit.plugin.scale.requested\"\n\n,\n\n//申请插件扩容回调事件\n\n​\n\n\"event_id\"\n\n:\n\n\"83453324-0863-4abc-bcdf-80818705f29e-7545743825545740332\"\n\n,\n\n// 此次触发的事件唯一ID，用户应该用这个ID做去重\n\n​\n\n\"api_app_id\"\n\n:\n\n\"75457438255457***\"\n\n,\n\n​\n\n\"created_at\"\n\n:\n\n1757318670060\n\n,\n\n​\n\n\"coze_account_id\"\n\n:\n\n\"\"\n\n​\n\n},\n\n​\n\n\"event\"\n\n:\n\n{\n\n​\n\n\"apply_id\"\n\n:\n\n\"754761756009177***\"\n\n,\n\n// 申请单号\n\n​\n\n\"begin_at\"\n\n:\n\n1757318663\n\n,\n\n// 扩容生效时间，时间戳（秒）\n\n​\n\n\"end_at\"\n\n:\n\n1757664263\n\n,\n\n// 扩容过期时间，时间戳（秒）\n\n​\n\n\"resource_id\"\n\n:\n\n\"75454180821776***\"\n\n,\n\n// 扩容插件的 ID\n\n​\n\n\"usage_in_30d\"\n\n:\n\n0\n\n,\n\n// 该用户在最近 30 天内该插件的调用量\n\n​\n\n\"applicant_info\"\n\n:\n\n{\n\n// 申请人信息\n\n​\n\n\"user_id\"\n\n:\n\n2100288\n\n***\n\n,\n\n// 申请人的扣子用户ID\n\n​\n\n\"user_name\"\n\n:\n\n\"\"\n\n// 申请人的扣子用户名\n\n​\n\n},\n\n​\n\n\"extension_type\"\n\n:\n\n\"QPS\"\n\n,\n\n// 扩容类型：QPS（每秒最大请求数）\n\n​\n\n\"origin_capacity\"\n\n:\n\n20\n\n,\n\n// 扩容前的原始 QPS\n\n​\n\n\"target_capacity\"\n\n:\n\n30\n\n// 扩容后期望达到的目标 QPS\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n响应回调\n\n​\n\n开发者服务器收到申请插件扩容回调后，应在 3 秒内响应，并返回 HTTP 状态码 200。\n\n​\n\n相关文档\n\n​\n\n​\n\n订阅回调\n\n​\n\n​\n\n接收并处理回调\n\n​\n\n上一篇\n\n调用插件工具\n\n下一篇\n\n插件扩容到期回调事件",
        "links": []
      },
      "markdown": "- header 参数的参数说明请参见 ​ 回调事件 。 ​\n\n- event 参数中包括以下参数： ​\n\n- ​ 字段 ​ 类型 ​ 说明 ​ apply_id ​ String ​ 扩容申请的 ID。 ​ begin_at ​ Integer ​ 扩容生效开始时间，采用 Unix 时间戳格式，单位：秒。 ​ end_at ​ Integer ​ 扩容过期时间，采用 Unix 时间戳格式，单位：秒。 ​ resource_id ​ String ​ 扩容插件的 ID。 ​ usage_in_30d ​ Number ​ 该用户在最近 30 天内调用该插件的次数。 ​ applicant_info.user_id ​ Integer ​ 发起扩容申请的扣子用户 ID。 ​ applicant_info.user_name ​ String ​ 发起扩容申请的扣子用户名称。 ​ extension_type ​ String ​ 扩容类型， 当前仅支持 QPS（Queries Per Second），即每秒最大请求数。 ​ origin_capacity ​ Number ​ 扩容前的原始 QPS。 ​ target_capacity ​ Number ​ 扩容后期望达到的目标 QPS。 ​ ​\n\n| 字段​ | 类型​ | 说明​ |\n| apply_id​ | String​ | 扩容申请的 ID。​ |\n| begin_at​ | Integer​ | 扩容生效开始时间，采用 Unix 时间戳格式，单位：秒。​ |\n| end_at​ | Integer​ | 扩容过期时间，采用 Unix 时间戳格式，单位：秒。​ |\n| resource_id​ | String​ | 扩容插件的 ID。​ |\n| usage_in_30d​ | Number​ | 该用户在最近 30 天内调用该插件的次数。​ |\n| applicant_info.user_id​ | Integer​ | 发起扩容申请的扣子用户 ID。​ |\n| applicant_info.user_name​ | String​ | 发起扩容申请的扣子用户名称。​ |\n| extension_type​ | String​ | 扩容类型， 当前仅支持 QPS（Queries Per Second），即每秒最大请求数。​ |\n| origin_capacity​ | Number​ | 扩容前的原始 QPS。​ |\n| target_capacity​ | Number​ | 扩容后期望达到的目标 QPS。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/benefit_plugin_scale_expired",
      "title": "插件扩容到期回调事件",
      "content": {
        "sections": [],
        "full_text": "插件扩容到期回调事件\n\n如果三方付费插件支持扩容，插件开发者可以订阅插件扩容到期回调事件，当扩容申请到期或用户主动取消扩容时，扣子编程会向指定的回调地址推送回调消息，消息中包含插件扩容的基本信息。订阅回调的具体操作请参见\n\n​\n\n订阅回调\n\n。\n\n​\n\n说明\n\n插件扩容到期回调仅支持普通回调，不支持渠道回调。\n\n​\n\n​\n\n触发条件\n\n​\n\n仅\n\n插件开发者\n\n可订阅，当扩容申请到期或用户主动取消扩容时，对应的回调地址会收到插件扩容到期回调事件。\n\n​\n\n回调结构体\n\n​\n\n回调消息的结构体 Body 中包含两个主要字段：\n\nheader\n\n和\n\nevent\n\n。\n\n​\n\nheader\n\n参数的参数说明请参见\n\n​\n\n回调事件\n\n。\n\n​\n\nevent\n\n参数中包括以下参数：\n\n​\n\n​\n\n字段\n\n​\n\n类型\n\n​\n\n说明\n\n​\n\napply_id\n\n​\n\nString\n\n​\n\n本次扩容到期申请的 ID。\n\n​\n\nresource_id\n\n​\n\nString\n\n​\n\n对应插件的 ID。\n\n​\n\napplicant_info.user_id\n\n​\n\nInteger\n\n​\n\n申请插件扩容的扣子用户 ID。\n\n​\n\napplicant_info.user_name\n\n​\n\nString\n\n​\n\n申请插件扩容的扣子用户名称。\n\n​\n\nextension_type\n\n​\n\nString\n\n​\n\n扩容类型， 当前仅支持 QPS（Queries Per Second），即每秒最大请求数。\n\n​\n\nexpired_capacity\n\n​\n\nNumber\n\n​\n\n本次到期所扣除的 QPS\n\n容量\n\n。\n\n​\n\ncurrent_capacity\n\n​\n\nNumber\n\n​\n\n释放后，插件当前可用的 QPS 限额。\n\n​\n\n​\n\n回调结构体示例：\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"header\"\n\n:\n\n{\n\n​\n\n\"event_type\"\n\n:\n\n\"benefit.plugin.scale.expired\"\n\n,\n\n// 事件类型：插件扩容到期事件\n\n​\n\n\"event_id\"\n\n:\n\n\"6c2c25d4-e5c1-4bb4-9757-923ce88ddd12-7546444412004335643\"\n\n,\n\n// 此次触发的事件唯一ID，用户应该用这个ID做去重\n\n​\n\n\"created_at\"\n\n:\n\n1757412006297\n\n,\n\n​\n\n\"coze_account_id\"\n\n:\n\n\"\"\n\n,\n\n// Coze账号ID\n\n​\n\n\"api_app_id\"\n\n:\n\n\"754644441200***\"\n\n// 回调应用的 ID\n\n​\n\n},\n\n​\n\n\"event\"\n\n:\n\n{\n\n​\n\n\"applicant_info\"\n\n:\n\n{\n\n// 扩容申请人信息\n\n​\n\n\"user_id\"\n\n:\n\n2102717852\n\n,\n\n// 申请人的扣子用户ID\n\n​\n\n\"user_name\"\n\n:\n\n\"\"\n\n// 申请人的扣子用户名\n\n​\n\n},\n\n​\n\n\"apply_id\"\n\n:\n\n\"75476401436293**\"\n\n,\n\n// 扩容申请单号\n\n​\n\n\"resource_id\"\n\n:\n\n\"75460679235388**\"\n\n,\n\n// 对应插件的 ID。\n\n​\n\n\"extension_type\"\n\n:\n\n\"QPS\"\n\n,\n\n// 扩容类型\n\n​\n\n\"expired_capacity\"\n\n:\n\n5\n\n,\n\n// 本次到期所扣除的 QPS 容量\n\n​\n\n\"current_capacity\"\n\n:\n\n21\n\n// 释放后，插件当前可用的 QPS 限额\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n响应回调\n\n​\n\n开发者服务器收到插件扩容到期回调事件后，应在 3 秒内响应，并返回 HTTP 状态码 200。\n\n​\n\n相关文档\n\n​\n\n​\n\n订阅回调\n\n​\n\n​\n\n接收并处理回调\n\n​\n\n上一篇\n\n申请插件扩容回调事件\n\n下一篇\n\n设置用户变量的值",
        "links": []
      },
      "markdown": "- header 参数的参数说明请参见 ​ 回调事件 。 ​\n\n- event 参数中包括以下参数： ​\n\n- ​ 字段 ​ 类型 ​ 说明 ​ apply_id ​ String ​ 本次扩容到期申请的 ID。 ​ resource_id ​ String ​ 对应插件的 ID。 ​ applicant_info.user_id ​ Integer ​ 申请插件扩容的扣子用户 ID。 ​ applicant_info.user_name ​ String ​ 申请插件扩容的扣子用户名称。 ​ extension_type ​ String ​ 扩容类型， 当前仅支持 QPS（Queries Per Second），即每秒最大请求数。 ​ expired_capacity ​ Number ​ 本次到期所扣除的 QPS 容量 。 ​ current_capacity ​ Number ​ 释放后，插件当前可用的 QPS 限额。 ​ ​\n\n| 字段​ | 类型​ | 说明​ |\n| apply_id​ | String​ | 本次扩容到期申请的 ID。​ |\n| resource_id​ | String​ | 对应插件的 ID。​ |\n| applicant_info.user_id​ | Integer​ | 申请插件扩容的扣子用户 ID。​ |\n| applicant_info.user_name​ | String​ | 申请插件扩容的扣子用户名称。​ |\n| extension_type​ | String​ | 扩容类型， 当前仅支持 QPS（Queries Per Second），即每秒最大请求数。​ |\n| expired_capacity​ | Number​ | 本次到期所扣除的 QPS容量。​ |\n| current_capacity​ | Number​ | 释放后，插件当前可用的 QPS 限额。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/update_variable",
      "title": "设置用户变量的值",
      "content": {
        "sections": [],
        "full_text": "设置用户变量的值\n\n为智能体或应用中的用户变量设置变量值。\n\n​\n\n接口说明\n\n​\n\n当智能体或应用中已创建并开启用户变量时，你可以通过该 API 设置变量值，未开启的用户变量无法设置变量值。\n\n​\n\n设置用户变量值后，你可以调用\n\n获取用户变量值\n\nAPI 查询是否设置成功。\n\n​\n\n限制说明\n\n​\n\n仅支持为已发布 API、ChatSDK 的智能体或应用设置用户变量的值。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPUT\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/variables\n\n​\n\n权限\n\n​\n\nupdateVariable\n\n​\n\n确保调用该 API 使用的访问令牌开通了\n\nupdateVariable\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n为智能体或应用中的用户变量设置变量值。\n\n​\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\napp_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n7448857477636685850\n\n​\n\n如果需要为应用设置用户变量的值时，填入对应的应用ID。\n\n​\n\n你可以通过应用的业务编排页面 URL 中获取应用 ID，也就是 URL 中 project-ide 参数后的一串字符，例如\n\nhttps://www.coze.\n\ncn\n\n/space/739174157340921****/\n\nproject\n\n-ide/743996105122521****/workflow/744102227704147****\n\n中，应用的 ID 为\n\n743996105122521****\n\n。\n\n​\n\n说明\n\napp_id\n\n和\n\nbot_id\n\n应至少填写一个，否则会报错。\n\n​\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n7493151027400097829\n\n​\n\n需要为智能体设置用户设置变量的值时，填入对应的智能体 ID。\n\n​\n\n你可以通过智能体的编排页面获取智能体 ID，开发页面 URL 中 bot 参数后的数字就是智能体 ID。例如\n\nhttps://www.coze.com/space/341****/bot/73428668*****\n\n，bot ID 为\n\n73428668*****\n\n。\n\n​\n\nconnector_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n1024\n\n​\n\n智能体或应用的发布渠道 ID 列表。目前支持如下渠道：\n\n​\n\nAPI：（默认）1024\n\n​\n\nChatSDK：999\n\n​\n\nconnector_uid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n7432567\n\n​\n\n用户 ID，用于为指定的用户设置变量的值。用户 ID 对应\n\n执行工作流\n\nAPI 中\n\next\n\n字段指定的 user_id 或发起对话 API 中的 user_id。\n\n​\n\ndata\n\n​\n\nArray of\n\nKVItem\n\n​\n\n必选\n\n​\n\n[{\"keyword\":\"name\",\"value\":\"\"},{\"keyword\":\"age\",\"value\":\"\"}]\n\n​\n\n用户变量的数组，不能为空。\n\n​\n\n​\n\nKVItem\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nvalue\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n18\n\n​\n\n用户变量的值。\n\n​\n\nkeyword\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nage\n\n​\n\n用户变量的名称。\n\n​\n\n说明\n\nkeyword 必须为智能体或应用中已创建并开启的用户变量，不能设置为系统变量。\n\n​\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{ \"logid\": \"20250416125552EE59A23A87A***\" }\n\n​\n\n返回详情。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request PUT 'https\n\n:\n\n//api.coze.cn/v1/variables' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_Q8LmOJU9mRCUzNCdnq6DMakFsmr***' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data '\n\n{\n\n​\n\n\"bot_id\"\n\n:\n\n\"749315102740009***\"\n\n,\n\n​\n\n\"connector_id\"\n\n:\n\n\"1024\"\n\n,\n\n​\n\n\"connector_uid\"\n\n:\n\n\"7432567\"\n\n,\n\n​\n\n\"data\"\n\n:[\n\n​\n\n{\n\n​\n\n\"keyword\"\n\n:\n\n\"name\"\n\n,\n\n​\n\n\"value\"\n\n:\n\n\"小王\"\n\n​\n\n},\n\n​\n\n{\n\n​\n\n\"keyword\"\n\n:\n\n\"age\"\n\n,\n\n​\n\n\"value\"\n\n:\n\n\"18\"\n\n​\n\n}\n\n​\n\n]\n\n​\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20250416125552EE59A23***\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示 API 调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n插件扩容到期回调事件\n\n下一篇\n\n获取用户变量的值",
        "links": []
      },
      "markdown": "| 请求方式​ | PUT |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/variables​ |\n| 权限​ | updateVariable​确保调用该 API 使用的访问令牌开通了updateVariable权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 为智能体或应用中的用户变量设置变量值。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| app_id​ | String​ | 可选​ | 7448857477636685850​ | 如果需要为应用设置用户变量的值时，填入对应的应用ID。​你可以通过应用的业务编排页面 URL 中获取应用 ID，也就是 URL 中 project-ide 参数后的一串字符，例如https://www.coze.cn/space/739174157340921****/project-ide/743996105122521****/workflow/744102227704147****中，应用的 ID 为743996105122521****。​说明app_id和bot_id应至少填写一个，否则会报错。​​ |\n| bot_id​ | String​ | 可选​ | 7493151027400097829​ | 需要为智能体设置用户设置变量的值时，填入对应的智能体 ID。​你可以通过智能体的编排页面获取智能体 ID，开发页面 URL 中 bot 参数后的数字就是智能体 ID。例如https://www.coze.com/space/341****/bot/73428668*****，bot ID 为73428668*****。​ |\n| connector_id​ | String​ | 可选​ | 1024​ | 智能体或应用的发布渠道 ID 列表。目前支持如下渠道：​API：（默认）1024​ChatSDK：999​ |\n| connector_uid​ | String​ | 必选​ | 7432567​ | 用户 ID，用于为指定的用户设置变量的值。用户 ID 对应执行工作流API 中ext字段指定的 user_id 或发起对话 API 中的 user_id。​ |\n| data​ | Array ofKVItem​ | 必选​ | [{\"keyword\":\"name\",\"value\":\"\"},{\"keyword\":\"age\",\"value\":\"\"}]​ | 用户变量的数组，不能为空。​ |\n\n- API：（默认）1024 ​\n\n- ChatSDK：999 ​\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| value​ | String​ | 必选​ | 18​ | 用户变量的值。​ |\n| keyword​ | String​ | 必选​ | age​ | 用户变量的名称。​说明keyword 必须为智能体或应用中已创建并开启的用户变量，不能设置为系统变量。​​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | { \"logid\": \"20250416125552EE59A23A87A***\" }​ | 返回详情。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/read_variable",
      "title": "获取用户变量的值",
      "content": {
        "sections": [],
        "full_text": "获取用户变量的值\n\n获取智能体或应用中设置的用户变量的值。\n\n​\n\n接口说明\n\n​\n\n通过\n\n设置用户变量的值\n\nAPI 设置变量值之后，可以通过本 API 查看智能体或应用中设置的用户变量的值。调用此 API 时可以查看指定变量的值，也可以将\n\nkeywords\n\n指定为空，查看智能体或应用下的所有用户变量的值。如果输入的\n\nkeywords\n\n在智能体或应用中不存在，扣子编程不会报错，但返回结果中不会包含相应的用户变量。\n\n​\n\n限制说明\n\n​\n\n仅支持获取已发布 API、ChatSDK 的智能体或应用中的用户变量的值。\n\n​\n\n用户变量按照\n\nuser_id\n\n+\n\nconnector_uid\n\n+\n\nconnector_id\n\n+\n\nbot_id\n\n的组合进行隔离，因此在扣子编程站内设置的用户变量，在 API 渠道可能无法获取对应的值。不同渠道用户标识的规则存在差异，具体如下表所示。\n\n​\n\n​\n\n参数\n\n​\n\n扣子编程站内\n\n​\n\nAPI 渠道\n\n​\n\nuser_id\n\n​\n\n当前使用者的扣子用户 ID。\n\n​\n\nAPI Token 生成者的 ID。\n\n​\n\nconnector_uid\n\n​\n\n当前使用者的扣子用户 ID。\n\n​\n\n用户在\n\n发起对话\n\n等 API 中输入的\n\nuser_id\n\n。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/variables\n\n​\n\n权限\n\n​\n\nreadVariable\n\n​\n\n确保调用该 API 使用的访问令牌开通了\n\nreadVariable\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n获取智能体或应用中设置的用户变量的值。\n\n​\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $AccessToken\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\napp_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n744885747763***\n\n​\n\n如果需要获取应用中设置的用户变量的值，填入对应的应用ID。\n\n​\n\n你可以通过应用的业务编排页面 URL 中获取应用 ID，也就是 URL 中 project-ide 参数后的一串字符，例如\n\nhttps://www.coze.\n\ncn\n\n/space/739174157340921****/\n\nproject\n\n-ide/743996105122521****/workflow/744102227704147****\n\n中，应用的 ID 为\n\n743996105122521****\n\n。\n\n​\n\n说明\n\napp_id\n\n和\n\nbot_id\n\n应至少填写一个，否则会报错。\n\n​\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n749315102740***\n\n​\n\n如果需要获取智能体中设置的用户变量的值，填入对应的应用ID。\n\n​\n\n你可以通过智能体的开发页面获取智能体 ID，开发页面 URL 中 bot 参数后的数字就是智能体 ID。例如\n\nhttps://www.coze.com/space/341****/bot/73428668*****\n\n，bot ID 为\n\n73428668*****\n\n。\n\n​\n\nconnector_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n1024\n\n​\n\n智能体或应用的发布渠道 ID 列表。目前支持如下渠道：\n\n​\n\nAPI：1024\n\n​\n\nChatSDK：999\n\n​\n\nconnector_uid\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nopenAPI\n\n​\n\n查看指定用户 ID 的变量值。用户 ID 对应\n\n执行工作流\n\nAPI 中\n\next\n\n字段中的 user_id。\n\n​\n\nkeywords\n\n​\n\nArray of String\n\n​\n\n可选\n\n​\n\nname,age\n\n​\n\n变量名称，多个变量用英文逗号分隔。\n\n​\n\n当\n\nkeywords\n\n为空时，将返回用户在智能体或应用下的所有用户变量的值。如果输入的\n\nkeywords\n\n在智能体或应用中不存在，则返回结果中不会包含相应的用户变量。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndata\n\n​\n\nObject of\n\nGetVariableData\n\n​\n\n-\n\n​\n\n用户变量数组。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n-\n\n​\n\n返回详情。\n\n​\n\n​\n\nGetVariableData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nitems\n\n​\n\nArray of\n\nKVItem\n\n​\n\n[{ \"value\": \"小王\", \"create_time\": 0, \"update_time\": 0, \"keyword\": \"name\" }]\n\n​\n\n用户变量数组。\n\n​\n\n​\n\nKVItem\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nvalue\n\n​\n\nString\n\n​\n\n18\n\n​\n\n用户变量的值。\n\n​\n\nkeyword\n\n​\n\nString\n\n​\n\nage\n\n​\n\n用户变量的名称。\n\n​\n\n说明\n\nkeyword 必须为智能体或应用中已创建并开启的用户变量，不能设置为系统变量。\n\n​\n\n​\n\ncreate_time\n\n​\n\nLong\n\n​\n\n1744637812\n\n​\n\n首次设置变量值的时间。如果变量值为默认值，则\n\ncreate_time\n\n的值为 0。\n\n​\n\nUnixtime 时间戳格式，单位为秒。\n\n​\n\nupdate_time\n\n​\n\nLong\n\n​\n\n1744637812\n\n​\n\n更新时间，Unixtime 时间戳格式，单位为秒。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request GET 'https\n\n:\n\n//api.coze.cn/v1/variables?app_id=7448857477636685850&bot_id=74931510***9&connector_id=1024' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_Q8LmOJU9mRCUzNCdnq6DMakFsm*****'\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"items\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"value\"\n\n:\n\n\"小王\"\n\n,\n\n​\n\n\"create_time\"\n\n:\n\n0\n\n,\n\n​\n\n\"update_time\"\n\n:\n\n0\n\n,\n\n​\n\n\"keyword\"\n\n:\n\n\"name\"\n\n​\n\n},\n\n​\n\n{\n\n​\n\n\"update_time\"\n\n:\n\n1744637812\n\n,\n\n​\n\n\"keyword\"\n\n:\n\n\"age\"\n\n,\n\n​\n\n\"value\"\n\n:\n\n\"18\"\n\n,\n\n​\n\n\"create_time\"\n\n:\n\n1744637812\n\n​\n\n}\n\n​\n\n]\n\n​\n\n},\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n设置用户变量的值\n\n下一篇\n\n更新审核结果",
        "links": []
      },
      "markdown": "- 仅支持获取已发布 API、ChatSDK 的智能体或应用中的用户变量的值。 ​\n\n- 用户变量按照 user_id + connector_uid + connector_id + bot_id 的组合进行隔离，因此在扣子编程站内设置的用户变量，在 API 渠道可能无法获取对应的值。不同渠道用户标识的规则存在差异，具体如下表所示。 ​\n\n| 参数​ | 扣子编程站内​ | API 渠道​ |\n| user_id​ | 当前使用者的扣子用户 ID。​ | API Token 生成者的 ID。​ |\n| connector_uid​ | 当前使用者的扣子用户 ID。​ | 用户在发起对话等 API 中输入的user_id。​ |\n\n| 请求方式​ | GET |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/variables​ |\n| 权限​ | readVariable​确保调用该 API 使用的访问令牌开通了readVariable权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 获取智能体或应用中设置的用户变量的值。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $AccessToken​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| app_id​ | String​ | 可选​ | 744885747763***​ | 如果需要获取应用中设置的用户变量的值，填入对应的应用ID。​你可以通过应用的业务编排页面 URL 中获取应用 ID，也就是 URL 中 project-ide 参数后的一串字符，例如https://www.coze.cn/space/739174157340921****/project-ide/743996105122521****/workflow/744102227704147****中，应用的 ID 为743996105122521****。​说明app_id和bot_id应至少填写一个，否则会报错。​​ |\n| bot_id​ | String​ | 可选​ | 749315102740***​ | 如果需要获取智能体中设置的用户变量的值，填入对应的应用ID。​你可以通过智能体的开发页面获取智能体 ID，开发页面 URL 中 bot 参数后的数字就是智能体 ID。例如https://www.coze.com/space/341****/bot/73428668*****，bot ID 为73428668*****。​ |\n| connector_id​ | String​ | 可选​ | 1024​ | 智能体或应用的发布渠道 ID 列表。目前支持如下渠道：​API：1024​ChatSDK：999​ |\n| connector_uid​ | String​ | 必选​ | openAPI​ | 查看指定用户 ID 的变量值。用户 ID 对应执行工作流API 中ext字段中的 user_id。​ |\n| keywords​ | Array of String​ | 可选​ | name,age​ | 变量名称，多个变量用英文逗号分隔。​当keywords为空时，将返回用户在智能体或应用下的所有用户变量的值。如果输入的keywords在智能体或应用中不存在，则返回结果中不会包含相应的用户变量。​ |\n\n- API：1024 ​\n\n- ChatSDK：999 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| data​ | Object ofGetVariableData​ | -​ | 用户变量数组。​ |\n| detail​ | Object ofResponseDetail​ | -​ | 返回详情。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| items​ | Array ofKVItem​ | [{ \"value\": \"小王\", \"create_time\": 0, \"update_time\": 0, \"keyword\": \"name\" }]​ | 用户变量数组。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| value​ | String​ | 18​ | 用户变量的值。​ |\n| keyword​ | String​ | age​ | 用户变量的名称。​说明keyword 必须为智能体或应用中已创建并开启的用户变量，不能设置为系统变量。​​ |\n| create_time​ | Long​ | 1744637812​ | 首次设置变量值的时间。如果变量值为默认值，则create_time的值为 0。​Unixtime 时间戳格式，单位为秒。​ |\n| update_time​ | Long​ | 1744637812​ | 更新时间，Unixtime 时间戳格式，单位为秒。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/update_review_result",
      "title": "更新审核结果",
      "content": {
        "sections": [],
        "full_text": "更新审核结果\n\n调用该接口更新智能体发布到自定义渠道的审核结果。\n\n​\n\n用户将智能体发布到自定义渠道后，如果触发了自定义渠道的审核流程，自定义渠道会通过回调消息返回审核结果。如果审核耗时较长，自定义渠道可以先在回调中返回审核中状态，审核结束后，再通过此 API 通知扣子此智能体的最终审核结果。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPUT\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/connectors/:connector_id/bots/:bot_id\n\n​\n\n权限\n\n​\n\nConnector.botUpdateProfile\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nConnector.botUpdateProfile\n\n权限，详细信息参考\n\n鉴权\n\n。\n\n​\n\n接口说明\n\n​\n\n更新智能体发布到自定义渠道的审核结果。\n\n​\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $AccessToken\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n73428668*****\n\n​\n\n要更新的智能体 ID。\n\n​\n\n进入智能体的编排页面，编排页面 URL 中 bot 参数后的数字就是智能体 ID。例如\n\nhttps://www.coze.cn/space/341****/bot/73428668*****\n\n，智能体 ID 为\n\n73428668*****\n\n。\n\n​\n\nconnector_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n74202797******\n\n​\n\n渠道 ID。需要跟 token 的渠道一致。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\naudit_status\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n2\n\n​\n\n渠道审核状态。支持设置为：\n\n​\n\n1: 审核中\n\n​\n\n2: 审核通过\n\n​\n\n3: 审核不通过\n\n​\n\nreason\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n头像无法通过审核\n\n​\n\n审核不通过的具体原因。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。\n\n​\n\n0 表示调用成功。\n\n​\n\n其他值表示调用失败。你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request PUT 'https\n\n:\n\n//api.coze.cn/v1/connectors/74202797******/bots/73428668*****' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_Osa******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"audit_status\"\n\n:\n\n2\n\n,\n\n​\n\n\"reason\"\n\n:\n\n\"头像无法通过审核\"\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20250106172024B5F607030EFFAD***\"\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n获取用户变量的值\n\n下一篇\n\n添加发布平台",
        "links": []
      },
      "markdown": "| 请求方式​ | PUT |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/connectors/:connector_id/bots/:bot_id​ |\n| 权限​ | Connector.botUpdateProfile​确保调用该接口使用的访问令牌开通了Connector.botUpdateProfile权限，详细信息参考鉴权。​ |\n| 接口说明​ | 更新智能体发布到自定义渠道的审核结果。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $AccessToken​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| bot_id​ | String​ | 可选​ | 73428668*****​ | 要更新的智能体 ID。​进入智能体的编排页面，编排页面 URL 中 bot 参数后的数字就是智能体 ID。例如https://www.coze.cn/space/341****/bot/73428668*****，智能体 ID 为73428668*****。​ |\n| connector_id​ | String​ | 可选​ | 74202797******​ | 渠道 ID。需要跟 token 的渠道一致。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| audit_status​ | Integer​ | 可选​ | 2​ | 渠道审核状态。支持设置为：​1: 审核中​2: 审核通过​3: 审核不通过​ |\n| reason​ | String​ | 可选​ | 头像无法通过审核​ | 审核不通过的具体原因。​ |\n\n- 1: 审核中 ​\n\n- 2: 审核通过 ​\n\n- 3: 审核不通过 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。​0 表示调用成功。​其他值表示调用失败。你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n\n- 0 表示调用成功。 ​\n\n- 其他值表示调用失败。你可以通过 msg 字段判断详细的错误原因。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/install_channel",
      "title": "添加发布平台",
      "content": {
        "sections": [],
        "full_text": "添加发布平台\n\n为指定空间添加一个发布渠道。\n\n​\n\n接口说明\n\n​\n\n在扣子编程中发布智能体或应用时，可发布的渠道范围与工作空间有关。每个工作空间均配置了官方默认发布渠道，例如扣子商店、豆包、API 、SDK 等。除此之外，工作空间中还可以手动添加公共渠道和企业自定义渠道，按需拓展 AI 项目的分发渠道。添加渠道后，空间中的每个开发者都可以将自己的 AI 项目发布到这些渠道中。\n\n​\n\n说明\n\n添加发布渠道之前，需要获取发布渠道的渠道 ID。\n\n​\n\n企业自定义渠道：在\n\n我的\n\n>\n\n设置\n\n>\n\n发布渠道\n\n>\n\n我的渠道管理\n\n页面查看当前登录用户已创建的渠道列表，列表中可查看渠道 ID。企业自定义渠道入驻扣子编程的方式可参考\n\n渠道入驻\n\n文档。\n\n​\n\n公开渠道：联系公开平台的管理员获取渠道 ID。\n\n​\n\n扣子企业版（企业标准版、企业旗舰版）中，仅\n\n超级管理员和管理员\n\n能添加企业的公共渠道和自定义渠道，成员只能给个人空间添加公共渠道和自定义渠道。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/connectors/:connector_id/install\n\n​\n\n权限\n\n​\n\ninstallConnector\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\ninstallConnector\n\n权限，详细信息参考\n\n鉴权\n\n。\n\n​\n\n接口说明\n\n​\n\n为指定空间添加一个发布渠道。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nconnector_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n745264392345******\n\n​\n\n渠道 ID。\n\n​\n\n企业自定义渠道：在\n\n我的\n\n>\n\n设置\n\n>\n\n发布渠道\n\n>\n\n我的渠道管理\n\n页面查看当前登录用户已创建的渠道列表，列表中可查看渠道 ID。企业自定义渠道入驻扣子编程的方式可参考\n\n渠道入驻\n\n文档。\n\n​\n\n公开渠道：联系公开平台的管理员获取渠道 ID。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nworkspace_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n736163827687053****\n\n​\n\n需要添加新渠道的工作空间 ID。空间 ID 是空间的唯一标识。\n\n​\n\n进入指定空间，空间页面 URL 中\n\nw\n\n参数后的数字就是 工作空间 ID。例如\n\nhttps://code.coze.cn/w/75814654762959***/projects\n\n，工作空间 ID 为\n\n75814654762959***\n\n。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。\n\n​\n\n0 表示调用成功。\n\n​\n\n其他值表示调用失败。你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{ \"logid\": \"202410242028595CCF353CEC86A8*****\" }\n\n​\n\n本次请求的详细信息。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n安装渠道\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/connectors/745264392345******/install' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_Osa******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"workspace_id\"\n\n:\n\n\"736163827687053****\"\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241029152003BC531DC784F1897B****\"\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n更新审核结果\n\n下一篇\n\n绑定设备",
        "links": []
      },
      "markdown": "- 添加发布渠道之前，需要获取发布渠道的渠道 ID。 ​\n\n- 企业自定义渠道：在 我的 > 设置 > 发布渠道 > 我的渠道管理 页面查看当前登录用户已创建的渠道列表，列表中可查看渠道 ID。企业自定义渠道入驻扣子编程的方式可参考 渠道入驻 文档。 ​\n\n- 公开渠道：联系公开平台的管理员获取渠道 ID。 ​\n\n- 扣子企业版（企业标准版、企业旗舰版）中，仅 超级管理员和管理员 能添加企业的公共渠道和自定义渠道，成员只能给个人空间添加公共渠道和自定义渠道。 ​\n\n| 请求方式​ | POST |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/connectors/:connector_id/install​ |\n| 权限​ | installConnector​确保调用该接口使用的访问令牌开通了installConnector权限，详细信息参考鉴权。​ |\n| 接口说明​ | 为指定空间添加一个发布渠道。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| connector_id​ | String​ | 必选​ | 745264392345******​ | 渠道 ID。​企业自定义渠道：在我的>设置>发布渠道>我的渠道管理页面查看当前登录用户已创建的渠道列表，列表中可查看渠道 ID。企业自定义渠道入驻扣子编程的方式可参考渠道入驻文档。​公开渠道：联系公开平台的管理员获取渠道 ID。​ |\n\n- 企业自定义渠道：在 我的 > 设置 > 发布渠道 > 我的渠道管理 页面查看当前登录用户已创建的渠道列表，列表中可查看渠道 ID。企业自定义渠道入驻扣子编程的方式可参考 渠道入驻 文档。 ​\n\n- 公开渠道：联系公开平台的管理员获取渠道 ID。 ​\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| workspace_id​ | String​ | 必选​ | 736163827687053****​ | 需要添加新渠道的工作空间 ID。空间 ID 是空间的唯一标识。​进入指定空间，空间页面 URL 中w参数后的数字就是 工作空间 ID。例如https://code.coze.cn/w/75814654762959***/projects，工作空间 ID 为75814654762959***。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。​0 表示调用成功。​其他值表示调用失败。你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | { \"logid\": \"202410242028595CCF353CEC86A8*****\" }​ | 本次请求的详细信息。​ |\n\n- 0 表示调用成功。 ​\n\n- 其他值表示调用失败。你可以通过 msg 字段判断详细的错误原因。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/bind_connector_config",
      "title": "绑定设备",
      "content": {
        "sections": [],
        "full_text": "绑定设备\n\n将设备与自定义渠道绑定。\n\n​\n\n接口描述\n\n​\n\n硬件厂商可以调用本 API 将企业内的硬件设备与企业的自定义渠道绑定，当开发者发布智能体到该自定义渠道时，在发布配置页面的设备列表中选择对应的设备，即可快速发布到对应设备。\n\n​\n\n支持批量绑定多台设备。\n\n​\n\n说明\n\n创建自定义渠道后，默认未开启 API 绑定设备的能力，如果需要调用本 API，你需要将自定义渠道的渠道 ID 提供给扣子商务经理，申请开通渠道设备绑定的能力，并由商务经理配置设备绑定的 key。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/connectors/:connector_id/user_configs\n\n​\n\n权限\n\n​\n\nbindConnectorConfig\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nbindConnectorConfig\n\n权限，详细信息参考\n\n准备工作\n\n。\n\n​\n\n接口说明\n\n​\n\n将设备与自定义渠道绑定。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nconnector_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n745264392345******\n\n​\n\n企业自定义渠道的渠道 ID。\n\n​\n\n自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在\n\n账号设置\n\n>\n\n发布渠道\n\n>\n\n企业自定义渠道管理\n\n页面查看渠道 ID。自定义渠道入驻扣子编程的方式可参考\n\n渠道入驻\n\n文档。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nconfigs\n\n​\n\nArray of\n\nUserConfig\n\n​\n\n必选\n\n​\n\n[{\"key\":\"device_id\",\"enums\":[{\"label\":\"设备123\",\"value\":\"1237824***\"}]}]\n\n​\n\n设备配置信息列表。\n\n​\n\nuser_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n4497462571***\n\n​\n\n智能体开发者的扣子用户 UID，用于标识设备绑定的扣子用户。\n\n​\n\n你可以单击扣子编程左下角的头像，选择\n\n账号设置\n\n，在页面底部查看扣子用户的 UID。\n\n​\n\n​\n\nUserConfig\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nkey\n\n​\n\nString\n\n​\n\n必选\n\n​\n\ndevice_id\n\n​\n\n参数的键值，需要与提供给商务经理的\n\nkey\n\n保持一致，用于标识设备配置信息的具体类型。\n\n​\n\nenums\n\n​\n\nArray of\n\nUserConfigEnum\n\n​\n\n必选\n\n​\n\n[{\"label\":\"设备123\",\"value\":\"1237824***\"}]\n\n​\n\n设备信息的数组，可以批量添加该渠道中的所有设备。\n\n​\n\n​\n\nUserConfigEnum\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlabel\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n智能音箱-客厅\n\n​\n\n设备的显示名称，用于在用户界面中标识设备，方便用户识别和管理。\n\n​\n\nvalue\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n51237824***\n\n​\n\n设备的 ID。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/connectors/745264392345******/user_configs' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_xitq****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json' \\\n\n​\n\n--data-raw '\n\n{\n\n​\n\n\"configs\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"key\"\n\n:\n\n\"device_id\"\n\n,\n\n​\n\n\"enums\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"label\"\n\n:\n\n\"智能音箱-客厅\"\n\n,\n\n​\n\n\"value\"\n\n:\n\n\"51237824***\"\n\n​\n\n},\n\n​\n\n{\n\n​\n\n\"label\"\n\n:\n\n\"智能音箱-主卧\"\n\n,\n\n​\n\n\"value\"\n\n:\n\n\"51237825***\"\n\n​\n\n}\n\n​\n\n]\n\n​\n\n}\n\n​\n\n]\n\n​\n\n}\n\n'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241029152003BC531DC784F1897B****\"\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n添加发布平台\n\n下一篇\n\n创建终端用户权益额度",
        "links": []
      },
      "markdown": "| 请求方式​ | POST |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/connectors/:connector_id/user_configs​ |\n| 权限​ | bindConnectorConfig​确保调用该接口使用的访问令牌开通了bindConnectorConfig权限，详细信息参考准备工作。​ |\n| 接口说明​ | 将设备与自定义渠道绑定。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| connector_id​ | String​ | 必选​ | 745264392345******​ | 企业自定义渠道的渠道 ID。​自定义渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在账号设置>发布渠道>企业自定义渠道管理页面查看渠道 ID。自定义渠道入驻扣子编程的方式可参考渠道入驻文档。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| configs​ | Array ofUserConfig​ | 必选​ | [{\"key\":\"device_id\",\"enums\":[{\"label\":\"设备123\",\"value\":\"1237824***\"}]}]​ | 设备配置信息列表。​ |\n| user_id​ | String​ | 可选​ | 4497462571***​ | 智能体开发者的扣子用户 UID，用于标识设备绑定的扣子用户。​你可以单击扣子编程左下角的头像，选择账号设置，在页面底部查看扣子用户的 UID。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| key​ | String​ | 必选​ | device_id​ | 参数的键值，需要与提供给商务经理的key保持一致，用于标识设备配置信息的具体类型。​ |\n| enums​ | Array ofUserConfigEnum​ | 必选​ | [{\"label\":\"设备123\",\"value\":\"1237824***\"}]​ | 设备信息的数组，可以批量添加该渠道中的所有设备。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| label​ | String​ | 必选​ | 智能音箱-客厅​ | 设备的显示名称，用于在用户界面中标识设备，方便用户识别和管理。​ |\n| value​ | String​ | 必选​ | 51237824***​ | 设备的 ID。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/create_device_quotas",
      "title": "创建终端用户权益额度",
      "content": {
        "sections": [],
        "full_text": "创建终端用户权益额度\n\n创建终端用户的权益额度。\n\n​\n\n说明\n\n套餐限制\n\n：扣子企业旗舰版。\n\n​\n\n角色限制\n\n：企业超级管理员和管理员可以调用该 API。\n\n​\n\n调用此 API 创建设备权益额度之前，需要确保企业下的设备已成功上报了设备信息，否则会导致权益额度对该设备无法生效，设备信息的配置方法可参考\n\n设置设备信息\n\n。\n\n​\n\n​\n\n接口描述\n\n​\n\n你可以调用本 API 创建终端用户的权益额度，用于设置终端用户可使用的资源点或语音时长配额，以便用户在初始阶段免费体验设备功能，同时避免资源的过度使用。\n\n​\n\n生效对象：权益额度的生效对象可以设置为企业中的所有设备、所有自定义维度的实体、某个设备或某个自定义维度的实体。\n\n​\n\n额度类型：支持按资源点维度或语音通话时长维度设置配额，你可以为每个设备设置累计可用额度以及时间周期内的额度（例如每日 1000 资源点）。当设备在当前周期内的资源点使用达到周期上限或累计额度上限时，将无法继续使用，直至下一个周期或额度重置。例如设置每个设备累计额度为 5000 资源点，每天可用 1000 资源点。当设备 A 今天的使用资源点达到 1000 上限后，设备 A 今天将无法继续使用，需等到次日才能恢复使用，当设备 A 的累计使用资源点达到 5000 上限后，设备 A 将无法继续使用。\n\n​\n\n配置的优先级：若同时为单个设备和企业下所有设备配置了额度，则优先使用单个设备的额度。\n\n​\n\n生效时间：通过扣子编程的\n\n管理设备配额\n\n页面设置的针对企业下所有设备和自定义维度实体的额度，默认有效期为永不过期，即\n\nstarted_at = 1970-01-01\n\n至\n\nended_at = 9999-12-31\n\n。若权益生效时间已过期，则该条配额规则会失效。\n\n​\n\n未配置额度的设备：未设置权益额度的设备，将默认无限制使用资源点。\n\n​\n\n接口限制\n\n​\n\n当权益配额的生效范围为企业下所有设备或企业下所有自定义维度的实体时，仅能创建一条累计可用额度和一条时间周期内可用额度。\n\n​\n\n增购\n\nAI 智能通话许可（系统音色）\n\n的企业，权益额度类型支持配置为\n\n语音通话时长配额（系统音色）\n\n，否则不生效，购买语音通话时长的详细步骤请参见\n\n音视频费用\n\n。\n\n​\n\n增购\n\nAI 智能通话许可（复刻音色）\n\n的企业，权益额度类型支持配置为\n\n语音通话时长配额（复刻音色）\n\n，否则不生效。\n\n​\n\n未增购 AI 智能通话许可的企业，权益额度类型仅支持资源点配额。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/commerce/benefit/limitations\n\n​\n\n权限\n\n​\n\ncreateBenefitLimitation\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\ncreateBenefitLimitation\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n创建终端用户的权益配额。\n\n​\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n用于指定解析请求正文的格式，表明请求体为 JSON 格式数据。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nentity_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nenterprise_all_devices\n\n​\n\n权益配额的生效范围，枚举值：\n\n​\n\nenterprise_all_devices\n\n：权益配额对企业下的所有设备生效。\n\n​\n\nenterprise_all_custom_consumers\n\n：权益配额对企业下所有自定义维度的实体生效。若某设备在设备信息中未上报 custom_consumers，则该设备无法生效权益额度。\n\n​\n\nsingle_device\n\n：权益配额对单个设备生效。\n\n​\n\nsingle_custom_consumer\n\n：权益配额对单个自定义维度的实体生效。\n\n​\n\nentity_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n12345\n\n​\n\n该权益配额对哪个实体 ID 生效。\n\n​\n\nentity_type\n\n为\n\nsingle_device\n\n时，\n\nentity_id\n\n需要设置为对应的 Device ID。\n\n​\n\nentity_type\n\n为\n\nsingle_custom_consumer\n\n时，\n\nentity_id\n\n需要设置为对应的 custom consumer ID。\n\n​\n\nentity_type\n\n为其他类型时，无需填写\n\nentity_id\n\n。\n\n​\n\nbenefit_info\n\n​\n\nObject of\n\nBenefitInfo\n\n​\n\n必选\n\n​\n\n{ \"benefit_type\": \"resource_point\", \"active_mode\": \"absolute_time\", \"started_at\": 1741708800, \"ended_at\": 253402300799, \"limit\": 100, \"status\": \"valid\" }\n\n​\n\n权益额度。\n\n​\n\n​\n\nBenefitInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlimit\n\n​\n\nLong\n\n​\n\n必选\n\n​\n\n100\n\n​\n\n可用的额度。\n\n​\n\n如果权益配额类型为\n\nresource_point\n\n，可用额度的单位为资源点。\n\n​\n\n如果权益配额类型为\n\nvoice_unified_duration_system\n\n或\n\nvoice_unified_duration_custom\n\n，可用额度的单位为秒。\n\n​\n\nbenefit_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nresource_point\n\n​\n\n权益配额类型，枚举值：\n\n​\n\nresource_point\n\n：资源点配额。\n\n​\n\nvoice_unified_duration_system\n\n：\n\n​\n\n语音通话时长配额（系统音色）。\n\n​\n\nvoice_unified_duration_custom\n\n：\n\n​\n\n语音通话时长配额（复刻音色）。\n\n​\n\n说明\n\n增购\n\nAI 智能通话许可（系统音色）\n\n的企业，配置的\n\nvoice_unified_duration_system\n\n才生效，购买语音通话时长的详细步骤请参见\n\n音视频费用\n\n。\n\n​\n\n增购\n\nAI 智能通话许可（复刻音色）\n\n的企业，配置的\n\n​\n\nvoice_unified_duration_custom\n\n才生效。\n\n​\n\n未增购 AI 智能通话许可的企业，仅支持配置\n\n​\n\nresource_point\n\n。\n\n​\n\n​\n\nactive_mode\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nabsolute_time\n\n​\n\n激活模式，当前仅支持设置为\n\nabsolute_time\n\n模式，即绝对时间。\n\n​\n\n该模式下，权益生效时间由\n\nstarted_at\n\n和\n\nended_at\n\n两个时间确定。\n\n​\n\nstarted_at\n\n​\n\nLong\n\n​\n\n必选\n\n​\n\n1753996800\n\n​\n\n该条配额规则的生效起始时间，Unixtime 时间戳格式，单位为秒。\n\n​\n\nended_at\n\n​\n\nLong\n\n​\n\n必选\n\n​\n\n253402300799\n\n​\n\n该条配额规则的生效截止时间，Unixtime 时间戳格式，单位为秒。过期后，该条配额规则会失效。\n\n​\n\nstatus\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nvalid\n\n​\n\n设备权益的当前状态，枚举值：\n\n​\n\nvalid\n\n：正常使用。\n\n​\n\nfrozen\n\n：已冻结。\n\n​\n\ntrigger_unit\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nday\n\n​\n\n权益可用额度的重置周期，即额度按指定时间间隔恢复或重新计算。枚举值：\n\n​\n\nnever\n\n：（默认）不重置额度，适用于设置累计可用额度上限。\n\n​\n\nminute\n\n：以分钟为周期重置额度。\n\n​\n\nhour\n\n：以小时为周期重置额度。\n\n​\n\nday\n\n：以天为周期重置额度。\n\n​\n\ntrigger_time\n\n​\n\nLong\n\n​\n\n可选\n\n​\n\n1\n\n​\n\n权益配额重置周期的频率：\n\n​\n\n当\n\ntrigger_unit\n\n为\n\nnever\n\n时，\n\ntrigger_time\n\n的值为 1，且无意义。\n\n​\n\n当\n\ntrigger_unit\n\n为\n\nminute\n\n、\n\nhour\n\n或\n\nday\n\n时，\n\ntrigger_time\n\n表示具体的刷新频率，例如：\n\ntrigger_unit=day\n\n且\n\ntrigger_time = 1\n\n，表示每日刷新配额。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndata\n\n​\n\nObject of\n\nCreateBenefitLimitationData\n\n​\n\n{ \"benefit_id\": 123***, \"benefit_type\": \"resource_point\", \"active_mode\": \"absolute_time\", \"started_at\": 1741708800, \"ended_at\": 1741708800, \"limit\": 100, \"status\": \"valid\" }\n\n​\n\n接口调用成功时，返回的详细数据信息。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n-\n\n​\n\n响应详情信息。\n\n​\n\n​\n\nCreateBenefitLimitationData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nbenefit_info\n\n​\n\nObject of\n\nBenefitInfo\n\n​\n\n-\n\n​\n\n权益额度。\n\n​\n\n​\n\nBenefitInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlimit\n\n​\n\nLong\n\n​\n\n100\n\n​\n\n可用的额度。\n\n​\n\n如果权益配额类型为\n\nresource_point\n\n，可用额度的单位为资源点。\n\n​\n\n如果权益配额类型为\n\nvoice_unified_duration_system\n\n或\n\nvoice_unified_duration_custom\n\n，可用额度的单位为秒。\n\n​\n\nbenefit_type\n\n​\n\nString\n\n​\n\nresource_point\n\n​\n\n权益配额类型，枚举值：\n\n​\n\nresource_point\n\n：资源点配额。\n\n​\n\nvoice_unified_duration_system\n\n：\n\n​\n\n语音通话时长配额（系统音色）。\n\n​\n\nvoice_unified_duration_custom\n\n：\n\n​\n\n语音通话时长配额（复刻音色）。\n\n​\n\n说明\n\n增购\n\nAI 智能通话许可（系统音色）\n\n的企业，配置的\n\nvoice_unified_duration_system\n\n才生效，购买语音通话时长的详细步骤请参见\n\n音视频费用\n\n。\n\n​\n\n增购\n\nAI 智能通话许可（复刻音色）\n\n的企业，配置的\n\n​\n\nvoice_unified_duration_custom\n\n才生效。\n\n​\n\n未增购 AI 智能通话许可的企业，仅支持配置\n\n​\n\nresource_point\n\n。\n\n​\n\n​\n\nactive_mode\n\n​\n\nString\n\n​\n\nabsolute_time\n\n​\n\n激活模式，当前仅支持设置为\n\nabsolute_time\n\n模式，即绝对时间。\n\n​\n\n该模式下，权益生效时间由\n\nstarted_at\n\n和\n\nended_at\n\n两个时间确定。\n\n​\n\nstarted_at\n\n​\n\nLong\n\n​\n\n1753996800\n\n​\n\n该条配额规则的生效起始时间，Unixtime 时间戳格式，单位为秒。\n\n​\n\nended_at\n\n​\n\nLong\n\n​\n\n253402300799\n\n​\n\n该条配额规则的生效截止时间，Unixtime 时间戳格式，单位为秒。过期后，该条配额规则会失效。\n\n​\n\nentity_id\n\n​\n\nString\n\n​\n\nSN12345*********\n\n​\n\n该权益配额对哪个实体 ID 生效。仅在\n\nentity_type\n\n为\n\nsingle_device\n\n或\n\n​\n\nsingle_custom_consumer\n\n时，会返回对应的实体 ID。\n\n​\n\nstatus\n\n​\n\nString\n\n​\n\nvalid\n\n​\n\n设备权益的当前状态，枚举值：\n\n​\n\nvalid\n\n：正常使用。\n\n​\n\nfrozen\n\n：已冻结。\n\n​\n\nbenefit_id\n\n​\n\nString\n\n​\n\n123\n\n​\n\n权益配额的 ID。\n\n​\n\nentity_type\n\n​\n\nString\n\n​\n\nenterprise_all_devices\n\n​\n\n权益配额的生效范围，枚举值：\n\n​\n\nenterprise_all_devices\n\n：权益配额对企业下的所有设备生效。\n\n​\n\nenterprise_all_custom_consumers\n\n：权益配额对企业下所有自定义维度的实体生效。若某设备在设备信息中未上报 custom_consumers，则该设备无法生效权益配额。\n\n​\n\nsingle_device\n\n：权益配额对单个设备生效。\n\n​\n\nsingle_custom_consumer\n\n：权益配额对单个自定义维度的实体生效。\n\n​\n\ntrigger_unit\n\n​\n\nString\n\n​\n\nday\n\n​\n\n权益可用额度的重置周期，即额度按指定时间间隔恢复或重新计算。枚举值：\n\n​\n\nnever\n\n：（默认）不重置额度，适用于设置累计可用额度上限。\n\n​\n\nminute\n\n：以分钟为周期重置额度。\n\n​\n\nhour\n\n：以小时为周期重置额度。\n\n​\n\nday\n\n：以天为周期重置额度。\n\n​\n\ntrigger_time\n\n​\n\nLong\n\n​\n\n1\n\n​\n\n权益配额重置周期的频率：\n\n​\n\n当\n\ntrigger_unit\n\n为\n\nnever\n\n时，\n\ntrigger_time\n\n的值为 1，且无意义。\n\n​\n\n当\n\ntrigger_unit\n\n为\n\nminute\n\n、\n\nhour\n\n或\n\nday\n\n时，\n\ntrigger_time\n\n表示具体的刷新频率，例如：\n\ntrigger_unit=day\n\n且\n\ntrigger_time = 1\n\n，表示每日刷新配额。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/commerce/benefit/limitations' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n{\n\n​\n\n\"entity_type\"\n\n:\n\n\"single_device\"\n\n,\n\n​\n\n\"entity_id\"\n\n:\n\n\"SN12345*********\"\n\n,\n\n​\n\n\"benefit_info\"\n\n:\n\n{\n\n​\n\n\"benefit_type\"\n\n:\n\n\"resource_point\"\n\n,\n\n​\n\n\"active_mode\"\n\n:\n\n\"absolute_time\"\n\n,\n\n​\n\n\"started_at\"\n\n:\n\n1741708800\n\n,\n\n​\n\n\"ended_at\"\n\n:\n\n253402300799\n\n,\n\n​\n\n\"limit\"\n\n:\n\n100\n\n,\n\n​\n\n\"status\"\n\n:\n\n\"valid\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"benefit_id\"\n\n:\n\n123\n\n***\n\n,\n\n​\n\n\"benefit_type\"\n\n:\n\n\"resource_point\"\n\n,\n\n​\n\n\"active_mode\"\n\n:\n\n\"absolute_time\"\n\n,\n\n​\n\n\"started_at\"\n\n:\n\n1741708800\n\n,\n\n​\n\n\"ended_at\"\n\n:\n\n253402300799\n\n,\n\n​\n\n\"limit\"\n\n:\n\n100\n\n,\n\n​\n\n\"status\"\n\n:\n\n\"valid\"\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n绑定设备\n\n下一篇\n\n查询终端用户的权益配额",
        "links": []
      },
      "markdown": "- 套餐限制 ：扣子企业旗舰版。 ​\n\n- 角色限制 ：企业超级管理员和管理员可以调用该 API。 ​\n\n- 调用此 API 创建设备权益额度之前，需要确保企业下的设备已成功上报了设备信息，否则会导致权益额度对该设备无法生效，设备信息的配置方法可参考 设置设备信息 。 ​\n\n- 生效对象：权益额度的生效对象可以设置为企业中的所有设备、所有自定义维度的实体、某个设备或某个自定义维度的实体。 ​\n\n- 额度类型：支持按资源点维度或语音通话时长维度设置配额，你可以为每个设备设置累计可用额度以及时间周期内的额度（例如每日 1000 资源点）。当设备在当前周期内的资源点使用达到周期上限或累计额度上限时，将无法继续使用，直至下一个周期或额度重置。例如设置每个设备累计额度为 5000 资源点，每天可用 1000 资源点。当设备 A 今天的使用资源点达到 1000 上限后，设备 A 今天将无法继续使用，需等到次日才能恢复使用，当设备 A 的累计使用资源点达到 5000 上限后，设备 A 将无法继续使用。 ​\n\n- 配置的优先级：若同时为单个设备和企业下所有设备配置了额度，则优先使用单个设备的额度。 ​\n\n- 生效时间：通过扣子编程的 管理设备配额 页面设置的针对企业下所有设备和自定义维度实体的额度，默认有效期为永不过期，即 started_at = 1970-01-01 至 ended_at = 9999-12-31 。若权益生效时间已过期，则该条配额规则会失效。 ​\n\n- 未配置额度的设备：未设置权益额度的设备，将默认无限制使用资源点。 ​\n\n- 当权益配额的生效范围为企业下所有设备或企业下所有自定义维度的实体时，仅能创建一条累计可用额度和一条时间周期内可用额度。 ​\n\n- 增购 AI 智能通话许可（系统音色） 的企业，权益额度类型支持配置为 语音通话时长配额（系统音色） ，否则不生效，购买语音通话时长的详细步骤请参见 音视频费用 。 ​\n\n- 增购 AI 智能通话许可（复刻音色） 的企业，权益额度类型支持配置为 语音通话时长配额（复刻音色） ，否则不生效。 ​\n\n- 未增购 AI 智能通话许可的企业，权益额度类型仅支持资源点配额。 ​\n\n| 请求方式​ | POST |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/commerce/benefit/limitations​ |\n| 权限​ | createBenefitLimitation​确保调用该接口使用的访问令牌开通了createBenefitLimitation权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 创建终端用户的权益配额。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 用于指定解析请求正文的格式，表明请求体为 JSON 格式数据。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| entity_type​ | String​ | 必选​ | enterprise_all_devices​ | 权益配额的生效范围，枚举值：​enterprise_all_devices：权益配额对企业下的所有设备生效。​enterprise_all_custom_consumers：权益配额对企业下所有自定义维度的实体生效。若某设备在设备信息中未上报 custom_consumers，则该设备无法生效权益额度。​single_device：权益配额对单个设备生效。​single_custom_consumer：权益配额对单个自定义维度的实体生效。​ |\n| entity_id​ | String​ | 可选​ | 12345​ | 该权益配额对哪个实体 ID 生效。​entity_type为single_device时，entity_id需要设置为对应的 Device ID。​entity_type为single_custom_consumer时，entity_id需要设置为对应的 custom consumer ID。​entity_type为其他类型时，无需填写entity_id。​ |\n| benefit_info​ | Object ofBenefitInfo​ | 必选​ | { \"benefit_type\": \"resource_point\", \"active_mode\": \"absolute_time\", \"started_at\": 1741708800, \"ended_at\": 253402300799, \"limit\": 100, \"status\": \"valid\" }​ | 权益额度。​ |\n\n- enterprise_all_devices ：权益配额对企业下的所有设备生效。 ​\n\n- enterprise_all_custom_consumers ：权益配额对企业下所有自定义维度的实体生效。若某设备在设备信息中未上报 custom_consumers，则该设备无法生效权益额度。 ​\n\n- single_device ：权益配额对单个设备生效。 ​\n\n- single_custom_consumer ：权益配额对单个自定义维度的实体生效。 ​\n\n- entity_type 为 single_device 时， entity_id 需要设置为对应的 Device ID。 ​\n\n- entity_type 为 single_custom_consumer 时， entity_id 需要设置为对应的 custom consumer ID。 ​\n\n- entity_type 为其他类型时，无需填写 entity_id 。 ​\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| limit​ | Long​ | 必选​ | 100​ | 可用的额度。​如果权益配额类型为resource_point，可用额度的单位为资源点。​如果权益配额类型为voice_unified_duration_system或voice_unified_duration_custom，可用额度的单位为秒。​ |\n| benefit_type​ | String​ | 必选​ | resource_point​ | 权益配额类型，枚举值：​resource_point：资源点配额。​voice_unified_duration_system：​语音通话时长配额（系统音色）。​voice_unified_duration_custom：​语音通话时长配额（复刻音色）。​说明增购AI 智能通话许可（系统音色）的企业，配置的voice_unified_duration_system才生效，购买语音通话时长的详细步骤请参见音视频费用。​增购AI 智能通话许可（复刻音色）的企业，配置的​voice_unified_duration_custom才生效。​未增购 AI 智能通话许可的企业，仅支持配置​resource_point。​​ |\n| active_mode​ | String​ | 必选​ | absolute_time​ | 激活模式，当前仅支持设置为absolute_time模式，即绝对时间。​该模式下，权益生效时间由started_at和ended_at两个时间确定。​ |\n| started_at​ | Long​ | 必选​ | 1753996800​ | 该条配额规则的生效起始时间，Unixtime 时间戳格式，单位为秒。​ |\n| ended_at​ | Long​ | 必选​ | 253402300799​ | 该条配额规则的生效截止时间，Unixtime 时间戳格式，单位为秒。过期后，该条配额规则会失效。​ |\n| status​ | String​ | 可选​ | valid​ | 设备权益的当前状态，枚举值：​valid：正常使用。​frozen：已冻结。​ |\n| trigger_unit​ | String​ | 可选​ | day​ | 权益可用额度的重置周期，即额度按指定时间间隔恢复或重新计算。枚举值：​never：（默认）不重置额度，适用于设置累计可用额度上限。​minute：以分钟为周期重置额度。​hour：以小时为周期重置额度。​day：以天为周期重置额度。​ |\n| trigger_time​ | Long​ | 可选​ | 1​ | 权益配额重置周期的频率：​当trigger_unit为never时，trigger_time的值为 1，且无意义。​当trigger_unit为minute、hour或day时，trigger_time表示具体的刷新频率，例如：trigger_unit=day且trigger_time = 1，表示每日刷新配额。​ |\n\n- 如果权益配额类型为 resource_point ，可用额度的单位为资源点。 ​\n\n- 如果权益配额类型为 voice_unified_duration_system 或 voice_unified_duration_custom ，可用额度的单位为秒。 ​\n\n- resource_point ：资源点配额。 ​\n\n- voice_unified_duration_system ： ​\n\n- voice_unified_duration_custom ： ​\n\n- 增购 AI 智能通话许可（系统音色） 的企业，配置的 voice_unified_duration_system 才生效，购买语音通话时长的详细步骤请参见 音视频费用 。 ​\n\n- 增购 AI 智能通话许可（复刻音色） 的企业，配置的 ​\n\n- 未增购 AI 智能通话许可的企业，仅支持配置 ​\n\n- valid ：正常使用。 ​\n\n- frozen ：已冻结。 ​\n\n- never ：（默认）不重置额度，适用于设置累计可用额度上限。 ​\n\n- minute ：以分钟为周期重置额度。 ​\n\n- hour ：以小时为周期重置额度。 ​\n\n- day ：以天为周期重置额度。 ​\n\n- 当 trigger_unit 为 never 时， trigger_time 的值为 1，且无意义。 ​\n\n- 当 trigger_unit 为 minute 、 hour 或 day 时， trigger_time 表示具体的刷新频率，例如： trigger_unit=day 且 trigger_time = 1 ，表示每日刷新配额。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| data​ | Object ofCreateBenefitLimitationData​ | { \"benefit_id\": 123***, \"benefit_type\": \"resource_point\", \"active_mode\": \"absolute_time\", \"started_at\": 1741708800, \"ended_at\": 1741708800, \"limit\": 100, \"status\": \"valid\" }​ | 接口调用成功时，返回的详细数据信息。​ |\n| detail​ | Object ofResponseDetail​ | -​ | 响应详情信息。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| benefit_info​ | Object ofBenefitInfo​ | -​ | 权益额度。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| limit​ | Long​ | 100​ | 可用的额度。​如果权益配额类型为resource_point，可用额度的单位为资源点。​如果权益配额类型为voice_unified_duration_system或voice_unified_duration_custom，可用额度的单位为秒。​ |\n| benefit_type​ | String​ | resource_point​ | 权益配额类型，枚举值：​resource_point：资源点配额。​voice_unified_duration_system：​语音通话时长配额（系统音色）。​voice_unified_duration_custom：​语音通话时长配额（复刻音色）。​说明增购AI 智能通话许可（系统音色）的企业，配置的voice_unified_duration_system才生效，购买语音通话时长的详细步骤请参见音视频费用。​增购AI 智能通话许可（复刻音色）的企业，配置的​voice_unified_duration_custom才生效。​未增购 AI 智能通话许可的企业，仅支持配置​resource_point。​​ |\n| active_mode​ | String​ | absolute_time​ | 激活模式，当前仅支持设置为absolute_time模式，即绝对时间。​该模式下，权益生效时间由started_at和ended_at两个时间确定。​ |\n| started_at​ | Long​ | 1753996800​ | 该条配额规则的生效起始时间，Unixtime 时间戳格式，单位为秒。​ |\n| ended_at​ | Long​ | 253402300799​ | 该条配额规则的生效截止时间，Unixtime 时间戳格式，单位为秒。过期后，该条配额规则会失效。​ |\n| entity_id​ | String​ | SN12345*********​ | 该权益配额对哪个实体 ID 生效。仅在entity_type为single_device或​single_custom_consumer时，会返回对应的实体 ID。​ |\n| status​ | String​ | valid​ | 设备权益的当前状态，枚举值：​valid：正常使用。​frozen：已冻结。​ |\n| benefit_id​ | String​ | 123​ | 权益配额的 ID。​ |\n| entity_type​ | String​ | enterprise_all_devices​ | 权益配额的生效范围，枚举值：​enterprise_all_devices：权益配额对企业下的所有设备生效。​enterprise_all_custom_consumers：权益配额对企业下所有自定义维度的实体生效。若某设备在设备信息中未上报 custom_consumers，则该设备无法生效权益配额。​single_device：权益配额对单个设备生效。​single_custom_consumer：权益配额对单个自定义维度的实体生效。​ |\n| trigger_unit​ | String​ | day​ | 权益可用额度的重置周期，即额度按指定时间间隔恢复或重新计算。枚举值：​never：（默认）不重置额度，适用于设置累计可用额度上限。​minute：以分钟为周期重置额度。​hour：以小时为周期重置额度。​day：以天为周期重置额度。​ |\n| trigger_time​ | Long​ | 1​ | 权益配额重置周期的频率：​当trigger_unit为never时，trigger_time的值为 1，且无意义。​当trigger_unit为minute、hour或day时，trigger_time表示具体的刷新频率，例如：trigger_unit=day且trigger_time = 1，表示每日刷新配额。​ |\n\n- 如果权益配额类型为 resource_point ，可用额度的单位为资源点。 ​\n\n- 如果权益配额类型为 voice_unified_duration_system 或 voice_unified_duration_custom ，可用额度的单位为秒。 ​\n\n- resource_point ：资源点配额。 ​\n\n- voice_unified_duration_system ： ​\n\n- voice_unified_duration_custom ： ​\n\n- 增购 AI 智能通话许可（系统音色） 的企业，配置的 voice_unified_duration_system 才生效，购买语音通话时长的详细步骤请参见 音视频费用 。 ​\n\n- 增购 AI 智能通话许可（复刻音色） 的企业，配置的 ​\n\n- 未增购 AI 智能通话许可的企业，仅支持配置 ​\n\n- valid ：正常使用。 ​\n\n- frozen ：已冻结。 ​\n\n- enterprise_all_devices ：权益配额对企业下的所有设备生效。 ​\n\n- enterprise_all_custom_consumers ：权益配额对企业下所有自定义维度的实体生效。若某设备在设备信息中未上报 custom_consumers，则该设备无法生效权益配额。 ​\n\n- single_device ：权益配额对单个设备生效。 ​\n\n- single_custom_consumer ：权益配额对单个自定义维度的实体生效。 ​\n\n- never ：（默认）不重置额度，适用于设置累计可用额度上限。 ​\n\n- minute ：以分钟为周期重置额度。 ​\n\n- hour ：以小时为周期重置额度。 ​\n\n- day ：以天为周期重置额度。 ​\n\n- 当 trigger_unit 为 never 时， trigger_time 的值为 1，且无意义。 ​\n\n- 当 trigger_unit 为 minute 、 hour 或 day 时， trigger_time 表示具体的刷新频率，例如： trigger_unit=day 且 trigger_time = 1 ，表示每日刷新配额。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/get_device_quotas",
      "title": "查询终端用户的权益配额",
      "content": {
        "sections": [],
        "full_text": "查询终端用户的权益配额\n\n查询已配置的权益配额信息，包括权益配额、状态、激活模式等详细信息。\n\n​\n\n说明\n\n套餐限制\n\n：扣子企业旗舰版。\n\n​\n\n角色限制\n\n：企业超级管理员和管理员可以调用该 API。\n\n​\n\n调用此 API 查询设备权益配额之前，需要确保企业下的设备已成功上报了设备信息，否则会导致权益配额对该设备无法生效，设备信息的配置方法可参考\n\n设置设备信息\n\n。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/commerce/benefit/limitations\n\n​\n\n权限\n\n​\n\nlistBenefitLimitation\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nlistBenefitLimitation\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n查询已配置的权益额度信息。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n用于指定解析请求正文的格式，表明请求体为 JSON 格式数据。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nentity_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nenterprise_all_devices\n\n​\n\n权益配额的生效范围，枚举值：\n\n​\n\nenterprise_all_devices\n\n：权益配额对企业下的所有设备生效。\n\n​\n\nenterprise_all_custom_consumers\n\n：权益配额对企业下所有自定义维度的实体生效。\n\n​\n\nsingle_device\n\n：权益配额对单个设备生效。\n\n​\n\nsingle_custom_consumer\n\n：权益配额对单个自定义维度的实体生效。\n\n​\n\nentity_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nSN12345*********\n\n​\n\n该权益配额对哪个实体 ID 生效。\n\n​\n\n仅在\n\nentity_type\n\n为\n\nsingle_device\n\n或\n\n​\n\nsingle_custom_consumer\n\n时，需填写entity_id，分别为对应的 Device ID 或 custom consumer ID。\n\n​\n\nentity_type\n\n为其他类型时，无需填写entity_id。\n\n​\n\nbenefit_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nresource_point\n\n​\n\n权益配额类型，枚举值：\n\n​\n\nresource_point\n\n：资源点配额。\n\n​\n\nvoice_unified_duration_system\n\n：\n\n​\n\n语音通话时长配额（系统音色）。\n\n​\n\nvoice_unified_duration_custom\n\n：\n\n​\n\n语音通话时长配额（复刻音色）。\n\n​\n\nstatus\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nvalid\n\n​\n\n设备权益的当前状态，枚举值：\n\n​\n\nvalid\n\n：（默认值）正常使用。\n\n​\n\nfrozen\n\n：已冻结。\n\n​\n\npage_token\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n-\n\n​\n\n翻页标识，表示下一页的起始位置。当查询结果超过\n\npage_size\n\n时，返回的\n\npage_token\n\n可用于获取下一页数据。\n\n​\n\n首次请求不填或置空，后续翻页需带上上一次返回的 page_token。\n\n​\n\npage_size\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n30\n\n​\n\n查询结果分页展示时，此参数用于设置每页返回的数据量。取值范围为 1~200，默认为 20。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndata\n\n​\n\nObject of\n\nListBenefitLimitationData\n\n​\n\n{ \"benefit_id\": 123***, \"benefit_type\": \"resource_point\", \"active_mode\": \"absolute_time\", \"started_at\": 1741708800, \"ended_at\": 1741708800, \"limit\": 100, \"status\": \"valid\" }\n\n​\n\n接口调用成功时，返回的详细数据信息。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n-\n\n​\n\n响应详情信息。\n\n​\n\n​\n\nListBenefitLimitationData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nhas_more\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n是否还有下一页。\n\n​\n\ntrue：还有下一页。\n\n​\n\nfalse：没有下一页。\n\n​\n\npage_token\n\n​\n\nString\n\n​\n\n-\n\n​\n\n翻页标识。\n\n​\n\nbenefit_infos\n\n​\n\nArray of\n\nBenefitInfo\n\n​\n\n-\n\n​\n\n权益配额列表。\n\n​\n\n​\n\nBenefitInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlimit\n\n​\n\nLong\n\n​\n\n100\n\n​\n\n可用的额度。\n\n​\n\n如果权益配额类型为\n\nresource_point\n\n，可用额度的单位为资源点。\n\n​\n\n如果权益配额类型为\n\nvoice_unified_duration_system\n\n或\n\nvoice_unified_duration_custom\n\n，可用额度的单位为秒。\n\n​\n\nbenefit_type\n\n​\n\nString\n\n​\n\nresource_point\n\n​\n\n权益配额类型，枚举值：\n\n​\n\nresource_point\n\n：资源点配额。\n\n​\n\nvoice_unified_duration_system\n\n：\n\n​\n\n语音通话时长配额（系统音色）。\n\n​\n\nvoice_unified_duration_custom\n\n：\n\n​\n\n语音通话时长配额（复刻音色）。\n\n​\n\n说明\n\n增购\n\nAI 智能通话许可（系统音色）\n\n的企业，配置的\n\nvoice_unified_duration_system\n\n才生效，购买语音通话时长的详细步骤请参见\n\n音视频费用\n\n。\n\n​\n\n增购\n\nAI 智能通话许可（复刻音色）\n\n的企业，配置的\n\n​\n\nvoice_unified_duration_custom\n\n才生效。\n\n​\n\n未增购 AI 智能通话许可的企业，仅支持配置\n\n​\n\nresource_point\n\n。\n\n​\n\n​\n\nactive_mode\n\n​\n\nString\n\n​\n\nabsolute_time\n\n​\n\n激活模式，当前仅支持设置为\n\nabsolute_time\n\n模式，即绝对时间。\n\n​\n\n该模式下，权益生效时间由\n\nstarted_at\n\n和\n\nended_at\n\n两个时间确定。\n\n​\n\nstarted_at\n\n​\n\nLong\n\n​\n\n1753996800\n\n​\n\n该条配额规则的生效起始时间，Unixtime 时间戳格式，单位为秒。\n\n​\n\nended_at\n\n​\n\nLong\n\n​\n\n253402300799\n\n​\n\n该条配额规则的生效截止时间，Unixtime 时间戳格式，单位为秒。过期后，该条配额规则会失效。\n\n​\n\nentity_id\n\n​\n\nString\n\n​\n\nSN12345*********\n\n​\n\n该权益配额对哪个实体 ID 生效。仅在\n\nentity_type\n\n为\n\nsingle_device\n\n或\n\n​\n\nsingle_custom_consumer\n\n时，会返回对应的实体 ID。\n\n​\n\nstatus\n\n​\n\nString\n\n​\n\nvalid\n\n​\n\n设备权益的当前状态，枚举值：\n\n​\n\nvalid\n\n：正常使用。\n\n​\n\nfrozen\n\n：已冻结。\n\n​\n\nentity_type\n\n​\n\nString\n\n​\n\nenterprise_all_devices\n\n​\n\n权益配额的生效范围，枚举值：\n\n​\n\nenterprise_all_devices\n\n：权益配额对企业下的所有设备生效。\n\n​\n\nenterprise_all_custom_consumers\n\n：权益配额对企业下所有自定义维度的实体生效。若某设备在设备信息中未上报 custom_consumers，则该设备无法生效权益配额。\n\n​\n\nsingle_device\n\n：权益配额对单个设备生效。\n\n​\n\nsingle_custom_consumer\n\n：权益配额对单个自定义维度的实体生效。\n\n​\n\ntrigger_unit\n\n​\n\nString\n\n​\n\nday\n\n​\n\n权益可用额度的重置周期，即额度按指定时间间隔恢复或重新计算。枚举值：\n\n​\n\nnever\n\n：（默认）不重置额度，适用于设置累计可用额度上限。\n\n​\n\nminute\n\n：以分钟为周期重置额度。\n\n​\n\nhour\n\n：以小时为周期重置额度。\n\n​\n\nday\n\n：以天为周期重置额度。\n\n​\n\ntrigger_time\n\n​\n\nLong\n\n​\n\n1\n\n​\n\n权益配额重置周期的频率：\n\n​\n\n当\n\ntrigger_unit\n\n为\n\nnever\n\n时，\n\ntrigger_time\n\n的值为 1，且无意义。\n\n​\n\n当\n\ntrigger_unit\n\n为\n\nminute\n\n、\n\nhour\n\n或\n\nday\n\n时，\n\ntrigger_time\n\n表示具体的刷新频率，例如：\n\ntrigger_unit=day\n\n且\n\ntrigger_time = 1\n\n，表示每日刷新配额。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request GET 'https\n\n:\n\n//api.coze.cn/v1/commerce/benefit/limitations?entity_type=enterprise_all_devices&entity_id=SN12345*********&benefit_type=resource_point' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3P****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"has_more\"\n\n:\n\ntrue\n\n,\n\n​\n\n\"page_token\"\n\n:\n\n\"next_page_token_123\"\n\n,\n\n​\n\n\"benefit_infos\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"limit\"\n\n:\n\n100\n\n,\n\n​\n\n\"status\"\n\n:\n\n\"valid\"\n\n,\n\n​\n\n\"ended_at\"\n\n:\n\n1804185600\n\n,\n\n​\n\n\"entity_id\"\n\n:\n\n\"SN12345*********\"\n\n,\n\n​\n\n\"started_at\"\n\n:\n\n1753996800\n\n,\n\n​\n\n\"active_mode\"\n\n:\n\n\"absolute_time\"\n\n,\n\n​\n\n\"entity_type\"\n\n:\n\n\"enterprise_all_devices\"\n\n,\n\n​\n\n\"benefit_type\"\n\n:\n\n\"resource_point\"\n\n,\n\n​\n\n\"trigger_time\"\n\n:\n\n1\n\n,\n\n​\n\n\"trigger_unit\"\n\n:\n\n\"never\"\n\n​\n\n}\n\n​\n\n]\n\n​\n\n},\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20241210152726467C48D89D6DB2****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n创建终端用户权益额度\n\n下一篇\n\n更新终端用户的权益额度",
        "links": []
      },
      "markdown": "- 套餐限制 ：扣子企业旗舰版。 ​\n\n- 角色限制 ：企业超级管理员和管理员可以调用该 API。 ​\n\n- 调用此 API 查询设备权益配额之前，需要确保企业下的设备已成功上报了设备信息，否则会导致权益配额对该设备无法生效，设备信息的配置方法可参考 设置设备信息 。 ​\n\n| 请求方式​ | GET |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/commerce/benefit/limitations​ |\n| 权限​ | listBenefitLimitation​确保调用该接口使用的访问令牌开通了listBenefitLimitation权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 查询已配置的权益额度信息。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 用于指定解析请求正文的格式，表明请求体为 JSON 格式数据。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| entity_type​ | String​ | 必选​ | enterprise_all_devices​ | 权益配额的生效范围，枚举值：​enterprise_all_devices：权益配额对企业下的所有设备生效。​enterprise_all_custom_consumers：权益配额对企业下所有自定义维度的实体生效。​single_device：权益配额对单个设备生效。​single_custom_consumer：权益配额对单个自定义维度的实体生效。​ |\n| entity_id​ | String​ | 可选​ | SN12345*********​ | 该权益配额对哪个实体 ID 生效。​仅在entity_type为single_device或​single_custom_consumer时，需填写entity_id，分别为对应的 Device ID 或 custom consumer ID。​entity_type为其他类型时，无需填写entity_id。​ |\n| benefit_type​ | String​ | 必选​ | resource_point​ | 权益配额类型，枚举值：​resource_point：资源点配额。​voice_unified_duration_system：​语音通话时长配额（系统音色）。​voice_unified_duration_custom：​语音通话时长配额（复刻音色）。​ |\n| status​ | String​ | 可选​ | valid​ | 设备权益的当前状态，枚举值：​valid：（默认值）正常使用。​frozen：已冻结。​ |\n| page_token​ | String​ | 可选​ | -​ | 翻页标识，表示下一页的起始位置。当查询结果超过page_size时，返回的page_token可用于获取下一页数据。​首次请求不填或置空，后续翻页需带上上一次返回的 page_token。​ |\n| page_size​ | Integer​ | 可选​ | 30​ | 查询结果分页展示时，此参数用于设置每页返回的数据量。取值范围为 1~200，默认为 20。​ |\n\n- enterprise_all_devices ：权益配额对企业下的所有设备生效。 ​\n\n- enterprise_all_custom_consumers ：权益配额对企业下所有自定义维度的实体生效。 ​\n\n- single_device ：权益配额对单个设备生效。 ​\n\n- single_custom_consumer ：权益配额对单个自定义维度的实体生效。 ​\n\n- 仅在 entity_type 为 single_device 或 ​\n\n- entity_type 为其他类型时，无需填写entity_id。 ​\n\n- resource_point ：资源点配额。 ​\n\n- voice_unified_duration_system ： ​\n\n- voice_unified_duration_custom ： ​\n\n- valid ：（默认值）正常使用。 ​\n\n- frozen ：已冻结。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0 | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| data​ | Object ofListBenefitLimitationData​ | { \"benefit_id\": 123***, \"benefit_type\": \"resource_point\", \"active_mode\": \"absolute_time\", \"started_at\": 1741708800, \"ended_at\": 1741708800, \"limit\": 100, \"status\": \"valid\" }​ | 接口调用成功时，返回的详细数据信息。​ |\n| detail​ | Object ofResponseDetail​ | -​ | 响应详情信息。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| has_more​ | Boolean​ | true​ | 是否还有下一页。​true：还有下一页。​false：没有下一页。​ |\n| page_token​ | String​ | -​ | 翻页标识。​ |\n| benefit_infos​ | Array ofBenefitInfo​ | -​ | 权益配额列表。​ |\n\n- true：还有下一页。 ​\n\n- false：没有下一页。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| limit​ | Long​ | 100​ | 可用的额度。​如果权益配额类型为resource_point，可用额度的单位为资源点。​如果权益配额类型为voice_unified_duration_system或voice_unified_duration_custom，可用额度的单位为秒。​ |\n| benefit_type​ | String​ | resource_point​ | 权益配额类型，枚举值：​resource_point：资源点配额。​voice_unified_duration_system：​语音通话时长配额（系统音色）。​voice_unified_duration_custom：​语音通话时长配额（复刻音色）。​说明增购AI 智能通话许可（系统音色）的企业，配置的voice_unified_duration_system才生效，购买语音通话时长的详细步骤请参见音视频费用。​增购AI 智能通话许可（复刻音色）的企业，配置的​voice_unified_duration_custom才生效。​未增购 AI 智能通话许可的企业，仅支持配置​resource_point。​​ |\n| active_mode​ | String​ | absolute_time​ | 激活模式，当前仅支持设置为absolute_time模式，即绝对时间。​该模式下，权益生效时间由started_at和ended_at两个时间确定。​ |\n| started_at​ | Long​ | 1753996800​ | 该条配额规则的生效起始时间，Unixtime 时间戳格式，单位为秒。​ |\n| ended_at​ | Long​ | 253402300799​ | 该条配额规则的生效截止时间，Unixtime 时间戳格式，单位为秒。过期后，该条配额规则会失效。​ |\n| entity_id​ | String​ | SN12345*********​ | 该权益配额对哪个实体 ID 生效。仅在entity_type为single_device或​single_custom_consumer时，会返回对应的实体 ID。​ |\n| status​ | String​ | valid​ | 设备权益的当前状态，枚举值：​valid：正常使用。​frozen：已冻结。​ |\n| entity_type​ | String​ | enterprise_all_devices​ | 权益配额的生效范围，枚举值：​enterprise_all_devices：权益配额对企业下的所有设备生效。​enterprise_all_custom_consumers：权益配额对企业下所有自定义维度的实体生效。若某设备在设备信息中未上报 custom_consumers，则该设备无法生效权益配额。​single_device：权益配额对单个设备生效。​single_custom_consumer：权益配额对单个自定义维度的实体生效。​ |\n| trigger_unit​ | String​ | day​ | 权益可用额度的重置周期，即额度按指定时间间隔恢复或重新计算。枚举值：​never：（默认）不重置额度，适用于设置累计可用额度上限。​minute：以分钟为周期重置额度。​hour：以小时为周期重置额度。​day：以天为周期重置额度。​ |\n| trigger_time​ | Long​ | 1​ | 权益配额重置周期的频率：​当trigger_unit为never时，trigger_time的值为 1，且无意义。​当trigger_unit为minute、hour或day时，trigger_time表示具体的刷新频率，例如：trigger_unit=day且trigger_time = 1，表示每日刷新配额。​ |\n\n- 如果权益配额类型为 resource_point ，可用额度的单位为资源点。 ​\n\n- 如果权益配额类型为 voice_unified_duration_system 或 voice_unified_duration_custom ，可用额度的单位为秒。 ​\n\n- resource_point ：资源点配额。 ​\n\n- voice_unified_duration_system ： ​\n\n- voice_unified_duration_custom ： ​\n\n- 增购 AI 智能通话许可（系统音色） 的企业，配置的 voice_unified_duration_system 才生效，购买语音通话时长的详细步骤请参见 音视频费用 。 ​\n\n- 增购 AI 智能通话许可（复刻音色） 的企业，配置的 ​\n\n- 未增购 AI 智能通话许可的企业，仅支持配置 ​\n\n- valid ：正常使用。 ​\n\n- frozen ：已冻结。 ​\n\n- enterprise_all_devices ：权益配额对企业下的所有设备生效。 ​\n\n- enterprise_all_custom_consumers ：权益配额对企业下所有自定义维度的实体生效。若某设备在设备信息中未上报 custom_consumers，则该设备无法生效权益配额。 ​\n\n- single_device ：权益配额对单个设备生效。 ​\n\n- single_custom_consumer ：权益配额对单个自定义维度的实体生效。 ​\n\n- never ：（默认）不重置额度，适用于设置累计可用额度上限。 ​\n\n- minute ：以分钟为周期重置额度。 ​\n\n- hour ：以小时为周期重置额度。 ​\n\n- day ：以天为周期重置额度。 ​\n\n- 当 trigger_unit 为 never 时， trigger_time 的值为 1，且无意义。 ​\n\n- 当 trigger_unit 为 minute 、 hour 或 day 时， trigger_time 表示具体的刷新频率，例如： trigger_unit=day 且 trigger_time = 1 ，表示每日刷新配额。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/update_device_quotas",
      "title": "更新终端用户的权益额度",
      "content": {
        "sections": [],
        "full_text": "更新终端用户的权益额度\n\n更新终端用户的权益额度。当你\n\n创建设备的权益额度\n\n后，可以调用本 API 更新相关额度。\n\n​\n\n说明\n\n套餐限制\n\n：扣子企业旗舰版。\n\n​\n\n角色限制\n\n：企业超级管理员和管理员可以调用该 API。\n\n​\n\n调用此 API 更新设备权益额度之前，需要确保企业下的设备已成功上报了设备信息，否则会导致权益额度对该设备无法生效，设备信息的配置方法可参考\n\n设置设备信息\n\n。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPUT\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/commerce/benefit/limitations/:benefit_id\n\n​\n\n权限\n\n​\n\nupdateBenefitLimitation\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nupdateBenefitLimitation\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n更新终端用户的权益额度。\n\n​\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n用于指定解析请求正文的格式，表明请求体为 JSON 格式数据。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nbenefit_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n123\n\n​\n\n权益 ID。你可以在\n\n创建设备的权益额度\n\n的返回参数中获取对应的权益 ID 的值。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nactive_mode\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nabsolute_time\n\n​\n\n激活模式，当前仅支持设置为\n\nabsolute_time\n\n模式，即绝对时间。\n\n​\n\n该模式下，权益生效时间由\n\nstarted_at\n\n和\n\nended_at\n\n两个时间确定。\n\n​\n\nstarted_at\n\n​\n\nLong\n\n​\n\n可选\n\n​\n\n1743213600\n\n​\n\n该条配额规则的生效起始时间，Unixtime 时间戳格式，单位为秒。\n\n​\n\nended_at\n\n​\n\nLong\n\n​\n\n可选\n\n​\n\n1743386400\n\n​\n\n该条配额规则的生效截止时间，Unixtime 时间戳格式，单位为秒。过期后，该条配额规则会失效。\n\n​\n\nlimit\n\n​\n\nLong\n\n​\n\n可选\n\n​\n\n100\n\n​\n\n可用的资源点额度。\n\n​\n\nstatus\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nvalid\n\n​\n\n设备权益的当前状态，枚举值：\n\n​\n\nvalid：（默认值）正常使用。\n\n​\n\nfrozen：已冻结。\n\n​\n\ntrigger_unit\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nday\n\n​\n\n权益可用额度的重置周期，即额度按指定时间间隔恢复或重新计算：\n\n​\n\nnever：不重置额度，适用于设置累计可用额度上限。\n\n​\n\nminute：以分钟为周期重置额度。\n\n​\n\nhour：以小时为周期重置额度。\n\n​\n\nday：以天为周期重置额度。\n\n​\n\ntrigger_time\n\n​\n\nLong\n\n​\n\n可选\n\n​\n\n1\n\n​\n\n权益额度重置周期的频率：\n\n​\n\n当\n\ntrigger_unit\n\n为\n\nnever\n\n时，\n\ntrigger_time\n\n的值为 1，且无意义。\n\n​\n\n当\n\ntrigger_unit\n\n为\n\nminute\n\n、\n\nhour\n\n或\n\nday\n\n时，\n\ntrigger_time\n\n表示具体的刷新频率，例如：\n\ntrigger_unit=day\n\n且\n\ntrigger_time = 1\n\n，表示每日刷新配额。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n-\n\n​\n\n响应详情信息。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request PUT 'https\n\n:\n\n//api.coze.cn/v1/commerce/benefit/limitations/12345***' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n{\n\n​\n\n\"benefit_id\"\n\n:\n\n\"12345***\"\n\n,\n\n​\n\n\"active_mode\"\n\n:\n\n\"absolute_time\"\n\n,\n\n​\n\n\"started_at\"\n\n:\n\n1741708800\n\n,\n\n​\n\n\"ended_at\"\n\n:\n\n1741708800\n\n,\n\n​\n\n\"limit\"\n\n:\n\n100\n\n,\n\n​\n\n\"status\"\n\n:\n\n\"valid\"\n\n​\n\n}\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"benefit_id\"\n\n:\n\n\"12345***\"\n\n,\n\n​\n\n\"benefit_type\"\n\n:\n\n\"resource_point\"\n\n,\n\n​\n\n\"active_mode\"\n\n:\n\n\"absolute_time\"\n\n,\n\n​\n\n\"started_at\"\n\n:\n\n1741708800\n\n,\n\n​\n\n\"ended_at\"\n\n:\n\n1741708800\n\n,\n\n​\n\n\"limit\"\n\n:\n\n100\n\n,\n\n​\n\n\"status\"\n\n:\n\n\"valid\"\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n查询终端用户的权益配额\n\n下一篇\n\n导出终端用户账单",
        "links": []
      },
      "markdown": "- 套餐限制 ：扣子企业旗舰版。 ​\n\n- 角色限制 ：企业超级管理员和管理员可以调用该 API。 ​\n\n- 调用此 API 更新设备权益额度之前，需要确保企业下的设备已成功上报了设备信息，否则会导致权益额度对该设备无法生效，设备信息的配置方法可参考 设置设备信息 。 ​\n\n| 请求方式​ | PUT |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/commerce/benefit/limitations/:benefit_id​ |\n| 权限​ | updateBenefitLimitation​确保调用该接口使用的访问令牌开通了updateBenefitLimitation权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 更新终端用户的权益额度。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 用于指定解析请求正文的格式，表明请求体为 JSON 格式数据。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| benefit_id​ | String​ | 可选​ | 123​ | 权益 ID。你可以在创建设备的权益额度的返回参数中获取对应的权益 ID 的值。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| active_mode​ | String​ | 可选​ | absolute_time​ | 激活模式，当前仅支持设置为absolute_time模式，即绝对时间。​该模式下，权益生效时间由started_at和ended_at两个时间确定。​ |\n| started_at​ | Long​ | 可选​ | 1743213600​ | 该条配额规则的生效起始时间，Unixtime 时间戳格式，单位为秒。​ |\n| ended_at​ | Long​ | 可选​ | 1743386400​ | 该条配额规则的生效截止时间，Unixtime 时间戳格式，单位为秒。过期后，该条配额规则会失效。​ |\n| limit​ | Long​ | 可选​ | 100​ | 可用的资源点额度。​ |\n| status​ | String​ | 可选​ | valid​ | 设备权益的当前状态，枚举值：​valid：（默认值）正常使用。​frozen：已冻结。​ |\n| trigger_unit​ | String​ | 可选​ | day​ | 权益可用额度的重置周期，即额度按指定时间间隔恢复或重新计算：​never：不重置额度，适用于设置累计可用额度上限。​minute：以分钟为周期重置额度。​hour：以小时为周期重置额度。​day：以天为周期重置额度。​ |\n| trigger_time​ | Long​ | 可选​ | 1​ | 权益额度重置周期的频率：​当trigger_unit为never时，trigger_time的值为 1，且无意义。​当trigger_unit为minute、hour或day时，trigger_time表示具体的刷新频率，例如：trigger_unit=day且trigger_time = 1，表示每日刷新配额。​ |\n\n- valid：（默认值）正常使用。 ​\n\n- frozen：已冻结。 ​\n\n- never：不重置额度，适用于设置累计可用额度上限。 ​\n\n- minute：以分钟为周期重置额度。 ​\n\n- hour：以小时为周期重置额度。 ​\n\n- day：以天为周期重置额度。 ​\n\n- 当 trigger_unit 为 never 时， trigger_time 的值为 1，且无意义。 ​\n\n- 当 trigger_unit 为 minute 、 hour 或 day 时， trigger_time 表示具体的刷新频率，例如： trigger_unit=day 且 trigger_time = 1 ，表示每日刷新配额。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | -​ | 响应详情信息。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/create_bill_task",
      "title": "导出终端用户账单",
      "content": {
        "sections": [],
        "full_text": "导出终端用户账单\n\n导出终端用户的账单，用于\n\n查看\n\n终端用户的用量明细，包括：语音识别 ASR 的音频时长、语音合成 TTS 的字符数、语音合成 TTS 的对话次数、RTC 通话时长、金额等信息。\n\n​\n\n说明\n\n仅扣子企业旗舰版的超级管理员和管理员可以调用该 API。\n\n​\n\n调用此 API 之前，需要确保企业下的设备已成功上报了设备信息，设备信息的配置方法可参考\n\n设置设备信息\n\n。\n\n​\n\n​\n\n接口描述\n\n​\n\n调用此 API 后，后台将创建一个导出任务并返回任务 ID 和状态，你可以通过\n\n查询账单文件\n\n获取账单下载链接。\n\n​\n\n仅支持按天查询，例如查询 2025 年 3 月 27 日 00:00:00 至 23:59:59 的账单。查询周期默认为当天的 0 时至 24 时。\n\n​\n\n该 API 为异步接口，若账单数据量较大，可能需等待约 1 分钟才能获取账单 URL。\n\n​\n\n下载链接的有效期为 7 天，过期后需要重新导出账单。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/commerce/benefit/bill_tasks\n\n​\n\n权限\n\n​\n\ncreateBillDownloadTask\n\n​\n\n确保调用该接口使用的个人令牌开通了\n\ncreateBillDownloadTask\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n导出终端用户的账单。\n\n​\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。可在扣子编程生成，具体生成步骤及相关信息，详见准备工作文档。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n用于指定解析请求正文的格式，表明请求体为 JSON 格式数据。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nstarted_at\n\n​\n\nLong\n\n​\n\n可选\n\n​\n\n1743004800\n\n​\n\n待导出账单的开始时间，格式为 Unix 时间戳，单位为秒。\n\n​\n\n仅支持设置为某天 0 点整的时间戳，例如，2025-03-27 00:00:00。如果填写的时间戳非 00:00:00，系统将自动调整为当天 00:00:00 的时间戳。\n\n​\n\n说明\n\n暂不支持导出当日账单，因此起始时间不能设置为当天的时间。\n\n​\n\n只能导出 2025-03-13 及之后的数据。\n\n​\n\n​\n\nended_at\n\n​\n\nLong\n\n​\n\n可选\n\n​\n\n1743091199\n\n​\n\n待导出账单的截止时间，格式为 Unix 时间戳，单位为秒。\n\n​\n\n仅支持设置为某天 23:59:59 的时间戳，例如，2025-03-27 23:59:59。如果填写的时间戳非 23:59:59，系统将自动调整为当天 23:59:59 的时间戳。\n\n​\n\n说明\n\n暂不支持导出当日账单，因此起始时间不能设置为当天的时间。\n\n​\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndata\n\n​\n\nObject of\n\nBillTaskInfo\n\n​\n\n\\\n\n​\n\n接口调用成功时返回的任务详细信息。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\n​\n\nBillTaskInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nstatus\n\n​\n\nString\n\n​\n\nrunning\n\n​\n\n任务当前状态：\n\n​\n\ninit：任务初始化中。\n\n​\n\nrunning：账单数据生成中。\n\n​\n\nsucceed：账单已生成，可下载导出文件。\n\n​\n\nfailed：任务执行失败，可结合 msg 字段查看失败原因。\n\n​\n\ntask_id\n\n​\n\nString\n\n​\n\n123\n\n​\n\n账单导出任务的唯一标识 ID，用于后续查询任务状态或获取导出文件。\n\n​\n\nended_at\n\n​\n\nLong\n\n​\n\n1743091200\n\n​\n\n账单上的截止时间。\n\n​\n\nfile_urls\n\n​\n\nArray of String\n\n​\n\n[\"\n\nhttps://example.com/bill_1.csv\n\n\", \"\n\nhttps://example.com/bill_2.csv\n\n\"]\n\n​\n\n账单导出文件的链接列表，任务完成后，可通过这些链接下载账单文件。\n\n​\n\n如果账单中的数据量过大，扣子编程会将数据拆分为多个文件，每个文件最多包含 50 万行数据。\n\n​\n\n说明\n\n账单文件中的字段说明请参见\n\n账单推送回调事件\n\n。\n\n​\n\n​\n\ncreated_at\n\n​\n\nLong\n\n​\n\n1743213605\n\n​\n\n任务的创建时间，Unix 时间戳，单位为秒。\n\n​\n\nexpires_at\n\n​\n\nLong\n\n​\n\n1743177600\n\n​\n\n任务的过期时间，默认账单将保留 7 天，超过此时间后，无法再下载账单文件。Unix 时间戳，单位为秒。\n\n​\n\nstarted_at\n\n​\n\nLong\n\n​\n\n1743004800\n\n​\n\n账单上的起始时间。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request POST 'https\n\n:\n\n//api.coze.cn/v1/commerce/benefit/bill_tasks' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n{\n\n​\n\n\"started_at\"\n\n:\n\n1743004800\n\n,\n\n​\n\n\"ended_at\"\n\n:\n\n1743091200\n\n​\n\n}\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"task_id\"\n\n:\n\n123\n\n***\n\n,\n\n​\n\n\"started_at\"\n\n:\n\n1743004800\n\n,\n\n​\n\n\"ended_at\"\n\n:\n\n1743091200\n\n,\n\n​\n\n\"created_at\"\n\n:\n\n1743213605\n\n,\n\n​\n\n\"expires_at\"\n\n:\n\n1743177600\n\n,\n\n​\n\n\"file_urls\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"status\"\n\n:\n\n\"running\"\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n更新终端用户的权益额度\n\n下一篇\n\n查询账单文件",
        "links": []
      },
      "markdown": "- 仅扣子企业旗舰版的超级管理员和管理员可以调用该 API。 ​\n\n- 调用此 API 之前，需要确保企业下的设备已成功上报了设备信息，设备信息的配置方法可参考 设置设备信息 。 ​\n\n- 调用此 API 后，后台将创建一个导出任务并返回任务 ID 和状态，你可以通过 查询账单文件 获取账单下载链接。 ​\n\n- 仅支持按天查询，例如查询 2025 年 3 月 27 日 00:00:00 至 23:59:59 的账单。查询周期默认为当天的 0 时至 24 时。 ​\n\n- 该 API 为异步接口，若账单数据量较大，可能需等待约 1 分钟才能获取账单 URL。 ​\n\n- 下载链接的有效期为 7 天，过期后需要重新导出账单。 ​\n\n| 请求方式​ | POST |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/commerce/benefit/bill_tasks​ |\n| 权限​ | createBillDownloadTask​确保调用该接口使用的个人令牌开通了createBillDownloadTask权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 导出终端用户的账单。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $Access_Token​ | 用于验证客户端身份的访问令牌。可在扣子编程生成，具体生成步骤及相关信息，详见准备工作文档。​ |\n| Content-Type​ | application/json​ | 用于指定解析请求正文的格式，表明请求体为 JSON 格式数据。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| started_at​ | Long​ | 可选​ | 1743004800​ | 待导出账单的开始时间，格式为 Unix 时间戳，单位为秒。​仅支持设置为某天 0 点整的时间戳，例如，2025-03-27 00:00:00。如果填写的时间戳非 00:00:00，系统将自动调整为当天 00:00:00 的时间戳。​说明暂不支持导出当日账单，因此起始时间不能设置为当天的时间。​只能导出 2025-03-13 及之后的数据。​​ |\n| ended_at​ | Long​ | 可选​ | 1743091199​ | 待导出账单的截止时间，格式为 Unix 时间戳，单位为秒。​仅支持设置为某天 23:59:59 的时间戳，例如，2025-03-27 23:59:59。如果填写的时间戳非 23:59:59，系统将自动调整为当天 23:59:59 的时间戳。​说明暂不支持导出当日账单，因此起始时间不能设置为当天的时间。​​ |\n\n- 暂不支持导出当日账单，因此起始时间不能设置为当天的时间。 ​\n\n- 只能导出 2025-03-13 及之后的数据。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| data​ | Object ofBillTaskInfo​ | \\​ | 接口调用成功时返回的任务详细信息。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| status​ | String​ | running​ | 任务当前状态：​init：任务初始化中。​running：账单数据生成中。​succeed：账单已生成，可下载导出文件。​failed：任务执行失败，可结合 msg 字段查看失败原因。​ |\n| task_id​ | String​ | 123​ | 账单导出任务的唯一标识 ID，用于后续查询任务状态或获取导出文件。​ |\n| ended_at​ | Long​ | 1743091200​ | 账单上的截止时间。​ |\n| file_urls​ | Array of String​ | [\"https://example.com/bill_1.csv\", \"https://example.com/bill_2.csv\"]​ | 账单导出文件的链接列表，任务完成后，可通过这些链接下载账单文件。​如果账单中的数据量过大，扣子编程会将数据拆分为多个文件，每个文件最多包含 50 万行数据。​说明账单文件中的字段说明请参见账单推送回调事件。​​ |\n| created_at​ | Long​ | 1743213605​ | 任务的创建时间，Unix 时间戳，单位为秒。​ |\n| expires_at​ | Long​ | 1743177600​ | 任务的过期时间，默认账单将保留 7 天，超过此时间后，无法再下载账单文件。Unix 时间戳，单位为秒。​ |\n| started_at​ | Long​ | 1743004800​ | 账单上的起始时间。​ |\n\n- init：任务初始化中。 ​\n\n- running：账单数据生成中。 ​\n\n- succeed：账单已生成，可下载导出文件。 ​\n\n- failed：任务执行失败，可结合 msg 字段查看失败原因。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/billing_file",
      "title": "查询账单文件",
      "content": {
        "sections": [],
        "full_text": "查询账单文件\n\n查询账单文件。\n\n​\n\n接口描述\n\n​\n\n当你\n\n导出设备账单\n\n后，可以通过本 API 查询账单文件，获取对应账单文件的 URL 链接，以便下载或查看已导出的账单数据。你可以通过账单文件\n\n查看\n\n智能硬件\n\n设备\n\n的用量明细，包括：语音识别 ASR 的音频时长、语音合成 TTS 的字符数、语音合成 TTS 的对话次数、RTC 通话时长、金额等信息。\n\n​\n\n说明\n\n仅扣子企业旗舰版的超级管理员和管理员可以调用该 API。\n\n​\n\n调用此 API 之前，需要确保企业下的设备已成功上报了设备信息，设备信息的配置方法可参考\n\n设置设备信息\n\n。\n\n​\n\n​\n\n接口限制\n\n​\n\n账单下载链接的有效期为 7 天，过期后需要调用\n\n导出设备账单\n\nAPI 重新导出账单。\n\n​\n\n只有当任务状态为\n\nsucceed\n\n时，才会返回账单的下载链接。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/commerce/benefit/bill_tasks\n\n​\n\n权限\n\n​\n\nlistBillDownloadTask\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nlistBillDownloadTask\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n查询账单文件。\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。可在扣子编程生成，具体生成步骤及相关信息，详见准备工作文档。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n用于指定解析请求正文的格式，表明请求体为 JSON 格式数据。\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ntask_ids\n\n​\n\nArray of String\n\n​\n\n可选\n\n​\n\n[123, 456]\n\n​\n\n账单导出任务 ID 列表，最多填写 100 个任务 ID。\n\n​\n\n若不填写该参数，默认查询最近 7 天内创建的账单导出任务。\n\n​\n\npage_num\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n1\n\n​\n\n用于设置查询结果分页展示时的页码，最小值为 1，默认值为 1。\n\n​\n\npage_size\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n20\n\n​\n\n用于设置查询结果分页展示时每页返回的数据量，取值范围为 1 ~ 200，默认值为 20。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndata\n\n​\n\nObject of\n\nBillBusinessData\n\n​\n\n-\n\n​\n\n接口调用成功时返回的任务详细信息。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\n​\n\nBillBusinessData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ntotal\n\n​\n\nInteger\n\n​\n\n12\n\n​\n\n当前查询条件下的总账单任务数。\n\n​\n\ntask_infos\n\n​\n\nArray of\n\nBillTaskInfo\n\n​\n\n-\n\n​\n\n包含多个账单导出任务信息的列表，每个任务信息包含任务 ID、时间范围、文件 URL 等详细内容。\n\n​\n\n​\n\nBillTaskInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nstatus\n\n​\n\nString\n\n​\n\nrunning\n\n​\n\n任务当前状态：\n\n​\n\ninit：任务初始化中。\n\n​\n\nrunning：账单数据生成中。\n\n​\n\nsucceed：账单已生成，可下载导出文件。\n\n​\n\nfailed：任务执行失败，可结合 msg 字段查看失败原因。\n\n​\n\ntask_id\n\n​\n\nString\n\n​\n\n123\n\n​\n\n账单导出任务的唯一标识 ID，用于后续查询任务状态或获取导出文件。\n\n​\n\nended_at\n\n​\n\nLong\n\n​\n\n1743091200\n\n​\n\n账单上的截止时间。\n\n​\n\nfile_urls\n\n​\n\nArray of String\n\n​\n\n[\"\n\nhttps://example.com/bill_1.csv\n\n\", \"\n\nhttps://example.com/bill_2.csv\n\n\"]\n\n​\n\n账单导出文件的链接列表，任务完成后，可通过这些链接下载账单文件。\n\n​\n\n如果账单中的数据量过大，扣子编程会将数据拆分为多个文件，每个文件最多包含 50 万行数据。\n\n​\n\n说明\n\n账单文件中的字段说明请参见\n\n账单推送回调事件\n\n。\n\n​\n\n​\n\ncreated_at\n\n​\n\nLong\n\n​\n\n1743213605\n\n​\n\n任务的创建时间，Unix 时间戳，单位为秒。\n\n​\n\nexpires_at\n\n​\n\nLong\n\n​\n\n1743177600\n\n​\n\n任务的过期时间，默认账单将保留 7 天，超过此时间后，无法再下载账单文件。Unix 时间戳，单位为秒。\n\n​\n\nstarted_at\n\n​\n\nLong\n\n​\n\n1743004800\n\n​\n\n账单上的起始时间。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\ncurl --location --request GET 'https\n\n:\n\n//api.coze.cn/v1/commerce/benefit/bill_tasks?page_num=1&page_size=50' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"total\"\n\n:\n\n1\n\n,\n\n​\n\n\"task_infos\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"task_id\"\n\n:\n\n123\n\n***\n\n,\n\n​\n\n\"started_at\"\n\n:\n\n1743004800\n\n,\n\n​\n\n\"ended_at\"\n\n:\n\n1743091200\n\n,\n\n​\n\n\"created_at\"\n\n:\n\n1743213605\n\n,\n\n​\n\n\"expires_at\"\n\n:\n\n1743177600\n\n,\n\n​\n\n\"file_urls\"\n\n:\n\n[\n\n\"https://example.com/bill_1.csv\"\n\n,\n\n\"https://example.com/bill_2.csv\"\n\n],\n\n​\n\n\"status\"\n\n:\n\n\"succeed\"\n\n​\n\n}\n\n​\n\n]\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n导出终端用户账单\n\n下一篇\n\n查询套餐权益",
        "links": []
      },
      "markdown": "- 仅扣子企业旗舰版的超级管理员和管理员可以调用该 API。 ​\n\n- 调用此 API 之前，需要确保企业下的设备已成功上报了设备信息，设备信息的配置方法可参考 设置设备信息 。 ​\n\n- 账单下载链接的有效期为 7 天，过期后需要调用 导出设备账单 API 重新导出账单。 ​\n\n- 只有当任务状态为 succeed 时，才会返回账单的下载链接。 ​\n\n| 请求方式​ | GET |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/commerce/benefit/bill_tasks​ |\n| 权限​ | listBillDownloadTask​确保调用该接口使用的访问令牌开通了listBillDownloadTask权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 查询账单文件。 |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $Access_Token​ | 用于验证客户端身份的访问令牌。可在扣子编程生成，具体生成步骤及相关信息，详见准备工作文档。​ |\n| Content-Type​ | application/json​ | 用于指定解析请求正文的格式，表明请求体为 JSON 格式数据。 |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| task_ids​ | Array of String​ | 可选​ | [123, 456]​ | 账单导出任务 ID 列表，最多填写 100 个任务 ID。​若不填写该参数，默认查询最近 7 天内创建的账单导出任务。​ |\n| page_num​ | Integer​ | 可选​ | 1​ | 用于设置查询结果分页展示时的页码，最小值为 1，默认值为 1。​ |\n| page_size​ | Integer​ | 可选​ | 20​ | 用于设置查询结果分页展示时每页返回的数据量，取值范围为 1 ~ 200，默认值为 20。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0 | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| data​ | Object ofBillBusinessData​ | -​ | 接口调用成功时返回的任务详细信息。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| total​ | Integer​ | 12​ | 当前查询条件下的总账单任务数。​ |\n| task_infos​ | Array ofBillTaskInfo​ | -​ | 包含多个账单导出任务信息的列表，每个任务信息包含任务 ID、时间范围、文件 URL 等详细内容。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| status​ | String​ | running​ | 任务当前状态：​init：任务初始化中。​running：账单数据生成中。​succeed：账单已生成，可下载导出文件。​failed：任务执行失败，可结合 msg 字段查看失败原因。​ |\n| task_id​ | String​ | 123​ | 账单导出任务的唯一标识 ID，用于后续查询任务状态或获取导出文件。​ |\n| ended_at​ | Long​ | 1743091200​ | 账单上的截止时间。​ |\n| file_urls​ | Array of String​ | [\"https://example.com/bill_1.csv\", \"https://example.com/bill_2.csv\"]​ | 账单导出文件的链接列表，任务完成后，可通过这些链接下载账单文件。​如果账单中的数据量过大，扣子编程会将数据拆分为多个文件，每个文件最多包含 50 万行数据。​说明账单文件中的字段说明请参见账单推送回调事件。​​ |\n| created_at​ | Long​ | 1743213605​ | 任务的创建时间，Unix 时间戳，单位为秒。​ |\n| expires_at​ | Long​ | 1743177600​ | 任务的过期时间，默认账单将保留 7 天，超过此时间后，无法再下载账单文件。Unix 时间戳，单位为秒。​ |\n| started_at​ | Long​ | 1743004800​ | 账单上的起始时间。​ |\n\n- init：任务初始化中。 ​\n\n- running：账单数据生成中。 ​\n\n- succeed：账单已生成，可下载导出文件。 ​\n\n- failed：任务执行失败，可结合 msg 字段查看失败原因。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/get_benefit",
      "title": "查询套餐权益",
      "content": {
        "sections": [],
        "full_text": "查询套餐权益\n\n查询当前账号的套餐权益信息。\n\n​\n\n接口描述\n\n​\n\n你可以通过本 API 查询当前账号的以下套餐权益信息：\n\n​\n\n所属的套餐类型。\n\n​\n\n扩容管理页面中 API 扩容的信息，包括套餐默认的 API QPS、扩容新增的 API QPS 额度，以及当前实际生效的 API QPS 额度。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n套餐权益内通过 MCP 方式调用付费插件的次数限制。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/commerce/benefit/benefits/get\n\n​\n\n​\n\n权限\n\n​\n\ngetBenefit\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\ngetBenefit\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n查询套餐权益。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nbenefit_type_list\n\n​\n\nArray of String\n\n​\n\n可选\n\n​\n\napi_run_qps,call_tool_limit\n\n​\n\n权益类型列表，多个类型用逗号分隔。支持的权益类型如下：\n\n​\n\napi_run_qps\n\n： API 扩容的信息，你需要在\n\nresource_id\n\n中传入待查询的 API 类型。\n\n​\n\ncall_tool_limit\n\n：通过 MCP 方式调用付费插件的次数限制。\n\n​\n\n默认为空，即返回订阅的套餐类型，不含额外扩容的权益。\n\n​\n\nresource_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nplugin\n\n​\n\nAPI 类型，当\n\nbenefit_type_list\n\n为\n\napi_run_qps\n\n时，需要配置该参数。当前仅支持查询可扩容的 API 类型。枚举值：\n\n​\n\nplugin\n\n：插件相关 API 的 QPS 限制。\n\n​\n\nchat\n\n：对话相关的 API 的 QPS 限制。\n\n​\n\nworkflow\n\n：工作流相关的 API 的 QPS 限制。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\ndata\n\n​\n\nObject of\n\nBenefitData\n\n​\n\n\\\n\n​\n\n用户订阅的套餐类型和权益额度的详细信息。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\n​\n\nBenefitData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nbasic_info\n\n​\n\nObject of\n\nBasicInfo\n\n​\n\n{\"user_level\":\"enterprise\"}\n\n​\n\n用户订阅的扣子套餐类型。\n\n​\n\nbenefit_info\n\n​\n\nArray of\n\nBenefitInfo\n\n​\n\n[{\"basic\":{\"status\":\"valid\",\"item_info\":{\"used\":100,\"total\":1000,\"end_at\":1735689600,\"start_at\":1735689600,\"strategy\":\"by_quota\"}},\"extra\":[{\"status\":\"valid\",\"item_info\":{\"used\":50,\"total\":500,\"end_at\":1735689600,\"start_at\":1735689600,\"strategy\":\"by_quota\"}}],\"effective\":{\"status\":\"valid\",\"item_info\":{\"used\":200,\"total\":2000,\"end_at\":1735689600,\"start_at\":1735689600,\"strategy\":\"by_quota\"}},\"resource_id\":\"plugin\",\"benefit_type\":\"resource_point\"}]\n\n​\n\n权益额度，包含用户当前享有的各项权益详情，如默认的权益、扩容权益及实际生效的权益等。\n\n​\n\n​\n\nBasicInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nuser_level\n\n​\n\nString\n\n​\n\nenterprise\n\n​\n\n用户订阅的扣子套餐类型，枚举值：\n\n​\n\nfree\n\n：个人免费版。\n\n​\n\npro_personal\n\n：个人付费版。\n\n​\n\nteam\n\n：企业标准版。\n\n​\n\nenterprise\n\n：企业旗舰版。\n\n​\n\n​\n\nBenefitInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nbasic\n\n​\n\nObject of\n\nBenefitTypeInfoItem\n\n​\n\n{\"status\":\"valid\",\"item_info\":{\"used\":100,\"total\":1000,\"end_at\":1735689600,\"start_at\":1735689600,\"strategy\":\"by_quota\"}}\n\n​\n\n默认的权益信息，包含权益的状态、用量及权益配额 ID。\n\n​\n\nextra\n\n​\n\nArray of\n\nBenefitTypeInfoItem\n\n​\n\n[{\"status\":\"valid\",\"item_info\":{\"used\":50,\"total\":500,\"end_at\":1735689600,\"start_at\":1735689600,\"strategy\":\"by_quota\"}]\n\n​\n\n资源扩容新增的权益额度。如果未购买扩容服务，则该值为空。\n\n​\n\neffective\n\n​\n\nObject of\n\nBenefitTypeInfoItem\n\n​\n\n{\"status\":\"valid\",\"item_info\":{\"used\":200,\"total\":2000,\"end_at\":1735689600,\"start_at\":1735689600,\"strategy\":\"by_quota\"}}\n\n​\n\n当前实际生效的权益额度。\n\n​\n\nresource_id\n\n​\n\nString\n\n​\n\n753754678968821***\n\n​\n\n当前权益对应的资源 ID。当前仅如下 API 类型支持扩容。枚举值：\n\n​\n\nplugin\n\n：插件相关 API 的 QPS 限制。对应的 API 包括\n\n调用插件工具\n\n、\n\n询插件详情\n\n。\n\n​\n\nchat\n\n：对话相关 API 的 QPS 限制。对应的 API 包括：\n\n发起对话\n\n、\n\n查看对话详情\n\n、\n\n查看对话消息详情\n\n。\n\n​\n\nworkflow\n\n：工作流相关 API 的 QPS 限制。对应的 API 包括：\n\n执行工作流\n\n、\n\n执行工作流（流式响应）\n\n、\n\n执行对话流\n\n、\n\n查询工作流异步执行结果\n\n、\n\n查询输出节点的执行结果\n\n。\n\n​\n\nbenefit_type\n\n​\n\nString\n\n​\n\nresource_point\n\n​\n\n权益配额类型，枚举值：\n\n​\n\napi_run_qps\n\n：扩容管理页面中扩容的 API QPS。\n\n​\n\ncall_tool_limit\n\n：通过 MCP 方式调用付费插件的次数限制。\n\n​\n\n​\n\nBenefitTypeInfoItem\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nstatus\n\n​\n\nString\n\n​\n\nvalid\n\n​\n\n权益状态，表示当前权益的使用状态。枚举值：\n\n​\n\nvalid\n\n：正常使用。\n\n​\n\nfrozen\n\n：冻结使用。\n\n​\n\ncancel\n\n：取消。\n\n​\n\npending\n\n：待生效。\n\n​\n\ninvalid\n\n：不可用。\n\n​\n\nauditing\n\n：审核中。\n\n​\n\nexpired\n\n：已过期。\n\n​\n\nitem_info\n\n​\n\nObject of\n\nCommonCounter\n\n​\n\n{\"used\":100,\"total\":1000,\"end_at\":1735689600,\"start_at\":1735689600,\"strategy\":\"by_quota\"}\n\n​\n\n当前权益的使用量、总量、生效时间及资源使用策略。\n\n​\n\n​\n\nCommonCounter\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nused\n\n​\n\nDouble\n\n​\n\n100\n\n​\n\n当\n\nstrategy\n\n为\n\nByQuota\n\n时，表示当前权益的已使用量。若权益无相关用量数据则返回\n\n0\n\n。\n\n​\n\ntotal\n\n​\n\nDouble\n\n​\n\n1000\n\n​\n\n当\n\nstrategy\n\n为\n\nByQuota\n\n时，表示当前权益的用量上限。\n\n​\n\n当\n\nstrategy\n\n为\n\nunlimit\n\n或\n\nforbidden\n\n时，该值为 1。\n\n​\n\nend_at\n\n​\n\nLong\n\n​\n\n1735689600\n\n​\n\n权益的结束生效时间，以 Unix 时间戳格式表示，单位为秒。\n\n​\n\nstart_at\n\n​\n\nLong\n\n​\n\n1735689600\n\n​\n\n权益的开始生效时间，以 Unix 时间戳格式表示，单位为秒。\n\n​\n\nstrategy\n\n​\n\nString\n\n​\n\nby_quota\n\n​\n\n资源使用策略，表示当前权益的资源使用方式。枚举值：\n\n​\n\nunlimit\n\n：不限制用量。\n\n​\n\nforbidden\n\n：不支持调用，该套餐不支持该权益。\n\n​\n\nby_quota\n\n：按额度限制使用。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n查询套餐类型\n\n查询插件 API QPS限制\n\n查询多个权益类型\n\n​\n\nJSON\n\n复制\n\ncurl --location --request GET 'https\n\n:\n\n//api.coze.cn/v1/commerce/benefit/benefits/get' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_OYDacMzM3WyOWV3Dtj2bHRMymzxP****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n​\n\n​\n\n返回示例\n\n​\n\n查询套餐类型\n\n查询插件 API QPS限制\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"basic_info\"\n\n:\n\n{\n\n​\n\n\"user_level\"\n\n:\n\n\"enterprise\"\n\n​\n\n}\n\n​\n\n},\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20251023180624A0C1***\"\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n​\n\n}\n\n​\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n查询账单文件\n\n下一篇\n\n账单推送回调事件",
        "links": []
      },
      "markdown": "- 所属的套餐类型。 ​\n\n- 扩容管理页面中 API 扩容的信息，包括套餐默认的 API QPS、扩容新增的 API QPS 额度，以及当前实际生效的 API QPS 额度。 ​\n\n- ​ ​ ​ ​ ​\n\n- 套餐权益内通过 MCP 方式调用付费插件的次数限制。 ​\n\n| 请求方式​ | GET​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/commerce/benefit/benefits/get​​ |\n| 权限​ | getBenefit​确保调用该接口使用的访问令牌开通了getBenefit权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 查询套餐权益。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| benefit_type_list​ | Array of String​ | 可选​ | api_run_qps,call_tool_limit​ | 权益类型列表，多个类型用逗号分隔。支持的权益类型如下：​api_run_qps： API 扩容的信息，你需要在resource_id中传入待查询的 API 类型。​call_tool_limit：通过 MCP 方式调用付费插件的次数限制。​默认为空，即返回订阅的套餐类型，不含额外扩容的权益。​ |\n| resource_id​ | String​ | 可选​ | plugin​ | API 类型，当benefit_type_list为api_run_qps时，需要配置该参数。当前仅支持查询可扩容的 API 类型。枚举值：​plugin：插件相关 API 的 QPS 限制。​chat：对话相关的 API 的 QPS 限制。​workflow：工作流相关的 API 的 QPS 限制。​ |\n\n- api_run_qps ： API 扩容的信息，你需要在 resource_id 中传入待查询的 API 类型。 ​\n\n- call_tool_limit ：通过 MCP 方式调用付费插件的次数限制。 ​\n\n- plugin ：插件相关 API 的 QPS 限制。 ​\n\n- chat ：对话相关的 API 的 QPS 限制。 ​\n\n- workflow ：工作流相关的 API 的 QPS 限制。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| data​ | Object ofBenefitData​ | \\​ | 用户订阅的套餐类型和权益额度的详细信息。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| basic_info​ | Object ofBasicInfo​ | {\"user_level\":\"enterprise\"}​ | 用户订阅的扣子套餐类型。​ |\n| benefit_info​ | Array ofBenefitInfo​ | [{\"basic\":{\"status\":\"valid\",\"item_info\":{\"used\":100,\"total\":1000,\"end_at\":1735689600,\"start_at\":1735689600,\"strategy\":\"by_quota\"}},\"extra\":[{\"status\":\"valid\",\"item_info\":{\"used\":50,\"total\":500,\"end_at\":1735689600,\"start_at\":1735689600,\"strategy\":\"by_quota\"}}],\"effective\":{\"status\":\"valid\",\"item_info\":{\"used\":200,\"total\":2000,\"end_at\":1735689600,\"start_at\":1735689600,\"strategy\":\"by_quota\"}},\"resource_id\":\"plugin\",\"benefit_type\":\"resource_point\"}]​ | 权益额度，包含用户当前享有的各项权益详情，如默认的权益、扩容权益及实际生效的权益等。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| user_level​ | String​ | enterprise​ | 用户订阅的扣子套餐类型，枚举值：​free：个人免费版。​pro_personal：个人付费版。​team：企业标准版。​enterprise：企业旗舰版。​ |\n\n- free ：个人免费版。 ​\n\n- pro_personal ：个人付费版。 ​\n\n- team ：企业标准版。 ​\n\n- enterprise ：企业旗舰版。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| basic​ | Object ofBenefitTypeInfoItem​ | {\"status\":\"valid\",\"item_info\":{\"used\":100,\"total\":1000,\"end_at\":1735689600,\"start_at\":1735689600,\"strategy\":\"by_quota\"}}​ | 默认的权益信息，包含权益的状态、用量及权益配额 ID。​ |\n| extra​ | Array ofBenefitTypeInfoItem​ | [{\"status\":\"valid\",\"item_info\":{\"used\":50,\"total\":500,\"end_at\":1735689600,\"start_at\":1735689600,\"strategy\":\"by_quota\"}]​ | 资源扩容新增的权益额度。如果未购买扩容服务，则该值为空。​ |\n| effective​ | Object ofBenefitTypeInfoItem​ | {\"status\":\"valid\",\"item_info\":{\"used\":200,\"total\":2000,\"end_at\":1735689600,\"start_at\":1735689600,\"strategy\":\"by_quota\"}}​ | 当前实际生效的权益额度。​ |\n| resource_id​ | String​ | 753754678968821***​ | 当前权益对应的资源 ID。当前仅如下 API 类型支持扩容。枚举值：​plugin：插件相关 API 的 QPS 限制。对应的 API 包括调用插件工具、询插件详情。​chat：对话相关 API 的 QPS 限制。对应的 API 包括：发起对话、查看对话详情、查看对话消息详情。​workflow：工作流相关 API 的 QPS 限制。对应的 API 包括：执行工作流、执行工作流（流式响应）、执行对话流、查询工作流异步执行结果、查询输出节点的执行结果。​ |\n| benefit_type​ | String​ | resource_point​ | 权益配额类型，枚举值：​api_run_qps：扩容管理页面中扩容的 API QPS。​call_tool_limit：通过 MCP 方式调用付费插件的次数限制。​ |\n\n- plugin ：插件相关 API 的 QPS 限制。对应的 API 包括 调用插件工具 、 询插件详情 。 ​\n\n- chat ：对话相关 API 的 QPS 限制。对应的 API 包括： 发起对话 、 查看对话详情 、 查看对话消息详情 。 ​\n\n- workflow ：工作流相关 API 的 QPS 限制。对应的 API 包括： 执行工作流 、 执行工作流（流式响应） 、 执行对话流 、 查询工作流异步执行结果 、 查询输出节点的执行结果 。 ​\n\n- api_run_qps ：扩容管理页面中扩容的 API QPS。 ​\n\n- call_tool_limit ：通过 MCP 方式调用付费插件的次数限制。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| status​ | String​ | valid​ | 权益状态，表示当前权益的使用状态。枚举值：​valid：正常使用。​frozen：冻结使用。​cancel：取消。​pending：待生效。​invalid：不可用。​auditing：审核中。​expired：已过期。​ |\n| item_info​ | Object ofCommonCounter​ | {\"used\":100,\"total\":1000,\"end_at\":1735689600,\"start_at\":1735689600,\"strategy\":\"by_quota\"}​ | 当前权益的使用量、总量、生效时间及资源使用策略。​ |\n\n- valid ：正常使用。 ​\n\n- frozen ：冻结使用。 ​\n\n- cancel ：取消。 ​\n\n- pending ：待生效。 ​\n\n- invalid ：不可用。 ​\n\n- auditing ：审核中。 ​\n\n- expired ：已过期。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| used​ | Double​ | 100​ | 当strategy为ByQuota时，表示当前权益的已使用量。若权益无相关用量数据则返回0。​ |\n| total​ | Double​ | 1000​ | 当strategy为ByQuota时，表示当前权益的用量上限。​当strategy为unlimit或forbidden时，该值为 1。​ |\n| end_at​ | Long​ | 1735689600​ | 权益的结束生效时间，以 Unix 时间戳格式表示，单位为秒。​ |\n| start_at​ | Long​ | 1735689600​ | 权益的开始生效时间，以 Unix 时间戳格式表示，单位为秒。​ |\n| strategy​ | String​ | by_quota​ | 资源使用策略，表示当前权益的资源使用方式。枚举值：​unlimit：不限制用量。​forbidden：不支持调用，该套餐不支持该权益。​by_quota：按额度限制使用。​ |\n\n- 当 strategy 为 ByQuota 时，表示当前权益的用量上限。 ​\n\n- 当 strategy 为 unlimit 或 forbidden 时，该值为 1。 ​\n\n- unlimit ：不限制用量。 ​\n\n- forbidden ：不支持调用，该套餐不支持该权益。 ​\n\n- by_quota ：按额度限制使用。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/billing_callback_message",
      "title": "账单推送回调事件",
      "content": {
        "sections": [],
        "full_text": "账单推送回调事件\n\n如果\n\n开发者订阅了账单推送回调，\n\n用户与智能体对话结束后\n\n，会收到资源点消耗的账单推送回调。订阅回调的具体操作请参见\n\n​\n\n订阅回调\n\n。\n\n​\n\n说明\n\n仅扣子付费套餐支持订阅账单推送事件。\n\n​\n\n对于音视频通话，扣子编程会先推送除音视频通话外的账单回调，音视频通话的账单回调则预计延迟 3 至 5 小时后推送。\n\n​\n\n​\n\n回调结构体\n\n​\n\n消息通知回调的回调结构体 Body 中包括 header 和 event 两个字段。\n\n​\n\nheader\n\n参数的参数说明请参见\n\n​\n\n回调事件\n\n。\n\n​\n\nBody 的 event 参数中包括以下参数：\n\n​\n\n​\n\n字段\n\n​\n\n字段类型\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n账单的 ID。\n\n​\n\nconsume_time\n\n​\n\nBigint\n\n​\n\n资源消耗发生的时间戳，Unix 时间戳，单位为秒。\n\n​\n\nrecord_root_id\n\n​\n\nString\n\n​\n\nroot ID，标识\n\n一次完整对话，用于关联对话全链路数据（包括但不限于智能体、插件、模型等多类型资源消耗记录）。通过该字段可追溯同一会话内的所有费用明细。\n\n​\n\nconnector_id\n\n​\n\nString\n\n​\n\n渠道 ID。\n\n标识资源消耗所属的渠道类型，具体如下\n\n：\n\n​\n\nAPI：1024\n\n​\n\nChatSDK：999\n\n​\n\n商店：10000010。\n\n​\n\n自定义渠道：自定义渠道 ID，获取方式可以参考\n\n​\n\n渠道入驻概述\n\n。需要保证使用自定义渠道的创建者的访问令牌来进行访问。\n\n​\n\nconnector_uid\n\n​\n\nString\n\n​\n\n渠道用户 ID，用于标识渠道内的终端用户身份。\n\n​\n\ndevice_id\n\n​\n\nString\n\n​\n\n设备 ID。\n\n若上报的设备信息中未包含该字段，则值为空\n\n。\n\n​\n\ncustom_consumer\n\n​\n\nString\n\n​\n\n自定义维度的实体 ID，对应上报设备信息时\n\ncustom_consumer\n\n参数中的值，具体请参见\n\n​\n\n上报设备信息\n\n。\n\n​\n\nspace_id\n\n​\n\nString\n\n​\n\n产生费用的实体所在的空间 ID。例如智能体所在的空间 ID。\n\n​\n\nroot_entity_type\n\n​\n\nBigint\n\n​\n\n产生费用的实体类型：\n\n​\n\n1：智能体（bot）\n\n​\n\n2：工作流（workflow）\n\n​\n\n3：插件（plugin）\n\n​\n\n4：应用（application）\n\n​\n\n5：模型类（model）\n\n​\n\n6：\n\n语音类（voice）\n\n​\n\nroot_entity_id\n\n​\n\nString\n\n​\n\n产生费用的实体 ID，例如智能体 ID、工作流 ID 等。\n\n​\n\n说明\n\n若实体类型为\n\n语音类（voice）或模型类（model）\n\n，且未与智能体绑定（例如直接调用语音合成 API），则该字段值为空。\n\n​\n\n​\n\nchange_balance\n\n​\n\nString\n\n​\n\n本次对话消耗的资源点或语音通话时长。\n\n​\n\n未增购\n\nAI 智能通话许可\n\n的企业，默认消耗资源点。\n\n​\n\n增购\n\nAI 智能通话许可\n\n的企业，默认先消耗语音通话时长，单\n\n位\n\n为秒。\n\n​\n\nbalance_type\n\n​\n\nBigint\n\n​\n\n余额类型，枚举值：\n\n​\n\n2：resource_point：资源点。\n\n​\n\n3：voice_unified_duration_system，语音通话时长（系统音色），仅增购\n\nAI 智能通话许可（系统音色）\n\n的企业支持。\n\n​\n\n4：voice_unified_duration_custom，语音通话时长（复刻音色），仅增购\n\nAI 智能通话许可（复刻音色）\n\n的企业支持。\n\n​\n\nresource_type\n\n​\n\nBigint\n\n​\n\n计费项类型：\n\n​\n\n1：模型类（model）\n\n​\n\n2：插件（plugin）\n\n​\n\n3：智能语音（voice），包括语音识别 ASR 和语音合成 TTS\n\n​\n\n4：\n\nRTC\n\n音视频通话\n\n​\n\nresource_id\n\n​\n\nString\n\n​\n\n计费项的 ID，\n\n根据\n\nresource_type\n\n不同，对应的 resource_id 如下：\n\n​\n\n模型类（model）：模型 ID\n\n​\n\n插件（plugin）：插件 ID\n\n​\n\n语音类（voice）或 rtc：具体枚举值如下：\n\n​\n\nTts_system_text_to_speech_chars：语音合成 - 系统音色文字转语音字数。\n\n​\n\nAsr_large_model_streaming_duration：语音识别 - 大模型流式语音识别时长。\n\n​\n\nAsr_large_model_recording_duration：语音识别 - 大模型录音文件识别时长。\n\n​\n\nRtc_miniprogram_voice_call_duration：实时音视频 - 小程序语音通话时长。\n\n​\n\nRtc_voice_call_duration：实时音视频 - 语音通话时长。\n\n​\n\nRtc_dialog_ai_audio_duration：实时音视频 - 对话式 Al - 音频时长。\n\n​\n\nRtc_video_call_4k_duration：实时音视频 - 视频通话时长（4K）。\n\n​\n\nRtc_video_call_2k_duration：实时音视频 - 视频通话时长（2K）。\n\n​\n\nRtc_video_call_1080p_duration：实时音视频 - 视频通话时长（1080P）。\n\n​\n\nRtc_video_call_720p_duration：实时音视频 - 视频通话时长（720P）。\n\n​\n\nRtc_video_call_360p_duration：实时音视频 - 视频通话时长（360P）。\n\n​\n\nmodel_id\n\n​\n\nString\n\n​\n\n模型 ID。\n\n​\n\nmodel_input_token\n\n​\n\nBigint\n\n​\n\n模型输入 Token 数量。\n\n​\n\nmodel_output_token\n\n​\n\nBigint\n\n​\n\n模型输出 Token 数量。\n\n​\n\ntts_char_num\n\n​\n\nBigint\n\n​\n\n文字转语音的字符数。\n\n​\n\ntts_count\n\n​\n\nBigint\n\n​\n\n文字转语音的调用次数， 即 TTS 小模型合成的次数。\n\n​\n\nasr_audio_length\n\n​\n\nBigint\n\n​\n\n语音识别（ASR）的音频时长，单位为毫秒。\n\n​\n\nrtc_duration\n\n​\n\nBigint\n\n​\n\nRTC 音视频通话时长，单位为毫秒。\n\n​\n\nrtc_begin_time\n\n​\n\nBigint\n\n​\n\n语音通话开始时间，Unix 时间戳，单位为秒。\n\n​\n\nrtc_end_time\n\n​\n\nBigint\n\n​\n\n语音通话结束时间，Unix 时间戳，单位为秒。\n\n​\n\n​\n\n回\n\n调结构体示例\n\n​\n\n账单推送回调的结构体示例如下：\n\n​\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"header\"\n\n:\n\n{\n\n​\n\n\"event_type\"\n\n:\n\n\"benefit.usage\"\n\n,\n\n​\n\n\"event_id\"\n\n:\n\n\"bc02c5cc-a4c6-4434-9f40-e5978e54ba02-751163889***\"\n\n,\n\n​\n\n\"created_at\"\n\n:\n\n1749042145635\n\n,\n\n​\n\n\"api_app_id\"\n\n:\n\n\"\n\n7511638893163****\n\n\"\n\n​\n\n},\n\n​\n\n\"event\"\n\n:\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"684043e196f22aae6d2b4ba1\"\n\n,\n\n​\n\n\"consume_time\"\n\n:\n\n1749042145\n\n,\n\n​\n\n\"record_root_id\"\n\n:\n\n\"240482016171010\"\n\n,\n\n​\n\n\"connector_id\"\n\n:\n\n\"10000010\"\n\n,\n\n​\n\n\"connector_uid\"\n\n:\n\n\"1423241851***\"\n\n,\n\n​\n\n\"device_id\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"custom_consumer\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"space_id\"\n\n:\n\n\"750363709788317****\"\n\n,\n\n​\n\n\"root_entity_id\"\n\n:\n\n\"751197483247***\"\n\n,\n\n​\n\n\"root_entity_type\"\n\n:\n\n1\n\n,\n\n​\n\n\"change_balance\"\n\n:\n\n\"0.16\"\n\n,\n\n​\n\n\"balance_type\"\n\n:\n\n2\n\n,\n\n​\n\n\"resource_type\"\n\n:\n\n1\n\n,\n\n​\n\n\"resource_id\"\n\n:\n\n\"1737521***\"\n\n,\n\n​\n\n\"cost_account_id\"\n\n:\n\n\"210587***\"\n\n,\n\n​\n\n\"rtc_begin_time\"\n\n:\n\n0\n\n,\n\n​\n\n\"rtc_end_time\"\n\n:\n\n0\n\n,\n\n​\n\n\"tts_char_num\"\n\n:\n\n0\n\n,\n\n​\n\n\"rtc_duration\"\n\n:\n\n0\n\n,\n\n​\n\n\"model_output_token\"\n\n:\n\n62\n\n,\n\n​\n\n\"model_input_token\"\n\n:\n\n42\n\n,\n\n​\n\n\"model_id\"\n\n:\n\n\"1737521813\"\n\n,\n\n​\n\n\"asr_audio_length\"\n\n:\n\n0\n\n,\n\n​\n\n\"tts_count\"\n\n:\n\n0\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n响应回调\n\n​\n\n开发者服务器收到账单推送回调后，应在 3 秒内\n\n响应\n\n，并在响应中返回 HTTP 状态码 200。\n\n​\n\n相关文档\n\n​\n\n​\n\n订阅回调\n\n​\n\n​\n\n接收并处理回调\n\n​\n\n上一篇\n\n查询套餐权益\n\n下一篇\n\n创建回调应用",
        "links": []
      },
      "markdown": "- 仅扣子付费套餐支持订阅账单推送事件。 ​\n\n- 对于音视频通话，扣子编程会先推送除音视频通话外的账单回调，音视频通话的账单回调则预计延迟 3 至 5 小时后推送。 ​\n\n- header 参数的参数说明请参见 ​ 回调事件 。 ​\n\n- Body 的 event 参数中包括以下参数： ​\n\n- ​ 字段 ​ 字段类型 ​ 说明 ​ id ​ String ​ 账单的 ID。 ​ consume_time ​ Bigint ​ 资源消耗发生的时间戳，Unix 时间戳，单位为秒。 ​ record_root_id ​ String ​ root ID，标识 一次完整对话，用于关联对话全链路数据（包括但不限于智能体、插件、模型等多类型资源消耗记录）。通过该字段可追溯同一会话内的所有费用明细。 ​ connector_id ​ String ​ 渠道 ID。 标识资源消耗所属的渠道类型，具体如下 ： ​ API：1024 ​ ChatSDK：999 ​ 商店：10000010。 ​ 自定义渠道：自定义渠道 ID，获取方式可以参考 ​ 渠道入驻概述 。需要保证使用自定义渠道的创建者的访问令牌来进行访问。 ​ connector_uid ​ String ​ 渠道用户 ID，用于标识渠道内的终端用户身份。 ​ device_id ​ String ​ 设备 ID。 若上报的设备信息中未包含该字段，则值为空 。 ​ custom_consumer ​ String ​ 自定义维度的实体 ID，对应上报设备信息时 custom_consumer 参数中的值，具体请参见 ​ 上报设备信息 。 ​ space_id ​ String ​ 产生费用的实体所在的空间 ID。例如智能体所在的空间 ID。 ​ root_entity_type ​ Bigint ​ 产生费用的实体类型： ​ 1：智能体（bot） ​ 2：工作流（workflow） ​ 3：插件（plugin） ​ 4：应用（application） ​ 5：模型类（model） ​ 6： 语音类（voice） ​ root_entity_id ​ String ​ 产生费用的实体 ID，例如智能体 ID、工作流 ID 等。 ​ 说明 若实体类型为 语音类（voice）或模型类（model） ，且未与智能体绑定（例如直接调用语音合成 API），则该字段值为空。 ​ ​ change_balance ​ String ​ 本次对话消耗的资源点或语音通话时长。 ​ 未增购 AI 智能通话许可 的企业，默认消耗资源点。 ​ 增购 AI 智能通话许可 的企业，默认先消耗语音通话时长，单 位 为秒。 ​ balance_type ​ Bigint ​ 余额类型，枚举值： ​ 2：resource_point：资源点。 ​ 3：voice_unified_duration_system，语音通话时长（系统音色），仅增购 AI 智能通话许可（系统音色） 的企业支持。 ​ 4：voice_unified_duration_custom，语音通话时长（复刻音色），仅增购 AI 智能通话许可（复刻音色） 的企业支持。 ​ resource_type ​ Bigint ​ 计费项类型： ​ 1：模型类（model） ​ 2：插件（plugin） ​ 3：智能语音（voice），包括语音识别 ASR 和语音合成 TTS ​ 4： RTC 音视频通话 ​ resource_id ​ String ​ 计费项的 ID， 根据 resource_type 不同，对应的 resource_id 如下： ​ 模型类（model）：模型 ID ​ 插件（plugin）：插件 ID ​ 语音类（voice）或 rtc：具体枚举值如下： ​ Tts_system_text_to_speech_chars：语音合成 - 系统音色文字转语音字数。 ​ Asr_large_model_streaming_duration：语音识别 - 大模型流式语音识别时长。 ​ Asr_large_model_recording_duration：语音识别 - 大模型录音文件识别时长。 ​ Rtc_miniprogram_voice_call_duration：实时音视频 - 小程序语音通话时长。 ​ Rtc_voice_call_duration：实时音视频 - 语音通话时长。 ​ Rtc_dialog_ai_audio_duration：实时音视频 - 对话式 Al - 音频时长。 ​ Rtc_video_call_4k_duration：实时音视频 - 视频通话时长（4K）。 ​ Rtc_video_call_2k_duration：实时音视频 - 视频通话时长（2K）。 ​ Rtc_video_call_1080p_duration：实时音视频 - 视频通话时长（1080P）。 ​ Rtc_video_call_720p_duration：实时音视频 - 视频通话时长（720P）。 ​ Rtc_video_call_360p_duration：实时音视频 - 视频通话时长（360P）。 ​ model_id ​ String ​ 模型 ID。 ​ model_input_token ​ Bigint ​ 模型输入 Token 数量。 ​ model_output_token ​ Bigint ​ 模型输出 Token 数量。 ​ tts_char_num ​ Bigint ​ 文字转语音的字符数。 ​ tts_count ​ Bigint ​ 文字转语音的调用次数， 即 TTS 小模型合成的次数。 ​ asr_audio_length ​ Bigint ​ 语音识别（ASR）的音频时长，单位为毫秒。 ​ rtc_duration ​ Bigint ​ RTC 音视频通话时长，单位为毫秒。 ​ rtc_begin_time ​ Bigint ​ 语音通话开始时间，Unix 时间戳，单位为秒。 ​ rtc_end_time ​ Bigint ​ 语音通话结束时间，Unix 时间戳，单位为秒。 ​ ​\n\n| 字段​ | 字段类型​ | 说明​ |\n| id​ | String​ | 账单的 ID。​ |\n| consume_time​ | Bigint​ | 资源消耗发生的时间戳，Unix 时间戳，单位为秒。​ |\n| record_root_id​ | String​ | root ID，标识一次完整对话，用于关联对话全链路数据（包括但不限于智能体、插件、模型等多类型资源消耗记录）。通过该字段可追溯同一会话内的所有费用明细。​ |\n| connector_id​ | String​ | 渠道 ID。标识资源消耗所属的渠道类型，具体如下：​API：1024​ChatSDK：999​商店：10000010。​自定义渠道：自定义渠道 ID，获取方式可以参考​渠道入驻概述。需要保证使用自定义渠道的创建者的访问令牌来进行访问。​ |\n| connector_uid​ | String​ | 渠道用户 ID，用于标识渠道内的终端用户身份。​ |\n| device_id​ | String​ | 设备 ID。若上报的设备信息中未包含该字段，则值为空。​ |\n| custom_consumer​ | String​ | 自定义维度的实体 ID，对应上报设备信息时custom_consumer参数中的值，具体请参见​上报设备信息。​ |\n| space_id​ | String​ | 产生费用的实体所在的空间 ID。例如智能体所在的空间 ID。​ |\n| root_entity_type​ | Bigint​ | 产生费用的实体类型：​1：智能体（bot）​2：工作流（workflow）​3：插件（plugin）​4：应用（application）​5：模型类（model）​6：语音类（voice）​ |\n| root_entity_id​ | String​ | 产生费用的实体 ID，例如智能体 ID、工作流 ID 等。​说明若实体类型为语音类（voice）或模型类（model），且未与智能体绑定（例如直接调用语音合成 API），则该字段值为空。​​ |\n| change_balance​ | String​ | 本次对话消耗的资源点或语音通话时长。​未增购AI 智能通话许可的企业，默认消耗资源点。​增购AI 智能通话许可的企业，默认先消耗语音通话时长，单位为秒。​ |\n| balance_type​ | Bigint​ | 余额类型，枚举值：​2：resource_point：资源点。​3：voice_unified_duration_system，语音通话时长（系统音色），仅增购AI 智能通话许可（系统音色）的企业支持。​4：voice_unified_duration_custom，语音通话时长（复刻音色），仅增购AI 智能通话许可（复刻音色）的企业支持。​ |\n| resource_type​ | Bigint​ | 计费项类型：​1：模型类（model）​2：插件（plugin）​3：智能语音（voice），包括语音识别 ASR 和语音合成 TTS​4：RTC音视频通话​ |\n| resource_id​ | String​ | 计费项的 ID，根据resource_type不同，对应的 resource_id 如下：​模型类（model）：模型 ID​插件（plugin）：插件 ID​语音类（voice）或 rtc：具体枚举值如下：​Tts_system_text_to_speech_chars：语音合成 - 系统音色文字转语音字数。​Asr_large_model_streaming_duration：语音识别 - 大模型流式语音识别时长。​Asr_large_model_recording_duration：语音识别 - 大模型录音文件识别时长。​Rtc_miniprogram_voice_call_duration：实时音视频 - 小程序语音通话时长。​Rtc_voice_call_duration：实时音视频 - 语音通话时长。​Rtc_dialog_ai_audio_duration：实时音视频 - 对话式 Al - 音频时长。​Rtc_video_call_4k_duration：实时音视频 - 视频通话时长（4K）。​Rtc_video_call_2k_duration：实时音视频 - 视频通话时长（2K）。​Rtc_video_call_1080p_duration：实时音视频 - 视频通话时长（1080P）。​Rtc_video_call_720p_duration：实时音视频 - 视频通话时长（720P）。​Rtc_video_call_360p_duration：实时音视频 - 视频通话时长（360P）。​ |\n| model_id​ | String​ | 模型 ID。​ |\n| model_input_token​ | Bigint​ | 模型输入 Token 数量。​ |\n| model_output_token​ | Bigint​ | 模型输出 Token 数量。​ |\n| tts_char_num​ | Bigint​ | 文字转语音的字符数。​ |\n| tts_count​ | Bigint​ | 文字转语音的调用次数， 即 TTS 小模型合成的次数。​ |\n| asr_audio_length​ | Bigint​ | 语音识别（ASR）的音频时长，单位为毫秒。​ |\n| rtc_duration​ | Bigint​ | RTC 音视频通话时长，单位为毫秒。​ |\n| rtc_begin_time​ | Bigint​ | 语音通话开始时间，Unix 时间戳，单位为秒。​ |\n| rtc_end_time​ | Bigint​ | 语音通话结束时间，Unix 时间戳，单位为秒。​ |\n\n- API：1024 ​\n\n- ChatSDK：999 ​\n\n- 商店：10000010。 ​\n\n- 自定义渠道：自定义渠道 ID，获取方式可以参考 ​ 渠道入驻概述 。需要保证使用自定义渠道的创建者的访问令牌来进行访问。 ​\n\n- 1：智能体（bot） ​\n\n- 2：工作流（workflow） ​\n\n- 3：插件（plugin） ​\n\n- 4：应用（application） ​\n\n- 5：模型类（model） ​\n\n- 6： 语音类（voice） ​\n\n- 未增购 AI 智能通话许可 的企业，默认消耗资源点。 ​\n\n- 增购 AI 智能通话许可 的企业，默认先消耗语音通话时长，单 位 为秒。 ​\n\n- 2：resource_point：资源点。 ​\n\n- 3：voice_unified_duration_system，语音通话时长（系统音色），仅增购 AI 智能通话许可（系统音色） 的企业支持。 ​\n\n- 4：voice_unified_duration_custom，语音通话时长（复刻音色），仅增购 AI 智能通话许可（复刻音色） 的企业支持。 ​\n\n- 1：模型类（model） ​\n\n- 2：插件（plugin） ​\n\n- 3：智能语音（voice），包括语音识别 ASR 和语音合成 TTS ​\n\n- 4： RTC 音视频通话 ​\n\n- 模型类（model）：模型 ID ​\n\n- 插件（plugin）：插件 ID ​\n\n- 语音类（voice）或 rtc：具体枚举值如下： ​\n\n- Tts_system_text_to_speech_chars：语音合成 - 系统音色文字转语音字数。 ​\n\n- Asr_large_model_streaming_duration：语音识别 - 大模型流式语音识别时长。 ​\n\n- Asr_large_model_recording_duration：语音识别 - 大模型录音文件识别时长。 ​\n\n- Rtc_miniprogram_voice_call_duration：实时音视频 - 小程序语音通话时长。 ​\n\n- Rtc_voice_call_duration：实时音视频 - 语音通话时长。 ​\n\n- Rtc_dialog_ai_audio_duration：实时音视频 - 对话式 Al - 音频时长。 ​\n\n- Rtc_video_call_4k_duration：实时音视频 - 视频通话时长（4K）。 ​\n\n- Rtc_video_call_2k_duration：实时音视频 - 视频通话时长（2K）。 ​\n\n- Rtc_video_call_1080p_duration：实时音视频 - 视频通话时长（1080P）。 ​\n\n- Rtc_video_call_720p_duration：实时音视频 - 视频通话时长（720P）。 ​\n\n- Rtc_video_call_360p_duration：实时音视频 - 视频通话时长（360P）。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/create_callback_app",
      "title": "创建回调应用",
      "content": {
        "sections": [],
        "full_text": "创建回调应用\n\n本 API 用于创建回调应用，支持创建普通回调应用和渠道回调应用。订阅扣子编程回调功能时需要创建回调应用。\n\n​\n\n接口说明\n\n​\n\n订阅回调\n\n功能支持开发者通过配置回调应用实时获取扣子编程的事件通知。当\n\n智能体发布\n\n、\n\n智能体删除\n\n、\n\n账单生成\n\n等关键业务事件被触发时，扣子编程将向开发者指定的服务器地址发送回调消息。\n\n​\n\n回调分为普通回调和渠道回调，具体说明如下：\n\n​\n\n普通回调应用：开发者在扣子编程中创建回调应用，用于接收扣子编程触发的事件通知。当订阅的事件被触发时，扣子编程会向该回调地址推送回调消息。\n\n​\n\n渠道回调应用：当渠道入驻扣子编程后，开发者可以在该渠道中创建回调应用，用于接收该渠道中触发的事件通知。当订阅的事件被触发时，扣子编程会向渠道指定的回调地址推送回调消息。\n\n​\n\n接口限制\n\n​\n\n扣子个人版中，任何用户均可以创建普通回调应用。仅渠道创建者支持创建对应渠道的回调应用，统一接收该渠道中的回调消息。\n\n​\n\n扣子企业版（企业标准版、企业旗舰版）中，仅超级管理员和管理员可创建回调应用。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/api_apps\n\n​\n\n​\n\n权限\n\n​\n\ncreateApiApp\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\ncreateApiApp\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n创建回调应用。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\napp_type\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nnormal\n\n​\n\n回调应用的类型。枚举值如下：\n\n​\n\nnormal\n\n：普通回调应用。\n\n​\n\nconnector\n\n：渠道回调应用。\n\n​\n\nname\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n订单回调应用\n\n​\n\n回调应用的名称，当\n\napp_type\n\n为\n\nnormal\n\n时需要传入该值。最多 128 个字符。\n\n​\n\n当\n\napp_type\n\n为\n\nconnector\n\n时无需填写，扣子编程默认使用渠道名称作为渠道回调应用的名称。\n\n​\n\nconnector_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n1056899***\n\n​\n\n渠道的 ID，当\n\napp_type\n\n为\n\nconnector\n\n时需要传入该值。\n\n​\n\n渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在\n\n账号设置\n\n>\n\n发布渠道\n\n>\n\n企业自定义渠道管理\n\n页面查看渠道 ID。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndata\n\n​\n\nObject of\n\nApiApp\n\n​\n\n{\"id\":\"74876004423701****\",\"name\":\"智能客服机器人回调\",\"app_type\":\"normal\",\"callback_url\":\"\n\nhttps://example.com/api/callback\n\n\",\"connector_id\":\"1056899***\",\"verify_token\":\"abc123def456ghi789\"}\n\n​\n\n返回扣子编程应用的详细信息，包括应用 ID、名称、类型、回调 URL 和验证令牌等。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含本次请求的详细日志信息，用于问题排查。如果遇到异常报错场景，且反复重试仍然报错，可以根据此日志 ID 联系扣子团队获取帮助。\n\n​\n\n​\n\nApiApp\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n7512045450401153075\n\n​\n\n回调应用的 ID。\n\n​\n\nname\n\n​\n\nString\n\n​\n\n智能客服机器人回调\n\n​\n\n回调应用的名称。\n\n​\n\napp_type\n\n​\n\nString\n\n​\n\nnormal\n\n​\n\n回调应用的类型。枚举值如下：\n\n​\n\nnormal\n\n：普通回调应用。\n\n​\n\nconnector\n\n：渠道回调应用。\n\n​\n\ncallback_url\n\n​\n\nString\n\n​\n\nhttps://example.com/api/callback\n\n​\n\n回调地址。后续该回调应用订阅的所有回调，均会在触发时向该回调地址发送回调数据。\n\n​\n\nconnector_id\n\n​\n\nString\n\n​\n\n1056899***\n\n​\n\n自定义的渠道 ID。仅渠道回调应用会返回该参数。\n\n​\n\nverify_token\n\n​\n\nString\n\n​\n\nOYDacMzM3WyOWV3Dtj2bHRMymzxP****\n\n​\n\n扣子编程会为每个回调应用自动生成一个 Token，不支持手动修改或删除。\n\n​\n\n当扣子编程推送回调时，会携带 Token 签发的签名，用于验证推送的回调是否属于扣子编程推送的合法回调。开发者验证签名的具体操作请参见\n\n接收并处理回调\n\n。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\nPOST 'https\n\n:\n\n//api.coze.cn/v1/api_apps' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer czs_hh19tcCx3qn05X7bG71AGzyD2DjrunJqaAeHORjqZCUydGLRqFhSXWr0SJa******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n{\n\n\"app_type\"\n\n:\n\n\"normal\"\n\n,\n\n\"name\"\n\n:\n\n\"sample api app\"\n\n}\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"id\"\n\n:\n\n\"752195368553526****\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"sample api app\"\n\n,\n\n​\n\n\"app_type\"\n\n:\n\n\"normal\"\n\n,\n\n​\n\n\"verify_token\"\n\n:\n\n\"XzHka769anqJdSfyndM5VM6jPTg2Lcel5YVBHMjfczpQhOR5e6taOt2y12z*****\"\n\n​\n\n},\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20250714193129A38DEB6D6****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n账单推送回调事件\n\n下一篇\n\n修改回调应用",
        "links": []
      },
      "markdown": "- 普通回调应用：开发者在扣子编程中创建回调应用，用于接收扣子编程触发的事件通知。当订阅的事件被触发时，扣子编程会向该回调地址推送回调消息。 ​\n\n- 渠道回调应用：当渠道入驻扣子编程后，开发者可以在该渠道中创建回调应用，用于接收该渠道中触发的事件通知。当订阅的事件被触发时，扣子编程会向渠道指定的回调地址推送回调消息。 ​\n\n- 扣子个人版中，任何用户均可以创建普通回调应用。仅渠道创建者支持创建对应渠道的回调应用，统一接收该渠道中的回调消息。 ​\n\n- 扣子企业版（企业标准版、企业旗舰版）中，仅超级管理员和管理员可创建回调应用。 ​\n\n| 请求方式​ | POST​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/api_apps​​ |\n| 权限​ | createApiApp​确保调用该接口使用的访问令牌开通了createApiApp权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 创建回调应用。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| app_type​ | String​ | 必选​ | normal​ | 回调应用的类型。枚举值如下：​normal：普通回调应用。​connector：渠道回调应用。​ |\n| name​ | String​ | 可选​ | 订单回调应用​ | 回调应用的名称，当app_type为normal时需要传入该值。最多 128 个字符。​当app_type为connector时无需填写，扣子编程默认使用渠道名称作为渠道回调应用的名称。​ |\n| connector_id​ | String​ | 可选​ | 1056899***​ | 渠道的 ID，当app_type为connector时需要传入该值。​渠道 ID 的获取方式如下：在扣子编程左下角单击头像，在账号设置>发布渠道>企业自定义渠道管理页面查看渠道 ID。​ |\n\n- normal ：普通回调应用。 ​\n\n- connector ：渠道回调应用。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| data​ | Object ofApiApp​ | {\"id\":\"74876004423701****\",\"name\":\"智能客服机器人回调\",\"app_type\":\"normal\",\"callback_url\":\"https://example.com/api/callback\",\"connector_id\":\"1056899***\",\"verify_token\":\"abc123def456ghi789\"}​ | 返回扣子编程应用的详细信息，包括应用 ID、名称、类型、回调 URL 和验证令牌等。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含本次请求的详细日志信息，用于问题排查。如果遇到异常报错场景，且反复重试仍然报错，可以根据此日志 ID 联系扣子团队获取帮助。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 7512045450401153075​ | 回调应用的 ID。​ |\n| name​ | String​ | 智能客服机器人回调​ | 回调应用的名称。​ |\n| app_type​ | String​ | normal​ | 回调应用的类型。枚举值如下：​normal：普通回调应用。​connector：渠道回调应用。​ |\n| callback_url​ | String​ | https://example.com/api/callback​ | 回调地址。后续该回调应用订阅的所有回调，均会在触发时向该回调地址发送回调数据。​ |\n| connector_id​ | String​ | 1056899***​ | 自定义的渠道 ID。仅渠道回调应用会返回该参数。​ |\n| verify_token​ | String​ | OYDacMzM3WyOWV3Dtj2bHRMymzxP****​ | 扣子编程会为每个回调应用自动生成一个 Token，不支持手动修改或删除。​当扣子编程推送回调时，会携带 Token 签发的签名，用于验证推送的回调是否属于扣子编程推送的合法回调。开发者验证签名的具体操作请参见接收并处理回调。​ |\n\n- normal ：普通回调应用。 ​\n\n- connector ：渠道回调应用。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/update_callback_app",
      "title": "修改回调应用",
      "content": {
        "sections": [],
        "full_text": "修改回调应用\n\n修改回调应用的名称和回调地址。\n\n​\n\n接口限制\n\n​\n\n扣子个人版中，仅支持修改本人创建的回调应用。\n\n​\n\n扣子企业版中，仅超级管理员和管理员可修改回调应用。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPUT\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/api_apps/:api_app_id\n\n​\n\n​\n\n权限\n\n​\n\nupdateApiApp\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\nupdateApiApp\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n修改回调应用。\n\n​\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\napi_app_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n752688153695671****\n\n​\n\n待修改的回调应用的 ID。你可以通过\n\n查询回调应用列表\n\nAPI 获取回调应用的 ID。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nname\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n智能客服回调应用\n\n​\n\n修改后的回调应用名称，用于标识修改后的回调应用身份或用途。\n\n​\n\ncallback_url\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nhttps://api.example.com/callback/updated\n\n​\n\n修改后的回调地址，用于接收扣子编程发送的事件通知。\n\n​\n\n扣子编程会向该地址发送包含\n\nchallenge\n\n的 POST 请求进行校验，服务器需在 3 秒内原样返回\n\nchallenge\n\n值以验证地址有效性。详情请参考\n\n订阅回调\n\n。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息，主要用于问题排查。如果遇到异常报错场景，且反复重试仍然报错，可以根据此字段中的\n\nlogid\n\n联系扣子团队获取帮助。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\nPUT 'https\n\n:\n\n//api.coze.cn/v1/api_apps/752688153695671****' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer czs_lvJ1wCpwGsRYM0pxzCDae0dnvoNTJTXWhivKUHN1xQ9ay8m8ob2frbNx5hbS*****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n{\n\n\"name\"\n\n:\n\n\"智能客服回调应用\"\n\n}\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"2025071419450725A01236138****\"\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n创建回调应用\n\n下一篇\n\n查询回调应用列表",
        "links": []
      },
      "markdown": "- 扣子个人版中，仅支持修改本人创建的回调应用。 ​\n\n- 扣子企业版中，仅超级管理员和管理员可修改回调应用。 ​\n\n| 请求方式​ | PUT​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/api_apps/:api_app_id​​ |\n| 权限​ | updateApiApp​确保调用该接口使用的访问令牌开通了updateApiApp权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 修改回调应用。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| api_app_id​ | String​ | 必选​ | 752688153695671****​ | 待修改的回调应用的 ID。你可以通过查询回调应用列表API 获取回调应用的 ID。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| name​ | String​ | 可选​ | 智能客服回调应用​ | 修改后的回调应用名称，用于标识修改后的回调应用身份或用途。​ |\n| callback_url​ | String​ | 可选​ | https://api.example.com/callback/updated​ | 修改后的回调地址，用于接收扣子编程发送的事件通知。​扣子编程会向该地址发送包含challenge的 POST 请求进行校验，服务器需在 3 秒内原样返回challenge值以验证地址有效性。详情请参考订阅回调。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息，主要用于问题排查。如果遇到异常报错场景，且反复重试仍然报错，可以根据此字段中的logid联系扣子团队获取帮助。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/list_callback_app",
      "title": "查询回调应用列表",
      "content": {
        "sections": [],
        "full_text": "查询回调应用列表\n\n查询回调应用列表。\n\n​\n\n接口限制\n\n​\n\n扣子个人版中，仅支持查看本人创建的回调应用。\n\n​\n\n扣子企业版中，仅超级管理员和管理员可以查看企业的回调应用列表。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/api_apps\n\n​\n\n​\n\n权限\n\n​\n\nlistApiApp\n\n​\n\n确保调用该接口使用的服务令牌开通了\n\nlistApiApp\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n查询回调应用列表。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\npage_token\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n\"\"\n\n​\n\n分页查询时的翻页标识，表示下一页的起始位置。默认为空字符串\n\n\"\"\n\n，即从第一页数据开始返回。如果要查询下一页，需要使用上一次返回的\n\nnext_page_token\n\n作为这次请求的入参。\n\n​\n\npage_size\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n20\n\n​\n\n每页返回的数据条数，用于分页查询。默认值：50。\n\n​\n\n取值范围：1 ~ 50。\n\n​\n\napp_type\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nnormal\n\n​\n\n回调应用的类型。默认为空，查看所有类型的回调应用。枚举值如下：\n\n​\n\nnormal\n\n：普通回调应用。\n\n​\n\nconnector\n\n：渠道回调应用。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndata\n\n​\n\nObject of\n\nGetApiAppListOpenRespData\n\n​\n\n{\"items\":[{\"id\":\"74876004423701****\",\"name\":\"智能客服机器人回调\",\"app_type\":\"normal\",\"callback_url\":\"\n\nhttps://example.com/api/callback\n\n\",\"verify_token\":\"OYDacMzM3WyOWV3Dtj2bHRMymzxP****\"}],\"has_more\":true,\"next_page_token\":\"next_page_token_value\"}\n\n​\n\n返回的回调应用列表数据，包含分页信息。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含本次请求的日志信息，用于问题排查。\n\n​\n\n​\n\nGetApiAppListOpenRespData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nitems\n\n​\n\nArray of\n\nApiApp\n\n​\n\n[{\"id\":\"74876004423701****\",\"name\":\"智能客服机器人回调\",\"app_type\":\"normal\",\"callback_url\":\"\n\nhttps://example.com/api/callback\n\n\",\"verify_token\":\"OYDacMzM3WyOWV3Dtj2bHRMymzxP****\"}]\n\n​\n\n回调应用列表，包含每个回调应用的详细信息。\n\nhas_more\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n标识当前返回的回调应用列表是否还有更多数据未返回。\n\n​\n\ntrue\n\n：还有更多未返回的回调应用。\n\n​\n\nfalse\n\n：已返回所有数据。\n\n​\n\nnext_page_token\n\n​\n\nString\n\n​\n\n1752492196\n\n​\n\n分页 token，用于获取下一页数据。第一页请求时传空，后续请求通过上一个响应返回的\n\nnext_page_token\n\n获取下一页数据。\n\n​\n\n​\n\nApiApp\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nid\n\n​\n\nString\n\n​\n\n7512045450401153075\n\n​\n\n回调应用的 ID。\n\n​\n\nname\n\n​\n\nString\n\n​\n\n智能客服机器人回调\n\n​\n\n回调应用的名称。\n\n​\n\napp_type\n\n​\n\nString\n\n​\n\nnormal\n\n​\n\n回调应用的类型。枚举值如下：\n\n​\n\nnormal\n\n：普通回调应用。\n\n​\n\nconnector\n\n：渠道回调应用。\n\n​\n\ncallback_url\n\n​\n\nString\n\n​\n\nhttps://example.com/api/callback\n\n​\n\n回调地址。后续该回调应用订阅的所有回调，均会在触发时向该回调地址发送回调数据。\n\n​\n\nconnector_id\n\n​\n\nString\n\n​\n\n1056899***\n\n​\n\n自定义的渠道 ID。仅渠道回调应用会返回该参数。\n\n​\n\nverify_token\n\n​\n\nString\n\n​\n\nOYDacMzM3WyOWV3Dtj2bHRMymzxP****\n\n​\n\n扣子编程会为每个回调应用自动生成一个 Token，不支持手动修改或删除。\n\n​\n\n当扣子编程推送回调时，会携带 Token 签发的签名，用于验证推送的回调是否属于扣子编程推送的合法回调。开发者验证签名的具体操作请参见\n\n接收并处理回调\n\n。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\nGET https\n\n:\n\n//api.coze.cn/v1/api_apps \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer czs_hh19tcCx3qn05X7bG71AGzyD2DjrunJqaAeHORjqZCUydGLRqFhSXWr*******' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"has_more\"\n\n:\n\nfalse\n\n,\n\n​\n\n\"items\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"name\"\n\n:\n\n\"api app 1\"\n\n,\n\n​\n\n\"verify_token\"\n\n:\n\n\"cZTAkNZMhfapeskz3beBaOvuxcSLqM5o2uQwgIHTgumCUFmDi54WRfIsB1****\"\n\n,\n\n​\n\n\"callback_url\"\n\n:\n\n\"https://callback.example.com/callback\"\n\n,\n\n​\n\n\"id\"\n\n:\n\n\"751230611020066****\"\n\n,\n\n​\n\n\"app_type\"\n\n:\n\n\"normal\"\n\n​\n\n},\n\n​\n\n{\n\n​\n\n\"verify_token\"\n\n:\n\n\"qrwk0rqd843N4SKvyxoHY4yHSsvde0p8IWOH2ef0cR2FWahyxB1Evhl5y****\"\n\n,\n\n​\n\n\"callback_url\"\n\n:\n\n\"https://callback.example.com/callback\"\n\n,\n\n​\n\n\"id\"\n\n:\n\n\"751230611020070****\"\n\n,\n\n​\n\n\"app_type\"\n\n:\n\n\"normal\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"api app 2\"\n\n​\n\n}\n\n​\n\n]\n\n​\n\n},\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20250714193443C60E2B008BF****\"\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n修改回调应用\n\n下一篇\n\n删除回调应用",
        "links": []
      },
      "markdown": "- 扣子个人版中，仅支持查看本人创建的回调应用。 ​\n\n- 扣子企业版中，仅超级管理员和管理员可以查看企业的回调应用列表。 ​\n\n| 请求方式​ | GET​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/api_apps​​ |\n| 权限​ | listApiApp​确保调用该接口使用的服务令牌开通了listApiApp权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 查询回调应用列表。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| page_token​ | String​ | 可选​ | \"\"​ | 分页查询时的翻页标识，表示下一页的起始位置。默认为空字符串\"\"，即从第一页数据开始返回。如果要查询下一页，需要使用上一次返回的next_page_token作为这次请求的入参。​ |\n| page_size​ | Integer​ | 可选​ | 20​ | 每页返回的数据条数，用于分页查询。默认值：50。​取值范围：1 ~ 50。​ |\n| app_type​ | String​ | 可选​ | normal​ | 回调应用的类型。默认为空，查看所有类型的回调应用。枚举值如下：​normal：普通回调应用。​connector：渠道回调应用。​ |\n\n- normal ：普通回调应用。 ​\n\n- connector ：渠道回调应用。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| data​ | Object ofGetApiAppListOpenRespData​ | {\"items\":[{\"id\":\"74876004423701****\",\"name\":\"智能客服机器人回调\",\"app_type\":\"normal\",\"callback_url\":\"https://example.com/api/callback\",\"verify_token\":\"OYDacMzM3WyOWV3Dtj2bHRMymzxP****\"}],\"has_more\":true,\"next_page_token\":\"next_page_token_value\"}​ | 返回的回调应用列表数据，包含分页信息。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含本次请求的日志信息，用于问题排查。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| items​ | Array ofApiApp​ | [{\"id\":\"74876004423701****\",\"name\":\"智能客服机器人回调\",\"app_type\":\"normal\",\"callback_url\":\"https://example.com/api/callback\",\"verify_token\":\"OYDacMzM3WyOWV3Dtj2bHRMymzxP****\"}]​ | 回调应用列表，包含每个回调应用的详细信息。 |\n| has_more​ | Boolean​ | true​ | 标识当前返回的回调应用列表是否还有更多数据未返回。​true：还有更多未返回的回调应用。​false：已返回所有数据。​ |\n| next_page_token​ | String​ | 1752492196​ | 分页 token，用于获取下一页数据。第一页请求时传空，后续请求通过上一个响应返回的next_page_token获取下一页数据。​ |\n\n- true ：还有更多未返回的回调应用。 ​\n\n- false ：已返回所有数据。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| id​ | String​ | 7512045450401153075​ | 回调应用的 ID。​ |\n| name​ | String​ | 智能客服机器人回调​ | 回调应用的名称。​ |\n| app_type​ | String​ | normal​ | 回调应用的类型。枚举值如下：​normal：普通回调应用。​connector：渠道回调应用。​ |\n| callback_url​ | String​ | https://example.com/api/callback​ | 回调地址。后续该回调应用订阅的所有回调，均会在触发时向该回调地址发送回调数据。​ |\n| connector_id​ | String​ | 1056899***​ | 自定义的渠道 ID。仅渠道回调应用会返回该参数。​ |\n| verify_token​ | String​ | OYDacMzM3WyOWV3Dtj2bHRMymzxP****​ | 扣子编程会为每个回调应用自动生成一个 Token，不支持手动修改或删除。​当扣子编程推送回调时，会携带 Token 签发的签名，用于验证推送的回调是否属于扣子编程推送的合法回调。开发者验证签名的具体操作请参见接收并处理回调。​ |\n\n- normal ：普通回调应用。 ​\n\n- connector ：渠道回调应用。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/delete_callback_app",
      "title": "删除回调应用",
      "content": {
        "sections": [],
        "full_text": "删除回调应用\n\n删除回调应用。\n\n​\n\n如果不再需要接收扣子编程回调，可以删除回调应用。一旦删除，该回调应用所订阅的所有回调事件触发时，将不再向该回调应用推送通知。\n\n​\n\n接口限制\n\n​\n\n扣子个人版中，仅支持删除本人创建的回调应用。\n\n​\n\n扣子企业版中，仅超级管理员和管理员可删除回调应用。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nDELETE\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/api_apps/:api_app_id\n\n​\n\n​\n\n权限\n\n​\n\ndeleteApiApp\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\ndeleteApiApp\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n删除回调应用。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\napi_app_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n75268815369567*****\n\n​\n\n待删除的回调应用的 ID。你可以通过\n\n查询回调应用列表\n\nAPI 获取回调应用的 ID。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\nDELETE 'https\n\n:\n\n//api.coze.cn/v1/api_apps/75268815369567*****' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer pat_Elfvzxu8OofVLUS8tHwBDd4ZCfj7N3IAc1hr6tRdnqiDthUJpu2m1EeitXq*****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20250714194722A3C36B7A****\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n查询回调应用列表\n\n下一篇\n\n订阅回调事件",
        "links": []
      },
      "markdown": "- 扣子个人版中，仅支持删除本人创建的回调应用。 ​\n\n- 扣子企业版中，仅超级管理员和管理员可删除回调应用。 ​\n\n| 请求方式​ | DELETE​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/api_apps/:api_app_id​​ |\n| 权限​ | deleteApiApp​确保调用该接口使用的访问令牌开通了deleteApiApp权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 删除回调应用。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| api_app_id​ | String​ | 必选​ | 75268815369567*****​ | 待删除的回调应用的 ID。你可以通过查询回调应用列表API 获取回调应用的 ID。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/subscribe_callback_message",
      "title": "订阅回调事件",
      "content": {
        "sections": [],
        "full_text": "订阅回调事件\n\n订阅回调事件。\n\n​\n\n接口描述\n\n​\n\n扣子编程当前支持的回调事件和使用限制请参考\n\n回调事件\n\n。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nPOST\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/api_apps/:api_app_id/events\n\n​\n\n​\n\n权限\n\n​\n\nsubscribeApiAppEvent\n\n​\n\n接口说明\n\n​\n\n订阅回调事件。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\napi_app_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n752690322532938****\n\n​\n\n回调应用的 ID。你可以通过\n\n查询回调应用列表\n\nAPI 获取回调应用的 ID。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nevent_types\n\n​\n\nArray of String\n\n​\n\n必选\n\n​\n\n[\"bot.published\"]\n\n​\n\n待订阅的回调事件列表，目前支持的事件类型包括：\n\n​\n\nbot.published\n\n：智能体发布事件。\n\n​\n\nbot.deleted\n\n：智能体删除事件。\n\n​\n\nbot.unpublished\n\n：智能体下架事件。\n\n​\n\nbenefit.usage\n\n：账单推送回调。\n\n​\n\nbenefit.plugin.scale.requested\n\n：申请插件扩容事件。\n\n​\n\nbenefit.plugin.scale.expired\n\n：插件扩容到期事件。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息，主要用于问题排查。\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\nPOST 'https\n\n:\n\n//api.coze.cn/v1/api_apps/752690322532938****/events' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer czs_l8wA17hHrFts8ebCe9RxrjDBJvJJhXyxHQK1I8hEcu8cGsQm8LPI6Xs4LHyjd****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n{\n\n\"event_types\"\n\n:\n\n[\n\n\"bot.published\"\n\n,\n\n\"bot.deleted\"\n\n]}\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"20250714194855054D95BD7A6DA74233D7\"\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n上一篇\n\n删除回调应用\n\n下一篇\n\n查询已订阅的事件",
        "links": []
      },
      "markdown": "| 请求方式​ | POST​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/api_apps/:api_app_id/events​​ |\n| 权限​ | subscribeApiAppEvent​ |\n| 接口说明​ | 订阅回调事件。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| api_app_id​ | String​ | 必选​ | 752690322532938****​ | 回调应用的 ID。你可以通过查询回调应用列表API 获取回调应用的 ID。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| event_types​ | Array of String​ | 必选​ | [\"bot.published\"]​ | 待订阅的回调事件列表，目前支持的事件类型包括：​bot.published：智能体发布事件。​bot.deleted：智能体删除事件。​bot.unpublished：智能体下架事件。​benefit.usage：账单推送回调。​benefit.plugin.scale.requested：申请插件扩容事件。​benefit.plugin.scale.expired：插件扩容到期事件。​ |\n\n- bot.published ：智能体发布事件。 ​\n\n- bot.deleted ：智能体删除事件。 ​\n\n- bot.unpublished ：智能体下架事件。 ​\n\n- benefit.usage ：账单推送回调。 ​\n\n- benefit.plugin.scale.requested ：申请插件扩容事件。 ​\n\n- benefit.plugin.scale.expired ：插件扩容到期事件。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息，主要用于问题排查。 |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/list_subscribed_callback_message",
      "title": "查询已订阅的事件",
      "content": {
        "sections": [],
        "full_text": "查询已订阅的事件\n\n查询回调应用中已订阅的事件。\n\n​\n\n接口限制\n\n​\n\n扣子个人版中，仅回调应用的创建者可以查看已订阅的事件。\n\n​\n\n扣子企业版中，仅超级管理员和管理员可以查看回调应用中已订阅的事件。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/api_apps/:api_app_id/events\n\n​\n\n​\n\n权限\n\n​\n\nlistApiApp\n\n​\n\n确保调用该接口使用的服务令牌开通了\n\nlistApiApp\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n查询回调应用中已订阅的事件。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer\n\n$Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\napi_app_id\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n7512045450401153075***\n\n​\n\n回调应用的 ID。你可以通过\n\n查询回调应用列表\n\nAPI 获取回调应用的 ID。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\npage_token\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n\\\n\n​\n\n分页查询时的翻页标识，表示下一页的起始位置。默认为\n\n\"\"\n\n，即从第一页数据开始返回。如果要查询下一页，需要使用上一次返回的\n\nnext_page_token\n\n作为这次请求的入参。\n\n​\n\npage_size\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n20\n\n​\n\n每页返回的数据条数，用于分页查询。默认值：50。\n\n​\n\n取值范围：1 ~ 50。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndata\n\n​\n\nObject of\n\nListSubscribedApiAppEventOpenRespData\n\n​\n\n{\"items\":[{\"name\":\"智能客服机器人回调\",\"api_app_id\":\"752690322532938****\",\"event_type\":\"bot.published\",\"description\":\"智能客服机器人回调应用，用于处理用户与机器人的交互事件。\"}],\"has_more\":true,\"next_page_token\":\"eyJwYWdlX3Rva2VuIjoiMTIzNDU****\"}\n\n​\n\n包含回调应用的信息列表及分页信息。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。\n\n​\n\n​\n\nListSubscribedApiAppEventOpenRespData\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nitems\n\n​\n\nArray of\n\nApiAppEventOpen\n\n​\n\n[{\"name\":\"智能客服机器人回调\",\"api_app_id\":\"cli_a1b2c3d4e5f6g7h8\",\"event_type\":\"bot.published\",\"description\":\"智能客服机器人回调应用，用于处理用户与机器人的交互事件。\"}]\n\n​\n\n回调应用的信息列表，包含每个回调应用的名称、ID、事件类型和描述。\n\nhas_more\n\n​\n\nBoolean\n\n​\n\ntrue\n\n​\n\n标识当前返回的回调应用列表是否还有更多数据未返回。\n\n​\n\ntrue\n\n：还有更多未返回的回调应用。\n\n​\n\nfalse\n\n：已返回所有数据。\n\n​\n\nnext_page_token\n\n​\n\nString\n\n​\n\neyJwYWdlX3Rva2VuIjoiMTIzNDU****\n\n​\n\n翻页标识，表示下一页的起始位置。当\n\nhas_more\n\n为\n\ntrue\n\n时，表示还有更多数据未返回，可以通过此令牌获取下一页数据。首次请求不填或置空，后续翻页需使用上一次返回的\n\nnext_page_token\n\n。\n\n​\n\n​\n\nApiAppEventOpen\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nname\n\n​\n\nString\n\n​\n\n智能客服机器人回调应用\n\n​\n\n回调应用的名称。\n\n​\n\napi_app_id\n\n​\n\nString\n\n​\n\n752690322532938****\n\n​\n\n回调应用的 ID。\n\n​\n\nevent_type\n\n​\n\nString\n\n​\n\nbot.published\n\n​\n\n回调事件类型，目前支持的事件类型包括：\n\n​\n\nbot.published\n\n：智能体发布事件。\n\n​\n\nbot.deleted\n\n：智能体删除事件。\n\n​\n\nbot.unpublished\n\n：智能体下架事件。\n\n​\n\nbenefit.usage\n\n：账单推送回调。\n\n​\n\nbenefit.plugin.scale.requested\n\n：申请插件扩容事件。\n\n​\n\nbenefit.plugin.scale.expired\n\n：插件扩容到期事件。\n\n​\n\ndescription\n\n​\n\nString\n\n​\n\n智能客服机器人回调应用，用于处理用户与机器人的交互事件。\n\n​\n\n回调应用的描述信息，用于说明回调应用的功能或用途。\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\nGET 'https\n\n:\n\n//api.coze.cn/v1/api_apps/752690322532938****/events' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer czs_l8wA17hHrFts8ebCe9RxrjDBJvJJhXyxHQK1I8hEcu8cGsQm8LPI6Xs4LHyj*****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n{\n\n\"event_types\"\n\n:\n\n[\n\n\"bot.published\"\n\n,\n\n\"bot.deleted\"\n\n]}\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"has_more\"\n\n:\n\nfalse\n\n,\n\n​\n\n\"items\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"description\"\n\n:\n\n\"智能体已被所有者删除\"\n\n,\n\n​\n\n\"event_type\"\n\n:\n\n\"bot.deleted\"\n\n,\n\n​\n\n\"api_app_id\"\n\n:\n\n\"752690322532938****\"\n\n,\n\n​\n\n\"name\"\n\n:\n\n\"智能音箱回调应用\"\n\n​\n\n}\n\n​\n\n]\n\n​\n\n},\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"202507141951091846A5E****\"\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n订阅回调事件\n\n下一篇\n\n取消订阅事件",
        "links": []
      },
      "markdown": "- 扣子个人版中，仅回调应用的创建者可以查看已订阅的事件。 ​\n\n- 扣子企业版中，仅超级管理员和管理员可以查看回调应用中已订阅的事件。 ​\n\n| 请求方式​ | GET​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/api_apps/:api_app_id/events​​ |\n| 权限​ | listApiApp​确保调用该接口使用的服务令牌开通了listApiApp权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 查询回调应用中已订阅的事件。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| api_app_id​ | String​ | 可选​ | 7512045450401153075***​ | 回调应用的 ID。你可以通过查询回调应用列表API 获取回调应用的 ID。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| page_token​ | String​ | 可选​ | \\​ | 分页查询时的翻页标识，表示下一页的起始位置。默认为\"\"，即从第一页数据开始返回。如果要查询下一页，需要使用上一次返回的next_page_token作为这次请求的入参。​ |\n| page_size​ | Integer​ | 可选​ | 20​ | 每页返回的数据条数，用于分页查询。默认值：50。​取值范围：1 ~ 50。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| data​ | Object ofListSubscribedApiAppEventOpenRespData​ | {\"items\":[{\"name\":\"智能客服机器人回调\",\"api_app_id\":\"752690322532938****\",\"event_type\":\"bot.published\",\"description\":\"智能客服机器人回调应用，用于处理用户与机器人的交互事件。\"}],\"has_more\":true,\"next_page_token\":\"eyJwYWdlX3Rva2VuIjoiMTIzNDU****\"}​ | 包含回调应用的信息列表及分页信息。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息的对象，主要用于记录请求的日志 ID 以便于排查问题。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| items​ | Array ofApiAppEventOpen​ | [{\"name\":\"智能客服机器人回调\",\"api_app_id\":\"cli_a1b2c3d4e5f6g7h8\",\"event_type\":\"bot.published\",\"description\":\"智能客服机器人回调应用，用于处理用户与机器人的交互事件。\"}]​ | 回调应用的信息列表，包含每个回调应用的名称、ID、事件类型和描述。 |\n| has_more​ | Boolean​ | true​ | 标识当前返回的回调应用列表是否还有更多数据未返回。​true：还有更多未返回的回调应用。​false：已返回所有数据。​ |\n| next_page_token​ | String​ | eyJwYWdlX3Rva2VuIjoiMTIzNDU****​ | 翻页标识，表示下一页的起始位置。当has_more为true时，表示还有更多数据未返回，可以通过此令牌获取下一页数据。首次请求不填或置空，后续翻页需使用上一次返回的next_page_token。​ |\n\n- true ：还有更多未返回的回调应用。 ​\n\n- false ：已返回所有数据。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| name​ | String​ | 智能客服机器人回调应用​ | 回调应用的名称。​ |\n| api_app_id​ | String​ | 752690322532938****​ | 回调应用的 ID。​ |\n| event_type​ | String​ | bot.published​ | 回调事件类型，目前支持的事件类型包括：​bot.published：智能体发布事件。​bot.deleted：智能体删除事件。​bot.unpublished：智能体下架事件。​benefit.usage：账单推送回调。​benefit.plugin.scale.requested：申请插件扩容事件。​benefit.plugin.scale.expired：插件扩容到期事件。​ |\n| description​ | String​ | 智能客服机器人回调应用，用于处理用户与机器人的交互事件。​ | 回调应用的描述信息，用于说明回调应用的功能或用途。 |\n\n- bot.published ：智能体发布事件。 ​\n\n- bot.deleted ：智能体删除事件。 ​\n\n- bot.unpublished ：智能体下架事件。 ​\n\n- benefit.usage ：账单推送回调。 ​\n\n- benefit.plugin.scale.requested ：申请插件扩容事件。 ​\n\n- benefit.plugin.scale.expired ：插件扩容到期事件。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/unsubscribe_callback_message",
      "title": "取消订阅事件",
      "content": {
        "sections": [],
        "full_text": "取消订阅事件\n\n如果不再需要订阅某个回调事件，可以取消订阅。一旦取消订阅，对应回调事件触发时，将不再向该回调地址推送通知。\n\n​\n\n接口限制\n\n​\n\n扣子个人版中，仅回调应用的创建者能取消订阅对应回调应用中的事件。\n\n​\n\n扣子企业版（企业标准版、企业旗舰版）中，仅超级管理员和管理员可取消订阅事件。\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nDELETE\n\n​\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/api_apps/:api_app_id/events\n\n​\n\n​\n\n权限\n\n​\n\nunsubscribeApiAppEvent\n\n​\n\n确保调用该接口使用的服务令牌开通了\n\nunsubscribeApiAppEvent\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n取消订阅事件。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $Access_Token\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nPath\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\napi_app_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n3336789234***\n\n​\n\n回调应用的 ID。你可以通过\n\n查询回调应用列表\n\nAPI 获取回调应用的 ID。\n\n​\n\n​\n\nBody\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nevent_types\n\n​\n\nArray of String\n\n​\n\n必选\n\n​\n\n[\"bot.published\"]\n\n​\n\n待取消订阅的回调事件类型，目前支持的事件类型包括：\n\n​\n\nbot.published\n\n：智能体发布事件。\n\n​\n\nbot.deleted\n\n：智能体删除事件。\n\n​\n\nbot.unpublished\n\n：智能体下架事件。\n\n​\n\nbenefit.usage\n\n：账单推送回调。\n\n​\n\nbenefit.plugin.scale.requested\n\n：申请插件扩容事件。\n\n​\n\nbenefit.plugin.scale.expired\n\n：插件扩容到期事件。\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{\"logid\":\"20241210152726467C48D89D6DB2****\"}\n\n​\n\n包含请求的详细信息，主要用于问题排查。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\nDELETE 'https\n\n:\n\n//api.coze.cn/v1/api_apps/7526903225329385****/events' \\\n\n​\n\n--header 'Authorization\n\n:\n\nBearer czs_l8wA17hHrFts8ebCe9RxrjDBJvJJhXyxHQK1I8hEcu8cGsQm8LPI6Xs4LHyjd****' \\\n\n​\n\n--header 'Content-Type\n\n:\n\napplication/json'\n\n​\n\n{\n\n\"event_types\"\n\n:\n\n[\n\n\"bot.published\"\n\n]}\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"detail\"\n\n:\n\n{\n\n​\n\n\"logid\"\n\n:\n\n\"202507141950092C6B40*****\"\n\n​\n\n},\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子编程的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n查询已订阅的事件\n\n下一篇\n\n【Deprecated】查看已发布智能体列表",
        "links": []
      },
      "markdown": "- 扣子个人版中，仅回调应用的创建者能取消订阅对应回调应用中的事件。 ​\n\n- 扣子企业版（企业标准版、企业旗舰版）中，仅超级管理员和管理员可取消订阅事件。 ​\n\n| 请求方式​ | DELETE​ |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/api_apps/:api_app_id/events​​ |\n| 权限​ | unsubscribeApiAppEvent​确保调用该接口使用的服务令牌开通了unsubscribeApiAppEvent权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 取消订阅事件。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| api_app_id​ | String​ | 必选​ | 3336789234***​ | 回调应用的 ID。你可以通过查询回调应用列表API 获取回调应用的 ID。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| event_types​ | Array of String​ | 必选​ | [\"bot.published\"]​ | 待取消订阅的回调事件类型，目前支持的事件类型包括：​bot.published：智能体发布事件。​bot.deleted：智能体删除事件。​bot.unpublished：智能体下架事件。​benefit.usage：账单推送回调。​benefit.plugin.scale.requested：申请插件扩容事件。​benefit.plugin.scale.expired：插件扩容到期事件。​ |\n\n- bot.published ：智能体发布事件。 ​\n\n- bot.deleted ：智能体删除事件。 ​\n\n- bot.unpublished ：智能体下架事件。 ​\n\n- benefit.usage ：账单推送回调。 ​\n\n- benefit.plugin.scale.requested ：申请插件扩容事件。 ​\n\n- benefit.plugin.scale.expired ：插件扩容到期事件。 ​\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。0 表示调用成功，其他值表示调用失败，你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| detail​ | Object ofResponseDetail​ | {\"logid\":\"20241210152726467C48D89D6DB2****\"}​ | 包含请求的详细信息，主要用于问题排查。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/published_bots_list",
      "title": "【Deprecated】查看已发布智能体列表",
      "content": {
        "sections": [],
        "full_text": "【Deprecated】查看已发布智能体列表\n\n查看指定空间发布到 Agent as API 渠道的智能体列表。\n\n​\n\n说明\n\n该 API 即将下线，建议替换为新版的 API\n\n查看智能体列表\n\n。\n\n​\n\n此接口仅支持查看已发布为 API 服务的智能体列表。对于创建后从未发布到 API 渠道的 Bot，可以在\n\n扣子平台\n\n中查看列表及配置。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/space/published_bots_list\n\n​\n\n权限\n\n​\n\ngetPublishedBot\n\n​\n\n确保调用该接口使用的访问令牌开通了\n\ngetPublishedBot\n\n权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n调用接口查看指定空间发布到 Agent as API 渠道的智能体列表。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $AccessToken\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子平台中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nspace_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n737620236629291****\n\n​\n\n智能体所在的空间的 Space ID。Space ID 是空间的唯一标识。\n\n​\n\n进入指定空间，空间页面 URL 中\n\nspace\n\n参数后的数字就是 Space ID。例如\n\nhttps://www.coze.cn/space/736163827687053****/bot\n\n，Space ID\n\n为736163827687053****\n\n。\n\n​\n\npage_index\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n1\n\n​\n\n分页查询时的页码。默认为 1，即从第一页数据开始返回。\n\n​\n\npage_size\n\n​\n\nInteger\n\n​\n\n可选\n\n​\n\n10\n\n​\n\n分页大小。默认为 20，即每页返回 20 条数据。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n状态码。\n\n​\n\n0\n\n代表调用成功。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndata\n\n​\n\nObject of\n\nSpacePublishedBotsInfo\n\n​\n\n{ \"space_bots\": [ { \"bot_id\": \"737965697151719****\", \"bot_name\": \"图片生成文本\", \"description\": \"根据图片生成文本\", \"icon_url\": \"\n\nhttps://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/FileBizType.BIZ_BOT_ICON/default_bot_icon3.png?lk3s=50ccb0c5&x-expires=1718343510&x-signature=Y2dTjqx6Oa1RtevCZPe2\n\n***\", \"publish_time\": \"1718212388\" }, { \"bot_id\": \"737946218936519****\", \"bot_name\": \"当代毕加索\", \"description\": \"根据用户描述自动生成毕加索油画风格的图片\", \"icon_url\": \"\n\nhttps://lf26-appstore-sign.oceancloudapi.com/ocean-cloud-tos/FileBizType.BIZ_BOT_ICON/2667858400903179_17181861478\n\n***\n\n.jpeg?lk3s=50ccb0c5&x-expires=1718343510&x-signature=2FQ6%2FHmyswKDBdeTR\n\n***\", \"publish_time\": \"1718209964\" } ], \"total\": 2 }\n\n​\n\n智能体列表及总数信息。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n​\n\n{ \"logid\": \"20250106172024B5F607030EFFAD653960\" }\n\n​\n\n返回详情。\n\n​\n\n​\n\nSpacePublishedBotsInfo\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ntotal\n\n​\n\nInteger\n\n​\n\n5\n\n​\n\n智能体列表中的智能体总数。\n\n​\n\nspace_bots\n\n​\n\nArray of\n\nSpacePublishedBots\n\n​\n\n[ { \"bot_id\": \"737965697151719****\", \"bot_name\": \"图片生成文本\", \"description\": \"根据图片生成文本\", \"icon_url\": \"\n\nhttps://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/FileBizType.BIZ_BOT_ICON/default_bot_icon3.png?lk3s=50ccb0c5&x-expires=1718343510&x-signature=Y2dTjqx6Oa1RtevCZP\n\n***\", \"publish_time\": \"1718212388\" }, { \"bot_id\": \"737946218936519****\", \"bot_name\": \"当代毕加索\", \"description\": \"根据用户描述自动生成毕加索油画风格的图片\", \"icon_url\": \"\n\nhttps://lf26-appstore-sign.oceancloudapi.com/ocean-cloud-tos/FileBizType.BIZ_BOT_ICON/2667858400903179_17181861\n\n***\n\n.jpeg?lk3s=50ccb0c5&x-expires=1718343510&x-signature=2FQ6%2FHmyswKDBdeTROTO\n\n***\", \"publish_time\": \"1718209964\" } ]\n\n​\n\n指定空间发布到 Agent as API 渠道的智能体列表。\n\n​\n\n​\n\nSpacePublishedBots\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n737965697151719****\n\n​\n\n智能体的唯一标识。\n\n​\n\nbot_name\n\n​\n\nString\n\n​\n\n图片生成文本\n\n​\n\n智能体的名称。\n\n​\n\ndescription\n\n​\n\nString\n\n​\n\n根据图片生成文本\n\n​\n\n智能体的描述。\n\n​\n\nicon_url\n\n​\n\nString\n\n​\n\nhttps://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/FileBizType.BIZ_BOT_ICON/default_bot_icon3.png?lk3s=50ccb0c5&x-expires=1718343510&x-signature=Y2dTjqx6Oa1RtevCZPe27k4RKbs%3D\n\n​\n\n智能体的头像。\n\n​\n\npublish_time\n\n​\n\nString\n\n​\n\n1718212388\n\n​\n\n智能体的最近一次发布时间，格式为 10 位的 Unixtime 时间戳。此 API 返回的智能体列表按照此字段降序排列。\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nlogid\n\n​\n\nString\n\n​\n\n20241210152726467C48D89D6DB2****\n\n​\n\n本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考\n\n获取帮助和技术支持\n\n。\n\n​\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\nJSON\n\n复制\n\nGET https\n\n:\n\n//api.coze.cn/v1/space/published_bots_list?space_id=737620236629291****\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\nJSON\n\n复制\n\n{\n\n​\n\n\"code\"\n\n:\n\n0\n\n,\n\n​\n\n\"msg\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"data\"\n\n:\n\n{\n\n​\n\n\"space_bots\"\n\n:\n\n[\n\n​\n\n{\n\n​\n\n\"bot_id\"\n\n:\n\n\"737965697151719****\"\n\n,\n\n​\n\n\"bot_name\"\n\n:\n\n\"图片生成文本\"\n\n,\n\n​\n\n\"description\"\n\n:\n\n\"根据图片生成文本\"\n\n,\n\n​\n\n\"icon_url\"\n\n:\n\n\"https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/FileBizType.BIZ_BOT_ICON/default_bot_icon3.png?lk3s=50ccb0c5&x-expires=1718343510&x-signature=Y2dTjqx6Oa1RtevCZPe27k4RKbs%3D\"\n\n,\n\n​\n\n\"publish_time\"\n\n:\n\n\"1718212388\"\n\n​\n\n},\n\n​\n\n{\n\n​\n\n\"bot_id\"\n\n:\n\n\"737946218936519****\"\n\n,\n\n​\n\n\"bot_name\"\n\n:\n\n\"当代毕加索\"\n\n,\n\n​\n\n\"description\"\n\n:\n\n\"根据用户描述自动生成毕加索油画风格的图片\"\n\n,\n\n​\n\n\"icon_url\"\n\n:\n\n\"https://lf26-appstore-sign.oceancloudapi.com/ocean-cloud-tos/FileBizType.BIZ_BOT_ICON/2667858400903179_1718186147899963557.jpeg?lk3s=50ccb0c5&x-expires=1718343510&x-signature=2FQ6%2FHmyswKDBdeTROTOn0IYyrA%3D\"\n\n,\n\n​\n\n\"publish_time\"\n\n:\n\n\"1718209964\"\n\n​\n\n}\n\n​\n\n],\n\n​\n\n\"total\"\n\n:\n\n2\n\n​\n\n}\n\n​\n\n}\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n​\n\n上一篇\n\n取消订阅事件\n\n下一篇\n\n获取已发布智能体的配置（即将下线）",
        "links": [
          {
            "text": "查看智能体列表",
            "href": "https://www.coze.cn/open/docs/developer_guides/bots_list_draft_published"
          }
        ]
      },
      "markdown": "- 该 API 即将下线，建议替换为新版的 API 查看智能体列表 。 ​\n\n- 此接口仅支持查看已发布为 API 服务的智能体列表。对于创建后从未发布到 API 渠道的 Bot，可以在 扣子平台 中查看列表及配置。 ​\n\n| 请求方式​ | GET |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/space/published_bots_list​ |\n| 权限​ | getPublishedBot​确保调用该接口使用的访问令牌开通了getPublishedBot权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 调用接口查看指定空间发布到 Agent as API 渠道的智能体列表。 |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $AccessToken​ | 用于验证客户端身份的访问令牌。你可以在扣子平台中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| space_id​ | String​ | 必选​ | 737620236629291****​ | 智能体所在的空间的 Space ID。Space ID 是空间的唯一标识。​进入指定空间，空间页面 URL 中space参数后的数字就是 Space ID。例如https://www.coze.cn/space/736163827687053****/bot，Space ID为736163827687053****。​ |\n| page_index​ | Integer​ | 可选​ | 1​ | 分页查询时的页码。默认为 1，即从第一页数据开始返回。​ |\n| page_size​ | Integer​ | 可选​ | 10​ | 分页大小。默认为 20，即每页返回 20 条数据。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 状态码。​0代表调用成功。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| data​ | Object ofSpacePublishedBotsInfo​ | { \"space_bots\": [ { \"bot_id\": \"737965697151719****\", \"bot_name\": \"图片生成文本\", \"description\": \"根据图片生成文本\", \"icon_url\": \"https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/FileBizType.BIZ_BOT_ICON/default_bot_icon3.png?lk3s=50ccb0c5&x-expires=1718343510&x-signature=Y2dTjqx6Oa1RtevCZPe2***\", \"publish_time\": \"1718212388\" }, { \"bot_id\": \"737946218936519****\", \"bot_name\": \"当代毕加索\", \"description\": \"根据用户描述自动生成毕加索油画风格的图片\", \"icon_url\": \"https://lf26-appstore-sign.oceancloudapi.com/ocean-cloud-tos/FileBizType.BIZ_BOT_ICON/2667858400903179_17181861478***.jpeg?lk3s=50ccb0c5&x-expires=1718343510&x-signature=2FQ6%2FHmyswKDBdeTR***\", \"publish_time\": \"1718209964\" } ], \"total\": 2 }​ | 智能体列表及总数信息。​ |\n| detail​ | Object ofResponseDetail​ | ​{ \"logid\": \"20250106172024B5F607030EFFAD653960\" }​ | 返回详情。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| total​ | Integer​ | 5​ | 智能体列表中的智能体总数。​ |\n| space_bots​ | Array ofSpacePublishedBots​ | [ { \"bot_id\": \"737965697151719****\", \"bot_name\": \"图片生成文本\", \"description\": \"根据图片生成文本\", \"icon_url\": \"https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/FileBizType.BIZ_BOT_ICON/default_bot_icon3.png?lk3s=50ccb0c5&x-expires=1718343510&x-signature=Y2dTjqx6Oa1RtevCZP***\", \"publish_time\": \"1718212388\" }, { \"bot_id\": \"737946218936519****\", \"bot_name\": \"当代毕加索\", \"description\": \"根据用户描述自动生成毕加索油画风格的图片\", \"icon_url\": \"https://lf26-appstore-sign.oceancloudapi.com/ocean-cloud-tos/FileBizType.BIZ_BOT_ICON/2667858400903179_17181861***.jpeg?lk3s=50ccb0c5&x-expires=1718343510&x-signature=2FQ6%2FHmyswKDBdeTROTO***\", \"publish_time\": \"1718209964\" } ]​ | 指定空间发布到 Agent as API 渠道的智能体列表。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| bot_id​ | String​ | 737965697151719****​ | 智能体的唯一标识。​ |\n| bot_name​ | String​ | 图片生成文本​ | 智能体的名称。​ |\n| description​ | String​ | 根据图片生成文本​ | 智能体的描述。​ |\n| icon_url​ | String​ | https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/FileBizType.BIZ_BOT_ICON/default_bot_icon3.png?lk3s=50ccb0c5&x-expires=1718343510&x-signature=Y2dTjqx6Oa1RtevCZPe27k4RKbs%3D​ | 智能体的头像。​ |\n| publish_time​ | String​ | 1718212388​ | 智能体的最近一次发布时间，格式为 10 位的 Unixtime 时间戳。此 API 返回的智能体列表按照此字段降序排列。​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| logid​ | String​ | 20241210152726467C48D89D6DB2****​ | 本次请求的日志 ID。如果遇到异常报错场景，且反复重试仍然报错，可以根据此 logid 及错误码联系扣子团队获取帮助。详细说明可参考获取帮助和技术支持。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/get_metadata",
      "title": "获取已发布智能体的配置（即将下线）",
      "content": {
        "sections": [],
        "full_text": "获取已发布智能体的配置（即将下线）\n\n获取指定智能体的配置信息，此智能体必须已发布到 Agent as API 渠道中。\n\n​\n\n此接口仅支持查看已发布为 API 服务的智能体。对于创建后从未发布到 API 渠道的智能体，可以在\n\n扣子平台\n\n中查看列表及配置。\n\n​\n\n说明\n\n该 API 即将下线，建议替换为\n\n查看智能体配置\n\nAPI。\n\n​\n\n​\n\n基础信息\n\n​\n\n​\n\n请求方式\n\n​\n\nGET\n\n请求地址\n\n​\n\n​\n\nPlain Text\n\n复制\n\nhttps://api.coze.cn/v1/bot/get_online_info\n\n​\n\n权限\n\n​\n\ngetMetadata\n\n​\n\n确保调用该接口使用的个人令牌开通了 getMedata 权限，详细信息参考\n\n鉴权方式\n\n。\n\n​\n\n接口说明\n\n​\n\n获取指定智能体的配置信息，此智能体必须已发布到 Agent as API 渠道中。\n\n​\n\n​\n\n请求参数\n\n​\n\nHeader\n\n​\n\n​\n\n参数\n\n​\n\n取值\n\n​\n\n说明\n\n​\n\nAuthorization\n\n​\n\nBearer $AccessToken\n\n​\n\n用于验证客户端身份的访问令牌。你可以在扣子平台中生成访问令牌，详细信息，参考\n\n准备工作\n\n。\n\n​\n\nContent-Type\n\n​\n\napplication/json\n\n​\n\n解释请求正文的方式。\n\n​\n\n​\n\nQuery\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nbot_id\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n73428668*****\n\n​\n\n要查看的智能体 ID。\n\n​\n\n进入智能体的 开发页面，开发页面 URL 中\n\nbot\n\n参数后的数字就是智能体 ID。例如\n\nhttps://www.coze.cn/space/341****/bot/73428668*****\n\n，bot ID 为\n\n73428668*****\n\n。\n\n​\n\nTip\n\n确保该智能体的所属空间已经生成了访问令牌。\n\n​\n\n​\n\n​\n\n返回参数\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ncode\n\n​\n\nLong\n\n​\n\n0\n\n​\n\n调用状态码。\n\n​\n\n0\n\n表示调用成功。\n\n​\n\n其他值表示调用失败。你可以通过 msg 字段判断详细的错误原因。\n\n​\n\nmsg\n\n​\n\nString\n\n​\n\n\"\"\n\n​\n\n状态信息。API 调用失败时可通过此字段查看详细错误信息。\n\n​\n\n状态码为 0 时，msg 默认为空。\n\n​\n\ndata\n\n​\n\nObject of\n\nBotInfo\n\n​\n\n参考返回示例部分\n\n​\n\n响应的业务信息。\n\n​\n\ndetail\n\n​\n\nObject of\n\nResponseDetail\n\n​\n\n{ \"logid\": \"20250106172024B5F607030EFFAD653960\" }\n\n​\n\n响应详情信息。\n\n​\n\n​\n\nBotInfo\n\n​\n\n​\n\nPromptInfo\n\n​\n\n​\n\nPrefixPromptInfo\n\n​\n\n​\n\nOnboardingInfoV2\n\n​\n\n​\n\nPluginInfo\n\n​\n\n​\n\nApiInfo\n\n​\n\n​\n\nModelInfo\n\n​\n\n​\n\nCommonKnowledge\n\n​\n\n​\n\nKnowledgeInfo\n\n​\n\n​\n\nVariable\n\n​\n\n​\n\nMediaConfig\n\n​\n\n​\n\nVoice\n\n​\n\n​\n\nShortcutCommandInfo\n\n​\n\n​\n\nShortcutCommandToolInfo\n\n​\n\n​\n\nWorkflowInfo\n\n​\n\n​\n\nBackgroundImageInfo\n\n​\n\n​\n\nBackgroundImageDetail\n\n​\n\n​\n\nCanvasPosition\n\n​\n\n​\n\nGradientPosition\n\n​\n\n​\n\nResponseDetail\n\n​\n\n​\n\n示例\n\n​\n\n请求示例\n\n​\n\n​\n\n返回示例\n\n​\n\n​\n\n错误码\n\n​\n\n如果成功调用扣子的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以参考\n\n错误码\n\n文档查看对应的解决方法。\n\n​\n\n上一篇\n\n【Deprecated】查看已发布智能体列表\n\n下一篇\n\n错误码",
        "links": []
      },
      "markdown": "| 请求方式​ | GET |\n| 请求地址​ | ​Plain Text复制https://api.coze.cn/v1/bot/get_online_info​ |\n| 权限​ | getMetadata​确保调用该接口使用的个人令牌开通了 getMedata 权限，详细信息参考鉴权方式。​ |\n| 接口说明​ | 获取指定智能体的配置信息，此智能体必须已发布到 Agent as API 渠道中。​ |\n\n| 参数​ | 取值​ | 说明​ |\n| Authorization​ | Bearer $AccessToken​ | 用于验证客户端身份的访问令牌。你可以在扣子平台中生成访问令牌，详细信息，参考准备工作。​ |\n| Content-Type​ | application/json​ | 解释请求正文的方式。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| bot_id​ | String​ | 必选​ | 73428668*****​ | 要查看的智能体 ID。​进入智能体的 开发页面，开发页面 URL 中bot参数后的数字就是智能体 ID。例如https://www.coze.cn/space/341****/bot/73428668*****，bot ID 为73428668*****。​Tip确保该智能体的所属空间已经生成了访问令牌。​​ |\n\n| 参数​ | 类型​ | 示例​ | 说明​ |\n| code​ | Long​ | 0​ | 调用状态码。​0表示调用成功。​其他值表示调用失败。你可以通过 msg 字段判断详细的错误原因。​ |\n| msg​ | String​ | \"\"​ | 状态信息。API 调用失败时可通过此字段查看详细错误信息。​状态码为 0 时，msg 默认为空。​ |\n| data​ | Object ofBotInfo​ | 参考返回示例部分​ | 响应的业务信息。​ |\n| detail​ | Object ofResponseDetail​ | { \"logid\": \"20250106172024B5F607030EFFAD653960\" }​ | 响应详情信息。​ |\n\n- 0 表示调用成功。 ​\n\n- 其他值表示调用失败。你可以通过 msg 字段判断详细的错误原因。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/coze_error_codes",
      "title": "错误码",
      "content": {
        "sections": [],
        "full_text": "错误码\n\n如果成功调用扣子\n\n编程\n\n的 API，返回信息中 code 字段为 0。如果状态码为其他值，则表示接口调用失败。此时 msg 字段中包含详细错误信息，你可以根据下表查看对应的解决方法。\n\n​\n\n说明\n\n如需获取帮助，请记录以下错误信息，并联系扣子技术支持，我们将协助您排查问题。\n\n​\n\nResponse header 中的 X-Tt-Logid 字段值，例如\n\n20240708143040790E78F9318B35A2910B\n\n。你可以在使用 curl 发起请求时通过\n\n-i\n\n参数打印 Response header 完整内容。\n\n​\n\nResponse Body 中的 code、msg 字段值，例如\n\n{ \"code\": 700012006, \"msg\": \"access token invalid\" }\n\n。\n\n​\n\n​\n\n​\n\ncode\n\n​\n\nmsg\n\n​\n\n说明\n\n​\n\n4000\n\n​\n\n请求参数错误\n\n​\n\n原因：请求参数错误，主要原因包括参数格式错误、必选参数缺失等。\n\n​\n\n解决方案：请参考 API 文档检查请求参数。\n\n​\n\n4001\n\n​\n\nInvalid chat（包括chat id错误，chat 找不到）\n\n​\n\n原因：指定对话不存在。主要原因包括 chat id 错误、当前账号无此 chat 的权限等。\n\n​\n\n解决方案：请检查 chat id 后重试。\n\n​\n\n4002\n\n​\n\ninvalid conversation（包括conversation id错误，conversation 找不到）\n\n​\n\n原因：指定会话不存在。主要原因包括 conversation id 错误、当前账号无此 conversation 的权限等。\n\n​\n\n解决方案：请检查 conversation id 后重试。\n\n​\n\n4003\n\n​\n\nmeta data 超过限制\n\n​\n\n​\n\n原因：meta_data 字段的传参超出字段限制。\n\n​\n\n解决方案：请参考 API 文档检查请求参数。\n\n​\n\n4004\n\n​\n\nadditional messages超过限制\n\n​\n\n​\n\n原因：additional_messages 字段的传参超出字段限制。\n\n​\n\n解决方案：请参考 API 文档检查请求参数。\n\n​\n\n4005\n\n​\n\ninvalid message（包括message id错误，message content错误）\n\n​\n\n原因：指定消息不存在。主要原因包括 message id 错误、当前账号无此 message 的权限、content 内容不符合要求等。\n\n​\n\n解决方案：请检查 message id 和 content 后重试。\n\n​\n\n4006\n\n​\n\ninvalid bot（包括bot id错误，bot 找不到）\n\n​\n\n原因：指定智能体不存在。主要原因包括智能体id 错误、当前账号无此智能体的权限等。\n\n​\n\n解决方案：请检查智能体id 后重试。\n\n​\n\n4007\n\n​\n\n流false仅在自动保存为true时允许\n\n​\n\n原因：非流式响应下（stream=false），auto_save_history 必须设置为 true，即保存历史对话，否则无法查看对话状态和模型回复。\n\n​\n\n解决方案：修改请求参数设置，详细说明可参考\n\n​\n\n发起对话\n\n。\n\n​\n\n4008\n\n​\n\n用户限流\n\n​\n\n​\n\n原因：调用频率达到上限。当日智能体使用次数超过限制或 API 的 QPS 超出了限制。\n\n​\n\n解决方案：请稍后再试或明日再试。\n\n​\n\n4009\n\n​\n\n已达系统请求\n\n上限，\n\n请稍后重试\n\n​\n\n​\n\n原因：当前使用人数过多。\n\n​\n\n解决方案：请稍后再试。\n\n​\n\n4010\n\n​\n\n当前问题请求的 prompt token 数量超过模型上限\n\n​\n\n​\n\n原因：当前问题请求的 prompt token 数量超过模型上限。\n\n​\n\n解决方案：建议缩短问题长度后重试。\n\n​\n\n4011\n\n​\n\n当前账户的 Coze Token 余额不足\n\n​\n\n​\n\n原因：当前账户的 Coze Token 余额不足。\n\n​\n\n解决方案：建议充值后重试。\n\n​\n\n4012\n\n​\n\ninvalid model\n\n​\n\n原因：无效模型，可能原因包括模型从扣子编程下架等。\n\n​\n\n解决方案：建议更换智能体的模型之后重试。\n\n​\n\n4013\n\n​\n\n模型错误\n\n​\n\n原因：模型服务报错。\n\n​\n\n解决方案：建议稍后重试。\n\n​\n\n4014\n\n​\n\n问题无法回答\n\n​\n\n原因：智能体无法回答此问题。\n\n​\n\n解决方案：请更换问题后重试。\n\n​\n\n4015\n\n​\n\nbot 未发布到API\n\n​\n\n原因：此智能体未发布为 API 服务。\n\n​\n\n解决方案：请参考\n\n​\n\n准备工作\n\n完成 API 调用前的准备工作。\n\n​\n\n4016\n\n​\n\n当前会话已有chat在运行\n\n​\n\n原因：当前会话中已有运行中的对话，请等待对话完成后再发起新的对话\n\n。\n\n​\n\n解决方案：请更换会话后重试。\n\n​\n\n4019\n\n​\n\n火山Bot调用按量余额不足\n\n​\n\n原因：账号已欠费。\n\n​\n\n解决方案：为了不影响产品的正常使用，请及时充值。\n\n​\n\n4020\n\n​\n\n火山Bot调用超出RPM峰值\n\n​\n\n原因：当前 RPM 已超出购买的额度。\n\n​\n\n解决方案：为了不影响产品的正常使用，请增加 RPM 的额度。\n\n​\n\n4021\n\n​\n\n工作流未配置\n\n​\n\n原因：当前会话中已有运行中的对话，请等待对话完成后再发起新的对话。\n\n​\n\n解决方案：请更换会话后重试。\n\n​\n\n4022\n\n​\n\n模型欠费\n\n​\n\n原因：火山方舟模型服务已欠费。\n\n​\n\n解决方案：为了不影响产品的正常使用，请及时结清欠款恢复账号。\n\n​\n\n4028\n\n​\n\nInsufficient coze credits balance, please wait for the quota refresh or upgrade to paid version.\n\n​\n\n原因：个人版订阅套餐积分不足。\n\n​\n\n解决方案：增购积分或者升级订阅套餐。\n\n​\n\n4100\n\n​\n\n身份验证无效\n\n​\n\n原因：个人访问令牌（PAT）不正确。\n\n​\n\n解决方案：请检查后重试。\n\n​\n\n4101\n\n​\n\n没有权限访问该资源\n\n​\n\n原因：当前使用的个人访问令牌没有权限访问该资源。\n\n​\n\n解决方案：请检查个人访问令牌的权限后重试。\n\n​\n\n4102\n\n​\n\n命中风控拦截\n\n​\n\n原因：系统检测到异常活动。\n\n​\n\n解决方案：请稍后重试。若持续报错，请根据此错误码和 X-Tt-Logid 提交反馈，帮助我们快速定位问题。\n\n​\n\n4104\n\n​\n\n当前对话不支持取消\n\n​\n\n原因：\n\n当前的对话状态为 completed、failed 或 requires_action\n\n，不支持取消对话。\n\n​\n\n解决方案：确认对话 ID 和对话状态。\n\n​\n\n4105\n\n​\n\n内容包含敏感信息,请修改后重新提交\n\n​\n\n原因：当前发布智能体包含敏感信息。\n\n​\n\n解决方案：请检查智能体的人设及回复逻辑、开场白等配置，删除敏感词后重新尝试发布。\n\n​\n\n4200\n\n​\n\n资源未找到\n\n​\n\n原因：未找到该资源，主要原因包括资源 ID 错误、此资源并非由当前账号创建等。\n\n​\n\n解决方案：建议检查资源 ID 后重试。\n\n​\n\n4201\n\n​\n\n企业/团队人员已存在，请勿重复添加。\n\n​\n\n组织成员已经存在，请不要重复加入。\n\n​\n\n原因：待添加的人员已在目标企业 / 团队 / 组织中，重复发起添加操作。\n\n​\n\n解决方案：建议检查目标企业 / 团队 / 组织中是否已存在待添加人员，如已存在，请勿重复添加。\n\n​\n\n4300\n\n​\n\n上传文件时文件为空\n\n​\n\n原因：待上传的文件为空，主要原因为指定的文件名称或路径不存在、请求头 Content-Type 未指定为 multipart/form-data 等。\n\n​\n\n解决方案：建议参考 API 文档检查相关设置。\n\n​\n\n4301\n\n​\n\n文件上传时超过一个\n\n​\n\n原因：每次调用上传文件接口，只能上传一个文件。\n\n​\n\n解决方案：建议分批上传。\n\n​\n\n4302\n\n​\n\n文件上传大小超过限制\n\n​\n\n原因：待上传的文件大小超出接口限制。\n\n​\n\n解决方案：建议更换文件后重试。其他限制可参考\n\n​\n\n上传文件\n\n。\n\n​\n\n4303\n\n​\n\n文件类型不支持\n\n​\n\n原因：文件格式问题，暂不支持上传此类型的文件。\n\n​\n\n解决方案：其他限制可参考\n\n​\n\n上传文件\n\n。\n\n​\n\n4304\n\n​\n\n文件无效\n\n​\n\n原因：文件故障等问题。\n\n​\n\n解决方案：建议更换文件后重试。\n\n​\n\n4314\n\n​\n\n未找到执行记录\n\n​\n\n原因：没有找到指定工作流的该执行记录。\n\n​\n\n解决方案：建议更换 execute_id 或 workflow_id 后重试。\n\n​\n\n4315\n\n​\n\n执行已结束\n\n​\n\n原因：工作流执行结束，无法恢复运行。\n\n​\n\n解决方案：确认工作流 ID 是否正确。\n\n​\n\n5000\n\n​\n\n服务器内部错误\n\n​\n\n原因：服务端内部错误。\n\n​\n\n解决方案：请稍后重试。若持续报错，请根据此错误码提交反馈，帮助我们快速定位问题。\n\n​\n\n​\n\n​\n\n上一篇\n\n获取已发布智能体的配置（即将下线）\n\n下一篇\n\nAPI 常见问题",
        "links": []
      },
      "markdown": "- Response header 中的 X-Tt-Logid 字段值，例如 20240708143040790E78F9318B35A2910B 。你可以在使用 curl 发起请求时通过 -i 参数打印 Response header 完整内容。 ​\n\n- Response Body 中的 code、msg 字段值，例如 { \"code\": 700012006, \"msg\": \"access token invalid\" } 。 ​\n\n| code​ | msg​ | 说明​ |\n| 4000​ | 请求参数错误​ | 原因：请求参数错误，主要原因包括参数格式错误、必选参数缺失等。​解决方案：请参考 API 文档检查请求参数。​ |\n| 4001​ | Invalid chat（包括chat id错误，chat 找不到）​ | 原因：指定对话不存在。主要原因包括 chat id 错误、当前账号无此 chat 的权限等。​解决方案：请检查 chat id 后重试。​ |\n| 4002​ | invalid conversation（包括conversation id错误，conversation 找不到）​ | 原因：指定会话不存在。主要原因包括 conversation id 错误、当前账号无此 conversation 的权限等。​解决方案：请检查 conversation id 后重试。​ |\n| 4003​ | meta data 超过限制​​ | 原因：meta_data 字段的传参超出字段限制。​解决方案：请参考 API 文档检查请求参数。​ |\n| 4004​ | additional messages超过限制​​ | 原因：additional_messages 字段的传参超出字段限制。​解决方案：请参考 API 文档检查请求参数。​ |\n| 4005​ | invalid message（包括message id错误，message content错误）​ | 原因：指定消息不存在。主要原因包括 message id 错误、当前账号无此 message 的权限、content 内容不符合要求等。​解决方案：请检查 message id 和 content 后重试。​ |\n| 4006​ | invalid bot（包括bot id错误，bot 找不到）​ | 原因：指定智能体不存在。主要原因包括智能体id 错误、当前账号无此智能体的权限等。​解决方案：请检查智能体id 后重试。​ |\n| 4007​ | 流false仅在自动保存为true时允许​ | 原因：非流式响应下（stream=false），auto_save_history 必须设置为 true，即保存历史对话，否则无法查看对话状态和模型回复。​解决方案：修改请求参数设置，详细说明可参考​发起对话。​ |\n| 4008​ | 用户限流​​ | 原因：调用频率达到上限。当日智能体使用次数超过限制或 API 的 QPS 超出了限制。​解决方案：请稍后再试或明日再试。​ |\n| 4009​ | 已达系统请求上限，请稍后重试​​ | 原因：当前使用人数过多。​解决方案：请稍后再试。​ |\n| 4010​ | 当前问题请求的 prompt token 数量超过模型上限​​ | 原因：当前问题请求的 prompt token 数量超过模型上限。​解决方案：建议缩短问题长度后重试。​ |\n| 4011​ | 当前账户的 Coze Token 余额不足​​ | 原因：当前账户的 Coze Token 余额不足。​解决方案：建议充值后重试。​ |\n| 4012​ | invalid model​ | 原因：无效模型，可能原因包括模型从扣子编程下架等。​解决方案：建议更换智能体的模型之后重试。​ |\n| 4013​ | 模型错误​ | 原因：模型服务报错。​解决方案：建议稍后重试。​ |\n| 4014​ | 问题无法回答​ | 原因：智能体无法回答此问题。​解决方案：请更换问题后重试。​ |\n| 4015​ | bot 未发布到API​ | 原因：此智能体未发布为 API 服务。​解决方案：请参考​准备工作完成 API 调用前的准备工作。​ |\n| 4016​ | 当前会话已有chat在运行​ | 原因：当前会话中已有运行中的对话，请等待对话完成后再发起新的对话。​解决方案：请更换会话后重试。​ |\n| 4019​ | 火山Bot调用按量余额不足​ | 原因：账号已欠费。​解决方案：为了不影响产品的正常使用，请及时充值。​ |\n| 4020​ | 火山Bot调用超出RPM峰值​ | 原因：当前 RPM 已超出购买的额度。​解决方案：为了不影响产品的正常使用，请增加 RPM 的额度。​ |\n| 4021​ | 工作流未配置​ | 原因：当前会话中已有运行中的对话，请等待对话完成后再发起新的对话。​解决方案：请更换会话后重试。​ |\n| 4022​ | 模型欠费​ | 原因：火山方舟模型服务已欠费。​解决方案：为了不影响产品的正常使用，请及时结清欠款恢复账号。​ |\n| 4028​ | Insufficient coze credits balance, please wait for the quota refresh or upgrade to paid version.​ | 原因：个人版订阅套餐积分不足。​解决方案：增购积分或者升级订阅套餐。​ |\n| 4100​ | 身份验证无效​ | 原因：个人访问令牌（PAT）不正确。​解决方案：请检查后重试。​ |\n| 4101​ | 没有权限访问该资源​ | 原因：当前使用的个人访问令牌没有权限访问该资源。​解决方案：请检查个人访问令牌的权限后重试。​ |\n| 4102​ | 命中风控拦截​ | 原因：系统检测到异常活动。​解决方案：请稍后重试。若持续报错，请根据此错误码和 X-Tt-Logid 提交反馈，帮助我们快速定位问题。​ |\n| 4104​ | 当前对话不支持取消​ | 原因：当前的对话状态为 completed、failed 或 requires_action，不支持取消对话。​解决方案：确认对话 ID 和对话状态。​ |\n| 4105​ | 内容包含敏感信息,请修改后重新提交​ | 原因：当前发布智能体包含敏感信息。​解决方案：请检查智能体的人设及回复逻辑、开场白等配置，删除敏感词后重新尝试发布。​ |\n| 4200​ | 资源未找到​ | 原因：未找到该资源，主要原因包括资源 ID 错误、此资源并非由当前账号创建等。​解决方案：建议检查资源 ID 后重试。​ |\n| 4201​ | 企业/团队人员已存在，请勿重复添加。​组织成员已经存在，请不要重复加入。​ | 原因：待添加的人员已在目标企业 / 团队 / 组织中，重复发起添加操作。​解决方案：建议检查目标企业 / 团队 / 组织中是否已存在待添加人员，如已存在，请勿重复添加。​ |\n| 4300​ | 上传文件时文件为空​ | 原因：待上传的文件为空，主要原因为指定的文件名称或路径不存在、请求头 Content-Type 未指定为 multipart/form-data 等。​解决方案：建议参考 API 文档检查相关设置。​ |\n| 4301​ | 文件上传时超过一个​ | 原因：每次调用上传文件接口，只能上传一个文件。​解决方案：建议分批上传。​ |\n| 4302​ | 文件上传大小超过限制​ | 原因：待上传的文件大小超出接口限制。​解决方案：建议更换文件后重试。其他限制可参考​上传文件。​ |\n| 4303​ | 文件类型不支持​ | 原因：文件格式问题，暂不支持上传此类型的文件。​解决方案：其他限制可参考​上传文件。​ |\n| 4304​ | 文件无效​ | 原因：文件故障等问题。​解决方案：建议更换文件后重试。​ |\n| 4314​ | 未找到执行记录​ | 原因：没有找到指定工作流的该执行记录。​解决方案：建议更换 execute_id 或 workflow_id 后重试。​ |\n| 4315​ | 执行已结束​ | 原因：工作流执行结束，无法恢复运行。​解决方案：确认工作流 ID 是否正确。​ |\n| 5000​ | 服务器内部错误​ | 原因：服务端内部错误。​解决方案：请稍后重试。若持续报错，请根据此错误码提交反馈，帮助我们快速定位问题。​ |\n\n- 原因：请求参数错误，主要原因包括参数格式错误、必选参数缺失等。 ​\n\n- 解决方案：请参考 API 文档检查请求参数。 ​\n\n- 原因：指定对话不存在。主要原因包括 chat id 错误、当前账号无此 chat 的权限等。 ​\n\n- 解决方案：请检查 chat id 后重试。 ​\n\n- 原因：指定会话不存在。主要原因包括 conversation id 错误、当前账号无此 conversation 的权限等。 ​\n\n- 解决方案：请检查 conversation id 后重试。 ​\n\n- 原因：meta_data 字段的传参超出字段限制。 ​\n\n- 解决方案：请参考 API 文档检查请求参数。 ​\n\n- 原因：additional_messages 字段的传参超出字段限制。 ​\n\n- 解决方案：请参考 API 文档检查请求参数。 ​\n\n- 原因：指定消息不存在。主要原因包括 message id 错误、当前账号无此 message 的权限、content 内容不符合要求等。 ​\n\n- 解决方案：请检查 message id 和 content 后重试。 ​\n\n- 原因：指定智能体不存在。主要原因包括智能体id 错误、当前账号无此智能体的权限等。 ​\n\n- 解决方案：请检查智能体id 后重试。 ​\n\n- 原因：非流式响应下（stream=false），auto_save_history 必须设置为 true，即保存历史对话，否则无法查看对话状态和模型回复。 ​\n\n- 解决方案：修改请求参数设置，详细说明可参考 ​ 发起对话 。 ​\n\n- 原因：调用频率达到上限。当日智能体使用次数超过限制或 API 的 QPS 超出了限制。 ​\n\n- 解决方案：请稍后再试或明日再试。 ​\n\n- 原因：当前使用人数过多。 ​\n\n- 解决方案：请稍后再试。 ​\n\n- 原因：当前问题请求的 prompt token 数量超过模型上限。 ​\n\n- 解决方案：建议缩短问题长度后重试。 ​\n\n- 原因：当前账户的 Coze Token 余额不足。 ​\n\n- 解决方案：建议充值后重试。 ​\n\n- 原因：无效模型，可能原因包括模型从扣子编程下架等。 ​\n\n- 解决方案：建议更换智能体的模型之后重试。 ​\n\n- 原因：模型服务报错。 ​\n\n- 解决方案：建议稍后重试。 ​\n\n- 原因：智能体无法回答此问题。 ​\n\n- 解决方案：请更换问题后重试。 ​\n\n- 原因：此智能体未发布为 API 服务。 ​\n\n- 解决方案：请参考 ​ 准备工作 完成 API 调用前的准备工作。 ​\n\n- 原因：当前会话中已有运行中的对话，请等待对话完成后再发起新的对话 。 ​\n\n- 解决方案：请更换会话后重试。 ​\n\n- 原因：账号已欠费。 ​\n\n- 解决方案：为了不影响产品的正常使用，请及时充值。 ​\n\n- 原因：当前 RPM 已超出购买的额度。 ​\n\n- 解决方案：为了不影响产品的正常使用，请增加 RPM 的额度。 ​\n\n- 原因：当前会话中已有运行中的对话，请等待对话完成后再发起新的对话。 ​\n\n- 解决方案：请更换会话后重试。 ​\n\n- 原因：火山方舟模型服务已欠费。 ​\n\n- 解决方案：为了不影响产品的正常使用，请及时结清欠款恢复账号。 ​\n\n- 原因：个人版订阅套餐积分不足。 ​\n\n- 解决方案：增购积分或者升级订阅套餐。 ​\n\n- 原因：个人访问令牌（PAT）不正确。 ​\n\n- 解决方案：请检查后重试。 ​\n\n- 原因：当前使用的个人访问令牌没有权限访问该资源。 ​\n\n- 解决方案：请检查个人访问令牌的权限后重试。 ​\n\n- 原因：系统检测到异常活动。 ​\n\n- 解决方案：请稍后重试。若持续报错，请根据此错误码和 X-Tt-Logid 提交反馈，帮助我们快速定位问题。 ​\n\n- 原因： 当前的对话状态为 completed、failed 或 requires_action ，不支持取消对话。 ​\n\n- 解决方案：确认对话 ID 和对话状态。 ​\n\n- 原因：当前发布智能体包含敏感信息。 ​\n\n- 解决方案：请检查智能体的人设及回复逻辑、开场白等配置，删除敏感词后重新尝试发布。 ​\n\n- 原因：未找到该资源，主要原因包括资源 ID 错误、此资源并非由当前账号创建等。 ​\n\n- 解决方案：建议检查资源 ID 后重试。 ​\n\n- 原因：待添加的人员已在目标企业 / 团队 / 组织中，重复发起添加操作。 ​\n\n- 解决方案：建议检查目标企业 / 团队 / 组织中是否已存在待添加人员，如已存在，请勿重复添加。 ​\n\n- 原因：待上传的文件为空，主要原因为指定的文件名称或路径不存在、请求头 Content-Type 未指定为 multipart/form-data 等。 ​\n\n- 解决方案：建议参考 API 文档检查相关设置。 ​\n\n- 原因：每次调用上传文件接口，只能上传一个文件。 ​\n\n- 解决方案：建议分批上传。 ​\n\n- 原因：待上传的文件大小超出接口限制。 ​\n\n- 解决方案：建议更换文件后重试。其他限制可参考 ​ 上传文件 。 ​\n\n- 原因：文件格式问题，暂不支持上传此类型的文件。 ​\n\n- 解决方案：其他限制可参考 ​ 上传文件 。 ​\n\n- 原因：文件故障等问题。 ​\n\n- 解决方案：建议更换文件后重试。 ​\n\n- 原因：没有找到指定工作流的该执行记录。 ​\n\n- 解决方案：建议更换 execute_id 或 workflow_id 后重试。 ​\n\n- 原因：工作流执行结束，无法恢复运行。 ​\n\n- 解决方案：确认工作流 ID 是否正确。 ​\n\n- 原因：服务端内部错误。 ​\n\n- 解决方案：请稍后重试。若持续报错，请根据此错误码提交反馈，帮助我们快速定位问题。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/api_faq",
      "title": "API 常见问题",
      "content": {
        "sections": [],
        "full_text": "API 常见问题\n\n调用非流式接口时，返回结果中为什么没有数据？\n\n​\n\n流式 API\n\n：调用时会在返回结果中直接包含模型生成的内容。\n\n​\n\n非流式 API\n\n：响应消息中\n\n不会即时返回模型生成的内容\n\n，需通过后续 API 查询结果。例如：调用\n\n​\n\n发起对话\n\nAPI 时，如果设置 stream=false，你需要通过如下方法查询模型生成的内容：\n\n​\n\na.\n\n记录\n\n​\n\n发起对话\n\nAPI 响应中返回的\n\nchat_id\n\n和\n\nconversation_id\n\n。\n\n​\n\nb.\n\n调用\n\n​\n\n查看对话详情\n\nAPI 确认本次对话处理已结束。\n\n​\n\nc.\n\n调用\n\n​\n\n查看对话消息详情\n\nAPI 查看模型回复的内容。\n\n​\n\n调用发起对话 API 时，工作流能异步运行吗？\n\n​\n\n调用\n\n​\n\n发起对话\n\nAPI 可与智能体进行对话，如果智能体中绑定了工作流，调用该 API 运行智能体内的工作流时，工作流将以同步方式运行，且不支持配置为异步运行。\n\n​\n\n​\n\n上一篇\n\n错误码\n\n下一篇\n\n模型能力差异",
        "links": []
      },
      "markdown": "- 流式 API ：调用时会在返回结果中直接包含模型生成的内容。 ​\n\n- 非流式 API ：响应消息中 不会即时返回模型生成的内容 ，需通过后续 API 查询结果。例如：调用 ​ 发起对话 API 时，如果设置 stream=false，你需要通过如下方法查询模型生成的内容： ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/model_api_param_support",
      "title": "模型能力差异",
      "content": {
        "sections": [],
        "full_text": "模型能力差异\n\n调用\n\n​\n\n创建智能体\n\n或\n\n​\n\n更新智能体\n\nAPI 时，仅部分模型支持配置前缀缓存和深度思考相关参数，各模型对这些特定参数的支持情况如下表所示，其他参数为通用参数所有模型都支持。\n\n​\n\n​\n\n模型名称\n\n​\n\n模型版本\n\n​\n\nprefix_prompt_info（前缀缓存提示词）\n\n​\n\ncache_type（Context API 前缀缓存）\n\n​\n\nparameters（Responses API 前缀缓存）\n\n​\n\nparameters（深度思考）\n\n​\n\napi_mode（Responses API）\n\n​\n\ntop_p\n\n​\n\ntemperature\n\n​\n\n豆包·编程\n\n​\n\nDoubao-Seed-Code\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\n-\n\n​\n\n豆包・1.6・极致速度・250828\n\n​\n\nDoubao-seed-1.6-flash-250828\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n豆包・1.6・思考深度调节\n\n​\n\ndoubao-seed-1-6-251015\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n豆包・1.6・lite・251015\n\n​\n\ndoubao-seed-1.6-lite\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n豆包・1.6・极致速度・250715\n\n​\n\nDoubao-seed-1.6-flash-250715\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n豆包・1.6・极致速度\n\n​\n\ndoubao-seed-1-6-flash-250615\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n豆包・1.6・深度思考・250715\n\n​\n\nDoubao-1.6-thinking-250715\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\n-\n\n​\n\n豆包・1.6・深度思考\n\n​\n\nDoubao-Seed-1.6-thinking\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\n-\n\n​\n\n豆包・1.6・自动深度思考\n\n​\n\nDoubao-Seed-1.6-250615\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n豆包・1.6・视觉理解・250815\n\n​\n\ndoubao-seed-1-6-vision-250815\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n豆包・1.5・Pro・深度思考・128K\n\n​\n\nDoubao-1.5-thinking-pro/250415\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n豆包・1.5・Pro・32k\n\n​\n\nDoubao-1.5-pro-32k\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n豆包・1.5・Lite・32k\n\n​\n\nDoubao-1.5-lite-32k/250115\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n豆包・1.5・Pro・视觉理解・Lite\n\n​\n\ndoubao-1.5-vision-lite-250315\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n豆包・1.5・Pro・视觉深度思考\n\n​\n\ndoubao-1-5-thinking-vision-pro-250428\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n豆包・1.5・Pro・视觉推理・128K\n\n​\n\nDoubao-1.5-thinking-pro/m-250415\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n豆包・1.5・Pro・视觉理解 - 250328\n\n​\n\ndoubao-1.5-vision-pro-250328\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n豆包・1.5・Pro・视觉理解\n\n​\n\nDoubao-1.5-pro-vision-32k/250115\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n豆包・1.5・Pro・角色扮演・250715\n\n​\n\nDoubao-1.5-pro-32k-character-250715\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n豆包・1.5・Pro・角色扮演\n\n​\n\ndoubao-1-5-pro-32k-character-250228\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n豆包・GUI・Agent 模型\n\n​\n\nDoubao-1.5-UI-TARS\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n豆包・通用模型・Lite\n\n​\n\nDoubao-lite\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\nDeepSeek-R1/250528\n\n​\n\nDeepSeek-R1/250528\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\nDeepSeek-V3 工具调用\n\n​\n\nV3 functionCall 版本\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\nDeepSeek-V3-0324\n\n​\n\nDeepSeek-chat\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\nDeepSeek-V3.1\n\n​\n\nDeepSeek-V3.1\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n阶跃星辰・1.5v・视频理解\n\n​\n\nstep-1.5v-mini\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n阶跃星辰・1v・图片理解\n\n​\n\nstep-1v-8k\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\nKimi-K2-250905\n\n​\n\nKimi-K2-250905\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n-\n\n​\n\n-\n\n​\n\nKimi-8k\n\n​\n\nmoonshot-v1-8k\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\nKimi-32k\n\n​\n\nmoonshot-v1-32k\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\nKimi-128k\n\n​\n\nmoonshot-v1-128k\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n-\n\n​\n\n✔️\n\n​\n\n✔️\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n上一篇\n\nAPI 常见问题\n\n下一篇\n\n通过对话接口获取智能体回复",
        "links": []
      },
      "markdown": "| 模型名称​ | 模型版本​ | prefix_prompt_info（前缀缓存提示词）​ | cache_type（Context API 前缀缓存）​ | parameters（Responses API 前缀缓存）​ | parameters（深度思考）​ | api_mode（Responses API）​ | top_p​ | temperature​ |\n| 豆包·编程​ | Doubao-Seed-Code​ | ✔️​ | -​ | ✔️​ | ✔️​ | ✔️​ | -​ | -​ |\n| 豆包・1.6・极致速度・250828​ | Doubao-seed-1.6-flash-250828​ | ✔️​ | -​ | ✔️​ | ✔️​ | ✔️​ | ✔️​ | ✔️​ |\n| 豆包・1.6・思考深度调节​ | doubao-seed-1-6-251015​ | ✔️​ | -​ | ✔️​ | ✔️​ | ✔️​ | ✔️​ | ✔️​ |\n| 豆包・1.6・lite・251015​ | doubao-seed-1.6-lite​ | ✔️​ | -​ | ✔️​ | -​ | ✔️​ | ✔️​ | ✔️​ |\n| 豆包・1.6・极致速度・250715​ | Doubao-seed-1.6-flash-250715​ | ✔️​ | -​ | ✔️​ | ✔️​ | ✔️​ | ✔️​ | ✔️​ |\n| 豆包・1.6・极致速度​ | doubao-seed-1-6-flash-250615​ | ✔️​ | -​ | ✔️​ | ✔️​ | ✔️​ | ✔️​ | ✔️​ |\n| 豆包・1.6・深度思考・250715​ | Doubao-1.6-thinking-250715​ | ✔️​ | -​ | ✔️​ | -​ | ✔️​ | -​ | -​ |\n| 豆包・1.6・深度思考​ | Doubao-Seed-1.6-thinking​ | ✔️​ | -​ | ✔️​ | -​ | ✔️​ | -​ | -​ |\n| 豆包・1.6・自动深度思考​ | Doubao-Seed-1.6-250615​ | ✔️​ | -​ | ✔️​ | ✔️​ | ✔️​ | ✔️​ | ✔️​ |\n| 豆包・1.6・视觉理解・250815​ | doubao-seed-1-6-vision-250815​ | ✔️​ | -​ | ✔️​ | -​ | ✔️​ | ✔️​ | ✔️​ |\n| 豆包・1.5・Pro・深度思考・128K​ | Doubao-1.5-thinking-pro/250415​ | -​ | -​ | -​ | -​ | -​ | ✔️​ | ✔️​ |\n| 豆包・1.5・Pro・32k​ | Doubao-1.5-pro-32k​ | ✔️​ | ✔️​ | -​ | -​ | -​ | ✔️​ | ✔️​ |\n| 豆包・1.5・Lite・32k​ | Doubao-1.5-lite-32k/250115​ | ✔️​ | ✔️​ | -​ | -​ | -​ | ✔️​ | ✔️​ |\n| 豆包・1.5・Pro・视觉理解・Lite​ | doubao-1.5-vision-lite-250315​ | -​ | -​ | -​ | -​ | -​ | ✔️​ | ✔️​ |\n| 豆包・1.5・Pro・视觉深度思考​ | doubao-1-5-thinking-vision-pro-250428​ | -​ | -​ | -​ | ✔️​ | -​ | ✔️​ | ✔️​ |\n| 豆包・1.5・Pro・视觉推理・128K​ | Doubao-1.5-thinking-pro/m-250415​ | -​ | -​ | -​ | -​ | -​ | ✔️​ | ✔️​ |\n| 豆包・1.5・Pro・视觉理解 - 250328​ | doubao-1.5-vision-pro-250328​ | -​ | -​ | -​ | -​ | -​ | ✔️​ | ✔️​ |\n| 豆包・1.5・Pro・视觉理解​ | Doubao-1.5-pro-vision-32k/250115​ | -​ | -​ | -​ | -​ | -​ | ✔️​ | ✔️​ |\n| 豆包・1.5・Pro・角色扮演・250715​ | Doubao-1.5-pro-32k-character-250715​ | -​ | -​ | -​ | -​ | -​ | ✔️​ | ✔️​ |\n| 豆包・1.5・Pro・角色扮演​ | doubao-1-5-pro-32k-character-250228​ | -​ | -​ | -​ | -​ | -​ | ✔️​ | ✔️​ |\n| 豆包・GUI・Agent 模型​ | Doubao-1.5-UI-TARS​ | -​ | -​ | -​ | ✔️​ | -​ | ✔️​ | ✔️​ |\n| 豆包・通用模型・Lite​ | Doubao-lite​ | -​ | -​ | -​ | -​ | -​ | ✔️​ | ✔️​ |\n| DeepSeek-R1/250528​ | DeepSeek-R1/250528​ | -​ | -​ | -​ | -​ | -​ | ✔️​ | ✔️​ |\n| DeepSeek-V3 工具调用​ | V3 functionCall 版本​ | -​ | -​ | -​ | -​ | -​ | ✔️​ | ✔️​ |\n| DeepSeek-V3-0324​ | DeepSeek-chat​ | ✔️​ | ✔️​ | -​ | -​ | -​ | ✔️​ | ✔️​ |\n| DeepSeek-V3.1​ | DeepSeek-V3.1​ | ✔️​ | -​ | ✔️​ | -​ | ✔️​ | ✔️​ | ✔️​ |\n| 阶跃星辰・1.5v・视频理解​ | step-1.5v-mini​ | -​ | -​ | -​ | -​ | -​ | ✔️​ | ✔️​ |\n| 阶跃星辰・1v・图片理解​ | step-1v-8k​ | -​ | -​ | -​ | -​ | -​ | ✔️​ | ✔️​ |\n| Kimi-K2-250905​ | Kimi-K2-250905​ | ✔️​ | -​ | ✔️​ | -​ | ✔️​ | -​ | -​ |\n| Kimi-8k​ | moonshot-v1-8k​ | -​ | -​ | -​ | -​ | -​ | ✔️​ | ✔️​ |\n| Kimi-32k​ | moonshot-v1-32k​ | -​ | -​ | -​ | -​ | -​ | ✔️​ | ✔️​ |\n| Kimi-128k​ | moonshot-v1-128k​ | -​ | -​ | -​ | -​ | -​ | ✔️​ | ✔️​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/get_chat_response",
      "title": "通过对话接口获取智能体回复",
      "content": {
        "sections": [],
        "full_text": "通过对话接口获取智能体回复\n\n​\n\n获取智能体回复\n\n​\n\n调用对话接口后，服务端会处理请求并生成智能体回复。你可以通过以下方式获取智能体的回复详情。\n\n​\n\n​\n\n获取方式\n\n​\n\n说明\n\n​\n\n通过流式响应实时显示智能体回复\n\n​\n\n如果客户端中需要打字机效果实时增量显示智能体回复，可以在调用发起对话接口时，设置流式响应（stream=true），并在客户端对话框中实时打印接口响应中的模型回复部分。\n\n​\n\n该场景下，客户端需要自行拼接响应内容。\n\n​\n\n仅解析流式响应的智能体回复部分\n\n​\n\n如果不需要增量流式显示智能体回复，只需要快速获取最终结果，可以在调用发起对话接口时，设置流式响应（stream=true），并在 Response 中，在事件\n\nevent:conversation.message.completed\n\n中，取 type=answer 的事件，例如以下事件中，content 部分为智能体回复。\n\n​\n\n​\n\nPlain Text\n\n复制\n\nevent:conversation.message.completed\n\n​\n\ndata:{\"id\":\"738215949412347****\",\"conversation_id\":\"738147352534297****\",\"bot_id\":\"737946218936519****\",\"role\":\"assistant\",\"type\":\"answer\",\"content\":\"2024 年 10 月 1 日是星期三。\",\"content_type\":\"text\",\"chat_id\":\"738215948713169****\"}\n\n​\n\n​\n\n对话结束后，事件\n\nevent:conversation.message.completed\n\n中可能有多种消息类型，你可以按需解析。常见的消息类型可参考\n\n​\n\n消息示例\n\n。\n\n​\n\n通过非流式响应主动查询智能体回复\n\n​\n\n你也可以参考以下流程主动查询智能体回复。\n\n​\n\n1.\n\n调用\n\n发起会话\n\n接口，并设置 stream = false，auto_save_history=true，表示使用非流式响应，并记录历史消息。\n\n​\n\n你需要记录会话的 Conversation ID 和 Chat ID，用于后续查看详细信息。\n\n​\n\n2.\n\n定期轮询\n\n​\n\n查看对话详情\n\n接口，建议每次间隔 1 秒以上，直到会话状态流转为终态，即 status 为 completed 或 required_action。\n\n​\n\n3.\n\n调用\n\n​\n\n查看对话消息详情\n\n接口，查询模型生成的最终结果。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n消息示例\n\n​\n\n文本格式智能体回复\n\n​\n\ndata 字段中，type=answer，且 content_type=text 的消息为文本格式的智能体回复。示例如下：\n\n​\n\n​\n\nJSON\n\n复制\n\nevent\n\n:\n\nconversation.message.completed\n\n​\n\ndata\n\n:{\n\n\"id\"\n\n:\n\n\"739002977785765****\"\n\n,\n\n\"conversation_id\"\n\n:\n\n\"739002976985482****\"\n\n,\n\n\"bot_id\"\n\n:\n\n\"732868101392695****\"\n\n,\n\n\"role\"\n\n:\n\n\"assistant\"\n\n,\n\n\"type\"\n\n:\n\n\"answer\"\n\n,\n\n\"content\"\n\n:\n\n\"xxxx\"\n\n,\n\n\"content_type\"\n\n:\n\n\"text\"\n\n,\n\n\"chat_id\"\n\n:\n\n\"7390029769854844****\"\n\n}\n\n​\n\n​\n\n卡片消息\n\n​\n\ndata 字段中，type=answer，且 content_type=card 的消息为卡片格式的智能体回复。示例如下：\n\n​\n\n​\n\nJSON\n\n复制\n\nevent\n\n:\n\nconversation.message.completed\n\n​\n\ndata\n\n:{\n\n\"id\"\n\n:\n\n\"73900297849082****\"\n\n,\n\n\"conversation_id\"\n\n:\n\n\"7390029769854828****\"\n\n,\n\n\"bot_id\"\n\n:\n\n\"732868101392695****\"\n\n,\n\n\"role\"\n\n:\n\n\"assistant\"\n\n,\n\n\"type\"\n\n:\n\n\"answer\"\n\n,\n\n\"content\"\n\n:\n\n\"{\\\"card_type\\\":3,\\\"template_url\\\":\\\"xxx ....\\\"response_type\\\":\\\"card\\\"}\"\n\n,\n\n\"content_type\"\n\n:\n\n\"card\"\n\n,\n\n\"chat_id\"\n\n:\n\n\"739002976985484****\"\n\n}\n\n​\n\n​\n\n知识库召回\n\n​\n\ndata 字段中，type=verbose，且 content.msg_type = knowledge_recall 的消息为知识库召回的消息。示例如下：\n\n​\n\n​\n\nJSON\n\n复制\n\nevent\n\n:\n\nconversation.message.completed\n\n​\n\ndata\n\n:{\n\n\"id\"\n\n:\n\n\"739002976985487****\"\n\n,\n\n\"conversation_id\"\n\n:\n\n\"7390029769854828582\"\n\n,\n\n\"bot_id\"\n\n:\n\n\"732868101392695****\"\n\n,\n\n\"role\"\n\n:\n\n\"assistant\"\n\n,\n\n\"type\"\n\n:\n\n\"verbose\"\n\n,\n\n\"content\"\n\n:\n\n\"{\\\"msg_type\\\":\\\"knowledge_recall\\\",\\\"data\\\":\\\"xxxx\\\"}\"\n\n,\n\n\"content_type\"\n\n:\n\n\"text\"\n\n,\n\n\"chat_id\"\n\n:\n\n\"739002976985484****\"\n\n}\n\n​\n\n​\n\n函数调用（Function call）\n\n​\n\ndata 字段中，type=function_call 的消息为函数调用的结果。示例如下：\n\n​\n\n​\n\nJSON\n\n复制\n\nevent\n\n:\n\nconversation.message.completed\n\n​\n\ndata\n\n:{\n\n\"id\"\n\n:\n\n\"739002977785767****\"\n\n,\n\n\"conversation_id\"\n\n:\n\n\"739002976985482****\"\n\n,\n\n\"bot_id\"\n\n:\n\n\"732868101392695****\"\n\n,\n\n\"role\"\n\n:\n\n\"assistant\"\n\n,\n\n\"type\"\n\n:\n\n\"function_call\"\n\n,\n\n\"content\"\n\n:\n\n\"{\\\"name\\\":\\\"toutiaosousuo-search\\\",\\\"arguments\\\":{\\\"input_query\\\":\\\"B 站的热搜\\\"},\\\"plugin_id\\\":72811926238875****3,\\\"plugin_name\\\":\\\"toutiaosousuo\\\",\\\"api_id\\\":7288907006982012986,\\\"api_name\\\":\\\"search\\\",\\\"plugin_type\\\":1,\\\"thought\\\":\\\"需求为搜索 B 站的热搜并搜索这些热搜最新的动态新闻。第一步需要调用toutiaosousuo-search工具搜索 B 站的热搜\\\"}\"\n\n,\n\n\"content_type\"\n\n:\n\n\"text\"\n\n,\n\n\"chat_id\"\n\n:\n\n\"73900297698548****\"\n\n}\n\n​\n\n​\n\n工具调用（tool_response）\n\n​\n\ndata 字段中，type=tool_response 的消息为工具调用的结果。示例如下：\n\n​\n\n​\n\nJSON\n\n复制\n\nevent\n\n:\n\nconversation.message.completed\n\n​\n\ndata\n\n:{\n\n\"id\"\n\n:\n\n\"739002978490818****\"\n\n,\n\n\"conversation_id\"\n\n:\n\n\"739002976985482****\"\n\n,\n\n\"bot_id\"\n\n:\n\n\"732868101392695****\"\n\n,\n\n\"role\"\n\n:\n\n\"assistant\"\n\n,\n\n\"type\"\n\n:\n\n\"tool_response\"\n\n,\n\n\"content\"\n\n:\n\n\"xxx\"\n\n,\n\n\"content_type\"\n\n:\n\n\"card\"\n\n,\n\n\"chat_id\"\n\n:\n\n\"739002976985484****\"\n\n}\n\n​\n\n​\n\n结束生成标识\n\n​\n\ndata 字段中，type=verbose，且 content.msg_type = generate_answer_finish 的消息为模型生成结束的标识。示例如下：\n\n​\n\n​\n\nJSON\n\n复制\n\nevent\n\n:\n\nconversation.message.completed\n\n​\n\ndata\n\n:{\n\n\"id\"\n\n:\n\n\"739002981382787****\"\n\n,\n\n\"conversation_id\"\n\n:\n\n\"739002976985482****\"\n\n,\n\n\"bot_id\"\n\n:\n\n\"732868101392695****\"\n\n,\n\n\"role\"\n\n:\n\n\"assistant\"\n\n,\n\n\"type\"\n\n:\n\n\"verbose\"\n\n,\n\n\"content\"\n\n:\n\n\"{\\\"msg_type\\\":\\\"generate_answer_finish\\\",\\\"data\\\":\\\"{\\\\\\\"finish_reason\\\\\\\":0}\\\",\\\"from_module\\\":null,\\\"from_unit\\\":null}\"\n\n,\n\n\"content_type\"\n\n:\n\n\"text\"\n\n,\n\n\"chat_id\"\n\n:\n\n\"739002976985484****\"\n\n}\n\n​\n\n​\n\n推荐\n\n​\n\ndata 字段中，type=follow_up 的消息为智能体的用户问题建议。示例如下：\n\n​\n\n​\n\nJSON\n\n复制\n\nevent\n\n:\n\nconversation.message.completed\n\n​\n\ndata\n\n:{\n\n\"id\"\n\n:\n\n\"739002981382791****\"\n\n,\n\n\"conversation_id\"\n\n:\n\n\"739002976985482****\"\n\n,\n\n\"bot_id\"\n\n:\n\n\"732868101392695****\"\n\n,\n\n\"role\"\n\n:\n\n\"assistant\"\n\n,\n\n\"type\"\n\n:\n\n\"follow_up\"\n\n,\n\n\"content\"\n\n:\n\n\"总结一下B站崩了的具体情况\"\n\n,\n\n\"content_type\"\n\n:\n\n\"text\"\n\n,\n\n\"chat_id\"\n\n:\n\n\"739002976985484****\"\n\n}\n\n​\n\n​\n\n​\n\n上一篇\n\n模型能力差异\n\n下一篇\n\n错误码 4100/4101 问题排查",
        "links": []
      },
      "markdown": "| 获取方式​ | 说明​ |\n| 通过流式响应实时显示智能体回复​ | 如果客户端中需要打字机效果实时增量显示智能体回复，可以在调用发起对话接口时，设置流式响应（stream=true），并在客户端对话框中实时打印接口响应中的模型回复部分。​该场景下，客户端需要自行拼接响应内容。​ |\n| 仅解析流式响应的智能体回复部分​ | 如果不需要增量流式显示智能体回复，只需要快速获取最终结果，可以在调用发起对话接口时，设置流式响应（stream=true），并在 Response 中，在事件event:conversation.message.completed中，取 type=answer 的事件，例如以下事件中，content 部分为智能体回复。​​Plain Text复制event:conversation.message.completed​data:{\"id\":\"738215949412347****\",\"conversation_id\":\"738147352534297****\",\"bot_id\":\"737946218936519****\",\"role\":\"assistant\",\"type\":\"answer\",\"content\":\"2024 年 10 月 1 日是星期三。\",\"content_type\":\"text\",\"chat_id\":\"738215948713169****\"}​​对话结束后，事件event:conversation.message.completed中可能有多种消息类型，你可以按需解析。常见的消息类型可参考​消息示例。​ |\n| 通过非流式响应主动查询智能体回复​ | 你也可以参考以下流程主动查询智能体回复。​1.调用发起会话接口，并设置 stream = false，auto_save_history=true，表示使用非流式响应，并记录历史消息。​你需要记录会话的 Conversation ID 和 Chat ID，用于后续查看详细信息。​2.定期轮询​查看对话详情接口，建议每次间隔 1 秒以上，直到会话状态流转为终态，即 status 为 completed 或 required_action。​3.调用​查看对话消息详情接口，查询模型生成的最终结果。​​​​​​ |\n\n\n- 你需要记录会话的 Conversation ID 和 Chat ID，用于后续查看详细信息。 ​\n\n\n\n- 文本格式智能体回复 ​\n\n- data 字段中，type=answer，且 content_type=text 的消息为文本格式的智能体回复。示例如下： ​\n\n- ​ JSON 复制 event : conversation.message.completed ​ data :{ \"id\" : \"739002977785765****\" , \"conversation_id\" : \"739002976985482****\" , \"bot_id\" : \"732868101392695****\" , \"role\" : \"assistant\" , \"type\" : \"answer\" , \"content\" : \"xxxx\" , \"content_type\" : \"text\" , \"chat_id\" : \"7390029769854844****\" } ​ ​\n\n- 卡片消息 ​\n\n- data 字段中，type=answer，且 content_type=card 的消息为卡片格式的智能体回复。示例如下： ​\n\n- ​ JSON 复制 event : conversation.message.completed ​ data :{ \"id\" : \"73900297849082****\" , \"conversation_id\" : \"7390029769854828****\" , \"bot_id\" : \"732868101392695****\" , \"role\" : \"assistant\" , \"type\" : \"answer\" , \"content\" : \"{\\\"card_type\\\":3,\\\"template_url\\\":\\\"xxx ....\\\"response_type\\\":\\\"card\\\"}\" , \"content_type\" : \"card\" , \"chat_id\" : \"739002976985484****\" } ​ ​\n\n- 知识库召回 ​\n\n- data 字段中，type=verbose，且 content.msg_type = knowledge_recall 的消息为知识库召回的消息。示例如下： ​\n\n- ​ JSON 复制 event : conversation.message.completed ​ data :{ \"id\" : \"739002976985487****\" , \"conversation_id\" : \"7390029769854828582\" , \"bot_id\" : \"732868101392695****\" , \"role\" : \"assistant\" , \"type\" : \"verbose\" , \"content\" : \"{\\\"msg_type\\\":\\\"knowledge_recall\\\",\\\"data\\\":\\\"xxxx\\\"}\" , \"content_type\" : \"text\" , \"chat_id\" : \"739002976985484****\" } ​ ​\n\n- 函数调用（Function call） ​\n\n- data 字段中，type=function_call 的消息为函数调用的结果。示例如下： ​\n\n- ​ JSON 复制 event : conversation.message.completed ​ data :{ \"id\" : \"739002977785767****\" , \"conversation_id\" : \"739002976985482****\" , \"bot_id\" : \"732868101392695****\" , \"role\" : \"assistant\" , \"type\" : \"function_call\" , \"content\" : \"{\\\"name\\\":\\\"toutiaosousuo-search\\\",\\\"arguments\\\":{\\\"input_query\\\":\\\"B 站的热搜\\\"},\\\"plugin_id\\\":72811926238875****3,\\\"plugin_name\\\":\\\"toutiaosousuo\\\",\\\"api_id\\\":7288907006982012986,\\\"api_name\\\":\\\"search\\\",\\\"plugin_type\\\":1,\\\"thought\\\":\\\"需求为搜索 B 站的热搜并搜索这些热搜最新的动态新闻。第一步需要调用toutiaosousuo-search工具搜索 B 站的热搜\\\"}\" , \"content_type\" : \"text\" , \"chat_id\" : \"73900297698548****\" } ​ ​\n\n- 工具调用（tool_response） ​\n\n- data 字段中，type=tool_response 的消息为工具调用的结果。示例如下： ​\n\n- ​ JSON 复制 event : conversation.message.completed ​ data :{ \"id\" : \"739002978490818****\" , \"conversation_id\" : \"739002976985482****\" , \"bot_id\" : \"732868101392695****\" , \"role\" : \"assistant\" , \"type\" : \"tool_response\" , \"content\" : \"xxx\" , \"content_type\" : \"card\" , \"chat_id\" : \"739002976985484****\" } ​ ​\n\n- 结束生成标识 ​\n\n- data 字段中，type=verbose，且 content.msg_type = generate_answer_finish 的消息为模型生成结束的标识。示例如下： ​\n\n- ​ JSON 复制 event : conversation.message.completed ​ data :{ \"id\" : \"739002981382787****\" , \"conversation_id\" : \"739002976985482****\" , \"bot_id\" : \"732868101392695****\" , \"role\" : \"assistant\" , \"type\" : \"verbose\" , \"content\" : \"{\\\"msg_type\\\":\\\"generate_answer_finish\\\",\\\"data\\\":\\\"{\\\\\\\"finish_reason\\\\\\\":0}\\\",\\\"from_module\\\":null,\\\"from_unit\\\":null}\" , \"content_type\" : \"text\" , \"chat_id\" : \"739002976985484****\" } ​ ​\n\n- 推荐 ​\n\n- data 字段中，type=follow_up 的消息为智能体的用户问题建议。示例如下： ​\n\n- ​ JSON 复制 event : conversation.message.completed ​ data :{ \"id\" : \"739002981382791****\" , \"conversation_id\" : \"739002976985482****\" , \"bot_id\" : \"732868101392695****\" , \"role\" : \"assistant\" , \"type\" : \"follow_up\" , \"content\" : \"总结一下B站崩了的具体情况\" , \"content_type\" : \"text\" , \"chat_id\" : \"739002976985484****\" } ​ ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/troubleshooting_4100_4101",
      "title": "错误码 4100/4101 问题排查",
      "content": {
        "sections": [],
        "full_text": "错误码 4100/4101 问题排查\n\n当调用 API 报错 4100 或 4101 时，表示当前使用的访问密钥不正确，或密钥不具备对应资源的权限。\n\n​\n\n问题排查流程如下：\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n问题排查步骤如下：\n\n​\n\n1.\n\n检查访问密钥。\n\n​\n\n在此步骤中，检查密钥的权限、有效期和对应的工作空间。\n\n​\n\n对于 OAuth 访问密钥，参考\n\n​\n\nOAuth 应用管理\n\n，检查授权流程是否完整且正确。\n\n​\n\n对于\n\n个人访问密钥（PAT），你可以在\n\n个人访问令牌\n\n页面找到你使用的 PAT，并参考以下方式检查密钥。\n\n​\n\n​\n\n检查项\n\n​\n\n说明\n\n​\n\n检查密钥权限\n\n​\n\n确认密钥已被授予指定接口要求的权限点，各个接口的权限点要求可参考 API 文档。例如：\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n检查密钥有效期\n\n​\n\n确认密钥未过期、状态为\n\n有效\n\n。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n检查密钥工作空间\n\n​\n\n确认密钥授权工作空间中包括你调用的、知识库所在的空间。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n说明\n\n如果希望使用的、知识库位于其他人拥有的工作空间中，可以联系空间所有者获取一个有效的密钥。\n\n​\n\n​\n\n​\n\n2.\n\n检查访问域名和请求 URL。\n\n​\n\n通过对应的 API 文档，确认当前使用的访问域名正确、URL 完整，包含了所有必选的请求 Query 参数。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n3.\n\n检查 Header 的 Authorization 传参。\n\n​\n\n确认请求 Header 中 Authorization 参数格式正确、完整、无多余字符。Authorization 参数格式为\n\nBearer {Access_Token}\n\n，例如\n\nBearer pat_***\n\n。\n\n​\n\n你也可以直接复制文档中的示例，并替换其中的访问密钥。\n\n​\n\n​\n\nShell\n\n复制\n\ncurl --location --request GET 'https://\n\napi.coze.cn\n\n/v1/bot/get_online_info?bot_id=\n\n7381****\n\n' \\\n\n​\n\n--header 'Authorization: Bearer\n\npat_***\n\n' \\\n\n​\n\n​\n\n4.\n\n检查其他必选字段的传参。\n\n​\n\n通过对应的 API 文档，确认已正确设置了请求中所有必选的参数。你也可以直接复制文档中的请求示例，并替换其中的参数值。\n\n​\n\n5.\n\n对于\n\n企业版用户\n\n，如果通过以上步骤排查仍未解决问题，可以记录以下错误信息并联系扣子技术支持，我们将协助您排查问题。\n\n​\n\nResponse header 中的 X-Tt-Logid 字段值，例如\n\n20240708143040790E78F9318B35A2910B\n\n。你可以在使用 curl 发起请求时通过\n\n-i\n\n参数打印 Response header 完整内容。\n\n​\n\nResponse Body 中的 code、msg 字段值，例如\n\n{ \"code\": 700012006, \"msg\": \"access token invalid\" }\n\n。\n\n​\n\n​\n\n​\n\n上一篇\n\n通过对话接口获取智能体回复\n\n下一篇\n\n如何实现会话隔离",
        "links": []
      },
      "markdown": "- 在此步骤中，检查密钥的权限、有效期和对应的工作空间。 ​\n\n- 对于 OAuth 访问密钥，参考 ​ OAuth 应用管理 ，检查授权流程是否完整且正确。 ​\n\n- 对于 个人访问密钥（PAT），你可以在 个人访问令牌 页面找到你使用的 PAT，并参考以下方式检查密钥。 ​\n\n- ​ 检查项 ​ 说明 ​ 检查密钥权限 ​ 确认密钥已被授予指定接口要求的权限点，各个接口的权限点要求可参考 API 文档。例如： ​ ​ ​ ​ ​ ​ 检查密钥有效期 ​ 确认密钥未过期、状态为 有效 。 ​ ​ ​ ​ ​ ​ 检查密钥工作空间 ​ 确认密钥授权工作空间中包括你调用的、知识库所在的空间。 ​ ​ ​ ​ ​ ​ 说明 如果希望使用的、知识库位于其他人拥有的工作空间中，可以联系空间所有者获取一个有效的密钥。 ​ ​ ​\n\n| 检查项​ | 说明​ |\n| 检查密钥权限​ | 确认密钥已被授予指定接口要求的权限点，各个接口的权限点要求可参考 API 文档。例如：​​​​​​ |\n| 检查密钥有效期​ | 确认密钥未过期、状态为有效。​​​​​​ |\n| 检查密钥工作空间​ | 确认密钥授权工作空间中包括你调用的、知识库所在的空间。​​​​​​说明如果希望使用的、知识库位于其他人拥有的工作空间中，可以联系空间所有者获取一个有效的密钥。​​ |\n\n\n- 通过对应的 API 文档，确认当前使用的访问域名正确、URL 完整，包含了所有必选的请求 Query 参数。 ​\n\n- ​ ​ ​ ​ ​\n\n\n- 确认请求 Header 中 Authorization 参数格式正确、完整、无多余字符。Authorization 参数格式为 Bearer {Access_Token} ，例如 Bearer pat_*** 。 ​\n\n- 你也可以直接复制文档中的示例，并替换其中的访问密钥。 ​\n\n- ​ Shell 复制 curl --location --request GET 'https:// api.coze.cn /v1/bot/get_online_info?bot_id= 7381**** ' \\ ​ --header 'Authorization: Bearer pat_*** ' \\ ​ ​\n\n\n- 通过对应的 API 文档，确认已正确设置了请求中所有必选的参数。你也可以直接复制文档中的请求示例，并替换其中的参数值。 ​\n\n\n- Response header 中的 X-Tt-Logid 字段值，例如 20240708143040790E78F9318B35A2910B 。你可以在使用 curl 发起请求时通过 -i 参数打印 Response header 完整内容。 ​\n\n- Response Body 中的 code、msg 字段值，例如 { \"code\": 700012006, \"msg\": \"access token invalid\" } 。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/session_isolation",
      "title": "如何实现会话隔离",
      "content": {
        "sections": [],
        "full_text": "如何实现会话隔离\n\n使用扣子编程 OpenAPI 或 SDK 和扣子智能体或应用对话时，扣子编程会将使用同一个访问密钥的对话看做同一个用户。如果业务侧不同的用户使用同一个扣子编程访问密钥鉴权，用户看到的对话记录中可能会夹杂其他用户的对话历史。\n\n​\n\n但是在实际业务场景中，往往需要将不同业务侧用户的会话互相隔离开来，每个用户只能看到自己和智能体的对话历史。扣子编程 OAuth JWT 鉴权方式中，支持通过\n\nsession_name\n\n参数实现会话隔离，避免智能体不同账号的消息内容互相可见。\n\n​\n\n会话隔离方案\n\n​\n\n目前仅 OAuth JWT 鉴权方式支持会话隔离。如果不同的用户使用同一个访问密钥，且需要在一个扣子账号下维护多个用户的对话，建议使用 JWT 方式鉴权，并设置会话隔离。\n\n​\n\n​\n\n会话隔离级别\n\n​\n\n绑定到扣子账号下\n\n​\n\n绑定到扣子账号下的子级下\n\n​\n\n区别\n\n​\n\n一个扣子账号内无法隔离会话。\n\n​\n\n支持在一个扣子的账号下维护多个子用户的会话。\n\n​\n\n适用场景\n\n​\n\n访问产品的用户本身拥有扣子账号。\n\n​\n\n基于扣子编程 API 搭建的产品拥有自己的用户，这些用户没有扣子账号。\n\n​\n\n需要隔离这些用户之间的会话。\n\n​\n\n鉴权方式\n\n​\n\n可使用扣子编程目前支持的所有鉴权方式。详细信息可参考\n\n​\n\n鉴权方式概述\n\n。\n\n​\n\n仅 OAuth 的 JWT 鉴权方式可实现会话隔离。但必须在 payload 中添加 session_name 字段。\n\n​\n\n隔离级别\n\n​\n\n渠道（默认） + 扣子账号 + Bot\n\n​\n\n渠道（默认）  + 扣子账号 + Bot + session_name\n\n​\n\n​\n\n设置方式\n\n​\n\n如需实现会话隔离，需要在调用扣子编程 OpenAPI 或 SDK 时，使用 OAuth JWT 鉴权方式，并在签署 JWT 时，在 payload 字段中添加 session_name 字段。session_name 中应指定用户在业务侧的 UID，String 类型。UID 由业务侧自行定义，扣子编程仅透传这个字段并用于签署 JWT、区分不同\n\nsession_name\n\n的会话。\n\n​\n\n签署 JWT 并设置\n\nsession_name\n\n的具体步骤可参考\n\n​\n\n3 签署 JWT\n\n。\n\n​\n\n设置示例\n\n​\n\n开发者搭建了一个智能体，并通过 Chat SDK 的方式嵌入到自建网站中，供网站的访问者使用。如果未设置会话隔离，那么网站中不同的访问者 A 和 B 在智能体对话框中可以查看到其他用户和智能体的对话记录。\n\n​\n\n开发者可以采用 JWT 方式实现会话隔离，并在 Chat SDK 中使用 JWT 访问密钥鉴权即可。\n\n​\n\n1.\n\n获取业务侧的用户 UID。\n\n​\n\n从网站的账号系统中，获取网站用户 A 和 B 的 UID。此处我们假设 UID 分别为\n\nUSER_A\n\n和\n\nUSER_B\n\n。\n\n​\n\n2.\n\n获取 JWT Token。\n\n​\n\n参考\n\n​\n\nOAuth JWT 授权（开发者）\n\n文档实现 OAuth JWT 授权，并分别为用户 A 和 B 申请 JWT Token。在步骤\n\n​\n\n3 签署 JWT\n\n中，Payload 中添加\n\nsession_name\n\n字段，并将其设置为网站用户 A 或 B 的 UID。\n\n​\n\n用户 A 和 B 分别对应的 JWT Token：\n\n​\n\n​\n\nPlain Text\n\n复制\n\n// 用户 A 的 JWT Token\n\n​\n\nczs_RQOhsc7vmUzK4bNgb7hn4wqOgRBYAO6xvpFHNbnl6RiQJX3cSXSguI\n\nahiuhwfw\n\n****\n\n​\n\n​\n\n// 用户 B 的 JWT Token\n\n​\n\nczs_\n\nDJWOEF\n\n7vmUzK4bNgb7hn4wqOgRBYAO6xvpFHNbnl6RiQJX3cSXSguIhFDzgy****\n\n​\n\n​\n\n3.\n\n设置 Chat SDK 鉴权参数。\n\n​\n\n参考\n\n​\n\n安装并使用 Chat SDK\n\n接入 Chat SDK 时，在\n\n​\n\n步骤四：配置聊天框\n\n中，auth 的 token 参数设置为网站用户对应的 Token，确保用户 A 和 用户 B 在和智能体对话时，分别使用的是自己的 JWT Token。\n\n​\n\n常见问题\n\n​\n\n为什么使用会话隔离时，设置了不同的 BotID，但返回的会话 ID 却相同？\n\n​\n\n可能原因\n\n：\n\n​\n\n这通常是由于在代码中手动传入了相同的\n\nconversationID\n\n参数导致的。\n\n​\n\n解决方案\n\n：\n\n​\n\n为确保会话 ID 的唯一性与隔离性，建议由系统自动生成会话 ID，避免手动在代码中设置\n\nconversationID\n\n参数。\n\n​\n\n使用 JWT 鉴权设置会话隔离时，不同会话间设置的用户变量是否会相互隔离？\n\n​\n\n会。设置\n\nsession_name\n\n变量后，扣子编程会按照会话隔离的方式进行区分。不同会话间设置的用户变量将被自动隔离，互不影响。即使不同用户使用了相同的账号密钥，用户 A 与用户 B 的变量也会被独立存储，确保每个会话的用户变量完全隔离。\n\n​\n\n​\n\n​\n\n上一篇\n\n错误码 4100/4101 问题排查\n\n下一篇\n\n升级企业版后更新 API 授权",
        "links": []
      },
      "markdown": "| 会话隔离级别​ | 绑定到扣子账号下​ | 绑定到扣子账号下的子级下​ |\n| 区别​ | 一个扣子账号内无法隔离会话。​ | 支持在一个扣子的账号下维护多个子用户的会话。​ |\n| 适用场景​ | 访问产品的用户本身拥有扣子账号。​ | 基于扣子编程 API 搭建的产品拥有自己的用户，这些用户没有扣子账号。​需要隔离这些用户之间的会话。​ |\n| 鉴权方式​ | 可使用扣子编程目前支持的所有鉴权方式。详细信息可参考​鉴权方式概述。​ | 仅 OAuth 的 JWT 鉴权方式可实现会话隔离。但必须在 payload 中添加 session_name 字段。​ |\n| 隔离级别​ | 渠道（默认） + 扣子账号 + Bot​ | 渠道（默认）  + 扣子账号 + Bot + session_name​ |\n\n- 基于扣子编程 API 搭建的产品拥有自己的用户，这些用户没有扣子账号。 ​\n\n- 需要隔离这些用户之间的会话。 ​\n\n\n- 从网站的账号系统中，获取网站用户 A 和 B 的 UID。此处我们假设 UID 分别为 USER_A 和 USER_B 。 ​\n\n\n- 参考 ​ OAuth JWT 授权（开发者） 文档实现 OAuth JWT 授权，并分别为用户 A 和 B 申请 JWT Token。在步骤 ​ 3 签署 JWT 中，Payload 中添加 session_name 字段，并将其设置为网站用户 A 或 B 的 UID。 ​\n\n- 用户 A 和 B 分别对应的 JWT Token： ​\n\n- ​ Plain Text 复制 // 用户 A 的 JWT Token ​ czs_RQOhsc7vmUzK4bNgb7hn4wqOgRBYAO6xvpFHNbnl6RiQJX3cSXSguI ahiuhwfw **** ​ ​ // 用户 B 的 JWT Token ​ czs_ DJWOEF 7vmUzK4bNgb7hn4wqOgRBYAO6xvpFHNbnl6RiQJX3cSXSguIhFDzgy**** ​ ​\n\n\n- 参考 ​ 安装并使用 Chat SDK 接入 Chat SDK 时，在 ​ 步骤四：配置聊天框 中，auth 的 token 参数设置为网站用户对应的 Token，确保用户 A 和 用户 B 在和智能体对话时，分别使用的是自己的 JWT Token。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/update_authorization",
      "title": "升级企业版后更新 API 授权",
      "content": {
        "sections": [],
        "full_text": "升级企业版后更新 API 授权\n\n从专业版、个人进阶版升级至企业后，往往需要将已创建的工作空间迁移到新的企业中，以便原有的智能体和扣子应用使用企业的高级权益。\n\n如果你待迁移的智能体、扣子应用或工作流已发布到 API 渠道\n\n，直接迁移工作空间会导致原有的 API 授权失效，线上用户调用 API 时会因鉴权失败而无法正常访问。\n\n​\n\n在这种场景下，企业的超级管理员需要在迁移工作空间之前，先修改业务代码中的鉴权部分，添加新老授权的兼容逻辑，保障平滑迁移，过程线上无感知。\n\n​\n\n说明\n\n从原团队版、企业标准版升级至企业旗舰版时，无需迁移工作空间。\n\n​\n\n​\n\n迁移 API 授权\n\n​\n\n注意事项\n\n​\n\n​\n\n注意事项\n\n​\n\n说明\n\n​\n\n操作时段\n\n​\n\n如果智能体、应用或工作流已发布到生产环境、线上用户量较大，为了保障平滑迁移，建议选择服务流量较少的时段执行本步骤，例如深夜或凌晨时段。\n\n​\n\n权限设置\n\n​\n\n请确保已覆盖原授权的所有权限点，以免因权限不足导致 API 访问失败。\n\n​\n\n操作时，访问空间建议选择所有工作空间，确保空间迁移后访问令牌能访问该企业中的所有空间，包括后续创建的新空间。\n\n​\n\nAPI 方式创建会话\n\n​\n\n由于智能体等资源属于空间，API 方式创建的会话属于扣子用户，迁移空间之后，智能体无权限访问原个人账号下的会话，建议开发者创建新会话。创建方式可参考\n\n​\n\n创建会话\n\n。\n\n​\n\n原 OAuth 应用\n\n​\n\n请勿禁用或删除\n\n参考本文档完成改造的个人版 OAuth 应用，否则会影响在企业中的 OpenAPI 访问。\n\n​\n\n​\n\n步骤一：确定授权类型\n\n​\n\n扣子提供了个人访问令牌、OBO 等多种授权类型，各种授权类型下，更新 API 授权的方式不同。你需要先确定自己的授权方式。\n\n​\n\n不同的扣子 OAuth 授权对应的授权类型和适用的客户端类型如下表所示。\n\n​\n\n​\n\n授权类型\n\n​\n\n授权方式\n\n​\n\n客户端类型\n\n​\n\n个人访问令牌\n\n​\n\n​\n\n添加个人访问令牌\n\n​\n\n无\n\n​\n\nOBO 授权\n\n​\n\n​\n\nOAuth 授权码授权\n\n​\n\nWeb 后端应用\n\n​\n\n​\n\n​\n\nOAuth PKCE\n\n​\n\n移动端/PC 桌面端/单页面应用\n\n​\n\n​\n\n​\n\nOAuth 设备授权\n\n​\n\nTV 端/设备应用/类命令行程序\n\n​\n\nAppAuth 授权\n\n​\n\n​\n\nOAuth JWT 授权（开发者）\n\n​\n\n服务类应用\n\n​\n\n​\n\n步骤二：更新 API 授权\n\n​\n\nAppAuth 授权场景\n\n​\n\nAppAuth 授权是指应用以自身身份去访问扣子编程的资源。例如，一个后端服务需要从扣子编程获取数据。\n\n​\n\n1 重新授权\n\nOAuth 应用\n\n​\n\n企业的超级管理员或管理员在企业版下完成对待迁移的 OAuth 应用的授权。\n\n​\n\n1.\n\n创建 OAuth 应用的扣子用户切换到个人版，并访问\n\n扣子 API\n\n＞\n\nOAuth 应用\n\n页面。\n\n​\n\n2.\n\n找到待迁移的 OAuth 应用，并在\n\n操作\n\n列单击分享图标。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n3.\n\n将复制好的链接发送给企业的超级管理员或管理员，由其打开链接完成授权。\n\n​\n\n授权相关的设置方式如下：\n\n​\n\n授权范围选择企业\n\n​\n\n工作空间选择所有工作空间\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n4.\n\n确认授权成功。\n\n​\n\n企业的超级管理员或管理员切换到企业中。在左侧导航栏单击\n\n企业 API\n\n，访问\n\n应用安装管理\n\n页面，确认授权成功。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n2 更新授权代码\n\n​\n\n应用程序在请求 OpenAPI 时，需要同时获取个人版和企业版下的授权凭证，默认先基于个人版的凭证访问资源，如果返回请求无权限（4100 和 4101） 或资源不存在的错误码，则再次基于企业版的凭证访问资源。\n\n​\n\n1.\n\n获取授权代码中需要填写的\n\n个人账号 UID\n\n和\n\n企业 ID\n\n。\n\n​\n\n​\n\n账号\n\n​\n\n获取方式\n\n​\n\n示例\n\n​\n\n个人账号 UID\n\n​\n\n（personalAccountId）\n\n​\n\n必须是创建 OAuth 应用的扣子账号 UID。\n\n​\n\n在扣子编程左下角单击个人头像，并选择账号设置，在账号页面中查看 UID。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n企业 ID\n\n​\n\n（enterpriseAccountId）\n\n​\n\n你可以在\n\n组织管理\n\n>\n\n组织设置\n\n页面查看企业 ID。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n2.\n\n更新授权代码。\n\n​\n\n以聊天接口为例，Go 语言代码改造方式如下，注意其中高亮部分：\n\n​\n\n​\n\nGo\n\n复制\n\npackage\n\nmain\n\n​\n\n​\n\nimport\n\n(\n\n​\n\n\"context\"\n\n​\n\n\"errors\"\n\n​\n\n\"fmt\"\n\n​\n\n\"github.com/coze-dev/coze-go\"\n\n​\n\n\"os\"\n\n​\n\n)\n\n​\n\n​\n\nfunc\n\nmain\n\n()\n\n{\n\n​\n\n// The default access is api.coze.com, but if you need to access api.coze.cn,\n\n​\n\n// please use base_url to configure the api endpoint to access\n\n​\n\ncozeAPIBase := os.Getenv(\n\n\"COZE_API_BASE\"\n\n)\n\n​\n\njwtOauthClientID := os.Getenv(\n\n\"COZE_JWT_OAUTH_CLIENT_ID\"\n\n)\n\n​\n\njwtOauthPrivateKey := os.Getenv(\n\n\"COZE_JWT_OAUTH_PRIVATE_KEY\"\n\n)\n\n​\n\njwtOauthPrivateKeyFilePath := os.Getenv(\n\n\"COZE_JWT_OAUTH_PRIVATE_KEY_FILE_PATH\"\n\n)\n\n​\n\njwtOauthPublicKeyID := os.Getenv(\n\n\"COZE_JWT_OAUTH_PUBLIC_KEY_ID\"\n\n)\n\n​\n\nbotID := os.Getenv(\n\n\"PUBLISHED_BOT_ID\"\n\n)\n\n​\n\nuid := os.Getenv(\n\n\"USER_ID\"\n\n)\n\n​\n\n​\n\n// Read private key from file\n\n​\n\nprivateKeyBytes, err := os.ReadFile(jwtOauthPrivateKeyFilePath)\n\n​\n\nif\n\nerr !=\n\nnil\n\n{\n\n​\n\nfmt.Printf(\n\n\"Error reading private key file: %v\\n\"\n\n, err)\n\n​\n\nreturn\n\n​\n\n}\n\n​\n\njwtOauthPrivateKey =\n\nstring\n\n(privateKeyBytes)\n\n​\n\n​\n\noauth\n\n, err := coze.NewJWTOAuthClient(coze.NewJWTOAuthClientParam{\n\n​\n\nClientID: jwtOauthClientID, PublicKey: jwtOauthPublicKeyID, PrivateKeyPEM: jwtOauthPrivateKey,\n\n​\n\n}, coze.WithAuthBaseURL(cozeAPIBase))\n\n​\n\nif\n\nerr !=\n\nnil\n\n{\n\n​\n\nfmt.Printf(\n\n\"Error creating JWT OAuth client: %v\\n\"\n\n, err)\n\n​\n\nreturn\n\n​\n\n}\n\n​\n\nctx\n\n:= context.Background()\n\n​\n\n​\n\nvar\n\npersonalAccountId\n\nint64\n\n=\n\n12345\n\n// 个人版 账号 UID\n\n​\n\nvar\n\nenterpriseAccountId\n\nint64\n\n=\n\n23456\n\n// 企业版 账号 ID\n\n​\n\n​\n\n// 获取个人版下的访问凭证\n\n​\n\ncozeCli := coze.NewCozeAPI(coze.NewJWTAuth(oauth, &coze.GetJWTAccessTokenReq{\n\n​\n\nAccountID:   &personalAccountId,\n\n​\n\n}), coze.WithBaseURL(cozeAPIBase))\n\n​\n\n// 获取企业版下的访问凭证\n\n​\n\ncozeCli4Enterprise := coze.NewCozeAPI(coze.NewJWTAuth(oauth, &coze.GetJWTAccessTokenReq{\n\n​\n\nEnterpriseID:   &enterpriseAccountId,\n\n​\n\n}), coze.WithBaseURL(cozeAPIBase))\n\n​\n\n​\n\nreq := &coze.CreateChatsReq{\n\n​\n\nBotID:  botID,\n\n​\n\nUserID: uid,\n\n​\n\nMessages: []*coze.Message{\n\n​\n\ncoze.BuildUserQuestionText(\n\n\"What can you do?\"\n\n,\n\nnil\n\n),\n\n​\n\n},\n\n​\n\n}\n\n​\n\n​\n\n// 先尝试通过个人版的凭证请求chat接口\n\n​\n\nresp, err := cozeCli.Chat.Create(ctx\n\n, req\n\n)\n\n​\n\nif\n\nerr ==\n\nnil\n\n{\n\n​\n\nfmt.Println(resp)\n\n​\n\nreturn\n\n​\n\n}\n\n​\n\n// 当请求个人版接口出现鉴权失败时, 再尝试基于企业版的凭证请求chat接口\n\n​\n\ncozeErr := coze.Error{}\n\n​\n\nif\n\nerrors.As(err, &cozeErr) {\n\n​\n\n// no permission error code\n\n​\n\nif\n\ncozeErr.Code ==\n\n4101\n\n|| cozeErr.Code ==\n\n4100\n\n{\n\n​\n\n// no permission try chat with enterprise account\n\n​\n\nresp, err = cozeCli4Enterprise.Chat.Create(ctx, req)\n\n​\n\nif\n\nerr ==\n\nnil\n\n{\n\n​\n\nfmt.Println(resp)\n\n​\n\nreturn\n\n​\n\n}\n\n​\n\n}\n\n​\n\n}\n\n​\n\nfmt.Println(err)\n\n​\n\n}\n\n​\n\n​\n\n3.\n\n验证授权逻辑。\n\n​\n\n修改授权相关代码之后，建议确认代码中增加的逻辑准确、有效。例如在企业中新建空间和智能体，使用更新后的授权代码访问新智能体，对齐接口能力，验证通过之后再迁移工作空间。\n\n​\n\n3 迁移工作空间到企业\n\n​\n\n操作步骤可参考\n\n​\n\n功能简介\n\n。成功迁移之后，后端服务如果使用旧的凭证请求扣子 OpenAPI，鉴权失败之后会自动切换为新的凭证，保证线上访问无影响。\n\n​\n\n个人访问令牌场景\n\n​\n\n如果你通过个人访问令牌来请求扣子 OpenAPI，那么可以创建新的个人访问令牌，并在代码中添加兼容逻辑。即在授权代码中同时添加旧的个人访问令牌和新的个人访问令牌，如果调用扣子 Open API 鉴权失败，则使用扣子企业版的个人访问令牌。\n\n​\n\n详细操作步骤如下：\n\n​\n\n1 创建新的个人访问令牌\n\n​\n\n1.\n\n企业超级管理员或管理员切换到企业中。\n\n​\n\n2.\n\n从左侧导航栏访问\n\n企业 API\n\n＞\n\n个人访问令牌\n\n页面。\n\n​\n\n3.\n\n在页面右上角单击\n\n创建访问令牌\n\n。注意新令牌设置为企业内所有工作空间有效。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n2 更新授权代码\n\n​\n\n在授权代码中添加旧的个人访问令牌和新的个人访问令牌，如果使用旧令牌调用扣子 Open API 鉴权失败，则自动切换为企业空间的新令牌。\n\n​\n\n修改授权相关代码之后，建议确认代码中增加的逻辑准确、有效。例如在企业中新建空间和智能体，使用更新后的授权代码访问新智能体，对齐接口能力，验证通过之后再迁移工作空间。\n\n​\n\nGo\n\n语言代码示例如下，其中高亮部分为新增内容。\n\n​\n\n​\n\nGo\n\n复制\n\npackage\n\nmain\n\n​\n\n​\n\nimport\n\n(\n\n​\n\n\"context\"\n\n​\n\n\"errors\"\n\n​\n\n\"fmt\"\n\n​\n\n\"os\"\n\n​\n\n​\n\n\"github.com/coze-dev/coze-go\"\n\n​\n\n)\n\n​\n\n​\n\n// How to use personal access token to init Coze client.\n\n​\n\n//\n\n​\n\n// Firstly, you need to access https://www.coze.com/open/oauth/pats (for the cn environment,\n\n​\n\n// visit https://www.coze.cn/open/oauth/pats).\n\n​\n\n//\n\n​\n\n// Click to add a new token. After setting the appropriate name, expiration time, and\n\n​\n\n// permissions, click OK to generate your personal access token. Please store it in a\n\n​\n\n// secure environment to prevent this personal access token from being disclosed.\n\n​\n\nfunc\n\nmain\n\n()\n\n{\n\n​\n\ncozeAPIToken := os.Getenv(\n\n\"COZE_API_TOKEN\"\n\n)\n\n​\n\ncozeAPIToken4Enterprise := os.Getenv(\n\n\"COZE_API_TOKEN_ENTERPRISE\"\n\n)\n\n​\n\n​\n\n//\n\n​\n\n// The default access is api.coze.com, but if you need to access api.coze.cn,\n\n​\n\n// please use base_url to configure the api endpoint to access\n\n​\n\n//\n\n​\n\ncozeAPIBase := os.Getenv(\n\n\"COZE_API_BASE\"\n\n)\n\n​\n\n​\n\nctx := context.Background()\n\n​\n\n//\n\n​\n\n// The Coze SDK offers the TokenAuth class for constructing an Auth class based on a fixed\n\n​\n\n// access token. Meanwhile, the Coze class enables the passing in of an Auth class to build\n\n​\n\n// a coze client.\n\n​\n\n//\n\n​\n\n// Therefore, you can utilize the following code to initialize a coze client.\n\n​\n\n//\n\n​\n\n​\n\ncozeCli := coze.NewCozeAPI(coze.NewTokenAuth(cozeAPIToken), coze.WithBaseURL(cozeAPIBase))\n\n​\n\ncozeCli4Enterprise := coze.NewCozeAPI(coze.NewTokenAuth(cozeAPIToken4Enterprise), coze.WithBaseURL(cozeAPIBase))\n\n​\n\n​\n\n// Try chat with the bot under your personal account\n\n​\n\nresp, err := cozeCli.Chat.Create(ctx, &coze.CreateChatsReq{\n\n​\n\n// your chat request params\n\n​\n\n})\n\n​\n\nif\n\nerr ==\n\nnil\n\n{\n\n​\n\nfmt.Println(resp)\n\n​\n\nreturn\n\n​\n\n}\n\n​\n\n// Retry chat with the bot under your enterprise account\n\n​\n\ncozeErr := coze.Error{}\n\n​\n\nif\n\nerrors.As(err, &cozeErr) {\n\n​\n\n// Authentication or Authorization Deny\n\n​\n\nif\n\ncozeErr.Code ==\n\n4100\n\n|| cozeErr.Code ==\n\n4101\n\n{\n\n​\n\nresp, err = cozeCli4Enterprise.Chat.Create(ctx, &coze.CreateChatsReq{\n\n​\n\n// your chat request params\n\n​\n\n})\n\n​\n\nif\n\nerr ==\n\nnil\n\n{\n\n​\n\nfmt.Println(resp)\n\n​\n\nreturn\n\n​\n\n}\n\n​\n\n}\n\n​\n\n}\n\n​\n\nfmt.Println(err)\n\n​\n\n}\n\n​\n\n​\n\n3 迁移工作空间到企业\n\n​\n\n操作步骤可参考\n\n​\n\n功能简介\n\n。成功迁移之后，后端服务如果使用旧的个人访问密钥请求扣子 OpenAPI，鉴权失败之后会自动切换为新的密钥，保证线上访问无影响。\n\n​\n\n说明\n\n建议仅在测试环境、调试场景中使用个人访问令牌，并严格限制其使用范围和有效期，生产环境中建议避免使用个人访问令牌。\n\n​\n\n迁移成功且验证 API 访问正常之后，建议及时删除旧的个人访问令牌，以免令牌到期\n\n后无法访问。\n\n​\n\n​\n\nOBO 授权场景\n\n​\n\nOBO （On Behalf Of）授权是指应用以用户的身份去访问扣子编程的资源。例如，在 Web 后端应用、TV 端/设备应用/类命令行程序、移动端/PC 桌面端/单页面应用中，应用获取授权后，以用户的身份调用扣子编程的 API。\n\n​\n\n在 OBO 授权场景中，开发者需要添加授权失败场景的处理策略，即鉴权失败时重新触发授权，获取新的 Access Token。\n\n​\n\n1 更新授权代码\n\n​\n\n修改业务代码，设置后端服务在鉴权失败时重新触发授权，获取新的 Access Token。\n\n​\n\n修改授权相关代码之后，建议确认代码中增加的逻辑准确、有效。例如在企业中新建空间和智能体，使用更新后的授权代码访问新智能体，对齐接口能力，验证通过之后再迁移工作空间。\n\n​\n\n本文以 Go\n\n语言 OAuth 授权码授权场景为例，具体实现请参考以下示例代码中高亮的部分。\n\n​\n\n​\n\nGo\n\n复制\n\npackage\n\nmain\n\n​\n\n​\n\nimport\n\n(\n\n​\n\n\"context\"\n\n​\n\n\"errors\"\n\n​\n\n\"fmt\"\n\n​\n\n\"net/http\"\n\n​\n\n\"os\"\n\n​\n\n​\n\n\"github.com/coze-dev/coze-go\"\n\n​\n\n)\n\n​\n\n​\n\n// How to effectuate OpenAPI authorization through the OAuth authorization code method.\n\n​\n\n//\n\n​\n\n// Firstly, users need to access https://www.coze.com/open/oauth/apps. For the cn environment,\n\n​\n\n// users need to access https://www.coze.cn/open/oauth/apps to create an OAuth App of the type\n\n​\n\n// of Web application.\n\n​\n\n// The specific creation process can be referred to in the document:\n\n​\n\n// https://www.coze.com/docs/developer_guides/oauth_code. For the cn environment, it can be\n\n​\n\n// accessed at https://www.coze.cn/docs/developer_guides/oauth_code.\n\n​\n\n// After the creation is completed, the client ID, client secret, and redirect link, can be\n\n​\n\n// obtained. For the client secret, users need to keep it securely to avoid leakage.\n\n​\n\n​\n\nfunc\n\nmain\n\n()\n\n{\n\n​\n\nredirectURI := os.Getenv(\n\n\"COZE_WEB_OAUTH_REDIRECT_URI\"\n\n)\n\n​\n\nclientSecret := os.Getenv(\n\n\"COZE_WEB_OAUTH_CLIENT_SECRET\"\n\n)\n\n​\n\nclientID := os.Getenv(\n\n\"COZE_WEB_OAUTH_CLIENT_ID\"\n\n)\n\n​\n\nctx := context.Background()\n\n​\n\n​\n\n// The default access is api.coze.com, but if you need to access api.coze.cn,\n\n​\n\n// please use base_url to configure the api endpoint to access\n\n​\n\ncozeAPIBase := os.Getenv(\n\n\"COZE_API_BASE\"\n\n)\n\n​\n\nif\n\ncozeAPIBase ==\n\n\"\"\n\n{\n\n​\n\ncozeAPIBase = coze.ComBaseURL\n\n​\n\n}\n\n​\n\n​\n\n// The sdk offers the WebOAuthClient class to establish an authorization for Web OAuth.\n\n​\n\n// Firstly, it is required to initialize the WebOAuthApp with the client ID and client secret.\n\n​\n\noauth, err := coze.NewWebOAuthClient(clientID, clientSecret, coze.WithAuthBaseURL(cozeAPIBase))\n\n​\n\nif\n\nerr !=\n\nnil\n\n{\n\n​\n\nfmt.Printf(\n\n\"Failed to create OAuth client: %v\\n\"\n\n, err)\n\n​\n\nreturn\n\n​\n\n}\n\n​\n\n​\n\n// Generate the authorization link and direct the user to open it.\n\n​\n\noauthURL := oauth.GetOAuthURL(ctx, &coze.GetWebOAuthURLReq{\n\n​\n\nRedirectURI: redirectURI,\n\n​\n\nState:\n\n\"state\"\n\n,\n\n​\n\n})\n\n​\n\nfmt.Println(oauthURL)\n\n​\n\n​\n\n// The space permissions for which the Access Token is granted can be specified. As following codes:\n\n​\n\n// oauthURL = oauth.GetOAuthURL(&coze.GetWebOAuthURLReq{\n\n​\n\n//     RedirectURI: redirectURI,\n\n​\n\n//     State:       \"state\",\n\n​\n\n//     WorkspaceID: &workspaceID,\n\n​\n\n// })\n\n​\n\n// fmt.Println(oauthURL)\n\n​\n\n​\n\n// After the user clicks the authorization consent button, the coze web page will redirect\n\n​\n\n// to the redirect address configured in the authorization link and carry the authorization\n\n​\n\n// code and state parameters in the address via the query string.\n\n​\n\n//\n\n​\n\n// Get from the query of the redirect interface: query.get('code')\n\n​\n\ncode :=\n\n\"mock code\"\n\n​\n\n​\n\n// After obtaining the code after redirection, the interface to exchange the code for a\n\n​\n\n// token can be invoked to generate the coze access_token of the authorized user.\n\n​\n\nresp, err := oauth.GetAccessToken(ctx, &coze.GetWebOAuthAccessTokenReq{\n\n​\n\nCode:        code,\n\n​\n\nRedirectURI: redirectURI,\n\n​\n\n})\n\n​\n\nif\n\nerr !=\n\nnil\n\n{\n\n​\n\nfmt.Printf(\n\n\"Failed to get access token: %v\\n\"\n\n, err)\n\n​\n\nreturn\n\n​\n\n}\n\n​\n\nfmt.Println(resp)\n\n​\n\n​\n\n// When the token expires, you can also refresh and re-obtain the token\n\n​\n\nresp, err = oauth.RefreshToken(ctx, resp.RefreshToken)\n\n​\n\nif\n\nerr !=\n\nnil\n\n{\n\n​\n\nfmt.Printf(\n\n\"Failed to refresh token: %v\\n\"\n\n, err)\n\n​\n\nreturn\n\n​\n\n}\n\n​\n\n​\n\nfmt.Printf(\n\n\"%+v\\n\"\n\n, resp)\n\n​\n\n​\n\n// you can get request log by getLogID method\n\n​\n\nfmt.Println(resp.LogID())\n\n​\n\n​\n\n// use the access token to init Coze client\n\n​\n\ncozeCli := coze.NewCozeAPI(coze.NewTokenAuth(resp.AccessToken))\n\n​\n\n_, err = cozeCli.Chat.Create(ctx, &coze.CreateChatsReq{\n\n​\n\n// chat request params\n\n​\n\n})\n\n​\n\nif\n\nerr !=\n\nnil\n\n{\n\n​\n\ncozeErr := coze.Error{}\n\n​\n\nif\n\nerrors.As(err, &cozeErr) {\n\n​\n\n// no permission error code\n\n​\n\nif\n\ncozeErr.Code ==\n\n4101\n\n|| cozeErr.Code ==\n\n4100\n\n{\n\n​\n\n// request user authorization\n\nagin\n\n​\n\n// redirect to oauthURL\n\n​\n\n// call http.Redirect(w, r, oauthURL,\n\nhttp.StatusFound)\n\n​\n\n}\n\n​\n\n}\n\n​\n\n}\n\n​\n\n_ = cozeCli\n\n​\n\n}\n\n​\n\n​\n\n2 迁移工作空间到企业\n\n​\n\n操作步骤可参考\n\n​\n\n功能简介\n\n。\n\n​\n\n3 重新触发授权\n\n​\n\n企业的超级管理员或管理员登录应用触发授权，然后在扣子编程重新安装应用，安装的步骤请参见\n\n​\n\nOAuth 应用管理\n\n。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n步骤三：线上观测\n\n​\n\n成功迁移工作空间之后，应实时监测线上服务的请求成功率，确保线上服务无异常。\n\n​\n\n如果线上授权相关逻辑持续稳定运行，可以酌情考虑线下原授权代码，切换为新的授权凭证来访问扣子 OpenAPI。\n\n​\n\n授权\n\n企业\n\n访问个人账号资源\n\n​\n\n购买扣子企业并\n\n完成个人工作空间迁移后\n\n，\n\n因\n\n会话、音色等账号级别的资源无法自动迁移，若希望\n\n让企业下的访问令牌也能访问原个人空间中的账号级别的资源，\n\n超级管理员或管理员可以手动授权企业版中的 Token 访问个人账号中的会话、音色等账号级资源。\n\n​\n\n1.\n\n超级管理员或管理员切换到企业账号，创建个人访问令牌或 Oauth 应用，并授予会话管理等\n\n账号层级\n\n的权限，具体操作步骤请参见\n\n​\n\nOAuth JWT 授权（开发者）\n\n和\n\n​\n\n添加个人访问令牌\n\n。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n说明\n\n仅支持 PAT 和 AppAuth 授权，不支持 OBO 授权。\n\n​\n\n仅支持授权\n\n账号层级\n\n的权限，不支持授权\n\n工作空间层级\n\n的权限，你可以在授权对话框的权限列表中查看该权限的层级属性。\n\n​\n\n​\n\n2.\n\n超级管理员或管理员访问\n\n个人账号资源授权\n\n页面，可以查看本人创建的个人访问令牌，以及企业中创建的所有 AppAuth。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n3.\n\n单击操作列中的\n\n授权\n\n。\n\n​\n\n授权后，你可以使用该 Token 访问你个人账号下的账号级资源。\n\n​\n\n​\n\n上一篇\n\n如何实现会话隔离\n\n下一篇\n\nChat SDK 概述",
        "links": []
      },
      "markdown": "| 注意事项​ | 说明​ |\n| 操作时段​ | 如果智能体、应用或工作流已发布到生产环境、线上用户量较大，为了保障平滑迁移，建议选择服务流量较少的时段执行本步骤，例如深夜或凌晨时段。​ |\n| 权限设置​ | 请确保已覆盖原授权的所有权限点，以免因权限不足导致 API 访问失败。​操作时，访问空间建议选择所有工作空间，确保空间迁移后访问令牌能访问该企业中的所有空间，包括后续创建的新空间。​ |\n| API 方式创建会话​ | 由于智能体等资源属于空间，API 方式创建的会话属于扣子用户，迁移空间之后，智能体无权限访问原个人账号下的会话，建议开发者创建新会话。创建方式可参考​创建会话。​ |\n| 原 OAuth 应用​ | 请勿禁用或删除参考本文档完成改造的个人版 OAuth 应用，否则会影响在企业中的 OpenAPI 访问。​ |\n\n- 请确保已覆盖原授权的所有权限点，以免因权限不足导致 API 访问失败。 ​\n\n- 操作时，访问空间建议选择所有工作空间，确保空间迁移后访问令牌能访问该企业中的所有空间，包括后续创建的新空间。 ​\n\n| 授权类型​ | 授权方式​ | 客户端类型​ |\n| 个人访问令牌​ | ​添加个人访问令牌​ | 无​ |\n| OBO 授权​ | ​OAuth 授权码授权​ | Web 后端应用​ |\n| ​ | ​OAuth PKCE​ | 移动端/PC 桌面端/单页面应用​ |\n| ​ | ​OAuth 设备授权​ | TV 端/设备应用/类命令行程序​ |\n| AppAuth 授权​ | ​OAuth JWT 授权（开发者）​ | 服务类应用​ |\n\n\n\n- ​ ​ ​ ​ ​\n\n\n- 授权相关的设置方式如下： ​\n\n- 授权范围选择企业 ​\n\n- 工作空间选择所有工作空间 ​\n\n- ​ ​ ​ ​ ​\n\n\n- 企业的超级管理员或管理员切换到企业中。在左侧导航栏单击 企业 API ，访问 应用安装管理 页面，确认授权成功。 ​\n\n- ​ ​ ​ ​ ​\n\n\n- ​ 账号 ​ 获取方式 ​ 示例 ​ 个人账号 UID ​ （personalAccountId） ​ 必须是创建 OAuth 应用的扣子账号 UID。 ​ 在扣子编程左下角单击个人头像，并选择账号设置，在账号页面中查看 UID。 ​ ​ ​ ​ ​ ​ ​ 企业 ID ​ （enterpriseAccountId） ​ 你可以在 组织管理 > 组织设置 页面查看企业 ID。 ​ ​ ​ ​ ​ ​ ​\n\n| 账号​ | 获取方式​ | 示例​ |\n| 个人账号 UID​（personalAccountId）​ | 必须是创建 OAuth 应用的扣子账号 UID。​在扣子编程左下角单击个人头像，并选择账号设置，在账号页面中查看 UID。​​ | ​​​​​ |\n| 企业 ID​（enterpriseAccountId）​ | 你可以在组织管理>组织设置页面查看企业 ID。​ | ​​​​​ |\n\n\n- 以聊天接口为例，Go 语言代码改造方式如下，注意其中高亮部分： ​\n\n- ​ Go 复制 package main ​ ​ import ( ​ \"context\" ​ \"errors\" ​ \"fmt\" ​ \"github.com/coze-dev/coze-go\" ​ \"os\" ​ ) ​ ​ func main () { ​ // The default access is api.coze.com, but if you need to access api.coze.cn, ​ // please use base_url to configure the api endpoint to access ​ cozeAPIBase := os.Getenv( \"COZE_API_BASE\" ) ​ jwtOauthClientID := os.Getenv( \"COZE_JWT_OAUTH_CLIENT_ID\" ) ​ jwtOauthPrivateKey := os.Getenv( \"COZE_JWT_OAUTH_PRIVATE_KEY\" ) ​ jwtOauthPrivateKeyFilePath := os.Getenv( \"COZE_JWT_OAUTH_PRIVATE_KEY_FILE_PATH\" ) ​ jwtOauthPublicKeyID := os.Getenv( \"COZE_JWT_OAUTH_PUBLIC_KEY_ID\" ) ​ botID := os.Getenv( \"PUBLISHED_BOT_ID\" ) ​ uid := os.Getenv( \"USER_ID\" ) ​ ​ // Read private key from file ​ privateKeyBytes, err := os.ReadFile(jwtOauthPrivateKeyFilePath) ​ if err != nil { ​ fmt.Printf( \"Error reading private key file: %v\\n\" , err) ​ return ​ } ​ jwtOauthPrivateKey = string (privateKeyBytes) ​ ​ oauth , err := coze.NewJWTOAuthClient(coze.NewJWTOAuthClientParam{ ​ ClientID: jwtOauthClientID, PublicKey: jwtOauthPublicKeyID, PrivateKeyPEM: jwtOauthPrivateKey, ​ }, coze.WithAuthBaseURL(cozeAPIBase)) ​ if err != nil { ​ fmt.Printf( \"Error creating JWT OAuth client: %v\\n\" , err) ​ return ​ } ​ ctx := context.Background() ​ ​ var personalAccountId int64 = 12345 // 个人版 账号 UID ​ var enterpriseAccountId int64 = 23456 // 企业版 账号 ID ​ ​ // 获取个人版下的访问凭证 ​ cozeCli := coze.NewCozeAPI(coze.NewJWTAuth(oauth, &coze.GetJWTAccessTokenReq{ ​ AccountID:   &personalAccountId, ​ }), coze.WithBaseURL(cozeAPIBase)) ​ // 获取企业版下的访问凭证 ​ cozeCli4Enterprise := coze.NewCozeAPI(coze.NewJWTAuth(oauth, &coze.GetJWTAccessTokenReq{ ​ EnterpriseID:   &enterpriseAccountId, ​ }), coze.WithBaseURL(cozeAPIBase)) ​ ​ req := &coze.CreateChatsReq{ ​ BotID:  botID, ​ UserID: uid, ​ Messages: []*coze.Message{ ​ coze.BuildUserQuestionText( \"What can you do?\" , nil ), ​ }, ​ } ​ ​ // 先尝试通过个人版的凭证请求chat接口 ​ resp, err := cozeCli.Chat.Create(ctx , req ) ​ if err == nil { ​ fmt.Println(resp) ​ return ​ } ​ // 当请求个人版接口出现鉴权失败时, 再尝试基于企业版的凭证请求chat接口 ​ cozeErr := coze.Error{} ​ if errors.As(err, &cozeErr) { ​ // no permission error code ​ if cozeErr.Code == 4101 || cozeErr.Code == 4100 { ​ // no permission try chat with enterprise account ​ resp, err = cozeCli4Enterprise.Chat.Create(ctx, req) ​ if err == nil { ​ fmt.Println(resp) ​ return ​ } ​ } ​ } ​ fmt.Println(err) ​ } ​ ​\n\n\n- 修改授权相关代码之后，建议确认代码中增加的逻辑准确、有效。例如在企业中新建空间和智能体，使用更新后的授权代码访问新智能体，对齐接口能力，验证通过之后再迁移工作空间。 ​\n\n\n\n\n- ​ ​ ​ ​ ​\n\n- 建议仅在测试环境、调试场景中使用个人访问令牌，并严格限制其使用范围和有效期，生产环境中建议避免使用个人访问令牌。 ​\n\n- 迁移成功且验证 API 访问正常之后，建议及时删除旧的个人访问令牌，以免令牌到期 后无法访问。 ​\n\n\n- ​ ​ ​ ​ ​\n\n- 说明 仅支持 PAT 和 AppAuth 授权，不支持 OBO 授权。 ​ 仅支持授权 账号层级 的权限，不支持授权 工作空间层级 的权限，你可以在授权对话框的权限列表中查看该权限的层级属性。 ​ ​\n\n- 仅支持 PAT 和 AppAuth 授权，不支持 OBO 授权。 ​\n\n- 仅支持授权 账号层级 的权限，不支持授权 工作空间层级 的权限，你可以在授权对话框的权限列表中查看该权限的层级属性。 ​\n\n\n- ​ ​ ​ ​ ​\n\n\n- 授权后，你可以使用该 Token 访问你个人账号下的账号级资源。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/web_sdk_overview",
      "title": "Chat SDK 概述",
      "content": {
        "sections": [],
        "full_text": "Chat SDK 概述\n\n扣子\n\n编程\n\nChat SDK 是一个 JavaScript 库，集成了\n\n扣子\n\n编程\n\nOpenAPI 的对话、文件上传等能力，便于开发者高效、便捷、快速地搭建一个聊天应用。集成\n\n扣子\n\n编程\n\nChat SDK 之后，用户可通过网页悬浮窗方式与 AI 应用对话。\n\n​\n\n版本说明\n\n​\n\n自 1.0.0-beta.4 版本开始，\n\n扣子\n\n编程\n\n提供全新的 Chat SDK 供开发者使用，改版后，Chat SDK 支持\n\n扣子\n\n编程\n\nOpenAPI 的鉴权能力，开发者可按需选择是否鉴权及鉴权方式，例如指定个人访问令牌或 OAuth 访问密钥完成 Chat SDK 的鉴权。如果选择鉴权，开发者使用 Chat SDK 需传入访问密钥，\n\n扣子\n\n编程会识别不同用户身份，并保存各个用户的消息记录，即使用户更换终端设备或浏览器，仍可以通过访问关联的账户查看历史记录。全新版本的 Chat SDK 安装及使用方式，可查看\n\n​\n\n安装并使用 Chat SDK\n\n。\n\n​\n\n1.0.0-beta.4 版本之前的 Chat SDK 为历史版本，开发者无需鉴权即可集成 SDK。历史版本 Chat SDK 仅提供基础的对话能力，安全性及扩展性较低，后续将不再维护和更新。历史版本的 Chat SDK 安装及使用方式，可查看\n\n​\n\n（历史版本）Chat SDK\n\n。\n\n​\n\n效果预览\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n对应的示例代码可参考\n\n​\n\n示例\n\n。\n\n​\n\n功能特性\n\n​\n\n除了基础的对话能力之外，Chat SDK 还提供多种定制化能力，支持多种鉴权模式，可调整聊天框的显示效果等多种配置。\n\n​\n\n说明\n\n详细的功能点列表及配置方式可参考\n\n​\n\n步骤五：自定义聊天界面与交互\n\n。\n\n​\n\n​\n\n​\n\n功能\n\n​\n\n说明\n\n​\n\n多形态支持\n\n​\n\n通过 Chat SDK，可以在你的应用程序中和扣子应用、智能体实时对话。\n\n​\n\n鉴权能力\n\n​\n\n通过\n\n扣子\n\n编程\n\n访问令牌进行 OpenAPI 的鉴权，支持个人访问密钥（PAT）、普通 OAuth 访问密钥及入驻渠道的 OAuth 访问密钥。\n\n​\n\n用户识别\n\n​\n\n和 AI 应用对话的用户身份是用户在开发者网站上的身份。开发者可以向 Chat SDK 提供 AI 应用用户的身份信息，也可以在 Chat SDK 的 UI 中显示不同的用户信息，包括头像、用户名、ID 等。\n\n​\n\n交互能力\n\n​\n\nChat SDK 为开发者提供了以下两种打开聊天窗的方式。\n\n​\n\n完全由 Chat SDK 接管，页面中会自动加载一个悬浮球，用户点击悬浮球会展示出聊天框。\n\n​\n\n为开发者提供显示隐藏聊天框的能力，开发者可根据情况自主决定聊天框的显示和隐藏。\n\n​\n\n展示效果\n\n​\n\n支持调整聊天框中展示的用户信息、UI 效果、悬浮球效果、底部文案等配置，例如对话窗口的应用图标、悬浮球的展示或隐藏、自定义底部文案、开启或关闭上传能力等。\n\n​\n\n会话隔离\n\n​\n\nChat SDK 支持会话隔离，使每个用户只能看到自己和智能体的对话历史。使用扣子 OAuth JWT 鉴权方式获取密钥时设置 session_name 即可，详细说明可参考\n\n​\n\n如何实现会话隔离\n\n。\n\n​\n\n​\n\n使用限制\n\n​\n\nChat SDK 暂不支持触发器、文件盒子、卡片部分功能（按钮唤起插件或工作流）等能力。\n\n​\n\nChat SDK 暂不支持问答节点的卡片效果，用户需要手动复制问答节点的选项，并发送给智能体。\n\n​\n\n费用说明\n\n​\n\n扣子不同版本账号的 Chat SDK 使用限额存在差异。\n\n​\n\n个人免费版：Chat SDK 的免费额度为每个账号 100 次对话。一旦累计对话次数超过免费额度，此账号将无法继续使用扣子 Chat SDK。免费额度不适用于通过扣子编程、其他发布渠道或直接通过 API 发起的请求。\n\n​\n\n个人付费版（进阶版、高阶版、旗舰版）、企业版（企业标准版、企业旗舰版）：不限制通过 Chat SDK 发起对话的频率和次数。通过 Chat SDK 发起对话，本质上是调用\n\n发起对话\n\nAPI，根据输入和输出的 Token 数量扣减套餐中的积分，具体请参见\n\n​\n\n计费概述\n\n。如果企业版中调用了方舟模型，会根据\n\n方舟模型 Token 消耗\n\n收取费用。\n\n​\n\n​\n\n上一篇\n\n升级企业版后更新 API 授权\n\n下一篇\n\n安装并使用 Chat SDK",
        "links": []
      },
      "markdown": "| 功能​ | 说明​ |\n| 多形态支持​ | 通过 Chat SDK，可以在你的应用程序中和扣子应用、智能体实时对话。​ |\n| 鉴权能力​ | 通过扣子编程访问令牌进行 OpenAPI 的鉴权，支持个人访问密钥（PAT）、普通 OAuth 访问密钥及入驻渠道的 OAuth 访问密钥。​ |\n| 用户识别​ | 和 AI 应用对话的用户身份是用户在开发者网站上的身份。开发者可以向 Chat SDK 提供 AI 应用用户的身份信息，也可以在 Chat SDK 的 UI 中显示不同的用户信息，包括头像、用户名、ID 等。​ |\n| 交互能力​ | Chat SDK 为开发者提供了以下两种打开聊天窗的方式。​完全由 Chat SDK 接管，页面中会自动加载一个悬浮球，用户点击悬浮球会展示出聊天框。​为开发者提供显示隐藏聊天框的能力，开发者可根据情况自主决定聊天框的显示和隐藏。​ |\n| 展示效果​ | 支持调整聊天框中展示的用户信息、UI 效果、悬浮球效果、底部文案等配置，例如对话窗口的应用图标、悬浮球的展示或隐藏、自定义底部文案、开启或关闭上传能力等。​ |\n| 会话隔离​ | Chat SDK 支持会话隔离，使每个用户只能看到自己和智能体的对话历史。使用扣子 OAuth JWT 鉴权方式获取密钥时设置 session_name 即可，详细说明可参考​如何实现会话隔离。​ |\n\n- 完全由 Chat SDK 接管，页面中会自动加载一个悬浮球，用户点击悬浮球会展示出聊天框。 ​\n\n- 为开发者提供显示隐藏聊天框的能力，开发者可根据情况自主决定聊天框的显示和隐藏。 ​\n\n- Chat SDK 暂不支持触发器、文件盒子、卡片部分功能（按钮唤起插件或工作流）等能力。 ​\n\n- Chat SDK 暂不支持问答节点的卡片效果，用户需要手动复制问答节点的选项，并发送给智能体。 ​\n\n- 个人免费版：Chat SDK 的免费额度为每个账号 100 次对话。一旦累计对话次数超过免费额度，此账号将无法继续使用扣子 Chat SDK。免费额度不适用于通过扣子编程、其他发布渠道或直接通过 API 发起的请求。 ​\n\n- 个人付费版（进阶版、高阶版、旗舰版）、企业版（企业标准版、企业旗舰版）：不限制通过 Chat SDK 发起对话的频率和次数。通过 Chat SDK 发起对话，本质上是调用 发起对话 API，根据输入和输出的 Token 数量扣减套餐中的积分，具体请参见 ​ 计费概述 。如果企业版中调用了方舟模型，会根据 方舟模型 Token 消耗 收取费用。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/install_web_sdk",
      "title": "安装并使用 Chat SDK",
      "content": {
        "sections": [],
        "full_text": "安装并使用 Chat SDK\n\n本文介绍如何安装并使用扣子 Chat SDK，开发者可以参考本文档在自己开发的网站或 App 中快速实现智能对话功能。适用于智能客服、答疑助手或企业内部的 IT 支持机器人等场景。\n\n​\n\n前置条件\n\n​\n\n浏览器兼容性\n\n​\n\nChat  SDK 的运行环境要求如下表所示。\n\n​\n\n​\n\n浏览器\n\n​\n\n版本限制\n\n​\n\nChrome\n\n​\n\n87.0 及以上\n\n​\n\nEdge\n\n​\n\n88.0 及以上\n\n​\n\nSafari\n\n​\n\n14.0 及以上\n\n​\n\nFirefox\n\n​\n\n78.0 及以上\n\n​\n\n​\n\n获取访问密钥\n\n​\n\n访问密钥用于 Chat SDK 的身份认证与鉴权。根据使用场景选择合适的鉴权方式，各鉴权方式的区别请参见\n\n​\n\n鉴权方式概述\n\n。\n\n​\n\n​\n\n场景\n\n​\n\n推荐方案\n\n​\n\n说明\n\n​\n\n参考文档\n\n​\n\n开发调试\n\n​\n\n个人访问令牌（PAT）\n\n​\n\n快速跑通 Chat SDK 的整体流程。\n\n​\n\n​\n\n添加个人访问令牌\n\n​\n\n生产环境\n\n​\n\n服务访问令牌（SAT）\n\n​\n\n操作更简单，能够有效简化授权流程，适合需要长期稳定访问且无需进行会话隔离的场景。\n\n​\n\n仅企业版（企业标准版、企业旗舰版）支持使用 SAT 鉴权。\n\n​\n\n​\n\n添加服务访问令牌\n\n​\n\n​\n\nOAuth 鉴权\n\n​\n\n支持渠道用户访问智能体、会话隔离（即智能体不同账号的消息内容互相隔离）。\n\n​\n\n​\n\nOAuth 应用管理\n\n​\n\n​\n\nOAuth JWT 授权（渠道场景）\n\n​\n\n​\n\n权限要求\n\n​\n\n访问密钥需被授予以下权限，才能正常使用 Chat SDK 的各项能力。Chat SDK 所需的权限列表如下：\n\n​\n\n​\n\n密钥类型\n\n​\n\nPAT /\n\nSAT /普通 OAuth\n\n​\n\n渠道 OAuth 访问密钥\n\n​\n\n权限点\n\n​\n\n​\n\nBot管理\n\n​\n\nchat\n\n​\n\ngetMetadata\n\n​\n\n会话管理\n\n​\n\nlistConversation\n\n​\n\ncreateConversation\n\n​\n\neditConversation\n\n​\n\n对话\n\n​\n\ncancelChat\n\n​\n\n工作流\n\n​\n\ngetMetadata\n\n​\n\n应用管理\n\n​\n\ngetMetadata\n\n​\n\n文件\n\n​\n\nuploadFile\n\n​\n\n消息\n\n​\n\nlistMessage\n\n​\n\n智能音视频\n\n​\n\ncreateTranscription\n\n​\n\ncreateSpeech\n\n​\n\nbotChat\n\n​\n\ngetMetadata\n\n​\n\nlistConversation\n\n​\n\ncreateConversation\n\n​\n\neditConversation\n\n​\n\nuploadFile\n\n​\n\nlistConversationMessage\n\n​\n\ncancelConversationChat\n\n​\n\ncreateTranscription\n\n​\n\ncreateSpeech\n\n​\n\n​\n\n​\n\n说明\n\n渠道 OAuth 访问密钥的权限点是渠道类型的 OAuth 应用中设置的权限点，创建应用并授权的详细说明可参考\n\n​\n\nOAuth JWT 授权（渠道场景）\n\n。\n\n​\n\n​\n\n调试与体验 Chat SDK\n\n​\n\n你可以通过\n\nPlayground\n\n调试与体验 Chat SDK 各配置项的功能和效果。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n配置流程\n\n​\n\n步骤一：发布智能体或扣子应用\n\n​\n\n在智能体或 AI 应用的发布页面，选择 Chat SDK，并单击\n\n发布\n\n。发布的详细流程可参考：\n\n​\n\n​\n\n发布为 Chat SDK\n\n​\n\n​\n\n发布到 Chat SDK\n\n​\n\n步骤二：获取安装代码\n\n​\n\n进入发布页面复制 SDK 安装代码。\n\n​\n\n​\n\n步骤三：安装 SDK\n\n​\n\n将步骤二中复制的安装代码粘贴到网页中，例如 <body> 标签内，通过\n\nscript\n\n标签加载 Chat SDK 的 js 代码。\n\n​\n\n示例代码如下：\n\n​\n\n​\n\n​\n\n步骤四：初始化配置\n\n​\n\n通过调用 CozeWebSDK.WebChatClient\n\n初始化客户端。当前页面中聊天框包括 PC 和移动端两种布局样式，在 PC 端中，聊天框位于页面右下角，移动端聊天框会铺满全屏。\n\n​\n\n智能体配置\n\n​\n\n调用 CozeWebSDK.WebChatClient 时，你需要配置\n\nconfig\n\n（智能体信息）和\n\nauth\n\n（鉴权信息）。\n\n​\n\nconfig\n\n：必选参数，表示智能体的配置信息。\n\n​\n\n调用智能体时，需要设置以下参数：\n\n​\n\n​\n\nauth\n\n：表示鉴权方式。当未配置此参数时表示不鉴权。为了账号安全，建议配置鉴权。\n\n​\n\n​\n\n初始化示例如下：\n\n​\n\n​\n\n​\n\n扣子应用配置\n\n​\n\n调用 CozeWebSDK.WebChatClient 时，你需要配置扣子应用的基础信息以及鉴权参数：\n\n​\n\nconfig\n\n：必选参数，表示应用的配置信息。\n\n​\n\n​\n\nauth\n\n：表示鉴权方式。当未配置此参数时表示不鉴权。为了账号安全，建议配置鉴权。\n\n​\n\n​\n\n示例如下：\n\n​\n\n​\n\n步骤五：自定义聊天界面与交互\n\n​\n\n开发者可以按需调整对话框的多种展示效果，例如展示的用户信息、对话框 UI 效果、悬浮球展示、底部文案等。\n\n​\n\n你可以在 WebChatClient 方法中添加各种属性，实现对应的效果。目前支持的属性如下：\n\n​\n\n​\n\n步骤六：销毁客户端\n\n​\n\n若需在页面卸载或特定场景下关闭 Chat SDK，可调用\n\ndestroy\n\n方法销毁客户端，释放资源。\n\n​\n\n​\n\n自定义聊天界面与交互\n\n​\n\n你可以配置对话框中的用户信息、布局、悬浮球、底部文案、顶部标题栏等 UI 元素，以满足品牌风格需求。\n\n​\n\n配置用户信息\n\n​\n\nuserInfo\n\n参数用于设置对话框中显示的用户信息，包括对话框中的用户头像和用户昵称。同时，此处指定的用户 ID 也会通过\n\n​\n\n发起对话\n\nAPI 传递给扣子服务端。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n配置示例如下：\n\n​\n\n​\n\n基础 UI 配置\n\n​\n\nui.base\n\n参数用于添加聊天窗口的整体 UI 效果，包括应用图标、页面布局、语言属性等。\n\n​\n\n​\n\n示例代码如下：\n\n​\n\n​\n\n悬浮球\n\n​\n\nui.asstBtn\n\n参数用于控制是否在页面右下角展示悬浮球。默认展示，用户点击悬浮球后将弹出聊天窗口。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n示例代码如下：\n\n​\n\n​\n\nChat SDK 悬浮球的位置默认在页面右下角，不支持移动，如果需要调整悬浮球的位置，你可以隐藏默认的悬浮球，自定义悬浮球的位置和样式，具体请参见\n\n​\n\nChat SDK 悬浮球位置如何移动？\n\n。\n\n​\n\n底部文案\n\n​\n\n聊天框底部会展示对话服务的提供方信息，默认为\n\nPowered by coze. AI-generated content for reference only.\n\n。开发者通过\n\nui.footer\n\n参数隐藏此文案或改为其他文案，支持在文案中设置超链接。\n\n​\n\n底部文案默认展示效果如下：\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\nfooter\n\n参数配置说明如下：\n\n​\n\n​\n\n配置示例如下：\n\n​\n\n​\n\n此配置的对应的展示效果如下：\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n顶部标题栏配置\n\n​\n\n聊天框顶部默认\n\n展示智能体名称\n\n、icon 及关闭按钮。展示效果类似如下：\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n您可以通过\n\nui.header\n\n参数配置是否展示顶部标题栏和关闭按钮，header 参数配置说明如下：\n\n​\n\n​\n\n配置示例如下：\n\n​\n\n​\n\n聊天框\n\n​\n\nchatBot\n\n参数用于控制聊天框的 UI 和基础能力，包括标题、大小、位置等基本属性，还可以指定是否支持在聊天框中上传文件。此参数同时提供多个回调方法，用于同步聊天框显示、隐藏等事件通知。\n\n​\n\n配置说明如下：\n\n​\n\n​\n\n相关回调：\n\n​\n\nonHide：\n\n当聊天框隐藏的时候，会回调该方法。\n\n​\n\nonShow:\n\n当聊天框显示的时候，会回调该方法。\n\n​\n\nonBeforeShow:\n\n聊天框显示前调用，如果返回了 false，则不会显示。支持异步函数。\n\n​\n\nonBeforeHide:\n\n聊天框隐藏前调用，如果返回了 false，则不会隐藏。支持异步函数。\n\n​\n\n在以下示例中，聊天框标题为 Kids' Playmate | Snowy，并开启上传文件功能。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n对应的代码示例如下：\n\n​\n\n​\n\n通过 chatbot 的 el 参数设置组件的示例代码如下：\n\n​\n\n​\n\n消息评价\n\n​\n\n你可以在\n\nchatBot\n\n参数中配置是否允许用户对智能体的回答进行评价（点赞 / 点踩），默认禁用评价功能。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n示例代码如下：\n\n​\n\n​\n\n会话列表\n\n​\n\nui.conversations\n\n参数用于控制是否展示会话列表功能。开启后，聊天框左上角会新增一个会话列表按钮，用户可借此查看历史对话、重新发起对话、创建新的会话、重命名或删除会话，实现便捷的会话管理。\n\n​\n\n​\n\n​\n\n示例代码如下：\n\n​\n\n​\n\n相关操作\n\n​\n\n更新 SDK 版本\n\n​\n\n扣子 Chat SDK 将持续更新迭代，支持丰富的对话能力和展示效果。你可以在 Chat SDK 的 script 标签中指定 Chat SDK 的最新版本号，体验和使用最新的 Chat SDK 对话效果。\n\n​\n\n在以下代码中，将\n\n{{version}}\n\n部分替换为 Chat SDK 的最新版本号。\n\n你\n\n可以在\n\n​\n\nChat SDK 发布历史\n\n中查看最新版本号。\n\n​\n\n​\n\n解绑 Chat SDK\n\n​\n\n如果不再需要通过 Chat SDK 使用 AI 应用，可以在发布页面点击\n\n解绑\n\n按钮。一旦\n\n解绑\n\n，智能体或应用就无法通过集成的 Web 应用程序使用。 如果您想恢复 Web 应用程序的访问，需要再次将智能体或应用发布为 Chat SDK。\n\n​\n\n​\n\n完整示例代码\n\n​\n\n以下是一段完整的 Chat SDK 调用智能体的代码示例。\n\n​\n\n​\n\n相关文档\n\n​\n\n如果需要将不同业务侧用户的会话互相隔离开来，每个用户只能看到自己和智能体的对话历史，请参见\n\n​\n\n如何实现会话隔离\n\n。\n\n​\n\n上一篇\n\nChat SDK 概述\n\n下一篇\n\nChat SDK 发布历史",
        "links": []
      },
      "markdown": "| 浏览器​ | 版本限制​ |\n| Chrome​ | 87.0 及以上​ |\n| Edge​ | 88.0 及以上​ |\n| Safari​ | 14.0 及以上​ |\n| Firefox​ | 78.0 及以上​ |\n\n| 场景​ | 推荐方案​ | 说明​ | 参考文档​ |\n| 开发调试​ | 个人访问令牌（PAT）​ | 快速跑通 Chat SDK 的整体流程。​ | ​添加个人访问令牌​ |\n| 生产环境​ | 服务访问令牌（SAT）​ | 操作更简单，能够有效简化授权流程，适合需要长期稳定访问且无需进行会话隔离的场景。​仅企业版（企业标准版、企业旗舰版）支持使用 SAT 鉴权。​ | ​添加服务访问令牌​ |\n| ​ | OAuth 鉴权​ | 支持渠道用户访问智能体、会话隔离（即智能体不同账号的消息内容互相隔离）。​ | ​OAuth 应用管理​​OAuth JWT 授权（渠道场景）​ |\n\n| 密钥类型​ | PAT /SAT /普通 OAuth​ | 渠道 OAuth 访问密钥​ |\n| 权限点​​ | Bot管理​chat​getMetadata​会话管理​listConversation​createConversation​editConversation​对话​cancelChat​工作流​getMetadata​应用管理​getMetadata​文件​uploadFile​消息​listMessage​智能音视频​createTranscription​createSpeech​ | botChat​getMetadata​listConversation​createConversation​editConversation​uploadFile​listConversationMessage​cancelConversationChat​createTranscription​createSpeech​​ |\n\n- Bot管理 ​\n\n- chat ​\n\n- getMetadata ​\n\n- 会话管理 ​\n\n- listConversation ​\n\n- createConversation ​\n\n- editConversation ​\n\n- 对话 ​\n\n- cancelChat ​\n\n- 工作流 ​\n\n- getMetadata ​\n\n- 应用管理 ​\n\n- getMetadata ​\n\n- 文件 ​\n\n- uploadFile ​\n\n- 消息 ​\n\n- listMessage ​\n\n- 智能音视频 ​\n\n- createTranscription ​\n\n- createSpeech ​\n\n- botChat ​\n\n- getMetadata ​\n\n- listConversation ​\n\n- createConversation ​\n\n- editConversation ​\n\n- uploadFile ​\n\n- listConversationMessage ​\n\n- cancelConversationChat ​\n\n- createTranscription ​\n\n- createSpeech ​\n\n- ​ 发布为 Chat SDK ​\n\n- ​ 发布到 Chat SDK ​\n\n- config ：必选参数，表示智能体的配置信息。 ​\n\n- 调用智能体时，需要设置以下参数： ​\n\n- ​\n\n- auth ：表示鉴权方式。当未配置此参数时表示不鉴权。为了账号安全，建议配置鉴权。 ​\n\n- ​\n\n- config ：必选参数，表示应用的配置信息。 ​\n\n- ​\n\n- auth ：表示鉴权方式。当未配置此参数时表示不鉴权。为了账号安全，建议配置鉴权。 ​\n\n- ​\n\n- onHide： 当聊天框隐藏的时候，会回调该方法。 ​\n\n- onShow: 当聊天框显示的时候，会回调该方法。 ​\n\n- onBeforeShow: 聊天框显示前调用，如果返回了 false，则不会显示。支持异步函数。 ​\n\n- onBeforeHide: 聊天框隐藏前调用，如果返回了 false，则不会隐藏。支持异步函数。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/web_sdk_changelog",
      "title": "Chat SDK 发布历史",
      "content": {
        "sections": [],
        "full_text": "Chat SDK 发布历史\n\n本文档介绍 Chat SDK 各个版本的主要功能。建议你使用最新版本以体验更便捷的配置、更安全的能力，更新 SDK 版本的方式可参考\n\n​\n\n更新 SDK 版本\n\n。\n\n​\n\n​\n\n版本号\n\n​\n\n版本说明\n\n​\n\n1.2.0-beta.20\n\n​\n\n上传文件时支持显示进度条。\n\n​\n\n修复首次进入 Chat SDK 时，会话列表未显示自动创建的新会话。\n\n​\n\n1.2.0-beta.19\n\n​\n\n修复会话切换偶现的 bug。\n\n​\n\n优化聊天框在 PC 模式下宽高的计算逻辑，配置\n\nel\n\n参数时，可自适应填充容器。\n\n​\n\n1.2.0-beta.18\n\n​\n\n发布渠道相关的逻辑优化。\n\n​\n\n1.2.0-beta.17\n\n​\n\n新增如下功能：\n\n​\n\n语音通话\n\n：智能体或应用开启语音通话功能后，用户可在集成 Chat SDK 的聊天应用中进行语音通话。无需在 Chat SDK 中进行语音通话的配置。\n\n​\n\n会话列表\n\n：新增\n\nui.conversations\n\n参数，开发者可配置是否启用会话列表功能。\n\n​\n\n开启新会话\n\n：新增\n\nisNeedAddNewConversation\n\n参数，开发者可配置是否在聊天框中显示开启新\n\n会话\n\n按钮。\n\n​\n\n消息追问\n\n：新增\n\nisNeedQuote\n\n参数，开发者可配置是否支持对智能体或应用回复的消息进行追问。\n\n​\n\n1.2.0-beta.15\n\n​\n\n优化了图片预览功能，将图片预览地址从 blob 协议更新为 Base64 格式。\n\n​\n\n1.2.0-beta.14\n\n​\n\n修复了自定义卡片展示异常的问题。\n\n​\n\n1.2.0-beta.13\n\n​\n\n新增如下功能：\n\n​\n\n快捷指令：\n\n支持智能体或应用中配置的快捷指令。\n\n​\n\n停止输出：在大模型回复过程中，新增了\n\n停止输出\n\n按钮。用户可以根据需要随时中断回复。\n\n​\n\n多模态消息：用户可以在聊天框中灵活组合发送文本、图片、文件和语音消息。\n\n​\n\n配置是否展示工具调用的过程：新增\n\nisNeedFunctionCallMessage\n\n参数，开发者可以配置是否展示工具调用的过程。\n\n​\n\n1.2.0-beta.11\n\n​\n\n修复了以下问题：删除历史消息功能概率性失效、应用背景图样式兼容性问题等。\n\n​\n\n1.2.0-beta.10\n\n​\n\n新增如下功能：\n\n​\n\n配置聊天框时新增\n\nisNeedAudio\n\n参数，用于配置智能体聊天窗口是否允许语音输入。\n\n​\n\n智能体配置中新增\n\nbotInfo.parameters\n\n参数，用于给自定义参数赋值并传给对话流。\n\n​\n\n支持将智能体设置的背景图同步至 Chat SDK。\n\n​\n\n支持用专业格式显示数学公式、化学方程式等复杂符号。\n\n​\n\n1.2.0-beta.8\n\n​\n\nChat SDK 的会话接口需要将用户已设置的\n\nuser_id\n\n参数传给扣子服务端，来区分不同用户。\n\n​\n\n1.2.0-beta.6\n\n​\n\n修复了因 Token 过期导致聊天失败的问题。当前支持过期后自动刷新 Token。\n\n​\n\n1.2.0-beta.5\n\n​\n\n修复了移动端浏览器的兼容性问题。\n\n​\n\n1.2.0-beta.2\n\n​\n\n新增如下功能：\n\n​\n\n配置聊天框时新增支持\n\nconfig.isIframe\n\n参数，用于配置是否使用 iframe方式来打开聊天框。\n\n​\n\n配置属性时新增支持\n\nui.header\n\n参数，用于控制是否展示顶部的标题栏和关闭按钮。\n\n​\n\n1.1.0-beta.0\n\n​\n\nWeb SDK 更名为 Chat SDK。\n\n​\n\n支持通过 Chat SDK 调用扣子应用，展示扣子应用的聊天框。\n\n​\n\n1.0.0-beta.4\n\n​\n\n新版 Chat SDK，提供以下功能配置：\n\n​\n\n鉴权能力： 支持通过扣子访问令牌进行 OpenAPI 的鉴权，安全性更高。\n\n​\n\n用户识别：在 Chat SDK 的 UI 中显示不同的用户信息，包括头像、用户名、ID 等。\n\n​\n\n交互能力：丰富的交互能力，例如支持自定义设置打开聊天窗的方式\n\n​\n\n展示效果：支持调整聊天框中展示的用户信息、UI 效果、悬浮球效果、底部文案等配置\n\n​\n\n0.1.0-beta.5\n\n​\n\n历史版本的 Chat SDK，通过 componentProps 属性添加各种配置。\n\n​\n\n​\n\n​\n\n上一篇\n\n安装并使用 Chat SDK\n\n下一篇\n\n（历史版本）Chat SDK",
        "links": []
      },
      "markdown": "| 版本号​ | 版本说明​ |\n| 1.2.0-beta.20​ | 上传文件时支持显示进度条。​修复首次进入 Chat SDK 时，会话列表未显示自动创建的新会话。​ |\n| 1.2.0-beta.19​ | 修复会话切换偶现的 bug。​优化聊天框在 PC 模式下宽高的计算逻辑，配置el参数时，可自适应填充容器。​ |\n| 1.2.0-beta.18​ | 发布渠道相关的逻辑优化。​ |\n| 1.2.0-beta.17​ | 新增如下功能：​语音通话：智能体或应用开启语音通话功能后，用户可在集成 Chat SDK 的聊天应用中进行语音通话。无需在 Chat SDK 中进行语音通话的配置。​会话列表：新增ui.conversations参数，开发者可配置是否启用会话列表功能。​开启新会话：新增isNeedAddNewConversation参数，开发者可配置是否在聊天框中显示开启新会话按钮。​消息追问：新增isNeedQuote参数，开发者可配置是否支持对智能体或应用回复的消息进行追问。​ |\n| 1.2.0-beta.15​ | 优化了图片预览功能，将图片预览地址从 blob 协议更新为 Base64 格式。​ |\n| 1.2.0-beta.14​ | 修复了自定义卡片展示异常的问题。​ |\n| 1.2.0-beta.13​ | 新增如下功能：​快捷指令：支持智能体或应用中配置的快捷指令。​停止输出：在大模型回复过程中，新增了停止输出按钮。用户可以根据需要随时中断回复。​多模态消息：用户可以在聊天框中灵活组合发送文本、图片、文件和语音消息。​配置是否展示工具调用的过程：新增isNeedFunctionCallMessage参数，开发者可以配置是否展示工具调用的过程。​ |\n| 1.2.0-beta.11​ | 修复了以下问题：删除历史消息功能概率性失效、应用背景图样式兼容性问题等。​ |\n| 1.2.0-beta.10​ | 新增如下功能：​配置聊天框时新增isNeedAudio参数，用于配置智能体聊天窗口是否允许语音输入。​智能体配置中新增botInfo.parameters参数，用于给自定义参数赋值并传给对话流。​支持将智能体设置的背景图同步至 Chat SDK。​支持用专业格式显示数学公式、化学方程式等复杂符号。​ |\n| 1.2.0-beta.8​ | Chat SDK 的会话接口需要将用户已设置的user_id参数传给扣子服务端，来区分不同用户。​ |\n| 1.2.0-beta.6​ | 修复了因 Token 过期导致聊天失败的问题。当前支持过期后自动刷新 Token。​ |\n| 1.2.0-beta.5​ | 修复了移动端浏览器的兼容性问题。​ |\n| 1.2.0-beta.2​ | 新增如下功能：​配置聊天框时新增支持config.isIframe参数，用于配置是否使用 iframe方式来打开聊天框。​配置属性时新增支持ui.header参数，用于控制是否展示顶部的标题栏和关闭按钮。​ |\n| 1.1.0-beta.0​ | Web SDK 更名为 Chat SDK。​支持通过 Chat SDK 调用扣子应用，展示扣子应用的聊天框。​ |\n| 1.0.0-beta.4​ | 新版 Chat SDK，提供以下功能配置：​鉴权能力： 支持通过扣子访问令牌进行 OpenAPI 的鉴权，安全性更高。​用户识别：在 Chat SDK 的 UI 中显示不同的用户信息，包括头像、用户名、ID 等。​交互能力：丰富的交互能力，例如支持自定义设置打开聊天窗的方式​展示效果：支持调整聊天框中展示的用户信息、UI 效果、悬浮球效果、底部文案等配置​ |\n| 0.1.0-beta.5​ | 历史版本的 Chat SDK，通过 componentProps 属性添加各种配置。​ |\n\n- 上传文件时支持显示进度条。 ​\n\n- 修复首次进入 Chat SDK 时，会话列表未显示自动创建的新会话。 ​\n\n- 修复会话切换偶现的 bug。 ​\n\n- 优化聊天框在 PC 模式下宽高的计算逻辑，配置 el 参数时，可自适应填充容器。 ​\n\n- 语音通话 ：智能体或应用开启语音通话功能后，用户可在集成 Chat SDK 的聊天应用中进行语音通话。无需在 Chat SDK 中进行语音通话的配置。 ​\n\n- 会话列表 ：新增 ui.conversations 参数，开发者可配置是否启用会话列表功能。 ​\n\n- 开启新会话 ：新增 isNeedAddNewConversation 参数，开发者可配置是否在聊天框中显示开启新 会话 按钮。 ​\n\n- 消息追问 ：新增 isNeedQuote 参数，开发者可配置是否支持对智能体或应用回复的消息进行追问。 ​\n\n- 快捷指令： 支持智能体或应用中配置的快捷指令。 ​\n\n- 停止输出：在大模型回复过程中，新增了 停止输出 按钮。用户可以根据需要随时中断回复。 ​\n\n- 多模态消息：用户可以在聊天框中灵活组合发送文本、图片、文件和语音消息。 ​\n\n- 配置是否展示工具调用的过程：新增 isNeedFunctionCallMessage 参数，开发者可以配置是否展示工具调用的过程。 ​\n\n- 配置聊天框时新增 isNeedAudio 参数，用于配置智能体聊天窗口是否允许语音输入。 ​\n\n- 智能体配置中新增 botInfo.parameters 参数，用于给自定义参数赋值并传给对话流。 ​\n\n- 支持将智能体设置的背景图同步至 Chat SDK。 ​\n\n- 支持用专业格式显示数学公式、化学方程式等复杂符号。 ​\n\n- 配置聊天框时新增支持 config.isIframe 参数，用于配置是否使用 iframe方式来打开聊天框。 ​\n\n- 配置属性时新增支持 ui.header 参数，用于控制是否展示顶部的标题栏和关闭按钮。 ​\n\n- Web SDK 更名为 Chat SDK。 ​\n\n- 支持通过 Chat SDK 调用扣子应用，展示扣子应用的聊天框。 ​\n\n- 鉴权能力： 支持通过扣子访问令牌进行 OpenAPI 的鉴权，安全性更高。 ​\n\n- 用户识别：在 Chat SDK 的 UI 中显示不同的用户信息，包括头像、用户名、ID 等。 ​\n\n- 交互能力：丰富的交互能力，例如支持自定义设置打开聊天窗的方式 ​\n\n- 展示效果：支持调整聊天框中展示的用户信息、UI 效果、悬浮球效果、底部文案等配置 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/web_sdk",
      "title": "（历史版本）Chat SDK",
      "content": {
        "sections": [],
        "full_text": "（历史版本）Chat SDK\n\n扣子 Chat SDK是一个 JavaScript 库，您可以使用它将智能体集成到您的 Web 应用程序中。集成后，用户可从网页与智能体对话。\n\n​\n\n注意\n\n1.0.0-beta.4 版本之前的 Chat SDK 为历史版本，开发者无需鉴权即可集成 SDK。历史版本 Chat SDK 仅提供基础的对话能力，安全性及扩展性较低，后续将不再维护和更新。推荐你使用最新版本的 Chat SDK\n\n​\n\n安装并使用 Chat SDK\n\n，体验更安全、更友好的智能对话服务。\n\n​\n\n​\n\n前提条件\n\n​\n\n已经在扣子平台创建了智能体。\n\n​\n\n安装 SDK\n\n​\n\n按照以下步骤通过将 JavaScript 库添加到您的 Web 应用程序来安装 SDK。\n\n​\n\n1.\n\n登录\n\n扣子\n\n平台。\n\n​\n\n2.\n\n查找要部署为 Web 服务的目标智能体。\n\n​\n\n3.\n\n在\n\n编排\n\n页面，复制并保存当前页面 URL 的最后一个字符串。\n\n​\n\n这个是智能体id，将在以后的配置中使用。\n\n​\n\n4.\n\n点击\n\n发布\n\n。\n\n​\n\n5.\n\n在\n\n发布\n\n页面，选择 Chat SDK\n\n选择并单击\n\n发布。\n\n​\n\n发布 SDK 后才能在新的发布页面选择安装 SDK。\n\n​\n\n6.\n\n回到智能体的编排页面，再次点击\n\n发布\n\n，进入\n\n发布\n\n页面。\n\n​\n\n7.\n\n在\n\n发布\n\n页面，点击\n\n安装\n\n。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n页面将展示智能体的安装代码。直接将代码粘贴到网页的 <body> 区域中即可。你也可以按需添加各种属性配置，支持属性可参考\n\n​\n\n初始化 SDK\n\n。\n\n​\n\n说明\n\n{{version}}\n\n部分为 Chat SDK 的版本号，例如\n\n0.1.0-beta.5\n\n。\n\n​\n\n​\n\n安装代码示例如下：\n\n​\n\n​\n\nHTML\n\n复制\n\n<\n\nscript\n\nsrc\n\n=\n\n\"https://lf-cdn.coze.cn/obj/unpkg/flow-platform/chat-app-sdk/\n\n{{version}}\n\n/libs/cn/index.js\"\n\n></\n\nscript\n\n>\n\n​\n\n<\n\nscript\n\n>\n\n​\n\nnew\n\nCozeWebSDK\n\n.\n\nWebChatClient\n\n({\n\n​\n\nconfig\n\n: {\n\n​\n\nbot_id\n\n:\n\n'738176858****'\n\n,\n\n​\n\n},\n\n​\n\ncomponentProps\n\n: {\n\n​\n\ntitle\n\n:\n\n'Coze'\n\n,\n\n​\n\n},\n\n​\n\n});\n\n​\n\n</\n\nscript\n\n>\n\n​\n\n​\n\n初始化 SDK\n\n​\n\n安装 Chat SDK 后，您现在可以初始化智能体客户端。将以下代码添加到您要初始化智能体客户端的页面中。\n\n​\n\n​\n\nHTML\n\n复制\n\n<\n\nscript\n\n>\n\n​\n\nnew\n\nCozeWebSDK\n\n.\n\nWebChatClient\n\n(options);\n\n​\n\n</\n\nscript\n\n>\n\n​\n\n​\n\noptions 参数包含 config 和 componentProps 两个属性，详细说明可参见下表。\n\n​\n\n​\n\n属性\n\n​\n\n参数\n\n​\n\n是否必选\n\n​\n\n数据类型\n\n​\n\n描述\n\n​\n\nconfig\n\n​\n\nbot_id\n\n​\n\n必选\n\n​\n\nstring\n\n​\n\n智能体ID。\n\n​\n\n进入智能体的 开发页面，开发页面 URL 中 bot 参数后的数字就是智能体ID。例如\n\nhttps://www.coze.cn/space/341****/bot/73428668*****\n\n，智能体ID 为\n\n73428668*****\n\n。\n\n​\n\n说明\n\n确保该智能体已经发布为 Chat SDK。\n\n​\n\n​\n\ncomponentProps\n\n​\n\ntitle\n\n​\n\n可选\n\n​\n\nstring\n\n​\n\n智能体名字，如果没有配置，使用默认名：扣子 Bot。\n\n​\n\n​\n\nicon\n\n​\n\n可选\n\n​\n\nstring\n\n​\n\n智能体的显示图标，如果不设置，则使用默认扣子图标。\n\n​\n\n​\n\nlang\n\n​\n\n可选\n\n​\n\nstring\n\n​\n\n​\n\n智能体的系统语言，例如智能体的工具提示。\n\n​\n\nen：（默认）英语\n\n​\n\nzh-CN：中文\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\nlayout\n\n​\n\n​\n\n可选\n\n​\n\nstring\n\n​\n\n智能体窗口的布局风格，支持设置为：\n\n​\n\nmobile：移动端风格。\n\n​\n\npc：PC 端风格。\n\n​\n\n未设置此参数时，系统会自动识别设备，设置相应的布局风格。\n\n​\n\n​\n\nwidth\n\n​\n\n可选\n\n​\n\nnumber\n\n​\n\nPC 端智能体窗口的宽度，单位为 px，默认为 460。\n\n​\n\n建议综合考虑各种尺寸的屏幕，设置一个合适的宽度。\n\n​\n\n仅在 layout = pc 时生效。\n\n​\n\n​\n\n销毁 SDK 客户端\n\n​\n\n您可以添加一个 destroy 方法销毁智能体客户端。\n\n​\n\n​\n\nHTML\n\n复制\n\n<\n\nscript\n\n>\n\n​\n\nconst\n\nclient =\n\nnew\n\nCozeWebSDK\n\n.\n\nWebChatClient\n\n(options);\n\n​\n\nclient.\n\ndestroy\n\n();\n\n​\n\n</\n\nscript\n\n>\n\n​\n\n​\n\n解绑智能体\n\n​\n\n如果你不需要智能体继续以 web 服务方式使用，在发布页面，点击\n\n解绑\n\n按钮。\n\n​\n\n说明\n\n一旦\n\n解绑\n\n，智能体就无法通过集成的 Web 应用程序使用。 如果您想恢复 Web 应用程序的访问，需要再次将智能体发布为 Chat SDK。\n\n​\n\n​\n\n示例\n\n​\n\n以下是一段完整的 Chat SDK 的代码示例。\n\n​\n\n​\n\nHTML\n\n复制\n\n<!doctype\n\nhtml\n\n>\n\n​\n\n<\n\nhtml\n\nlang\n\n=\n\n\"en\"\n\n>\n\n​\n\n<\n\nhead\n\n>\n\n​\n\n<\n\nstyle\n\n>\n\n​\n\n/* 自定义悬浮入口的位置 */\n\n​\n\n#position_demo\n\n{\n\n​\n\nposition\n\n: absolute;\n\n​\n\nright\n\n:\n\n10px\n\n;\n\n​\n\nbottom\n\n:\n\n20px\n\n;\n\n​\n\n}\n\n​\n\n</\n\nstyle\n\n>\n\n​\n\n</\n\nhead\n\n>\n\n​\n\n<\n\nbody\n\n>\n\n​\n\n<\n\nh1\n\n>\n\nHello Bot\n\n</\n\nh1\n\n>\n\n​\n\n<\n\ndiv\n\nid\n\n=\n\n\"position_demo\"\n\n></\n\ndiv\n\n>\n\n​\n\n//\n\n{{version}}\n\n为 Chat SDK 的版本号，例如\n\n0.1.0-beta.5\n\n。你可以在发布页面的安装代码中查看最新版本的version\n\n​\n\n<\n\nscript\n\nsrc\n\n=\n\n\"\n\nhttps://lf-cdn.coze.cn/obj/unpkg/flow-platform/chat-app-sdk/\n\n{{version}}\n\n/libs/cn/index.js\n\n\"\n\n></\n\nscript\n\n>\n\n​\n\n<\n\nscript\n\n>\n\n​\n\nconst\n\nbot_id =\n\n'7330182852614******'\n\n;\n\n​\n\n// 自定义智能体名称和icon\n\n​\n\nconst\n\ntitle =\n\n'AI翻译助手'\n\n;\n\n​\n\nconst\n\nicon =\n\n'https://lf-bot-studio-plugin-resource.coze.cn/obj/bot-studio-platform-plugin-tos/artist/image/7e813aa2c7e14ebb9e2d1a989acfb128.png'\n\n;\n\n​\n\nconst\n\nlang =\n\n'zh-CN'\n\n;\n\n​\n\nconst\n\nlayout =\n\n'pc'\n\n;\n\n​\n\nconst\n\nwidth =\n\n800\n\n;\n\n​\n\n​\n\nnew\n\nCozeWebSDK\n\n.\n\nWebChatClient\n\n({\n\n​\n\nconfig\n\n: {\n\n​\n\nbot_id,\n\n​\n\n},\n\n​\n\ncomponentProps\n\n: {\n\n​\n\ntitle,\n\n​\n\nicon,\n\n​\n\nwidth,\n\n​\n\n},\n\n​\n\nel\n\n:\n\ndocument\n\n.\n\ngetElementById\n\n(\n\n'position_demo'\n\n),\n\n​\n\n});\n\n​\n\n</\n\nscript\n\n>\n\n​\n\n</\n\nbody\n\n>\n\n​\n\n</\n\nhtml\n\n>\n\n​\n\n​\n\n在本地创建一个HTML文件，将上述代码复制进文件后，本地运行的效果如下所示。\n\n​\n\n说明\n\n注意将 bot_id 替换为已经发布为 Chat SDK 的智能体的 ID，\n\n{{version}}\n\n替换为\n\n发布\n\n页面\n\n安装\n\n代码中的版本号。\n\n​\n\n​\n\n其中：\n\n​\n\n图标 1 是\n\nicon\n\n参数值。\n\n​\n\n图标 2 是\n\ntitle\n\n参数值。\n\n​\n\n图标 3 是\n\nlang\n\n参数控制的语言配置。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n上一篇\n\nChat SDK 发布历史\n\n下一篇\n\nChat SDK 常见问题",
        "links": []
      },
      "markdown": "- 这个是智能体id，将在以后的配置中使用。 ​\n\n\n\n- 发布 SDK 后才能在新的发布页面选择安装 SDK。 ​\n\n\n\n- ​ ​ ​ ​ ​\n\n- 页面将展示智能体的安装代码。直接将代码粘贴到网页的 <body> 区域中即可。你也可以按需添加各种属性配置，支持属性可参考 ​ 初始化 SDK 。 ​\n\n- 说明 {{version}} 部分为 Chat SDK 的版本号，例如 0.1.0-beta.5 。 ​ ​\n\n- 安装代码示例如下： ​\n\n- ​ HTML 复制 < script src = \"https://lf-cdn.coze.cn/obj/unpkg/flow-platform/chat-app-sdk/ {{version}} /libs/cn/index.js\" ></ script > ​ < script > ​ new CozeWebSDK . WebChatClient ({ ​ config : { ​ bot_id : '738176858****' , ​ }, ​ componentProps : { ​ title : 'Coze' , ​ }, ​ }); ​ </ script > ​ ​\n\n| 属性​ | 参数​ | 是否必选​ | 数据类型​ | 描述​ |\n| config​ | bot_id​ | 必选​ | string​ | 智能体ID。​进入智能体的 开发页面，开发页面 URL 中 bot 参数后的数字就是智能体ID。例如https://www.coze.cn/space/341****/bot/73428668*****，智能体ID 为73428668*****。​说明确保该智能体已经发布为 Chat SDK。​​ |\n| componentProps​ | title​ | 可选​ | string​ | 智能体名字，如果没有配置，使用默认名：扣子 Bot。​ |\n| ​ | icon​ | 可选​ | string​ | 智能体的显示图标，如果不设置，则使用默认扣子图标。​ |\n| ​ | lang​ | 可选​ | string​​ | 智能体的系统语言，例如智能体的工具提示。​en：（默认）英语​zh-CN：中文​​​​​​ |\n| ​ | layout​​ | 可选​ | string​ | 智能体窗口的布局风格，支持设置为：​mobile：移动端风格。​pc：PC 端风格。​未设置此参数时，系统会自动识别设备，设置相应的布局风格。​ |\n| ​ | width​ | 可选​ | number​ | PC 端智能体窗口的宽度，单位为 px，默认为 460。​建议综合考虑各种尺寸的屏幕，设置一个合适的宽度。​仅在 layout = pc 时生效。​ |\n\n- en：（默认）英语 ​\n\n- zh-CN：中文 ​\n\n- mobile：移动端风格。 ​\n\n- pc：PC 端风格。 ​\n\n- 图标 1 是 icon 参数值。 ​\n\n- 图标 2 是 title 参数值。 ​\n\n- 图标 3 是 lang 参数控制的语言配置。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/chat_sdk_faq",
      "title": "Chat SDK 常见问题",
      "content": {
        "sections": [],
        "full_text": "Chat SDK 常见问题\n\nChat SDK 如何实现会话隔离？\n\n​\n\n使用扣子 OpenAPI 或 SDK 和扣子智能体或应用对话时，扣子平台会将使用同一个访问密钥的对话看做同一个用户。如果业务侧不同的用户使用同一个扣子访问密钥鉴权，用户看到的对话记录中可能会夹杂其他用户的对话历史。\n\n​\n\n如需实现 Chat SDK 会话隔离，需要使用 OAuth JWT 鉴权方式，并在签署 JWT 时，在 payload 字段中添加 session_name 字段。session_name 中应指定用户在业务侧的 UID，String 类型。UID 由业务侧自行定义，扣子仅透传这个字段并用于签署 JWT、区分不同 session_name 的会话。详细说明可参考\n\n​\n\n如何实现会话隔离\n\n。\n\n​\n\n可以通过 Web-view 的方式在小程序中加载 Chat SDK 吗？\n\n​\n\n不可以，web-view 方式无法加载第三方的域名。\n\n​\n\n建议在 Chat SDK config 属性中设置 isIframe = false，以非 iframe 的方式打开聊天框。通过该方式可以规避小程序中 webview 的域名限制。\n\n​\n\n为什么智能体发布到 Chat SDK 后，会获取到别人的聊天记录？\n\n​\n\n扣子智能体发布到 Chat SDK 后，如果打开时会获取到别人的聊天记录，即使已设置 userInfo 参数也无效，这通常是由于未进行会话隔离所导致的。为避免不同账号的聊天记录互相可见，需要进行会话隔离。思路如下：\n\n​\n\n1.\n\n在使用 OAuth JWT 授权时，在 payload 字段中添加 session_name 字段，该字段值为用户的唯一标识，如用户 ID。\n\n​\n\n2.\n\n在 ChatSDK 中，将\n\nauth\n\n的\n\ntoken\n\n参数设置为用户对应的 Token，确保每位用户在与智能体对话时，都使用各自的JWT Token。详细步骤可参考\n\n​\n\n如何实现会话隔离\n\n。\n\n​\n\n为什么在移动端设置 isNeedAudio 为 true 后，仍无法使用语音输入功能？\n\n​\n\n移动端支持 isNeedAudio 参数的语音输入功能，若设置后不生效，请检查集成环境是否已使用 HTTPS 协议。该功能需要在 HTTPS 环境下使用。\n\n​\n\nChat SDK 悬浮球位置如何移动？\n\n​\n\nChat SDK 悬浮球的位置默认在页面右下角，不支持移动，如果需要调整悬浮球的位置，你可以隐藏默认的悬浮球，自定义悬浮球的位置和样式。实现方法如下：\n\n​\n\n1.\n\n设置\n\nui.asstBtn.isNeed=false\n\n，隐藏悬浮球。\n\n​\n\n​\n\nTypeScript\n\n复制\n\n// 在WebChatClient参数中，添加ui.asstBtn配置\n\n​\n\nconst\n\ncozeWebSDK =\n\nnew\n\nCozeWebSDK\n\n.\n\nWebChatClient\n\n({\n\n​\n\nconfig\n\n: {\n\n​\n\nbotId\n\n:\n\n'740849137970326****'\n\n,\n\n​\n\nisIframe\n\n:\n\nfalse\n\n,\n\n​\n\n},\n\n​\n\nauth\n\n: {\n\n​\n\ntype\n\n:\n\n'token'\n\n,\n\n​\n\ntoken\n\n:\n\n'pat_zxzSAzxawer234zASNElEGALlq7hcOqMcPFV3wEVDiqjrg****'\n\n,\n\n​\n\nonRefreshToken\n\n:\n\nasync\n\n() =>\n\n'pat_zxzSAzxawer2OqMcPFV3wEVDiqjrg****'\n\n,\n\n​\n\n},\n\n​\n\nui\n\n: {\n\n​\n\n// 悬浮球配置\n\n​\n\nasstBtn\n\n: {\n\n​\n\nisNeed\n\n:\n\nfalse\n\n// 隐藏悬浮球\n\n​\n\n}\n\n​\n\n}\n\n​\n\n});\n\n​\n\n​\n\n2.\n\n自定义悬浮球按钮。\n\n​\n\n在页面任意位置添加自定义按钮，点击后调用 Chat SDK 方法打开聊天窗口。\n\n​\n\n​\n\nHTML\n\n复制\n\n<!-- 自定义悬浮球按钮 -->\n\n​\n\n<\n\nbutton\n\n​\n\nid\n\n=\n\n\"custom-asst-btn\"\n\n​\n\nstyle\n\n=\n\n\"position: fixed; right: 50px; bottom: 50px; z-index: 9999;\"\n\n​\n\nonclick\n\n=\n\n\"cozeWebSDK.showChatBot();\"\n\n​\n\n>\n\n​\n\n</\n\nbutton\n\n>\n\n​\n\n​\n\n<\n\nbutton\n\nonclick\n\n=\n\n\"cozeWebSDK.showChatBot();\"\n\n>\n\n显示聊天框\n\n</\n\nbutton\n\n>\n\n​\n\n<\n\nbutton\n\nonclick\n\n=\n\n\"cozeWebSDK.hideChatBot();\"\n\n>\n\n隐藏聊天框\n\n</\n\nbutton\n\n>\n\n​\n\n</\n\nbody\n\n>\n\n​\n\n​\n\n使用 Chat SDK 发消息时提示“Your free quota has been used up”是什么原因？\n\n​\n\n个人免费版账号使用 Chat SDK 的免费额度为\n\n100 次对话/账号\n\n。即使你账号中还有剩余资源点，当累计对话次数超过该额度后，账号将无法继续使用扣子 Chat SDK。\n\n​\n\n使用 Chat SDK 为什么没有获取智能体的开场白？\n\n​\n\n若智能体中已设置开场白，且希望在 Chat SDK 中正常显示开场白，请确保将该智能体\n\n同时发布至 API 渠道和 Chat SDK 渠道\n\n。\n\n​\n\n若仅发布 Chat SDK 渠道而未发布 API 渠道，可能导致 Chat SDK 无法获取智能体的开场白配置。\n\n​\n\n​\n\n上一篇\n\n（历史版本）Chat SDK\n\n下一篇\n\nPython SDK 概述",
        "links": []
      },
      "markdown": "- 在页面任意位置添加自定义按钮，点击后调用 Chat SDK 方法打开聊天窗口。 ​\n\n- ​ HTML 复制 <!-- 自定义悬浮球按钮 --> ​ < button ​ id = \"custom-asst-btn\" ​ style = \"position: fixed; right: 50px; bottom: 50px; z-index: 9999;\" ​ onclick = \"cozeWebSDK.showChatBot();\" ​ > ​ </ button > ​ ​ < button onclick = \"cozeWebSDK.showChatBot();\" > 显示聊天框 </ button > ​ < button onclick = \"cozeWebSDK.hideChatBot();\" > 隐藏聊天框 </ button > ​ </ body > ​ ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/python_overview",
      "title": "Python SDK 概述",
      "content": {
        "sections": [],
        "full_text": "Python SDK 概述\n\nCoze API SDK for Python 是一个扣子官方提供的 SDK 工具包，你可以通过 Python SDK 将扣子的 OpenAPI 集成到你的应用程序中。Coze Python SDK 支持所有扣子的官方鉴权方式，支持同步或异步函数调用，具备高度的灵活性和高可用性，显著提升 OpenAPI 的使用效率。你可以通过 pip 快速安装 Coze Python SDK，用你的访问密钥初始化 SDK，然后就可以开始安全、高效地通过 OpenAPI 访问你的 AI 智能体。\n\n​\n\nCoze Python SDK 针对流式响应的 API 进行了优化，返回 Stream 和 AsyncStream 对象以实现实时数据处理。同时，Coze Python SDK 遵循用户友好的设计风格，可简化你的开发工作，且适用于所有技能水平开发者使用。\n\n​\n\n源码地址\n\n​\n\n访问\n\nGitHub\n\n获取 Coze API SDK for Python 源码。\n\n​\n\n注意\n\n从扣子 GitHub 仓库获取的源码和示例代码中，\n\nbase_url\n\n默认设置为域名\n\nCOZE_COM_BASE_URL\n\n，使用源码前应手动将其修改为域名\n\nCOZE_CN_BASE_URL\n\n。\n\n​\n\n​\n\n示例代码\n\n​\n\nCoze Python SDK 提供各种授权方式、各种使用方式的示例代码，便于开发者直接参考使用。\n\n​\n\n说明\n\nCoze Python SDK 支持扣子所有 OpenAPI，对应的 API 文档可参考\n\n​\n\nAPI 介绍\n\n。\n\n​\n\n示例代码将持续更新和补充，各种场景的 Coze Python SDK\n\n最新版本\n\n示例代码可参考\n\nGitHub\n\n。\n\n​\n\n​\n\n常见场景的示例代码及说明如下：\n\n​\n\n​\n\n模块\n\n​\n\n示例文件\n\n​\n\n说明\n\n​\n\n授权\n\n​\n\nexamples/\n\nauth_pat.py\n\n​\n\n通过个人访问密钥实现 OpenAPI 鉴权。\n\n​\n\n​\n\nexamples/\n\nauth_oauth_web.py\n\n​\n\n通过 OAuth 授权码方式实现授权与 OpenAPI 鉴权。\n\n​\n\n​\n\nexamples/\n\nauth_oauth_jwt.py\n\n​\n\n通过 OAuth JWT 方式实现授权与 OpenAPI 鉴权。\n\n​\n\n​\n\nexamples/\n\nauth_oauth_pkce.py\n\n​\n\n通过 OAuth PKCE 方式实现授权与 OpenAPI 鉴权。\n\n​\n\n​\n\nexamples/\n\nauth_oauth_device.py\n\n​\n\n通过 OAuth 设备码方式实现授权与 OpenAPI 鉴权。\n\n​\n\n对话\n\n​\n\nexamples/\n\nchat_no_stream.py\n\n​\n\n发起对话，响应方式为非流式响应。\n\n​\n\n​\n\nexamples/\n\nchat_stream.py\n\n​\n\n发起对话，响应方式为流式响应。\n\n​\n\n​\n\nexamples/\n\nchat_multimodal_stream.py\n\n​\n\n发起对话，对话中上传文件，并发送多模态内容。\n\n​\n\n​\n\nexamples/\n\nchat_simple_audio.py\n\n​\n\n语音消息，对话时通过语音输入消息。\n\n​\n\n​\n\nexamples/\n\nchat_oneonone_audio.py\n\n​\n\n实时语音通话。\n\n​\n\n​\n\nexamples/\n\nchat_local_plugin.py\n\n​\n\n端插件。\n\n​\n\n会话\n\n​\n\nexamples/\n\nconversation.py\n\n​\n\n创建对话、向对话中添加消息以及清除对话内容等。\n\n​\n\n​\n\nexamples/\n\nconversation_list.py\n\n​\n\n查询对话列表。\n\n​\n\n工作流\n\n​\n\nexamples/\n\nworkflow_no_stream.py\n\n​\n\n运行工作流，响应方式为非流式响应。\n\n​\n\n​\n\nexamples/\n\nworkflow_stream.py\n\n​\n\n运行工作流，响应方式为流式响应，且工作流中包含问答节点。\n\n​\n\n​\n\nexamples/\n\nworkflow_async.py\n\n​\n\n异步运行工作流，并获取工作流运行结果。\n\n​\n\n​\n\n​\n\nexamples/\n\nworkflow_chat_stream.py\n\n​\n\n运行对话流。\n\n​\n\n​\n\nexamples/\n\nworkflow_chat_multimode_stream.py\n\n​\n\n​\n\n在对话流中上传图片，实现多模态交互。包括图片上传、流式响应处理及对话管理等操作。\n\n​\n\n智能体管理\n\n​\n\nexamples/\n\nbot_publish.py\n\n​\n\n创建一个草稿状态的智能体，更新智能体，并发布智能体为 API 服务。\n\n​\n\n工作空间\n\n​\n\n/examples/\n\nworkspaces_list.py\n\n​\n\n查询所有工作空间列表。\n\n​\n\n​\n\n/examples/\n\nworkspaces_members_create.py\n\n​\n\n批量邀请用户加入指定的工作空间。\n\n​\n\n​\n\n/examples/\n\nworkspaces_members_delete.py\n\n​\n\n批量移除工作空间中的成员。\n\n​\n\n知识库\n\n​\n\nexamples/\n\ndataset_create.py\n\n​\n\n创建知识库、上传知识库文件。\n\n​\n\n语音合成\n\n​\n\nexamples/\n\naudio.py\n\n​\n\n将文本转为语音，并将生成的语音保存为音频文件。\n\n​\n\n文件管理\n\n​\n\nexamples/\n\nfiles_upload.py\n\n​\n\n文件上传。\n\n​\n\n复制模板\n\n​\n\nexamples/\n\ntemplate_duplicate.py\n\n​\n\n复制商店中的模板到指定工作空间。\n\n​\n\n用户\n\n​\n\nexamples/\n\nusers_me.py\n\n​\n\n获取当前用户信息，如用户 ID、用户名等。\n\n​\n\n变量\n\n​\n\nexamples/\n\nvariable_retrieve.py\n\n​\n\n获取用户变量的值。\n\n​\n\n​\n\nexamples/\n\nvariable_update.py\n\n​\n\n设置用户变量的值。\n\n​\n\n异常处理\n\n​\n\nexamples/\n\nexception.py\n\n​\n\n处理 API 异常。\n\n​\n\n日志处理\n\n​\n\nexamples/\n\nlog.py\n\n​\n\n修改日志级别。\n\n​\n\n超时时间\n\n​\n\nexamples/\n\ntimeout.py\n\n​\n\n配置超时时间，确保 API 请求在规定时间内完成。\n\n​\n\n​\n\n异常处理\n\n​\n\n当调用 API 失败时，SDK 会抛出 CozeAPIError 异常；当 PKCE OAuth 出现异常时，SDK 会抛出 CozePKCEAuthError 异常；当对话或者工作流流式运行时返回非法的事件（event）时，SDK 会抛出 CozeInvalidEventError 异常。\n\n​\n\n所有的异常都继承自 CozeError。开发者可以根据自己的需求捕获对应的异常，其中 CozeAPIError 异常会获取到异常接口的错误码，API 错误码的相关说明及处理方式可参考\n\n​\n\n错误码\n\n。\n\n​\n\n上一篇\n\nChat SDK 常见问题\n\n下一篇\n\n安装 Python SDK",
        "links": []
      },
      "markdown": "- Coze Python SDK 支持扣子所有 OpenAPI，对应的 API 文档可参考 ​ API 介绍 。 ​\n\n- 示例代码将持续更新和补充，各种场景的 Coze Python SDK 最新版本 示例代码可参考 GitHub 。 ​\n\n| 模块​ | 示例文件​ | 说明​ |\n| 授权​ | examples/auth_pat.py​ | 通过个人访问密钥实现 OpenAPI 鉴权。​ |\n| ​ | examples/auth_oauth_web.py​ | 通过 OAuth 授权码方式实现授权与 OpenAPI 鉴权。​ |\n| ​ | examples/auth_oauth_jwt.py​ | 通过 OAuth JWT 方式实现授权与 OpenAPI 鉴权。​ |\n| ​ | examples/auth_oauth_pkce.py​ | 通过 OAuth PKCE 方式实现授权与 OpenAPI 鉴权。​ |\n| ​ | examples/auth_oauth_device.py​ | 通过 OAuth 设备码方式实现授权与 OpenAPI 鉴权。​ |\n| 对话​ | examples/chat_no_stream.py​ | 发起对话，响应方式为非流式响应。​ |\n| ​ | examples/chat_stream.py​ | 发起对话，响应方式为流式响应。​ |\n| ​ | examples/chat_multimodal_stream.py​ | 发起对话，对话中上传文件，并发送多模态内容。​ |\n| ​ | examples/chat_simple_audio.py​ | 语音消息，对话时通过语音输入消息。​ |\n| ​ | examples/chat_oneonone_audio.py​ | 实时语音通话。​ |\n| ​ | examples/chat_local_plugin.py​ | 端插件。​ |\n| 会话​ | examples/conversation.py​ | 创建对话、向对话中添加消息以及清除对话内容等。​ |\n| ​ | examples/conversation_list.py​ | 查询对话列表。​ |\n| 工作流​ | examples/workflow_no_stream.py​ | 运行工作流，响应方式为非流式响应。​ |\n| ​ | examples/workflow_stream.py​ | 运行工作流，响应方式为流式响应，且工作流中包含问答节点。​ |\n| ​ | examples/workflow_async.py​ | 异步运行工作流，并获取工作流运行结果。​ |\n| ​ | ​examples/workflow_chat_stream.py​ | 运行对话流。​ |\n| ​ | examples/workflow_chat_multimode_stream.py​ | ​在对话流中上传图片，实现多模态交互。包括图片上传、流式响应处理及对话管理等操作。​ |\n| 智能体管理​ | examples/bot_publish.py​ | 创建一个草稿状态的智能体，更新智能体，并发布智能体为 API 服务。​ |\n| 工作空间​ | /examples/workspaces_list.py​ | 查询所有工作空间列表。​ |\n| ​ | /examples/workspaces_members_create.py​ | 批量邀请用户加入指定的工作空间。​ |\n| ​ | /examples/workspaces_members_delete.py​ | 批量移除工作空间中的成员。​ |\n| 知识库​ | examples/dataset_create.py​ | 创建知识库、上传知识库文件。​ |\n| 语音合成​ | examples/audio.py​ | 将文本转为语音，并将生成的语音保存为音频文件。​ |\n| 文件管理​ | examples/files_upload.py​ | 文件上传。​ |\n| 复制模板​ | examples/template_duplicate.py​ | 复制商店中的模板到指定工作空间。​ |\n| 用户​ | examples/users_me.py​ | 获取当前用户信息，如用户 ID、用户名等。​ |\n| 变量​ | examples/variable_retrieve.py​ | 获取用户变量的值。​ |\n| ​ | examples/variable_update.py​ | 设置用户变量的值。​ |\n| 异常处理​ | examples/exception.py​ | 处理 API 异常。​ |\n| 日志处理​ | examples/log.py​ | 修改日志级别。​ |\n| 超时时间​ | examples/timeout.py​ | 配置超时时间，确保 API 请求在规定时间内完成。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/python_installation",
      "title": "安装 Python SDK",
      "content": {
        "sections": [],
        "full_text": "安装 Python SDK\n\n使用 Coze Python SDK 之前，你需要先参考本文档安装 Python SDK。\n\n​\n\n环境准备\n\n​\n\nCoze Python SDK 适用于Python 3.7 及以上版本。安装 Python SDK 之前，建议执行以下命令确认你已安装 3.7 及以上版本的 Python。\n\n​\n\n​\n\nBash\n\n复制\n\n# 查看 Python 版本\n\n​\n\npython --version\n\n​\n\n​\n\n# 回显信息显示已安装 3.8.2 版本\n\n​\n\nPython 3.8.2\n\n​\n\n​\n\n安装 SDK\n\n​\n\n你可以通过 pip 方式安装 Coze Python SDK，Python 3.7 以上版本已默认安装 pip。如果你使用的是 poetry 等依赖管理工具，也可以使用\n\npoetry add cozepy\n\n方式安装 SDK。对于其他依赖管理工具，可以参考对应工具的官方文档进行操作。本文档以 pip 方式安装 SDK 为例。\n\n​\n\n执行以下命令，安装 Coze Python SDK。\n\n​\n\n​\n\nBash\n\n复制\n\npip install cozepy\n\n​\n\n​\n\n说明\n\n安装 Coze Python SDK 时，默认安装最新版本。你也可以\n\n点击此处\n\n查看 Coze Python SDK 已发布的所有历史版本。更多信息，请参见\n\nREADME\n\n。\n\n​\n\n​\n\n上一篇\n\nPython SDK 概述\n\n下一篇\n\n配置访问密钥",
        "links": []
      },
      "markdown": ""
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/python_access_token",
      "title": "配置访问密钥",
      "content": {
        "sections": [],
        "full_text": "配置访问密钥\n\n通过 Python SDK 方式调用扣子编程 OpenAPI 时，需要在 SDK 请求中配置访问密钥，用于身份信息认证和权限校验。扣子编程 OpenAPI 提供个人访问密钥和 OAuth 两种鉴权方式，你可以选择当前业务场景适合的鉴权方式，并获取对应的访问密钥。\n\n​\n\n对于 OAuth 授权码等授权方式，Coze Python SDK 已经封装了这部分代码，并处理了不同的返回错误代码，简化你的操作。\n\n​\n\n配置方式\n\n​\n\n扣子编程 OpenAPI 目前支持的鉴权方式如下。\n\n​\n\n​\n\n访问密钥类型\n\n​\n\n鉴权方式\n\n​\n\n说明\n\n​\n\n示例文件\n\n​\n\n个人访问密钥（PAT）\n\n​\n\n个人访问密钥（PAT）\n\n​\n\nPersonal Access Token，简称 PAT。扣子编程中生成的个人访问令牌。PAT 生成与使用便捷，适用于测试环境调试等场景。每个令牌可以关联多个空间，并开通指定的接口权限。生成方式可参考\n\n​\n\n添加个人访问令牌\n\n。\n\n​\n\nexamples/\n\nauth_pat.py\n\n​\n\n服务访问令牌（SAT）\n\n​\n\n服务访问令牌（SAT）\n\n​\n\nService Access Token（简称 SAT）是以服务身份创建的访问凭证，可\n\n长期有效\n\n访问扣子编程资源，通常用于服务/应用程序的身份验证和授权。生成方式可参考\n\n​\n\n添加服务访问令牌\n\n。\n\n​\n\nSAT 的示例代码与 PAT 通用，可直接参考 PAT 的示例文件。\n\n​\n\nexamples/\n\nauth_pat.py\n\n​\n\nOAuth 认证\n\n​\n\n​\n\n授权码授权\n\n​\n\n（Authorization Code Flow）\n\n​\n\n适用于有显著前后端之分的应用程序授权场景。其中前端模块负责与用户交互，后端服务处理前端请求，与扣子编程授权服务器和 OpenAPI 交互。 实现流程可参考\n\n​\n\nOAuth 授权码授权\n\n。\n\n​\n\nexamples/\n\nauth_oauth_web.py\n\n​\n\n​\n\nPKCE 授权\n\n​\n\n（Authorization Code Flow with PKCE）\n\n​\n\n应用程序无后端服务，所有操作都发生在应用程序的前端。 实现流程可参考\n\n​\n\nOAuth PKCE\n\n。\n\n​\n\nexamples/\n\nauth_oauth_pkce.py\n\n​\n\n​\n\n设备码授权\n\n​\n\n（Device Code Flow）\n\n​\n\n应用程序无后端服务，所有操作都发生在应用程序的 Command Line，且 Command Line 无法提供“同意授权”的操作。 实现流程可参考\n\n​\n\nOAuth 设备授权\n\n。\n\n​\n\nexamples/\n\nauth_oauth_device.py\n\n​\n\n​\n\nJWT 授权\n\n​\n\n（JWT Flow）\n\n​\n\n应用程序服务端直接调用扣子编程 OpenAPI。\n\n​\n\n应用程序后端服务代理应用程序自己的用户获取身份凭据，应用程序用户基于凭据直接访问 OpenAPI。 实现流程可参考\n\n​\n\nOAuth JWT 授权（开发者）\n\n。\n\n​\n\nexamples/\n\nauth_oauth_jwt.py\n\n​\n\n​\n\n配置个人访问密钥（PAT）\n\n​\n\n如果选择使用个人访问密钥鉴权，你需要先申请一个个人访问密钥，并添加指定空间和权限。操作步骤可参考\n\n添加个人访问令牌\n\n。\n\n​\n\n扣子编程建议你通过环境变量的方式管理访问密钥，避免在代码中通过硬编码方式进行编程，以免密钥泄露、引发安全风险。配置环境变量之后，您可以在不修改代码的情况下，将动态的鉴权参数传递到对应的函数，实现便捷安全的身份认证。\n\n​\n\n1.\n\n设置环境变量。\n\n​\n\n其中 COZE_API_TOKEN 是扣子编程中申请的个人访问密钥。关于环境变量的详细说明可参考\n\nPython 官方文档\n\n。\n\n​\n\n​\n\nShell\n\n复制\n\nexport COZE_API_TOKEN=\"\n\npat_****\n\n\"\n\n​\n\n​\n\n2.\n\n初始化客户端。\n\n​\n\n示例代码如下：\n\n​\n\n​\n\nPython\n\n复制\n\nimport\n\nos\n\n​\n\n​\n\nfrom\n\ncozepy\n\nimport\n\nCoze, TokenAuth, COZE_CN_BASE_URL\n\n​\n\n​\n\n# 通过环境变量引入密钥，访问 coze.cn 服务\n\n​\n\ncoze = Coze(auth=TokenAuth(os.getenv(\n\n\"COZE_API_TOKEN\"\n\n)), base_url=COZE_CN_BASE_URL)\n\n​\n\n​\n\n配置 OAuth 授权码流程\n\n​\n\n如果选择使用 OAuth 授权码方式完成授权，可参考以下流程及示例代码。\n\n​\n\n1.\n\n创建 OAuth 应用。\n\n​\n\n具体操作步骤可参考\n\n​\n\nOAuth 授权码授权\n\n。成功创建 OAuth 应用后，你将获得客户端 ID、客户端密钥和重定向地址。你需要妥善保管客户端密钥，以免数据泄露引发安全风险。\n\n​\n\n2.\n\n在代码中通过环境变量方式设置客户端 ID、客户端密钥和重定向地址。\n\n​\n\n​\n\nPython\n\n复制\n\nimport\n\nos\n\n​\n\nfrom\n\ncozepy\n\nimport\n\nCoze, TokenAuth, WebOAuthApp, COZE_CN_BASE_URL\n\n​\n\n​\n\n# Auth应用的客户端ID，创建 OAuth 应用时获取的客户端 ID。\n\n​\n\nweb_oauth_client_id = os.getenv(\n\n\"COZE_WEB_OAUTH_CLIENT_ID\"\n\n)\n\n​\n\n# 客户端密钥\n\n​\n\nweb_oauth_client_secret = os.getenv(\n\n\"COZE_WEB_OAUTH_CLIENT_SECRET\"\n\n)\n\n​\n\n​\n\n# 访问 coze.cn 服务\n\n​\n\nweb_oauth_app = WebOAuthApp(\n\n​\n\nclient_id=web_oauth_client_id,\n\n​\n\nclient_secret=web_oauth_client_secret,\n\n​\n\nbase_url=COZE_CN_BASE_URL,\n\n​\n\n)\n\n​\n\n​\n\n3.\n\n授权码流程中，会自动生成一个扣子编程授权页面，然后将其发送给需要授权的用户。扣子用户可访问此链接，并根据页面提示完成授权流程。\n\n​\n\n​\n\nPython\n\n复制\n\n# redirect link\n\n​\n\nweb_oauth_redirect_uri = os.getenv(\n\n\"COZE_WEB_OAUTH_REDIRECT_URI\"\n\n)\n\n​\n\n​\n\n# Generate the authorization link and direct the user to open it.\n\n​\n\nurl = web_oauth_app.get_oauth_url(redirect_uri=web_oauth_redirect_uri)\n\n​\n\n​\n\n4.\n\n用户点击同意授权按钮后，扣子网页会将请求重定向到授权链接中配置的重定向地址，并通过 Query 在地址中携带授权码和状态参数。\n\n​\n\n通过授权码（OAuth code）调用 OpenAPI 接口即可获取 OAuth Access Token。示例代码如下：\n\n​\n\n​\n\nPython\n\n复制\n\n# Open the authorization link in your browser and authorize this OAuth App\n\n​\n\n# After authorization, you will be redirected to the redirect_uri with a code and state\n\n​\n\n# You can use the code to get the access token\n\n​\n\ncode =\n\n'mock code'\n\n​\n\n​\n\n# After obtaining the code after redirection, the interface to exchange the code for a\n\n​\n\n# token can be invoked to generate the coze access_token of the authorized user.\n\n​\n\noauth_token = web_oauth_app.get_access_token(redirect_uri=web_oauth_redirect_uri, code=code)\n\n​\n\n​\n\n# use the access token to init Coze client\n\n​\n\ncoze = Coze(auth=TokenAuth(oauth_token.access_token), base_url=COZE_CN_BASE_URL)\n\n​\n\n​\n\n# When the token expires, you can also refresh and re-obtain the token\n\n​\n\noauth_token = web_oauth_app.refresh_access_token(oauth_token.refresh_token)\n\n​\n\n​\n\n配置 OAuth PKCE 授权流程\n\n​\n\n如果选择使用 OAuth PKCE 方式完成授权，可参考以下流程及示例代码。\n\n​\n\n1.\n\n创建 OAuth 应用。\n\n​\n\n具体操作步骤可参考\n\n​\n\nOAuth PKCE\n\n。成功创建 OAuth 应用后，你将获得客户端 ID 和重定向地址。\n\n​\n\n2.\n\n在代码中通过环境变量方式设置客户端 ID 和重定向地址。\n\n​\n\n​\n\nPython\n\n复制\n\nimport\n\nos\n\n​\n\n​\n\nfrom\n\ncozepy\n\nimport\n\nPKCEOAuthApp, COZE_CN_BASE_URL\n\n​\n\n​\n\n# OAuth应用的客户端ID，创建 OAuth 应用时获取的客户端 ID。\n\n​\n\npkce_oauth_client_id = os.getenv(\n\n\"COZE_PKCE_OAUTH_CLIENT_ID\"\n\n)\n\n​\n\n# 重定向地址，创建 OAuth 应用时指定的重定向 URL。\n\n​\n\npkce_oauth_redirect_uri = os.getenv(\n\n\"COZE_WEB_OAUTH_REDIRECT_URI\"\n\n)\n\n​\n\n​\n\npkce_oauth_app = PKCEOAuthApp(client_id=pkce_oauth_client_id, base_url=COZE_CN_BASE_URL)\n\n​\n\n​\n\n3.\n\n在代码中实现 OAuth PKCE 授权流程、\n\n​\n\n客户端生成一个随机值 code_verifier，并根据指定算法将其转换为 code_challenge，算法通常使用 SHA-256 算法。然后基于回调地址、code_challenge 和 code_challenge_method，生成一个授权链接。\n\n​\n\n​\n\nPython\n\n复制\n\n# In the SDK, we have wrapped up the code_challenge process of PKCE. Developers only need\n\n​\n\n# to select the code_challenge_method.\n\n​\n\ncode_verifier =\n\n\"random code verifier\"\n\n​\n\nurl = pkce_oauth_app.get_oauth_url(\n\n​\n\nredirect_uri=web_oauth_redirect_uri,\n\n​\n\ncode_verifier=code_verifier,\n\n​\n\ncode_challenge_method=\n\n\"S256\"\n\n​\n\n)\n\n​\n\n​\n\n4.\n\n完成授权。\n\n​\n\n开发者应该引导用户打开这个授权链接。当用户同意授权时，扣子编程会将页面重定向到开发者配置的回调地址，开发者可以获取这个 code，换取访问密钥。\n\n​\n\n​\n\nPython\n\n复制\n\n# Open the authorization link in your browser and authorize this OAuth App\n\n​\n\n# After authorization, you can exchange code_verifier for access token\n\n​\n\ncode =\n\n'mock code'\n\n​\n\n​\n\n# After obtaining the code after redirection, the interface to exchange the code for a\n\n​\n\n# token can be invoked to generate the\n\ncoze\n\naccess_token of the authorized user.\n\n​\n\noauth_token = pkce_oauth_app.get_access_token(\n\n​\n\nredirect_uri=web_oauth_redirect_uri, code=code, code_verifier=code_verifier\n\n​\n\n)\n\n​\n\n​\n\n# use the access token to init Coze client\n\n​\n\ncoze = Coze(auth=TokenAuth(oauth_token.access_token), base_url=COZE_CN_BASE_URL)\n\n​\n\n​\n\n# When the token expires, you can also refresh and re-obtain the token\n\n​\n\noauth_token = pkce_oauth_app.refresh_access_token(oauth_token.refresh_token)\n\n​\n\n​\n\n配置 OAuth 设备码授权流程\n\n​\n\n如果选择使用 OAuth 设备码方式完成授权，可参考以下流程及示例代码。\n\n​\n\n1.\n\n创建 OAuth 应用。\n\n​\n\n具体操作步骤可参考\n\n​\n\nOAuth 设备授权\n\n。成功创建 OAuth 应用后，你将获得客户端 ID。\n\n​\n\n2.\n\n在代码中通过环境变量方式设置客户端 ID。\n\n​\n\n​\n\nPython\n\n复制\n\nimport\n\nos\n\n​\n\nfrom\n\ncozepy\n\nimport\n\nCoze, TokenAuth, DeviceOAuthApp, COZE_CN_BASE_URL\n\n​\n\n​\n\n# OAuth应用的客户端ID，创建 OAuth 应用时获取的客户端 ID。\n\n​\n\ndevice_oauth_client_id = os.getenv(\n\n\"COZE_DEVICE_OAUTH_CLIENT_ID\"\n\n)\n\n​\n\n​\n\ndevice_oauth_app = DeviceOAuthApp(client_id=device_oauth_client_id, base_url=COZE_CN_BASE_URL)\n\n​\n\n​\n\n3.\n\n通过 OAuth 设备码授权流程获得访问密钥。\n\n​\n\n应用程序需要调用扣子编程 OpenAPI 生成设备代码，以获取 user_code 和 device_code。通过 user_code 生成授权链接，并引导用户打开该链接、填写 user_code、同意授权。应用程序调用扣子编程 OpenAPI，通过 device_code 生成访问密钥。\n\n​\n\n如果用户尚未授权或拒绝了授权，接口将抛出异常并返回特定的错误代码。用户同意授权后，接口将成功并返回访问密钥。\n\n​\n\n​\n\nPython\n\n复制\n\n# First, you need to request the server to obtain the device code required in the device auth flow\n\n​\n\ndevice_code = device_oauth_app.get_device_code()\n\n​\n\n​\n\n# The returned device_code contains an authorization link. Developers need to guide users\n\n​\n\n# to open up this link.\n\n​\n\n# open device_code.verification_url\n\n​\n\n​\n\n4.\n\n应用程序还需要使用 device_code 来轮询扣子编程 OpenAPI 以获取访问密钥。\n\n​\n\nCoze Python SDK已经封装了这部分代码，并处理了不同的返回错误代码。开发者只需要调用 get_access_token 即可。\n\n​\n\n​\n\nPython\n\n复制\n\ntry\n\n:\n\n​\n\noauth_token = device_oauth_app.get_access_token(\n\n​\n\ndevice_code=device_code.device_code,\n\n​\n\npoll=\n\nTrue\n\n,\n\n​\n\n)\n\n​\n\nexcept\n\nCozePKCEAuthError\n\nas\n\ne:\n\n​\n\nif\n\ne.error == CozePKCEAuthErrorType.ACCESS_DENIED:\n\n​\n\n# The user rejected the authorization.\n\n​\n\n# Developers need to guide the user to open the authorization link again.\n\n​\n\npass\n\n​\n\nelif\n\ne.error == CozePKCEAuthErrorType.EXPIRED_TOKEN:\n\n​\n\n# The token has expired. Developers need to guide the user to open\n\n​\n\n# the authorization link again.\n\n​\n\npass\n\n​\n\nelse\n\n:\n\n​\n\n# Other errors\n\n​\n\npass\n\n​\n\n​\n\nraise\n\n# for example, re-raise the error\n\n​\n\n​\n\n# use the access token to init Coze client\n\n​\n\ncoze = Coze(auth=TokenAuth(oauth_token.access_token), base_url=COZE_CN_BASE_URL)\n\n​\n\n​\n\n# When the token expires, you can also refresh and re-obtain the token\n\n​\n\noauth_token = device_oauth_app.refresh_access_token(oauth_token.refresh_token)\n\n​\n\n​\n\n配置 OAuth JWT 授权流程\n\n​\n\n如果选择使用 OAuth JWT 方式完成授权，可参考以下流程及示例代码。\n\n​\n\n1.\n\n创建 OAuth 应用并授权。\n\n​\n\n具体操作步骤可参考\n\n​\n\nOAuth JWT 授权（开发者）\n\n。成功创建 OAuth 应用后，你将获得客户端 ID、公钥和私钥。你需要妥善保管公钥和私钥，以免数据泄露引发安全风险。\n\n​\n\n2.\n\n在代码中通过环境变量方式设置客户端 ID、公钥和私钥。\n\n​\n\n​\n\nPython\n\n复制\n\nimport\n\nos\n\n​\n\nfrom\n\ncozepy\n\nimport\n\nCoze, TokenAuth, JWTOAuthApp, COZE_CN_BASE_URL\n\n​\n\n​\n\n# OAuth应用的客户端ID，创建 OAuth 应用时获取的客户端 ID。\n\n​\n\njwt_oauth_client_id = os.getenv(\n\n\"COZE_JWT_OAUTH_CLIENT_ID\"\n\n)\n\n​\n\n# OAuth 应用的私钥，创建 OAuth 应用时获取的私钥。\n\n​\n\njwt_oauth_private_key =\n\nos.getenv(\n\n\"COZE_JWT_OAUTH_PRIVATE_KEY\"\n\n)\n\n​\n\n# OAuth 应用的\n\n公钥指纹\n\n，可以在\n\nOAuth 应用\n\n页面找到这个应用，在\n\n操作\n\n列单击编辑图标，进入\n\n配置\n\n页面查看公钥指纹。\n\n​\n\njwt_oauth_public_key_id = os.getenv(\n\n\"COZE_JWT_OAUTH_PUBLIC_KEY_ID\"\n\n)\n\n​\n\n​\n\njwt_oauth_app = JWTOAuthApp(\n\n​\n\nclient_id=jwt_oauth_client_id,\n\n​\n\nprivate_key=jwt_oauth_private_key,\n\n​\n\npublic_key_id=jwt_oauth_public_key_id,\n\n​\n\nbase_url=COZE_CN_BASE_URL\n\n​\n\n)\n\n​\n\n​\n\n3.\n\n应用程序通过公钥和私钥签署 JWT，并通过扣子编程提供的 API 获取访问密钥。\n\n​\n\nCoze Python SDK 封装了这一过程，你只需要在OAuth JWT 流程中使用 get_access_token 来获取访问密钥即可。\n\n​\n\n​\n\nPython\n\n复制\n\n# The jwt process does not require any other operations, you can directly apply for a token\n\n​\n\noauth_token = jwt_oauth_app.get_access_token(ttl=\n\n3600\n\n)\n\n​\n\n​\n\n# use the access token to init Coze client\n\n​\n\ncoze = Coze(auth=TokenAuth(oauth_token.access_token), base_url=COZE_CN_BASE_URL)\n\n​\n\n​\n\n# The jwt oauth process does not support refreshing tokens. When the token expires,\n\n​\n\n# just directly call get_access_token to generate a new token.\n\n​\n\n​\n\n上一篇\n\n安装 Python SDK\n\n下一篇\n\n快速开始",
        "links": []
      },
      "markdown": "| 访问密钥类型​ | 鉴权方式​ | 说明​ | 示例文件​ |\n| 个人访问密钥（PAT）​ | 个人访问密钥（PAT）​ | Personal Access Token，简称 PAT。扣子编程中生成的个人访问令牌。PAT 生成与使用便捷，适用于测试环境调试等场景。每个令牌可以关联多个空间，并开通指定的接口权限。生成方式可参考​添加个人访问令牌。​ | examples/auth_pat.py​ |\n| 服务访问令牌（SAT）​ | 服务访问令牌（SAT）​ | Service Access Token（简称 SAT）是以服务身份创建的访问凭证，可长期有效访问扣子编程资源，通常用于服务/应用程序的身份验证和授权。生成方式可参考​添加服务访问令牌。​SAT 的示例代码与 PAT 通用，可直接参考 PAT 的示例文件。​ | examples/auth_pat.py​ |\n| OAuth 认证​​ | 授权码授权​（Authorization Code Flow）​ | 适用于有显著前后端之分的应用程序授权场景。其中前端模块负责与用户交互，后端服务处理前端请求，与扣子编程授权服务器和 OpenAPI 交互。 实现流程可参考​OAuth 授权码授权。​ | examples/auth_oauth_web.py​ |\n| ​ | PKCE 授权​（Authorization Code Flow with PKCE）​ | 应用程序无后端服务，所有操作都发生在应用程序的前端。 实现流程可参考​OAuth PKCE。​ | examples/auth_oauth_pkce.py​ |\n| ​ | 设备码授权​（Device Code Flow）​ | 应用程序无后端服务，所有操作都发生在应用程序的 Command Line，且 Command Line 无法提供“同意授权”的操作。 实现流程可参考​OAuth 设备授权。​ | examples/auth_oauth_device.py​ |\n| ​ | JWT 授权​（JWT Flow）​ | 应用程序服务端直接调用扣子编程 OpenAPI。​应用程序后端服务代理应用程序自己的用户获取身份凭据，应用程序用户基于凭据直接访问 OpenAPI。 实现流程可参考​OAuth JWT 授权（开发者）。​ | examples/auth_oauth_jwt.py​ |\n\n\n- 其中 COZE_API_TOKEN 是扣子编程中申请的个人访问密钥。关于环境变量的详细说明可参考 Python 官方文档 。 ​\n\n- ​ Shell 复制 export COZE_API_TOKEN=\" pat_**** \" ​ ​\n\n\n- 示例代码如下： ​\n\n- ​ Python 复制 import os ​ ​ from cozepy import Coze, TokenAuth, COZE_CN_BASE_URL ​ ​ # 通过环境变量引入密钥，访问 coze.cn 服务 ​ coze = Coze(auth=TokenAuth(os.getenv( \"COZE_API_TOKEN\" )), base_url=COZE_CN_BASE_URL) ​ ​\n\n\n- 具体操作步骤可参考 ​ OAuth 授权码授权 。成功创建 OAuth 应用后，你将获得客户端 ID、客户端密钥和重定向地址。你需要妥善保管客户端密钥，以免数据泄露引发安全风险。 ​\n\n\n- ​ Python 复制 import os ​ from cozepy import Coze, TokenAuth, WebOAuthApp, COZE_CN_BASE_URL ​ ​ # Auth应用的客户端ID，创建 OAuth 应用时获取的客户端 ID。 ​ web_oauth_client_id = os.getenv( \"COZE_WEB_OAUTH_CLIENT_ID\" ) ​ # 客户端密钥 ​ web_oauth_client_secret = os.getenv( \"COZE_WEB_OAUTH_CLIENT_SECRET\" ) ​ ​ # 访问 coze.cn 服务 ​ web_oauth_app = WebOAuthApp( ​ client_id=web_oauth_client_id, ​ client_secret=web_oauth_client_secret, ​ base_url=COZE_CN_BASE_URL, ​ ) ​ ​\n\n\n- ​ Python 复制 # redirect link ​ web_oauth_redirect_uri = os.getenv( \"COZE_WEB_OAUTH_REDIRECT_URI\" ) ​ ​ # Generate the authorization link and direct the user to open it. ​ url = web_oauth_app.get_oauth_url(redirect_uri=web_oauth_redirect_uri) ​ ​\n\n\n- 通过授权码（OAuth code）调用 OpenAPI 接口即可获取 OAuth Access Token。示例代码如下： ​\n\n- ​ Python 复制 # Open the authorization link in your browser and authorize this OAuth App ​ # After authorization, you will be redirected to the redirect_uri with a code and state ​ # You can use the code to get the access token ​ code = 'mock code' ​ ​ # After obtaining the code after redirection, the interface to exchange the code for a ​ # token can be invoked to generate the coze access_token of the authorized user. ​ oauth_token = web_oauth_app.get_access_token(redirect_uri=web_oauth_redirect_uri, code=code) ​ ​ # use the access token to init Coze client ​ coze = Coze(auth=TokenAuth(oauth_token.access_token), base_url=COZE_CN_BASE_URL) ​ ​ # When the token expires, you can also refresh and re-obtain the token ​ oauth_token = web_oauth_app.refresh_access_token(oauth_token.refresh_token) ​ ​\n\n\n- 具体操作步骤可参考 ​ OAuth PKCE 。成功创建 OAuth 应用后，你将获得客户端 ID 和重定向地址。 ​\n\n\n- ​ Python 复制 import os ​ ​ from cozepy import PKCEOAuthApp, COZE_CN_BASE_URL ​ ​ # OAuth应用的客户端ID，创建 OAuth 应用时获取的客户端 ID。 ​ pkce_oauth_client_id = os.getenv( \"COZE_PKCE_OAUTH_CLIENT_ID\" ) ​ # 重定向地址，创建 OAuth 应用时指定的重定向 URL。 ​ pkce_oauth_redirect_uri = os.getenv( \"COZE_WEB_OAUTH_REDIRECT_URI\" ) ​ ​ pkce_oauth_app = PKCEOAuthApp(client_id=pkce_oauth_client_id, base_url=COZE_CN_BASE_URL) ​ ​\n\n\n- 客户端生成一个随机值 code_verifier，并根据指定算法将其转换为 code_challenge，算法通常使用 SHA-256 算法。然后基于回调地址、code_challenge 和 code_challenge_method，生成一个授权链接。 ​\n\n- ​ Python 复制 # In the SDK, we have wrapped up the code_challenge process of PKCE. Developers only need ​ # to select the code_challenge_method. ​ code_verifier = \"random code verifier\" ​ url = pkce_oauth_app.get_oauth_url( ​ redirect_uri=web_oauth_redirect_uri, ​ code_verifier=code_verifier, ​ code_challenge_method= \"S256\" ​ ) ​ ​\n\n\n- 开发者应该引导用户打开这个授权链接。当用户同意授权时，扣子编程会将页面重定向到开发者配置的回调地址，开发者可以获取这个 code，换取访问密钥。 ​\n\n- ​ Python 复制 # Open the authorization link in your browser and authorize this OAuth App ​ # After authorization, you can exchange code_verifier for access token ​ code = 'mock code' ​ ​ # After obtaining the code after redirection, the interface to exchange the code for a ​ # token can be invoked to generate the coze access_token of the authorized user. ​ oauth_token = pkce_oauth_app.get_access_token( ​ redirect_uri=web_oauth_redirect_uri, code=code, code_verifier=code_verifier ​ ) ​ ​ # use the access token to init Coze client ​ coze = Coze(auth=TokenAuth(oauth_token.access_token), base_url=COZE_CN_BASE_URL) ​ ​ # When the token expires, you can also refresh and re-obtain the token ​ oauth_token = pkce_oauth_app.refresh_access_token(oauth_token.refresh_token) ​ ​\n\n\n- 具体操作步骤可参考 ​ OAuth 设备授权 。成功创建 OAuth 应用后，你将获得客户端 ID。 ​\n\n\n- ​ Python 复制 import os ​ from cozepy import Coze, TokenAuth, DeviceOAuthApp, COZE_CN_BASE_URL ​ ​ # OAuth应用的客户端ID，创建 OAuth 应用时获取的客户端 ID。 ​ device_oauth_client_id = os.getenv( \"COZE_DEVICE_OAUTH_CLIENT_ID\" ) ​ ​ device_oauth_app = DeviceOAuthApp(client_id=device_oauth_client_id, base_url=COZE_CN_BASE_URL) ​ ​\n\n\n- 应用程序需要调用扣子编程 OpenAPI 生成设备代码，以获取 user_code 和 device_code。通过 user_code 生成授权链接，并引导用户打开该链接、填写 user_code、同意授权。应用程序调用扣子编程 OpenAPI，通过 device_code 生成访问密钥。 ​\n\n- 如果用户尚未授权或拒绝了授权，接口将抛出异常并返回特定的错误代码。用户同意授权后，接口将成功并返回访问密钥。 ​\n\n- ​ Python 复制 # First, you need to request the server to obtain the device code required in the device auth flow ​ device_code = device_oauth_app.get_device_code() ​ ​ # The returned device_code contains an authorization link. Developers need to guide users ​ # to open up this link. ​ # open device_code.verification_url ​ ​\n\n\n- Coze Python SDK已经封装了这部分代码，并处理了不同的返回错误代码。开发者只需要调用 get_access_token 即可。 ​\n\n- ​ Python 复制 try : ​ oauth_token = device_oauth_app.get_access_token( ​ device_code=device_code.device_code, ​ poll= True , ​ ) ​ except CozePKCEAuthError as e: ​ if e.error == CozePKCEAuthErrorType.ACCESS_DENIED: ​ # The user rejected the authorization. ​ # Developers need to guide the user to open the authorization link again. ​ pass ​ elif e.error == CozePKCEAuthErrorType.EXPIRED_TOKEN: ​ # The token has expired. Developers need to guide the user to open ​ # the authorization link again. ​ pass ​ else : ​ # Other errors ​ pass ​ ​ raise # for example, re-raise the error ​ ​ # use the access token to init Coze client ​ coze = Coze(auth=TokenAuth(oauth_token.access_token), base_url=COZE_CN_BASE_URL) ​ ​ # When the token expires, you can also refresh and re-obtain the token ​ oauth_token = device_oauth_app.refresh_access_token(oauth_token.refresh_token) ​ ​\n\n\n- 具体操作步骤可参考 ​ OAuth JWT 授权（开发者） 。成功创建 OAuth 应用后，你将获得客户端 ID、公钥和私钥。你需要妥善保管公钥和私钥，以免数据泄露引发安全风险。 ​\n\n\n- ​ Python 复制 import os ​ from cozepy import Coze, TokenAuth, JWTOAuthApp, COZE_CN_BASE_URL ​ ​ # OAuth应用的客户端ID，创建 OAuth 应用时获取的客户端 ID。 ​ jwt_oauth_client_id = os.getenv( \"COZE_JWT_OAUTH_CLIENT_ID\" ) ​ # OAuth 应用的私钥，创建 OAuth 应用时获取的私钥。 ​ jwt_oauth_private_key = os.getenv( \"COZE_JWT_OAUTH_PRIVATE_KEY\" ) ​ # OAuth 应用的 公钥指纹 ，可以在 OAuth 应用 页面找到这个应用，在 操作 列单击编辑图标，进入 配置 页面查看公钥指纹。 ​ jwt_oauth_public_key_id = os.getenv( \"COZE_JWT_OAUTH_PUBLIC_KEY_ID\" ) ​ ​ jwt_oauth_app = JWTOAuthApp( ​ client_id=jwt_oauth_client_id, ​ private_key=jwt_oauth_private_key, ​ public_key_id=jwt_oauth_public_key_id, ​ base_url=COZE_CN_BASE_URL ​ ) ​ ​\n\n\n- Coze Python SDK 封装了这一过程，你只需要在OAuth JWT 流程中使用 get_access_token 来获取访问密钥即可。 ​\n\n- ​ Python 复制 # The jwt process does not require any other operations, you can directly apply for a token ​ oauth_token = jwt_oauth_app.get_access_token(ttl= 3600 ) ​ ​ # use the access token to init Coze client ​ coze = Coze(auth=TokenAuth(oauth_token.access_token), base_url=COZE_CN_BASE_URL) ​ ​ # The jwt oauth process does not support refreshing tokens. When the token expires, ​ # just directly call get_access_token to generate a new token. ​ ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/python_getting_started",
      "title": "快速开始",
      "content": {
        "sections": [],
        "full_text": "快速开始\n\n本文介绍如何使用扣子编程 Python SDK 完成扣子编程的常用操作，例如如何初始化 SDK、创建一个智能体草稿、发布智能体为 API 服务、和智能体对话等。\n\n​\n\n说明\n\n初始化之前，请确认已完成以下操作：\n\n​\n\n已安装扣子编程 Python SDK。更多信息，可参见\n\n​\n\n安装 Python SDK\n\n。\n\n​\n\n已实现授权流程，并通过环境变量等方式配置了访问密钥。详细说明可参考\n\n​\n\n配置访问密钥\n\n。\n\n​\n\n请确保扣子编程 Python SDK 版本已升级至\n\n0.17.0\n\n及之后版本，以免调用\n\n​\n\n发起对话\n\n或\n\n​\n\n执行对话流\n\nAPI 失败。\n\n​\n\n​\n\n初始化 SDK\n\n​\n\n初始化扣子编程 client 之后，才可以向扣子编程服务端发送 OpenAPI 请求。初始化时推荐通过环境变量动态获取访问密钥，以免硬编码引发数据安全风险。\n\n​\n\n初始化代码如下：\n\n​\n\n​\n\nPython\n\n复制\n\nimport\n\nos\n\n​\n\n​\n\nfrom\n\ncozepy\n\nimport\n\nCoze, TokenAuth, COZE_CN_BASE_URL\n\n​\n\n# 扣子编程建议你通过环境变量的方式管理访问密钥，关于环境变量的详细说明可参考\n\nPython 官方文档\n\n。\n\n​\n\ncoze = Coze(auth=TokenAuth(os.getenv(\n\n\"coze_api_token\"\n\n)), base_url=COZE_CN_BASE_URL)\n\n​\n\n​\n\n创建并发布智能体为 API 服务\n\n​\n\n通过 API 方式和智能体对话之前，你需要先创建一个智能体，并将其发布为 API 服务。你可以通过扣子编程平台或调用相关的 API 实现智能体的创建和发布。\n\n​\n\n通过扣子编程创建和发布智能体的操作请参见\n\n​\n\n搭建一个 AI 助手智能体\n\n、\n\n​\n\n发布智能体为 API 服务\n\n。\n\n​\n\n通过 API 创建和发布智能体的接口文档请参见\n\n​\n\n创建智能体\n\n、\n\n​\n\n发布智能体\n\n。\n\n​\n\n说明\n\n调用 API 创建智能体时，部分配置对应的 API 参数暂未开放，你只能为智能体添加知识库等有限的配置。\n\n​\n\n​\n\n示例代码如下：\n\n​\n\n完整的示例代码，请参见\n\nexamples/\n\nbot_publish.py\n\n示例源码\n\n。\n\n​\n\n​\n\nPython\n\n复制\n\nimport\n\nos\n\n# noqa\n\n​\n\nfrom\n\npathlib\n\nimport\n\nPath\n\n​\n\n​\n\n# Get an access_token through personal access token oroauth.\n\n​\n\ncoze_api_token = os.getenv(\n\n\"COZE_API_TOKEN\"\n\n)\n\n​\n\n​\n\nfrom\n\ncozepy\n\nimport\n\nCoze, TokenAuth, BotPromptInfo, Message, ChatEventType, MessageContentType\n\n# noqa\n\n​\n\n​\n\n# Init the Coze client\n\n​\n\ncoze = Coze(auth=TokenAuth(token=coze_api_token), base_url=COZE_CN_BASE_URL)\n\n​\n\n​\n\n# Call the upload file interface to get the avatar id.\n\n​\n\navatar = coze.files.upload(file=Path(\n\n\"/path/avatar.jpg\"\n\n))\n\n​\n\n​\n\n# Invoke the create interface to create a bot in the draft status.\n\n​\n\nbot = coze.bots.create(\n\n​\n\n# The bot should exist under a space and your space id needs configuration.\n\n​\n\nspace_id=\n\n\"workspace\n\nid\"\n\n,\n\n​\n\n# Bot name\n\n​\n\nname=\n\n\"translator bot\"\n\n,\n\n​\n\n# Bot avatar\n\n​\n\nicon_file_id=avatar.\n\nid\n\n,\n\n​\n\n# Bot system prompt\n\n​\n\nprompt_info=BotPromptInfo(prompt=\n\n\"your are a translator, translate the following text from English to Chinese\"\n\n),\n\n​\n\n)\n\n​\n\n​\n\n# Call the publish interface to publish the bot on the api channel.\n\n​\n\ncoze.bots.publish(bot_id=bot.bot_id)\n\n​\n\n​\n\n# Call the coze.chat.stream method to create a chat. The create method is\n\na\n\nstreaming\n\n​\n\n# chat and will return a Chat Iterator. Developers should iterate the iterator to get\n\n​\n\n# chat event and handle them.\n\n​\n\nfor\n\nevent\n\nin\n\ncoze.chat.stream(\n\n​\n\n# The published bot's id\n\n​\n\nbot_id=bot.bot_id,\n\n​\n\n# biz user id, maybe random string\n\n​\n\nuser_id=\n\n\"user id\"\n\n,\n\n​\n\n# user input\n\n​\n\nadditional_messages=[Message.build_user_question_text(\n\n\"chinese\"\n\n)],\n\n​\n\n):\n\n​\n\nif\n\n(\n\n​\n\nevent.event == ChatEventType.CONVERSATION_MESSAGE_DELTA\n\n​\n\nand\n\nevent.message.content.\n\ntype\n\n== MessageContentType.TEXT\n\n​\n\n):\n\n​\n\nprint\n\n(event.message.content, end=\n\n\"\"\n\n)\n\n​\n\n​\n\n发起对话\n\n​\n\n​\n\n发起对话\n\n接口用于向指定智能体发起一次对话，支持在对话时添加对话的上下文消息，以便智能体基于历史消息做出合理的回复。开发者可以按需选择响应方式，即流式或非流式响应，响应方式决定了开发者获取智能体回复的方式。\n\n​\n\n流式响应\n\n：智能体在生成回复的同时，将回复消息以数据流的形式逐条发送给客户端。处理结束后，服务端会返回拼接后完整的智能体回复。详细说明可参考\n\n流式响应\n\n。\n\n​\n\n非流式响应\n\n：无论对话是否处理完毕，立即发送响应消息。开发者可以通过接口\n\n查看对话详情\n\n确认本次对话处理结束后，再调用\n\n查看对话消息详情\n\n接口查看模型回复等完整响应内容。详细说明可参考\n\n非流式响应\n\n。\n\n​\n\n本文档以流式响应为例，演示通过 API 方式和智能体对话相关示例代码。你也可以查看 Coze Python SDK\n\n示例代码目录\n\n，查看发起对话接口的其他实现方式，例如非流式响应、对话中发送多模态内容等。\n\n​\n\n示例代码如下：\n\n​\n\n​\n\nPython\n\n复制\n\nimport\n\nos\n\n# noqa\n\n​\n\n​\n\n# Get an access_token through personal access token oroauth.\n\n​\n\ncoze_api_token = os.getenv(\n\n\"COZE_API_TOKEN\"\n\n)\n\n​\n\n​\n\nfrom\n\ncozepy\n\nimport\n\nCoze, TokenAuth, Message, ChatStatus, MessageContentType, ChatEventType\n\n# noqa\n\n​\n\n​\n\n# Init the Coze client through\n\nthe\n\naccess_token.\n\n​\n\ncoze = Coze(auth=TokenAuth(token=coze_api_token), base_url=COZE_CN_BASE_URL)\n\n​\n\n​\n\n# Create a bot instance in Coze, copy the last number from the web link as the bot's ID.\n\n​\n\nbot_id =\n\n\"bot id\"\n\n​\n\n# The user id identifies the identity of a user. Developers can use a custom business\n\nID\n\n​\n\n# or a random string.\n\n​\n\nuser_id =\n\n\"user id\"\n\n​\n\n​\n\n# Call the coze.chat.stream method to create a chat. The create method is\n\na\n\nstreaming\n\n​\n\n# chat and will return a Chat Iterator. Developers should iterate the iterator to get\n\n​\n\n# chat event and handle them.\n\n​\n\nfor\n\nevent\n\nin\n\ncoze.chat.stream(\n\n​\n\nbot_id=bot_id, user_id=user_id, additional_messages=[Message.build_user_question_text(\n\n\"How are you?\"\n\n)]\n\n​\n\n):\n\n​\n\nif\n\nevent.event == ChatEventType.CONVERSATION_MESSAGE_DELTA:\n\n​\n\nmessage = event.message\n\n​\n\nprint\n\n(\n\nf\"role=\n\n{message.role}\n\n, content=\n\n{message.content}\n\n\"\n\n)\n\n​\n\n​\n\n上一篇\n\n配置访问密钥\n\n下一篇\n\nNode.js SDK 概述",
        "links": []
      },
      "markdown": "- 已安装扣子编程 Python SDK。更多信息，可参见 ​ 安装 Python SDK 。 ​\n\n- 已实现授权流程，并通过环境变量等方式配置了访问密钥。详细说明可参考 ​ 配置访问密钥 。 ​\n\n- 请确保扣子编程 Python SDK 版本已升级至 0.17.0 及之后版本，以免调用 ​ 发起对话 或 ​ 执行对话流 API 失败。 ​\n\n- 通过扣子编程创建和发布智能体的操作请参见 ​ 搭建一个 AI 助手智能体 、 ​ 发布智能体为 API 服务 。 ​\n\n- 通过 API 创建和发布智能体的接口文档请参见 ​ 创建智能体 、 ​ 发布智能体 。 ​\n\n- 说明 调用 API 创建智能体时，部分配置对应的 API 参数暂未开放，你只能为智能体添加知识库等有限的配置。 ​ ​\n\n- 流式响应 ：智能体在生成回复的同时，将回复消息以数据流的形式逐条发送给客户端。处理结束后，服务端会返回拼接后完整的智能体回复。详细说明可参考 流式响应 。 ​\n\n- 非流式响应 ：无论对话是否处理完毕，立即发送响应消息。开发者可以通过接口 查看对话详情 确认本次对话处理结束后，再调用 查看对话消息详情 接口查看模型回复等完整响应内容。详细说明可参考 非流式响应 。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/nodejs_overview",
      "title": "Node.js SDK 概述",
      "content": {
        "sections": [],
        "full_text": "Node.js SDK 概述\n\n扣子\n\nNode.js SDK 是\n\n扣子\n\n官方提供的开发工具包，旨在帮助开发者轻松将\n\n扣子\n\n的 AI 能力集成到应用程序中。Node.js SDK 适合各类开发者使用，无论是初学者还是专业开发人员，都能快速上手并实现所需功能。\n\n​\n\n核心特性\n\n​\n\n以下是 Node.js SDK 的一些核心特性，帮助你更好地了解其功能和优势：\n\n​\n\n全面的 API 支持：完整支持\n\n扣子\n\n开放平台的所有 API。\n\n​\n\n多样化的认证方式：支持 PAT、和授权码、JWT、Device、PKCE OAuth 等多种认证方式\n\n。\n\n​\n\n流式响应优化：针对聊天和工作流提供实时数据流支持。\n\n​\n\n跨平台兼容：同时支持 Node.js（≥14）和主流浏览器环境。\n\n​\n\n灵活配置选项：提供超时、自定义请求头、中断等配置项。\n\n​\n\n技术优势\n\n​\n\nNode.js SDK 具备以下技术优势：\n\n​\n\n简单易用：提供直观的 API 接口设计，降低使用门槛。\n\n​\n\n类型安全：完整的 TypeScript 类型定义，提供更好的开发体验。\n\n​\n\n错误处理：统一的错误处理机制，便于调试和问题排查。\n\n​\n\n实时响应：针对流式 API 优化，支持实时数据处理。\n\n​\n\n源码地址\n\n​\n\n访问\n\nGitHub\n\n获取 Node.js SDK 源码。\n\n​\n\n注意\n\n从扣子 GitHub 仓库获取的源码和示例代码中，\n\nbase_url\n\n默认设置为域名\n\nCOZE_COM_BASE_URL\n\n，使用源码前应手动将其修改为域名\n\nCOZE_CN_BASE_URL\n\n。\n\n​\n\n​\n\n示例代码\n\n​\n\nNode.js SDK 提供各种授权方式、各种使用方式的示例代码，便于开发者直接参考使用。\n\n​\n\n说明\n\nCoze Node.js SDK 支持扣子所有 OpenAPI，对应的 API 文档可参考\n\n​\n\nAPI 介绍\n\n。\n\n​\n\n示例代码将持续更新和补充，各种场景的 Coze Node.js SDK\n\n最新版本\n\n示例代码可参考\n\nGitHub\n\n。\n\n​\n\n​\n\n常见场景的示例代码及说明如下：\n\n​\n\n​\n\n模块\n\n​\n\n示例文件\n\n​\n\n说明\n\n​\n\n授权\n\n​\n\nauth/auth-pat.ts\n\n​\n\n通过个人访问密钥实现 OpenAPI 鉴权。\n\n​\n\n​\n\nauth/auth-oauth-web.ts\n\n​\n\n通过 OAuth 授权码方式实现 OpenAPI 鉴权。\n\n​\n\n​\n\nauth/auth-oauth-jwt.ts\n\n​\n\n通过 OAuth JWT 方式实现 OpenAPI 鉴权。\n\n​\n\n​\n\nauth/auth-oauth-jwt-channel.ts\n\n​\n\n通过 OAuth JWT 渠道方式实现 OpenAPI 鉴权\n\n​\n\n​\n\nauth/auth-oauth-pkce.ts\n\n​\n\n通过 OAuth PKCE 方式实现 OpenAPI 鉴权。\n\n​\n\n​\n\nauth/auth-oauth-device.ts\n\n​\n\n通过 OAuth 设备码方式实现 OpenAPI 鉴权。\n\n​\n\n对话\n\n​\n\nchat.ts\n\n​\n\n​\n\n发起对话，包含：\n\n​\n\n流式对话响应。\n\n​\n\n非流式对话响应。\n\n​\n\n取消对话。\n\n​\n\n​\n\nchat-with-file.ts\n\n​\n\n发起对话，对话中上传文件，并发送多模态内容。\n\n​\n\n​\n\nchat-local-plugin.ts\n\n​\n\n端插件。\n\n​\n\n工作流\n\n​\n\n​\n\nworkflow.ts\n\n​\n\n执行工作流，包含：\n\n​\n\n流式工作流响应。\n\n​\n\n非流式工作流响应。\n\n​\n\n智能体管理\n\n​\n\nbot.ts\n\n​\n\n​\n\n智能体操作，包含：\n\n​\n\n创建智能体。\n\n​\n\n更新智能体。\n\n​\n\n发布智能体为 API 服务。\n\n​\n\n获取智能体列表。\n\n​\n\n获取单个智能体详情。\n\n​\n\n工作空间\n\n​\n\nworkspace.ts\n\n​\n\n查询工作空间列表。\n\n​\n\n文件上传\n\n​\n\nfile.ts\n\n​\n\n文件上传，包含：\n\n​\n\n文件上传。\n\n​\n\n获取文件详情。\n\n​\n\n会话与消息管理\n\n​\n\nconversation.ts\n\n​\n\n会话与消息管理，包含：\n\n​\n\n创建会话。\n\n​\n\n创建、更新、删除消息。\n\n​\n\n获取会话下的消息列表。\n\n​\n\n知识库管理\n\n​\n\ndatasets.ts\n\n​\n\n知识库管理，包含：\n\n​\n\n创建、查询、更新和删除知识库。\n\n​\n\n上传文本和图片类型的知识库文件。\n\n​\n\n更新图片知识库的描述。\n\n​\n\n变量\n\n​\n\nvariables.ts\n\n​\n\n变量管理，包含：\n\n​\n\n获取用户变量的值。\n\n​\n\n设置用户变量的值。\n\n​\n\n语音\n\n​\n\nvoice.ts\n\n​\n\nASR、TTS 与音色相关功能，包含：\n\n​\n\n音色克隆。\n\n​\n\n语音合成，将文本转为语音，并将生成的语音保存为音频文件。\n\n​\n\n查询音色列表。\n\n​\n\n语音识别，将指定音频文件转录为文本。\n\n​\n\nWebSocket语音\n\n​\n\nchat.ts\n\n​\n\nWebSocket 语音通话。\n\n​\n\n​\n\nspeech.ts\n\n​\n\n语音合成，将文本转为语音，并将生成的语音保存为音频文件。\n\n​\n\n​\n\ntranscriptions.ts\n\n​\n\n语音识别，将指定音频文件转录为文本。\n\n​\n\n声纹识别\n\n​\n\nvoiceprint.ts\n\n​\n\n声纹识别，包含\n\n​\n\n创建、查询和修改声纹组。\n\n​\n\n创建、查询、更新、删除声纹特征。\n\n​\n\n声纹特征比对。\n\n​\n\n复制模板\n\n​\n\ntemplates.ts\n\n​\n\n复制商店中的模板到指定工作空间。\n\n​\n\n用户\n\n​\n\nusers-me.ts\n\n​\n\n获取当前用户信息，如用户 ID、用户名等。\n\n​\n\n代理\n\n​\n\nproxy/proxy-example.ts\n\n​\n\n通过代理服务器访问扣子 API。\n\n​\n\n异常处理\n\n​\n\nerror-handle.ts\n\n​\n\n处理 API 异常。\n\n​\n\n网络请求配置\n\n​\n\nrequest-options.ts\n\n​\n\n支持大部分 axios 配置。\n\n​\n\n​\n\n异常处理\n\n​\n\nNode.js SDK 提供了完善的异常处理机制，所有异常类都继承自 CozeError 基类。当 API 调用失败时，Node.js SDK 会抛出相应的异常类型，便于开发者进行错误处理和调试。Node.js SDK 封装了以下常见的异常类型：\n\n​\n\n​\n\n异常类\n\n​\n\nHTTP 状态码\n\n​\n\n说明\n\n​\n\nBadRequestError\n\n​\n\n400\n\n​\n\n请求参数错误。通常是参数格式、类型或值域不符合要求。\n\n​\n\nAuthenticationError\n\n​\n\n401\n\n​\n\n身份认证失败，可能是 token 无效或已过期。\n\n​\n\nPermissionDeniedError\n\n​\n\n403\n\n​\n\n权限不足，当前身份无权访问目标资源。\n\n​\n\nNotFoundError\n\n​\n\n404\n\n​\n\n资源不存在，请求的 API 接口或资源未找到。\n\n​\n\nRateLimitError\n\n​\n\n429\n\n​\n\n请求频率超限，需要降低 API 调用频率。\n\n​\n\nTimeoutError\n\n​\n\n408\n\n​\n\n请求超时，服务器在预期时间内未收到完整请求。\n\n​\n\nGatewayError\n\n​\n\n502\n\n​\n\n网关错误，上游服务暂时不可用。\n\n​\n\nInternalServerError\n\n​\n\n500\n\n​\n\n服务器内部错误，平台服务出现异常。\n\n​\n\n​\n\n​\n\n上一篇\n\n快速开始\n\n下一篇\n\n安装 Node.js SDK",
        "links": []
      },
      "markdown": "- 全面的 API 支持：完整支持 扣子 开放平台的所有 API。 ​\n\n- 多样化的认证方式：支持 PAT、和授权码、JWT、Device、PKCE OAuth 等多种认证方式 。 ​\n\n- 流式响应优化：针对聊天和工作流提供实时数据流支持。 ​\n\n- 跨平台兼容：同时支持 Node.js（≥14）和主流浏览器环境。 ​\n\n- 灵活配置选项：提供超时、自定义请求头、中断等配置项。 ​\n\n- 简单易用：提供直观的 API 接口设计，降低使用门槛。 ​\n\n- 类型安全：完整的 TypeScript 类型定义，提供更好的开发体验。 ​\n\n- 错误处理：统一的错误处理机制，便于调试和问题排查。 ​\n\n- 实时响应：针对流式 API 优化，支持实时数据处理。 ​\n\n- Coze Node.js SDK 支持扣子所有 OpenAPI，对应的 API 文档可参考 ​ API 介绍 。 ​\n\n- 示例代码将持续更新和补充，各种场景的 Coze Node.js SDK 最新版本 示例代码可参考 GitHub 。 ​\n\n| 模块​ | 示例文件​ | 说明​ |\n| 授权​ | auth/auth-pat.ts​ | 通过个人访问密钥实现 OpenAPI 鉴权。​ |\n| ​ | auth/auth-oauth-web.ts​ | 通过 OAuth 授权码方式实现 OpenAPI 鉴权。​ |\n| ​ | auth/auth-oauth-jwt.ts​ | 通过 OAuth JWT 方式实现 OpenAPI 鉴权。​ |\n| ​ | auth/auth-oauth-jwt-channel.ts​ | 通过 OAuth JWT 渠道方式实现 OpenAPI 鉴权​ |\n| ​ | auth/auth-oauth-pkce.ts​ | 通过 OAuth PKCE 方式实现 OpenAPI 鉴权。​ |\n| ​ | auth/auth-oauth-device.ts​ | 通过 OAuth 设备码方式实现 OpenAPI 鉴权。​ |\n| 对话​ | chat.ts​​ | 发起对话，包含：​流式对话响应。​非流式对话响应。​取消对话。​ |\n| ​ | chat-with-file.ts​ | 发起对话，对话中上传文件，并发送多模态内容。​ |\n| ​ | chat-local-plugin.ts​ | 端插件。​ |\n| 工作流​​ | workflow.ts​ | 执行工作流，包含：​流式工作流响应。​非流式工作流响应。​ |\n| 智能体管理​ | bot.ts​​ | 智能体操作，包含：​创建智能体。​更新智能体。​发布智能体为 API 服务。​获取智能体列表。​获取单个智能体详情。​ |\n| 工作空间​ | workspace.ts​ | 查询工作空间列表。​ |\n| 文件上传​ | file.ts​ | 文件上传，包含：​文件上传。​获取文件详情。​ |\n| 会话与消息管理​ | conversation.ts​ | 会话与消息管理，包含：​创建会话。​创建、更新、删除消息。​获取会话下的消息列表。​ |\n| 知识库管理​ | datasets.ts​ | 知识库管理，包含：​创建、查询、更新和删除知识库。​上传文本和图片类型的知识库文件。​更新图片知识库的描述。​ |\n| 变量​ | variables.ts​ | 变量管理，包含：​获取用户变量的值。​设置用户变量的值。​ |\n| 语音​ | voice.ts​ | ASR、TTS 与音色相关功能，包含：​音色克隆。​语音合成，将文本转为语音，并将生成的语音保存为音频文件。​查询音色列表。​语音识别，将指定音频文件转录为文本。​ |\n| WebSocket语音​ | chat.ts​ | WebSocket 语音通话。​ |\n| ​ | speech.ts​ | 语音合成，将文本转为语音，并将生成的语音保存为音频文件。​ |\n| ​ | transcriptions.ts​ | 语音识别，将指定音频文件转录为文本。​ |\n| 声纹识别​ | voiceprint.ts​ | 声纹识别，包含​创建、查询和修改声纹组。​创建、查询、更新、删除声纹特征。​声纹特征比对。​ |\n| 复制模板​ | templates.ts​ | 复制商店中的模板到指定工作空间。​ |\n| 用户​ | users-me.ts​ | 获取当前用户信息，如用户 ID、用户名等。​ |\n| 代理​ | proxy/proxy-example.ts​ | 通过代理服务器访问扣子 API。​ |\n| 异常处理​ | error-handle.ts​ | 处理 API 异常。​ |\n| 网络请求配置​ | request-options.ts​ | 支持大部分 axios 配置。​ |\n\n- 流式对话响应。 ​\n\n- 非流式对话响应。 ​\n\n- 取消对话。 ​\n\n- 流式工作流响应。 ​\n\n- 非流式工作流响应。 ​\n\n- 创建智能体。 ​\n\n- 更新智能体。 ​\n\n- 发布智能体为 API 服务。 ​\n\n- 获取智能体列表。 ​\n\n- 获取单个智能体详情。 ​\n\n- 文件上传。 ​\n\n- 获取文件详情。 ​\n\n- 创建会话。 ​\n\n- 创建、更新、删除消息。 ​\n\n- 获取会话下的消息列表。 ​\n\n- 创建、查询、更新和删除知识库。 ​\n\n- 上传文本和图片类型的知识库文件。 ​\n\n- 更新图片知识库的描述。 ​\n\n- 获取用户变量的值。 ​\n\n- 设置用户变量的值。 ​\n\n- 音色克隆。 ​\n\n- 语音合成，将文本转为语音，并将生成的语音保存为音频文件。 ​\n\n- 查询音色列表。 ​\n\n- 语音识别，将指定音频文件转录为文本。 ​\n\n- 创建、查询和修改声纹组。 ​\n\n- 创建、查询、更新、删除声纹特征。 ​\n\n- 声纹特征比对。 ​\n\n| 异常类​ | HTTP 状态码​ | 说明​ |\n| BadRequestError​ | 400​ | 请求参数错误。通常是参数格式、类型或值域不符合要求。​ |\n| AuthenticationError​ | 401​ | 身份认证失败，可能是 token 无效或已过期。​ |\n| PermissionDeniedError​ | 403​ | 权限不足，当前身份无权访问目标资源。​ |\n| NotFoundError​ | 404​ | 资源不存在，请求的 API 接口或资源未找到。​ |\n| RateLimitError​ | 429​ | 请求频率超限，需要降低 API 调用频率。​ |\n| TimeoutError​ | 408​ | 请求超时，服务器在预期时间内未收到完整请求。​ |\n| GatewayError​ | 502​ | 网关错误，上游服务暂时不可用。​ |\n| InternalServerError​ | 500​ | 服务器内部错误，平台服务出现异常。​ |"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/nodejs_install",
      "title": "安装 Node.js SDK",
      "content": {
        "sections": [],
        "full_text": "安装 Node.js SDK\n\n使用 Node.js SDK 之前，需要先参考本文档安装 Node.js SDK。\n\n​\n\n环境准备\n\n​\n\nNode.js SDK 适用于 Node.js 14 及以上版本，支持大部分的\n\n主流浏览器\n\n。安装 Node.js SDK 之前，建议执行以下命令确认已安装 Node.js 14 及以上版本。\n\n​\n\n​\n\nBash\n\n复制\n\n# View the Node.js version\n\n​\n\nnode --version\n\n​\n\n​\n\n# Returned information shows the 18.19.1 version installed\n\n​\n\nv18.19.1\n\n​\n\n​\n\n安装 Node.js SDK\n\n​\n\n可以使用 npm 或 pnpm 等包管理工具安装 Node.js SDK。执行以下命令，安装 Node.js SDK。\n\n​\n\n注意\n\nNode.js SDK 依赖 axios 请求库。如果项目中未安装 axios，请安装该请求库。\n\n​\n\n安装 Node.js SDK 时，默认安装最新版本。可以\n\n点击此处\n\n查看 Node.js SDK 已发布的所有历史版本。更多信息，请参见\n\nREADME\n\n。\n\n​\n\n​\n\n​\n\nBash\n\n复制\n\nnpm install @coze/api\n\n​\n\n​\n\n# Install axios\n\n​\n\nnpm install axios\n\n​\n\n​\n\n​\n\n上一篇\n\nNode.js SDK 概述\n\n下一篇\n\n配置访问密钥",
        "links": []
      },
      "markdown": "- Node.js SDK 依赖 axios 请求库。如果项目中未安装 axios，请安装该请求库。 ​\n\n- 安装 Node.js SDK 时，默认安装最新版本。可以 点击此处 查看 Node.js SDK 已发布的所有历史版本。更多信息，请参见 README 。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/nodejs_access_token",
      "title": "配置访问密钥",
      "content": {
        "sections": [],
        "full_text": "配置访问密钥\n\n通过 Node.js SDK 方式调用扣子编程\n\nOpenAPI 时\n\n，需要在 SDK 请求中配置访问密钥，用于身份信息认证和权限校验。扣子编程\n\nOpenAPI 提\n\n供个人访问密钥和 OAuth 两种鉴权方式。可以选择当前业务场景适合的鉴权方式，并获取对应的访问密钥。\n\n​\n\n对于 OAuth 授权码等授权方式，Node.js SDK 已经封装了这部分代码，并处理了不同的返回错误代码，简化你的操作。\n\n​\n\n配置方式\n\n​\n\n扣子编程\n\nOpenAPI 目前支持的鉴权方式如下。\n\n​\n\n​\n\n访问密钥类型\n\n​\n\n鉴权方式\n\n​\n\n说明\n\n​\n\n示例文件\n\n​\n\n个人访问密钥（PAT）\n\n​\n\n个人访问密钥（PAT）\n\n​\n\n​\n\nPersonal Access Token，简称 PAT。扣子编程中生成的个人访问令牌。PAT 生成与使用便捷，适用于测试环境调试等场景。每个令牌可以关联多个空间，并开通指定的接口权限。生成方式可参考\n\n​\n\n添加个人访问令牌\n\n。\n\n​\n\nauth/auth-pat.ts\n\n​\n\n服务访问令牌（SAT）\n\n​\n\n服务访问令牌（SAT）\n\n​\n\nService Access Token（简称 SAT）是以服务身份创建的访问凭证，可\n\n长期有效\n\n访问扣子资源，通常用于服务/应用程序的身份验证和授权。生成方式可参考\n\n​\n\n添加服务访问令牌\n\n。\n\n​\n\nSAT 的示例代码与 PAT 通用，可直接参考 PAT 的示例文件。\n\n​\n\nauth/auth-pat.ts\n\n​\n\nOAuth 认证\n\n​\n\n​\n\n授权码授权\n\n​\n\n( Authorization Code Flow)\n\n​\n\n适用于有显著前后端之分的应用程序授权场景。其中前端模块负责与用户交互，后端服务处理前端请求，与扣子编程\n\n授权服务器和 OpenAPI 交互。\n\n​\n\nauth/auth-oauth-web.ts\n\n​\n\n​\n\nPKCE 授权\n\n​\n\n( Authorization Code Flow with PKCE)\n\n​\n\n应用程序无后端服务，所有操作都发生在应用程序的前端。\n\n​\n\nauth/auth-oauth-pkce.ts\n\n​\n\n​\n\n设备码授权\n\n​\n\n( Device Code Flow)\n\n​\n\n应用程序无后端服务，所有操作都发生在应用程序的 Command Line，且 Command Line 无法提供“同意授权”的操作。\n\n​\n\nauth/auth-oauth-device.ts\n\n​\n\n​\n\nJWT 授权\n\n​\n\n( JWT Flow)\n\n​\n\n应用程序服务端直接调用扣子编程\n\nOpenAPI。\n\n​\n\n应用程序后端服务代理应用程序自己的用户获取身份凭据，应用程序用户基于凭据直接访问 OpenAPI。\n\n​\n\nauth/auth-oauth-jwt-channel.ts\n\n​\n\n​\n\n配置个人访问密钥（PAT）\n\n​\n\n如果选择使用个人访问密钥鉴权，需要先申请一个个人访问密钥，并添加指定空间和权限。操作步骤可参考\n\n​\n\n添加个人访问令牌\n\n。\n\n​\n\n建议通过环境变量的方式管理访问密钥，避免在代码中通过硬编码方式进行编程，以免密钥泄露、引发安全风险。配置环境变量之后，可以在不修改代码的情况下，将动态的鉴权参数传递到对应的函数，实现便捷安全的身份认证。\n\n​\n\n使用个人访问密钥：\n\n​\n\n1.\n\n设置环境变量。其中\n\nCOZE_API_TOKEN\n\n是在扣子编程中申请的个人访问密钥。\n\n​\n\n​\n\nBash\n\n复制\n\nexport\n\nCOZE_API_TOKEN=pat_****\n\n​\n\n​\n\n2.\n\n初始化客户端。\n\n​\n\n​\n\nJavaScript\n\n复制\n\nimport\n\n{\n\nCozeAPI\n\n,\n\nCOZE_CN_BASE_URL\n\n}\n\nfrom\n\n'@coze/api'\n\n;\n\n​\n\n​\n\n// Import token using the environment variable\n\n​\n\nconst\n\ntoken = process.\n\nenv\n\n.\n\nCOZE_API_TOKEN\n\n||\n\n\"input your coze api token\"\n\n​\n\n​\n\n// Create a client instance\n\n​\n\nconst\n\nclient =\n\nnew\n\nCozeAPI\n\n({\n\n​\n\nbaseURL\n\n:\n\nCOZE_CN_BASE_URL\n\n,\n\n//扣子 OpenAPI 的 Endpoint。\n\n​\n\ntoken\n\n: token,\n\n//扣子个人访问令牌。\n\n​\n\n});\n\n​\n\n​\n\n3.\n\n出于安全考虑，Node.js SDK 默认不允许在浏览器环境中使用 PAT 认证。如果确实需要在浏览器中使用 PAT（不推荐），可以通过配置强制启用。\n\n​\n\n​\n\nJavaScript\n\n复制\n\nimport\n\n{\n\nCozeAPI\n\n,\n\nCOZE_CN_BASE_URL\n\n}\n\nfrom\n\n'@coze/api'\n\n;\n\n​\n\n​\n\n// Import token using the environment variable\n\n​\n\nconst\n\ntoken = process.\n\nenv\n\n.\n\nCOZE_API_TOKEN\n\n||\n\n\"input your coze api token\"\n\n​\n\n​\n\n// Access the coze.com service\n\n​\n\nconst\n\nclient =\n\nnew\n\nCozeAPI\n\n({\n\n​\n\nbaseURL\n\n:\n\nCOZE_CN_BASE_URL\n\n,\n\n​\n\ntoken\n\n: token,\n\n​\n\nallowPersonalAccessTokenInBrowser\n\n:\n\ntrue\n\n,\n\n// Allow the browers to use PAT\n\n​\n\n});\n\n​\n\n​\n\n配置 OAuth 授权码流程\n\n​\n\n如果选择使用 OAuth 授权码方式完成授权，可参考以下流程及示例代码。\n\n​\n\n1.\n\n创建 OAuth 应用。\n\n​\n\n具体操作步骤可参考\n\n​\n\nOAuth 授权码授权\n\n。成功创建 OAuth 应用后，可获得客户端 ID、客户端密钥和重定向地址。请妥善保管客户端密钥，以免数据泄露引发安全风险。\n\n​\n\n2.\n\n在代码中通过环境变量方式获取客户端 ID、客户端密钥和重定向地址。\n\n​\n\n​\n\nJavaScript\n\n复制\n\n// 导入扣子API工具：授权URL生成、token获取、刷新等方法\n\n​\n\nimport\n\n{\n\n​\n\nCozeAPI\n\n,\n\n​\n\ngetWebAuthenticationUrl,\n\n// 生成授权页面URL的工具函数\n\n​\n\ngetWebOAuthToken,\n\n// 用授权码换token的工具函数\n\n​\n\nrefreshOAuthToken,\n\n// 刷新token的工具函数\n\n​\n\nCOZE_CN_BASE_URL\n\n​\n\n}\n\nfrom\n\n'@coze/api'\n\n;\n\n​\n\n​\n\n// 从环境变量获取OAuth应用参数\n\n​\n\nconst\n\nclientId = process.\n\nenv\n\n.\n\nCOZE_CLIENT_ID\n\n;\n\n// OAuth应用的客户端ID，创建 OAuth 应用时获取的客户端 ID。\n\n​\n\nconst\n\nclientSecret = process.\n\nenv\n\n.\n\nCOZE_CLIENT_SECRET\n\n;\n\n// 客户端密钥，请妥善保管该密钥。\n\n​\n\nconst\n\nredirectUrl = process.\n\nenv\n\n.\n\nCOZE_REDIRECT_URL\n\n;\n\n// 重定向地址，创建 OAuth 应用时指定的重定向 URL。\n\n​\n\nconst\n\nbaseURL =\n\nCOZE_CN_BASE_URL\n\n;\n\n// 扣子 OpenAPI 的 Endpoint。\n\n​\n\n​\n\n3.\n\n根据授权码流程，调用\n\n​\n\n获取授权页面 URL\n\n等接口实现授权码流程。\n\n​\n\n授权码流程中，会自动生成一个\n\n扣子\n\n授权页面，然后将其发送给需要授权的用户。\n\n扣子\n\n用户可访问此链接，并根据页面提示完成授权流程。\n\n​\n\n​\n\nJavaScript\n\n复制\n\n// Generate the authentication URL using the provided parameters\n\n​\n\nconst\n\nauthUrl =\n\ngetWebAuthenticationUrl\n\n({\n\n​\n\nclientId,\n\n​\n\nredirectUrl,\n\n​\n\nbaseURL,\n\n​\n\nstate\n\n:\n\n'123'\n\n,\n\n// Set a state parameter for user data\n\n​\n\n});\n\n​\n\n​\n\n4.\n\n用户点击同意授权按钮后，\n\n扣子\n\n网页会将请求重定向到授权链接中配置的重定向地址，并通过 Query 在地址中携带授权码和状态参数。\n\n​\n\n通过授权码（OAuth code）调用\n\n​\n\n获取 OAuth Access Token\n\n接口即可获取 OAuth Access Token。示例代码如下：\n\n​\n\n​\n\nJavaScript\n\n复制\n\n// Get the authorization code from url query\n\n​\n\nconst\n\ncode =\n\nawait\n\ngetCodeFromQuery\n\n();\n\n​\n\nconsole\n\n.\n\nlog\n\n(\n\n'Received code:'\n\n, code);\n\n​\n\n​\n\n// Exchange the authorization code for an OAuth token\n\n​\n\nconst\n\noauthToken =\n\nawait\n\ngetWebOAuthToken\n\n({\n\n​\n\nclientId,\n\n// OAuth应用的客户端ID，创建 OAuth 应用时获取的客户端 ID。\n\n​\n\nclientSecret,\n\n// 客户端密钥，请妥善保管该密钥。\n\n​\n\nredirectUrl,\n\n// 重定向地址，创建 OAuth 应用时指定的重定向 URL。\n\n​\n\nbaseURL,\n\n// 扣子 OpenAPI 的 Endpoint。\n\n​\n\ncode,\n\n​\n\n});\n\n​\n\n​\n\n// Initialize a new Coze API client using the obtained access token\n\n​\n\nconst\n\nclient =\n\nnew\n\nCozeAPI\n\n({\n\n​\n\nbaseURL,\n\n​\n\ntoken\n\n: oauthToken.\n\naccess_token\n\n,\n\n​\n\n});\n\n​\n\n​\n\n// Refresh the OAuth token using the refresh token obtained earlier\n\n​\n\nconst\n\nrefreshedOAuthToken =\n\nawait\n\nrefreshOAuthToken\n\n({\n\n​\n\nclientId,\n\n​\n\nrefreshToken\n\n: oauthToken.\n\nrefresh_token\n\n,\n\n​\n\nclientSecret,\n\n​\n\nbaseURL,\n\n​\n\n});\n\n​\n\n​\n\n配置 OAuth PKCE 授权流程\n\n​\n\n如果选择使用 OAuth PKCE 方式完成授权，可参考以下流程及示例代码。\n\n​\n\n1.\n\n创建 OAuth 应用。\n\n​\n\n具体操作步骤可参考\n\n​\n\nOAuth PKCE\n\n。成功创建 OAuth 应用后，可获得客户端 ID 和重定向地址。\n\n​\n\n2.\n\n在代码中通过环境变量方式设置客户端 ID 和重定向地址。\n\n​\n\n​\n\nJavaScript\n\n复制\n\n// 导入PKCE相关工具\n\n​\n\nimport\n\n{\n\n​\n\nCozeAPI\n\n,\n\n​\n\ngetPKCEAuthenticationUrl,\n\n// 生成PKCE授权URL和codeVerifier\n\n​\n\ngetPKCEOAuthToken,\n\n// 用授权码和codeVerifier换取token\n\n​\n\nrefreshOAuthToken,\n\n// 刷新token\n\n​\n\nCOZE_CN_BASE_URL\n\n,\n\n​\n\n}\n\nfrom\n\n'@coze/api'\n\n;\n\n​\n\n​\n\nconst\n\nclientId = process.\n\nenv\n\n.\n\nCOZE_CLIENT_ID\n\n;\n\n//OAuth应用的客户端ID，创建 OAuth 应用时获取的客户端 ID。\n\n​\n\nconst\n\nredirectUrl = process.\n\nenv\n\n.\n\nCOZE_REDIRECT_URL\n\n;\n\n//重定向地址，创建 OAuth 应用时指定的重定向 URL。\n\n​\n\nconst\n\nbaseURL =\n\nCOZE_CN_BASE_URL\n\n;\n\n//扣子 OpenAPI 的 Endpoint。\n\n​\n\n​\n\n3.\n\n在代码中实现 OAuth PKCE 授权流程。\n\n​\n\n客户端生成一个随机值\n\ncode_verifier\n\n，并根据指定算法将其转换为\n\ncode_challenge\n\n，算法通常使用 SHA-256 算法。然后基于回调地址、\n\ncode_challenge\n\n和\n\ncode_challenge_method\n\n，生成一个授权链接。\n\n​\n\n​\n\nJavaScript\n\n复制\n\n// Generate the PKCE authentication URL and code verifier\n\n​\n\nconst\n\n{ url, codeVerifier } =\n\nawait\n\ngetPKCEAuthenticationUrl\n\n({\n\n​\n\nclientId,\n\n​\n\nredirectUrl,\n\n​\n\nbaseURL,\n\n​\n\nstate\n\n:\n\n'123'\n\n,\n\n// Set a state parameter for user data\n\n​\n\n});\n\n​\n\n​\n\n4.\n\n完成授权。\n\n​\n\n引导用户打开这个授权链接。当用户同意授权时，扣子编程\n\n会将页面重定向到开发者配置的回调地址，开发者可以获取这个 code，换取访问密钥。\n\n​\n\n​\n\nJavaScript\n\n复制\n\n// Get the authorization code from url query\n\n​\n\nconst\n\ncode =\n\nawait\n\ngetCodeFromQuery\n\n();\n\n​\n\nconsole\n\n.\n\nlog\n\n(\n\n'Received code:'\n\n, code);\n\n​\n\n​\n\n// Exchange the authorization code for an OAuth token using PKCE\n\n​\n\nconst\n\noauthToken =\n\nawait\n\ngetPKCEOAuthToken\n\n({\n\n​\n\nclientId,\n\n//OAuth应用的客户端ID，创建 OAuth 应用时获取的客户端 ID。\n\n​\n\nredirectUrl,\n\n//重定向地址，创建 OAuth 应用时指定的重定向 URL。\n\n​\n\nbaseURL,\n\n//扣子 OpenAPI 的 Endpoint。\n\n​\n\ncode,\n\n// 获取的授权码。\n\n​\n\ncodeVerifier,\n\n// 应用程序生成的临时密钥，应用程序通过临时密钥和授权码获取 OAuth 访问令牌。\n\n​\n\n});\n\n​\n\n​\n\n// Initialize a new Coze API client using the obtained access token\n\n​\n\nconst\n\nclient =\n\nnew\n\nCozeAPI\n\n({\n\n​\n\nbaseURL,\n\n​\n\ntoken\n\n: oauthToken.\n\naccess_token\n\n,\n\n​\n\n});\n\n​\n\n​\n\n// Example of how to use the client (commented out)\n\n​\n\n// e.g. client.chat.stream(...);\n\n​\n\n​\n\n// Refresh the OAuth token using the refresh token obtained earlier\n\n​\n\nconst\n\nrefreshedOAuthToken =\n\nawait\n\nrefreshOAuthToken\n\n({\n\n​\n\nclientId,\n\n​\n\nrefreshToken\n\n: oauthToken.\n\nrefresh_token\n\n,\n\n​\n\nbaseURL,\n\n​\n\n});\n\n​\n\n​\n\n配置 OAuth 设备码授权流程\n\n​\n\n如果选择使用 OAuth 设备码方式完成授权，可参考以下流程及示例代码。\n\n​\n\n1.\n\n创建 OAuth 应用。\n\n​\n\n具体操作步骤可参考\n\n​\n\nOAuth 设备授权\n\n。成功创建 OAuth 应用后，可获得客户端 ID。\n\n​\n\n2.\n\n在代码中通过环境变量方式设置客户端 ID。\n\n​\n\n​\n\nJavaScript\n\n复制\n\nimport\n\n{\n\nAPIError\n\n,\n\nCozeAPI\n\n, getDeviceCode, getDeviceToken,\n\nCOZE_CN_BASE_URL\n\n}\n\nfrom\n\n'@coze/api'\n\n;\n\n​\n\n​\n\nconst\n\nclientId = process.\n\nenv\n\n.\n\nCOZE_CLIENT_ID\n\n;\n\n//OAuth应用的客户端ID，创建 OAuth 应用时获取的客户端 ID。\n\n​\n\nconst\n\nbaseURL =\n\nCOZE_CN_BASE_URL\n\n;\n\n​\n\n​\n\n3.\n\n通过 OAuth 设备码授权流程获得访问密钥。\n\n​\n\n应用程序需要调用\n\n扣子\n\nOpenAPI 生成设备代码，以获取\n\nuser_code\n\n和\n\ndevice_code\n\n。通过\n\nuser_code\n\n生成授权链接，并引导用户打开该链接、填写\n\nuser_code\n\n、同意授权。应用程序调用\n\n扣子\n\nOpenAPI，通过\n\ndevice_code\n\n生成访问密钥。\n\n​\n\n如果用户尚未授权或拒绝了授权，接口将抛出异常并返回特定的错误代码。用户同意授权后，接口将成功并返回访问密钥。\n\n​\n\n​\n\nJavaScript\n\n复制\n\n// Get the device code\n\n​\n\nconst\n\ndeviceCode =\n\nawait\n\ngetDeviceCode\n\n({\n\n​\n\nbaseURL,\n\n​\n\nclientId,\n\n​\n\n});\n\n​\n\n// Instruct the user to visit the verification URI and enter the user code\n\n​\n\nconsole\n\n.\n\nlog\n\n(\n\n​\n\n`please open\n\n${deviceCode.verification_uri}\n\nand input the code\n\n${deviceCode.user_code}\n\n`\n\n,\n\n​\n\n);\n\n​\n\n​\n\n4.\n\n应用程序\n\n还需要使用\n\ndevice_code\n\n来轮询\n\n扣子\n\nOpenAPI 以获取访问密钥，接口已经做了封装，设置 poll = true 即可。\n\n​\n\n​\n\nJavaScript\n\n复制\n\nconst\n\ndeviceToken =\n\nawait\n\ngetDeviceToken\n\n({\n\n​\n\nbaseURL,\n\n​\n\nclientId,\n\n​\n\ndeviceCode\n\n: deviceCode.\n\ndevice_code\n\n,\n\n​\n\npoll\n\n:\n\ntrue\n\n,\n\n​\n\n});\n\n​\n\n​\n\n5.\n\n最后，当 Token 失效时，可以通过 refreshOAuthToken 刷新 Token\n\n​\n\n​\n\nJavaScript\n\n复制\n\n// Refresh the access token if it expires\n\n​\n\nconst\n\nrefreshToken = deviceToken.\n\nrefresh_token\n\n;\n\n​\n\nconst\n\nrefreshTokenResult =\n\nawait\n\nrefreshOAuthToken\n\n({\n\n​\n\nbaseURL,\n\n​\n\nclientId,\n\n​\n\nrefreshToken,\n\n​\n\n});\n\n​\n\n​\n\n配置 OAuth JWT 授权流程\n\n​\n\n如果选择使用 OAuth JWT 方式完成授权，可参考以下流程及示例代码。\n\n​\n\n1.\n\n创建 OAuth 应用并授权。\n\n​\n\n具体操作步骤可参考\n\n​\n\nOAuth JWT 授权（开发者）\n\n。成功创建 OAuth 应用后，可获得客户端 ID、公钥和私钥。妥善保管公钥和私钥，以免数据泄露引发安全风险。\n\n​\n\n2.\n\n在代码中通过环境变量方式设置客户端 ID、公钥和私钥。\n\n​\n\n​\n\nJavaScript\n\n复制\n\nimport\n\n{ fileURLToPath }\n\nfrom\n\n'node:url'\n\n;\n\n​\n\nimport\n\n{ dirname, join }\n\nfrom\n\n'node:path'\n\n;\n\n​\n\nimport\n\nfs\n\nfrom\n\n'fs'\n\n;\n\n​\n\n​\n\nimport\n\njwt\n\nfrom\n\n'jsonwebtoken'\n\n;\n\n​\n\nimport\n\n{\n\nCozeAPI\n\n, getJWTToken,\n\nCOZE_CN_BASE_URL\n\n}\n\nfrom\n\n'@coze/api'\n\n;\n\n​\n\n​\n\nconst\n\nbaseURL =\n\nCOZE_CN_BASE_URL\n\n;\n\n​\n\nconst\n\nappId = process.\n\nenv\n\n.\n\nCOZE_APP_ID\n\n;\n\n//OAuth应用的客户端ID，创建 OAuth 应用时获取的客户端 ID。\n\n​\n\nconst\n\nkeyid = process.\n\nenv\n\n.\n\nCOZE_KEY_ID\n\n;\n\n//OAuth 应用的\n\n公钥指纹\n\n，可以在\n\nOAuth 应用\n\n页面找到这个应用，在\n\n操作\n\n列单击编辑图标，进入\n\n配置\n\n页面查看公钥指纹。\n\n​\n\nconst\n\naud = process.\n\nenv\n\n.\n\nCOZE_AUD\n\n;\n\n//扣子 API 的 Endpoint，即\n\napi.coze.cn\n\n。\n\n​\n\n​\n\n3.\n\n应用程序通过公钥和私钥签署 JWT，并通过\n\n扣子\n\n提供的 API 获取访问密钥。\n\n​\n\n​\n\nJavaScript\n\n复制\n\n// Read the private key from a file\n\n​\n\nconst\n\n__filename =\n\nfileURLToPath\n\n(\n\nimport\n\n.\n\nmeta\n\n.\n\nurl\n\n);\n\n​\n\nconst\n\n__dirname =\n\ndirname\n\n(__filename);\n\n​\n\nconst\n\nprivateKey = fs\n\n​\n\n.\n\nreadFileSync\n\n(\n\njoin\n\n(__dirname,\n\n'../../tmp/private_key.pem'\n\n))\n\n​\n\n.\n\ntoString\n\n();\n\n​\n\n​\n\nconst\n\nresult =\n\nawait\n\ngetJWTToken\n\n({\n\n​\n\nbaseURL,\n\n//扣子 OpenAPI 的 Endpoint。\n\n​\n\nappId,\n\n//OAuth应用的客户端ID，创建 OAuth 应用时获取的客户端 ID。\n\n​\n\naud,\n\n//扣子 API 的 Endpoint，即\n\napi.coze.cn\n\n。\n\n​\n\nkeyid,\n\n//OAuth 应用的\n\n公钥指纹。\n\n​\n\nprivateKey,\n\n// 用于签署 JWT 的本地私钥。\n\n​\n\n});\n\n​\n\nconsole\n\n.\n\nlog\n\n(\n\n'getJWTToken'\n\n, result);\n\n​\n\n​\n\n// Initialize a new Coze API client using the obtained access token\n\n​\n\nconst\n\nclient =\n\nnew\n\nCozeAPI\n\n({ baseURL,\n\ntoken\n\n: result.\n\naccess_token\n\n});\n\n​\n\n​\n\n// Example of how to use the client (commented out)\n\n​\n\n// e.g. client.chat.stream(...);\n\n​\n\n​\n\n上一篇\n\n安装 Node.js SDK\n\n下一篇\n\n快速开始",
        "links": []
      },
      "markdown": "| 访问密钥类型​ | 鉴权方式​ | 说明​ | 示例文件​ |\n| 个人访问密钥（PAT）​ | 个人访问密钥（PAT）​​ | Personal Access Token，简称 PAT。扣子编程中生成的个人访问令牌。PAT 生成与使用便捷，适用于测试环境调试等场景。每个令牌可以关联多个空间，并开通指定的接口权限。生成方式可参考​添加个人访问令牌。​ | auth/auth-pat.ts​ |\n| 服务访问令牌（SAT）​ | 服务访问令牌（SAT）​ | Service Access Token（简称 SAT）是以服务身份创建的访问凭证，可长期有效访问扣子资源，通常用于服务/应用程序的身份验证和授权。生成方式可参考​添加服务访问令牌。​SAT 的示例代码与 PAT 通用，可直接参考 PAT 的示例文件。​ | auth/auth-pat.ts​ |\n| OAuth 认证​​ | 授权码授权​( Authorization Code Flow)​ | 适用于有显著前后端之分的应用程序授权场景。其中前端模块负责与用户交互，后端服务处理前端请求，与扣子编程授权服务器和 OpenAPI 交互。​ | auth/auth-oauth-web.ts​ |\n| ​ | PKCE 授权​( Authorization Code Flow with PKCE)​ | 应用程序无后端服务，所有操作都发生在应用程序的前端。​ | auth/auth-oauth-pkce.ts​ |\n| ​ | 设备码授权​( Device Code Flow)​ | 应用程序无后端服务，所有操作都发生在应用程序的 Command Line，且 Command Line 无法提供“同意授权”的操作。​ | auth/auth-oauth-device.ts​ |\n| ​ | JWT 授权​( JWT Flow)​ | 应用程序服务端直接调用扣子编程OpenAPI。​应用程序后端服务代理应用程序自己的用户获取身份凭据，应用程序用户基于凭据直接访问 OpenAPI。​ | auth/auth-oauth-jwt-channel.ts​ |\n\n\n- ​ Bash 复制 export COZE_API_TOKEN=pat_**** ​ ​\n\n\n- ​ JavaScript 复制 import { CozeAPI , COZE_CN_BASE_URL } from '@coze/api' ; ​ ​ // Import token using the environment variable ​ const token = process. env . COZE_API_TOKEN || \"input your coze api token\" ​ ​ // Create a client instance ​ const client = new CozeAPI ({ ​ baseURL : COZE_CN_BASE_URL , //扣子 OpenAPI 的 Endpoint。 ​ token : token, //扣子个人访问令牌。 ​ }); ​ ​\n\n\n- ​ JavaScript 复制 import { CozeAPI , COZE_CN_BASE_URL } from '@coze/api' ; ​ ​ // Import token using the environment variable ​ const token = process. env . COZE_API_TOKEN || \"input your coze api token\" ​ ​ // Access the coze.com service ​ const client = new CozeAPI ({ ​ baseURL : COZE_CN_BASE_URL , ​ token : token, ​ allowPersonalAccessTokenInBrowser : true , // Allow the browers to use PAT ​ }); ​ ​\n\n\n- 具体操作步骤可参考 ​ OAuth 授权码授权 。成功创建 OAuth 应用后，可获得客户端 ID、客户端密钥和重定向地址。请妥善保管客户端密钥，以免数据泄露引发安全风险。 ​\n\n\n- ​ JavaScript 复制 // 导入扣子API工具：授权URL生成、token获取、刷新等方法 ​ import { ​ CozeAPI , ​ getWebAuthenticationUrl, // 生成授权页面URL的工具函数 ​ getWebOAuthToken, // 用授权码换token的工具函数 ​ refreshOAuthToken, // 刷新token的工具函数 ​ COZE_CN_BASE_URL ​ } from '@coze/api' ; ​ ​ // 从环境变量获取OAuth应用参数 ​ const clientId = process. env . COZE_CLIENT_ID ; // OAuth应用的客户端ID，创建 OAuth 应用时获取的客户端 ID。 ​ const clientSecret = process. env . COZE_CLIENT_SECRET ; // 客户端密钥，请妥善保管该密钥。 ​ const redirectUrl = process. env . COZE_REDIRECT_URL ; // 重定向地址，创建 OAuth 应用时指定的重定向 URL。 ​ const baseURL = COZE_CN_BASE_URL ; // 扣子 OpenAPI 的 Endpoint。 ​ ​\n\n\n- 授权码流程中，会自动生成一个 扣子 授权页面，然后将其发送给需要授权的用户。 扣子 用户可访问此链接，并根据页面提示完成授权流程。 ​\n\n- ​ JavaScript 复制 // Generate the authentication URL using the provided parameters ​ const authUrl = getWebAuthenticationUrl ({ ​ clientId, ​ redirectUrl, ​ baseURL, ​ state : '123' , // Set a state parameter for user data ​ }); ​ ​\n\n\n- 通过授权码（OAuth code）调用 ​ 获取 OAuth Access Token 接口即可获取 OAuth Access Token。示例代码如下： ​\n\n- ​ JavaScript 复制 // Get the authorization code from url query ​ const code = await getCodeFromQuery (); ​ console . log ( 'Received code:' , code); ​ ​ // Exchange the authorization code for an OAuth token ​ const oauthToken = await getWebOAuthToken ({ ​ clientId, // OAuth应用的客户端ID，创建 OAuth 应用时获取的客户端 ID。 ​ clientSecret, // 客户端密钥，请妥善保管该密钥。 ​ redirectUrl, // 重定向地址，创建 OAuth 应用时指定的重定向 URL。 ​ baseURL, // 扣子 OpenAPI 的 Endpoint。 ​ code, ​ }); ​ ​ // Initialize a new Coze API client using the obtained access token ​ const client = new CozeAPI ({ ​ baseURL, ​ token : oauthToken. access_token , ​ }); ​ ​ // Refresh the OAuth token using the refresh token obtained earlier ​ const refreshedOAuthToken = await refreshOAuthToken ({ ​ clientId, ​ refreshToken : oauthToken. refresh_token , ​ clientSecret, ​ baseURL, ​ }); ​ ​\n\n\n- 具体操作步骤可参考 ​ OAuth PKCE 。成功创建 OAuth 应用后，可获得客户端 ID 和重定向地址。 ​\n\n\n- ​ JavaScript 复制 // 导入PKCE相关工具 ​ import { ​ CozeAPI , ​ getPKCEAuthenticationUrl, // 生成PKCE授权URL和codeVerifier ​ getPKCEOAuthToken, // 用授权码和codeVerifier换取token ​ refreshOAuthToken, // 刷新token ​ COZE_CN_BASE_URL , ​ } from '@coze/api' ; ​ ​ const clientId = process. env . COZE_CLIENT_ID ; //OAuth应用的客户端ID，创建 OAuth 应用时获取的客户端 ID。 ​ const redirectUrl = process. env . COZE_REDIRECT_URL ; //重定向地址，创建 OAuth 应用时指定的重定向 URL。 ​ const baseURL = COZE_CN_BASE_URL ; //扣子 OpenAPI 的 Endpoint。 ​ ​\n\n\n- 客户端生成一个随机值 code_verifier ，并根据指定算法将其转换为 code_challenge ，算法通常使用 SHA-256 算法。然后基于回调地址、 code_challenge 和 code_challenge_method ，生成一个授权链接。 ​\n\n- ​ JavaScript 复制 // Generate the PKCE authentication URL and code verifier ​ const { url, codeVerifier } = await getPKCEAuthenticationUrl ({ ​ clientId, ​ redirectUrl, ​ baseURL, ​ state : '123' , // Set a state parameter for user data ​ }); ​ ​\n\n\n- 引导用户打开这个授权链接。当用户同意授权时，扣子编程 会将页面重定向到开发者配置的回调地址，开发者可以获取这个 code，换取访问密钥。 ​\n\n- ​ JavaScript 复制 // Get the authorization code from url query ​ const code = await getCodeFromQuery (); ​ console . log ( 'Received code:' , code); ​ ​ // Exchange the authorization code for an OAuth token using PKCE ​ const oauthToken = await getPKCEOAuthToken ({ ​ clientId, //OAuth应用的客户端ID，创建 OAuth 应用时获取的客户端 ID。 ​ redirectUrl, //重定向地址，创建 OAuth 应用时指定的重定向 URL。 ​ baseURL, //扣子 OpenAPI 的 Endpoint。 ​ code, // 获取的授权码。 ​ codeVerifier, // 应用程序生成的临时密钥，应用程序通过临时密钥和授权码获取 OAuth 访问令牌。 ​ }); ​ ​ // Initialize a new Coze API client using the obtained access token ​ const client = new CozeAPI ({ ​ baseURL, ​ token : oauthToken. access_token , ​ }); ​ ​ // Example of how to use the client (commented out) ​ // e.g. client.chat.stream(...); ​ ​ // Refresh the OAuth token using the refresh token obtained earlier ​ const refreshedOAuthToken = await refreshOAuthToken ({ ​ clientId, ​ refreshToken : oauthToken. refresh_token , ​ baseURL, ​ }); ​ ​\n\n\n- 具体操作步骤可参考 ​ OAuth 设备授权 。成功创建 OAuth 应用后，可获得客户端 ID。 ​\n\n\n- ​ JavaScript 复制 import { APIError , CozeAPI , getDeviceCode, getDeviceToken, COZE_CN_BASE_URL } from '@coze/api' ; ​ ​ const clientId = process. env . COZE_CLIENT_ID ; //OAuth应用的客户端ID，创建 OAuth 应用时获取的客户端 ID。 ​ const baseURL = COZE_CN_BASE_URL ; ​ ​\n\n\n- 应用程序需要调用 扣子 OpenAPI 生成设备代码，以获取 user_code 和 device_code 。通过 user_code 生成授权链接，并引导用户打开该链接、填写 user_code 、同意授权。应用程序调用 扣子 OpenAPI，通过 device_code 生成访问密钥。 ​\n\n- 如果用户尚未授权或拒绝了授权，接口将抛出异常并返回特定的错误代码。用户同意授权后，接口将成功并返回访问密钥。 ​\n\n- ​ JavaScript 复制 // Get the device code ​ const deviceCode = await getDeviceCode ({ ​ baseURL, ​ clientId, ​ }); ​ // Instruct the user to visit the verification URI and enter the user code ​ console . log ( ​ `please open ${deviceCode.verification_uri} and input the code ${deviceCode.user_code} ` , ​ ); ​ ​\n\n\n- ​ JavaScript 复制 const deviceToken = await getDeviceToken ({ ​ baseURL, ​ clientId, ​ deviceCode : deviceCode. device_code , ​ poll : true , ​ }); ​ ​\n\n\n- ​ JavaScript 复制 // Refresh the access token if it expires ​ const refreshToken = deviceToken. refresh_token ; ​ const refreshTokenResult = await refreshOAuthToken ({ ​ baseURL, ​ clientId, ​ refreshToken, ​ }); ​ ​\n\n\n\n- ​ JavaScript 复制 import { fileURLToPath } from 'node:url' ; ​ import { dirname, join } from 'node:path' ; ​ import fs from 'fs' ; ​ ​ import jwt from 'jsonwebtoken' ; ​ import { CozeAPI , getJWTToken, COZE_CN_BASE_URL } from '@coze/api' ; ​ ​ const baseURL = COZE_CN_BASE_URL ; ​ const appId = process. env . COZE_APP_ID ; //OAuth应用的客户端ID，创建 OAuth 应用时获取的客户端 ID。 ​ const keyid = process. env . COZE_KEY_ID ; //OAuth 应用的 公钥指纹 ，可以在 OAuth 应用 页面找到这个应用，在 操作 列单击编辑图标，进入 配置 页面查看公钥指纹。 ​ const aud = process. env . COZE_AUD ; //扣子 API 的 Endpoint，即 api.coze.cn 。 ​ ​\n\n\n- ​ JavaScript 复制 // Read the private key from a file ​ const __filename = fileURLToPath ( import . meta . url ); ​ const __dirname = dirname (__filename); ​ const privateKey = fs ​ . readFileSync ( join (__dirname, '../../tmp/private_key.pem' )) ​ . toString (); ​ ​ const result = await getJWTToken ({ ​ baseURL, //扣子 OpenAPI 的 Endpoint。 ​ appId, //OAuth应用的客户端ID，创建 OAuth 应用时获取的客户端 ID。 ​ aud, //扣子 API 的 Endpoint，即 api.coze.cn 。 ​ keyid, //OAuth 应用的 公钥指纹。 ​ privateKey, // 用于签署 JWT 的本地私钥。 ​ }); ​ console . log ( 'getJWTToken' , result); ​ ​ // Initialize a new Coze API client using the obtained access token ​ const client = new CozeAPI ({ baseURL, token : result. access_token }); ​ ​ // Example of how to use the client (commented out) ​ // e.g. client.chat.stream(...); ​ ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/nodejs_getting_started",
      "title": "快速开始",
      "content": {
        "sections": [],
        "full_text": "快速开始\n\n本文介绍如何使用 Node.js SDK 完成\n\n扣子编程\n\n的常用操作。例如初始化 Node.js SDK、创建一个智能体草稿、发布智能体为 API 服务、和智能体对话等。\n\n​\n\n准备工作\n\n​\n\n已安装 Node.js SDK。更多信息，可参见\n\n​\n\n安装 Node.js SDK\n\n。\n\n​\n\n已实现授权流程，并通过环境变量方式配置了访问密钥。详细说明可参考\n\n​\n\n配置访问密钥\n\n。\n\n​\n\n初始化 Node.js SDK\n\n​\n\n初始化 Coze client 之后，才可以向\n\n扣子编程\n\n服务端发送 OpenAPI 请求。初始化时推荐通过环境变量动态获取访问密钥，以免硬编码引发数据安全风险。\n\n​\n\n初始化代码如下：\n\n​\n\n​\n\nJavaScript\n\n复制\n\nimport\n\n{\n\nCozeAPI\n\n,\n\nCOZE_CN_BASE_URL\n\n}\n\nfrom\n\n'@coze/api'\n\n;\n\n​\n\n​\n\n// Import token using the environment variable\n\n​\n\nconst\n\ntoken = process.\n\nenv\n\n.\n\nCOZE_API_TOKEN\n\n||\n\n\"input your coze api token\"\n\n​\n\n​\n\n// Instantiate Coze API client\n\n​\n\nconst\n\nclient =\n\nnew\n\nCozeAPI\n\n({\n\n​\n\nbaseURL\n\n:\n\nCOZE_CN_BASE_URL\n\n,\n\n​\n\ntoken\n\n: token,\n\n​\n\n});\n\n​\n\n​\n\n创建并发布智能体为 API 服务\n\n​\n\n通过 API 方式和智能体对话之前，需要先创建一个智能体，并将其发布为 API 服务。可以在\n\n扣子编程\n\n中创建智能体并发布，也可以通过调用相关的 API 实现。调用 API 创建智能体时，部分配置对应的 API 参数暂未开放，只能为智能体添加知识库等有限的配置。创建智能体的操作步骤可参考\n\n​\n\n搭建一个 AI 助手智能体\n\n，将智能体发布为 API 服务的操作步骤可参考\n\n​\n\n发布智能体为 API 服务\n\n。\n\n​\n\n创建智能体的完整示例代码\n\n，参见\n\nGitHub 示例\n\n。\n\n​\n\n相关 API 接口描述，请参见：\n\n​\n\n​\n\n创建智能体\n\n。\n\n​\n\n​\n\n发布智能体\n\n。\n\n​\n\n示例代码如下：\n\n​\n\n​\n\nJavaScript\n\n复制\n\nimport\n\n{\n\nCozeAPI\n\n,\n\nChatEventType\n\n,\n\nChatStatus\n\n,\n\nCOZE_CN_BASE_URL\n\n}\n\nfrom\n\n'@coze/api'\n\n;\n\n​\n\n​\n\nconst\n\ntoken = process.\n\nenv\n\n.\n\nCOZE_API_TOKEN\n\n;\n\n​\n\nconst\n\nspaceId = process.\n\nenv\n\n.\n\nCOZE_SPACE_ID\n\n;\n\n​\n\nconst\n\nbaseURL =\n\nCOZE_CN_BASE_URL\n\n;\n\n​\n\n​\n\nconst\n\nclient =\n\nnew\n\nCozeAPI\n\n(\n\n{\n\n​\n\nbaseURL\n\n,\n\n​\n\ntoken\n\n,\n\n​\n\n})\n\n;\n\n​\n\n​\n\n// Invoke the create API to create a bot in the draft status\n\n.\n\n​\n\nconst\n\nbot =\n\nawait\n\nclient.\n\nbots\n\n.\n\ncreate\n\n(\n\n{\n\n​\n\nspace_id\n\n: spaceId\n\n,\n\n​\n\nname\n\n:\n\n'\n\n翻译\n\n专家\n\n'\n\n,\n\n​\n\ndescription\n\n:\n\n​\n\n'\n\n能帮你进行\n\n中英互译的专业翻译人员\n\n'\n\n,\n\n​\n\nprompt_info\n\n:\n\n{\n\n​\n\nprompt\n\n:\n\n​\n\n'\n\n你是一名翻译人员，请将以下文本从\n\n英语\n\n翻译\n\n成汉语\n\n'\n\n,\n\n​\n\n}\n\n,\n\n​\n\n})\n\n;\n\n​\n\n​\n\n​\n\n// Call the publish API to publish the bot on the API channel\n\n.\n\n​\n\nconst\n\npublishedBot =\n\nawait\n\nclient.\n\nbots\n\n.\n\npublish\n\n(\n\n{\n\n​\n\nbot_id\n\n: bot.\n\nbot_id\n\n,\n\n​\n\nconnector_ids\n\n: [\n\n'API'\n\n]\n\n,\n\n​\n\n})\n\n;\n\n​\n\n​\n\n发起对话\n\n​\n\n​\n\n发起对话\n\n接口用于向指定智能体发起一次对话。支持在对话时添加对话的上下文消息，以便智能体基于历史消息做出合理的回复。开发者可以按需选择响应方式，即流式或非流式响应。响应方式决定了开发者获取智能体回复的方式。\n\n​\n\n流式响应\n\n：智能体在生成回复的同时，将回复消息以数据流的形式逐条发送给客户端。处理结束后，服务端会返回拼接后完整的智能体回复。详细说明可参考\n\n​\n\n流式响应\n\n。\n\n​\n\n非流式响应\n\n：无论对话是否处理完毕，立即发送响应消息。开发者可以通过接口\n\n​\n\n查看对话详情\n\n口确认本次对话处理结束后，再调用\n\n​\n\n查看对话消息详情\n\n接口查看模型回复等完整响应内容。详细说明可参考\n\n​\n\n非流式响应\n\n。\n\n​\n\n本文档以流式响应为例，演示通过 API 方式和智能体对话相关实例代码。可以查看 Node.js SDK\n\n示例代码目录\n\n，查看 chat 接口的其他实现方式。例如，非流式响应、对话中发送多模态内容等。\n\n​\n\n示例代码如下：\n\n​\n\n​\n\nJavaScript\n\n复制\n\nimport\n\n{\n\nCozeAPI\n\n,\n\nCh\n\natEventType\n\n,\n\nChatStatus\n\n,\n\nCOZE_CN_BASE_URL\n\n,\n\nRoleType\n\n}\n\nfrom\n\n'@coze/api'\n\n;\n\n​\n\n​\n\nconst\n\ntoken = process.\n\nenv\n\n.\n\nCOZE_API_TOKEN\n\n;\n\n​\n\nconst\n\nbotId = process.\n\nenv\n\n.\n\nCOZE_BOT_ID\n\n;\n\n​\n\nconst\n\nbaseURL =\n\nCOZE_CN_BASE_URL\n\n;\n\n​\n\n​\n\nconst\n\nclient =\n\nnew\n\nCozeAPI\n\n({\n\n​\n\nbaseURL,\n\n​\n\ntoken,\n\n​\n\n});\n\n​\n\n​\n\n​\n\nconst\n\nstream =\n\nawait\n\nclient.\n\nchat\n\n.\n\nstream\n\n({\n\n​\n\nbot_id\n\n: botId\n\n,\n\n​\n\nadditional_messages\n\n: [\n\n​\n\n{\n\n​\n\nrole\n\n:\n\nRoleType\n\n.\n\nUser\n\n,\n\n​\n\ncontent\n\n:\n\n'\n\n你好\n\n'\n\n,\n\n​\n\ncontent_type\n\n:\n\n'text'\n\n,\n\n​\n\n},\n\n​\n\n],\n\n​\n\n});\n\n​\n\n​\n\nfor\n\nawait\n\n(\n\nconst\n\npart\n\nof\n\nstream) {\n\n​\n\nif\n\n(part.\n\nevent\n\n===\n\nChatEventType\n\n.\n\nCONVERSATION_MESSAGE_DELTA\n\n) {\n\n​\n\nprocess.\n\nstdout\n\n.\n\nwrite\n\n(part.\n\ndata\n\n.\n\ncontent\n\n);\n\n// Real-time response\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n​\n\n上一篇\n\n配置访问密钥\n\n下一篇\n\nJava SDK 概述",
        "links": []
      },
      "markdown": "- 已安装 Node.js SDK。更多信息，可参见 ​ 安装 Node.js SDK 。 ​\n\n- 已实现授权流程，并通过环境变量方式配置了访问密钥。详细说明可参考 ​ 配置访问密钥 。 ​\n\n- 创建智能体的完整示例代码 ，参见 GitHub 示例 。 ​\n\n- 相关 API 接口描述，请参见： ​\n\n- ​ 创建智能体 。 ​\n\n- ​ 发布智能体 。 ​\n\n- 流式响应 ：智能体在生成回复的同时，将回复消息以数据流的形式逐条发送给客户端。处理结束后，服务端会返回拼接后完整的智能体回复。详细说明可参考 ​ 流式响应 。 ​\n\n- 非流式响应 ：无论对话是否处理完毕，立即发送响应消息。开发者可以通过接口 ​ 查看对话详情 口确认本次对话处理结束后，再调用 ​ 查看对话消息详情 接口查看模型回复等完整响应内容。详细说明可参考 ​ 非流式响应 。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/java_overview",
      "title": "Java SDK 概述",
      "content": {
        "sections": [],
        "full_text": "Java SDK 概述\n\nCoze API SDK for Java 是一个扣子官方提供的 SDK 工具包，你可以通过 Java SDK 将扣子的 OpenAPI 集成到你的应用程序中。Coze Java SDK 支持所有扣子的官方鉴权方式，具备高度的灵活性和高可用性，显著提升 OpenAPI 的使用效率。你可以通过 maven 仓库快速安装 Coze Java SDK，用你的访问密钥初始化 SDK，然后就可以开始安全、高效地通过 OpenAPI 访问你的 AI 智能体。\n\n​\n\nCoze Java SDK 遵循用户友好的设计风格，可简化你的开发工作，且适用于所有技能水平开发者使用。\n\n​\n\n源码地址\n\n​\n\n访问\n\nGitHub\n\n获取 Coze API SDK for Java 源码。\n\n​\n\n注意\n\n从扣子 GitHub 仓库获取的源码和示例代码中，\n\nbase_url\n\n默认设置为域名\n\nCOZE_COM_BASE_URL\n\n，使用源码前应手动将其修改为域名\n\nCOZE_CN_BASE_URL\n\n。\n\n​\n\n​\n\n示例代码\n\n​\n\nCoze Java SDK 提供各种授权方式、各种使用方式的示例代码，便于开发者直接参考使用。\n\n​\n\n说明\n\nCoze Java SDK 支持扣子所有 OpenAPI，对应的 API 文档可参考\n\n​\n\nAPI 介绍\n\n。\n\n​\n\n示例代码将持续更新和补充，各种场景的 Coze Java SDK\n\n最新版本\n\n示例代码可参考\n\nGitHub\n\n。\n\n​\n\n​\n\n常见场景的示例代码及说明如下：\n\n​\n\n​\n\n模块\n\n​\n\n示例文件\n\n​\n\n说明\n\n​\n\n授权\n\n​\n\nTokenAuthExample.java\n\n​\n\n通过个人访问密钥实现 OpenAPI 鉴权。\n\n​\n\n​\n\nWebOAuthExample.java\n\n​\n\n通过 OAuth 授权码方式实现授权与 OpenAPI 鉴权。\n\n​\n\n​\n\nJWTsOauthExample.java\n\n​\n\n通过 OAuth JWT 方式实现授权与 OpenAPI 鉴权。\n\n​\n\n​\n\nPKCEOauthExample.java\n\n​\n\n通过 OAuth PKCE 方式实现授权与 OpenAPI 鉴权。\n\n​\n\n​\n\nDevicesOAuthExample.java\n\n​\n\n通过 OAuth 设备码方式实现授权与 OpenAPI 鉴权。\n\n​\n\n对话\n\n​\n\nChatExample.java\n\n​\n\n发起对话，响应方式为非流式响应。\n\n​\n\n​\n\nStreamChatExample.java\n\n​\n\n发起对话，响应方式为流式响应。\n\n​\n\n​\n\nChatWithImageExample.java\n\n​\n\n发起对话，对话中上传文件，并发送多模态内容。\n\n​\n\n​\n\nSubmitToolOutputExample.java\n\n​\n\n端插件。\n\n​\n\n会话与消息管理\n\n​\n\nCreateConversationExample.java\n\n​\n\n创建会话。\n\n​\n\n​\n\nListConversationsExample.java\n\n​\n\n查询会话列表。\n\n​\n\n​\n\nMessageCrudExample.java\n\n​\n\n创建、更新、删除消息。\n\n​\n\n​\n\nMessageListExample.java\n\n​\n\n查询指定对话中的消息列表。\n\n​\n\n工作流\n\n​\n\nRunWorkflowExample.java\n\n​\n\n运行工作流，响应方式为非流式响应。\n\n​\n\n​\n\nStreamWorkflowExample.java\n\n​\n\n运行工作流，响应方式为流式响应，且工作流中包含问答节点。\n\n​\n\n​\n\nStreamWorkflowChatExample.java\n\n​\n\n运行对话流。\n\n​\n\n​\n\nAsyncRunWorkflowExample.java\n\n​\n\n异步运行工作流。\n\n​\n\n智能体管理\n\n​\n\nBotPublishExample.java\n\n​\n\n创建一个草稿状态的智能体，更新智能体，并发布智能体为 API 服务。\n\n​\n\n语音\n\n​\n\nAudioRoomsCreateExample.java\n\n​\n\nRTC 音视频通话场景中，创建音视频房间。\n\n​\n\n​\n\nSpeechCreateExample.java\n\n​\n\n语音合成，将文本转为语音，并将生成的语音保存为音频文件。\n\n​\n\n​\n\nCreateTranscriptionExample.java\n\n​\n\n语音识别，将指定音频文件转录为文本。\n\n​\n\n​\n\nVoiceCloneExample.java\n\n​\n\n克隆音色。\n\n​\n\n​\n\nVoiceListExample.java\n\n​\n\n查询音色列表。\n\n​\n\nWebSocket 语音通话\n\n​\n\nChatExample.java\n\n​\n\nWebSocket 语音通话。\n\n​\n\n​\n\nWebsocketAudioSpeechExample.java\n\n​\n\n语音合成，将文本转为语音，并将生成的语音保存为音频文件。\n\n​\n\n​\n\nWebsocketTranscriptionsExample.java\n\n​\n\n语音识别，将指定音频文件转录为文本。\n\n​\n\n工作空间\n\n​\n\nListWorkspaceExample.java\n\n​\n\n查询工作空间列表。\n\n​\n\n知识库\n\n​\n\nDatasetCrudExample.java\n\n​\n\n创建、更新和删除知识库。\n\n​\n\n​\n\nDatasetListExample.java\n\n​\n\n查询指定工作空间下的知识库。\n\n​\n\n​\n\ndatasets/image\n\n​\n\n图片知识库管理，包含：\n\n​\n\n上传图片类型的知识库文件。\n\n​\n\n更新知识库的图片描述。\n\n​\n\n查看知识库图片列表。\n\n​\n\n​\n\ndatasets/document\n\n​\n\n文本知识库管理，包含：\n\n​\n\n上传文本类型的知识库文件。\n\n​\n\n查询、修改和删除文本知识库文件。\n\n​\n\n文件\n\n​\n\nFileExample.java\n\n​\n\n文件上传，包含：\n\n​\n\n文件上传。\n\n​\n\n获取文件详情。\n\n​\n\n变量\n\n​\n\nVariableExample.java\n\n​\n\n变量管理，包含：\n\n​\n\n获取用户变量的值。\n\n​\n\n设置用户变量的值。\n\n​\n\n复制模板\n\n​\n\nTemplateDuplicateExample.java\n\n​\n\n复制商店中的模板到指定工作空间。\n\n​\n\n账单和权益额度\n\n​\n\nbenefit/bill/CrudExample.java\n\n​\n\n导出账单并查询账单文件。\n\n​\n\n​\n\nbenefit/limitations/CrudExample.java\n\n​\n\n创建、查询、更新硬件设备的权益额度。\n\n​\n\n异常处理\n\n​\n\nHandlerExceptionExample.java\n\n​\n\n处理 API 异常。\n\n​\n\n客户端管理\n\n​\n\nHandlerExceptionExample.java\n\n​\n\n修改日志级别。\n\n​\n\n​\n\nSetRequestTimeoutExample.java\n\n​\n\n设置请求超时时间。\n\n​\n\n​\n\nInitServiceExample.java\n\n​\n\n初始化客户端。\n\n​\n\n​\n\n异常处理\n\n​\n\n当调用 API 失败时，SDK 会抛出\n\nCozeAPIException\n\n异常；当鉴权失败的时候，SDK 会抛出\n\nCozeAuthException\n\n异常。开发者可以根据自己的需求捕获对应的异常，其中\n\nCozeAPIException\n\n异常会获取到异常接口的错误码，API 错误码的相关说明及处理方式可参考\n\n​\n\n错误码\n\n。\n\n​\n\n上一篇\n\n快速开始\n\n下一篇\n\n安装 Java SDK",
        "links": []
      },
      "markdown": "- Coze Java SDK 支持扣子所有 OpenAPI，对应的 API 文档可参考 ​ API 介绍 。 ​\n\n- 示例代码将持续更新和补充，各种场景的 Coze Java SDK 最新版本 示例代码可参考 GitHub 。 ​\n\n| 模块​ | 示例文件​ | 说明​ |\n| 授权​ | TokenAuthExample.java​ | 通过个人访问密钥实现 OpenAPI 鉴权。​ |\n| ​ | WebOAuthExample.java​ | 通过 OAuth 授权码方式实现授权与 OpenAPI 鉴权。​ |\n| ​ | JWTsOauthExample.java​ | 通过 OAuth JWT 方式实现授权与 OpenAPI 鉴权。​ |\n| ​ | PKCEOauthExample.java​ | 通过 OAuth PKCE 方式实现授权与 OpenAPI 鉴权。​ |\n| ​ | DevicesOAuthExample.java​ | 通过 OAuth 设备码方式实现授权与 OpenAPI 鉴权。​ |\n| 对话​ | ChatExample.java​ | 发起对话，响应方式为非流式响应。​ |\n| ​ | StreamChatExample.java​ | 发起对话，响应方式为流式响应。​ |\n| ​ | ChatWithImageExample.java​ | 发起对话，对话中上传文件，并发送多模态内容。​ |\n| ​ | SubmitToolOutputExample.java​ | 端插件。​ |\n| 会话与消息管理​ | CreateConversationExample.java​ | 创建会话。​ |\n| ​ | ListConversationsExample.java​ | 查询会话列表。​ |\n| ​ | MessageCrudExample.java​ | 创建、更新、删除消息。​ |\n| ​ | MessageListExample.java​ | 查询指定对话中的消息列表。​ |\n| 工作流​ | RunWorkflowExample.java​ | 运行工作流，响应方式为非流式响应。​ |\n| ​ | StreamWorkflowExample.java​ | 运行工作流，响应方式为流式响应，且工作流中包含问答节点。​ |\n| ​ | StreamWorkflowChatExample.java​ | 运行对话流。​ |\n| ​ | AsyncRunWorkflowExample.java​ | 异步运行工作流。​ |\n| 智能体管理​ | BotPublishExample.java​ | 创建一个草稿状态的智能体，更新智能体，并发布智能体为 API 服务。​ |\n| 语音​ | AudioRoomsCreateExample.java​ | RTC 音视频通话场景中，创建音视频房间。​ |\n| ​ | SpeechCreateExample.java​ | 语音合成，将文本转为语音，并将生成的语音保存为音频文件。​ |\n| ​ | CreateTranscriptionExample.java​ | 语音识别，将指定音频文件转录为文本。​ |\n| ​ | VoiceCloneExample.java​ | 克隆音色。​ |\n| ​ | VoiceListExample.java​ | 查询音色列表。​ |\n| WebSocket 语音通话​ | ChatExample.java​ | WebSocket 语音通话。​ |\n| ​ | WebsocketAudioSpeechExample.java​ | 语音合成，将文本转为语音，并将生成的语音保存为音频文件。​ |\n| ​ | WebsocketTranscriptionsExample.java​ | 语音识别，将指定音频文件转录为文本。​ |\n| 工作空间​ | ListWorkspaceExample.java​ | 查询工作空间列表。​ |\n| 知识库​ | DatasetCrudExample.java​ | 创建、更新和删除知识库。​ |\n| ​ | DatasetListExample.java​ | 查询指定工作空间下的知识库。​ |\n| ​ | datasets/image​ | 图片知识库管理，包含：​上传图片类型的知识库文件。​更新知识库的图片描述。​查看知识库图片列表。​ |\n| ​ | datasets/document​ | 文本知识库管理，包含：​上传文本类型的知识库文件。​查询、修改和删除文本知识库文件。​ |\n| 文件​ | FileExample.java​ | 文件上传，包含：​文件上传。​获取文件详情。​ |\n| 变量​ | VariableExample.java​ | 变量管理，包含：​获取用户变量的值。​设置用户变量的值。​ |\n| 复制模板​ | TemplateDuplicateExample.java​ | 复制商店中的模板到指定工作空间。​ |\n| 账单和权益额度​ | benefit/bill/CrudExample.java​ | 导出账单并查询账单文件。​ |\n| ​ | benefit/limitations/CrudExample.java​ | 创建、查询、更新硬件设备的权益额度。​ |\n| 异常处理​ | HandlerExceptionExample.java​ | 处理 API 异常。​ |\n| 客户端管理​ | HandlerExceptionExample.java​ | 修改日志级别。​ |\n| ​ | SetRequestTimeoutExample.java​ | 设置请求超时时间。​ |\n| ​ | InitServiceExample.java​ | 初始化客户端。​ |\n\n- 上传图片类型的知识库文件。 ​\n\n- 更新知识库的图片描述。 ​\n\n- 查看知识库图片列表。 ​\n\n- 上传文本类型的知识库文件。 ​\n\n- 查询、修改和删除文本知识库文件。 ​\n\n- 文件上传。 ​\n\n- 获取文件详情。 ​\n\n- 获取用户变量的值。 ​\n\n- 设置用户变量的值。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/java_installation",
      "title": "安装 Java SDK",
      "content": {
        "sections": [],
        "full_text": "安装 Java SDK\n\n使用 Coze Java SDK 之前，你需要先参考本文档安装 Java SDK。\n\n​\n\n环境准备\n\n​\n\nCoze Java SDK 适用于Java 1.8 及以上版本。安装 Java SDK 之前，建议执行以下命令确认你已安装 1.8及以上版本的 Java。\n\n​\n\n​\n\nBash\n\n复制\n\n# 查看 Java 版本\n\n​\n\njava -version\n\n​\n\n​\n\n# 回显信息显示已安装 1.8.0_372 版本\n\n​\n\nopenjdk version\n\n\"1.8.0_372\"\n\n​\n\nOpenJDK Runtime Environment (build 1.8.0_372-bre_2023_04_25_03_23-b00)\n\n​\n\nOpenJDK 64-Bit Server VM (build 25.372-b00, mixed mode)\n\n​\n\n​\n\n安装 SDK\n\n​\n\n说明\n\n安装 Coze Java SDK 时，默认安装最新版本。你也可以\n\n点击此处\n\n查看 Coze Java SDK 已发布的所有历史版本。更多信息，请参见\n\nREADME\n\n。\n\n​\n\n​\n\n你可以通过以下方式安装 Coze Java SDK。\n\n​\n\n在 Maven 项目中添加依赖\n\n​\n\n在 Maven 工程中使用 Coze Java SDK，只需在\n\npom.xml\n\n中加入相应依赖即可。以在 <dependencies> 中加入依赖为例：\n\n​\n\n​\n\nXML\n\n复制\n\n<\n\ndependency\n\n>\n\n​\n\n<\n\ngroupId\n\n>\n\ncom.coze\n\n</\n\ngroupId\n\n>\n\n​\n\n<\n\nartifactId\n\n>\n\ncoze-api\n\n</\n\nartifactId\n\n>\n\n​\n\n<\n\nversion\n\n>\n\nLATEST\n\n</\n\nversion\n\n>\n\n​\n\n</\n\ndependency\n\n>\n\n​\n\n​\n\n在 Gradle 中添加依赖\n\n​\n\n在项目的根目录下打开\n\nbuild.gradle\n\n文件，在\n\ndependencies\n\n模块中添加 Coze Java SDK 的依赖。\n\n​\n\n​\n\nGroovy\n\n复制\n\ndependencies {\n\n​\n\nimplementation\n\n'com.coze:coze-api:+'\n\n​\n\n}\n\n​\n\n​\n\n上一篇\n\nJava SDK 概述\n\n下一篇\n\n配置访问密钥",
        "links": []
      },
      "markdown": ""
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/java_access_token",
      "title": "配置访问密钥",
      "content": {
        "sections": [],
        "full_text": "配置访问密钥\n\n通过 Java SDK 方式调用扣子编程 OpenAPI 时，需要在 SDK 请求中配置访问密钥，用于身份信息认证和权限校验。扣子编程 OpenAPI 提供个人访问密钥和 OAuth 两种鉴权方式，你可以选择当前业务场景适合的鉴权方式，并获取对应的访问密钥。\n\n​\n\n对于 OAuth 授权码等授权方式，Coze Java SDK 已经封装了这部分代码，并处理了不同的返回错误代码，简化你的操作。\n\n​\n\n配置方式\n\n​\n\n扣子编程 OpenAPI 目前支持的鉴权方式如下。\n\n​\n\n​\n\n访问密钥类型\n\n​\n\n鉴权方式\n\n​\n\n说明\n\n​\n\n示例文件\n\n​\n\n个人访问密钥（PAT）\n\n​\n\n个人访问密钥（PAT）\n\n​\n\nPersonal Access Token，简称 PAT。扣子编程中生成的个人访问令牌。PAT 生成与使用便捷，适用于测试环境调试等场景。每个令牌可以关联多个空间，并开通指定的接口权限。生成方式可参考\n\n添加个人访问令牌\n\n。\n\n​\n\nTokenAuthExample.java\n\n​\n\n服务访问令牌（SAT）\n\n​\n\n服务访问令牌（SAT）\n\n​\n\nService Access Token（简称 SAT）是以服务身份创建的访问凭证，可\n\n长期有效\n\n访问扣子编程资源，通常用于服务/应用程序的身份验证和授权。SAT 与 OAuth JWT 鉴权方式相比，具有更长的有效期（可设置为永久有效），操作简单，能够有效简化授权流程。生成方式可参考\n\n​\n\n添加服务访问令牌\n\n。\n\n​\n\nSAT 的示例代码与 PAT 通用，可直接参考 PAT 的示例文件。\n\n​\n\n​\n\nOAuth 认证\n\n​\n\n​\n\n授权码授权\n\n​\n\n（Authorization Code Flow）\n\n​\n\n适用于有显著前后端之分的应用程序授权场景。其中前端模块负责与用户交互，后端服务处理前端请求，与扣子授权服务器和 OpenAPI 交互。 实现流程可参考\n\n​\n\nOAuth 授权码授权\n\n。\n\n​\n\nWebOAuthExample.java\n\n​\n\n​\n\nPKCE 授权\n\n​\n\n（Authorization Code Flow with PKCE）\n\n​\n\n应用程序无后端服务，所有操作都发生在应用程序的前端。 实现流程可参考\n\n​\n\nOAuth PKCE\n\n。\n\n​\n\nPKCEOauthExample.java\n\n​\n\n​\n\n设备码授权\n\n​\n\n（Device Code Flow）\n\n​\n\n应用程序无后端服务，所有操作都发生在应用程序的 Command Line，且 Command Line 无法提供“同意授权”的操作。 实现流程可参考\n\n​\n\nOAuth 设备授权\n\n。\n\n​\n\nDevicesOAuthExample.java\n\n​\n\n​\n\nJWT 授权\n\n​\n\n（JWT Flow）\n\n​\n\n应用程序服务端直接调用扣子编程 OpenAPI。\n\n​\n\n应用程序后端服务代理应用程序自己的用户获取身份凭据，应用程序用户基于凭据直接访问 OpenAPI。 实现流程可参考\n\n​\n\nOAuth JWT 授权（开发者）\n\n。\n\n​\n\nJWTsOauthExample.java\n\n​\n\n​\n\n配置个人访问密钥（PAT）\n\n​\n\n如果选择使用个人访问密钥鉴权，你需要先申请一个个人访问密钥，并添加指定空间和权限。操作步骤可参考\n\n添加个人访问令牌\n\n。完整的示例代码请参见\n\nTokenAuthExample.java\n\n。\n\n​\n\n扣子编程建议你通过环境变量的方式管理访问密钥，避免在代码中通过硬编码方式进行编程，以免密钥泄露、引发安全风险。配置环境变量之后，您可以在不修改代码的情况下，将动态的鉴权参数传递到对应的函数，实现便捷安全的身份认证。\n\n​\n\n1.\n\n设置环境变量。\n\n​\n\n其中 COZE_API_TOKEN 是扣子编程中申请的个人访问密钥。\n\n​\n\n​\n\nShell\n\n复制\n\nexport COZE_API_TOKEN=pat_****\n\n​\n\n​\n\n2.\n\n初始化客户端。\n\n​\n\n示例代码如下：\n\n​\n\n​\n\nJava\n\n复制\n\nimport\n\ncom.coze.openapi.service.auth.TokenAuth;\n\n​\n\nimport\n\ncom.coze.openapi.service.config.Consts;\n\n​\n\nimport\n\ncom.coze.openapi.service.service.CozeAPI;\n\n​\n\nimport\n\nokhttp3.OkHttpClient;\n\n​\n\n​\n\npublic\n\nclass\n\nInitClientExample\n\n{\n\n​\n\npublic\n\nstatic\n\nvoid\n\nmain\n\n(String[] args)\n\n{\n\n​\n\n// 从环境变量中获取个人访问密钥（PAT）\n\n​\n\n// 推荐使用环境变量管理密钥，避免硬编码导致泄露\n\n​\n\nString\n\ntoken\n\n=\n\nSystem.getenv(\n\n\"COZE_API_TOKEN\"\n\n);\n\n​\n\n​\n\n// 创建TokenAuth对象，传入PAT作为身份认证凭据\n\n​\n\nTokenAuth\n\nauthCli\n\n=\n\nnew\n\nTokenAuth\n\n(token);\n\n​\n\n​\n\n// 构建CozeAPI客户端实例，配置连接参数\n\n​\n\nCozeAPI\n\ncoze\n\n=\n\n​\n\nnew\n\nCozeAPI\n\n.Builder()\n\n​\n\n.baseURL(Consts.COZE_CN_BASE_URLCOZE_COM_BASE_URL)\n\n// 设置扣子编程OpenAPI的 Endpoint\n\n​\n\n.auth(authCli)\n\n// 绑定鉴权对象，用于请求时的身份验证\n\n​\n\n.client(\n\nnew\n\nOkHttpClient\n\n.Builder().build())\n\n// 配置HTTP客户端（使用默认OkHttpClient）\n\n​\n\n.build();\n\n// 完成客户端初始化\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n配置 OAuth 授权码流程\n\n​\n\n如果选择使用 OAuth 授权码方式完成授权，可参考以下流程及示例代码。完整的示例代码请参见\n\nWebOAuthExample.java\n\n。\n\n​\n\n1.\n\n创建 OAuth 应用。\n\n​\n\n具体操作步骤可参考\n\n​\n\nOAuth 授权码授权\n\n。成功创建 OAuth 应用后，你将获得客户端 ID、客户端密钥和重定向地址。你需要妥善保管客户端密钥，以免数据泄露引发安全风险。\n\n​\n\n2.\n\n在代码中通过环境变量方式设置客户端 ID、客户端密钥和重定向地址。\n\n​\n\n​\n\nJava\n\n复制\n\npublic\n\nclass\n\nPKCEOauthExample\n\n{\n\n​\n\npublic\n\nstatic\n\nvoid\n\nmain\n\n(String[] args)\n\n{\n\n​\n\n// 从环境变量中获取PKCE OAuth应用的重定向地址，创建PKCE类型OAuth应用时配置的前端回调地址\n\n​\n\nString\n\nredirectURI\n\n=\n\nSystem.getenv(\n\n\"COZE_PKCE_OAUTH_REDIRECT_URI\"\n\n);\n\n​\n\n​\n\n// 从环境变量中获取PKCE OAuth应用的客户端ID，创建PKCE类型OAuth应用时平台生成的唯一标识符\n\n​\n\nString\n\nclientID\n\n=\n\nSystem.getenv(\n\n\"COZE_PKCE_OAUTH_CLIENT_ID\"\n\n);\n\n​\n\n​\n\n// 创建PKCEOAuthClient实例，配置应用信息\n\n​\n\nPKCEOAuthClient\n\noauth\n\n=\n\n​\n\nnew\n\nPKCEOAuthClient\n\n.PKCEOAuthBuilder()\n\n​\n\n.clientID(clientID)\n\n// 传入客户端ID，即从环境变量获取的PKCE应用客户端ID\n\n​\n\n// 设置扣子授权服务器端点，由扣子编程固定提供的授权服务地址\n\n​\n\n.baseURL(Consts.COZE_CN_BASE_URLCOZE_COM_BASE_URL)\n\n​\n\n.build();\n\n​\n\n​\n\n​\n\n/*\n\n​\n\n* 生成PKCE授权链接\n\n​\n\n* 1. SDK自动生成code_verifier和code_challenge\n\n​\n\n* 2. 授权链接包含code_challenge和回调地址，用于引导用户授权\n\n​\n\n*/\n\n​\n\n// 生成授权链接及code_verifier，返回包含授权URL和code_verifier的响应对象\n\n​\n\nGetPKCEAuthURLResp\n\noauthURL\n\n=\n\n​\n\noauth.genOAuthURL(\n\n​\n\nredirectURI,\n\n// 重定向地址，即从环境变量获取的PKCE应用回调地址\n\n​\n\n\"state\"\n\n,\n\n// 状态参数，用于防CSRF攻击，自定义字符串\n\n​\n\n// 指定code_challenge的生成算法，固定使用SHA-256算法（S256）\n\n​\n\nPKCEOAuthClient.CodeChallengeMethod.S256\n\n​\n\n);\n\n​\n\nSystem.out.println(oauthURL);\n\n​\n\n​\n\n// 打印SDK生成的code_verifier，SDK自动生成的随机字符串，用于后续换取令牌时验证\n\n​\n\nSystem.out.println(oauthURL.getCodeVerifier());\n\n​\n\n​\n\n// 打印用户需要访问的授权链接，用户授权页面的URL，从GetPKCEAuthURLResp对象获取\n\n​\n\nSystem.out.println(oauthURL.getAuthorizationURL());\n\n​\n\n​\n\n​\n\n/*\n\n​\n\n* 用户授权后，扣子会重定向到redirectURI，并在Query中携带code（授权码）\n\n​\n\n*/\n\n​\n\n// 模拟从重定向地址Query中获取的授权码，用户授权后从redirectURI的Query参数（code）中提取\n\n​\n\nString\n\ncode\n\n=\n\n\"mock code\"\n\n;\n\n​\n\n​\n\n/*\n\n​\n\n* 用授权码和code_verifier换取访问令牌\n\n​\n\n* 必须传入genOAuthURL返回的code_verifier，否则验证失败\n\n​\n\n*/\n\n​\n\nOAuthToken\n\nresp\n\n=\n\noauth.getAccessToken(code, redirectURI, oauthURL.getCodeVerifier());\n\n​\n\nSystem.out.println(resp);\n\n// 打印令牌信息\n\n​\n\n​\n\n// 使用access_token初始化Coze客户端\n\n​\n\nCozeAPI\n\ncoze\n\n=\n\n​\n\nnew\n\nCozeAPI\n\n.Builder()\n\n​\n\n// 用access_token创建鉴权对象，access_token从OAuthToken对象获取\n\n​\n\n.auth(\n\nnew\n\nTokenAuth\n\n(resp.getAccessToken()))\n\n​\n\n.baseURL(cozeAPIBase)\n\n// 设置OpenAPI服务端点\n\n​\n\n.build();\n\n​\n\n​\n\n// 令牌过期时，使用refresh_token刷新，refresh_token从OAuthToken对象获取\n\n​\n\nresp = oauth.refreshToken(resp.getRefreshToken());\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n3.\n\n授权码流程中，会自动生成一个扣子编程授权页面，然后将其发送给需要授权的用户。扣子用户可访问此链接，并根据页面提示完成授权流程。\n\n​\n\n​\n\nJava\n\n复制\n\nString\n\noauthURL\n\n=\n\noauth.getOAuthURL(redirectURI,\n\nnull\n\n)\n\n;\n\n​\n\nSystem.out.println(oauthURL)\n\n;\n\n​\n\n​\n\n/\n\n*\n\n​\n\n* To restrict access to a specific WorkSpace, you can specify the WorkSpaceID when obtaining the URL.\n\n​\n\noauthURL = oauth.getOAuthURL(redirectURI, null, \"workspaceID\")\n\n;\n\n​\n\nSystem.out.println(oauthURL)\n\n;\n\n​\n\n* *\n\n/\n\n​\n\n​\n\n4.\n\n用户点击同意授权按钮后，扣子编程网页会将请求重定向到授权链接中配置的重定向地址，并通过 Query 在地址中携带授权码和状态参数。\n\n​\n\n通过授权码（OAuth code）调用 OpenAPI 接口即可获取 OAuth Access Token。示例代码如下：\n\n​\n\n​\n\nJava\n\n复制\n\n/*\n\n​\n\n* 授权流程说明：\n\n​\n\n* 1. 前端引导用户访问扣子授权页面，用户完成授权后，扣子会重定向到redirectURI\n\n​\n\n* 2. 重定向地址的Query参数中会携带code（授权码）和state（状态参数，用于防CSRF）\n\n​\n\n* 3. 后端从Query中提取code，用于换取访问令牌\n\n​\n\n*/\n\n​\n\n// 模拟从重定向地址的Query中获取到的授权码，用户授权后从redirectURI的Query参数（code）中提取\n\n​\n\nString\n\ncode\n\n=\n\n\"mock code\"\n\n;\n\n​\n\n​\n\n/*\n\n​\n\n* 用授权码换取访问令牌（access_token）\n\n​\n\n* 调用getAccessToken方法，传入code和redirectURI（需与授权时使用的地址一致）\n\n​\n\n*/\n\n​\n\nOAuthToken\n\nresp\n\n=\n\noauth.getAccessToken(code, redirectURI);\n\n​\n\nSystem.out.println(resp);\n\n// 打印令牌信息，包含访问令牌、过期时间等\n\n​\n\n​\n\n/*\n\n​\n\n* 获取请求日志ID，用于问题排查，从令牌响应对象中通过getLogID()方法获取\n\n​\n\n*/\n\n​\n\nSystem.out.println(resp.getLogID());\n\n​\n\n​\n\n// 使用获取到的access_token初始化Coze客户端\n\n​\n\nCozeAPI\n\ncoze\n\n=\n\n​\n\nnew\n\nCozeAPI\n\n.Builder()\n\n​\n\n// 用access_token创建鉴权对象，access_token从OAuthToken对象的getAccessToken()方法获取\n\n​\n\n.auth(\n\nnew\n\nTokenAuth\n\n(resp.getAccessToken()))\n\n​\n\n// 设置OpenAPI服务端点，由扣子编程固定提供的OpenAPI访问地址\n\n​\n\n.baseURL(cozeAPIBase)\n\n​\n\n.build();\n\n​\n\n​\n\n/*\n\n​\n\n* 令牌过期时，使用refresh_token刷新令牌，refresh_token从OAuthToken对象的getRefreshToken()方法获取\n\n​\n\n*/\n\n​\n\nresp = oauth.refreshToken(resp.getRefreshToken());\n\n​\n\n​\n\n配置 OAuth PKCE 授权流程\n\n​\n\n如果选择使用 OAuth PKCE 方式完成授权，可参考以下流程及示例代码。完整的示例代码请参见\n\nPKCEOauthExample.java\n\n。\n\n​\n\n1.\n\n创建 OAuth 应用。\n\n​\n\n具体操作步骤可参考\n\n​\n\nOAuth PKCE\n\n。成功创建 OAuth 应用后，你将获得客户端 ID 和重定向地址。\n\n​\n\n2.\n\n在代码中通过环境变量方式设置客户端 ID 和重定向地址。\n\n​\n\n​\n\nJava\n\n复制\n\npublic\n\nstatic\n\nvoid\n\nmain\n\n(String[] args)\n\n{\n\n​\n\n// 从环境变量中获取PKCE OAuth应用的重定向地址，创建PKCE类型OAuth应用时配置的前端回调地址\n\n​\n\nString\n\nredirectURI\n\n=\n\nSystem.getenv(\n\n\"COZE_PKCE_OAUTH_REDIRECT_URI\"\n\n);\n\n​\n\n​\n\n// 从环境变量中获取PKCE OAuth应用的客户端ID，创建PKCE类型OAuth应用时平台生成的唯一标识符\n\n​\n\nString\n\nclientID\n\n=\n\nSystem.getenv(\n\n\"COZE_PKCE_OAUTH_CLIENT_ID\"\n\n);\n\n​\n\n​\n\n// 创建PKCEOAuthClient实例，配置应用信息\n\n​\n\nPKCEOAuthClient\n\noauth\n\n=\n\n​\n\nnew\n\nPKCEOAuthClient\n\n.PKCEOAuthBuilder()\n\n​\n\n.clientID(clientID)\n\n// 传入客户端ID，即从环境变量获取的PKCE应用客户端ID\n\n​\n\n// 设置扣子授权服务器端点，由扣子编程固定提供的授权服务地址\n\n​\n\n.baseURL(Consts.COZE_CN_BASE_URLCOZE_COM_BASE_URL)\n\n​\n\n.build();\n\n​\n\n​\n\n3.\n\n在代码中实现 OAuth PKCE 授权流程。\n\n​\n\n客户端生成一个随机值 code_verifier，并根据指定算法将其转换为 code_challenge，算法通常使用 SHA-256 算法。然后基于回调地址、code_challenge 和 code_challenge_method，生成一个授权链接。\n\n​\n\n其中 code_verifier 会由 SDK 生成，并与 URL 一起返回给调用方。\n\n​\n\n​\n\nJava\n\n复制\n\nGetPKCEAuthURLResp\n\noauthURL\n\n=\n\n​\n\noauth.genOAuthURL(redirectURI,\n\n\"state\"\n\n, PKCEOAuthClient.CodeChallengeMethod.S256);\n\n​\n\nSystem.out.println(oauthURL);\n\n​\n\n//\n\nThe code verifier generated by the SDK\n\n​\n\nSystem.out.println(oauthURL.getCodeVerifier());\n\n​\n\n// URL that users need to click.\n\n​\n\nSystem.out.println(oauthURL.getAuthorizationURL());\n\n​\n\n​\n\n4.\n\n完成授权。\n\n​\n\n开发者应该引导用户打开这个授权链接。当用户同意授权时，扣子编程会将页面重定向到开发者配置的回调地址，开发者可以获取这个 code，换取访问密钥。\n\n​\n\n​\n\nJava\n\n复制\n\n/*\n\n​\n\nAfter the user clicks the authorization consent button, the coze web page will redirect\n\n​\n\nto the redirect address configured in the authorization link and carry the authorization\n\n​\n\ncode and state parameters in the address via the query string.\n\n​\n\n​\n\nGet from the query of the redirect interface: query.get('code')\n\n​\n\n* */\n\n​\n\nString\n\ncode\n\n=\n\n\"mock code\"\n\n;\n\n​\n\n​\n\n/*\n\n​\n\nAfter obtaining the code after redirection, the interface to exchange the code for a\n\n​\n\ntoken can be invoked to generate the coze access_token of the authorized user.\n\n​\n\nThe developer should use code verifier returned by genOAuthURL() method\n\n​\n\n* */\n\n​\n\nOAuthToken\n\nresp\n\n=\n\noauth.getAccessToken(code, redirectURI, oauthURL.getCodeVerifier());\n\n​\n\nSystem.out.println(resp);\n\n​\n\n​\n\n// use the access token to init Coze client\n\n​\n\nCozeAPI\n\ncoze\n\n=\n\n​\n\nnew\n\nCozeAPI\n\n.Builder()\n\n​\n\n.auth(\n\nnew\n\nTokenAuth\n\n(resp.getAccessToken()))\n\n​\n\n.baseURL(cozeAPIBase)\n\n​\n\n.build();\n\n​\n\n// When the token expires, you can also refresh and re-obtain the token\n\n​\n\nresp = oauth.refreshToken(resp.getRefreshToken());\n\n​\n\n​\n\n配置 OAuth 设备码授权流程\n\n​\n\n如果选择使用 OAuth 设备码方式完成授权，可参考以下流程及示例代码。完整的示例代码请参见\n\nDevicesOAuthExample.java\n\n。\n\n​\n\n1.\n\n创建 OAuth 应用。\n\n​\n\n具体操作步骤可参考\n\n​\n\nOAuth 设备授权\n\n。成功创建 OAuth 应用后，你将获得客户端 ID。\n\n​\n\n2.\n\n在代码中通过环境变量方式设置客户端 ID。\n\n​\n\n​\n\nJava\n\n复制\n\npublic\n\nstatic\n\nvoid\n\nmain\n\n(String[] args)\n\n{\n\n​\n\n// 从环境变量获取设备授权的客户端ID，创建设备码类型OAuth应用时平台生成的唯一标识符\n\n​\n\nString\n\nclientID\n\n=\n\nSystem.getenv(\n\n\"COZE_DEVICE_OAUTH_CLIENT_ID\"\n\n);\n\n​\n\n​\n\n// 创建设备授权客户端实例\n\n​\n\nDeviceOAuthClient\n\noauth\n\n=\n\n​\n\nnew\n\nDeviceOAuthClient\n\n.DeviceOAuthBuilder()\n\n​\n\n.clientID(clientID)\n\n// 传入客户端ID，即从环境变量获取的设备应用客户端ID\n\n​\n\n// 设置授权服务器端点，由扣子编程固定提供的授权服务地址\n\n​\n\n.baseURL(Consts.COZE_CN_BASE_URLCOZE_COM_BASE_URL)\n\n​\n\n.build();\n\n​\n\n​\n\n3.\n\n通过 OAuth 设备码授权流程获得访问密钥。\n\n​\n\n应用程序需要调用扣子编程 OpenAPI 生成设备代码，以获取 user_code 和 device_code。通过 user_code 生成授权链接，并引导用户打开该链接、填写 user_code、同意授权。应用程序调用扣子编程 OpenAPI，通过 device_code 生成访问密钥。\n\n​\n\n如果用户尚未授权或拒绝了授权，接口将抛出异常并返回特定的错误代码。用户同意授权后，接口将成功并返回访问密钥。\n\n​\n\nSDK 已经拼接了 URL，直接将 SDK 返回的 URL 交给用户打开即可。\n\n​\n\n​\n\nJava\n\n复制\n\n/*\n\n​\n\n* 第一步：获取设备码和用户码\n\n​\n\n*/\n\n​\n\n// 获取设备码响应对象，包含设备码、用户码、授权URL等信息\n\n​\n\nDeviceAuthResp\n\ncodeResp\n\n=\n\noauth.getDeviceCode();\n\n​\n\nSystem.out.println(codeResp);\n\n// 打印设备码相关信息\n\n​\n\n​\n\n// 设备码，用于轮询访问令牌，从DeviceAuthResp对象的getDeviceCode()方法获取\n\n​\n\nSystem.out.println(codeResp.getDeviceCode());\n\n​\n\n​\n\n// 用户需要访问的授权页面URL，用户输入user_code的页面地址，从DeviceAuthResp获取\n\n​\n\nSystem.out.println(codeResp.getVerificationURL());\n\n​\n\n​\n\n4.\n\n应用程序还需要使用 device_code 来轮询扣子编程 OpenAPI 以获取访问密钥。\n\n​\n\nCoze SDK for Java 已经封装了这部分代码，并处理了不同的返回错误代码。开发者只需要调用 get_access_token 即可。\n\n​\n\n​\n\nJava\n\n复制\n\n/*\n\n​\n\n* 第二步：轮询获取访问令牌\n\n​\n\n*/\n\n​\n\ntry\n\n{\n\n​\n\n// 轮询获取访问令牌，传入device_code和自动轮询标识（true为自动处理）\n\n​\n\nOAuthToken\n\nresp\n\n=\n\noauth.getAccessToken(codeResp.getDeviceCode(),\n\ntrue\n\n);\n\n​\n\nSystem.out.println(resp);\n\n// 用户授权成功后返回的访问令牌\n\n​\n\n​\n\n// 用access_token初始化Coze客户端\n\n​\n\nCozeAPI\n\ncoze\n\n=\n\n​\n\nnew\n\nCozeAPI\n\n.Builder()\n\n​\n\n.auth(\n\nnew\n\nTokenAuth\n\n(resp.getAccessToken()))\n\n// 传入访问令牌\n\n​\n\n.baseURL(cozeAPIBase)\n\n// 设置OpenAPI服务端点\n\n​\n\n.build();\n\n​\n\n​\n\n// 令牌过期时刷新，refresh_token从OAuthToken对象获取\n\n​\n\nresp = oauth.refreshToken(resp.getRefreshToken());\n\n​\n\n​\n\n}\n\ncatch\n\n(CozeAuthException e) {\n\n​\n\n// 处理授权失败的情况\n\n​\n\nif\n\n(AuthErrorCode.ACCESS_DENIED.equals(e.getCode())) {\n\n​\n\n// 用户拒绝授权，需引导用户重新操作\n\n​\n\nSystem.out.println(\n\n\"access denied\"\n\n);\n\n​\n\n}\n\nelse\n\nif\n\n(AuthErrorCode.EXPIRED_TOKEN.equals(e.getCode())) {\n\n​\n\n// 令牌过期，需重新获取设备码并引导用户授权\n\n​\n\nSystem.out.println(\n\n\"expired token\"\n\n);\n\n​\n\n}\n\nelse\n\n{\n\n​\n\ne.printStackTrace();\n\n​\n\n}\n\n​\n\n}\n\ncatch\n\n(Exception e) {\n\n​\n\ne.printStackTrace();\n\n​\n\n}\n\n​\n\n​\n\n配置 OAuth JWT 授权流程\n\n​\n\n如果选择使用 OAuth JWT 方式完成授权，可参考以下流程及示例代码。完整的示例代码请参见\n\nJWTsOauthExample.java\n\n。\n\n​\n\n1.\n\n创建 OAuth 应用并授权。\n\n​\n\n具体操作步骤可参考\n\n​\n\nOAuth JWT 授权（开发者）\n\n。成功创建 OAuth 应用后，你将获得客户端 ID、公钥和私钥。你需要妥善保管公钥和私钥，以免数据泄露引发安全风险。\n\n​\n\n2.\n\n在代码中通过环境变量方式设置客户端 ID、公钥和私钥。\n\n​\n\n​\n\nJava\n\n复制\n\n​\n\nString\n\njwtOauthClientID\n\n=\n\nSystem.getenv(\n\n\"COZE_JWT_OAUTH_CLIENT_ID\"\n\n);\n\n// 从环境变量获取JWT授权的客户端ID，创建JWT类型OAuth应用时平台生成的唯一标识符\n\n​\n\nString\n\njwtOauthPrivateKey\n\n=\n\nSystem.getenv(\n\n\"COZE_JWT_OAUTH_PRIVATE_KEY\"\n\n);\n\n// 从环境变量获取 OAuth 应用的私钥，用于签署JWT，可以在\n\nOAuth 应用\n\n页面找到这个应用，在\n\n操作\n\n列单击编辑图标，进入\n\n配置\n\n页面下载私钥文件\n\n​\n\nString\n\njwtOauthPrivateKeyFilePath\n\n=\n\nSystem.getenv(\n\n\"COZE_JWT_OAUTH_PRIVATE_KEY_FILE_PATH\"\n\n);\n\n// 从环境变量获取私钥文件路径，私钥文件在本地的存储路径，开发者自行指定\n\n​\n\nString\n\njwtOauthPublicKeyID\n\n=\n\nSystem.getenv(\n\n\"COZE_JWT_OAUTH_PUBLIC_KEY_ID\"\n\n);\n\n// 从环境变量获取 OAuth 应用的公钥ID，可以在\n\nOAuth 应用\n\n页面找到这个应用，在\n\n操作\n\n列单击编辑图标，进入\n\n配置\n\n页面查看公钥指纹。\n\n​\n\n​\n\nJWTOAuthClient\n\noauth\n\n=\n\nnull\n\n;\n\n​\n\ntry\n\n{\n\n​\n\njwtOauthPrivateKey =\n\n​\n\nnew\n\nString\n\n(\n\n​\n\nFiles.readAllBytes(Paths.get(jwtOauthPrivateKeyFilePath)), StandardCharsets.UTF_8);\n\n​\n\n}\n\ncatch\n\n(IOException e) {\n\n​\n\ne.printStackTrace();\n\n​\n\n}\n\n​\n\n​\n\n/*\n\n​\n\nThe jwt oauth type requires using private to be able to issue a jwt token, and through\n\n​\n\nthe jwt token, apply for an access_token from the coze service. The sdk encapsulates\n\n​\n\nthis procedure, and only needs to use get_access_token to obtain the access_token under\n\n​\n\nthe jwt oauth process.\n\n​\n\nGenerate the authorization token\n\n​\n\nThe default ttl is 900s, and developers can customize the expiration time, which can be\n\n​\n\nset up to 24 hours at most.\n\n​\n\n* */\n\n​\n\ntry\n\n{\n\n​\n\noauth =\n\n​\n\nnew\n\nJWTOAuthClient\n\n.JWTOAuthBuilder()\n\n​\n\n.clientID(jwtOauthClientID)\n\n//OAuth应用的客户端ID，创建 OAuth 应用时获取的客户端 ID。\n\n​\n\n.privateKey(jwtOauthPrivateKey)\n\n// OAuth 应用的私钥。\n\n​\n\n.publicKey(jwtOauthPublicKeyID)\n\n//OAuth 应用的\n\n公钥指纹。\n\n​\n\n.baseURL(Consts.\n\nCOZE_CN_BASE_URL\n\n)\n\n//扣子 OpenAPI 的 Endpoint。\n\n​\n\n.build();\n\n​\n\n}\n\ncatch\n\n(Exception e) {\n\n​\n\ne.printStackTrace();\n\n​\n\nreturn\n\n;\n\n​\n\n}\n\n​\n\n​\n\n3.\n\n应用程序通过公钥和私钥签署 JWT，并通过扣子编程提供的 API 获取访问密钥。\n\n​\n\nCoze SDK for Java 封装了这一过程，你只需要在OAuth JWT 流程中使用 get_access_token 来获取访问密钥即可。\n\n​\n\n​\n\nJava\n\n复制\n\ntry\n\n{\n\n​\n\nOAuthToken\n\nresp\n\n=\n\noauth.getAccessToken()\n\n;\n\n​\n\nSystem.out.println(resp)\n\n;\n\n​\n\n}\n\ncatch\n\n(Exception e)\n\n{\n\n​\n\ne.printStackTrace()\n\n;\n\n​\n\n}\n\n​\n\n/\n\n*\n\n​\n\nThe jwt oauth process does not support refreshing tokens. When the token expires\n\n,\n\n​\n\njust\n\ndirectly call get_access_token to generate a new token\n\n.\n\n​\n\n* *\n\n/\n\n​\n\nCozeAPI\n\ncoze\n\n=\n\nnew\n\nCozeAPI\n\n.Builder().auth(\n\nnew\n\nJWTOAuth\n\n(oauth)).baseURL(Consts.\n\nCOZE_CN_BASE_URL\n\n).build()\n\n;\n\n​\n\n// you can also specify the scope and session for i\n\nt\n\n​\n\n​\n\n上一篇\n\n安装 Java SDK\n\n下一篇\n\n快速开始",
        "links": []
      },
      "markdown": "| 访问密钥类型​ | 鉴权方式​ | 说明​ | 示例文件​ |\n| 个人访问密钥（PAT）​ | 个人访问密钥（PAT）​ | Personal Access Token，简称 PAT。扣子编程中生成的个人访问令牌。PAT 生成与使用便捷，适用于测试环境调试等场景。每个令牌可以关联多个空间，并开通指定的接口权限。生成方式可参考添加个人访问令牌。​ | TokenAuthExample.java​ |\n| 服务访问令牌（SAT）​ | 服务访问令牌（SAT）​ | Service Access Token（简称 SAT）是以服务身份创建的访问凭证，可长期有效访问扣子编程资源，通常用于服务/应用程序的身份验证和授权。SAT 与 OAuth JWT 鉴权方式相比，具有更长的有效期（可设置为永久有效），操作简单，能够有效简化授权流程。生成方式可参考​添加服务访问令牌。​SAT 的示例代码与 PAT 通用，可直接参考 PAT 的示例文件。​ | ​ |\n| OAuth 认证​​ | 授权码授权​（Authorization Code Flow）​ | 适用于有显著前后端之分的应用程序授权场景。其中前端模块负责与用户交互，后端服务处理前端请求，与扣子授权服务器和 OpenAPI 交互。 实现流程可参考​OAuth 授权码授权。​ | WebOAuthExample.java​ |\n| ​ | PKCE 授权​（Authorization Code Flow with PKCE）​ | 应用程序无后端服务，所有操作都发生在应用程序的前端。 实现流程可参考​OAuth PKCE。​ | PKCEOauthExample.java​ |\n| ​ | 设备码授权​（Device Code Flow）​ | 应用程序无后端服务，所有操作都发生在应用程序的 Command Line，且 Command Line 无法提供“同意授权”的操作。 实现流程可参考​OAuth 设备授权。​ | DevicesOAuthExample.java​ |\n| ​ | JWT 授权​（JWT Flow）​ | 应用程序服务端直接调用扣子编程 OpenAPI。​应用程序后端服务代理应用程序自己的用户获取身份凭据，应用程序用户基于凭据直接访问 OpenAPI。 实现流程可参考​OAuth JWT 授权（开发者）。​ | JWTsOauthExample.java​ |\n\n\n- 其中 COZE_API_TOKEN 是扣子编程中申请的个人访问密钥。 ​\n\n- ​ Shell 复制 export COZE_API_TOKEN=pat_**** ​ ​\n\n\n- 示例代码如下： ​\n\n- ​ Java 复制 import com.coze.openapi.service.auth.TokenAuth; ​ import com.coze.openapi.service.config.Consts; ​ import com.coze.openapi.service.service.CozeAPI; ​ import okhttp3.OkHttpClient; ​ ​ public class InitClientExample { ​ public static void main (String[] args) { ​ // 从环境变量中获取个人访问密钥（PAT） ​ // 推荐使用环境变量管理密钥，避免硬编码导致泄露 ​ String token = System.getenv( \"COZE_API_TOKEN\" ); ​ ​ // 创建TokenAuth对象，传入PAT作为身份认证凭据 ​ TokenAuth authCli = new TokenAuth (token); ​ ​ // 构建CozeAPI客户端实例，配置连接参数 ​ CozeAPI coze = ​ new CozeAPI .Builder() ​ .baseURL(Consts.COZE_CN_BASE_URLCOZE_COM_BASE_URL) // 设置扣子编程OpenAPI的 Endpoint ​ .auth(authCli) // 绑定鉴权对象，用于请求时的身份验证 ​ .client( new OkHttpClient .Builder().build()) // 配置HTTP客户端（使用默认OkHttpClient） ​ .build(); // 完成客户端初始化 ​ } ​ } ​ ​\n\n\n- 具体操作步骤可参考 ​ OAuth 授权码授权 。成功创建 OAuth 应用后，你将获得客户端 ID、客户端密钥和重定向地址。你需要妥善保管客户端密钥，以免数据泄露引发安全风险。 ​\n\n\n- ​ Java 复制 public class PKCEOauthExample { ​ public static void main (String[] args) { ​ // 从环境变量中获取PKCE OAuth应用的重定向地址，创建PKCE类型OAuth应用时配置的前端回调地址 ​ String redirectURI = System.getenv( \"COZE_PKCE_OAUTH_REDIRECT_URI\" ); ​ ​ // 从环境变量中获取PKCE OAuth应用的客户端ID，创建PKCE类型OAuth应用时平台生成的唯一标识符 ​ String clientID = System.getenv( \"COZE_PKCE_OAUTH_CLIENT_ID\" ); ​ ​ // 创建PKCEOAuthClient实例，配置应用信息 ​ PKCEOAuthClient oauth = ​ new PKCEOAuthClient .PKCEOAuthBuilder() ​ .clientID(clientID) // 传入客户端ID，即从环境变量获取的PKCE应用客户端ID ​ // 设置扣子授权服务器端点，由扣子编程固定提供的授权服务地址 ​ .baseURL(Consts.COZE_CN_BASE_URLCOZE_COM_BASE_URL) ​ .build(); ​ ​ ​ /* ​ * 生成PKCE授权链接 ​ * 1. SDK自动生成code_verifier和code_challenge ​ * 2. 授权链接包含code_challenge和回调地址，用于引导用户授权 ​ */ ​ // 生成授权链接及code_verifier，返回包含授权URL和code_verifier的响应对象 ​ GetPKCEAuthURLResp oauthURL = ​ oauth.genOAuthURL( ​ redirectURI, // 重定向地址，即从环境变量获取的PKCE应用回调地址 ​ \"state\" , // 状态参数，用于防CSRF攻击，自定义字符串 ​ // 指定code_challenge的生成算法，固定使用SHA-256算法（S256） ​ PKCEOAuthClient.CodeChallengeMethod.S256 ​ ); ​ System.out.println(oauthURL); ​ ​ // 打印SDK生成的code_verifier，SDK自动生成的随机字符串，用于后续换取令牌时验证 ​ System.out.println(oauthURL.getCodeVerifier()); ​ ​ // 打印用户需要访问的授权链接，用户授权页面的URL，从GetPKCEAuthURLResp对象获取 ​ System.out.println(oauthURL.getAuthorizationURL()); ​ ​ ​ /* ​ * 用户授权后，扣子会重定向到redirectURI，并在Query中携带code（授权码） ​ */ ​ // 模拟从重定向地址Query中获取的授权码，用户授权后从redirectURI的Query参数（code）中提取 ​ String code = \"mock code\" ; ​ ​ /* ​ * 用授权码和code_verifier换取访问令牌 ​ * 必须传入genOAuthURL返回的code_verifier，否则验证失败 ​ */ ​ OAuthToken resp = oauth.getAccessToken(code, redirectURI, oauthURL.getCodeVerifier()); ​ System.out.println(resp); // 打印令牌信息 ​ ​ // 使用access_token初始化Coze客户端 ​ CozeAPI coze = ​ new CozeAPI .Builder() ​ // 用access_token创建鉴权对象，access_token从OAuthToken对象获取 ​ .auth( new TokenAuth (resp.getAccessToken())) ​ .baseURL(cozeAPIBase) // 设置OpenAPI服务端点 ​ .build(); ​ ​ // 令牌过期时，使用refresh_token刷新，refresh_token从OAuthToken对象获取 ​ resp = oauth.refreshToken(resp.getRefreshToken()); ​ } ​ } ​ ​\n\n\n- ​ Java 复制 String oauthURL = oauth.getOAuthURL(redirectURI, null ) ; ​ System.out.println(oauthURL) ; ​ ​ / * ​ * To restrict access to a specific WorkSpace, you can specify the WorkSpaceID when obtaining the URL. ​ oauthURL = oauth.getOAuthURL(redirectURI, null, \"workspaceID\") ; ​ System.out.println(oauthURL) ; ​ * * / ​ ​\n\n\n- 通过授权码（OAuth code）调用 OpenAPI 接口即可获取 OAuth Access Token。示例代码如下： ​\n\n- ​ Java 复制 /* ​ * 授权流程说明： ​ * 1. 前端引导用户访问扣子授权页面，用户完成授权后，扣子会重定向到redirectURI ​ * 2. 重定向地址的Query参数中会携带code（授权码）和state（状态参数，用于防CSRF） ​ * 3. 后端从Query中提取code，用于换取访问令牌 ​ */ ​ // 模拟从重定向地址的Query中获取到的授权码，用户授权后从redirectURI的Query参数（code）中提取 ​ String code = \"mock code\" ; ​ ​ /* ​ * 用授权码换取访问令牌（access_token） ​ * 调用getAccessToken方法，传入code和redirectURI（需与授权时使用的地址一致） ​ */ ​ OAuthToken resp = oauth.getAccessToken(code, redirectURI); ​ System.out.println(resp); // 打印令牌信息，包含访问令牌、过期时间等 ​ ​ /* ​ * 获取请求日志ID，用于问题排查，从令牌响应对象中通过getLogID()方法获取 ​ */ ​ System.out.println(resp.getLogID()); ​ ​ // 使用获取到的access_token初始化Coze客户端 ​ CozeAPI coze = ​ new CozeAPI .Builder() ​ // 用access_token创建鉴权对象，access_token从OAuthToken对象的getAccessToken()方法获取 ​ .auth( new TokenAuth (resp.getAccessToken())) ​ // 设置OpenAPI服务端点，由扣子编程固定提供的OpenAPI访问地址 ​ .baseURL(cozeAPIBase) ​ .build(); ​ ​ /* ​ * 令牌过期时，使用refresh_token刷新令牌，refresh_token从OAuthToken对象的getRefreshToken()方法获取 ​ */ ​ resp = oauth.refreshToken(resp.getRefreshToken()); ​ ​\n\n\n- 具体操作步骤可参考 ​ OAuth PKCE 。成功创建 OAuth 应用后，你将获得客户端 ID 和重定向地址。 ​\n\n\n- ​ Java 复制 public static void main (String[] args) { ​ // 从环境变量中获取PKCE OAuth应用的重定向地址，创建PKCE类型OAuth应用时配置的前端回调地址 ​ String redirectURI = System.getenv( \"COZE_PKCE_OAUTH_REDIRECT_URI\" ); ​ ​ // 从环境变量中获取PKCE OAuth应用的客户端ID，创建PKCE类型OAuth应用时平台生成的唯一标识符 ​ String clientID = System.getenv( \"COZE_PKCE_OAUTH_CLIENT_ID\" ); ​ ​ // 创建PKCEOAuthClient实例，配置应用信息 ​ PKCEOAuthClient oauth = ​ new PKCEOAuthClient .PKCEOAuthBuilder() ​ .clientID(clientID) // 传入客户端ID，即从环境变量获取的PKCE应用客户端ID ​ // 设置扣子授权服务器端点，由扣子编程固定提供的授权服务地址 ​ .baseURL(Consts.COZE_CN_BASE_URLCOZE_COM_BASE_URL) ​ .build(); ​ ​\n\n\n- 客户端生成一个随机值 code_verifier，并根据指定算法将其转换为 code_challenge，算法通常使用 SHA-256 算法。然后基于回调地址、code_challenge 和 code_challenge_method，生成一个授权链接。 ​\n\n- 其中 code_verifier 会由 SDK 生成，并与 URL 一起返回给调用方。 ​\n\n- ​ Java 复制 GetPKCEAuthURLResp oauthURL = ​ oauth.genOAuthURL(redirectURI, \"state\" , PKCEOAuthClient.CodeChallengeMethod.S256); ​ System.out.println(oauthURL); ​ // The code verifier generated by the SDK ​ System.out.println(oauthURL.getCodeVerifier()); ​ // URL that users need to click. ​ System.out.println(oauthURL.getAuthorizationURL()); ​ ​\n\n\n- 开发者应该引导用户打开这个授权链接。当用户同意授权时，扣子编程会将页面重定向到开发者配置的回调地址，开发者可以获取这个 code，换取访问密钥。 ​\n\n- ​ Java 复制 /* ​ After the user clicks the authorization consent button, the coze web page will redirect ​ to the redirect address configured in the authorization link and carry the authorization ​ code and state parameters in the address via the query string. ​ ​ Get from the query of the redirect interface: query.get('code') ​ * */ ​ String code = \"mock code\" ; ​ ​ /* ​ After obtaining the code after redirection, the interface to exchange the code for a ​ token can be invoked to generate the coze access_token of the authorized user. ​ The developer should use code verifier returned by genOAuthURL() method ​ * */ ​ OAuthToken resp = oauth.getAccessToken(code, redirectURI, oauthURL.getCodeVerifier()); ​ System.out.println(resp); ​ ​ // use the access token to init Coze client ​ CozeAPI coze = ​ new CozeAPI .Builder() ​ .auth( new TokenAuth (resp.getAccessToken())) ​ .baseURL(cozeAPIBase) ​ .build(); ​ // When the token expires, you can also refresh and re-obtain the token ​ resp = oauth.refreshToken(resp.getRefreshToken()); ​ ​\n\n\n- 具体操作步骤可参考 ​ OAuth 设备授权 。成功创建 OAuth 应用后，你将获得客户端 ID。 ​\n\n\n- ​ Java 复制 public static void main (String[] args) { ​ // 从环境变量获取设备授权的客户端ID，创建设备码类型OAuth应用时平台生成的唯一标识符 ​ String clientID = System.getenv( \"COZE_DEVICE_OAUTH_CLIENT_ID\" ); ​ ​ // 创建设备授权客户端实例 ​ DeviceOAuthClient oauth = ​ new DeviceOAuthClient .DeviceOAuthBuilder() ​ .clientID(clientID) // 传入客户端ID，即从环境变量获取的设备应用客户端ID ​ // 设置授权服务器端点，由扣子编程固定提供的授权服务地址 ​ .baseURL(Consts.COZE_CN_BASE_URLCOZE_COM_BASE_URL) ​ .build(); ​ ​\n\n\n- 应用程序需要调用扣子编程 OpenAPI 生成设备代码，以获取 user_code 和 device_code。通过 user_code 生成授权链接，并引导用户打开该链接、填写 user_code、同意授权。应用程序调用扣子编程 OpenAPI，通过 device_code 生成访问密钥。 ​\n\n- 如果用户尚未授权或拒绝了授权，接口将抛出异常并返回特定的错误代码。用户同意授权后，接口将成功并返回访问密钥。 ​\n\n- SDK 已经拼接了 URL，直接将 SDK 返回的 URL 交给用户打开即可。 ​\n\n- ​ Java 复制 /* ​ * 第一步：获取设备码和用户码 ​ */ ​ // 获取设备码响应对象，包含设备码、用户码、授权URL等信息 ​ DeviceAuthResp codeResp = oauth.getDeviceCode(); ​ System.out.println(codeResp); // 打印设备码相关信息 ​ ​ // 设备码，用于轮询访问令牌，从DeviceAuthResp对象的getDeviceCode()方法获取 ​ System.out.println(codeResp.getDeviceCode()); ​ ​ // 用户需要访问的授权页面URL，用户输入user_code的页面地址，从DeviceAuthResp获取 ​ System.out.println(codeResp.getVerificationURL()); ​ ​\n\n\n- Coze SDK for Java 已经封装了这部分代码，并处理了不同的返回错误代码。开发者只需要调用 get_access_token 即可。 ​\n\n- ​ Java 复制 /* ​ * 第二步：轮询获取访问令牌 ​ */ ​ try { ​ // 轮询获取访问令牌，传入device_code和自动轮询标识（true为自动处理） ​ OAuthToken resp = oauth.getAccessToken(codeResp.getDeviceCode(), true ); ​ System.out.println(resp); // 用户授权成功后返回的访问令牌 ​ ​ // 用access_token初始化Coze客户端 ​ CozeAPI coze = ​ new CozeAPI .Builder() ​ .auth( new TokenAuth (resp.getAccessToken())) // 传入访问令牌 ​ .baseURL(cozeAPIBase) // 设置OpenAPI服务端点 ​ .build(); ​ ​ // 令牌过期时刷新，refresh_token从OAuthToken对象获取 ​ resp = oauth.refreshToken(resp.getRefreshToken()); ​ ​ } catch (CozeAuthException e) { ​ // 处理授权失败的情况 ​ if (AuthErrorCode.ACCESS_DENIED.equals(e.getCode())) { ​ // 用户拒绝授权，需引导用户重新操作 ​ System.out.println( \"access denied\" ); ​ } else if (AuthErrorCode.EXPIRED_TOKEN.equals(e.getCode())) { ​ // 令牌过期，需重新获取设备码并引导用户授权 ​ System.out.println( \"expired token\" ); ​ } else { ​ e.printStackTrace(); ​ } ​ } catch (Exception e) { ​ e.printStackTrace(); ​ } ​ ​\n\n\n- 具体操作步骤可参考 ​ OAuth JWT 授权（开发者） 。成功创建 OAuth 应用后，你将获得客户端 ID、公钥和私钥。你需要妥善保管公钥和私钥，以免数据泄露引发安全风险。 ​\n\n\n- ​ Java 复制 ​ String jwtOauthClientID = System.getenv( \"COZE_JWT_OAUTH_CLIENT_ID\" ); // 从环境变量获取JWT授权的客户端ID，创建JWT类型OAuth应用时平台生成的唯一标识符 ​ String jwtOauthPrivateKey = System.getenv( \"COZE_JWT_OAUTH_PRIVATE_KEY\" ); // 从环境变量获取 OAuth 应用的私钥，用于签署JWT，可以在 OAuth 应用 页面找到这个应用，在 操作 列单击编辑图标，进入 配置 页面下载私钥文件 ​ String jwtOauthPrivateKeyFilePath = System.getenv( \"COZE_JWT_OAUTH_PRIVATE_KEY_FILE_PATH\" ); // 从环境变量获取私钥文件路径，私钥文件在本地的存储路径，开发者自行指定 ​ String jwtOauthPublicKeyID = System.getenv( \"COZE_JWT_OAUTH_PUBLIC_KEY_ID\" ); // 从环境变量获取 OAuth 应用的公钥ID，可以在 OAuth 应用 页面找到这个应用，在 操作 列单击编辑图标，进入 配置 页面查看公钥指纹。 ​ ​ JWTOAuthClient oauth = null ; ​ try { ​ jwtOauthPrivateKey = ​ new String ( ​ Files.readAllBytes(Paths.get(jwtOauthPrivateKeyFilePath)), StandardCharsets.UTF_8); ​ } catch (IOException e) { ​ e.printStackTrace(); ​ } ​ ​ /* ​ The jwt oauth type requires using private to be able to issue a jwt token, and through ​ the jwt token, apply for an access_token from the coze service. The sdk encapsulates ​ this procedure, and only needs to use get_access_token to obtain the access_token under ​ the jwt oauth process. ​ Generate the authorization token ​ The default ttl is 900s, and developers can customize the expiration time, which can be ​ set up to 24 hours at most. ​ * */ ​ try { ​ oauth = ​ new JWTOAuthClient .JWTOAuthBuilder() ​ .clientID(jwtOauthClientID) //OAuth应用的客户端ID，创建 OAuth 应用时获取的客户端 ID。 ​ .privateKey(jwtOauthPrivateKey) // OAuth 应用的私钥。 ​ .publicKey(jwtOauthPublicKeyID) //OAuth 应用的 公钥指纹。 ​ .baseURL(Consts. COZE_CN_BASE_URL ) //扣子 OpenAPI 的 Endpoint。 ​ .build(); ​ } catch (Exception e) { ​ e.printStackTrace(); ​ return ; ​ } ​ ​\n\n\n- Coze SDK for Java 封装了这一过程，你只需要在OAuth JWT 流程中使用 get_access_token 来获取访问密钥即可。 ​\n\n- ​ Java 复制 try { ​ OAuthToken resp = oauth.getAccessToken() ; ​ System.out.println(resp) ; ​ } catch (Exception e) { ​ e.printStackTrace() ; ​ } ​ / * ​ The jwt oauth process does not support refreshing tokens. When the token expires , ​ just directly call get_access_token to generate a new token . ​ * * / ​ CozeAPI coze = new CozeAPI .Builder().auth( new JWTOAuth (oauth)).baseURL(Consts. COZE_CN_BASE_URL ).build() ; ​ // you can also specify the scope and session for i t ​ ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/java_getting_started",
      "title": "快速开始",
      "content": {
        "sections": [],
        "full_text": "快速开始\n\n本文介绍如何使用 Coze Java SDK 完成扣子编程的常用操作，例如如何初始化 SDK、创建一个智能体草稿、发布智能体为 API 服务、和智能体对话等。\n\n​\n\n说明\n\n初始化之前，请确认已完成以下操作：\n\n​\n\n已安装 Coze Java SDK。更多信息，可参见\n\n​\n\n安装 Java SDK\n\n。\n\n​\n\n已实现授权流程，并通过环境变量等方式配置了访问密钥。详细说明可参考\n\n​\n\n配置访问密钥\n\n。\n\n​\n\n​\n\n初始化 SDK\n\n​\n\n初始化 Coze client 之后，才可以向扣子编程服务端发送 OpenAPI 请求。初始化时推荐通过环境变量动态获取访问密钥，以免硬编码引发数据安全风险。\n\n​\n\n初始化代码如下：\n\n​\n\n​\n\nJava\n\n复制\n\nimport\n\ncom.coze.openapi.service.auth.TokenAuth;\n\n​\n\nimport\n\ncom.coze.openapi.service.config.Consts;\n\n​\n\nimport\n\ncom.coze.openapi.service.service.CozeAPI;\n\n​\n\n​\n\nimport\n\nokhttp3.OkHttpClient;\n\n​\n\n​\n\npublic\n\nclass\n\nInitClientExample\n\n{\n\n​\n\npublic\n\nstatic\n\nvoid\n\nmain\n\n(String[] args)\n\n{\n\n​\n\n// Get an access_token through personal access token or oauth.\n\n​\n\n// Coze suggest that you manage access keys through environment variables.\n\n​\n\nString\n\ntoken\n\n=\n\nSystem.getenv(\n\n\"\n\nCOZE_API_TOKEN\n\n\"\n\n);\n\n​\n\nTokenAuth\n\nauthCli\n\n=\n\nnew\n\nTokenAuth\n\n(token);\n\n​\n\n​\n\nCozeAPI\n\ncoze\n\n=\n\n​\n\nnew\n\nCozeAPI\n\n.Builder()\n\n​\n\n.baseURL(Consts.\n\nCOZE_CN_BASE_URL\n\n)\n\n​\n\n.auth(authCli)\n\n​\n\n.client(\n\nnew\n\nOkHttpClient\n\n.Builder().build())\n\n​\n\n.build();\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n创建并发布智能体为 API 服务\n\n​\n\n通过 API 方式和智能体对话之前，你需要先创建一个智能体，并将其发布为 API 服务。你可以在扣子编程中创建智能体并发布，也可以通过调用相关的 API 实现。调用 API 创建智能体时，部分配置对应的 API 参数暂未开放，你只能为智能体添加知识库等有限的配置。创建智能体的操作步骤可参考\n\n​\n\n搭建一个 AI 助手智能体\n\n，将智能体发布为 API 服务的操作步骤可参考\n\n​\n\n发布智能体为 API 服务\n\n。\n\n​\n\n完整示例代码，请参见\n\nGitHub 示例\n\n。\n\n​\n\n相关 API 接口描述，请参见：\n\n​\n\n​\n\n创建智能体\n\n​\n\n​\n\n发布智能体\n\n​\n\n示例代码如下：\n\n​\n\n​\n\nJava\n\n复制\n\npackage\n\nexample.bot;\n\n​\n\n​\n\nimport\n\njava.util.Arrays;\n\n​\n\n​\n\nimport\n\ncom.coze.openapi.client.bots.*;\n\n​\n\nimport\n\ncom.coze.openapi.client.bots.model.BotOnboardingInfo;\n\n​\n\nimport\n\ncom.coze.openapi.client.bots.model.BotPromptInfo;\n\n​\n\nimport\n\ncom.coze.openapi.client.files.UploadFileReq;\n\n​\n\nimport\n\ncom.coze.openapi.client.files.UploadFileResp;\n\n​\n\nimport\n\ncom.coze.openapi.service.auth.TokenAuth;\n\n​\n\nimport\n\ncom.coze.openapi.service.service.CozeAPI;\n\n​\n\n​\n\n/*\n\n​\n\nThis example is for describing how to create a bot, update a bot and publish a bot to the API.\n\n​\n\nThe document for those interface:\n\n​\n\n* */\n\n​\n\npublic\n\nclass\n\nBotPublishExample\n\n{\n\n​\n\n​\n\npublic\n\nstatic\n\nvoid\n\nmain\n\n(String[] args)\n\n{\n\n​\n\n// Get an access_token through personal access token or oauth.\n\n​\n\nString\n\ntoken\n\n=\n\nSystem.getenv(\n\n\"COZE_API_TOKEN\"\n\n);\n\n​\n\nTokenAuth\n\nauthCli\n\n=\n\nnew\n\nTokenAuth\n\n(token);\n\n​\n\n​\n\n// Init the Coze client through the access_token.\n\n​\n\nCozeAPI\n\ncoze\n\n=\n\n​\n\nnew\n\nCozeAPI\n\n.Builder()\n\n​\n\n.baseURL(Consts.\n\nCOZE_CN_BASE_URL\n\n)\n\n​\n\n.auth(authCli)\n\n​\n\n.readTimeout(\n\n10000\n\n)\n\n​\n\n.build();\n\n​\n\n;\n\n​\n\n​\n\n/*\n\n​\n\n* step one, create a bot\n\n​\n\n* */\n\n​\n\nString\n\nworkspaceID\n\n=\n\nSystem.getenv(\n\n\"WORKSPACE_ID\"\n\n);\n\n​\n\n​\n\n// set the prompt of your bot\n\n​\n\nBotPromptInfo\n\npromptInfo\n\n=\n\nnew\n\nBotPromptInfo\n\n(\n\n\"your prompt\"\n\n);\n\n​\n\n​\n\n// set the onboarding info of your bot\n\n​\n\nBotOnboardingInfo\n\nonboardingInfo\n\n=\n\n​\n\nBotOnboardingInfo.builder()\n\n​\n\n.prologue(\n\n\"the prologue of your bot\"\n\n)\n\n​\n\n.suggestedQuestions(Arrays.asList(\n\n\"question 1\"\n\n,\n\n\"question 2\"\n\n))\n\n​\n\n.build();\n\n​\n\n// Call the upload file interface to get the avatar id.\n\n​\n\nString\n\navatarPath\n\n=\n\nSystem.getenv(\n\n\"IMAGE_FILE_PATH\"\n\n);\n\n​\n\nUploadFileResp\n\navatarInfo\n\n=\n\ncoze.files().upload(UploadFileReq.of(avatarPath));\n\n​\n\nSystem.out.println(avatarInfo);\n\n​\n\n​\n\n// build the request\n\n​\n\nCreateBotReq\n\ncreateReq\n\n=\n\n​\n\nCreateBotReq.builder()\n\n​\n\n.spaceID(workspaceID)\n\n​\n\n.description(\n\n\"the description of your bot\"\n\n)\n\n​\n\n.name(\n\n\"the name of your bot\"\n\n)\n\n​\n\n.promptInfo(promptInfo)\n\n​\n\n.onboardingInfo(onboardingInfo)\n\n​\n\n.iconFileID(avatarInfo.getFileInfo().getID())\n\n​\n\n.build();\n\n​\n\n​\n\n// Invoke the creation interface to create a bot in the draft status, and you can get the bot\n\n​\n\n// id.\n\n​\n\nCreateBotResp\n\ncreateResp\n\n=\n\ncoze.bots().create(createReq);\n\n​\n\nString\n\nbotID\n\n=\n\ncreateResp.getBotID();\n\n​\n\nSystem.out.println(createResp);\n\n​\n\n​\n\n/*\n\n​\n\n* step two, update the bot, you can update the bot after being created\n\n​\n\n* in this example, we will update the avatar of the bot\n\n​\n\n*/\n\n​\n\nPublishBotReq\n\npublishReq\n\n=\n\n​\n\nPublishBotReq.builder().botID(botID).connectorIDs(Arrays.asList(\n\n\"1024\"\n\n)).build();\n\n​\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n发起对话\n\n​\n\n​\n\n发起对话\n\n接口用于向指定智能体发起一次对话，支持在对话时添加对话的上下文消息，以便智能体基于历史消息做出合理的回复。开发者可以按需选择响应方式，即流式或非流式响应，响应方式决定了开发者获取智能体回复的方式。\n\n​\n\n流式响应\n\n：智能体在生成回复的同时，将回复消息以数据流的形式逐条发送给客户端。处理结束后，服务端会返回拼接后完整的智能体回复。详细说明可参考\n\n流式响应\n\n。\n\n​\n\n非流式响应\n\n：无论对话是否处理完毕，立即发送响应消息。开发者可以通过接口\n\n查看对话详情\n\n确认本次对话处理结束后，再调用\n\n查看对话消息详情\n\n接口查看模型回复等完整响应内容。详细说明可参考\n\n非流式响应\n\n。\n\n​\n\n本文档以流式响应为例，演示通过 API 方式和智能体对话相关实例代码。你也可以查看 Coze Java SDK\n\n示例代码目录\n\n，查看发起对话接口的其他实现方式，例如非流式响应、对话中发送多模态内容等。\n\n​\n\n示例代码如下：\n\n​\n\n​\n\nJava\n\n复制\n\n/* (C)2024 */\n\n​\n\npackage\n\nexample.chat;\n\n​\n\n​\n\nimport\n\njava.util.Collections;\n\n​\n\n​\n\nimport\n\ncom.coze.openapi.client.chat.CreateChatReq;\n\n​\n\nimport\n\ncom.coze.openapi.client.chat.model.ChatEvent;\n\n​\n\nimport\n\ncom.coze.openapi.client.chat.model.ChatEventType;\n\n​\n\nimport\n\ncom.coze.openapi.client.connversations.message.model.Message;\n\n​\n\nimport\n\ncom.coze.openapi.service.auth.TokenAuth;\n\n​\n\nimport\n\ncom.coze.openapi.service.service.CozeAPI;\n\n​\n\n​\n\nimport\n\nio.reactivex.Flowable;\n\n​\n\n​\n\n/*\n\n​\n\n* This example is about how to use the streaming interface to start a chat request\n\n​\n\n* and handle chat events\n\n​\n\n* */\n\n​\n\npublic\n\nclass\n\nStreamChatExample\n\n{\n\n​\n\n​\n\npublic\n\nstatic\n\nvoid\n\nmain\n\n(String[] args)\n\n{\n\n​\n\n​\n\n// Get an access_token through personal access token or oauth.\n\n​\n\nString\n\ntoken\n\n=\n\nSystem.getenv(\n\n\"COZE_API_TOKEN\"\n\n);\n\n​\n\nString\n\nbotID\n\n=\n\nSystem.getenv(\n\n\"PUBLISHED_BOT_ID\"\n\n);\n\n​\n\nString\n\nuserID\n\n=\n\nSystem.getenv(\n\n\"USER_ID\"\n\n);\n\n​\n\n​\n\nTokenAuth\n\nauthCli\n\n=\n\nnew\n\nTokenAuth\n\n(token);\n\n​\n\n​\n\n// Init the Coze client through the access_token.\n\n​\n\nCozeAPI\n\ncoze\n\n=\n\n​\n\nnew\n\nCozeAPI\n\n.Builder()\n\n​\n\n.baseURL(Consts.\n\nCOZE_CN_BASE_URL\n\n)\n\n​\n\n.auth(authCli)\n\n​\n\n.readTimeout(\n\n10000\n\n)\n\n​\n\n.build();\n\n​\n\n;\n\n​\n\n​\n\n/*\n\n​\n\n* Step one, create chat\n\n​\n\n* Call the coze.chat().stream() method to create a chat. The create method is a streaming\n\n​\n\n* chat and will return a Flowable ChatEvent. Developers should iterate the iterator to get\n\n​\n\n* chat event and handle them.\n\n​\n\n* */\n\n​\n\nCreateChatReq\n\nreq\n\n=\n\n​\n\nCreateChatReq.builder()\n\n​\n\n.botID(botID)\n\n​\n\n.userID(userID)\n\n​\n\n.messages(Collections.singletonList(Message.buildUserQuestionText(\n\n\"What can you do?\"\n\n)))\n\n​\n\n.build();\n\n​\n\n​\n\nFlowable<ChatEvent> resp = coze.chat().stream(req);\n\n​\n\nresp.blockingForEach(\n\n​\n\nevent -> {\n\n​\n\nif\n\n(ChatEventType.CONVERSATION_MESSAGE_DELTA.equals(event.getEvent())) {\n\n​\n\nSystem.out.print(event.getMessage().getContent());\n\n​\n\n}\n\n​\n\nif\n\n(ChatEventType.CONVERSATION_CHAT_COMPLETED.equals(event.getEvent())) {\n\n​\n\nSystem.out.println(\n\n\"Token usage:\"\n\n+ event.getChat().getUsage().getTokenCount());\n\n​\n\n}\n\n​\n\n});\n\n​\n\nSystem.out.println(\n\n\"done\"\n\n);\n\n​\n\ncoze.shutdownExecutor();\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n上一篇\n\n配置访问密钥\n\n下一篇\n\nGo SDK 概述",
        "links": []
      },
      "markdown": "- 已安装 Coze Java SDK。更多信息，可参见 ​ 安装 Java SDK 。 ​\n\n- 已实现授权流程，并通过环境变量等方式配置了访问密钥。详细说明可参考 ​ 配置访问密钥 。 ​\n\n- 完整示例代码，请参见 GitHub 示例 。 ​\n\n- 相关 API 接口描述，请参见： ​\n\n- ​ 创建智能体 ​\n\n- ​ 发布智能体 ​\n\n- 流式响应 ：智能体在生成回复的同时，将回复消息以数据流的形式逐条发送给客户端。处理结束后，服务端会返回拼接后完整的智能体回复。详细说明可参考 流式响应 。 ​\n\n- 非流式响应 ：无论对话是否处理完毕，立即发送响应消息。开发者可以通过接口 查看对话详情 确认本次对话处理结束后，再调用 查看对话消息详情 接口查看模型回复等完整响应内容。详细说明可参考 非流式响应 。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/go_overview",
      "title": "Go SDK 概述",
      "content": {
        "sections": [],
        "full_text": "Go SDK 概述\n\nCoze API Go SDK 是由扣子官方提供的一个 SDK 工具包。你可以通过 Go SDK 将 Coze 的 OpenAPI 集成到你的应用程序中。Go SDK 支持 Coze 提供的所有官方鉴权方法，具有高度灵活性和高可用性，可以显著提升 OpenAPI 的使用效率。通过使用访问密钥初始化 SDK，可以高效、安全地通过 OpenAPI 访问你的 AI 智能体。\n\n​\n\nCoze API Go SDK 遵循用户友好的设计风格，可简化你的开发工作，适合所有技能水平开发者使用。\n\n​\n\n源码地址\n\n​\n\n访问\n\nGitHub\n\n获取 Coze API Go SDK 源码。\n\n​\n\n注意\n\n从扣子 GitHub 仓库获取的源码和示例代码中，\n\nbase_url\n\n默认设置为域名\n\nCozeComBaseURL\n\n，使用源码前应手动将其修改为域名\n\nCozeCnBaseURL\n\n。\n\n​\n\n​\n\n示例代码\n\n​\n\nCoze Go SDK 提供各种授权方式、各种使用方式的示例代码，便于开发者直接参考使用。\n\n​\n\n说明\n\nCoze Go SDK 支持扣子所有 OpenAPI，对应的 API 文档可参考\n\n​\n\nAPI 介绍\n\n。\n\n​\n\n示例代码将持续更新和补充，各种场景的 Coze Go SDK\n\n最新版本\n\n示例代码可参考\n\nGitHub\n\n。\n\n​\n\n​\n\n常见场景的示例代码及说明如下：\n\n​\n\n​\n\n模块\n\n​\n\n示例文件\n\n​\n\n说明\n\n​\n\n授权\n\n​\n\npat_example.go\n\n​\n\n通过个人访问密钥实现 OpenAPI 鉴权。\n\n​\n\n​\n\nweb_oauth_example.go\n\n​\n\n通过 OAuth 授权码方式实现授权与 OpenAPI 鉴权。\n\n​\n\n​\n\njwt_example.go\n\n​\n\n通过 OAuth JWT 方式实现授权与 OpenAPI 鉴权。\n\n​\n\n​\n\npkce_example.go\n\n​\n\n通过 OAuth PKCE 方式实现授权与 OpenAPI 鉴权。\n\n​\n\n​\n\ndevice_example.go\n\n​\n\n通过 OAuth 设备码方式实现授权与 OpenAPI 鉴权。\n\n​\n\n对话\n\n​\n\nnon_stream_chat_example.go\n\n​\n\n发起对话，响应方式为非流式响应。\n\n​\n\n​\n\nstream_chat_example.go\n\n​\n\n发起对话，响应方式为流式响应。\n\n​\n\n​\n\nmulti_modal_chat_example.go\n\n​\n\n发起对话，对话中上传文件，并发送多模态内容。\n\n​\n\n​\n\nsubmit_tool_output_example.go\n\n​\n\n对话时调用端插件。\n\n​\n\n会话和消息\n\n​\n\nconversation_example.go\n\n​\n\n创建对话、向对话中添加消息以及清除对话内容等。\n\n​\n\n​\n\nlist_conversation_example.go\n\n​\n\n查询对话列表。\n\n​\n\n​\n\ncreate_update_delete_message_example.go\n\n​\n\n创建、更新和删除消息\n\n​\n\n工作流\n\n​\n\nnon_stream_run_example.go\n\n​\n\n运行工作流，响应方式为非流式响应。\n\n​\n\n​\n\nstream_run_example.go\n\n​\n\n运行工作流，响应方式为流式响应，且工作流中包含问答节点。\n\n​\n\n​\n\nasync_workflow_run_example.go\n\n​\n\n异步运行工作流，并获取工作流运行结果。\n\n​\n\n​\n\nworkflow_stream_chat_example.go\n\n​\n\n运行对话流。\n\n​\n\n智能体管理\n\n​\n\npublish_bot_example.go\n\n​\n\n创建一个草稿状态的智能体，更新智能体，并发布智能体为 API 服务。\n\n​\n\nWebSocket 语音\n\n​\n\nwebsockets_audio_chat_example.go\n\n​\n\nWebSocket 语音通话。\n\n​\n\n​\n\nwebsockets_speech_example.go\n\n​\n\n语音合成，将文本转为语音，并将生成的语音保存为音频文件。\n\n​\n\n​\n\nwebsockets_transcriptions_example.go\n\n​\n\n语音识别，将指定音频文件转录为文本。\n\n​\n\n语音\n\n​\n\naudio_rooms_create_main.go\n\n​\n\nRTC 音视频通话场景中，创建音视频房间。\n\n​\n\n​\n\naudio_speech_create_example.go\n\n​\n\n语音合成，将文本转为语音，并将生成的语音保存为音频文件。\n\n​\n\n​\n\naudio_transcription_create_example.go\n\n​\n\n语音识别，将指定音频文件转录为文本。\n\n​\n\n​\n\naudio_voices_clone_example.go\n\n​\n\n克隆音色。\n\n​\n\n​\n\naudio_voices_list_example.go\n\n​\n\n查询音色列表。\n\n​\n\n工作空间\n\n​\n\nlist_workspace_example.go\n\n​\n\n查询所有工作空间列表。\n\n​\n\n知识库\n\n​\n\ndataset_documents_example.go\n\n​\n\n知识库管理，包含：\n\n​\n\n创建、查询、更新和删除知识库。\n\n​\n\n上传文本和图片类型的知识库文件。\n\n​\n\n更新图片知识库的描述。\n\n​\n\n查看知识库图片列表。\n\n​\n\n文件管理\n\n​\n\nfiles_examples.go\n\n​\n\n文件上传。\n\n​\n\n文件夹\n\n​\n\nfolders_examples.go\n\n​\n\n查询文件夹列表和文件夹详情。\n\n​\n\n异常处理\n\n​\n\nhandle_error_example.go\n\n​\n\n处理 API 异常。\n\n​\n\n客户端管理\n\n​\n\ninit_client_example.go\n\n​\n\n修改日志级别。\n\n​\n\n​\n\n​\n\n初始化客户端。\n\n​\n\n获取日志\n\n​\n\nget_log_id_example.go\n\n​\n\n获取日志。\n\n​\n\n​\n\n异常处理\n\n​\n\n当调用 API 失败时，SDK 会返回\n\nError\n\n。当鉴权失败的时候，\n\nSDK 会抛出\n\nAuthError\n\n。开发者可以根据自己的需求捕获对应的异常，其中\n\nError\n\n会获取到异常接口的错误码，API 错误码的相关说明及处理方式可参考\n\n​\n\n错误码\n\n。\n\n​\n\n上一篇\n\n快速开始\n\n下一篇\n\n安装 Go SDK",
        "links": []
      },
      "markdown": "- Coze Go SDK 支持扣子所有 OpenAPI，对应的 API 文档可参考 ​ API 介绍 。 ​\n\n- 示例代码将持续更新和补充，各种场景的 Coze Go SDK 最新版本 示例代码可参考 GitHub 。 ​\n\n| 模块​ | 示例文件​ | 说明​ |\n| 授权​ | pat_example.go​ | 通过个人访问密钥实现 OpenAPI 鉴权。​ |\n| ​ | web_oauth_example.go​ | 通过 OAuth 授权码方式实现授权与 OpenAPI 鉴权。​ |\n| ​ | jwt_example.go​ | 通过 OAuth JWT 方式实现授权与 OpenAPI 鉴权。​ |\n| ​ | pkce_example.go​ | 通过 OAuth PKCE 方式实现授权与 OpenAPI 鉴权。​ |\n| ​ | device_example.go​ | 通过 OAuth 设备码方式实现授权与 OpenAPI 鉴权。​ |\n| 对话​ | non_stream_chat_example.go​ | 发起对话，响应方式为非流式响应。​ |\n| ​ | stream_chat_example.go​ | 发起对话，响应方式为流式响应。​ |\n| ​ | multi_modal_chat_example.go​ | 发起对话，对话中上传文件，并发送多模态内容。​ |\n| ​ | submit_tool_output_example.go​ | 对话时调用端插件。​ |\n| 会话和消息​ | conversation_example.go​ | 创建对话、向对话中添加消息以及清除对话内容等。​ |\n| ​ | list_conversation_example.go​ | 查询对话列表。​ |\n| ​ | create_update_delete_message_example.go​ | 创建、更新和删除消息​ |\n| 工作流​ | non_stream_run_example.go​ | 运行工作流，响应方式为非流式响应。​ |\n| ​ | stream_run_example.go​ | 运行工作流，响应方式为流式响应，且工作流中包含问答节点。​ |\n| ​ | async_workflow_run_example.go​ | 异步运行工作流，并获取工作流运行结果。​ |\n| ​ | workflow_stream_chat_example.go​ | 运行对话流。​ |\n| 智能体管理​ | publish_bot_example.go​ | 创建一个草稿状态的智能体，更新智能体，并发布智能体为 API 服务。​ |\n| WebSocket 语音​ | websockets_audio_chat_example.go​ | WebSocket 语音通话。​ |\n| ​ | websockets_speech_example.go​ | 语音合成，将文本转为语音，并将生成的语音保存为音频文件。​ |\n| ​ | websockets_transcriptions_example.go​ | 语音识别，将指定音频文件转录为文本。​ |\n| 语音​ | audio_rooms_create_main.go​ | RTC 音视频通话场景中，创建音视频房间。​ |\n| ​ | audio_speech_create_example.go​ | 语音合成，将文本转为语音，并将生成的语音保存为音频文件。​ |\n| ​ | audio_transcription_create_example.go​ | 语音识别，将指定音频文件转录为文本。​ |\n| ​ | audio_voices_clone_example.go​ | 克隆音色。​ |\n| ​ | audio_voices_list_example.go​ | 查询音色列表。​ |\n| 工作空间​ | list_workspace_example.go​ | 查询所有工作空间列表。​ |\n| 知识库​ | dataset_documents_example.go​ | 知识库管理，包含：​创建、查询、更新和删除知识库。​上传文本和图片类型的知识库文件。​更新图片知识库的描述。​查看知识库图片列表。​ |\n| 文件管理​ | files_examples.go​ | 文件上传。​ |\n| 文件夹​ | folders_examples.go​ | 查询文件夹列表和文件夹详情。​ |\n| 异常处理​ | handle_error_example.go​ | 处理 API 异常。​ |\n| 客户端管理​ | init_client_example.go​ | 修改日志级别。​ |\n| ​ | ​ | 初始化客户端。​ |\n| 获取日志​ | get_log_id_example.go​ | 获取日志。​ |\n\n- 创建、查询、更新和删除知识库。 ​\n\n- 上传文本和图片类型的知识库文件。 ​\n\n- 更新图片知识库的描述。 ​\n\n- 查看知识库图片列表。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/go_installation",
      "title": "安装 Go SDK",
      "content": {
        "sections": [],
        "full_text": "安装 Go SDK\n\n使用 Coze API Go SDK 之前，你需要先参考本文档安装 Go SDK。\n\n​\n\n环境准备\n\n​\n\nCoze API Go SDK 适用于 Go 1.8 及以上版本。安装 Go SDK 之前，建议执行以下命令确认你已安装 1.8及以上版本的 Go。\n\n​\n\n​\n\nBash\n\n复制\n\n# 查看 Go 版本\n\n​\n\ngo version\n\n​\n\n​\n\n# 回显信息显示已安装 1.18.10 版本\n\n​\n\ngo version go1.18.10 darwin/amd64\n\n​\n\n​\n\n安装 SDK\n\n​\n\n说明\n\n安装 Coze API Go SDK 时，默认安装最新版本。你也可以\n\n点击此处\n\n查看 Coze API Go SDK 已发布的所有历史版本。更多信息，请参见\n\nREADME\n\n。\n\n​\n\n​\n\n可以通过以下方式安装 Coze API Go SDK。\n\n​\n\n​\n\nBash\n\n复制\n\ngo get github.com/coze-dev/coze-go\n\n​\n\n​\n\n​\n\n上一篇\n\nGo SDK 概述\n\n下一篇\n\n配置访问密钥",
        "links": []
      },
      "markdown": ""
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/go_access_token",
      "title": "配置访问密钥",
      "content": {
        "sections": [],
        "full_text": "配置访问密钥\n\n通过 Go SDK 调用扣子编程 OpenAPI 时，需要在请求中配置访问密钥，以进行身份验证和权限校验。扣子编程 OpenAPI 提供了两种鉴权方式：个人访问密钥（PAT）和 OAuth。开发者可以根据当前业务场景选择合适的鉴权方式，并获取相应的访问密钥。\n\n​\n\n对于 OAuth 授权码等复杂的授权方式，Coze API Go SDK 已经封装了相关的逻辑，并处理了不同的错误返回代码，从而简化开发者的操作。\n\n​\n\n配置方式\n\n​\n\n扣子编程 OpenAPI 目前支持的鉴权方式如下。\n\n​\n\n​\n\n访问密钥类型\n\n​\n\n鉴权方式\n\n​\n\n说明\n\n​\n\n示例文件\n\n​\n\n个人访问密钥\n\n​\n\n个人访问密钥\n\n​\n\nPersonal Access Token，简称 PAT。扣子编程中生成的个人访问令牌。PAT 生成与使用便捷，适用于测试环境调试等场景。每个令牌可以关联多个空间，并开通指定的接口权限。生成方式可参考\n\n​\n\n添加个人访问令牌\n\n。\n\n​\n\npat_example.go\n\n​\n\n服务访问令牌（SAT）\n\n​\n\n服务访问令牌（SAT）\n\n​\n\nService Access Token（简称 SAT）是以服务身份创建的访问凭证，可\n\n长期有效\n\n访问扣子编程资源，通常用于服务/应用程序的身份验证和授权。生成方式可参考\n\n​\n\n添加服务访问令牌\n\n。\n\n​\n\nSAT 的示例代码与 PAT 通用，可直接参考 PAT 的示例文件。\n\n​\n\npat_example.go\n\n​\n\nOAuth 认证\n\n​\n\n​\n\n授权码授权\n\n​\n\n（Authorization Code Flow）\n\n​\n\n适用于有显著前后端之分的应用程序授权场景。其中前端模块负责与用户交互，后端服务处理前端请求，与扣子编程授权服务器和 OpenAPI 交互。 实现流程可参考\n\n​\n\nOAuth 授权码授权\n\n。\n\n​\n\nweb_oauth_example.go\n\n​\n\n​\n\nPKCE 授权\n\n​\n\n（Authorization Code Flow with PKCE）\n\n​\n\n应用程序无后端服务，所有操作都发生在应用程序的前端。 实现流程可参考\n\n​\n\nOAuth PKCE\n\n。\n\n​\n\npkce_example.go\n\n​\n\n​\n\n设备码授权\n\n​\n\n（Device Code Flow）\n\n​\n\n应用程序无后端服务，所有操作都发生在应用程序的 Command Line，且 Command Line 无法提供“同意授权”的操作。 实现流程可参考\n\n​\n\nOAuth 设备授权\n\n。\n\n​\n\ndevice_example.go\n\n​\n\n​\n\nJWT 授权\n\n​\n\n（JWT Flow）\n\n​\n\n应用程序服务端直接调用扣子编程 OpenAPI。\n\n​\n\n应用程序后端服务代理应用程序自己的用户获取身份凭据，应用程序用户基于凭据直接访问 OpenAPI。 实现流程可参考\n\n​\n\nOAuth JWT 授权（开发者）\n\n。\n\n​\n\njwt_example.go\n\n​\n\n​\n\n配置个人访问密钥（PAT）\n\n​\n\n如果选择使用个人访问密钥进行鉴权，首先需要申请一个个人访问密钥，并为其添加指定的空间和权限。操作步骤可参考\n\n​\n\n添加个人访问令牌\n\n。\n\n​\n\n建议通过环境变量来管理访问密钥，以避免在代码中硬编码，从而防止密钥泄露和潜在的安全风险。配置环境变量后，你可以在不修改代码的情况下将动态的鉴权参数传递到相应的函数中，从而实现便捷且安全的身份认证。\n\n​\n\n1.\n\n设置环境变量。\n\n​\n\n其中 COZE_API_TOKEN 是扣子编程中申请的个人访问密钥。\n\n​\n\n​\n\nShell\n\n复制\n\nexport COZE_API_TOKEN=pat_****\n\n​\n\n​\n\n2.\n\n初始化客户端。\n\n​\n\n示例代码如下：\n\n​\n\n​\n\nGo\n\n复制\n\nfunc\n\nmain\n\n()\n\n{\n\n​\n\n// Get an access token using the personal access token or oauth.\n\n​\n\ntoken := os.Getenv(\n\n\"COZE_API_TOKEN\"\n\n)\n\n​\n\nauthCli := coze.NewTokenAuth(token)\n\n​\n\n​\n\n/*\n\n​\n\n* The default access is api.coze.com, but if you need to access api.coze.cn\n\n​\n\n* please use baseUrl to configure the API endpoint to access\n\n​\n\n*/\n\n​\n\ncozeCli := coze.NewCozeAPI(authCli, coze.WithBaseURL(\n\ncoze.\n\nCozeCnBaseURL\n\n))\n\n​\n\n}\n\n​\n\n​\n\n配置 OAuth 授权码流程\n\n​\n\n如果选择使用 OAuth 授权码方式完成授权，可参考以下流程及示例代码。\n\n​\n\n1.\n\n创建 OAuth 应用。\n\n​\n\n具体操作步骤可参考\n\n​\n\nOAuth 授权码授权\n\n。成功创建 OAuth 应用后，你将获得客户端 ID、客户端密钥和重定向地址。客户端密钥需要妥善保管，以避免因泄露而导致的安全风险。\n\n​\n\n2.\n\n在代码中通过环境变量方式设置客户端 ID、客户端密钥和重定向地址。\n\n​\n\n​\n\nGo\n\n复制\n\n//从环境变量获取重定向地址、客户端 ID、客户端密钥\n\n​\n\nfunc\n\nmain\n\n()\n\n{\n\n​\n\nredirectURI := os.Getenv(\n\n\"COZE_WEB_OAUTH_REDIRECT_URI\"\n\n)\n\n// 重定向地址是创建OAuth应用时配置的回调地址，用户授权后会跳转至此地址\n\n​\n\nclientSecret := os.Getenv(\n\n\"COZE_WEB_OAUTH_CLIENT_SECRET\"\n\n)\n\n// 客户端密钥是创建OAuth应用时扣子编程生成的密钥，用于验证应用身份，需妥善保管\n\n​\n\nclientID := os.Getenv(\n\n\"COZE_WEB_OAUTH_CLIENT_ID\"\n\n)\n\n// 客户端ID是创建OAuth应用时扣子编程生成的唯一标识，用于区分不同应用\n\n​\n\nctx\n\n:= context.Background(\n\n)\n\n​\n\n​\n\n// The sdk offers the WebOAuthClient class to establish an authorization for Web OAuth\n\n.\n\n​\n\n// Firstly, it is required to initialize the WebOAuthApp with the client ID and client secret\n\n.\n\n​\n\noauth, err := coze.NewWebOAuthClient(clientID, clientSecret, coze.WithAuthBaseURL(coze.\n\nCozeCnBaseURL\n\n)\n\n)\n\n​\n\nif\n\nerr !=\n\nnil\n\n{\n\n​\n\nfmt.Printf(\n\n\"Failed to create OAuth client: %v\\n\"\n\n, err\n\n)\n\n​\n\nretur\n\nn\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n3.\n\n授权码流程中，会自动生成一个扣子编程授权页面，然后将其发送给需要授权的用户。扣子用户可访问此链接，并根据页面提示完成授权流程。\n\n​\n\n​\n\nGo\n\n复制\n\n// Generate the authorization link and direct the user to open it\n\n.\n\n​\n\noauthURL := oauth.GetOAuthURL(ctx, &coze.GetWebOAuthURLReq\n\n{\n\n​\n\nRedirectURI: redirectURI\n\n,\n\n​\n\nState:\n\n\"state\"\n\n,\n\n​\n\n}\n\n)\n\n​\n\nfmt.Println(oauthURL\n\n)\n\n​\n\n​\n\n// To restrict access to a specific WorkSpace, you can specify the WorkSpaceID when obtaining the URL.\n\n​\n\n// oauthURL = oauth.GetOAuthURL(&coze.GetWebOAuthURLReq\n\n{\n\n​\n\n//  RedirectURI: redirectURI\n\n,\n\n​\n\n//  State:       \"state\"\n\n,\n\n​\n\n//  WorkspaceID: &workspaceID\n\n,\n\n​\n\n// }\n\n)\n\n​\n\n// fmt.Println(oauthURL\n\n)\n\n​\n\n​\n\n4.\n\n用户点击同意授权按钮后，扣子网页会将请求重定向到授权链接中配置的重定向地址。此时，地址中会通过查询参数（Query）携带授权码和状态参数。\n\n​\n\n通过授权码（OAuth code）调用 GetAccessToken 接口即可获取 OAuth Access Token。示例代码如下：\n\n​\n\n​\n\nGo\n\n复制\n\n// After the user clicks the authorization consent button, the coze web page will redirec\n\nt\n\n​\n\n// to the redirect address configured in the authorization link and carry the authorizatio\n\nn\n\n​\n\n// code and state parameters in the address via the query string\n\n.\n\n​\n\n/\n\n/\n\n​\n\n// Get from the query of the redirect interface: query.get('code'\n\n)\n\n​\n\ncode :=\n\n\"mock code\n\n\"\n\n​\n\n​\n\n// After obtaining the code after redirection, the interface to exchange the code for\n\na\n\n​\n\n// token can be invoked to generate the\n\nC\n\noze\n\naccess_token of the authorized user\n\n.\n\n​\n\nresp, err := oauth.GetAccessToken(ctx, &coze.GetWebOAuthAccessTokenReq\n\n{\n\n​\n\nCode:        code\n\n,\n\n​\n\nRedirectURI: redirectURI\n\n,\n\n​\n\n}\n\n)\n\n​\n\nif\n\nerr !=\n\nnil\n\n{\n\n​\n\nfmt.Printf(\n\n\"Failed to get access token: %v\\n\"\n\n, err\n\n)\n\n​\n\nretur\n\nn\n\n​\n\n}\n\n​\n\nfmt.Println(resp\n\n)\n\n​\n\n​\n\n// When the token expires, you can also refresh and re-obtain the toke\n\nn\n\n​\n\nresp, err = oauth.RefreshToken(ctx, resp.RefreshToken\n\n)\n\n​\n\nif\n\nerr !=\n\nnil\n\n{\n\n​\n\nfmt.Printf(\n\n\"Failed to refresh token: %v\\n\"\n\n, err\n\n)\n\n​\n\nretur\n\nn\n\n​\n\n}\n\n​\n\n​\n\nfmt.Printf(\n\n\"%+v\\n\"\n\n, resp\n\n)\n\n​\n\n​\n\n// you can get request log by getLogID metho\n\nd\n\n​\n\nfmt.Println(resp.LogID()\n\n)\n\n​\n\n​\n\n// use the access token to init Coze clien\n\nt\n\n​\n\ncozeCli := coze.NewCozeAPI(coze.NewTokenAuth(resp.AccessToken), coze.WithBaseURL(coze.\n\nCozeCnBaseURL\n\n)\n\n)\n\n​\n\n_ = cozeCl\n\ni\n\n​\n\n​\n\n配置 OAuth PKCE 授权流程\n\n​\n\n如果选择使用 OAuth PKCE 方式完成授权，可参考以下流程及示例代码。\n\n​\n\n1.\n\n创建 OAuth 应用。\n\n​\n\n具体操作步骤可参考\n\n​\n\nOAuth PKCE\n\n。成功创建 OAuth 应用后，你将获得客户端 ID 和重定向地址。\n\n​\n\n2.\n\n在代码中通过环境变量方式设置客户端 ID 和重定向地址。\n\n​\n\n​\n\nGo\n\n复制\n\n//从环境变量获取重定向地址、客户端 ID\n\n​\n\nredirectURI := os.Getenv(\n\n\"COZE_PKCE_OAUTH_REDIRECT_URI\"\n\n)\n\n// 重定向地址是创建PKCE类型OAuth应用时配置的前端回调地址\n\n​\n\nclientID := os.Getenv(\n\n\"COZE_PKCE_OAUTH_CLIENT_ID\"\n\n)\n\n// 客户端ID是创建PKCE类型OAuth应用时扣子编程生成的唯一标识\n\n​\n\n​\n\n/\n\n/\n\n​\n\n// The default access is api.coze.com, but if you need to access api.coze.cn\n\n,\n\n​\n\n// please use base_url to configure the api endpoint to acces\n\ns\n\n​\n\n​\n\noauth\n\n, err := coze.NewPKCEOAuthClient(clientID, coze.WithAuthBaseURL(coze.\n\nCozeCnBaseURL\n\n)\n\n)\n\n​\n\nif\n\nerr !=\n\nnil\n\n{\n\n​\n\nfmt.Printf(\n\n\"Failed to create OAuth client: %v\\n\"\n\n, err\n\n)\n\n​\n\nretur\n\nn\n\n​\n\n}\n\n​\n\n​\n\n3.\n\n在代码中实现 OAuth PKCE 授权流程。\n\n​\n\n客户端生成一个随机值\n\ncode_verifier\n\n，并使用指定算法（通常为 SHA-256 算法）将其转换为\n\ncode_challenge\n\n。然后，基于回调地址、\n\ncode_challenge\n\n和\n\ncode_challenge_method\n\n，生成一个授权链接。\n\n​\n\n在此过程中，\n\ncode_verifier\n\n由 SDK 生成，并与生成的授权链接一同返回给调用方。\n\n​\n\n​\n\nGo\n\n复制\n\n// In the SDK, we have wrapped up the code_challenge process of PKCE.\n\n​\n\n// Developers only need to select the code_challenge_method.\n\n​\n\noauthURL, err := oauth.GenOAuthURL(&coze.GetPKCEAuthURLReq{\n\n​\n\nRedirectURI: redirectURI,\n\n​\n\nState:\n\n\"state\"\n\n,\n\n​\n\nMethod:      coze.CodeChallengeMethodS256.Ptr(),\n\n​\n\n})\n\n​\n\nif\n\nerr !=\n\nnil\n\n{\n\n​\n\nfmt.Printf(\n\n\"Failed to generate OAuth URL: %v\\n\"\n\n, err)\n\n​\n\nreturn\n\n​\n\n}\n\n​\n\n// URL that users need to click.\n\n​\n\nfmt.Println(oauthURL.AuthorizationURL)\n\n​\n\n//\n\nThe code verifier generated by the SDK\n\n​\n\nfmt.Println(oauthURL.CodeVerifier)\n\n​\n\n​\n\n// Specify the workspaceID to limit the scope of the token\n\n​\n\n// oauthURL, err := oauth.GenOAuthURL(&coze.GetPKCEOAuthURLReq{\n\n​\n\n//        RedirectURI: redirectURI, State: \"state\",\n\n​\n\n//        Method: coze.CodeChallengeMethodS256.Ptr(),\n\n​\n\n//        WorkspaceID: &workspace_id,\n\n​\n\n//     })\n\n​\n\n// if err != nil {\n\n​\n\n//  fmt.Printf(\"Failed to generate OAuth URL with workspaces: %v\\n\", err)\n\n​\n\n//  return\n\n​\n\n// }\n\n​\n\n// fmt.Println(oauthURL.AuthorizationURL)\n\n​\n\n//  fmt.Println(oauthURL.CodeVerifier)\n\n​\n\n​\n\n4.\n\n完成授权。\n\n​\n\n开发者应该引导用户打开生成的授权链接。当用户同意授权时，扣子编程会将页面重定向到开发者配置的回调地址。在这个回调请求中，开发者可以获取到授权码\n\ncode\n\n。\n\n​\n\n在获取\n\ncode\n\n后，为了交换访问令牌，开发者需要调用\n\nGetAccessToken\n\n方法。在调用此方法时，需要将之前 SDK 生成的\n\ncode_verifier\n\n一同作为参数传入。\n\n​\n\n​\n\nGo\n\n复制\n\n// After the user clicks the authorization consent button\n\n,\n\n​\n\n// the coze web page will redirect to the redirect address configured in the authorization lin\n\nk\n\n​\n\n// and carry the authorization code and state parameters\n\nin\n\nthe address via the query string\n\n.\n\n​\n\n// Get from the query of the redirect interface : query.get('code'\n\n)\n\n​\n\ncode :=\n\n\"mock code\n\n\"\n\n​\n\ncodeVerifier := oauthURL.CodeVerifie\n\nr\n\n​\n\n// After obtaining the code after redirection, the interface to exchange the code for\n\na\n\n​\n\n// token can be invoked to generate the\n\ncoze\n\naccess_token of the authorized user\n\n.\n\n​\n\n// The developer should use code verifier returned by genOAuthURL() metho\n\nd\n\n​\n\nresp, err := oauth.GetAccessToken(ctx, &coze.GetPKCEAccessTokenReq\n\n{\n\n​\n\nCode: code\n\n,\n\n​\n\nRedirectURI: redirectURI,\n\n​\n\nCodeVerifier: codeVerifier}\n\n)\n\n​\n\nif\n\nerr !=\n\nnil\n\n{\n\n​\n\nfmt.Printf(\n\n\"Failed to get access token: %v\\n\"\n\n, err\n\n)\n\n​\n\nretur\n\nn\n\n​\n\n}\n\n​\n\nfmt.Printf(\n\n\"%+v\\n\"\n\n, resp\n\n)\n\n​\n\n​\n\n// use the access token to init Coze clien\n\nt\n\n​\n\ncozeCli := coze.NewCozeAPI(coze.NewTokenAuth(resp.AccessToken), coze.WithBaseURL(coze.\n\nCozeCnBaseURL\n\n)\n\n)\n\n​\n\n_ = cozeCl\n\ni\n\n​\n\n​\n\n// When the token expires, you can also refresh and re-obtain the toke\n\nn\n\n​\n\nresp, err = oauth.RefreshToken(ctx, resp.RefreshToken\n\n)\n\n​\n\nif\n\nerr !=\n\nnil\n\n{\n\n​\n\nfmt.Printf(\n\n\"Failed to refresh token: %v\\n\"\n\n, err\n\n)\n\n​\n\nretur\n\nn\n\n​\n\n}\n\n​\n\nfmt.Println(resp\n\n)\n\n​\n\n​\n\n配置 OAuth 设备码授权流程\n\n​\n\n如果选择使用 OAuth 设备码方式完成授权，可参考以下流程及示例代码。\n\n​\n\n1.\n\n创建 OAuth 应用。\n\n​\n\n具体操作步骤可参考\n\n​\n\nOAuth 设备授权\n\n。成功创建 OAuth 应用后，你将获得客户端 ID。\n\n​\n\n2.\n\n在代码中通过环境变量方式设置客户端 ID。\n\n​\n\n​\n\nGo\n\n复制\n\nfunc\n\nmain\n\n()\n\n{\n\n​\n\nclientID := os.Getenv(\n\n\"COZE_DEVICE_OAUTH_CLIENT_ID\"\n\n)\n\n// 从环境变量获取客户端ID，客户端ID是创建设备码类型OAuth应用时平台生成的唯一标识\n\n​\n\n​\n\n// The default access is api.coze.com, but if you need to access api.coze.cn\n\n,\n\n​\n\n// please use base_url to configure the api endpoint to acces\n\ns\n\n​\n\nctx\n\n:= context.Background(\n\n)\n\n​\n\n​\n\noauth, err := coze.NewDeviceOAuthClient(clientID, coze.WithAuthBaseURL(coze.\n\nCozeCnBaseURL\n\n)\n\n)\n\n​\n\nif\n\nerr !=\n\nnil\n\n{\n\n​\n\nfmt.Printf(\n\n\"Failed to create OAuth client: %v\\n\"\n\n, err\n\n)\n\n​\n\nretur\n\nn\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n3.\n\n通过 OAuth 设备码授权流程，可以获得访问密钥。\n\n​\n\n应用程序需要调用 扣子编程 OpenAPI 来生成设备代码，获取\n\nUserCode\n\n和\n\nDeviceCode\n\n。使用\n\nUserCode\n\n生成授权链接，然后引导用户打开该链接。在页面中，用户需要输入\n\nUserCode\n\n并同意授权。用户同意授权后，应用程序再次调用扣子编程 OpenAPI，通过提供的\n\nDeviceCode\n\n来生成访问密钥。\n\n​\n\nSDK 已经拼接了 URL，只需将 SDK 返回的 URL 交给用户进行操作即可。\n\n​\n\n​\n\nGo\n\n复制\n\n// First, make a call to obtain 'GetDeviceCode'\n\n​\n\n​\n\ncodeResp, err := oauth.GetDeviceCode(ctx,\n\nnil\n\n)\n\n​\n\nif\n\nerr !=\n\nnil\n\n{\n\n​\n\nfmt.Printf(\n\n\"Failed to get device code: %v\\n\"\n\n, err)\n\n​\n\nreturn\n\n​\n\n}\n\n​\n\nfmt.Printf(\n\n\"%+v\\n\"\n\n, codeResp)\n\n​\n\nfmt.Println(codeResp.LogID())\n\n​\n\n// The returned device_code contains an authorization link. Developers need to guide users\n\n​\n\n// to open up this link.\n\n​\n\n// open codeResp.getVerificationUri\n\n​\n\n​\n\nfmt.Printf(\n\n\"Please open url: %s\\n\"\n\n, codeResp.VerificationURL)\n\n​\n\n​\n\n// 也可以指定 workspace，限制生效范围\n\n​\n\n// codeResp, err = oauth.GetDeviceCode(ctx, &coze.GetDeviceOAuthCodeReq{\n\n​\n\n//  WorkspaceID: &workspaceID,\n\n​\n\n// })\n\n​\n\n​\n\n4.\n\n在通过设备码授权流程中，应用程序需要使用\n\nDeviceCode\n\n来轮询扣子编程 OpenAPI，以获取访问密钥。\n\n​\n\nCoze API Go SDK 已经封装了这部分的逻辑，并处理了不同的错误返回代码。开发者只需调用\n\nGetAccessToken\n\n方法即可。\n\n​\n\n​\n\nGo\n\n复制\n\nresp, err := oauth.GetAccessToken(ctx, &coze.GetDeviceOAuthAccessTokenReq{\n\n​\n\nDeviceCode: codeResp.DeviceCode,\n\n​\n\nPoll:\n\ntrue\n\n,\n\n​\n\n})\n\n​\n\nif\n\nerr !=\n\nnil\n\n{\n\n​\n\nauthErr, ok := coze.\n\nAsAuthError\n\n(err)\n\n​\n\nif\n\n!ok {\n\n​\n\nfmt.Printf(\n\n\"Failed to get access token: %v\\n\"\n\n, err)\n\n​\n\nreturn\n\n​\n\n}\n\n​\n\nswitch\n\nauthErr.Code {\n\n​\n\ncase\n\ncoze.AccessDenied:\n\n​\n\n// The user rejected the authorization.\n\n​\n\n// Developers need to guide the user to open the authorization link again.\n\n​\n\nfmt.Println(\n\n\"access denied\"\n\n)\n\n​\n\ncase\n\ncoze.ExpiredToken:\n\n​\n\n// The token has expired. Developers need to guide the user to open\n\n​\n\n// the authorization link again.\n\n​\n\nfmt.Println(\n\n\"expired token\"\n\n)\n\n​\n\ndefault\n\n:\n\n​\n\nfmt.Printf(\n\n\"Unexpected error: %v\\n\"\n\n, err)\n\n​\n\n​\n\nreturn\n\n​\n\n}\n\n​\n\n}\n\n​\n\nfmt.Printf(\n\n\"%+v\\n\"\n\n, resp)\n\n​\n\n​\n\n配置 OAuth JWT 授权流程\n\n​\n\n如果选择使用 OAuth JWT 方式完成授权，可参考以下流程及示例代码。\n\n​\n\n1.\n\n创建 OAuth 应用并授权。\n\n​\n\n具体操作步骤可参考\n\n​\n\nOAuth JWT 授权（开发者）\n\n。成功创建 OAuth 应用后，你将获得客户端 ID、公钥和私钥。你需要妥善保管公钥和私钥，以免数据泄露引发安全风险。\n\n​\n\n2.\n\n在代码中通过环境变量方式设置客户端 ID、公钥和私钥。\n\n​\n\n​\n\nGo\n\n复制\n\n// The default access is api.coze.com, but if you need to access api.coze.cn,\n\n​\n\n// please use base_url to configure the api endpoint to access\n\n​\n\ncozeAPIBase := os.Getenv(\n\n\"COZE_API_BASE\"\n\n)\n\n​\n\njwtOauthClientID := os.Getenv(\n\n\"COZE_JWT_OAUTH_CLIENT_ID\"\n\n)\n\n// 从环境变量获取JWT授权的客户端ID，创建JWT类型OAuth应用时平台生成的唯一标识符\n\n​\n\njwtOauthPrivateKey := os.Getenv(\n\n\"COZE_JWT_OAUTH_PRIVATE_KEY\"\n\n)\n\n// 从环境变量获取 OAuth 应用的私钥，用于签署JWT，可以在\n\nOAuth 应用\n\n页面找到这个应用，在\n\n操作\n\n列单击编辑图标，进入\n\n配置\n\n页面下载私钥文件\n\n​\n\njwtOauthPrivateKeyFilePath := os.Getenv(\n\n\"COZE_JWT_OAUTH_PRIVATE_KEY_FILE_PATH\"\n\n)\n\n// 从环境变量获取私钥文件路径，私钥文件在本地的存储路径，开发者自行指定\n\n​\n\njwtOauthPublicKeyID := os.Getenv(\n\n\"COZE_JWT_OAUTH_PUBLIC_KEY_ID\"\n\n)\n\n//OAuth 应用的\n\n公钥指纹\n\n，可以在\n\nOAuth 应用\n\n页面找到这个应用，在\n\n操作\n\n列单击编辑图标，进入\n\n配置\n\n页面查看公钥指纹。\n\n​\n\n​\n\n// Read private key from file\n\n​\n\nprivateKeyBytes, err := os.ReadFile(jwtOauthPrivateKeyFilePath)\n\n​\n\nif\n\nerr !=\n\nnil\n\n{\n\n​\n\nfmt.Printf(\n\n\"Error reading private key file: %v\\n\"\n\n, err)\n\n​\n\n}\n\n​\n\njwtOauthPrivateKey =\n\nstring\n\n(privateKeyBytes)\n\n​\n\n​\n\n// The jwt oauth type requires using private to be able to issue a jwt token, and through the jwt token,\n\n​\n\n// apply for an access_token from the coze service.The sdk encapsulates this procedure,\n\n​\n\n// and only needs to use get_access_token to obtain the access_token under the jwt oauth process.\n\n​\n\n// Generate the authorization token The default ttl is 900s, and developers can customize the expiration time,\n\n​\n\n// which can be set up to 24 hours at most.\n\n​\n\noauth, err := coze.NewJWTOAuthClient(coze.NewJWTOAuthClientParam{\n\n​\n\nClientID: jwtOauthClientID, PublicKey: jwtOauthPublicKeyID, PrivateKeyPEM: jwtOauthPrivateKey,\n\n​\n\n}, coze.WithAuthBaseURL(cozeAPIBase))\n\n​\n\nif\n\nerr !=\n\nnil\n\n{\n\n​\n\nfmt.Printf(\n\n\"Error creating JWT OAuth client: %v\\n\"\n\n, err)\n\n​\n\n}\n\n​\n\n​\n\n3.\n\n应用程序通过公钥和私钥签署 JWT，并通过扣子编程提供的 API 获取访问密钥。\n\n​\n\nCoze API Go SDK 封装了这一过程，你只需要在OAuth JWT 流程中使用 get_access_token 来获取访问密钥即可。\n\n​\n\n​\n\nGo\n\n复制\n\nresp, err := oauth.GetAccessToken(ctx,\n\nnil\n\n)\n\n​\n\nif\n\nerr !=\n\nnil\n\n{\n\n​\n\nfmt.Printf(\n\n\"Error getting access token: %v\\n\"\n\n, err)\n\n​\n\nreturn\n\n​\n\n}\n\n​\n\nfmt.Printf(\n\n\"Access token response: %+v\\n\"\n\n, resp)\n\n​\n\nfmt.Println(resp.LogID())\n\n​\n\n​\n\n上一篇\n\n安装 Go SDK\n\n下一篇\n\n快速开始",
        "links": []
      },
      "markdown": "| 访问密钥类型​ | 鉴权方式​ | 说明​ | 示例文件​ |\n| 个人访问密钥​ | 个人访问密钥​ | Personal Access Token，简称 PAT。扣子编程中生成的个人访问令牌。PAT 生成与使用便捷，适用于测试环境调试等场景。每个令牌可以关联多个空间，并开通指定的接口权限。生成方式可参考​添加个人访问令牌。​ | pat_example.go​ |\n| 服务访问令牌（SAT）​ | 服务访问令牌（SAT）​ | Service Access Token（简称 SAT）是以服务身份创建的访问凭证，可长期有效访问扣子编程资源，通常用于服务/应用程序的身份验证和授权。生成方式可参考​添加服务访问令牌。​SAT 的示例代码与 PAT 通用，可直接参考 PAT 的示例文件。​ | pat_example.go​ |\n| OAuth 认证​​ | 授权码授权​（Authorization Code Flow）​ | 适用于有显著前后端之分的应用程序授权场景。其中前端模块负责与用户交互，后端服务处理前端请求，与扣子编程授权服务器和 OpenAPI 交互。 实现流程可参考​OAuth 授权码授权。​ | web_oauth_example.go​ |\n| ​ | PKCE 授权​（Authorization Code Flow with PKCE）​ | 应用程序无后端服务，所有操作都发生在应用程序的前端。 实现流程可参考​OAuth PKCE。​ | pkce_example.go​ |\n| ​ | 设备码授权​（Device Code Flow）​ | 应用程序无后端服务，所有操作都发生在应用程序的 Command Line，且 Command Line 无法提供“同意授权”的操作。 实现流程可参考​OAuth 设备授权。​ | device_example.go​ |\n| ​ | JWT 授权​（JWT Flow）​ | 应用程序服务端直接调用扣子编程 OpenAPI。​应用程序后端服务代理应用程序自己的用户获取身份凭据，应用程序用户基于凭据直接访问 OpenAPI。 实现流程可参考​OAuth JWT 授权（开发者）。​ | jwt_example.go​ |\n\n\n- 其中 COZE_API_TOKEN 是扣子编程中申请的个人访问密钥。 ​\n\n- ​ Shell 复制 export COZE_API_TOKEN=pat_**** ​ ​\n\n\n- 示例代码如下： ​\n\n- ​ Go 复制 func main () { ​ // Get an access token using the personal access token or oauth. ​ token := os.Getenv( \"COZE_API_TOKEN\" ) ​ authCli := coze.NewTokenAuth(token) ​ ​ /* ​ * The default access is api.coze.com, but if you need to access api.coze.cn ​ * please use baseUrl to configure the API endpoint to access ​ */ ​ cozeCli := coze.NewCozeAPI(authCli, coze.WithBaseURL( coze. CozeCnBaseURL )) ​ } ​ ​\n\n\n- 具体操作步骤可参考 ​ OAuth 授权码授权 。成功创建 OAuth 应用后，你将获得客户端 ID、客户端密钥和重定向地址。客户端密钥需要妥善保管，以避免因泄露而导致的安全风险。 ​\n\n\n- ​ Go 复制 //从环境变量获取重定向地址、客户端 ID、客户端密钥 ​ func main () { ​ redirectURI := os.Getenv( \"COZE_WEB_OAUTH_REDIRECT_URI\" ) // 重定向地址是创建OAuth应用时配置的回调地址，用户授权后会跳转至此地址 ​ clientSecret := os.Getenv( \"COZE_WEB_OAUTH_CLIENT_SECRET\" ) // 客户端密钥是创建OAuth应用时扣子编程生成的密钥，用于验证应用身份，需妥善保管 ​ clientID := os.Getenv( \"COZE_WEB_OAUTH_CLIENT_ID\" ) // 客户端ID是创建OAuth应用时扣子编程生成的唯一标识，用于区分不同应用 ​ ctx := context.Background( ) ​ ​ // The sdk offers the WebOAuthClient class to establish an authorization for Web OAuth . ​ // Firstly, it is required to initialize the WebOAuthApp with the client ID and client secret . ​ oauth, err := coze.NewWebOAuthClient(clientID, clientSecret, coze.WithAuthBaseURL(coze. CozeCnBaseURL ) ) ​ if err != nil { ​ fmt.Printf( \"Failed to create OAuth client: %v\\n\" , err ) ​ retur n ​ } ​ } ​ ​\n\n\n- ​ Go 复制 // Generate the authorization link and direct the user to open it . ​ oauthURL := oauth.GetOAuthURL(ctx, &coze.GetWebOAuthURLReq { ​ RedirectURI: redirectURI , ​ State: \"state\" , ​ } ) ​ fmt.Println(oauthURL ) ​ ​ // To restrict access to a specific WorkSpace, you can specify the WorkSpaceID when obtaining the URL. ​ // oauthURL = oauth.GetOAuthURL(&coze.GetWebOAuthURLReq { ​ //  RedirectURI: redirectURI , ​ //  State:       \"state\" , ​ //  WorkspaceID: &workspaceID , ​ // } ) ​ // fmt.Println(oauthURL ) ​ ​\n\n\n- 通过授权码（OAuth code）调用 GetAccessToken 接口即可获取 OAuth Access Token。示例代码如下： ​\n\n- ​ Go 复制 // After the user clicks the authorization consent button, the coze web page will redirec t ​ // to the redirect address configured in the authorization link and carry the authorizatio n ​ // code and state parameters in the address via the query string . ​ / / ​ // Get from the query of the redirect interface: query.get('code' ) ​ code := \"mock code \" ​ ​ // After obtaining the code after redirection, the interface to exchange the code for a ​ // token can be invoked to generate the C oze access_token of the authorized user . ​ resp, err := oauth.GetAccessToken(ctx, &coze.GetWebOAuthAccessTokenReq { ​ Code:        code , ​ RedirectURI: redirectURI , ​ } ) ​ if err != nil { ​ fmt.Printf( \"Failed to get access token: %v\\n\" , err ) ​ retur n ​ } ​ fmt.Println(resp ) ​ ​ // When the token expires, you can also refresh and re-obtain the toke n ​ resp, err = oauth.RefreshToken(ctx, resp.RefreshToken ) ​ if err != nil { ​ fmt.Printf( \"Failed to refresh token: %v\\n\" , err ) ​ retur n ​ } ​ ​ fmt.Printf( \"%+v\\n\" , resp ) ​ ​ // you can get request log by getLogID metho d ​ fmt.Println(resp.LogID() ) ​ ​ // use the access token to init Coze clien t ​ cozeCli := coze.NewCozeAPI(coze.NewTokenAuth(resp.AccessToken), coze.WithBaseURL(coze. CozeCnBaseURL ) ) ​ _ = cozeCl i ​ ​\n\n\n- 具体操作步骤可参考 ​ OAuth PKCE 。成功创建 OAuth 应用后，你将获得客户端 ID 和重定向地址。 ​\n\n\n\n- 客户端生成一个随机值 code_verifier ，并使用指定算法（通常为 SHA-256 算法）将其转换为 code_challenge 。然后，基于回调地址、 code_challenge 和 code_challenge_method ，生成一个授权链接。 ​\n\n- 在此过程中， code_verifier 由 SDK 生成，并与生成的授权链接一同返回给调用方。 ​\n\n- ​ Go 复制 // In the SDK, we have wrapped up the code_challenge process of PKCE. ​ // Developers only need to select the code_challenge_method. ​ oauthURL, err := oauth.GenOAuthURL(&coze.GetPKCEAuthURLReq{ ​ RedirectURI: redirectURI, ​ State: \"state\" , ​ Method:      coze.CodeChallengeMethodS256.Ptr(), ​ }) ​ if err != nil { ​ fmt.Printf( \"Failed to generate OAuth URL: %v\\n\" , err) ​ return ​ } ​ // URL that users need to click. ​ fmt.Println(oauthURL.AuthorizationURL) ​ // The code verifier generated by the SDK ​ fmt.Println(oauthURL.CodeVerifier) ​ ​ // Specify the workspaceID to limit the scope of the token ​ // oauthURL, err := oauth.GenOAuthURL(&coze.GetPKCEOAuthURLReq{ ​ //        RedirectURI: redirectURI, State: \"state\", ​ //        Method: coze.CodeChallengeMethodS256.Ptr(), ​ //        WorkspaceID: &workspace_id, ​ //     }) ​ // if err != nil { ​ //  fmt.Printf(\"Failed to generate OAuth URL with workspaces: %v\\n\", err) ​ //  return ​ // } ​ // fmt.Println(oauthURL.AuthorizationURL) ​ //  fmt.Println(oauthURL.CodeVerifier) ​ ​\n\n\n- 开发者应该引导用户打开生成的授权链接。当用户同意授权时，扣子编程会将页面重定向到开发者配置的回调地址。在这个回调请求中，开发者可以获取到授权码 code 。 ​\n\n- 在获取 code 后，为了交换访问令牌，开发者需要调用 GetAccessToken 方法。在调用此方法时，需要将之前 SDK 生成的 code_verifier 一同作为参数传入。 ​\n\n- ​ Go 复制 // After the user clicks the authorization consent button , ​ // the coze web page will redirect to the redirect address configured in the authorization lin k ​ // and carry the authorization code and state parameters in the address via the query string . ​ // Get from the query of the redirect interface : query.get('code' ) ​ code := \"mock code \" ​ codeVerifier := oauthURL.CodeVerifie r ​ // After obtaining the code after redirection, the interface to exchange the code for a ​ // token can be invoked to generate the coze access_token of the authorized user . ​ // The developer should use code verifier returned by genOAuthURL() metho d ​ resp, err := oauth.GetAccessToken(ctx, &coze.GetPKCEAccessTokenReq { ​ Code: code , ​ RedirectURI: redirectURI, ​ CodeVerifier: codeVerifier} ) ​ if err != nil { ​ fmt.Printf( \"Failed to get access token: %v\\n\" , err ) ​ retur n ​ } ​ fmt.Printf( \"%+v\\n\" , resp ) ​ ​ // use the access token to init Coze clien t ​ cozeCli := coze.NewCozeAPI(coze.NewTokenAuth(resp.AccessToken), coze.WithBaseURL(coze. CozeCnBaseURL ) ) ​ _ = cozeCl i ​ ​ // When the token expires, you can also refresh and re-obtain the toke n ​ resp, err = oauth.RefreshToken(ctx, resp.RefreshToken ) ​ if err != nil { ​ fmt.Printf( \"Failed to refresh token: %v\\n\" , err ) ​ retur n ​ } ​ fmt.Println(resp ) ​ ​\n\n\n- 具体操作步骤可参考 ​ OAuth 设备授权 。成功创建 OAuth 应用后，你将获得客户端 ID。 ​\n\n\n- ​ Go 复制 func main () { ​ clientID := os.Getenv( \"COZE_DEVICE_OAUTH_CLIENT_ID\" ) // 从环境变量获取客户端ID，客户端ID是创建设备码类型OAuth应用时平台生成的唯一标识 ​ ​ // The default access is api.coze.com, but if you need to access api.coze.cn , ​ // please use base_url to configure the api endpoint to acces s ​ ctx := context.Background( ) ​ ​ oauth, err := coze.NewDeviceOAuthClient(clientID, coze.WithAuthBaseURL(coze. CozeCnBaseURL ) ) ​ if err != nil { ​ fmt.Printf( \"Failed to create OAuth client: %v\\n\" , err ) ​ retur n ​ } ​ } ​ ​\n\n\n- 应用程序需要调用 扣子编程 OpenAPI 来生成设备代码，获取 UserCode 和 DeviceCode 。使用 UserCode 生成授权链接，然后引导用户打开该链接。在页面中，用户需要输入 UserCode 并同意授权。用户同意授权后，应用程序再次调用扣子编程 OpenAPI，通过提供的 DeviceCode 来生成访问密钥。 ​\n\n- SDK 已经拼接了 URL，只需将 SDK 返回的 URL 交给用户进行操作即可。 ​\n\n- ​ Go 复制 // First, make a call to obtain 'GetDeviceCode' ​ ​ codeResp, err := oauth.GetDeviceCode(ctx, nil ) ​ if err != nil { ​ fmt.Printf( \"Failed to get device code: %v\\n\" , err) ​ return ​ } ​ fmt.Printf( \"%+v\\n\" , codeResp) ​ fmt.Println(codeResp.LogID()) ​ // The returned device_code contains an authorization link. Developers need to guide users ​ // to open up this link. ​ // open codeResp.getVerificationUri ​ ​ fmt.Printf( \"Please open url: %s\\n\" , codeResp.VerificationURL) ​ ​ // 也可以指定 workspace，限制生效范围 ​ // codeResp, err = oauth.GetDeviceCode(ctx, &coze.GetDeviceOAuthCodeReq{ ​ //  WorkspaceID: &workspaceID, ​ // }) ​ ​\n\n\n- Coze API Go SDK 已经封装了这部分的逻辑，并处理了不同的错误返回代码。开发者只需调用 GetAccessToken 方法即可。 ​\n\n- ​ Go 复制 resp, err := oauth.GetAccessToken(ctx, &coze.GetDeviceOAuthAccessTokenReq{ ​ DeviceCode: codeResp.DeviceCode, ​ Poll: true , ​ }) ​ if err != nil { ​ authErr, ok := coze. AsAuthError (err) ​ if !ok { ​ fmt.Printf( \"Failed to get access token: %v\\n\" , err) ​ return ​ } ​ switch authErr.Code { ​ case coze.AccessDenied: ​ // The user rejected the authorization. ​ // Developers need to guide the user to open the authorization link again. ​ fmt.Println( \"access denied\" ) ​ case coze.ExpiredToken: ​ // The token has expired. Developers need to guide the user to open ​ // the authorization link again. ​ fmt.Println( \"expired token\" ) ​ default : ​ fmt.Printf( \"Unexpected error: %v\\n\" , err) ​ ​ return ​ } ​ } ​ fmt.Printf( \"%+v\\n\" , resp) ​ ​\n\n\n- 具体操作步骤可参考 ​ OAuth JWT 授权（开发者） 。成功创建 OAuth 应用后，你将获得客户端 ID、公钥和私钥。你需要妥善保管公钥和私钥，以免数据泄露引发安全风险。 ​\n\n\n- ​ Go 复制 // The default access is api.coze.com, but if you need to access api.coze.cn, ​ // please use base_url to configure the api endpoint to access ​ cozeAPIBase := os.Getenv( \"COZE_API_BASE\" ) ​ jwtOauthClientID := os.Getenv( \"COZE_JWT_OAUTH_CLIENT_ID\" ) // 从环境变量获取JWT授权的客户端ID，创建JWT类型OAuth应用时平台生成的唯一标识符 ​ jwtOauthPrivateKey := os.Getenv( \"COZE_JWT_OAUTH_PRIVATE_KEY\" ) // 从环境变量获取 OAuth 应用的私钥，用于签署JWT，可以在 OAuth 应用 页面找到这个应用，在 操作 列单击编辑图标，进入 配置 页面下载私钥文件 ​ jwtOauthPrivateKeyFilePath := os.Getenv( \"COZE_JWT_OAUTH_PRIVATE_KEY_FILE_PATH\" ) // 从环境变量获取私钥文件路径，私钥文件在本地的存储路径，开发者自行指定 ​ jwtOauthPublicKeyID := os.Getenv( \"COZE_JWT_OAUTH_PUBLIC_KEY_ID\" ) //OAuth 应用的 公钥指纹 ，可以在 OAuth 应用 页面找到这个应用，在 操作 列单击编辑图标，进入 配置 页面查看公钥指纹。 ​ ​ // Read private key from file ​ privateKeyBytes, err := os.ReadFile(jwtOauthPrivateKeyFilePath) ​ if err != nil { ​ fmt.Printf( \"Error reading private key file: %v\\n\" , err) ​ } ​ jwtOauthPrivateKey = string (privateKeyBytes) ​ ​ // The jwt oauth type requires using private to be able to issue a jwt token, and through the jwt token, ​ // apply for an access_token from the coze service.The sdk encapsulates this procedure, ​ // and only needs to use get_access_token to obtain the access_token under the jwt oauth process. ​ // Generate the authorization token The default ttl is 900s, and developers can customize the expiration time, ​ // which can be set up to 24 hours at most. ​ oauth, err := coze.NewJWTOAuthClient(coze.NewJWTOAuthClientParam{ ​ ClientID: jwtOauthClientID, PublicKey: jwtOauthPublicKeyID, PrivateKeyPEM: jwtOauthPrivateKey, ​ }, coze.WithAuthBaseURL(cozeAPIBase)) ​ if err != nil { ​ fmt.Printf( \"Error creating JWT OAuth client: %v\\n\" , err) ​ } ​ ​\n\n\n- Coze API Go SDK 封装了这一过程，你只需要在OAuth JWT 流程中使用 get_access_token 来获取访问密钥即可。 ​\n\n- ​ Go 复制 resp, err := oauth.GetAccessToken(ctx, nil ) ​ if err != nil { ​ fmt.Printf( \"Error getting access token: %v\\n\" , err) ​ return ​ } ​ fmt.Printf( \"Access token response: %+v\\n\" , resp) ​ fmt.Println(resp.LogID()) ​ ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/go_getting_started",
      "title": "快速开始",
      "content": {
        "sections": [],
        "full_text": "快速开始\n\n本文介绍如何使用 Coze API Go SDK 完成扣子编程的常用操作，例如如何初始化 SDK、创建一个智能体草稿、发布智能体为 API 服务、和智能体对话等。\n\n​\n\n准备工作\n\n​\n\n初始化 SDK 前，请确认已完成以下操作：\n\n​\n\n已安装 Coze API Go SDK。详见\n\n​\n\n安装 Go SDK\n\n。\n\n​\n\n已实现授权流程，并通过环境变量方式配置了访问密钥。详细说明可参考\n\n​\n\n配置访问密钥\n\n。\n\n​\n\n说明\n\n请确保扣子编程 Go SDK 版本已升级至\n\nv0.0.0-20250604025746-0d3b62f445d2\n\n及之后版本，以免调用\n\n​\n\n发起对话\n\n或\n\n​\n\n执行对话流\n\nAPI 失败。\n\n​\n\n​\n\n初始化 SDK\n\n​\n\n初始化 Coze client 之后，才可以向扣子编程服务端发送 OpenAPI 请求。初始化时推荐通过环境变量动态获取访问密钥，以免硬编码引发数据安全风险。\n\n​\n\n初始化代码如下：\n\n​\n\n​\n\nGo\n\n复制\n\n// This examples demonstrates how to initialize the Coze client with different configurations.\n\n​\n\nfunc\n\nmain\n\n()\n\n{\n\n​\n\n// Get an access_token through personal access token or oauth.\n\n​\n\ntoken := os.Getenv(\n\n\"COZE_API_TOKEN\"\n\n)\n\n​\n\nauthCli := coze.NewTokenAuth(token)\n\n​\n\n​\n\n// 1. Initialize with default configuration\n\n​\n\ncozeCli1 := coze.NewCozeAPI(authCli)\n\n​\n\nfmt.Println(\n\n\"client 1:\"\n\n, cozeCli1)\n\n​\n\n​\n\n// 2. Initialize with custom base URL\n\n​\n\ncozeAPIBase := os.Getenv(\n\n\"COZE_API_BASE\"\n\n)\n\n​\n\ncozeCli2 := coze.NewCozeAPI(authCli, coze.WithBaseURL(cozeAPIBase))\n\n​\n\nfmt.Println(\n\n\"client 2:\"\n\n, cozeCli2)\n\n​\n\n​\n\n// 3. Initialize with custom HTTP client\n\n​\n\ncustomClient := &http.Client{\n\n​\n\nTimeout:\n\n30\n\n* time.Second,\n\n​\n\nTransport: &http.Transport{\n\n​\n\nMaxIdleConns:\n\n100\n\n,\n\n​\n\nMaxIdleConnsPerHost:\n\n100\n\n,\n\n​\n\nIdleConnTimeout:\n\n90\n\n* time.Second,\n\n​\n\n},\n\n​\n\n}\n\n​\n\ncozeCli3 := coze.NewCozeAPI(authCli,\n\n​\n\ncoze.WithBaseURL(cozeAPIBase),\n\n​\n\ncoze.WithHttpClient(customClient),\n\n​\n\n)\n\n​\n\nfmt.Println(\n\n\"client 3:\"\n\n, cozeCli3)\n\n​\n\n}\n\n​\n\n​\n\n创建并发布智能体为 API 服务\n\n​\n\n通过 API 方式和智能体对话之前，你需要先创建一个智能体，并将其发布为 API 服务。你可以在扣子编程中创建智能体并发布，也可以通过调用相关的 API 实现。调用 API 创建智能体时，部分配置对应的 API 参数暂未开放，你只能为智能体添加知识库等有限的配置。创建智能体的操作步骤可参考\n\n​\n\n搭建一个低代码智能体\n\n。将智能体发布为 API 服务的操作步骤可参考\n\n​\n\n发布为 API 服务\n\n。\n\n​\n\n关于创建草稿智能体的完整示例代码，请参见\n\nGitHub 示例\n\n。\n\n​\n\n相关 API 接口描述，请参见：\n\n​\n\n​\n\n创建智能体\n\n。\n\n​\n\n​\n\n发布智能体\n\n。\n\n​\n\n示例代码如下：\n\n​\n\n​\n\nGo\n\n复制\n\n// This examples is for describing how to create a bot, update a bot and publish a bot to the API.\n\n​\n\nfunc\n\nmain\n\n()\n\n{\n\n​\n\n// Get an access_token through personal access token or oauth.\n\n​\n\ntoken := os.Getenv(\n\n\"COZE_API_TOKEN\"\n\n)\n\n​\n\nauthCli := coze.NewTokenAuth(token)\n\n​\n\n​\n\n// Init the Coze client through the access_token.\n\n​\n\ncozeCli := coze.NewCozeAPI(authCli, coze.WithBaseURL(os.Getenv(\n\n\"COZE_API_BASE\"\n\n)))\n\n​\n\n​\n\n// step one, create a bot\n\n​\n\nworkspaceID := os.Getenv(\n\n\"WORKSPACE_ID\"\n\n)\n\n​\n\n​\n\n// Call the upload file interface to get the avatar id.\n\n​\n\navatarPath := os.Getenv(\n\n\"IMAGE_FILE_PATH\"\n\n)\n\n​\n\nctx := context.Background()\n\n​\n\nfile, err := os.Open(avatarPath)\n\n​\n\nif\n\nerr !=\n\nnil\n\n{\n\n​\n\nfmt.Println(\n\n\"Error opening file:\"\n\n, err)\n\n​\n\nreturn\n\n​\n\n}\n\n​\n\nuploadReq := &coze.UploadFilesReq{\n\n​\n\nFile: file,\n\n​\n\n}\n\n​\n\navatarInfo, err := cozeCli.Files.Upload(ctx, uploadReq)\n\n​\n\nif\n\nerr !=\n\nnil\n\n{\n\n​\n\nfmt.Println(\n\n\"Error uploading avatar:\"\n\n, err)\n\n​\n\nreturn\n\n​\n\n}\n\n​\n\nfmt.Println(avatarInfo)\n\n​\n\n​\n\n// build the request\n\n​\n\ncreateResp, err := cozeCli.Bots.Create(ctx, &coze.CreateBotsReq{\n\n​\n\nSpaceID:     workspaceID,\n\n​\n\nDescription:\n\n\"the description of your bot\"\n\n,\n\n​\n\nName:\n\n\"the name of your bot\"\n\n,\n\n​\n\nPromptInfo: &coze.BotPromptInfo{\n\n​\n\nPrompt:\n\n\"your prompt\"\n\n,\n\n​\n\n},\n\n​\n\nOnboardingInfo: &coze.BotOnboardingInfo{\n\n​\n\nPrologue:\n\n\"the prologue of your bot\"\n\n,\n\n​\n\nSuggestedQuestions: []\n\nstring\n\n{\n\n\"question 1\"\n\n,\n\n\"question 2\"\n\n},\n\n​\n\n},\n\n​\n\nIconFileID: avatarInfo.FileInfo.ID,\n\n​\n\n})\n\n​\n\nif\n\nerr !=\n\nnil\n\n{\n\n​\n\nfmt.Println(\n\n\"Error creating bot:\"\n\n, err)\n\n​\n\nreturn\n\n​\n\n}\n\n​\n\nbotID := createResp.BotID\n\n​\n\nfmt.Println(createResp)\n\n​\n\nfmt.Println(createResp.LogID())\n\n​\n\n​\n\n//\n\n​\n\n// step two, update the bot, you can update the bot after being created\n\n​\n\n// in this examples, we will update the avatar of the bot\n\n​\n\n​\n\npublishResp, err := cozeCli.Bots.Publish(ctx, &coze.PublishBotsReq{\n\n​\n\nBotID:        botID,\n\n​\n\nConnectorIDs: []\n\nstring\n\n{\n\n\"1024\"\n\n},\n\n​\n\n})\n\n​\n\nif\n\nerr !=\n\nnil\n\n{\n\n​\n\nfmt.Println(\n\n\"Error publishing bot:\"\n\n, err)\n\n​\n\nreturn\n\n​\n\n}\n\n​\n\nfmt.Println(publishResp)\n\n​\n\nfmt.Println(publishResp.LogID())\n\n​\n\n​\n\n//\n\n​\n\n// step three, you can also modify the bot configuration and republish it.\n\n​\n\n// in this examples, we will update the avatar of the bot\n\n​\n\n​\n\nnewFile, err := os.Open(os.Getenv(\n\n\"IMAGE_FILE_PATH\"\n\n))\n\n​\n\nif\n\nerr !=\n\nnil\n\n{\n\n​\n\nfmt.Println(\n\n\"Error opening file:\"\n\n, err)\n\n​\n\nreturn\n\n​\n\n}\n\n​\n\nnewUploadReq := &coze.UploadFilesReq{\n\n​\n\nFile: newFile,\n\n​\n\n}\n\n​\n\nnewAvatarInfo, err := cozeCli.Files.Upload(ctx, newUploadReq)\n\n​\n\nif\n\nerr !=\n\nnil\n\n{\n\n​\n\nfmt.Println(\n\n\"Error uploading new avatar:\"\n\n, err)\n\n​\n\nreturn\n\n​\n\n}\n\n​\n\nfmt.Println(newAvatarInfo)\n\n​\n\nfmt.Println(newAvatarInfo.LogID())\n\n​\n\n​\n\n// Update bot\n\n​\n\nupdateResp, err := cozeCli.Bots.Update(ctx, &coze.UpdateBotsReq{\n\n​\n\nBotID:      botID,\n\n​\n\nIconFileID: newAvatarInfo.FileInfo.ID,\n\n​\n\n})\n\n​\n\nif\n\nerr !=\n\nnil\n\n{\n\n​\n\nfmt.Println(\n\n\"Error updating bot:\"\n\n, err)\n\n​\n\nreturn\n\n​\n\n}\n\n​\n\nfmt.Println(updateResp.LogID())\n\n​\n\n​\n\n// Republish bot\n\n​\n\npublishResp, err = cozeCli.Bots.Publish(ctx, &coze.PublishBotsReq{\n\n​\n\nBotID:        botID,\n\n​\n\nConnectorIDs: []\n\nstring\n\n{\n\n\"1024\"\n\n},\n\n​\n\n})\n\n​\n\nif\n\nerr !=\n\nnil\n\n{\n\n​\n\nfmt.Println(\n\n\"Error republishing bot:\"\n\n, err)\n\n​\n\nreturn\n\n​\n\n}\n\n​\n\nfmt.Println(publishResp)\n\n​\n\nfmt.Println(publishResp.LogID())\n\n​\n\n}\n\n​\n\n​\n\n发起对话\n\n​\n\n​\n\n发起对话\n\n接口用于向指定智能体发起一次对话，支持在对话时添加对话的上下文消息，以便智能体基于历史消息做出合理的回复。开发者可以按需选择响应方式，即流式或非流式响应，响应方式决定了开发者获取智能体回复的方式。\n\n​\n\n流式响应\n\n：智能体在生成回复的同时，将回复消息以数据流的形式逐条发送给客户端。处理结束后，服务端会返回拼接后完整的智能体回复。详细说明可参考\n\n​\n\n流式响应\n\n。\n\n​\n\n非流式响应\n\n：无论对话是否处理完毕，立即发送响应消息。开发者可以通过接口\n\n​\n\n查看对话详情\n\n。查看对话详情确认本次对话处理结束后，再调用\n\n​\n\n查看对话消息详情\n\n接口查看模型回复等完整响应内容。详细说明可参考\n\n​\n\n非流式响应\n\n。\n\n​\n\n本文档以流式响应为例，演示通过 API 方式和智能体对话相关实例代码。你也可以查看\n\nCoze Go SDK 示例代码目录\n\n，查看 chat 接口的其他实现方式，例如非流式响应、对话中发送多模态内容等。\n\n​\n\n示例代码如下：\n\n​\n\n​\n\nGo\n\n复制\n\npackage\n\nmain\n\n​\n\n​\n\nimport\n\n(\n\n​\n\n\"context\"\n\n​\n\n\"errors\"\n\n​\n\n\"fmt\"\n\n​\n\n\"io\"\n\n​\n\n\"os\"\n\n​\n\n\"time\"\n\n​\n\n​\n\n\"github.com/coze-dev/coze-go\"\n\n​\n\n)\n\n​\n\n​\n\nfunc\n\nmain\n\n()\n\n{\n\n​\n\nctx, cancel := context.WithTimeout(context.Background(),\n\n10\n\n*time.Second)\n\n​\n\ndefer\n\ncancel()\n\n​\n\n​\n\n// Get an access_token through personal access token or oauth.\n\n​\n\ntoken := os.Getenv(\n\n\"COZE_API_TOKEN\"\n\n)\n\n​\n\nbotID := os.Getenv(\n\n\"PUBLISHED_BOT_ID\"\n\n)\n\n​\n\nuserID := os.Getenv(\n\n\"USER_ID\"\n\n)\n\n​\n\n​\n\nauthCli := coze.NewTokenAuth(token)\n\n​\n\n​\n\n// Init the Coze client through the access_token.\n\n​\n\ncozeCli := coze.NewCozeAPI(authCli, coze.WithBaseURL(os.Getenv(\n\n\"COZE_API_BASE\"\n\n)))\n\n​\n\n​\n\n//\n\n​\n\n// Step one, create chats\n\n​\n\n// Call the coze.chats().stream() method to create a chats. The create method is a streaming\n\n​\n\n// chats and will return a Flowable ChatEvent. Developers should iterate the iterator to get\n\n​\n\n// chats event and handle them.\n\n​\n\n// //\n\n​\n\nreq := &coze.CreateChatsReq{\n\n​\n\nBotID:  botID,\n\n​\n\nUserID: userID,\n\n​\n\nMessages: []*coze.Message{\n\n​\n\ncoze.BuildUserQuestionText(\n\n\"What can you do?\"\n\n,\n\nnil\n\n),\n\n​\n\n},\n\n​\n\n}\n\n​\n\n​\n\nresp, err := cozeCli.Chat.Stream(ctx, req)\n\n​\n\nif\n\nerr !=\n\nnil\n\n{\n\n​\n\nfmt.Printf(\n\n\"Error starting chats: %v\\n\"\n\n, err)\n\n​\n\nreturn\n\n​\n\n}\n\n​\n\n​\n\ndefer\n\nresp.Close()\n\n​\n\nfor\n\n{\n\n​\n\nevent, err := resp.Recv()\n\n​\n\nif\n\nerrors.Is(err, io.EOF) {\n\n​\n\nfmt.Println(\n\n\"Stream finished\"\n\n)\n\n​\n\nbreak\n\n​\n\n}\n\n​\n\nif\n\nerr !=\n\nnil\n\n{\n\n​\n\nfmt.Println(err)\n\n​\n\nbreak\n\n​\n\n}\n\n​\n\nif\n\nevent.Event == coze.ChatEventConversationMessageDelta {\n\n​\n\nfmt.Print(event.Message.Content)\n\n​\n\n}\n\nelse\n\nif\n\nevent.Event == coze.ChatEventConversationChatCompleted {\n\n​\n\nfmt.Printf(\n\n\"Token usage:%d\\n\"\n\n, event.Chat.Usage.TokenCount)\n\n​\n\n}\n\nelse\n\n{\n\n​\n\nfmt.Printf(\n\n\"\\n\"\n\n)\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\nfmt.Printf(\n\n\"done, log:%s\\n\"\n\n, resp.LogID())\n\n​\n\n}\n\n​\n\n​\n\n上一篇\n\n配置访问密钥\n\n下一篇\n\n安装并使用 Web SDK",
        "links": []
      },
      "markdown": "- 已安装 Coze API Go SDK。详见 ​ 安装 Go SDK 。 ​\n\n- 已实现授权流程，并通过环境变量方式配置了访问密钥。详细说明可参考 ​ 配置访问密钥 。 ​\n\n- 关于创建草稿智能体的完整示例代码，请参见 GitHub 示例 。 ​\n\n- 相关 API 接口描述，请参见： ​\n\n- ​ 创建智能体 。 ​\n\n- ​ 发布智能体 。 ​\n\n- 流式响应 ：智能体在生成回复的同时，将回复消息以数据流的形式逐条发送给客户端。处理结束后，服务端会返回拼接后完整的智能体回复。详细说明可参考 ​ 流式响应 。 ​\n\n- 非流式响应 ：无论对话是否处理完毕，立即发送响应消息。开发者可以通过接口 ​ 查看对话详情 。查看对话详情确认本次对话处理结束后，再调用 ​ 查看对话消息详情 接口查看模型回复等完整响应内容。详细说明可参考 ​ 非流式响应 。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/ui_builder_web_sdk",
      "title": "安装并使用 Web SDK",
      "content": {
        "sections": [],
        "full_text": "安装并使用 Web SDK\n\n本文介绍如何安装并使用扣子 Web SDK，开发者可以参考本文档在自己开发的网站中快速添加一个 AI 应用，为网站集成智能服务。\n\n​\n\n功能简介\n\n​\n\nWeb SDK 是一个轻量级 JavaScript 库，旨在帮助开发者快速将扣子编程上搭建的低代码应用（包括用户界面和业务逻辑）快速、无缝地集成到网站或 Web 页面中。\n\n​\n\n核心优势\n\n：\n\n​\n\n无缝集成：\n\n将已发布的低代码应用作为独立组件嵌入 Web 页面。\n\n​\n\n开箱即用：\n\n集成后，低代码应用的 UI 和逻辑\n\n无需二次开发\n\n即可运行。\n\n​\n\n快速部署：\n\n通过简单的代码引入，可在几分钟内完成集成。\n\n​\n\n场景示例\n\n：\n\n​\n\nWeb SDK 适用于需要在各类网站或 Web 页面中快速集成完整 AI 应用的场景，例如：\n\n​\n\n在内部业务系统中嵌入业务流程 AI 辅助工具，例如报销单填写助手等。\n\n​\n\n在电商平台嵌入交易辅助工具，例如 AI 导购/推荐助手等。\n\n​\n\n在内容平台嵌入内容处理工具，例如文本生成、信息提炼工具等。\n\n​\n\n体验 UI Builder\n\n​\n\n你可以在\n\n扣子 Playground 的 Web SDK\n\n页面体验 Web SDK 的使用效果。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n准备工作\n\n​\n\n环境要求\n\n​\n\nWeb SDK 的浏览器兼容性及运行环境要求如下表所示。\n\n​\n\n​\n\n浏览器\n\n​\n\n版本限制\n\n​\n\nChrome\n\n​\n\n87.0 及以上\n\n​\n\nEdge\n\n​\n\n88.0 及以上\n\n​\n\nSafari\n\n​\n\n14.0 及以上\n\n​\n\nFirefox\n\n​\n\n78.0 及以上\n\n​\n\n​\n\n获取访问密钥\n\n​\n\n访问密钥用于 Web SDK 的身份认证与鉴权。扣子编程提供多种类型的鉴权方式，你可以根据使用场景选择对应的鉴权方式：\n\n​\n\n体验或调试场景\n\n：建议开发者生成一个短期的个人访问令牌（PAT），快速跑通 Web SDK 的整体流程。 具体步骤请参见\n\n添加个人访问令牌\n\n。\n\n​\n\n线上环境\n\n：线上环境应使用 OAuth 鉴权或 SAT 鉴权，详细说明请参考\n\n鉴权方式概述\n\n。\n\n​\n\n权限要求\n\n​\n\n访问密钥必须被授予指定的权限，才能使用 Web SDK 的各项能力。Web SDK 所需的权限列表如下：\n\n​\n\n​\n\n密钥类型\n\n​\n\nPAT / SAT /普通 OAuth\n\n​\n\n渠道 OAuth 访问密钥\n\n​\n\n权限点\n\n​\n\n​\n\nBot管理\n\n​\n\nchat\n\n​\n\n会话管理\n\n​\n\nlistConversation\n\n​\n\ncreateConversation\n\n​\n\neditConversation\n\n​\n\n对话\n\n​\n\ncancelChat\n\n​\n\n文件\n\n​\n\nuploadFile\n\n​\n\n消息\n\n​\n\nlistMessage\n\n​\n\n工作流\n\n​\n\ngetMetadata\n\n​\n\n智能音视频\n\n​\n\ncreateTranscription\n\n​\n\nbotChat\n\n​\n\nlistConversation\n\n​\n\ncreateConversation\n\n​\n\neditConversation\n\n​\n\nuploadFile\n\n​\n\nlistConversationMessage\n\n​\n\ncancelConversationChat\n\n​\n\ncreateTranscription\n\n​\n\n​\n\n​\n\n​\n\n​\n\n快速开始\n\n​\n\n步骤一：发布并获取安装代码\n\n​\n\n1.\n\n将应用发布为 Web SDK，具体步骤请参见\n\n​\n\n发布为 Web SDK\n\n。\n\n​\n\n2.\n\n在低代码应用的编排页面单击右上角的\n\n版本记录\n\n图标，选择指定版本的\n\n更多\n\n图标，选择\n\n发布结果\n\n。\n\n​\n\n3.\n\n确认 Web SDK 发布成功后，单击\n\n安装指引\n\n。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n4.\n\n根据页面提示复制安装代码。此代码将在后续安装 Web SDK 时使用。\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n步骤二：安装 SDK\n\n​\n\n将步骤一中复制好的安装代码粘贴到网页的 <body> 标签内，当页面加载时，Web SDK 的 JavaScript 代码会被自动加载并初始化。\n\n​\n\n​\n\nXML\n\n复制\n\n<\n\nbody\n\n>\n\n​\n\n<!-- 页面内容 -->\n\n​\n\n​\n\n<!-- 粘贴安装代码 -->\n\n​\n\n<\n\ndiv\n\nid\n\n=\n\n\"app\"\n\n></\n\ndiv\n\n>\n\n​\n\n<\n\nscript\n\ntype\n\n=\n\n\"text/javascript\"\n\n>\n\n​\n\nvar\n\nwebSdkScript =\n\ndocument\n\n.\n\ncreateElement\n\n(\n\n'script'\n\n);\n\n​\n\nwebSdkScript.\n\nsrc\n\n=\n\n'https://lf-cdn.coze.cn/obj/unpkg/flow-platform/builder-web-sdk/0.1.0/dist/umd/index.js'\n\n;\n\n​\n\ndocument\n\n.\n\nhead\n\n.\n\nappendChild\n\n(webSdkScript);\n\n​\n\nwebSdkScript.\n\nonload\n\n=\n\nfunction\n\n() {\n\n​\n\nnew\n\nCozeWebSDK\n\n.\n\nAppWebSDK\n\n({\n\n​\n\n\"token\"\n\n:\n\n\"pat_********\"\n\n,\n\n​\n\n\"appId\"\n\n:\n\n\"753014795353776***\"\n\n,\n\n​\n\n\"container\"\n\n:\n\n\"#app\"\n\n,\n\n​\n\n\"userInfo\"\n\n: {\n\n​\n\n\"id\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"url\"\n\n:\n\n\"\"\n\n,\n\n​\n\n\"nickname\"\n\n:\n\n\"User\"\n\n​\n\n}\n\n​\n\n});\n\n​\n\n}\n\n​\n\n</\n\nscript\n\n>\n\n​\n\n</\n\nbody\n\n>\n\n​\n\n​\n\n步骤三：配置客户端属性\n\n​\n\n你需要配置 Web SDK 的初始化参数、用户信息和 UI 效果。\n\n​\n\n客户端属性示例代码\n\n​\n\n配置 Web SDK 客户端属性的示例代码如下：\n\n​\n\n​\n\nTypeScript\n\n复制\n\nconst\n\ncozeWebSDK =\n\nnew\n\nCozeWebSDK\n\n.\n\nAppWebSDK\n\n({\n\n​\n\ntoken\n\n:\n\n'pat_zxzSAzxawer234zASNElEglZxcmWJ5ouCcq12gsAAsqJGALlq7hcOqMcPFV3wEVDiqjrg****'\n\n,\n\n​\n\nappId\n\n:\n\n'740849137970326****'\n\n,\n\n​\n\ncontainer\n\n:\n\n'#app'\n\n,\n\n​\n\n// 用户信息\n\n​\n\nuserInfo\n\n: {\n\n​\n\nid\n\n:\n\n'12345'\n\n,\n\n​\n\nurl\n\n:\n\n'https://lf-coze-web-cdn.coze.cn/obj/coze-web-cn/obric/coze/favicon.***.png'\n\n,\n\n​\n\nnickname\n\n:\n\n'小明'\n\n,\n\n​\n\n},\n\n​\n\nui\n\n: {\n\n​\n\nclassName\n\n:\n\n'my-client'\n\n​\n\n}\n\n​\n\n})\n\n​\n\n​\n\n初始化配置\n\n​\n\n配置 Web SDK 的初始化参数，包括访问密钥、低代码应用 ID 和渲染的容器。\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\ntoken\n\n​\n\nString\n\n​\n\n必选\n\n​\n\npat_zxzSAzxawer234zASNElEglZxcm***\n\n​\n\n指定使用的访问密钥。\n\n​\n\n调试场景可直接使用准备工作中添加的访问密钥；正式上线时建议通过 SAT 或 OAuth 实现鉴权逻辑，并将获取的访问密钥填写在此处。\n\n​\n\nappId\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n740849137970326****\n\n​\n\n低代码应用的 ID。\n\n在低代码应用编排页面的\n\nURL 中，project-ide 参数之后的字符串就是 appId。\n\n​\n\ncontainer\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n#app\n\n​\n\n​\n\n网页中承载 Web SDK 所有交互内容的元素\n\n的 CSS 选择器，Web SDK 会将其所有交互内容渲染至该元素内部。\n\n​\n\n例如：Web SDK 的安装代码中定义了承载元素\n\n<div id=\"app\"></div>\n\n，则\n\ncontainer\n\n的值为\n\n#app\n\n。\n\n​\n\n​\n\n用户信息\n\n​\n\nuserInfo\n\n参数用于配置和低代码应用对话的用户的信息，包含用户头像、昵称和用户 ID，用于在应用交互中标识用户。\n\n​\n\n你可以通过引用变量的方式在应用中动态获取用户的头像和昵称，具体请参见\n\n​\n\n引用变量\n\n。\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nurl\n\n​\n\nString\n\n​\n\n必选\n\n​\n\nhttps://example.com/avatars/user123.png\n\n​\n\n用户头像的 URL 地址，必须是一个可公开访问的地址。SDK 会通过该地址加载并显示用户头像。\n\n​\n\n​\n\nnickname\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n小明\n\n​\n\n用户的昵称，将在应用界面中显示，用于区分不同的对话用户。\n\n​\n\nid\n\n​\n\nString\n\n​\n\n可选\n\n​\n\nuser_123456\n\n​\n\n用户的 ID，即用户在你的网站或应用中的账号 ID。未指定时，Web SDK 会自动为用户分配一个用户 ID。\n\n​\n\n该参数用于在对话时标识具体的用户。\n\n​\n\n​\n\nUI 效果\n\n​\n\nWeb SDK 初始化后，会在页面中生成一个用于承载应用内容的 iframe 元素，\n\nui.className\n\n的值会被添加到该 iframe 的\n\nclass\n\n属性中。开发者可通过这个类名，自定义该 iframe 的显示样式，实现与页面整体风格的适配。\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nclassName\n\n​\n\nString\n\n​\n\n可选\n\n​\n\ncoze-app-sdk\n\n​\n\n为 Web SDK 渲染到页面中的 iframe 元素指定 CSS 类名，开发者可以通过这个类名，自定义样式。\n\n​\n\n不配置时，iframe 使用 Web SDK 的默认样式。\n\n​\n\n例如，若设置为\n\ncoze-app-sdk\n\n，则可在 CSS 中通过\n\n.coze-app-sdk\n\n选择器定义该 iframe 的样式，具体示例请参见\n\n​\n\n完整示例代码\n\n。\n\n​\n\n​\n\n步\n\n骤四：销毁客户端\n\n​\n\n当用户关闭或退出应用时，调用\n\ndestroy\n\n方法销毁客户端以\n\n释放资源、清理界面\n\n。\n\n​\n\n​\n\nTypeScript\n\n复制\n\n<script>\n\n​\n\nconst\n\nclient =\n\nnew\n\nCozeWebSDK\n\n.\n\nAppWebSDK\n\n(options);\n\n​\n\nclient.\n\ndestroy\n\n();\n\n​\n\n</script>\n\n​\n\n​\n\n完整示例代码\n\n​\n\n以下是一段完整的 Web SDK 的代码示例。\n\n​\n\nindex.html\n\nindex.js\n\nmain.css\n\n​\n\nHTML\n\n复制\n\n<!DOCTYPE\n\nhtml\n\n>\n\n​\n\n<\n\nhtml\n\nlang\n\n=\n\n\"en\"\n\n>\n\n​\n\n<\n\nhead\n\n>\n\n​\n\n<\n\nmeta\n\ncharset\n\n=\n\n\"utf-8\"\n\n>\n\n​\n\n<!-- 引入自定义样式文件，用于设置页面基础样式及Web SDK iframe的自定义样式 -->\n\n​\n\n<\n\nlink\n\nrel\n\n=\n\n\"stylesheet\"\n\nhref\n\n=\n\n\"./main.css\"\n\n/>\n\n​\n\n</\n\nhead\n\n>\n\n​\n\n<\n\nbody\n\n>\n\n​\n\n<!-- 引入扣子Web SDK的核心JS库 -->\n\n​\n\n<\n\ndiv\n\nid\n\n=\n\n'app'\n\n></\n\ndiv\n\n>\n\n​\n\n<\n\nscript\n\nsrc\n\n=\n\n\"https://lf-cdn.coze.cn/obj/unpkg/flow-platform/builder-web-sdk/0.1.0/dist/umd/index.js\"\n\n></\n\nscript\n\n>\n\n​\n\n<!-- 引入自定义JS文件，用于配置 Web SDK属性-->\n\n​\n\n<\n\nscript\n\nsrc\n\n=\n\n\"./index.js\"\n\n></\n\nscript\n\n>\n\n​\n\n</\n\nbody\n\n>\n\n​\n\n</\n\nhtml\n\n>\n\n​\n\n​\n\n​\n\n常见问题\n\n​\n\nChat SDK 和 Web SDK 有什么区别？\n\n​\n\nChat SDK 和 Web SDK 均为扣子编程提供的 SDK，区别如下：\n\n​\n\n支持的应用类型不同\n\n​\n\nWeb SDK：仅支持\n\n低代码应用\n\n，且用户界面为 Web 端，不支持小程序端。\n\n​\n\nChat SDK：支持\n\n智能体\n\n和\n\n低代码应用\n\n两种类型，支持小程序端。\n\n​\n\n功能特性差异\n\n​\n\nWeb SDK：低代码应用发布 Web SDK 时，会将低代码应用的\n\n用户界面（UI）和业务逻辑\n\n完整打包发布，集成后可直接在网站中呈现应用的现成交互界面，开发者无需二次开发页面。\n\n​\n\nChat SDK：低代码应用发布 Chat SDK 时，仅包含智能体/低代码应用中的对话流、对话容器部分（Chatbot 类），不包含应用户界面，主要用于实现用户与 AI 智能体或应用的对话相关功能。\n\n​\n\n​\n\n上一篇\n\n快速开始\n\n下一篇\n\n安装并使用 Card SDK",
        "links": [
          {
            "text": "添加个人访问令牌",
            "href": "https://www.coze.cn/open/docs/developer_guides/pat"
          },
          {
            "text": "鉴权方式概述",
            "href": "https://www.coze.cn/open/docs/developer_guides/authentication"
          }
        ]
      },
      "markdown": "- 无缝集成： 将已发布的低代码应用作为独立组件嵌入 Web 页面。 ​\n\n- 开箱即用： 集成后，低代码应用的 UI 和逻辑 无需二次开发 即可运行。 ​\n\n- 快速部署： 通过简单的代码引入，可在几分钟内完成集成。 ​\n\n- 在内部业务系统中嵌入业务流程 AI 辅助工具，例如报销单填写助手等。 ​\n\n- 在电商平台嵌入交易辅助工具，例如 AI 导购/推荐助手等。 ​\n\n- 在内容平台嵌入内容处理工具，例如文本生成、信息提炼工具等。 ​\n\n| 浏览器​ | 版本限制​ |\n| Chrome​ | 87.0 及以上​ |\n| Edge​ | 88.0 及以上​ |\n| Safari​ | 14.0 及以上​ |\n| Firefox​ | 78.0 及以上​ |\n\n- 体验或调试场景 ：建议开发者生成一个短期的个人访问令牌（PAT），快速跑通 Web SDK 的整体流程。 具体步骤请参见 添加个人访问令牌 。 ​\n\n- 线上环境 ：线上环境应使用 OAuth 鉴权或 SAT 鉴权，详细说明请参考 鉴权方式概述 。 ​\n\n| 密钥类型​ | PAT / SAT /普通 OAuth​ | 渠道 OAuth 访问密钥​ |\n| 权限点​​ | Bot管理​chat​会话管理​listConversation​createConversation​editConversation​对话​cancelChat​文件​uploadFile​消息​listMessage​工作流​getMetadata​智能音视频​createTranscription​ | botChat​listConversation​createConversation​editConversation​uploadFile​listConversationMessage​cancelConversationChat​createTranscription​​​​ |\n\n- Bot管理 ​\n\n- chat ​\n\n- 会话管理 ​\n\n- listConversation ​\n\n- createConversation ​\n\n- editConversation ​\n\n- 对话 ​\n\n- cancelChat ​\n\n- 文件 ​\n\n- uploadFile ​\n\n- 消息 ​\n\n- listMessage ​\n\n- 工作流 ​\n\n- getMetadata ​\n\n- 智能音视频 ​\n\n- createTranscription ​\n\n- botChat ​\n\n- listConversation ​\n\n- createConversation ​\n\n- editConversation ​\n\n- uploadFile ​\n\n- listConversationMessage ​\n\n- cancelConversationChat ​\n\n- createTranscription ​\n\n\n\n\n- ​ ​ ​ ​ ​\n\n\n- ​ ​ ​ ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| token​ | String​ | 必选​ | pat_zxzSAzxawer234zASNElEglZxcm***​ | 指定使用的访问密钥。​调试场景可直接使用准备工作中添加的访问密钥；正式上线时建议通过 SAT 或 OAuth 实现鉴权逻辑，并将获取的访问密钥填写在此处。​ |\n| appId​ | String​ | 必选​ | 740849137970326****​ | 低代码应用的 ID。在低代码应用编排页面的URL 中，project-ide 参数之后的字符串就是 appId。​ |\n| container​ | String​ | 必选​ | #app​​ | 网页中承载 Web SDK 所有交互内容的元素的 CSS 选择器，Web SDK 会将其所有交互内容渲染至该元素内部。​例如：Web SDK 的安装代码中定义了承载元素<div id=\"app\"></div>，则container的值为#app。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| url​ | String​ | 必选​ | https://example.com/avatars/user123.png​ | 用户头像的 URL 地址，必须是一个可公开访问的地址。SDK 会通过该地址加载并显示用户头像。​​ |\n| nickname​ | String​ | 必选​ | 小明​ | 用户的昵称，将在应用界面中显示，用于区分不同的对话用户。​ |\n| id​ | String​ | 可选​ | user_123456​ | 用户的 ID，即用户在你的网站或应用中的账号 ID。未指定时，Web SDK 会自动为用户分配一个用户 ID。​该参数用于在对话时标识具体的用户。​ |\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| className​ | String​ | 可选​ | coze-app-sdk​ | 为 Web SDK 渲染到页面中的 iframe 元素指定 CSS 类名，开发者可以通过这个类名，自定义样式。​不配置时，iframe 使用 Web SDK 的默认样式。​例如，若设置为coze-app-sdk，则可在 CSS 中通过.coze-app-sdk选择器定义该 iframe 的样式，具体示例请参见​完整示例代码。​ |\n\n- 支持的应用类型不同 ​\n\n- Web SDK：仅支持 低代码应用 ，且用户界面为 Web 端，不支持小程序端。 ​\n\n- Chat SDK：支持 智能体 和 低代码应用 两种类型，支持小程序端。 ​\n\n- 功能特性差异 ​\n\n- Web SDK：低代码应用发布 Web SDK 时，会将低代码应用的 用户界面（UI）和业务逻辑 完整打包发布，集成后可直接在网站中呈现应用的现成交互界面，开发者无需二次开发页面。 ​\n\n- Chat SDK：低代码应用发布 Chat SDK 时，仅包含智能体/低代码应用中的对话流、对话容器部分（Chatbot 类），不包含应用户界面，主要用于实现用户与 AI 智能体或应用的对话相关功能。 ​"
    },
    {
      "url": "https://www.coze.cn/open/docs/developer_guides/card_sdk",
      "title": "安装并使用 Card SDK",
      "content": {
        "sections": [],
        "full_text": "安装并使用 Card SDK\n\n本文介绍如何安装并使用扣子 Card SDK，开发者可以参考本文档自定义智能体对话消息中的卡片效果。\n\n​\n\n功能简介\n\n​\n\n为了助力开发者打造更具个性化与交互性的消息展示体验，扣子提供 Card SDK。借助该 SDK，开发者可以灵活地定义卡片的结构和内容，并将渲染后的卡片集成到你自行实现的聊天应用中。\n\n​\n\n卡片是一种特殊的消息展示方式，它以结构化的布局和丰富的视觉元素呈现信息。与传统的纯文本消息相比，卡片可以包含图片、按钮、列表等多种元素，使得信息更加直观、易读。这不仅显著提升了用户体验，还提高了信息传递效率，增强了交互性。\n\n​\n\n效果预览\n\n​\n\n​\n\n​\n\n​\n\n​\n\n​\n\n功能简介\n\n​\n\n​\n\n功能\n\n​\n\n说明\n\n​\n\n自定义内容格式\n\n​\n\nCard SDK 提供了强大的自定义功能，允许开发者根据具体需求定义卡片的布局和内容。开发者可以通过配置卡片的 DSL（Domain Specific Language，领域特定语言）数据，指定卡片中各个元素的类型、样式和交互逻辑。无论是简单的文本卡片，还是包含图片、按钮和列表的复杂卡片，都可以通过Card SDK 轻松实现。\n\n​\n\n自定义卡片样式\n\n​\n\nCard SDK 还允许开发者自定义卡片中按钮、图片等组件的渲染逻辑，实现个性化的样式和交互效果。通过\n\ncustomComponentMap\n\n接口，开发者可以为每个组件定义独特的渲染函数，从而实现更加丰富的视觉效果和交互行为。开发者可以根据具体的业务需求，设计出个性化的卡片样式。\n\n​\n\n​\n\n浏览器兼容性\n\n​\n\nCard\n\nSDK\n\n的运行环境要求如下表所示。\n\n​\n\n​\n\n操作系统\n\n​\n\n浏览器\n\n​\n\n版本限制\n\n​\n\nPC\n\n​\n\nChrome\n\n​\n\n87.0 及以上\n\n​\n\n​\n\nEdge\n\n​\n\n100.0 及以上\n\n​\n\n​\n\nSafari\n\n​\n\n14.0 及以上\n\n​\n\n​\n\nFirefox\n\n​\n\n79.0 及以上\n\n​\n\nAndroid\n\n​\n\nChrome\n\n​\n\n100.0 及以上\n\n​\n\n​\n\nEdge\n\n​\n\n100.0 及以上\n\n​\n\niOS\n\n​\n\n​\n\nChrome\n\n​\n\n87.0 及以上\n\n​\n\n​\n\nSafari\n\n​\n\n14.0 及以上\n\n​\n\n​\n\n配置流程\n\n​\n\n步骤一：发布智能体\n\n​\n\n在智能体的发布页面，选择 Chat SDK，并单击\n\n发布\n\n。发布的详细流程可参考\n\n​\n\n发布到 Chat SDK\n\n。\n\n​\n\n步骤二：安装 Card SDK\n\n​\n\n创建一个新的 HTML 页面，并将以下代码添加到 <body>\n\n的 <s\n\ncript> 标签中，保存并运行后会自动加载 Card SDK 的 JavaScript 代码。\n\n​\n\n说明\n\n示例代码中的版本号（1.2.0-beta.8）需要替换为 Chat SDK 最新的版本号，版本信息请参见\n\n​\n\nChat SDK 发布历史\n\n。\n\n​\n\n​\n\n​\n\nJavaScript\n\n复制\n\nlet\n\nc =\n\ndocument\n\n.\n\ncreateElement\n\n(\n\n'script'\n\n);\n\n​\n\nc.\n\nsrc\n\n=\n\n'https://lf-cdn.coze.cn/obj/unpkg/flow-platform/chat-app-sdk/1.2.0-beta.13/libs/cn/ui.js'\n\n;\n\n​\n\ndocument\n\n.\n\nbody\n\n.\n\nappendChild\n\n(c);\n\n​\n\n​\n\n步\n\n骤三\n\n：配置卡片属性\n\n​\n\n示例代码\n\n​\n\n以下是基于 React 框架编写的示例代码，用于渲染卡片布局。\n\n​\n\n​\n\nJavaScript\n\n复制\n\nimport\n\nReact\n\n, { useCallback, useEffect, useRef }\n\nfrom\n\n'react'\n\n;\n\n​\n\n​\n\n// 定义 CozeCard 组件，用于创建和管理 CozeWebSDK.WebCardRuntime 实例\n\n​\n\nconst\n\nCozeCard\n\n= () => {\n\n​\n\n// 使用 useRef 创建一个可变的引用对象，用于保存 CozeWebSDK.WebCardRuntime 实例\n\n​\n\nconst\n\nclientRef =\n\nuseRef\n\n();\n\n​\n\n​\n\n// 使用 useCallback 缓存函数，避免组件重新渲染时函数重新创建\n\n​\n\nconst\n\ngenCard =\n\nuseCallback\n\n(\n\n(\n\nelem\n\n) =>\n\n{\n\n​\n\n// 如果传入的元素为空，直接返回\n\n​\n\nif\n\n(!elem) {\n\n​\n\nreturn\n\n;data\n\n​\n\n}\n\n​\n\n// 如果之前已经存在 CozeWebSDK.WebCardRuntime 实例，先销毁它\n\n​\n\nif\n\n(clientRef.\n\ncurrent\n\n) {\n\n​\n\nclientRef.\n\ncurrent\n\n.\n\ndestroy\n\n();\n\n​\n\n}\n\n​\n\n// 创建新的 CozeWebSDK.WebCardRuntime 实例并保存到 clientRef 中\n\n​\n\nclientRef.\n\ncurrent\n\n=\n\nnew\n\nCozeWebSDK\n\n.\n\nWebCardRuntime\n\n({\n\n​\n\n// 指定要渲染的 DOM 元素\n\n​\n\nel\n\n: elem,\n\n​\n\n// 自定义组件映射，定义特定组件的渲染逻辑\n\n​\n\ncustomComponentMap\n\n: {\n\n​\n\n// 自定义 NewImage 组件的渲染逻辑\n\n​\n\n'@flowpd/cici-components/NewImage'\n\n:\n\n(\n\n{ name, element, props }\n\n) =>\n\n{\n\n​\n\n// 打印开发调试信息\n\n​\n\nconsole\n\n.\n\nlog\n\n(\n\n\"[dev]\"\n\n, { name, element, props });\n\n​\n\n// 设置元素的 HTML 内容\n\n​\n\nelement.\n\ninnerHTML\n\n=\n\n`Test`\n\n;\n\n​\n\n// 设置元素的宽度\n\n​\n\nelement.\n\nstyle\n\n.\n\nwidth\n\n=\n\n'100px'\n\n;\n\n​\n\n// 设置元素的高度\n\n​\n\nelement.\n\nstyle\n\n.\n\nheight\n\n=\n\n'100px'\n\n;\n\n​\n\n// 设置元素的背景颜色\n\n​\n\nelement.\n\nstyle\n\n.\n\nbackground\n\n=\n\n'red'\n\n;\n\n​\n\n// 返回一个销毁函数，用于处理组件卸载时的清理工作\n\n​\n\nreturn\n\n() =>\n\n{\n\n​\n\n// destroy, 例如react 等问题\n\n​\n\n};\n\n​\n\n},\n\n​\n\n// 自定义 ColumnLayout1_2 组件的渲染逻辑\n\n​\n\n'@flowpd/cici-components/ColumnLayout1_2'\n\n:\n\n(\n\n{ name, element, props, renderChildren }\n\n) =>\n\n{\n\n​\n\n// 从 props 中解构出 Columns 属性\n\n​\n\nconst\n\n{\n\nColumns\n\n} = props;\n\n​\n\n// 遍历 Columns 数组，渲染每个子元素\n\n​\n\nColumns\n\n.\n\nmap\n\n(\n\n(\n\ncolumn\n\n) =>\n\n{\n\n​\n\nconst\n\n{ content } = column;\n\n​\n\nconst\n\nelem =\n\nrenderChildren\n\n(\n\ncontent\n\n());\n\n​\n\nelement.\n\nappendChild\n\n(elem);\n\n​\n\n});\n\n​\n\n// 打印开发调试信息\n\n​\n\nconsole\n\n.\n\nlog\n\n(\n\n\"[dev]\"\n\n, { name, element, props });\n\n​\n\n// 设置元素的背景颜色\n\n​\n\nelement.\n\nstyle\n\n.\n\nbackground\n\n=\n\n'yellow'\n\n;\n\n​\n\n// 设置元素的显示方式为弹性布局\n\n​\n\nelement.\n\nstyle\n\n.\n\ndisplay\n\n=\n\n'flex'\n\n;\n\n​\n\n},\n\n​\n\n},\n\n​\n\n// 运行时配置选项\n\n​\n\nruntimeOptions\n\n: {\n\n​\n\n// 解析后的 JSON 数据，定义组件的结构和属性\n\n​\n\ndsl\n\n:\n\nJSON\n\n.\n\nparse\n\n(\n\n​\n\n'{\"elements\":{\"7c1EN9VHwU\":{\"id\":\"7c1EN9VHwU\",\"name\":\"FlowpdCiciComponentsColumnLayout1_2\",\"type\":\"@flowpd/cici-components/ColumnLayout1_2\",\"props\":{\"Columns\":[{\"children\":[\"DQKOI54sJV\"],\"config\":{\"vertical\":\"top\",\"width\":\"auto\"},\"type\":\"slot\"},{\"children\":[\"FE8Y2GcSwb\",\"L3gNU6QxiI\"],\"config\":{\"vertical\":\"top\",\"weight\":2,\"width\":\"weighted\"},\"type\":\"slot\"}],\"action\":\"enableUrl\",\"backgroundColor\":\"transparent\",\"enableClickEvent\":true,\"url\":{\"type\":\"expression\",\"value\":\"{{url}}\"}},\"directives\":{}},\"DQKOI54sJV\":{\"id\":\"DQKOI54sJV\",\"name\":\"FlowpdCiciComponentsNewImage\",\"type\":\"@flowpd/cici-components/NewImage\",\"props\":{\"action\":\"enableUrl\",\"crop\":\"aspectFill\",\"enableClickEvent\":false,\"enableCrop\":false,\"fixedSize\":\"medium\",\"mode\":\"fixed\",\"ratio\":\"1:1\",\"src\":{\"type\":\"expression\",\"value\":\"{{image}}\"}},\"directives\":{}},\"FE8Y2GcSwb\":{\"id\":\"FE8Y2GcSwb\",\"name\":\"FlowpdCiciComponentsText\",\"type\":\"@flowpd/cici-components/Text\",\"props\":{\"action\":\"enableUrl\",\"color\":\"neutral-100\",\"content\":{\"type\":\"expression\",\"value\":\"{{title}}\"},\"enableClickEvent\":false,\"enableLines\":true,\"fontSize\":\"large\",\"fontWeight\":\"bold\",\"lines\":1,\"textAlign\":\"left\"},\"directives\":{}},\"L3gNU6QxiI\":{\"id\":\"L3gNU6QxiI\",\"name\":\"FlowpdCiciComponentsText\",\"type\":\"@flowpd/cici-components/Text\",\"props\":{\"action\":\"enableUrl\",\"color\":\"neutral-70\",\"content\":{\"type\":\"expression\",\"value\":\"{{content}}\"},\"enableClickEvent\":false,\"enableLines\":true,\"fontSize\":\"small\",\"fontWeight\":\"normal\",\"lines\":2,\"textAlign\":\"left\"},\"directives\":{}},\"root\":{\"id\":\"root\",\"name\":\"Root\",\"type\":\"@flowpd/cici-components/PageContainer\",\"children\":[\"7c1EN9VHwU\"],\"directives\":{}}},\"rootID\":\"root\",\"variables\":{\"content\":{\"ID\":\"content\",\"name\":\"content\",\"defaultValue\":\"26/22℃ 无持续风向3-4级 28/24℃ 无持续风向<3级 30/25℃ 无持续风向<3级 26/22℃ 无持续风向3-4级 28/24℃ 无持续风向<3级 30/25℃ 无持续风向<3级\"},\"image\":{\"ID\":\"image\",\"name\":\"image\",\"defaultValue\":\"\"},\"title\":{\"ID\":\"title\",\"name\":\"title\",\"defaultValue\":\"【深圳天气预报15天_深圳天气预报15天查询】-中国天气网\"},\"url\":{\"ID\":\"url\",\"name\":\"url\"}}}'\n\n​\n\n),\n\n​\n\n// 是否只读\n\n​\n\nreadonly\n\n:\n\nfalse\n\n,\n\n​\n\n// 是否强制远程加载\n\n​\n\nremoteForce\n\n:\n\nfalse\n\n,\n\n​\n\n// 主题样式\n\n​\n\ntheme\n\n:\n\n'dark'\n\n,\n\n​\n\n// 语言设置\n\n​\n\nlang\n\n:\n\n'en'\n\n,\n\n​\n\n// 渲染完成后的回调函数\n\n​\n\nafterRender\n\n:\n\n() =>\n\n{\n\n​\n\nconsole\n\n.\n\nlog\n\n(\n\n'[dev] afterRender'\n\n);\n\n​\n\n},\n\n​\n\n},\n\n​\n\n});\n\n​\n\n}, []);\n\n​\n\n​\n\n// 使用 useEffect 处理组件卸载时的清理工作\n\n​\n\nuseEffect\n\n(\n\n() =>\n\n{\n\n​\n\n// 返回一个清理函数，在组件卸载时销毁 CozeWebSDK.WebCardRuntime 实例\n\n​\n\nreturn\n\n() =>\n\n{\n\n​\n\nclientRef.\n\ncurrent\n\n?.\n\ndestroy\n\n();\n\n​\n\n};\n\n​\n\n}, []);\n\n​\n\n​\n\n// 返回组件的 JSX 结构\n\n​\n\nreturn\n\n(\n\n​\n\n<>\n\n​\n\n{/* 定义一个按钮，点击时更新运行时的主题为 light */}\n\n​\n\n<\n\nbutton\n\n​\n\nonClick\n\n=\n\n{()\n\n=>\n\n{\n\n​\n\nclientRef.current?.updateRuntimeOptions({\n\n​\n\ntheme: 'light',\n\n​\n\n});\n\n​\n\n}}\n\n​\n\n>\n\n​\n\nChangeTheme\n\n​\n\n</\n\nbutton\n\n>\n\n​\n\n{/* 定义一个 div 元素，使用 ref 绑定 genCard 函数，用于初始化 CozeWebSDK.WebCardRuntime 实例 */}\n\n​\n\n<\n\ndiv\n\nref\n\n=\n\n{elem\n\n=>\n\ngenCard(elem)} style={{\n\n​\n\nmargin: '10px',\n\n​\n\nwidth: '500px'\n\n​\n\n}} />\n\n​\n\n</>\n\n​\n\n);\n\n​\n\n};\n\n​\n\n​\n\n// 定义 TestCardDemo 组件，用于渲染两个 CozeCard 组件\n\n​\n\nconst\n\nTestCardDemo\n\n:\n\nReact\n\n.\n\nFC\n\n=\n\n() =>\n\n{\n\n​\n\nreturn\n\n(\n\n​\n\n<\n\ndiv\n\n>\n\n​\n\n<\n\nCozeCard\n\n/>\n\n​\n\n<\n\nCozeCard\n\n/>\n\n​\n\n</\n\ndiv\n\n>\n\n​\n\n);\n\n​\n\n};\n\n​\n\n​\n\n// 导出 TestCardDemo 组件，供其他模块使用\n\n​\n\nexport\n\ndefault\n\nTestCardDemo\n\n;\n\n​\n\n​\n\n卡片参数\n\n​\n\n卡片初始化和个性化配置\n\n的关键参数说明如下表所示。\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n说明\n\n​\n\nel\n\n​\n\nHTML Element\n\n​\n\n必选\n\n​\n\n卡片需要渲染的 HTML 元素。\n\n​\n\ncustomComponentMap\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n自定义组件样式，其中 key 为组件的名称。你可以从 data 字段的卡片配置中获取组件名称。例如：@flowpd/cici-components/NewImage。\n\n​\n\nruntimeOptions\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n运行时的选项。\n\n​\n\nruntimeOptions.dsl\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\nDSL 数据，定义卡片的结构和内容。\n\n​\n\nruntimeOptions.remoteForce\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n是否每次都从远程拉取组件。\n\n​\n\ntrue\n\n：每次自动拉取。\n\n​\n\nfalse\n\n：不自动拉取。\n\n​\n\nruntimeOptions.debug\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n是否打印报错信息。\n\n​\n\ntrue\n\n：打印。\n\n​\n\nfalse\n\n：不打印。\n\n​\n\nruntimeOptions.readonly\n\n​\n\nBoolean\n\n​\n\n可选\n\n​\n\n是否开启只读模式，只读模式下卡片的交互效果不生效，例如无法跳转到其他网页等。\n\n​\n\nruntimeOptions.lang\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n设置卡片内容的语言。例如 zh。\n\n​\n\nruntimeOptions.theme\n\n​\n\nString\n\n​\n\n可选\n\n​\n\n卡片的深浅模式。\n\n​\n\nlight\n\n：浅色模式。\n\n​\n\ndark\n\n：深色模式。\n\n​\n\nruntimeOptions.afterRender\n\n​\n\nFunction\n\n​\n\n可选\n\n​\n\n回调函数，在组件加载成功时自动触发。\n\n​\n\nruntimeOptions.onError\n\n​\n\nFunction\n\n​\n\n可选\n\n​\n\n回调函数，在渲染卡片失败时自动触发。\n\n​\n\nruntimeOptions.eventCallbacks\n\n​\n\nObject\n\n​\n\n可选\n\n​\n\n交互事件的回调函数，包括：\n\n​\n\nonElementOut（targetElemtent, linkurl）=> void\n\n：当鼠标从卡片链接上移出的时候，触发此函数。\n\n​\n\nonElementOver（targetElemtent, linkurl）=> void\n\n：当鼠标在卡片链接上移动的时候，触发此函数。\n\n​\n\nsendMsg\n\n：当点击发送消息按钮时触发此函数。\n\n​\n\npreviewImage（{url}）=> void\n\n：当点击图片的时候触发此函数。\n\n​\n\n​\n\n自定义卡片组件的样式\n\n​\n\n卡片中的组件使用默认的展示效果，你也可以通过 Card SDK 的\n\ncustomComponentMap\n\n接口自定义组件的渲染逻辑，实现个性化的样式和交互效果。\n\n​\n\ncustomComponentMap\n\n接口的结构如下：\n\n​\n\n​\n\nTypeScript\n\n复制\n\ntype\n\nDestoryFunc\n\n=\n\n() =>\n\nvoid\n\n;\n\n​\n\ntype\n\nRenderCustomComponentFunc\n\n=\n\n(\n\nparams: {\n\n​\n\nname:\n\nstring\n\n,\n\n​\n\nelement: HTMLDivElement,\n\n​\n\nprops: Record<\n\nstring\n\n,\n\nany\n\n>,\n\n​\n\nrenderChildren: (node: React.ReactNode) => HTMLDivElement}\n\n​\n\n) =>\n\nDestoryFunc\n\n|\n\nvoid\n\n;\n\n​\n\n​\n\ninterface\n\n{\n\n​\n\ncustomComponentMap?:\n\nRecord\n\n<\n\nstring\n\n,\n\nRenderCustomComponentFunc\n\n>;\n\n​\n\n}\n\n​\n\n​\n\n说明：\n\n​\n\nRenderCustomComponentFunc\n\n是用于渲染卡片组件的渲染函数。你需要自行实现该函数，函数会接收到卡片组件传递的参数，并返回一个销毁函数。RenderCustomComponentFunc 支持的属性设置如下：\n\n​\n\n​\n\n参数\n\n​\n\n类型\n\n​\n\n是否必选\n\n​\n\n示例\n\n​\n\n说明\n\n​\n\nname\n\n​\n\nString\n\n​\n\n必选\n\n​\n\n@flowpd/cici-components/NewImage\n\n​\n\n元素的名称，通常用于标识和描述元素。\n\n​\n\nelement\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\n{ style: { width: '100px', height: '100px' } }\n\n​\n\n指定挂载自定义组件的 HTML 元素，默认为一个空的 <div> 容器。\n\n​\n\nprops\n\n​\n\nObject\n\n​\n\n必选\n\n​\n\nprops:\n\n​\n\n{\n\n​\n\nblockId:{\n\nelement.id\n\n}\n\n​\n\nchildren: {子节点}\n\n​\n\nlang: zh\n\n​\n\ncardState： （dsl.status || {})\n\n​\n\n...elementProps (处理后的）\n\n​\n\n}\n\n​\n\n渲染组件时使用的属性，你可以从浏览器的开发者工具中查看 props 属性的值。\n\n​\n\nrenderChildren\n\n​\n\nFunction\n\n​\n\n必选\n\n​\n\n-\n\n​\n\n渲染子组件的方法。如果组件中有子组件，可以使用 renderChildren 函数将子组件渲染到指定的 HTML 元素中。\n\n​\n\n​\n\nRenderCustomComponentFunc\n\n的返回值是一个销毁函数，不需要某个组件时可以调用此函数销毁组件。你可以根据业务场景按需选择是否销毁组件。\n\n​\n\n设置样式的示例代码\n\n​\n\n以下是通过\n\ncustomComponentMap\n\n接口为组件 @flowpd/cici-components/NewImage 定制样式的示例代码。\n\n​\n\n​\n\nJavaScript\n\n复制\n\ncustomComponentMap\n\n: {\n\n​\n\n'@flowpd/cici-components/NewImage'\n\n:\n\n(\n\n{ name, element, props }\n\n) =>\n\n{\n\n​\n\nelement.\n\nstyle\n\n.\n\nwidth\n\n=\n\n'100px'\n\n;\n\n​\n\nelement.\n\nstyle\n\n.\n\nheight\n\n=\n\n'100px'\n\n;\n\n​\n\nconst\n\nrenderRoot =\n\ncreateRoot\n\n(element);\n\n//使用react渲染组件\n\n​\n\nrenderRoot.\n\nrender\n\n(\n\n<\n\ndiv\n\nstyle\n\n=\n\n{{\n\n​\n\nwidth:\n\n'\n\n100\n\n%',\n\n​\n\nheight:\n\n'\n\n100\n\n%',\n\n​\n\nbackground:\n\n'\n\nred\n\n',\n\n​\n\n}}>\n\n​\n\nImage Test\n\n​\n\n</\n\ndiv\n\n>\n\n);\n\n​\n\nreturn\n\n() =>\n\n{\n\n​\n\nrenderRoot.\n\nunmount\n\n();\n\n//销毁函数\n\n​\n\n}\n\n​\n\n}\n\n​\n\n}\n\n​\n\n​\n\n常见问题\n\n​\n\nCard SDK 可以在 Chat SDK 中使用吗？\n\n​\n\n集成 Chat SDK 后无需再集成 Card SDK。Chat SDK 本身已内置对卡片功能的支持，无需额外集成 Card SDK。如果你的聊天应用中未使用 Chat SDK，但需要实现卡片效果，可以直接使用 Card SDK 将渲染后的卡片集成到你自行实现的聊天应用中。\n\n​\n\n​\n\n​\n\n上一篇\n\n安装并使用 Web SDK",
        "links": []
      },
      "markdown": "| 功能​ | 说明​ |\n| 自定义内容格式​ | Card SDK 提供了强大的自定义功能，允许开发者根据具体需求定义卡片的布局和内容。开发者可以通过配置卡片的 DSL（Domain Specific Language，领域特定语言）数据，指定卡片中各个元素的类型、样式和交互逻辑。无论是简单的文本卡片，还是包含图片、按钮和列表的复杂卡片，都可以通过Card SDK 轻松实现。​ |\n| 自定义卡片样式​ | Card SDK 还允许开发者自定义卡片中按钮、图片等组件的渲染逻辑，实现个性化的样式和交互效果。通过customComponentMap接口，开发者可以为每个组件定义独特的渲染函数，从而实现更加丰富的视觉效果和交互行为。开发者可以根据具体的业务需求，设计出个性化的卡片样式。​ |\n\n| 操作系统​ | 浏览器​ | 版本限制​ |\n| PC​ | Chrome​ | 87.0 及以上​ |\n| ​ | Edge​ | 100.0 及以上​ |\n| ​ | Safari​ | 14.0 及以上​ |\n| ​ | Firefox​ | 79.0 及以上​ |\n| Android​ | Chrome​ | 100.0 及以上​ |\n| ​ | Edge​ | 100.0 及以上​ |\n| iOS​​ | Chrome​ | 87.0 及以上​ |\n| ​ | Safari​ | 14.0 及以上​ |\n\n| 参数​ | 类型​ | 是否必选​ | 说明​ |\n| el​ | HTML Element​ | 必选​ | 卡片需要渲染的 HTML 元素。​ |\n| customComponentMap​ | Object​ | 必选​ | 自定义组件样式，其中 key 为组件的名称。你可以从 data 字段的卡片配置中获取组件名称。例如：@flowpd/cici-components/NewImage。​ |\n| runtimeOptions​ | Object​ | 可选​ | 运行时的选项。​ |\n| runtimeOptions.dsl​ | Object​ | 可选​ | DSL 数据，定义卡片的结构和内容。​ |\n| runtimeOptions.remoteForce​ | Boolean​ | 可选​ | 是否每次都从远程拉取组件。​true：每次自动拉取。​false：不自动拉取。​ |\n| runtimeOptions.debug​ | Boolean​ | 可选​ | 是否打印报错信息。​true：打印。​false：不打印。​ |\n| runtimeOptions.readonly​ | Boolean​ | 可选​ | 是否开启只读模式，只读模式下卡片的交互效果不生效，例如无法跳转到其他网页等。​ |\n| runtimeOptions.lang​ | String​ | 可选​ | 设置卡片内容的语言。例如 zh。​ |\n| runtimeOptions.theme​ | String​ | 可选​ | 卡片的深浅模式。​light：浅色模式。​dark：深色模式。​ |\n| runtimeOptions.afterRender​ | Function​ | 可选​ | 回调函数，在组件加载成功时自动触发。​ |\n| runtimeOptions.onError​ | Function​ | 可选​ | 回调函数，在渲染卡片失败时自动触发。​ |\n| runtimeOptions.eventCallbacks​ | Object​ | 可选​ | 交互事件的回调函数，包括：​onElementOut（targetElemtent, linkurl）=> void：当鼠标从卡片链接上移出的时候，触发此函数。​onElementOver（targetElemtent, linkurl）=> void：当鼠标在卡片链接上移动的时候，触发此函数。​sendMsg：当点击发送消息按钮时触发此函数。​previewImage（{url}）=> void：当点击图片的时候触发此函数。​ |\n\n- true ：每次自动拉取。 ​\n\n- false ：不自动拉取。 ​\n\n- true ：打印。 ​\n\n- false ：不打印。 ​\n\n- light ：浅色模式。 ​\n\n- dark ：深色模式。 ​\n\n- onElementOut（targetElemtent, linkurl）=> void ：当鼠标从卡片链接上移出的时候，触发此函数。 ​\n\n- onElementOver（targetElemtent, linkurl）=> void ：当鼠标在卡片链接上移动的时候，触发此函数。 ​\n\n- sendMsg ：当点击发送消息按钮时触发此函数。 ​\n\n- previewImage（{url}）=> void ：当点击图片的时候触发此函数。 ​\n\n- RenderCustomComponentFunc 是用于渲染卡片组件的渲染函数。你需要自行实现该函数，函数会接收到卡片组件传递的参数，并返回一个销毁函数。RenderCustomComponentFunc 支持的属性设置如下： ​\n\n- ​ 参数 ​ 类型 ​ 是否必选 ​ 示例 ​ 说明 ​ name ​ String ​ 必选 ​ @flowpd/cici-components/NewImage ​ 元素的名称，通常用于标识和描述元素。 ​ element ​ Object ​ 必选 ​ { style: { width: '100px', height: '100px' } } ​ 指定挂载自定义组件的 HTML 元素，默认为一个空的 <div> 容器。 ​ props ​ Object ​ 必选 ​ props: ​ { ​ blockId:{ element.id } ​ children: {子节点} ​ lang: zh ​ cardState： （dsl.status || {}) ​ ...elementProps (处理后的） ​ } ​ 渲染组件时使用的属性，你可以从浏览器的开发者工具中查看 props 属性的值。 ​ renderChildren ​ Function ​ 必选 ​ - ​ 渲染子组件的方法。如果组件中有子组件，可以使用 renderChildren 函数将子组件渲染到指定的 HTML 元素中。 ​ ​\n\n| 参数​ | 类型​ | 是否必选​ | 示例​ | 说明​ |\n| name​ | String​ | 必选​ | @flowpd/cici-components/NewImage​ | 元素的名称，通常用于标识和描述元素。​ |\n| element​ | Object​ | 必选​ | { style: { width: '100px', height: '100px' } }​ | 指定挂载自定义组件的 HTML 元素，默认为一个空的 <div> 容器。​ |\n| props​ | Object​ | 必选​ | props:​{​blockId:{element.id}​children: {子节点}​lang: zh​cardState： （dsl.status || {})​...elementProps (处理后的）​}​ | 渲染组件时使用的属性，你可以从浏览器的开发者工具中查看 props 属性的值。​ |\n| renderChildren​ | Function​ | 必选​ | -​ | 渲染子组件的方法。如果组件中有子组件，可以使用 renderChildren 函数将子组件渲染到指定的 HTML 元素中。​ |\n\n- RenderCustomComponentFunc 的返回值是一个销毁函数，不需要某个组件时可以调用此函数销毁组件。你可以根据业务场景按需选择是否销毁组件。 ​"
    }
  ],
  "links": [
    {
      "text": "模型能力差异",
      "href": "https://www.coze.cn/open/docs/developer_guides/model_api_param_support"
    },
    {
      "text": "执行工作流",
      "href": "https://www.coze.cn/open/docs/developer_guides/workflow_run"
    },
    {
      "text": "创建组织",
      "href": "https://www.coze.cn/open/docs/developer_guides/add_organization_people"
    },
    {
      "text": "查询插件列表",
      "href": "https://www.coze.cn/open/docs/developer_guides/list_plugin"
    },
    {
      "text": "查询工作流异步执行结果",
      "href": "https://www.coze.cn/open/docs/developer_guides/workflow_history"
    },
    {
      "text": "更新对话配置",
      "href": "https://www.coze.cn/open/docs/developer_guides/streaming_chat_event#71628d9c"
    },
    {
      "text": "上传文件",
      "href": "https://www.coze.cn/open/docs/developer_guides/upload_files"
    },
    {
      "text": "上传文件",
      "href": "https://www.coze.cn/open/docs/developer_guides/upload_files"
    },
    {
      "text": "查看声纹组列表",
      "href": "https://www.coze.cn/open/docs/developer_guides/list_voiceprint_group"
    },
    {
      "text": "系统音色列表",
      "href": "https://www.coze.cn/open/docs/dev_how_to_guides/sys_voice"
    },
    {
      "text": "系统音色列表",
      "href": "https://www.coze.cn/open/docs/dev_how_to_guides/sys_voice"
    },
    {
      "text": "系统音色列表",
      "href": "https://www.coze.cn/open/docs/dev_how_to_guides/sys_voice"
    },
    {
      "text": "查看声纹组列表",
      "href": "https://www.coze.cn/open/docs/developer_guides/list_voiceprint_group"
    },
    {
      "text": "系统音色列表",
      "href": "https://www.coze.cn/open/docs/dev_how_to_guides/sys_voice"
    },
    {
      "text": "查看智能体列表",
      "href": "https://www.coze.cn/open/docs/developer_guides/bots_list_draft_published"
    },
    {
      "text": "添加个人访问令牌",
      "href": "https://www.coze.cn/open/docs/developer_guides/pat"
    },
    {
      "text": "鉴权方式概述",
      "href": "https://www.coze.cn/open/docs/developer_guides/authentication"
    }
  ]
}