# 发起对话

> 来源: https://www.coze.cn/open/docs/developer_guides/chat_v3

- 流式响应 ：智能体在生成回复的同时，将回复消息以数据流的形式逐条发送给客户端。处理结束后，服务端会返回一条完整的智能体回复。详细说明可参考 流式响应 。 ​

- 非流式响应 ：无论对话是否处理完毕，立即发送响应消息。开发者可以通过接口 查看对话详情 确认本次对话处理结束后，再调用 查看对话消息详情 接口查看模型回复等完整响应内容。详细说明可参考 非流式响应 。 ​

- 创建会话： ​

- 主要用于初始化一个新的会话环境。 ​

- 一个会话是Bot和用户之间的一段问答交互，可以包含多条消息。 ​

- 创建会话时，可以选择携带初始的消息内容。 ​

- 发起对话： ​

- 用于在已经存在的会话中发起一次对话。 ​

- 支持添加上下文和流式响应。 ​

- 可以基于历史消息进行上下文关联，提供更符合语境的回复。 ​

| 请求方式​ | POST​ |
| 请求地址​ | ​Plain Text复制https://api.coze.cn/v3/chat​​ |
| 权限​ | chat​确保调用该接口使用的个人令牌开通了chat权限，详细信息参考鉴权方式。​ |
| 接口说明​ | 调用此接口发起一次对话，支持添加上下文和流式响应。​ |

| 参数​ | 取值​ | 说明​ |
| Authorization​ | Bearer$Access_Token​ | 用于验证客户端身份的访问令牌。你可以在扣子编程中生成访问令牌，详细信息，参考​准备工作。​ |
| Content-Type​ | application/json​ | 解释请求正文的方式。​ |

| 参数​ | 类型​ | 是否必选​ | 说明​ |
| conversation_id​ | String​ | 可选​ | 标识对话发生在哪一次会话中。​会话是智能体和用户之间的一段问答交互。一个会话包含一条或多条消息。对话是会话中对智能体的一次调用，智能体会将对话中产生的消息添加到会话中。​可以使用已创建的会话，会话中已存在的消息将作为上下文传递给模型。创建会话的方式可参考​创建会话。​对于一问一答等不需要区分 conversation 的场合可不传该参数，系统会自动生成一个会话。​说明一个会话中，只能有一个进行中的对话，否则调用此接口时会报错 4016。​​ |

- 可以使用已创建的会话，会话中已存在的消息将作为上下文传递给模型。创建会话的方式可参考 ​ 创建会话 。 ​

- 对于一问一答等不需要区分 conversation 的场合可不传该参数，系统会自动生成一个会话。 ​


- ​ ​ ​ ​ ​


- ​

- 会话中的消息 ：调用 发起对话 接口时，如果指定了会话 ID，会话中已有的消息会作为上下文传递给模型。 ​

- additional_messages 中的消息 ：如果 additional_messages 中有多条消息，则最后一条会作为本次用户 Query，其他消息为上下文。 ​


- ​

- 以下消息列表是一个完整的上下文消息。其中： ​

- 第 2 行是用户传入的历史消息 ​

- 第 4 行是模型返回的历史消息 ​

- ​


- 请求示例如下： ​

- ​


- 在对话中可以通过 additional_messages 增加本次对话的 query。这些消息会和对话中已有的消息一起作为上下文被传递给大模型。 ​

- ​


- 你可以从智能体的回复中看出这一次会话是符合上下文语境的。响应信息如下： ​

- ​